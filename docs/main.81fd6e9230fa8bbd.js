"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[792],{1076:(Rt,Be,U)=>{U.d(Be,{Am:()=>hn,Bd:()=>je,FA:()=>yt,Fy:()=>et,I9:()=>Kt,Im:()=>Nr,Ku:()=>Ke,Ll:()=>xt,T9:()=>Ae,Uj:()=>be,XA:()=>Ge,ZQ:()=>Qe,bD:()=>Fr,c1:()=>Vn,cY:()=>Te,eX:()=>Ne,g:()=>ue,gR:()=>Er,hp:()=>pr,jZ:()=>gt,lT:()=>en,lV:()=>lr,mS:()=>rt,nr:()=>we,p7:()=>Zt,sr:()=>pn,tD:()=>or,u:()=>Z,zW:()=>Le,zw:()=>pe});const q=function(z){const k=[];let H=0;for(let re=0;re<z.length;re++){let se=z.charCodeAt(re);se<128?k[H++]=se:se<2048?(k[H++]=se>>6|192,k[H++]=63&se|128):55296==(64512&se)&&re+1<z.length&&56320==(64512&z.charCodeAt(re+1))?(se=65536+((1023&se)<<10)+(1023&z.charCodeAt(++re)),k[H++]=se>>18|240,k[H++]=se>>12&63|128,k[H++]=se>>6&63|128,k[H++]=63&se|128):(k[H++]=se>>12|224,k[H++]=se>>6&63|128,k[H++]=63&se|128)}return k},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,k){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let se=0;se<z.length;se+=3){const Re=z[se],dt=se+1<z.length,jt=dt?z[se+1]:0,vt=se+2<z.length,mt=vt?z[se+2]:0;let oi=(15&jt)<<2|mt>>6,kn=63&mt;vt||(kn=64,dt||(oi=64)),re.push(H[Re>>2],H[(3&Re)<<4|jt>>4],H[oi],H[kn])}return re.join("")},encodeString(z,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(z):this.encodeByteArray(q(z),k)},decodeString(z,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(z):function(z){const k=[];let H=0,re=0;for(;H<z.length;){const se=z[H++];if(se<128)k[re++]=String.fromCharCode(se);else if(se>191&&se<224){const Re=z[H++];k[re++]=String.fromCharCode((31&se)<<6|63&Re)}else if(se>239&&se<365){const vt=((7&se)<<18|(63&z[H++])<<12|(63&z[H++])<<6|63&z[H++])-65536;k[re++]=String.fromCharCode(55296+(vt>>10)),k[re++]=String.fromCharCode(56320+(1023&vt))}else{const Re=z[H++],dt=z[H++];k[re++]=String.fromCharCode((15&se)<<12|(63&Re)<<6|63&dt)}}return k.join("")}(this.decodeStringToByteArray(z,k))},decodeStringToByteArray(z,k){this.init_();const H=k?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let se=0;se<z.length;){const Re=H[z.charAt(se++)],jt=se<z.length?H[z.charAt(se)]:0;++se;const mt=se<z.length?H[z.charAt(se)]:64;++se;const wt=se<z.length?H[z.charAt(se)]:64;if(++se,null==Re||null==jt||null==mt||null==wt)throw new _e;re.push(Re<<2|jt>>4),64!==mt&&(re.push(jt<<4&240|mt>>2),64!==wt&&re.push(mt<<6&192|wt))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const be=function(z){return function(z){const k=q(z);return de.encodeByteArray(k,!0)}(z).replace(/\./g,"")},Z=function(z){try{return de.decodeString(z,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function pe(z,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return k}for(const H in k)!k.hasOwnProperty(H)||!ke(H)||(z[H]=pe(z[H],k[H]));return z}function ke(z){return"__proto__"!==z}function rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ut=()=>{try{return rt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=z&&Z(z[1]);return k&&JSON.parse(k)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},Ae=()=>{var z;return null===(z=ut())||void 0===z?void 0:z.config},Ge=z=>{var k;return null===(k=ut())||void 0===k?void 0:k[`_${z}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,H)=>{this.resolve=k,this.reject=H})}wrapCallback(k){return(H,re)=>{H?this.reject(H):this.resolve(re),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(H):k(H,re))}}}function et(z,k){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=k||"demo-project",se=z.iat||0,Re=z.sub||z.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dt=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:se,exp:se+3600,auth_time:se,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},z);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(dt)),""].join(".")}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function xt(){var z;const k=null===(z=ut())||void 0===z?void 0:z.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return typeof window<"u"||Zt()}function Zt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Vn(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function pn(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function lr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function en(){const z=Qe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!xt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){try{return"object"==typeof indexedDB}catch{return!1}}function Ne(){return new Promise((z,k)=>{try{let H=!0;const re="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(re);se.onsuccess=()=>{se.result.close(),H||self.indexedDB.deleteDatabase(re),z(!0)},se.onupgradeneeded=()=>{H=!1},se.onerror=()=>{var Re;k((null===(Re=se.error)||void 0===Re?void 0:Re.message)||"")}}catch(H){k(H)}})}class ue extends Error{constructor(k,H,re){super(H),this.code=k,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yt.prototype.create)}}class yt{constructor(k,H,re){this.service=k,this.serviceName=H,this.errors=re}create(k,...H){const re=H[0]||{},se=`${this.service}/${k}`,Re=this.errors[k],dt=Re?function mr(z,k){return z.replace(Ut,(H,re)=>{const se=k[re];return null!=se?String(se):`<${re}?>`})}(Re,re):"Error";return new ue(se,`${this.serviceName}: ${dt} (${se}).`,re)}}const Ut=/\{\$([^}]+)}/g;function Er(z,k){return Object.prototype.hasOwnProperty.call(z,k)}function Nr(z){for(const k in z)if(Object.prototype.hasOwnProperty.call(z,k))return!1;return!0}function Fr(z,k){if(z===k)return!0;const H=Object.keys(z),re=Object.keys(k);for(const se of H){if(!re.includes(se))return!1;const Re=z[se],dt=k[se];if(Zn(Re)&&Zn(dt)){if(!Fr(Re,dt))return!1}else if(Re!==dt)return!1}for(const se of re)if(!H.includes(se))return!1;return!0}function Zn(z){return null!==z&&"object"==typeof z}function hn(z){const k=[];for(const[H,re]of Object.entries(z))Array.isArray(re)?re.forEach(se=>{k.push(encodeURIComponent(H)+"="+encodeURIComponent(se))}):k.push(encodeURIComponent(H)+"="+encodeURIComponent(re));return k.length?"&"+k.join("&"):""}function Kt(z){const k={};return z.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[se,Re]=re.split("=");k[decodeURIComponent(se)]=decodeURIComponent(Re)}}),k}function pr(z){const k=z.indexOf("?");if(!k)return"";const H=z.indexOf("#",k);return z.substring(k,H>0?H:void 0)}function or(z,k){const H=new dn(z,k);return H.subscribe.bind(H)}class dn{constructor(k,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{k(this)}).catch(re=>{this.error(re)})}next(k){this.forEachObserver(H=>{H.next(k)})}error(k){this.forEachObserver(H=>{H.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,H,re){let se;if(void 0===k&&void 0===H&&void 0===re)throw new Error("Missing Observer.");se=function bo(z,k){if("object"!=typeof z||null===z)return!1;for(const H of k)if(H in z&&"function"==typeof z[H])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:H,complete:re},void 0===se.next&&(se.next=Ce),void 0===se.error&&(se.error=Ce),void 0===se.complete&&(se.complete=Ce);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),Re}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,k)}sendOne(k,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{H(this.observers[k])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ce(){}function Ke(z){return z&&z._delegate?z._delegate:z}},2264:(Rt,Be,U)=>{var I=U(345),Y=U(9253),ae=U(8515),q=U(7841),X=U(7705);const de=[{path:"",children:[{path:"",loadChildren:()=>Promise.all([U.e(491),U.e(961)]).then(U.bind(U,4961)).then(ke=>ke.PublicModule)}]},{path:"private",children:[{path:"",loadChildren:()=>Promise.all([U.e(491),U.e(387)]).then(U.bind(U,1387)).then(ke=>ke.PrivateModule)}]}];let _e=(()=>{class ke{static{this.\u0275fac=function(We){return new(We||ke)}}static{this.\u0275mod=X.$C({type:ke})}static{this.\u0275inj=X.G2t({imports:[q.iI.forRoot(de),q.iI]})}}return ke})(),$e=(()=>{class ke{scrollToSection(at){document.getElementById(at)?.scrollIntoView({behavior:"smooth"})}static{this.\u0275fac=function(We){return new(We||ke)}}static{this.\u0275cmp=X.VBU({type:ke,selectors:[["app-header"]],decls:36,vars:0,consts:[["id","header",1,"header","dark-background","d-flex","flex-column"],[1,"header-toggle","d-xl-none","bi","bi-list"],[1,"profile-img"],["src","assets/img/my-profile-img.jpg","alt","",1,"img-fluid","rounded-circle"],["href","/angular-app/home",1,"logo","d-flex","align-items-center","justify-content-center"],[1,"sitename"],[1,"social-links","text-center"],["href","javascript:void(0)",1,"twitter"],[1,"bi","bi-twitter-x"],["href","javascript:void(0)",1,"facebook"],[1,"bi","bi-facebook"],["href","javascript:void(0)",1,"instagram"],[1,"bi","bi-instagram"],["href","javascript:void(0)",1,"google-plus"],[1,"bi","bi-skype"],["href","javascript:void(0)",1,"linkedin"],[1,"bi","bi-linkedin"],["id","navmenu",1,"navmenu"],["href","javascript:void(0)",1,"active",3,"click"],[1,"bi","bi-house","navicon"],["href","javascript:void(0)",3,"click"],[1,"bi","bi-person","navicon"],[1,"bi","bi-file-earmark-text","navicon"],[1,"bi","bi-envelope","navicon"]],template:function(We,pt){1&We&&(X.j41(0,"header",0),X.nrm(1,"i",1),X.j41(2,"div",2),X.nrm(3,"img",3),X.k0s(),X.j41(4,"a",4)(5,"h1",5),X.EFF(6,"Tutul Chakma"),X.k0s()(),X.j41(7,"div",6)(8,"a",7),X.nrm(9,"i",8),X.k0s(),X.j41(10,"a",9),X.nrm(11,"i",10),X.k0s(),X.j41(12,"a",11),X.nrm(13,"i",12),X.k0s(),X.j41(14,"a",13),X.nrm(15,"i",14),X.k0s(),X.j41(16,"a",15),X.nrm(17,"i",16),X.k0s()(),X.j41(18,"nav",17)(19,"ul")(20,"li")(21,"a",18),X.bIt("click",function(){return pt.scrollToSection("hero")}),X.nrm(22,"i",19),X.EFF(23,"Home"),X.k0s()(),X.j41(24,"li")(25,"a",20),X.bIt("click",function(){return pt.scrollToSection("about")}),X.nrm(26,"i",21),X.EFF(27," About"),X.k0s()(),X.j41(28,"li")(29,"a",20),X.bIt("click",function(){return pt.scrollToSection("resume")}),X.nrm(30,"i",22),X.EFF(31," Resume"),X.k0s()(),X.j41(32,"li")(33,"a",20),X.bIt("click",function(){return pt.scrollToSection("contact")}),X.nrm(34,"i",23),X.EFF(35," Contact"),X.k0s()()()()())}})}}return ke})(),be=(()=>{class ke{static{this.\u0275fac=function(We){return new(We||ke)}}static{this.\u0275cmp=X.VBU({type:ke,selectors:[["app-footer"]],decls:15,vars:0,consts:[["id","footer",1,"footer","position-relative","light-background"],[1,"container"],[1,"copyright","text-center"],[1,"px-1","sitename"],[1,"credits"],["href","https://bootstrapmade.com/"]],template:function(We,pt){1&We&&(X.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"p"),X.EFF(4,"\xa9 "),X.j41(5,"span"),X.EFF(6,"Copyright"),X.k0s(),X.j41(7,"strong",3),X.EFF(8,"iPortfolio"),X.k0s(),X.j41(9,"span"),X.EFF(10,"All Rights Reserved"),X.k0s()()(),X.j41(11,"div",4),X.EFF(12," Designed by "),X.j41(13,"a",5),X.EFF(14,"BootstrapMade"),X.k0s()()()())}})}}return ke})(),Z=(()=>{class ke{constructor(){this.title="Tutul Chakma - iProfile"}ngOnInit(){this.initPreloader(),this.initScrollTopButton()}initPreloader(){const at=document.querySelector("#preloader");at&&window.addEventListener("load",()=>{at.remove()})}initScrollTopButton(){const at=document.querySelector(".scroll-top"),We=()=>{at&&(window.scrollY>100?at.classList.add("active"):at.classList.remove("active"))};at?.addEventListener("click",pt=>{pt.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("load",We),document.addEventListener("scroll",We)}static{this.\u0275fac=function(We){return new(We||ke)}}static{this.\u0275cmp=X.VBU({type:ke,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"header"],[1,"main"],["href","#","id","scroll-top",1,"scroll-top","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-arrow-up-short"],["id","preloader"]],template:function(We,pt){1&We&&(X.nrm(0,"app-header",0),X.j41(1,"main",1),X.nrm(2,"router-outlet"),X.k0s(),X.nrm(3,"app-footer"),X.j41(4,"a",2),X.nrm(5,"i",3),X.k0s(),X.nrm(6,"div",4))},dependencies:[q.n3,$e,be]})}}return ke})();const ne_firebase={apiKey:"AIzaSyAxewJxIFqlKaI5lGvSOnqP8cBHZADh2v4",authDomain:"profilestore-87502.firebaseapp.com",projectId:"profilestore-87502",storageBucket:"profilestore-87502.appspot.com",messagingSenderId:"119648305117",appId:"1:119648305117:web:d3315294cffdaddf474034",measurementId:"G-TPLPTSR76Y"};let pe=(()=>{class ke{static{this.\u0275fac=function(We){return new(We||ke)}}static{this.\u0275mod=X.$C({type:ke,bootstrap:[Z]})}static{this.\u0275inj=X.G2t({imports:[I.Bb,_e,Y.bf.initializeApp(ne_firebase),ae.cM]})}}return ke})();I.sG().bootstrapModule(pe).catch(ke=>console.error(ke))},4412:(Rt,Be,U)=>{U.d(Be,{t:()=>Y});var I=U(1413);class Y extends I.B{constructor(q){super(),this._value=q}get value(){return this.getValue()}_subscribe(q){const X=super._subscribe(q);return!X.closed&&q.next(this._value),X}getValue(){const{hasError:q,thrownError:X,_value:de}=this;if(q)throw X;return this._throwIfClosed(),de}next(q){super.next(this._value=q)}}},1985:(Rt,Be,U)=>{U.d(Be,{c:()=>$e});var I=U(7707),Y=U(8359),ae=U(3494),q=U(1203),X=U(1026),de=U(8071),_e=U(9786);let $e=(()=>{class pe{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const at=new pe;return at.source=this,at.operator=rt,at}subscribe(rt,at,We){const pt=function ne(pe){return pe&&pe instanceof I.vU||function Z(pe){return pe&&(0,de.T)(pe.next)&&(0,de.T)(pe.error)&&(0,de.T)(pe.complete)}(pe)&&(0,Y.Uv)(pe)}(rt)?rt:new I.Ms(rt,at,We);return(0,_e.Y)(()=>{const{operator:ut,source:Bt}=this;pt.add(ut?ut.call(pt,Bt):Bt?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(rt){try{return this._subscribe(rt)}catch(at){rt.error(at)}}forEach(rt,at){return new(at=be(at))((We,pt)=>{const ut=new I.Ms({next:Bt=>{try{rt(Bt)}catch(Vt){pt(Vt),ut.unsubscribe()}},error:pt,complete:We});this.subscribe(ut)})}_subscribe(rt){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(rt)}[ae.s](){return this}pipe(...rt){return(0,q.m)(rt)(this)}toPromise(rt){return new(rt=be(rt))((at,We)=>{let pt;this.subscribe(ut=>pt=ut,ut=>We(ut),()=>at(pt))})}}return pe.create=ke=>new pe(ke),pe})();function be(pe){var ke;return null!==(ke=pe??X.$.Promise)&&void 0!==ke?ke:Promise}},1413:(Rt,Be,U)=>{U.d(Be,{B:()=>_e});var I=U(1985),Y=U(8359);const q=(0,U(1853).L)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=U(7908),de=U(9786);let _e=(()=>{class be extends I.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const pe=new $e(this,this);return pe.operator=ne,pe}_throwIfClosed(){if(this.closed)throw new q}next(ne){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(ne)}})}error(ne){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:pe}=this;for(;pe.length;)pe.shift().error(ne)}})}complete(){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:pe,isStopped:ke,observers:rt}=this;return pe||ke?Y.Kn:(this.currentObservers=null,rt.push(ne),new Y.yU(()=>{this.currentObservers=null,(0,X.o)(rt,ne)}))}_checkFinalizedStatuses(ne){const{hasError:pe,thrownError:ke,isStopped:rt}=this;pe?ne.error(ke):rt&&ne.complete()}asObservable(){const ne=new I.c;return ne.source=this,ne}}return be.create=(Z,ne)=>new $e(Z,ne),be})();class $e extends _e{constructor(Z,ne){super(),this.destination=Z,this.source=ne}next(Z){var ne,pe;null===(pe=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===pe||pe.call(ne,Z)}error(Z){var ne,pe;null===(pe=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===pe||pe.call(ne,Z)}complete(){var Z,ne;null===(ne=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===ne||ne.call(Z)}_subscribe(Z){var ne,pe;return null!==(pe=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(Z))&&void 0!==pe?pe:Y.Kn}}},7707:(Rt,Be,U)=>{U.d(Be,{Ms:()=>We,vU:()=>pe});var I=U(8071),Y=U(8359),ae=U(1026),q=U(5334),X=U(5343);const de=be("C",void 0,void 0);function be(Ae,Ge,Te){return{kind:Ae,value:Ge,error:Te}}var Z=U(9270),ne=U(9786);class pe extends Y.yU{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,Y.Uv)(Ge)&&Ge.add(this)):this.destination=Vt}static create(Ge,Te,et){return new We(Ge,Te,et)}next(Ge){this.isStopped?Bt(function $e(Ae){return be("N",Ae,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?Bt(function _e(Ae){return be("E",void 0,Ae)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?Bt(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function rt(Ae,Ge){return ke.call(Ae,Ge)}class at{constructor(Ge){this.partialObserver=Ge}next(Ge){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ge)}catch(et){pt(et)}}error(Ge){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ge)}catch(et){pt(et)}else pt(Ge)}complete(){const{partialObserver:Ge}=this;if(Ge.complete)try{Ge.complete()}catch(Te){pt(Te)}}}class We extends pe{constructor(Ge,Te,et){let Qe;if(super(),(0,I.T)(Ge)||!Ge)Qe={next:Ge??void 0,error:Te??void 0,complete:et??void 0};else{let gt;this&&ae.$.useDeprecatedNextContext?(gt=Object.create(Ge),gt.unsubscribe=()=>this.unsubscribe(),Qe={next:Ge.next&&rt(Ge.next,gt),error:Ge.error&&rt(Ge.error,gt),complete:Ge.complete&&rt(Ge.complete,gt)}):Qe=Ge}this.destination=new at(Qe)}}function pt(Ae){ae.$.useDeprecatedSynchronousErrorHandling?(0,ne.l)(Ae):(0,q.m)(Ae)}function Bt(Ae,Ge){const{onStoppedNotification:Te}=ae.$;Te&&Z.f.setTimeout(()=>Te(Ae,Ge))}const Vt={closed:!0,next:X.l,error:function ut(Ae){throw Ae},complete:X.l}},8359:(Rt,Be,U)=>{U.d(Be,{Kn:()=>de,yU:()=>X,Uv:()=>_e});var I=U(8071);const ae=(0,U(1853).L)(be=>function(ne){be(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((pe,ke)=>`${ke+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var q=U(7908);class X{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const rt of ne)rt.remove(this);else ne.remove(this);const{initialTeardown:pe}=this;if((0,I.T)(pe))try{pe()}catch(rt){Z=rt instanceof ae?rt.errors:[rt]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const rt of ke)try{$e(rt)}catch(at){Z=Z??[],at instanceof ae?Z=[...Z,...at.errors]:Z.push(at)}}if(Z)throw new ae(Z)}}add(Z){var ne;if(Z&&Z!==this)if(this.closed)$e(Z);else{if(Z instanceof X){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(Z)}}_hasParent(Z){const{_parentage:ne}=this;return ne===Z||Array.isArray(ne)&&ne.includes(Z)}_addParent(Z){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(Z),ne):ne?[ne,Z]:Z}_removeParent(Z){const{_parentage:ne}=this;ne===Z?this._parentage=null:Array.isArray(ne)&&(0,q.o)(ne,Z)}remove(Z){const{_finalizers:ne}=this;ne&&(0,q.o)(ne,Z),Z instanceof X&&Z._removeParent(this)}}X.EMPTY=(()=>{const be=new X;return be.closed=!0,be})();const de=X.EMPTY;function _e(be){return be instanceof X||be&&"closed"in be&&(0,I.T)(be.remove)&&(0,I.T)(be.add)&&(0,I.T)(be.unsubscribe)}function $e(be){(0,I.T)(be)?be():be.unsubscribe()}},1026:(Rt,Be,U)=>{U.d(Be,{$:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(Rt,Be,U)=>{U.d(Be,{x:()=>X});var I=U(6365),ae=U(3794),q=U(8455);function X(...de){return function Y(){return(0,I.U)(1)}()((0,q.H)(de,(0,ae.lI)(de)))}},983:(Rt,Be,U)=>{U.d(Be,{w:()=>Y});const Y=new(U(1985).c)(X=>X.complete())},8455:(Rt,Be,U)=>{U.d(Be,{H:()=>Ge});var I=U(8750),Y=U(941),ae=U(6745),de=U(1985),$e=U(4761),be=U(8071),Z=U(5225);function pe(Te,et){if(!Te)throw new Error("Iterable cannot be null");return new de.c(Qe=>{(0,Z.N)(Qe,et,()=>{const gt=Te[Symbol.asyncIterator]();(0,Z.N)(Qe,et,()=>{gt.next().then(xt=>{xt.done?Qe.complete():Qe.next(xt.value)})},0,!0)})})}var ke=U(5055),rt=U(9858),at=U(7441),We=U(5397),pt=U(7953),ut=U(591),Bt=U(5196);function Ge(Te,et){return et?function Ae(Te,et){if(null!=Te){if((0,ke.l)(Te))return function q(Te,et){return(0,I.Tg)(Te).pipe((0,ae._)(et),(0,Y.Q)(et))}(Te,et);if((0,at.X)(Te))return function _e(Te,et){return new de.c(Qe=>{let gt=0;return et.schedule(function(){gt===Te.length?Qe.complete():(Qe.next(Te[gt++]),Qe.closed||this.schedule())})})}(Te,et);if((0,rt.y)(Te))return function X(Te,et){return(0,I.Tg)(Te).pipe((0,ae._)(et),(0,Y.Q)(et))}(Te,et);if((0,pt.T)(Te))return pe(Te,et);if((0,We.x)(Te))return function ne(Te,et){return new de.c(Qe=>{let gt;return(0,Z.N)(Qe,et,()=>{gt=Te[$e.l](),(0,Z.N)(Qe,et,()=>{let xt,je;try{({value:xt,done:je}=gt.next())}catch(Zt){return void Qe.error(Zt)}je?Qe.complete():Qe.next(xt)},0,!0)}),()=>(0,be.T)(gt?.return)&&gt.return()})}(Te,et);if((0,Bt.U)(Te))return function Vt(Te,et){return pe((0,Bt.C)(Te),et)}(Te,et)}throw(0,ut.L)(Te)}(Te,et):(0,I.Tg)(Te)}},8750:(Rt,Be,U)=>{U.d(Be,{Tg:()=>ke});var I=U(1635),Y=U(7441),ae=U(9858),q=U(1985),X=U(5055),de=U(7953),_e=U(591),$e=U(5397),be=U(5196),Z=U(8071),ne=U(5334),pe=U(3494);function ke(Ae){if(Ae instanceof q.c)return Ae;if(null!=Ae){if((0,X.l)(Ae))return function rt(Ae){return new q.c(Ge=>{const Te=Ae[pe.s]();if((0,Z.T)(Te.subscribe))return Te.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,Y.X)(Ae))return function at(Ae){return new q.c(Ge=>{for(let Te=0;Te<Ae.length&&!Ge.closed;Te++)Ge.next(Ae[Te]);Ge.complete()})}(Ae);if((0,ae.y)(Ae))return function We(Ae){return new q.c(Ge=>{Ae.then(Te=>{Ge.closed||(Ge.next(Te),Ge.complete())},Te=>Ge.error(Te)).then(null,ne.m)})}(Ae);if((0,de.T)(Ae))return ut(Ae);if((0,$e.x)(Ae))return function pt(Ae){return new q.c(Ge=>{for(const Te of Ae)if(Ge.next(Te),Ge.closed)return;Ge.complete()})}(Ae);if((0,be.U)(Ae))return function Bt(Ae){return ut((0,be.C)(Ae))}(Ae)}throw(0,_e.L)(Ae)}function ut(Ae){return new q.c(Ge=>{(function Vt(Ae,Ge){var Te,et,Qe,gt;return(0,I.sH)(this,void 0,void 0,function*(){try{for(Te=(0,I.xN)(Ae);!(et=yield Te.next()).done;)if(Ge.next(et.value),Ge.closed)return}catch(xt){Qe={error:xt}}finally{try{et&&!et.done&&(gt=Te.return)&&(yield gt.call(Te))}finally{if(Qe)throw Qe.error}}Ge.complete()})})(Ae,Ge).catch(Te=>Ge.error(Te))})}},7786:(Rt,Be,U)=>{U.d(Be,{h:()=>de});var I=U(6365),Y=U(8750),ae=U(983),q=U(3794),X=U(8455);function de(..._e){const $e=(0,q.lI)(_e),be=(0,q.R0)(_e,1/0),Z=_e;return Z.length?1===Z.length?(0,Y.Tg)(Z[0]):(0,I.U)(be)((0,X.H)(Z,$e)):ae.w}},7673:(Rt,Be,U)=>{U.d(Be,{of:()=>ae});var I=U(3794),Y=U(8455);function ae(...q){const X=(0,I.lI)(q);return(0,Y.H)(q,X)}},4360:(Rt,Be,U)=>{U.d(Be,{_:()=>Y});var I=U(7707);function Y(q,X,de,_e,$e){return new ae(q,X,de,_e,$e)}class ae extends I.vU{constructor(X,de,_e,$e,be,Z){super(X),this.onFinalize=be,this.shouldUnsubscribe=Z,this._next=de?function(ne){try{de(ne)}catch(pe){X.error(pe)}}:super._next,this._error=$e?function(ne){try{$e(ne)}catch(pe){X.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(ne){X.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},9901:(Rt,Be,U)=>{U.d(Be,{U:()=>ae});var I=U(9974),Y=U(4360);function ae(q){return(0,I.N)((X,de)=>{let _e=!1;X.subscribe((0,Y._)(de,$e=>{_e=!0,de.next($e)},()=>{_e||de.next(q),de.complete()}))})}},3294:(Rt,Be,U)=>{U.d(Be,{F:()=>q});var I=U(3669),Y=U(9974),ae=U(4360);function q(de,_e=I.D){return de=de??X,(0,Y.N)(($e,be)=>{let Z,ne=!0;$e.subscribe((0,ae._)(be,pe=>{const ke=_e(pe);(ne||!de(Z,ke))&&(ne=!1,Z=ke,be.next(pe))}))})}function X(de,_e){return de===_e}},5964:(Rt,Be,U)=>{U.d(Be,{p:()=>ae});var I=U(9974),Y=U(4360);function ae(q,X){return(0,I.N)((de,_e)=>{let $e=0;de.subscribe((0,Y._)(_e,be=>q.call(X,be,$e++)&&_e.next(be)))})}},1594:(Rt,Be,U)=>{U.d(Be,{$:()=>_e});var I=U(9350),Y=U(5964),ae=U(6697),q=U(9901),X=U(3774),de=U(3669);function _e($e,be){const Z=arguments.length>=2;return ne=>ne.pipe($e?(0,Y.p)((pe,ke)=>$e(pe,ke,ne)):de.D,(0,ae.s)(1),Z?(0,q.U)(be):(0,X.v)(()=>new I.G))}},6354:(Rt,Be,U)=>{U.d(Be,{T:()=>ae});var I=U(9974),Y=U(4360);function ae(q,X){return(0,I.N)((de,_e)=>{let $e=0;de.subscribe((0,Y._)(_e,be=>{_e.next(q.call(X,be,$e++))}))})}},6365:(Rt,Be,U)=>{U.d(Be,{U:()=>ae});var I=U(1397),Y=U(3669);function ae(q=1/0){return(0,I.Z)(Y.D,q)}},1397:(Rt,Be,U)=>{U.d(Be,{Z:()=>$e});var I=U(6354),Y=U(8750),ae=U(9974),q=U(5225),X=U(4360),_e=U(8071);function $e(be,Z,ne=1/0){return(0,_e.T)(Z)?$e((pe,ke)=>(0,I.T)((rt,at)=>Z(pe,rt,ke,at))((0,Y.Tg)(be(pe,ke))),ne):("number"==typeof Z&&(ne=Z),(0,ae.N)((pe,ke)=>function de(be,Z,ne,pe,ke,rt,at,We){const pt=[];let ut=0,Bt=0,Vt=!1;const Ae=()=>{Vt&&!pt.length&&!ut&&Z.complete()},Ge=et=>ut<pe?Te(et):pt.push(et),Te=et=>{rt&&Z.next(et),ut++;let Qe=!1;(0,Y.Tg)(ne(et,Bt++)).subscribe((0,X._)(Z,gt=>{ke?.(gt),rt?Ge(gt):Z.next(gt)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(ut--;pt.length&&ut<pe;){const gt=pt.shift();at?(0,q.N)(Z,at,()=>Te(gt)):Te(gt)}Ae()}catch(gt){Z.error(gt)}}))};return be.subscribe((0,X._)(Z,Ge,()=>{Vt=!0,Ae()})),()=>{We?.()}}(pe,ke,be,ne)))}},941:(Rt,Be,U)=>{U.d(Be,{Q:()=>q});var I=U(5225),Y=U(9974),ae=U(4360);function q(X,de=0){return(0,Y.N)((_e,$e)=>{_e.subscribe((0,ae._)($e,be=>(0,I.N)($e,X,()=>$e.next(be),de),()=>(0,I.N)($e,X,()=>$e.complete(),de),be=>(0,I.N)($e,X,()=>$e.error(be),de)))})}},2816:(Rt,Be,U)=>{U.d(Be,{S:()=>q});var I=U(9974),Y=U(4360);function q(X,de){return(0,I.N)(function ae(X,de,_e,$e,be){return(Z,ne)=>{let pe=_e,ke=de,rt=0;Z.subscribe((0,Y._)(ne,at=>{const We=rt++;ke=pe?X(ke,at,We):(pe=!0,at),$e&&ne.next(ke)},be&&(()=>{pe&&ne.next(ke),ne.complete()})))}}(X,de,arguments.length>=2,!0))}},7647:(Rt,Be,U)=>{U.d(Be,{u:()=>X});var I=U(8750),Y=U(1413),ae=U(7707),q=U(9974);function X(_e={}){const{connector:$e=(()=>new Y.B),resetOnError:be=!0,resetOnComplete:Z=!0,resetOnRefCountZero:ne=!0}=_e;return pe=>{let ke,rt,at,We=0,pt=!1,ut=!1;const Bt=()=>{rt?.unsubscribe(),rt=void 0},Vt=()=>{Bt(),ke=at=void 0,pt=ut=!1},Ae=()=>{const Ge=ke;Vt(),Ge?.unsubscribe()};return(0,q.N)((Ge,Te)=>{We++,!ut&&!pt&&Bt();const et=at=at??$e();Te.add(()=>{We--,0===We&&!ut&&!pt&&(rt=de(Ae,ne))}),et.subscribe(Te),!ke&&We>0&&(ke=new ae.Ms({next:Qe=>et.next(Qe),error:Qe=>{ut=!0,Bt(),rt=de(Vt,be,Qe),et.error(Qe)},complete:()=>{pt=!0,Bt(),rt=de(Vt,Z),et.complete()}}),(0,I.Tg)(Ge).subscribe(ke))})(pe)}}function de(_e,$e,...be){if(!0===$e)return void _e();if(!1===$e)return;const Z=new ae.Ms({next:()=>{Z.unsubscribe(),_e()}});return(0,I.Tg)($e(...be)).subscribe(Z)}},9172:(Rt,Be,U)=>{U.d(Be,{Z:()=>q});var I=U(8793),Y=U(3794),ae=U(9974);function q(...X){const de=(0,Y.lI)(X);return(0,ae.N)((_e,$e)=>{(de?(0,I.x)(X,_e,de):(0,I.x)(X,_e)).subscribe($e)})}},6745:(Rt,Be,U)=>{U.d(Be,{_:()=>Y});var I=U(9974);function Y(ae,q=0){return(0,I.N)((X,de)=>{de.add(ae.schedule(()=>X.subscribe(de),q))})}},5558:(Rt,Be,U)=>{U.d(Be,{n:()=>q});var I=U(8750),Y=U(9974),ae=U(4360);function q(X,de){return(0,Y.N)((_e,$e)=>{let be=null,Z=0,ne=!1;const pe=()=>ne&&!be&&$e.complete();_e.subscribe((0,ae._)($e,ke=>{be?.unsubscribe();let rt=0;const at=Z++;(0,I.Tg)(X(ke,at)).subscribe(be=(0,ae._)($e,We=>$e.next(de?de(ke,We,at,rt++):We),()=>{be=null,pe()}))},()=>{ne=!0,pe()}))})}},6697:(Rt,Be,U)=>{U.d(Be,{s:()=>q});var I=U(983),Y=U(9974),ae=U(4360);function q(X){return X<=0?()=>I.w:(0,Y.N)((de,_e)=>{let $e=0;de.subscribe((0,ae._)(_e,be=>{++$e<=X&&(_e.next(be),X<=$e&&_e.complete())}))})}},8141:(Rt,Be,U)=>{U.d(Be,{M:()=>X});var I=U(8071),Y=U(9974),ae=U(4360),q=U(3669);function X(de,_e,$e){const be=(0,I.T)(de)||_e||$e?{next:de,error:_e,complete:$e}:de;return be?(0,Y.N)((Z,ne)=>{var pe;null===(pe=be.subscribe)||void 0===pe||pe.call(be);let ke=!0;Z.subscribe((0,ae._)(ne,rt=>{var at;null===(at=be.next)||void 0===at||at.call(be,rt),ne.next(rt)},()=>{var rt;ke=!1,null===(rt=be.complete)||void 0===rt||rt.call(be),ne.complete()},rt=>{var at;ke=!1,null===(at=be.error)||void 0===at||at.call(be,rt),ne.error(rt)},()=>{var rt,at;ke&&(null===(rt=be.unsubscribe)||void 0===rt||rt.call(be)),null===(at=be.finalize)||void 0===at||at.call(be)}))}):q.D}},3774:(Rt,Be,U)=>{U.d(Be,{v:()=>q});var I=U(9350),Y=U(9974),ae=U(4360);function q(de=X){return(0,Y.N)((_e,$e)=>{let be=!1;_e.subscribe((0,ae._)($e,Z=>{be=!0,$e.next(Z)},()=>be?$e.complete():$e.error(de())))})}function X(){return new I.G}},6780:(Rt,Be,U)=>{U.d(Be,{R:()=>X});var I=U(8359);class Y extends I.yU{constructor(_e,$e){super()}schedule(_e,$e=0){return this}}const ae={setInterval(de,_e,...$e){const{delegate:be}=ae;return be?.setInterval?be.setInterval(de,_e,...$e):setInterval(de,_e,...$e)},clearInterval(de){const{delegate:_e}=ae;return(_e?.clearInterval||clearInterval)(de)},delegate:void 0};var q=U(7908);class X extends Y{constructor(_e,$e){super(_e,$e),this.scheduler=_e,this.work=$e,this.pending=!1}schedule(_e,$e=0){var be;if(this.closed)return this;this.state=_e;const Z=this.id,ne=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(ne,Z,$e)),this.pending=!0,this.delay=$e,this.id=null!==(be=this.id)&&void 0!==be?be:this.requestAsyncId(ne,this.id,$e),this}requestAsyncId(_e,$e,be=0){return ae.setInterval(_e.flush.bind(_e,this),be)}recycleAsyncId(_e,$e,be=0){if(null!=be&&this.delay===be&&!1===this.pending)return $e;null!=$e&&ae.clearInterval($e)}execute(_e,$e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(_e,$e);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,$e){let Z,be=!1;try{this.work(_e)}catch(ne){be=!0,Z=ne||new Error("Scheduled action threw falsy error")}if(be)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:_e,scheduler:$e}=this,{actions:be}=$e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,q.o)(be,this),null!=_e&&(this.id=this.recycleAsyncId($e,_e,null)),this.delay=null,super.unsubscribe()}}}},9687:(Rt,Be,U)=>{U.d(Be,{q:()=>ae});var I=U(6129);class Y{constructor(X,de=Y.now){this.schedulerActionCtor=X,this.now=de}schedule(X,de=0,_e){return new this.schedulerActionCtor(this,X).schedule(_e,de)}}Y.now=I.U.now;class ae extends Y{constructor(X,de=Y.now){super(X,de),this.actions=[],this._active=!1}flush(X){const{actions:de}=this;if(this._active)return void de.push(X);let _e;this._active=!0;do{if(_e=X.execute(X.state,X.delay))break}while(X=de.shift());if(this._active=!1,_e){for(;X=de.shift();)X.unsubscribe();throw _e}}}},3236:(Rt,Be,U)=>{U.d(Be,{E:()=>ae});var I=U(6780);const ae=new(U(9687).q)(I.R)},6129:(Rt,Be,U)=>{U.d(Be,{U:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},9270:(Rt,Be,U)=>{U.d(Be,{f:()=>I});const I={setTimeout(Y,ae,...q){const{delegate:X}=I;return X?.setTimeout?X.setTimeout(Y,ae,...q):setTimeout(Y,ae,...q)},clearTimeout(Y){const{delegate:ae}=I;return(ae?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},4761:(Rt,Be,U)=>{U.d(Be,{l:()=>Y});const Y=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Rt,Be,U)=>{U.d(Be,{s:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Rt,Be,U)=>{U.d(Be,{G:()=>Y});const Y=(0,U(1853).L)(ae=>function(){ae(this),this.name="EmptyError",this.message="no elements in sequence"})},3794:(Rt,Be,U)=>{U.d(Be,{R0:()=>de,ms:()=>q,lI:()=>X});var I=U(8071);function ae(_e){return _e[_e.length-1]}function q(_e){return(0,I.T)(ae(_e))?_e.pop():void 0}function X(_e){return function Y(_e){return _e&&(0,I.T)(_e.schedule)}(ae(_e))?_e.pop():void 0}function de(_e,$e){return"number"==typeof ae(_e)?_e.pop():$e}},3073:(Rt,Be,U)=>{U.d(Be,{D:()=>X});const{isArray:I}=Array,{getPrototypeOf:Y,prototype:ae,keys:q}=Object;function X(_e){if(1===_e.length){const $e=_e[0];if(I($e))return{args:$e,keys:null};if(function de(_e){return _e&&"object"==typeof _e&&Y(_e)===ae}($e)){const be=q($e);return{args:be.map(Z=>$e[Z]),keys:be}}}return{args:_e,keys:null}}},7908:(Rt,Be,U)=>{function I(Y,ae){if(Y){const q=Y.indexOf(ae);0<=q&&Y.splice(q,1)}}U.d(Be,{o:()=>I})},1853:(Rt,Be,U)=>{function I(Y){const q=Y(X=>{Error.call(X),X.stack=(new Error).stack});return q.prototype=Object.create(Error.prototype),q.prototype.constructor=q,q}U.d(Be,{L:()=>I})},8496:(Rt,Be,U)=>{function I(Y,ae){return Y.reduce((q,X,de)=>(q[X]=ae[de],q),{})}U.d(Be,{e:()=>I})},9786:(Rt,Be,U)=>{U.d(Be,{Y:()=>ae,l:()=>q});var I=U(1026);let Y=null;function ae(X){if(I.$.useDeprecatedSynchronousErrorHandling){const de=!Y;if(de&&(Y={errorThrown:!1,error:null}),X(),de){const{errorThrown:_e,error:$e}=Y;if(Y=null,_e)throw $e}}else X()}function q(X){I.$.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},5225:(Rt,Be,U)=>{function I(Y,ae,q,X=0,de=!1){const _e=ae.schedule(function(){q(),de?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(_e),!de)return _e}U.d(Be,{N:()=>I})},3669:(Rt,Be,U)=>{function I(Y){return Y}U.d(Be,{D:()=>I})},7441:(Rt,Be,U)=>{U.d(Be,{X:()=>I});const I=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},7953:(Rt,Be,U)=>{U.d(Be,{T:()=>Y});var I=U(8071);function Y(ae){return Symbol.asyncIterator&&(0,I.T)(ae?.[Symbol.asyncIterator])}},8071:(Rt,Be,U)=>{function I(Y){return"function"==typeof Y}U.d(Be,{T:()=>I})},5055:(Rt,Be,U)=>{U.d(Be,{l:()=>ae});var I=U(3494),Y=U(8071);function ae(q){return(0,Y.T)(q[I.s])}},5397:(Rt,Be,U)=>{U.d(Be,{x:()=>ae});var I=U(4761),Y=U(8071);function ae(q){return(0,Y.T)(q?.[I.l])}},9858:(Rt,Be,U)=>{U.d(Be,{y:()=>Y});var I=U(8071);function Y(ae){return(0,I.T)(ae?.then)}},5196:(Rt,Be,U)=>{U.d(Be,{C:()=>ae,U:()=>q});var I=U(1635),Y=U(8071);function ae(X){return(0,I.AQ)(this,arguments,function*(){const _e=X.getReader();try{for(;;){const{value:$e,done:be}=yield(0,I.N3)(_e.read());if(be)return yield(0,I.N3)(void 0);yield yield(0,I.N3)($e)}}finally{_e.releaseLock()}})}function q(X){return(0,Y.T)(X?.getReader)}},9974:(Rt,Be,U)=>{U.d(Be,{N:()=>ae,S:()=>Y});var I=U(8071);function Y(q){return(0,I.T)(q?.lift)}function ae(q){return X=>{if(Y(X))return X.lift(function(de){try{return q(de,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Rt,Be,U)=>{U.d(Be,{I:()=>q});var I=U(6354);const{isArray:Y}=Array;function q(X){return(0,I.T)(de=>function ae(X,de){return Y(de)?X(...de):X(de)}(X,de))}},5343:(Rt,Be,U)=>{function I(){}U.d(Be,{l:()=>I})},1203:(Rt,Be,U)=>{U.d(Be,{F:()=>Y,m:()=>ae});var I=U(3669);function Y(...q){return ae(q)}function ae(q){return 0===q.length?I.D:1===q.length?q[0]:function(de){return q.reduce((_e,$e)=>$e(_e),de)}}},5334:(Rt,Be,U)=>{U.d(Be,{m:()=>ae});var I=U(1026),Y=U(9270);function ae(q){Y.f.setTimeout(()=>{const{onUnhandledError:X}=I.$;if(!X)throw q;X(q)})}},591:(Rt,Be,U)=>{function I(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Be,{L:()=>I})},177:(Rt,Be,U)=>{U.d(Be,{AJ:()=>tr,MD:()=>Os,N0:()=>Di,QT:()=>ae,Sm:()=>at,Sq:()=>vn,VF:()=>X,Vy:()=>ks,Xr:()=>sn,ZD:()=>q,_b:()=>ft,aZ:()=>pt,bT:()=>Pu,fw:()=>We,hb:()=>ke,hj:()=>$e,qQ:()=>de});var I=U(7705);let Y=null;function ae(){return Y}function q(A){Y||(Y=A)}class X{}const de=new I.nKC("DocumentToken");let _e=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return(0,I.WQX)(be)},providedIn:"platform"})}}return A})();const $e=new I.nKC("Location Initialized");let be=(()=>{class A extends _e{constructor(){super(),this._doc=(0,I.WQX)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ae().getBaseHref(this._doc)}onPopState(P){const F=ae().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",P,!1),()=>F.removeEventListener("popstate",P)}onHashChange(P){const F=ae().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",P,!1),()=>F.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,F,ee){this._history.pushState(P,F,ee)}replaceState(P,F,ee){this._history.replaceState(P,F,ee)}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return new A},providedIn:"platform"})}}return A})();function Z(A,V){if(0==A.length)return V;if(0==V.length)return A;let P=0;return A.endsWith("/")&&P++,V.startsWith("/")&&P++,2==P?A+V.substring(1):1==P?A+V:A+"/"+V}function ne(A){const V=A.match(/#|\?|$/),P=V&&V.index||A.length;return A.slice(0,P-("/"===A[P-1]?1:0))+A.slice(P)}function pe(A){return A&&"?"!==A[0]?"?"+A:A}let ke=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return(0,I.WQX)(at)},providedIn:"root"})}}return A})();const rt=new I.nKC("appBaseHref");let at=(()=>{class A extends ke{constructor(P,F){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=F??this._platformLocation.getBaseHrefFromDOM()??(0,I.WQX)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return Z(this._baseHref,P)}path(P=!1){const F=this._platformLocation.pathname+pe(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&P?`${F}${ee}`:F}pushState(P,F,ee,Oe){const nt=this.prepareExternalUrl(ee+pe(Oe));this._platformLocation.pushState(P,F,nt)}replaceState(P,F,ee,Oe){const nt=this.prepareExternalUrl(ee+pe(Oe));this._platformLocation.replaceState(P,F,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(F){return new(F||A)(I.KVO(_e),I.KVO(rt,8))}}static{this.\u0275prov=I.jDH({token:A,factory:A.\u0275fac,providedIn:"root"})}}return A})(),We=(()=>{class A extends ke{constructor(P,F){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let F=this._platformLocation.hash;return null==F&&(F="#"),F.length>0?F.substring(1):F}prepareExternalUrl(P){const F=Z(this._baseHref,P);return F.length>0?"#"+F:F}pushState(P,F,ee,Oe){let nt=this.prepareExternalUrl(ee+pe(Oe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(P,F,nt)}replaceState(P,F,ee,Oe){let nt=this.prepareExternalUrl(ee+pe(Oe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(P,F,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(F){return new(F||A)(I.KVO(_e),I.KVO(rt,8))}}static{this.\u0275prov=I.jDH({token:A,factory:A.\u0275fac})}}return A})(),pt=(()=>{class A{constructor(P){this._subject=new I.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const F=this._locationStrategy.getBaseHref();this._basePath=function Ae(A){if(new RegExp("^(https?:)?//").test(A)){const[,P]=A.split(/\/\/[^\/]+/);return P}return A}(ne(Vt(F))),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,F=""){return this.path()==this.normalize(P+pe(F))}normalize(P){return A.stripTrailingSlash(function Bt(A,V){if(!A||!V.startsWith(A))return V;const P=V.substring(A.length);return""===P||["/",";","?","#"].includes(P[0])?P:V}(this._basePath,Vt(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,F="",ee=null){this._locationStrategy.pushState(ee,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+pe(F)),ee)}replaceState(P,F="",ee=null){this._locationStrategy.replaceState(ee,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+pe(F)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)})),()=>{const F=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(F,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",F){this._urlChangeListeners.forEach(ee=>ee(P,F))}subscribe(P,F,ee){return this._subject.subscribe({next:P,error:F,complete:ee})}static{this.normalizeQueryParams=pe}static{this.joinWithSlash=Z}static{this.stripTrailingSlash=ne}static{this.\u0275fac=function(F){return new(F||A)(I.KVO(ke))}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return function ut(){return new pt((0,I.KVO)(ke))}()},providedIn:"root"})}}return A})();function Vt(A){return A.replace(/\/index.html$/,"")}function ft(A,V){V=encodeURIComponent(V);for(const P of A.split(";")){const F=P.indexOf("="),[ee,Oe]=-1==F?[P,""]:[P.slice(0,F),P.slice(F+1)];if(ee.trim()===V)return decodeURIComponent(Oe)}return null}class me{constructor(V,P,F,ee){this.$implicit=V,this.ngForOf=P,this.index=F,this.count=ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vn=(()=>{class A{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,F,ee){this._viewContainer=P,this._template=F,this._differs=ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const F=this._viewContainer;P.forEachOperation((ee,Oe,nt)=>{if(null==ee.previousIndex)F.createEmbeddedView(this._template,new me(ee.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)F.remove(null===Oe?void 0:Oe);else if(null!==Oe){const St=F.get(Oe);F.move(St,nt),Xr(St,ee)}});for(let ee=0,Oe=F.length;ee<Oe;ee++){const St=F.get(ee).context;St.index=ee,St.count=Oe,St.ngForOf=this._ngForOf}P.forEachIdentityChange(ee=>{Xr(F.get(ee.currentIndex),ee)})}static ngTemplateContextGuard(P,F){return!0}static{this.\u0275fac=function(F){return new(F||A)(I.rXU(I.c1b),I.rXU(I.C4Q),I.rXU(I._q3))}}static{this.\u0275dir=I.FsC({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return A})();function Xr(A,V){A.context.$implicit=V.item}let Pu=(()=>{class A{constructor(P,F){this._viewContainer=P,this._context=new Gi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){us("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){us("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,F){return!0}static{this.\u0275fac=function(F){return new(F||A)(I.rXU(I.c1b),I.rXU(I.C4Q))}}static{this.\u0275dir=I.FsC({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return A})();class Gi{constructor(){this.$implicit=null,this.ngIf=null}}function us(A,V){if(V&&!V.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,I.Tbb)(V)}'.`)}let Os=(()=>{class A{static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275mod=I.$C({type:A})}static{this.\u0275inj=I.G2t({})}}return A})();const tr="browser",sr="server";function ks(A){return A===sr}let sn=(()=>{class A{static{this.\u0275prov=(0,I.jDH)({token:A,providedIn:"root",factory:()=>new xi((0,I.KVO)(de),window)})}}return A})();class xi{constructor(V,P){this.document=V,this.window=P,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const P=function Ai(A,V){const P=A.getElementById(V)||A.getElementsByName(V)[0];if(P)return P;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const F=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let ee=F.currentNode;for(;ee;){const Oe=ee.shadowRoot;if(Oe){const nt=Oe.getElementById(V)||Oe.querySelector(`[name="${V}"]`);if(nt)return nt}ee=F.nextNode()}}return null}(this.document,V);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(V){this.supportsScrolling()&&(this.window.history.scrollRestoration=V)}scrollToElement(V){const P=V.getBoundingClientRect(),F=P.left+this.window.pageXOffset,ee=P.top+this.window.pageYOffset,Oe=this.offset();this.window.scrollTo(F-Oe[0],ee-Oe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Di{}},7705:(Rt,Be,U)=>{U.d(Be,{$C:()=>oa,$GK:()=>qt,$K3:()=>RT,AVh:()=>gf,Agw:()=>Xg,BIS:()=>k_,BMQ:()=>Ve,C4Q:()=>o_,Co$:()=>x0,DNE:()=>uf,EFF:()=>ng,EJ8:()=>aa,FsC:()=>xs,G2t:()=>gn,GFd:()=>ht,H3F:()=>ST,H5H:()=>BI,H8p:()=>_d,HJs:()=>WC,Hbi:()=>xC,JZv:()=>dn,Jv_:()=>N0,KH2:()=>og,KVO:()=>dt,L39:()=>zC,LfX:()=>Dn,MKu:()=>IE,NEm:()=>cC,NYb:()=>sC,Njj:()=>ya,O8t:()=>Oe,OA$:()=>_n,Ocv:()=>OD,Ol2:()=>k0,PLl:()=>O_,QTQ:()=>Rp,Ql9:()=>FD,QuC:()=>to,R7$:()=>dm,RV6:()=>Nm,Rfq:()=>at,RxE:()=>em,SKi:()=>ri,TL$:()=>f_,Tbb:()=>pe,VBU:()=>Ha,Vns:()=>Ef,Vt3:()=>a,WHO:()=>xT,WQX:()=>vt,XpG:()=>Om,Xx1:()=>Ju,Y8G:()=>Dl,Z63:()=>Na,_9s:()=>Hh,_q3:()=>vE,aKT:()=>Yo,aNF:()=>L0,bIt:()=>Gp,bkB:()=>Jo,c1b:()=>yv,czy:()=>fu,e01:()=>OT,eBV:()=>Uo,fpN:()=>NC,gRc:()=>yC,gXe:()=>Hr,giA:()=>kT,hnV:()=>bT,iLQ:()=>fE,j41:()=>Cu,jDH:()=>tn,jNT:()=>xm,k0s:()=>jp,kS0:()=>jl,kdw:()=>Hc,lsd:()=>aT,mGM:()=>sT,mq5:()=>r0,n$t:()=>ap,nKC:()=>Ce,naY:()=>_C,nrm:()=>Sm,o8S:()=>lg,oH4:()=>UT,plB:()=>rE,rXU:()=>Zo,sFG:()=>Zv,sZ2:()=>x_,uvJ:()=>vo,w6W:()=>gA,wOt:()=>Ae,wni:()=>oT,xGo:()=>go,xe9:()=>Iv,xvI:()=>zh,zZn:()=>Eo,zcH:()=>Xo,zjR:()=>df});var I=U(1413),Y=U(8359),ae=U(1985),q=U(7786),X=U(4412),de=U(7673),_e=U(7647),$e=U(5558),be=U(3294);function Z(t){for(let n in t)if(t[n]===Z)return n;throw Error("Could not find renamed property on target object.")}function ne(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function ke(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const rt=Z({__forward_ref__:Z});function at(t){return t.__forward_ref__=at,t.toString=function(){return pe(this())},t}function We(t){return pt(t)?t():t}function pt(t){return"function"==typeof t&&t.hasOwnProperty(rt)&&t.__forward_ref__===at}function ut(t){return t&&!!t.\u0275providers}const Vt="https://g.co/ng/security#xss";class Ae extends Error{constructor(n,i){super(function Ge(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function je(t,n){throw new Ae(-201,!1)}function ue(t,n){null==t&&function yt(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function tn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ir(t){return Nt(t,Nr)||Nt(t,Fr)}function Dn(t){return null!==ir(t)}function Nt(t,n){return t.hasOwnProperty(n)?t[n]:null}function ss(t){return t&&(t.hasOwnProperty(Ei)||t.hasOwnProperty(Zn))?t[Ei]:null}const Nr=Z({\u0275prov:Z}),Ei=Z({\u0275inj:Z}),Fr=Z({ngInjectableDef:Z}),Zn=Z({ngInjectorDef:Z});var qt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qt||{});let hn;function pr(t){const n=hn;return hn=t,n}function bn(t,n,i){const o=ir(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&qt.Optional?null:void 0!==n?n:void je(pe(t))}const dn=globalThis;class Ce{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=tn({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const si={},Ti="__NG_DI_FLAG__",$i="ngTempTokenPath",Ke=/\n/gm,k="__source";let H;function se(t){const n=H;return H=t,n}function Re(t,n=qt.Default){if(void 0===H)throw new Ae(-203,!1);return null===H?bn(t,void 0,n):H.get(t,n&qt.Optional?null:void 0,n)}function dt(t,n=qt.Default){return(function Kt(){return hn}()||Re)(We(t),n)}function vt(t,n=qt.Default){return dt(t,mt(n))}function mt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Un(t){const n=[];for(let i=0;i<t.length;i++){const o=We(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Ae(900,!1);let c,f=qt.Default;for(let _=0;_<o.length;_++){const T=o[_],C=oi(T);"number"==typeof C?-1===C?c=T.token:f|=C:c=T}n.push(dt(c,f))}else n.push(dt(o))}return n}function wt(t,n){return t[Ti]=n,t.prototype[Ti]=n,t}function oi(t){return t[Ti]}function Cr(t){return{toString:t}.toString()}var ui=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ui||{}),Hr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Hr||{});const xr={},rn=[],as=Z({\u0275cmp:Z}),Fe=Z({\u0275dir:Z}),Ie=Z({\u0275pipe:Z}),qe=Z({\u0275mod:Z}),ft=Z({\u0275fac:Z}),$t=Z({__NG_ELEMENT_ID__:Z}),nn=Z({__NG_ENV_ID__:Z});function fn(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}function Cn(t,n,i){let o=0;for(;o<i.length;){const c=i[o];if("number"==typeof c){if(0!==c)break;o++;const f=i[o++],_=i[o++],T=i[o++];t.setAttribute(n,_,T,f)}else{const f=c,_=i[++o];me(f)?t.setProperty(n,f,_):t.setAttribute(n,f,_),o++}}return o}function er(t){return 3===t||4===t||6===t}function me(t){return 64===t.charCodeAt(0)}function vn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||Xr(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function Xr(t,n,i,o,c){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const T=t[f++];if("number"==typeof T){if(T===n){_=-1;break}if(T>n){_=f-1;break}}}for(;f<t.length;){const T=t[f];if("number"==typeof T)break;if(T===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}const zi="ng-template";function Pu(t,n,i){let o=0,c=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&c){const _=t[o++];if(i&&"class"===f&&-1!==fn(_.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function Gi(t){return 4===t.type&&t.value!==zi}function us(t,n,i){return n===(4!==t.type||i?t.value:zi)}function ia(t,n,i){let o=4;const c=t.attrs||[],f=function Wi(t){for(let n=0;n<t.length;n++)if(er(t[n]))return n;return t.length}(c);let _=!1;for(let T=0;T<n.length;T++){const C=n[T];if("number"!=typeof C){if(!_)if(4&o){if(o=2|1&o,""!==C&&!us(t,C,i)||""===C&&1===n.length){if(br(o))return!1;_=!0}}else{const x=8&o?C:n[++T];if(8&o&&null!==t.attrs){if(!Pu(t.attrs,x,i)){if(br(o))return!1;_=!0}continue}const Q=Ns(8&o?"class":C,c,Gi(t),i);if(-1===Q){if(br(o))return!1;_=!0;continue}if(""!==x){let fe;fe=Q>f?"":c[Q+1].toLowerCase();const De=8&o?fe:null;if(De&&-1!==fn(De,x,0)||2&o&&x!==fe){if(br(o))return!1;_=!0}}}}else{if(!_&&!br(o)&&!br(C))return!1;if(_&&br(C))continue;_=!1,o=C|1&o}}return br(o)||_}function br(t){return 0==(1&t)}function Ns(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const _=n[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let T=n[++c];for(;"string"==typeof T;)T=n[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function zr(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function _i(t,n,i=!1){for(let o=0;o<n.length;o++)if(ia(t,n[o],i))return!0;return!1}function wi(t,n){return t?":not("+n.trim()+")":n}function sa(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&o){const T=t[++i];c+="["+_+(T.length>0?'="'+T+'"':"")+"]"}else 8&o?c+="."+_:4&o&&(c+=" "+_);else""!==c&&!br(_)&&(n+=wi(f,c),c=""),o=_,f=f||!br(o);i++}return""!==c&&(n+=wi(f,c)),n}function Ha(t){return Cr(()=>{const n=Ga(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ui.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Hr.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""};no(i);const o=t.dependencies;return i.directiveDefs=ro(o,!1),i.pipeDefs=ro(o,!0),i.id=function qi(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function za(t){return wn(t)||Or(t)}function So(t){return null!==t}function oa(t){return Cr(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Nu(t,n){if(null==t)return xr;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}function xs(t){return Cr(()=>{const n=Ga(t);return no(n),n})}function aa(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function wn(t){return t[as]||null}function Or(t){return t[Fe]||null}function Jr(t){return t[Ie]||null}function to(t){const n=wn(t)||Or(t)||Jr(t);return null!==n&&n.standalone}function kr(t,n){const i=t[qe]||null;if(!i&&!0===n)throw new Error(`Type ${pe(t)} does not have '\u0275mod' property.`);return i}function Ga(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Nu(t.inputs,n),outputs:Nu(t.outputs)}}function no(t){t.features?.forEach(n=>n(t))}function ro(t,n){if(!t)return null;const i=n?Jr:za;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(So)}const dr=0,At=1,cn=2,Bn=3,Gr=4,io=5,Sr=6,Os=7,tr=8,sr=9,Ni=10,Gt=11,cs=12,ks=13,mn=14,ur=15,Rr=16,sn=17,xi=18,Ai=19,Zr=20,Di=21,ls=22,qn=23,Ro=24,on=25,ei=1,Ls=2,Ci=7,Po=9,Gn=11;function nr(t){return Array.isArray(t)&&"object"==typeof t[ei]}function Sn(t){return Array.isArray(t)&&!0===t[ei]}function Is(t){return 0!=(4&t.flags)}function Vr(t){return t.componentOffset>-1}function Wa(t){return 1==(1&t.flags)}function Wr(t){return!!t.template}function Es(t){return 0!=(512&t[cn])}function vi(t,n){return t.hasOwnProperty(ft)?t[ft]:null}let an=null,Xi=!1;function qr(t){const n=an;return an=t,n}const Qa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ws(t){if(!js(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Tc(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Ji(t){t.dirty=!0,function hs(t){if(void 0===t.liveConsumerNode)return;const n=Xi;Xi=!0;try{for(const i of t.liveConsumerNode)i.dirty||Ji(i)}finally{Xi=n}}(t),t.consumerMarkedDirty?.(t)}function xo(t){return t&&(t.nextProducerIndex=0),qr(t)}function la(t,n){if(qr(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(js(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)uo(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Tc(t){As(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(ws(i),o!==i.version))return!0}return!1}function da(t){if(As(t),js(t))for(let n=0;n<t.producerNode.length;n++)uo(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function uo(t,n){if(function Xa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),As(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)uo(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],c=t.liveConsumerNode[n];As(c),c.producerIndexOfThis[o]=n}}function js(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function As(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Ou=null;function Oe(t){const n=qr(null);try{return t()}finally{qr(n)}}const St=()=>{},Ln=(()=>({...Qa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:St}))();class Fn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function _n(){return Kn}function Kn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Nn),Xn}function Xn(){const t=ni(this),n=t?.current;if(n){const i=t.previous;if(i===xr)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Nn(t,n,i,o){const c=this.declaredInputs[i],f=ni(t)||function Hs(t,n){return t[ti]=n}(t,{previous:xr,current:null}),_=f.current||(f.current={}),T=f.previous,C=T[c];_[c]=new Fn(C&&C.currentValue,n,T===xr),t[o]=n}_n.ngInherit=!0;const ti="__ngSimpleChanges__";function ni(t){return t[ti]||null}const Pr=function(t,n,i){};function Lt(t){for(;Array.isArray(t);)t=t[dr];return t}function ci(t,n){return Lt(n[t.index])}function Ol(t,n){return t.data[n]}function wr(t,n){const i=n[t];return nr(i)?i:i[dr]}function li(t,n){return null==n?null:t[n]}function Gs(t){t[sn]=0}function bs(t){1024&t[cn]||(t[cn]|=1024,ga(t,1))}function Ll(t){1024&t[cn]&&(t[cn]&=-1025,ga(t,-1))}function ga(t,n){let i=t[Bn];if(null===i)return;i[io]+=n;let o=i;for(i=i[Bn];null!==i&&(1===n&&1===o[io]||-1===n&&0===o[io]);)i[io]+=n,o=i,i=i[Bn]}const Qt={lFrame:G(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function bc(){return Qt.bindingsEnabled}function ot(){return Qt.lFrame.lView}function xn(){return Qt.lFrame.tView}function Uo(t){return Qt.lFrame.contextLView=t,t[tr]}function ya(t){return Qt.lFrame.contextLView=null,t}function Pn(){let t=Sc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Sc(){return Qt.lFrame.currentTNode}function fs(t,n){const i=Qt.lFrame;i.currentTNode=t,i.isParent=n}function Bo(){return Qt.lFrame.isParent}function Ks(){return Qt.lFrame.bindingIndex++}function va(t,n){const i=Qt.lFrame;i.bindingIndex=i.bindingRootIndex=t,ho(n)}function ho(t){Qt.lFrame.currentDirectiveIndex=t}function Fl(){return Qt.lFrame.currentQueryIndex}function E(t){Qt.lFrame.currentQueryIndex=t}function D(t){const n=t[At];return 2===n.type?n.declTNode:1===n.type?t[Sr]:null}function v(t,n,i){if(i&qt.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&qt.Host||(c=D(f),null===c||(f=f[mn],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Qt.lFrame=N();return o.currentTNode=n,o.lView=t,!0}function b(t){const n=N(),i=t[At];Qt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function N(){const t=Qt.lFrame,n=null===t?null:t.child;return null===n?G(t):n}function G(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function J(){const t=Qt.lFrame;return Qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ue=J;function Pe(){const t=J();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function In(){return Qt.lFrame.selectedIndex}function En(t){Qt.lFrame.selectedIndex=t}function Jt(){const t=Qt.lFrame;return Ol(t.tView,t.selectedIndex)}let th=!0;function Mc(){return th}function Ss(t){th=t}function tu(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:T,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:$}=f;_&&(t.contentHooks??=[]).push(-i,_),T&&((t.contentHooks??=[]).push(i,T),(t.contentCheckHooks??=[]).push(i,T)),C&&(t.viewHooks??=[]).push(-i,C),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=$&&(t.destroyHooks??=[]).push(i,$)}}function Nc(t,n,i){Ea(t,n,3,i)}function Bu(t,n,i,o){(3&t[cn])===i&&Ea(t,n,i,o)}function nh(t,n){let i=t[cn];(3&i)===n&&(i&=8191,i+=1,t[cn]=i)}function Ea(t,n,i,o){const f=o??-1,_=n.length-1;let T=0;for(let C=void 0!==o?65535&t[sn]:0;C<_;C++)if("number"==typeof n[C+1]){if(T=n[C],null!=o&&T>=o)break}else n[C]<0&&(t[sn]+=65536),(T<f||-1==f)&&(rh(t,i,n,C),t[sn]=(4294901760&t[sn])+C+2),C++}function nu(t,n){Pr(4,t,n);const i=qr(null);try{n.call(t)}finally{qr(i),Pr(5,t,n)}}function rh(t,n,i,o){const c=i[o]<0,f=i[o+1],T=t[c?-i[o]:i[o]];c?t[cn]>>13<t[sn]>>16&&(3&t[cn])===n&&(t[cn]+=8192,nu(T,f)):nu(T,f)}const ru=-1;class fo{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function wa(t){return t!==ru}function $u(t){return 32767&t}function Hu(t,n){let i=function ih(t){return t>>16}(t),o=n;for(;i>0;)o=o[mn],i--;return o}let _s=!0;function Oc(t){const n=_s;return _s=t,n}const kc=255,Lc=5;let qs=0;const Si={};function po(t,n){const i=Gu(t,n);if(-1!==i)return i;const o=n[At];o.firstCreatePass&&(t.injectorIndex=n.length,zu(o.data,t),zu(n,null),zu(o.blueprint,null));const c=Wu(t,n),f=t.injectorIndex;if(wa(c)){const _=$u(c),T=Hu(c,n),C=T[At].data;for(let x=0;x<8;x++)n[f+x]=T[_+x]|C[_+x]}return n[f+8]=c,f}function zu(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Gu(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Wu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){if(o=Bl(c),null===o)return ru;if(i++,c=c[mn],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return ru}function Ku(t,n,i){!function su(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty($t)&&(o=i[$t]),null==o&&(o=i[$t]=qs++);const c=o&kc;n.data[t+(c>>Lc)]|=1<<c}(t,n,i)}function oh(t,n,i){if(i&qt.Optional||void 0!==t)return t;je()}function ah(t,n,i,o){if(i&qt.Optional&&void 0===o&&(o=null),!(i&(qt.Self|qt.Host))){const c=t[sr],f=pr(void 0);try{return c?c.get(n,o,i&qt.Optional):bn(n,o,i&qt.Optional)}finally{pr(f)}}return oh(o,0,i)}function uh(t,n,i,o=qt.Default,c){if(null!==t){if(2048&n[cn]&&!(o&qt.Self)){const _=function bf(t,n,i,o,c){let f=t,_=n;for(;null!==f&&null!==_&&2048&_[cn]&&!(512&_[cn]);){const T=ou(f,_,i,o|qt.Self,Si);if(T!==Si)return T;let C=f.parent;if(!C){const x=_[Zr];if(x){const $=x.get(i,Si,o);if($!==Si)return $}C=Bl(_),_=_[mn]}f=C}return c}(t,n,i,o,Si);if(_!==Si)return _}const f=ou(t,n,i,o,Si);if(f!==Si)return f}return ah(n,i,o,c)}function ou(t,n,i,o,c){const f=function gg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty($t)?t[$t]:void 0;return"number"==typeof n?n>=0?n&kc:zo:n}(i);if("function"==typeof f){if(!v(n,t,o))return o&qt.Host?oh(c,0,o):ah(n,i,o,c);try{let _;if(_=f(o),null!=_||o&qt.Optional)return _;je()}finally{Ue()}}else if("number"==typeof f){let _=null,T=Gu(t,n),C=ru,x=o&qt.Host?n[ur][Sr]:null;for((-1===T||o&qt.SkipSelf)&&(C=-1===T?Wu(t,n):n[T+8],C!==ru&&Ul(o,!1)?(_=n[At],T=$u(C),n=Hu(C,n)):T=-1);-1!==T;){const $=n[At];if(ch(f,T,$.data)){const Q=Fc(T,n,i,_,o,x);if(Q!==Si)return Q}C=n[T+8],C!==ru&&Ul(o,n[At].data[T+8]===x)&&ch(f,T,n)?(_=$,T=$u(C),n=Hu(C,n)):T=-1}}return c}function Fc(t,n,i,o,c,f){const _=n[At],T=_.data[t+8],$=Vl(T,_,i,null==o?Vr(T)&&_s:o!=_&&0!=(3&T.type),c&qt.Host&&f===T);return null!==$?Li(n,_,$,T):Si}function Vl(t,n,i,o,c){const f=t.providerIndexes,_=n.data,T=1048575&f,C=t.directiveStart,$=f>>20,fe=c?T+$:t.directiveEnd;for(let De=o?T:T+$;De<fe;De++){const Ze=_[De];if(De<C&&i===Ze||De>=C&&Ze.type===i)return De}if(c){const De=_[C];if(De&&Wr(De)&&De.type===i)return C}return null}function Li(t,n,i,o){let c=t[i];const f=n.data;if(function ju(t){return t instanceof fo}(c)){const _=c;_.resolving&&function Qe(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${t}${i}`)}(function et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(f[i]));const T=Oc(_.canSeeViewProviders);_.resolving=!0;const x=_.injectImpl?pr(_.injectImpl):null;v(t,o,qt.Default);try{c=t[i]=_.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Af(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const _=Kn(n);(i.preOrderHooks??=[]).push(t,_),(i.preOrderCheckHooks??=[]).push(t,_)}c&&(i.preOrderHooks??=[]).push(0-t,c),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==x&&pr(x),Oc(T),_.resolving=!1,Ue()}}return c}function ch(t,n,i){return!!(i[n+(t>>Lc)]&1<<t)}function Ul(t,n){return!(t&qt.Self||t&qt.Host&&n)}class Br{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return uh(this._tNode,this._lView,n,mt(o),i)}}function zo(){return new Br(Pn(),ot())}function go(t){return Cr(()=>{const n=t.prototype.constructor,i=n[ft]||qu(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[ft]||qu(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function qu(t){return pt(t)?()=>{const n=qu(We(t));return n&&n()}:vi(t)}function Bl(t){const n=t[At],i=n.type;return 2===i?n.declTNode:1===i?t[Sr]:null}function jl(t){return function sh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(er(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Pn(),t)}const Aa="__parameters__";function au(t,n,i){return Cr(()=>{const o=function Uc(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const _=new c(...f);return T.annotation=_,T;function T(C,x,$){const Q=C.hasOwnProperty(Aa)?C[Aa]:Object.defineProperty(C,Aa,{value:[]})[Aa];for(;Q.length<=$;)Q.push(null);return(Q[$]=Q[$]||[]).push(_),C}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function ys(t,n){t.forEach(i=>Array.isArray(i)?ys(i,n):n(i))}function uu(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Bc(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function es(t,n,i){let o=lu(t,n);return o>=0?t[1|o]=i:(o=~o,function Nf(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function ph(t,n){const i=lu(t,n);if(i>=0)return t[1|i]}function lu(t,n){return function jc(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),_=t[f<<i];if(n===_)return f<<i;_>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const Ju=wt(au("Optional"),8),Hc=wt(au("SkipSelf"),4);function Ko(t){return 128==(128&t.flags)}var fu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fu||{});const nc=new Map;let Yc=0;const Dh="__ngContext__";function ai(t,n){nr(n)?(t[Dh]=n[Ai],function Gf(t){nc.set(t[Ai],t)}(n)):t[Dh]=n}let _o;function gu(t,n){return _o(t,n)}function pi(t){const n=t[Bn];return Sn(n)?n[Bn]:n}function Jc(t){return Xs(t[cs])}function ud(t){return Xs(t[Gr])}function Xs(t){for(;null!==t&&!Sn(t);)t=t[Gr];return t}function _u(t,n,i,o,c){if(null!=o){let f,_=!1;Sn(o)?f=o:nr(o)&&(_=!0,o=o[dr]);const T=Lt(o);0===t&&null!==i?null==c?dd(n,i,T):yo(n,i,T,c||null,!0):1===t&&null!==i?yo(n,i,T,c||null,!0):2===t?function Sh(t,n,i){const o=tl(t,n);o&&function Yf(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,T,_):3===t&&n.destroyNode(T),null!=f&&function Cg(t,n,i,o,c){const f=i[Ci];f!==Lt(i)&&_u(n,t,o,f,c);for(let T=Gn;T<i.length;T++){const C=i[T];Rh(C[At],C,t,n,o,f)}}(n,t,f,i,c)}}function m(t,n,i){return t.createElement(n,i)}function Ee(t,n){const i=t[Po],o=i.indexOf(n);Ll(n),i.splice(o,1)}function ze(t,n){if(t.length<=Gn)return;const i=Gn+n,o=t[i];if(o){const c=o[Rr];null!==c&&c!==t&&Ee(c,o),n>0&&(t[i-1][Gr]=o[Gr]);const f=Bc(t,Gn+n);!function l(t,n){Rh(t,n,n[Gt],2,null,null),n[dr]=null,n[Sr]=null}(o[At],o);const _=f[xi];null!==_&&_.detachView(f[At]),o[Bn]=null,o[Gr]=null,o[cn]&=-129}return o}function Et(t,n){if(!(256&n[cn])){const i=n[Gt];n[qn]&&da(n[qn]),n[Ro]&&da(n[Ro]),i.destroyNode&&Rh(t,n,i,3,null,null),function M(t){let n=t[cs];if(!n)return Ot(t[At],t);for(;n;){let i=null;if(nr(n))i=n[cs];else{const o=n[Gn];o&&(i=o)}if(!i){for(;n&&!n[Gr]&&n!==t;)nr(n)&&Ot(n[At],n),n=n[Bn];null===n&&(n=t),nr(n)&&Ot(n[At],n),i=n&&n[Gr]}n=i}}(n)}}function Ot(t,n){if(!(256&n[cn])){n[cn]&=-129,n[cn]|=256,function Mr(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof fo)){const f=i[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const T=c[f[_]],C=f[_+1];Pr(4,T,C);try{C.call(T)}finally{Pr(5,T,C)}}else{Pr(4,c,f);try{f.call(c)}finally{Pr(5,c,f)}}}}}(t,n),function Ft(t,n){const i=t.cleanup,o=n[Os];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const _=i[f+3];_>=0?o[_]():o[-_].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[Os]=null);const c=n[Di];if(null!==c){n[Di]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,n),1===n[At].type&&n[Gt].destroy();const i=n[Rr];if(null!==i&&Sn(n[Bn])){i!==n[Bn]&&Ee(i,n);const o=n[xi];null!==o&&o.detachView(t)}!function rc(t){nc.delete(t[Ai])}(n)}}function ts(t,n,i){return function Zc(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[dr];{const{componentOffset:c}=o;if(c>-1){const{encapsulation:f}=t.data[o.directiveStart+c];if(f===Hr.None||f===Hr.Emulated)return null}return ci(o,i)}}(t,n.parent,i)}function yo(t,n,i,o,c){t.insertBefore(n,i,o,c)}function dd(t,n,i){t.appendChild(n,i)}function el(t,n,i,o,c){null!==o?yo(t,n,i,o,c):dd(t,n,i)}function tl(t,n){return t.parentNode(n)}let yu,Jf,Mh,pd=function rl(t,n,i){return 40&t.type?ci(t,i):null};function Qo(t,n,i,o){const c=ts(t,o,n),f=n[Gt],T=function nl(t,n,i){return pd(t,n,i)}(o.parent||n[Sr],o,n);if(null!=c)if(Array.isArray(i))for(let C=0;C<i.length;C++)el(f,c,i[C],T,!1);else el(f,c,i,T,!1);void 0!==yu&&yu(f,o,n,i,c)}function il(t,n){if(null!==n){const i=n.type;if(3&i)return ci(n,t);if(4&i)return oc(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return il(t,o);{const c=t[n.index];return Sn(c)?oc(-1,c):Lt(c)}}if(32&i)return gu(n,t)()||Lt(t[n.index]);{const o=sl(t,n);return null!==o?Array.isArray(o)?o[0]:il(pi(t[ur]),o):il(t,n.next)}}return null}function sl(t,n){return null!==n?t[ur][Sr].projection[n.projection]:null}function oc(t,n){const i=Gn+t+1;if(i<n.length){const o=n[i],c=o[At].firstChild;if(null!==c)return il(o,c)}return n[Ci]}function Dg(t,n,i,o,c,f,_){for(;null!=i;){const T=o[i.index],C=i.type;if(_&&0===n&&(T&&ai(Lt(T),o),i.flags|=2),32!=(32&i.flags))if(8&C)Dg(t,n,i.child,o,c,f,!1),_u(n,t,c,T,f);else if(32&C){const x=gu(i,o);let $;for(;$=x();)_u(n,t,c,$,f);_u(n,t,c,T,f)}else 16&C?Xf(t,n,o,i,c,f):_u(n,t,c,T,f);i=_?i.projectionNext:i.next}}function Rh(t,n,i,o,c,f){Dg(i,o,t.firstChild,n,c,f,!1)}function Xf(t,n,i,o,c,f){const _=i[ur],C=_[Sr].projection[o.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)_u(n,t,c,C[x],f);else{let x=C;const $=_[Bn];Ko(o)&&(x.flags|=128),Dg(t,n,x,$,c,f,!0)}}function d_(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function h_(t,n,i){const{mergedAttrs:o,classes:c,styles:f}=i;null!==o&&Cn(t,n,o),null!==c&&d_(t,n,c),null!==f&&function Sg(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function f_(t){Jf=t}function m_(t){return function Pg(){if(void 0===Mh&&(Mh=null,dn.trustedTypes))try{Mh=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Mh}()?.createScriptURL(t)||t}class Zf{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vt})`}}function Ma(t){return t instanceof Zf?t.changingThisBreaksApplicationSecurity:t}function Nh(t,n){const i=function Og(t){return t instanceof Zf&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${Vt})`)}return i===n}const Nv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var md=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(md||{});function op(t){const n=Lh();return n?n.sanitize(md.URL,t)||"":Nh(t,"URL")?Ma(t):function xh(t){return(t=String(t)).match(Nv)?t:"unsafe:"+t}(Te(t))}function $g(t){const n=Lh();if(n)return m_(n.sanitize(md.RESOURCE_URL,t)||"");if(Nh(t,"ResourceURL"))return m_(Ma(t));throw new Ae(904,!1)}function ap(t,n,i){return function Uv(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?$g:op}(n,i)(t)}function Lh(){const t=ot();return t&&t[Ni].sanitizer}const Na=new Ce("ENVIRONMENT_INITIALIZER"),C_=new Ce("INJECTOR",-1),up=new Ce("INJECTOR_DEF_TYPES");class cp{get(n,i=si){if(i===si){const o=new Error(`NullInjectorError: No provider for ${pe(n)}!`);throw o.name="NullInjectorError",o}return i}}function b_(...t){return{\u0275providers:Fh(0,t),\u0275fromNgModule:!0}}function Fh(t,...n){const i=[],o=new Set;let c;const f=_=>{i.push(_)};return ys(n,_=>{const T=_;lp(T,f,[],o)&&(c||=[],c.push(T))}),void 0!==c&&S_(c,f),i}function S_(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:c}=t[i];Gg(c,f=>{n(f,o)})}}function lp(t,n,i,o){if(!(t=We(t)))return!1;let c=null,f=ss(t);const _=!f&&wn(t);if(f||_){if(_&&!_.standalone)return!1;c=t}else{const C=t.ngModule;if(f=ss(C),!f)return!1;c=C}const T=o.has(c);if(_){if(T)return!1;if(o.add(c),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of C)lp(x,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let x;o.add(c);try{ys(f.imports,$=>{lp($,n,i,o)&&(x||=[],x.push($))})}finally{}void 0!==x&&S_(x,n)}if(!T){const x=vi(c)||(()=>new c);n({provide:c,useFactory:x,deps:rn},c),n({provide:up,useValue:c,multi:!0},c),n({provide:Na,useValue:()=>dt(c),multi:!0},c)}const C=f.providers;if(null!=C&&!T){const x=t;Gg(C,$=>{n($,x)})}}}return c!==t&&void 0!==t.providers}function Gg(t,n){for(let i of t)ut(i)&&(i=i.\u0275providers),Array.isArray(i)?Gg(i,n):n(i)}const Wg=Z({provide:String,useValue:Z});function Vh(t){return null!==t&&"object"==typeof t&&Wg in t}function Eu(t){return"function"==typeof t}const _d=new Ce("Set Injector scope."),yd={},R_={};let uc;function Uh(){return void 0===uc&&(uc=new cp),uc}class vo{}class dl extends vo{get destroyed(){return this._destroyed}constructor(n,i,o,c){super(),this.parent=i,this.source=o,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yg(n,_=>this.processProvider(_)),this.records.set(C_,vd(void 0,this)),c.has("environment")&&this.records.set(vo,vd(void 0,this));const f=this.records.get(_d);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(up.multi,rn,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=se(this),o=pr(void 0);try{return n()}finally{se(i),pr(o)}}get(n,i=si,o=qt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(nn))return n[nn](this);o=mt(o);const f=se(this),_=pr(void 0);try{if(!(o&qt.SkipSelf)){let C=this.records.get(n);if(void 0===C){const x=function N_(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ce}(n)&&ir(n);C=x&&this.injectableDefInScope(x)?vd(cc(n),yd):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&qt.Self?Uh():this.parent).get(n,i=o&qt.Optional&&i===si?null:i)}catch(T){if("NullInjectorError"===T.name){if((T[$i]=T[$i]||[]).unshift(pe(n)),f)throw T;return function kn(t,n,i,o){const c=t[$i];throw n[k]&&c.unshift(n[k]),t.message=function It(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=pe(n);if(Array.isArray(n))c=n.map(pe).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let T=n[_];f.push(_+":"+("string"==typeof T?JSON.stringify(T):pe(T)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(Ke,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[$i]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{pr(_),se(f)}}resolveInjectorInitializers(){const n=se(this),i=pr(void 0);try{const c=this.get(Na.multi,rn,qt.Self);for(const f of c)f()}finally{se(n),pr(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(pe(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(n){let i=Eu(n=We(n))?n:We(n&&n.provide);const o=function Bv(t){return Vh(t)?vd(void 0,t.useValue):vd(P_(t),yd)}(n);if(Eu(n)||!0!==n.multi)this.records.get(i);else{let c=this.records.get(i);c||(c=vd(void 0,yd,!0),c.factory=()=>Un(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===yd&&(i.value=R_,i.value=i.factory()),"object"==typeof i.value&&i.value&&function jv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=We(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function cc(t){const n=ir(t),i=null!==n?n.factory:vi(t);if(null!==i)return i;if(t instanceof Ce)throw new Ae(204,!1);if(t instanceof Function)return function Qg(t){const n=t.length;if(n>0)throw function Ys(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}(n,"?"),new Ae(204,!1);const i=function Er(t){return t&&(t[Nr]||t[Fr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Ae(204,!1)}function P_(t,n,i){let o;if(Eu(t)){const c=We(t);return vi(c)||cc(c)}if(Vh(t))o=()=>We(t.useValue);else if(function dp(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Un(t.deps||[]));else if(function Kg(t){return!(!t||!t.useExisting)}(t))o=()=>dt(We(t.useExisting));else{const c=We(t&&(t.useClass||t.provide));if(!function M_(t){return!!t.deps}(t))return vi(c)||cc(c);o=()=>new c(...Un(t.deps))}return o}function vd(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Yg(t,n){for(const i of t)Array.isArray(i)?Yg(i,n):i&&ut(i)?Yg(i.\u0275providers,n):n(i)}const x_=new Ce("AppId",{providedIn:"root",factory:()=>$v}),$v="ng",O_=new Ce("Platform Initializer"),Xg=new Ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),k_=new Ce("CSP nonce",{providedIn:"root",factory:()=>function ul(){if(void 0!==Jf)return Jf;if(typeof document<"u")return document;throw new Ae(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let mp=(t,n,i)=>null;function _r(t,n,i=!1){return mp(t,n,i)}class Qv{}class Yv{}class Jv{resolveComponentFactory(n){throw function Xv(t){const n=Error(`No component factory found for ${pe(t)}.`);return n.ngComponent=t,n}(n)}}let Js=(()=>{class t{static{this.NULL=new Jv}}return t})();function Tu(){return $h(Pn(),ot())}function $h(t,n){return new Yo(ci(t,n))}let Yo=(()=>{class t{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=Tu}}return t})();function Ip(t){return t instanceof Yo?t.nativeElement:t}class Hh{}let Zv=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function eI(){const t=ot(),i=wr(Pn().index,t);return(nr(i)?i:t)[Gt]}()}}return t})(),H_=(()=>{class t{static{this.\u0275prov=tn({token:t,providedIn:"root",factory:()=>null})}}return t})();class em{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const zh=new em("16.2.12"),tm={};function lc(t,n=null,i=null,o){const c=om(t,n,i,o);return c.resolveInjectorInitializers(),c}function om(t,n=null,i=null,o,c=new Set){const f=[i||rn,b_(t)];return o=o||("object"==typeof t?void 0:pe(t)),new dl(f,n||Uh(),o||null,c)}let Eo=(()=>{class t{static{this.THROW_IF_NOT_FOUND=si}static{this.NULL=new cp}static create(i,o){if(Array.isArray(i))return lc({name:""},o,i,"");{const c=i.name??"";return lc({name:c},i.parent,i.providers,c)}}static{this.\u0275prov=tn({token:t,providedIn:"any",factory:()=>dt(C_)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function am(t){return t.ngOriginalError}class Xo{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&am(n);for(;i&&am(i);)i=am(i);return i||null}}function Dd(t){return n=>{setTimeout(t,void 0,n)}}const Jo=class nI extends I.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let c=n,f=i||(()=>null),_=o;if(n&&"object"==typeof n){const C=n;c=C.next?.bind(C),f=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(f=Dd(f),c&&(c=Dd(c)),_&&(_=Dd(_)));const T=super.subscribe({next:c,error:f,complete:_});return n instanceof Y.yU&&n.add(T),T}};function Dp(...t){}class ri{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Wh(){const t="function"==typeof dn.requestAnimationFrame;let n=dn[t?"requestAnimationFrame":"setTimeout"],i=dn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function PE(t){const n=()=>{!function RE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(dn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kh(t),t.isCheckStableRunning=!0,dc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,_,T)=>{if(function sI(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(T))return i.invokeTask(c,f,_,T);try{return W_(t),i.invokeTask(c,f,_,T)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),qh(t)}},onInvoke:(i,o,c,f,_,T,C)=>{try{return W_(t),i.invoke(c,f,_,T,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),qh(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Kh(t),dc(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ri.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(ri.isInAngularZone())throw new Ae(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,n,rI,Dp,Dp);try{return f.runTask(_,i,o)}finally{f.cancelTask(_)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const rI={};function dc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function W_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qh(t){t._nesting--,dc(t)}class iI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}const K_=new Ce("",{providedIn:"root",factory:Qh});function Qh(){const t=vt(ri);let n=!0;const i=new ae.c(c=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(n),c.complete()})}),o=new ae.c(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{ri.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,c.next(!0))})})});const _=t.onUnstable.subscribe(()=>{ri.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}});return(0,q.h)(i,o.pipe((0,_e.u)()))}function xa(t){return t instanceof Function?t():t}let bd=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=tn({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Yh(t){for(;t;){t[cn]|=64;const n=pi(t);if(Es(t)&&!n)return t;t=n}return null}const X_=new Ce("",{providedIn:"root",factory:()=>!1});let Sp=null;function Z_(t,n){return t[n]??ny()}function ey(t,n){const i=ny();i.producerNode?.length&&(t[n]=Sp,i.lView=t,Sp=lm())}const ty={...Qa,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Yh(t.lView)},lView:null};function lm(){return Object.create(ty)}function ny(){return Sp??=lm(),Sp}const An={};function dm(t){ry(xn(),ot(),In()+t,!1)}function ry(t,n,i,o){if(!o)if(3==(3&n[cn])){const f=t.preOrderCheckHooks;null!==f&&Nc(n,f,i)}else{const f=t.preOrderHooks;null!==f&&Bu(n,f,0,i)}En(i)}function Zo(t,n=qt.Default){const i=ot();return null===i?dt(t,n):uh(Pn(),i,We(t),n)}function Rp(){throw new Error("invalid")}function Pp(t,n,i,o,c,f,_,T,C,x,$){const Q=n.blueprint.slice();return Q[dr]=c,Q[cn]=140|o,(null!==x||t&&2048&t[cn])&&(Q[cn]|=2048),Gs(Q),Q[Bn]=Q[mn]=t,Q[tr]=i,Q[Ni]=_||t&&t[Ni],Q[Gt]=T||t&&t[Gt],Q[sr]=C||t&&t[sr]||null,Q[Sr]=f,Q[Ai]=function od(){return Yc++}(),Q[ls]=$,Q[Zr]=x,Q[ur]=2==n.type?t[ur]:Q,Q}function Rd(t,n,i,o,c){let f=t.data[n];if(null===f)f=function hm(t,n,i,o,c){const f=Sc(),_=Bo(),C=t.data[n]=function pI(t,n,i,o,c,f){let _=n?n.injectorIndex:-1,T=0;return function Za(){return null!==Qt.skipHydrationRootTNode}()&&(T|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=C),null!==f&&(_?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(t,n,i,o,c),function Lu(){return Qt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const _=function Ws(){const t=Qt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return fs(f,!0),f}function Xh(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function iy(t,n,i,o,c){const f=Z_(n,qn),_=In(),T=2&o;try{En(-1),T&&n.length>on&&ry(t,n,on,!1),Pr(T?2:0,c);const x=T?f:null,$=xo(x);try{null!==x&&(x.dirty=!1),i(o,c)}finally{la(x,$)}}finally{T&&null===n[qn]&&ey(n,qn),En(_),Pr(T?3:1,c)}}function sy(t,n,i){if(Is(n)){const o=qr(null);try{const f=n.directiveEnd;for(let _=n.directiveStart;_<f;_++){const T=t.data[_];T.contentQueries&&T.contentQueries(1,i[_],_)}}finally{qr(o)}}}function oy(t,n,i){bc()&&(function jE(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;Vr(i)&&function yI(t,n,i){const o=ci(n,t),c=lI(i);let _=16;i.signals?_=4096:i.onPush&&(_=64);const T=Op(t,Pp(t,c,null,_,o,n,null,t[Ni].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=T}(n,i,t.data[c+i.componentOffset]),t.firstCreatePass||po(i,n),ai(o,n);const _=i.initialInputs;for(let T=c;T<f;T++){const C=t.data[T],x=Li(n,t,T,i);ai(x,n),null!==_&&my(0,T-c,x,C,0,_),Wr(C)&&(wr(i.index,n)[tr]=Li(n,t,T,i))}}(t,n,i,ci(i,n)),64==(64&i.flags)&&_I(t,n,i))}function ay(t,n,i=ci){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],T=-1===_?i(n,t):t[_];t[c++]=T}}}function lI(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=fm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function fm(t,n,i,o,c,f,_,T,C,x,$){const Q=on+o,fe=Q+c,De=function dI(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:An);return i}(Q,fe),Ze="function"==typeof x?x():x;return De[At]={type:t,blueprint:De,template:i,queries:null,viewQuery:T,declTNode:n,data:De.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:Ze,incompleteFirstPass:!1,ssrId:$}}let uy=t=>null;function ly(t,n,i,o){for(let c in t)if(t.hasOwnProperty(c)){i=null===i?{}:i;const f=t[c];null===o?dy(i,n,c,f):o.hasOwnProperty(c)&&dy(i,n,o[c],f)}return i}function dy(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function Mp(t,n,i,o){if(bc()){const c=null===o?null:{"":-1},f=function py(t,n){const i=t.directiveRegistry;let o=null,c=null;if(i)for(let f=0;f<i.length;f++){const _=i[f];if(_i(n,_.selectors,!1))if(o||(o=[]),Wr(_))if(null!==_.findHostDirectiveDefs){const T=[];c=c||new Map,_.findHostDirectiveDefs(_,T,c),o.unshift(...T,_),gy(t,n,T.length)}else o.unshift(_),gy(t,n,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,o,c),o.push(_)}return null===o?null:[o,c]}(t,i);let _,T;null===f?_=T=null:[_,T]=f,null!==_&&hy(t,n,i,_,c,T),c&&function $E(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new Ae(-301,!1);o.push(n[c],f)}}}(i,o,c)}i.mergedAttrs=vn(i.mergedAttrs,i.attrs)}function hy(t,n,i,o,c,f){for(let x=0;x<o.length;x++)Ku(po(i,n),t,o[x].type);!function pm(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let x=0;x<o.length;x++){const $=o[x];$.providersResolver&&$.providersResolver($)}let _=!1,T=!1,C=Xh(t,n,o.length,null);for(let x=0;x<o.length;x++){const $=o[x];i.mergedAttrs=vn(i.mergedAttrs,$.hostAttrs),Np(t,i,n,C,$),HE(C,$,c),null!==$.contentQueries&&(i.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(i.flags|=64);const Q=$.type.prototype;!_&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),_=!0),!T&&(Q.ngOnChanges||Q.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),T=!0),C++}!function gI(t,n,i){const c=n.directiveEnd,f=t.data,_=n.attrs,T=[];let C=null,x=null;for(let $=n.directiveStart;$<c;$++){const Q=f[$],fe=i?i.get(Q):null,Ze=fe?fe.outputs:null;C=ly(Q.inputs,$,C,fe?fe.inputs:null),x=ly(Q.outputs,$,x,Ze);const _t=null===C||null===_||Gi(n)?null:Zh(C,$,_);T.push(_t)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=T,n.inputs=C,n.outputs=x}(t,i,f)}function _I(t,n,i){const o=i.directiveStart,c=i.directiveEnd,f=i.index,_=function Vu(){return Qt.lFrame.currentDirectiveIndex}();try{En(f);for(let T=o;T<c;T++){const C=t.data[T],x=n[T];ho(T),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&fy(C,x)}}finally{En(-1),ho(_)}}function fy(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function gy(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function HE(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;Wr(n)&&(i[""]=t)}}function Np(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=vi(c.type)),_=new fo(f,Wr(c),Zo);t.blueprint[o]=_,i[o]=_,function UE(t,n,i,o,c){const f=c.hostBindings;if(f){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const T=~n.index;(function BE(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(_)!=T&&_.push(T),_.push(i,o,f)}}(t,n,o,Xh(t,i,c.hostVars,An),c)}function Oa(t,n,i,o,c,f){const _=ci(t,n);!function Jh(t,n,i,o,c,f,_){if(null==f)t.removeAttribute(n,c,i);else{const T=null==_?Te(f):_(f,o||"",c);t.setAttribute(n,c,T,i)}}(n[Gt],_,f,t.value,i,o,c)}function my(t,n,i,o,c,f){const _=f[n];if(null!==_)for(let T=0;T<_.length;)gm(o,i,_[T++],_[T++],_[T++])}function gm(t,n,i,o,c){const f=qr(null);try{const _=t.inputTransforms;null!==_&&_.hasOwnProperty(o)&&(c=_[o].call(n,c)),null!==t.setInput?t.setInput(n,c,i,o):n[o]=c}finally{qr(f)}}function Zh(t,n,i){let o=null,c=0;for(;c<i.length;){const f=i[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const _=t[f];for(let T=0;T<_.length;T+=2)if(_[T]===n){o.push(f,_[T+1],i[c+1]);break}}c+=2}else c+=2;else c+=4}return o}function xp(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function _y(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const _=t.data[f];E(i[o]),_.contentQueries(2,n[f],f)}}}function Op(t,n){return t[cs]?t[ks][Gr]=n:t[cs]=n,t[ks]=n,n}function kp(t,n,i){E(0);const o=qr(null);try{n(t,i)}finally{qr(o)}}function yy(t){return t[Os]||(t[Os]=[])}function _m(t){return t.cleanup||(t.cleanup=[])}function fc(t,n){const i=t[sr],o=i?i.get(Xo,null):null;o&&o.handleError(n)}function Rs(t,n,i,o,c){for(let f=0;f<i.length;){const _=i[f++],T=i[f++];gm(t.data[_],n[_],o,T,c)}}function vy(t,n){const i=wr(n,t),o=i[At];!function Iy(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const c=i[dr];null!==c&&null===i[ls]&&(i[ls]=_r(c,i[sr])),Il(o,i,i[tr])}function Il(t,n,i){b(n);try{const o=t.viewQuery;null!==o&&kp(1,o,i);const c=t.template;null!==c&&iy(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_y(t,n),t.staticViewQueries&&kp(2,t.viewQuery,i);const f=t.components;null!==f&&function ef(t,n){for(let i=0;i<n.length;i++)vy(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[cn]&=-5,Pe()}}let ns=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,c){const f=typeof Zone>"u"?null:Zone.current,_=function nt(t,n,i){const o=Object.create(Ln);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const c=_=>{o.cleanupFn=_};return o.ref={notify:()=>Ji(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Tc(o))return;o.hasRun=!0;const _=xo(o);try{o.cleanupFn(),o.cleanupFn=St,o.fn(c)}finally{la(o,_)}},cleanup:()=>o.cleanupFn()},o.ref}(i,x=>{this.all.has(x)&&this.queue.set(x,f)},c);let T;this.all.add(_),_.notify();const C=()=>{_.cleanup(),T?.(),this.all.delete(_),this.queue.delete(_)};return T=o?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=tn({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Pd(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const T=n[_];"number"==typeof T?f=T:1==f?c=ke(c,T):2==f&&(o=ke(o,T+": "+n[++_]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}function ka(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(Lt(f)),Sn(f)&&pc(f,o);const _=i.type;if(8&_)ka(t,n,i.child,o);else if(32&_){const T=gu(i,n);let C;for(;C=T();)o.push(C)}else if(16&_){const T=sl(n,i);if(Array.isArray(T))o.push(...T);else{const C=pi(n[ur]);ka(C[At],C,T,o,!0)}}i=c?i.projectionNext:i.next}return o}function pc(t,n){for(let i=Gn;i<t.length;i++){const o=t[i],c=o[At].firstChild;null!==c&&ka(o[At],o,c,n)}t[Ci]!==t[dr]&&n.push(t[Ci])}function Md(t,n,i,o=!0){const c=n[Ni],f=c.rendererFactory,_=c.afterRenderEventManager;f.begin?.(),_?.begin();try{Ey(t,n,t.template,i)}catch(C){throw o&&fc(n,C),C}finally{f.end?.(),c.effectManager?.flush(),_?.end()}}function Ey(t,n,i,o){const c=n[cn];if(256!=(256&c)){n[Ni].effectManager?.flush(),b(n);try{Gs(n),function jo(t){return Qt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&iy(t,n,i,2,o);const _=3==(3&c);if(_){const x=t.preOrderCheckHooks;null!==x&&Nc(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Bu(n,x,0,null),nh(n,0)}if(function EI(t){for(let n=Jc(t);null!==n;n=ud(n)){if(!n[Ls])continue;const i=n[Po];for(let o=0;o<i.length;o++){bs(i[o])}}}(n),Ty(n,2),null!==t.contentQueries&&_y(t,n),_){const x=t.contentCheckHooks;null!==x&&Nc(n,x)}else{const x=t.contentHooks;null!==x&&Bu(n,x,1),nh(n,1)}!function kE(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=Z_(n,Ro);try{for(let c=0;c<i.length;c++){const f=i[c];if(f<0)En(~f);else{const _=f,T=i[++c],C=i[++c];va(T,_),o.dirty=!1;const x=xo(o);try{C(2,n[_])}finally{la(o,x)}}}}finally{null===n[Ro]&&ey(n,Ro),En(-1)}}(t,n);const T=t.components;null!==T&&Lp(n,T,0);const C=t.viewQuery;if(null!==C&&kp(2,C,o),_){const x=t.viewCheckHooks;null!==x&&Nc(n,x)}else{const x=t.viewHooks;null!==x&&Bu(n,x,2),nh(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[cn]&=-73,Ll(n)}finally{Pe()}}}function Ty(t,n){for(let i=Jc(t);null!==i;i=ud(i))for(let o=Gn;o<i.length;o++)Ay(i[o],n)}function wy(t,n,i){Ay(wr(n,t),i)}function Ay(t,n){if(!function kl(t){return 128==(128&t[cn])}(t))return;const i=t[At],o=t[cn];if(80&o&&0===n||1024&o||2===n)Ey(i,t,i.template,t[tr]);else if(t[io]>0){Ty(t,1);const c=i.components;null!==c&&Lp(t,c,1)}}function Lp(t,n,i){for(let o=0;o<n.length;o++)wy(t,n[o],i)}class xd{get rootNodes(){const n=this._lView,i=n[At];return ka(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tr]}set context(n){this._lView[tr]=n}get destroyed(){return 256==(256&this._lView[cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Bn];if(Sn(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(ze(n,o),Bc(i,o))}this._attachedToViewContainer=!1}Et(this._lView[At],this._lView)}onDestroy(n){!function Ac(t,n){if(256==(256&t[cn]))throw new Ae(911,!1);null===t[Di]&&(t[Di]=[]),t[Di].push(n)}(this._lView,n)}markForCheck(){Yh(this._cdRefInjectingView||this._lView)}detach(){this._lView[cn]&=-129}reattach(){this._lView[cn]|=128}detectChanges(){Md(this._lView[At],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y(t,n){Rh(t,n,n[Gt],2,null,null)}(this._lView[At],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=n}}class Fp extends xd{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Md(n[At],n,n[tr],!1)}checkNoChanges(){}get context(){return null}}class vm extends Js{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=wn(n);return new Od(i,this.ngModule)}}function Dy(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class TI{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=mt(o);const c=this.injector.get(n,tm,o);return c!==tm||i===tm?c:this.parentInjector.get(n,i,o)}}class Od extends Yv{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=Dy(n.inputs);if(null!==i)for(const c of o)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return o}get outputs(){return Dy(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function ar(t){return t.map(sa).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,c){let f=(c=c||this.ngModule)instanceof vo?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new TI(n,f):n,T=_.get(Hh,null);if(null===T)throw new Ae(407,!1);const Q={rendererFactory:T,sanitizer:_.get(H_,null),effectManager:_.get(ns,null),afterRenderEventManager:_.get(bd,null)},fe=T.createRenderer(null,this.componentDef),De=this.componentDef.selectors[0][0]||"div",Ze=o?function hI(t,n,i,o){const f=o.get(X_,!1)||i===Hr.ShadowDom,_=t.selectRootElement(n,f);return function LE(t){uy(t)}(_),_}(fe,o,this.componentDef.encapsulation,_):m(fe,De,function Im(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(De)),Yt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let lt=null;null!==Ze&&(lt=_r(Ze,_,!0));const Tn=fm(0,null,null,1,0,null,null,null,null,null,null),Hn=Pp(null,Tn,null,Yt,null,null,Q,fe,_,null,lt);let Dr,Co;b(Hn);try{const Rl=this.componentDef;let dg,TE=null;Rl.findHostDirectiveDefs?(dg=[],TE=new Map,Rl.findHostDirectiveDefs(Rl,dg,TE),dg.push(Rl)):dg=[Rl];const KC=function wI(t,n){const i=t[At],o=on;return t[o]=n,Rd(i,o,2,"#host",null)}(Hn,Ze),qC=function by(t,n,i,o,c,f,_){const T=c[At];!function Sy(t,n,i,o){for(const c of t)n.mergedAttrs=vn(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(Pd(n,n.mergedAttrs,!0),null!==i&&h_(o,i,n))}(o,t,n,_);let C=null;null!==n&&(C=_r(n,c[sr]));const x=f.rendererFactory.createRenderer(n,i);let $=16;i.signals?$=4096:i.onPush&&($=64);const Q=Pp(c,lI(i),null,$,c[t.index],t,f,x,null,null,C);return T.firstCreatePass&&gy(T,t,o.length-1),Op(c,Q),c[t.index]=Q}(KC,Ze,Rl,dg,Hn,Q,fe);Co=Ol(Tn,on),Ze&&function DI(t,n,i,o){if(o)Cn(t,i,["ng-version",zh.full]);else{const{attrs:c,classes:f}=function $a(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!br(c))break;c=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Cn(t,i,c),f&&f.length>0&&d_(t,i,f.join(" "))}}(fe,Rl,Ze,o),void 0!==i&&function Ry(t,n,i){const o=t.projection=[];for(let c=0;c<n.length;c++){const f=i[c];o.push(null!=f?Array.from(f):null)}}(Co,this.ngContentSelectors,i),Dr=function AI(t,n,i,o,c,f){const _=Pn(),T=c[At],C=ci(_,c);hy(T,c,_,i,null,o);for(let $=0;$<i.length;$++)ai(Li(c,T,_.directiveStart+$,_),c);_I(T,c,_),C&&ai(C,c);const x=Li(c,T,_.directiveStart+_.componentOffset,_);if(t[tr]=c[tr]=x,null!==f)for(const $ of f)$(x,n);return sy(T,_,t),x}(qC,Rl,dg,TE,Hn,[Py]),Il(Tn,Hn,null)}finally{Pe()}return new Cy(this.componentType,Dr,$h(Co,Hn),Hn,Co)}}class Cy extends Qv{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Fp(c),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let c;if(null!==o&&(c=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;Rs(f[At],f,c,n,i),this.previousInputValues.set(n,i),Yh(wr(this._tNode.index,f))}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Py(){const t=Pn();tu(ot()[At],t)}function a(t){let n=function My(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if(Wr(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ae(903,!1);c=n.\u0275dir}if(c){if(i){o.push(c);const _=t;_.inputs=r(t.inputs),_.inputTransforms=r(t.inputTransforms),_.declaredInputs=r(t.declaredInputs),_.outputs=r(t.outputs);const T=c.hostBindings;T&&d(t,T);const C=c.viewQuery,x=c.contentQueries;if(C&&s(t,C),x&&u(t,x),ne(t.inputs,c.inputs),ne(t.declaredInputs,c.declaredInputs),ne(t.outputs,c.outputs),null!==c.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),ne(_.inputTransforms,c.inputTransforms)),Wr(c)&&c.data.animation){const $=t.data;$.animation=($.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const T=f[_];T&&T.ngInherit&&T(t),T===a&&(i=!1)}}n=Object.getPrototypeOf(n)}!function e(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=vn(c.hostAttrs,i=vn(i,c.hostAttrs))}}(o)}function r(t){return t===xr?{}:t===rn?[]:t}function s(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function u(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function d(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}function ht(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const c=n[o];Array.isArray(c)&&c[2]&&(i[o]=c[2])}t.inputTransforms=i}function kt(t){return!!zt(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function zt(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function te(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ve(t,n,i,o){const c=ot();return te(c,Ks(),n)&&(xn(),Oa(Jt(),c,t,n,i,o)),Ve}function uf(t,n,i,o,c,f,_,T){const C=ot(),x=xn(),$=t+on,Q=x.firstCreatePass?function Ky(t,n,i,o,c,f,_,T,C){const x=n.consts,$=Rd(n,t,4,_||null,li(x,T));Mp(n,i,$,li(x,C)),tu(n,$);const Q=$.tView=fm(2,$,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,$),Q.queries=n.queries.embeddedTView($)),$}($,x,C,n,i,o,c,f,_):x.data[$];fs(Q,!1);const fe=Cm(x,C,Q,t);Mc()&&Qo(x,C,fe,Q),ai(fe,C),Op(C,C[$]=xp(fe,C,fe,Q)),Wa(Q)&&oy(x,C,Q),null!=_&&ay(C,Q,T)}let Cm=function $d(t,n,i,o){return Ss(!0),n[Gt].createComment("")};function Dl(t,n,i){const o=ot();return te(o,Ks(),n)&&function Zs(t,n,i,o,c,f,_,T){const C=ci(n,i);let $,x=n.inputs;!T&&null!=x&&($=x[o])?(Rs(t,i,$,o,c),Vr(n)&&function FE(t,n){const i=wr(n,t);16&i[cn]||(i[cn]|=64)}(i,n.index)):3&n.type&&(o=function mI(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=_?_(c,n.value||"",o):c,f.setProperty(C,o,c))}(xn(),Jt(),o,t,n,o[Gt],i,!1),Dl}function bm(t,n,i,o,c){const _=c?"class":"style";Rs(t,i,n.inputs[_],_,o)}function Cu(t,n,i,o){const c=ot(),f=xn(),_=on+t,T=c[Gt],C=f.firstCreatePass?function PI(t,n,i,o,c,f){const _=n.consts,C=Rd(n,t,2,o,li(_,c));return Mp(n,i,C,li(_,f)),null!==C.attrs&&Pd(C,C.attrs,!1),null!==C.mergedAttrs&&Pd(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(_,f,c,n,i,o):f.data[_],x=lf(f,c,C,T,n,t);c[_]=x;const $=Wa(C);return fs(C,!0),h_(T,x,C),32!=(32&C.flags)&&Mc()&&Qo(f,c,x,C),0===function jn(){return Qt.lFrame.elementDepthCount}()&&ai(x,c),function ku(){Qt.lFrame.elementDepthCount++}(),$&&(oy(f,c,C),sy(f,C,c)),null!==o&&ay(c,C),Cu}function jp(){let t=Pn();Bo()?function Rc(){Qt.lFrame.isParent=!1}():(t=t.parent,fs(t,!1));const n=t;(function _a(t){return Qt.skipHydrationRootTNode===t})(n)&&function di(){Qt.skipHydrationRootTNode=null}(),function ma(){Qt.lFrame.elementDepthCount--}();const i=xn();return i.firstCreatePass&&(tu(i,t),Is(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function fg(t){return 0!=(8&t.flags)}(n)&&bm(i,n,ot(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function pg(t){return 0!=(16&t.flags)}(n)&&bm(i,n,ot(),n.stylesWithoutHost,!1),jp}function Sm(t,n,i,o){return Cu(t,n,i,o),jp(),Sm}let lf=(t,n,i,o,c,f)=>(Ss(!0),m(o,c,function ms(){return Qt.lFrame.currentNamespace}()));function Nm(){return ot()}function xm(t){return!!t&&"function"==typeof t.then}function df(t){return!!t&&"function"==typeof t.subscribe}function Gp(t,n,i,o){const c=ot(),f=xn(),_=Pn();return function mc(t,n,i,o,c,f,_){const T=Wa(o),x=t.firstCreatePass&&_m(t),$=n[tr],Q=yy(n);let fe=!0;if(3&o.type||_){const _t=ci(o,n),Pt=_?_(_t):_t,Yt=Q.length,lt=_?Hn=>_(Lt(Hn[o.index])):o.index;let Tn=null;if(!_&&T&&(Tn=function hf(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===i&&c[f+1]===o){const T=n[Os],C=c[f+2];return T.length>C?T[C]:null}"string"==typeof _&&(f+=2)}return null}(t,n,c,o.index)),null!==Tn)(Tn.__ngLastListenerFn__||Tn).__ngNextListenerFn__=f,Tn.__ngLastListenerFn__=f,fe=!1;else{f=Jy(o,n,$,f,!1);const Hn=i.listen(Pt,c,f);Q.push(f,Hn),x&&x.push(c,lt,Yt,Yt+1)}}else f=Jy(o,n,$,f,!1);const De=o.outputs;let Ze;if(fe&&null!==De&&(Ze=De[c])){const _t=Ze.length;if(_t)for(let Pt=0;Pt<_t;Pt+=2){const Dr=n[Ze[Pt]][Ze[Pt+1]].subscribe(f),Co=Q.length;Q.push(f,Dr),x&&x.push(c,o.index,Co,-(Co+1))}}}(f,c,c[Gt],_,t,n,o),Gp}function Kp(t,n,i,o){try{return Pr(6,n,i),!1!==i(o)}catch(c){return fc(t,c),!1}finally{Pr(7,n,i)}}function Jy(t,n,i,o,c){return function f(_){if(_===Function)return o;Yh(t.componentOffset>-1?wr(t.index,n):n);let C=Kp(n,i,o,_),x=f.__ngNextListenerFn__;for(;x;)C=Kp(n,i,x,_)&&C,x=x.__ngNextListenerFn__;return c&&!1===C&&_.preventDefault(),C}}function Om(t=1){return function Dt(t){return(Qt.lFrame.contextLView=function un(t,n){for(;t>0;)n=n[mn],t--;return n}(t,Qt.lFrame.contextLView))[tr]}(t)}function Cl(t,n){return t<<17|n<<2}function ea(t){return t>>17&32767}function Hd(t){return 2|t}function ta(t){return(131068&t)>>2}function bl(t,n){return-131069&t|n<<2}function Yp(t){return 1|t}function zd(t,n,i,o,c){const f=t[i+1],_=null===n;let T=o?ea(f):ta(f),C=!1;for(;0!==T&&(!1===C||_);){const $=t[T+1];yc(t[T],n)&&(C=!0,t[T+1]=o?Yp($):Hd($)),T=o?ea($):ta($)}C&&(t[i+1]=o?Hd(f):Yp(f))}function yc(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&lu(t,n)>=0}function gf(t,n){return function To(t,n,i,o){const c=ot(),f=xn(),_=function ps(t){const n=Qt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function jm(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[In()],_=function mf(t,n){return n>=t.expandoStartIndex}(t,i);(function tg(t,n){return 0!=(t.flags&(n?8:16))})(f,o)&&null===n&&!_&&(n=!1),n=function Su(t,n,i,o){const c=function Ia(t){const n=Qt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=Sl(i=Jp(null,t,n,i,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==c)if(i=Jp(c,t,n,i,o),null===f){let C=function cv(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==ta(o))return t[ea(o)]}(t,n,o);void 0!==C&&Array.isArray(C)&&(C=Jp(null,t,n,C[1],o),C=Sl(C,n.attrs,o),function VI(t,n,i,o){t[ea(i?n.classBindings:n.styleBindings)]=o}(t,n,o,C))}else f=function _f(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=Sl(o,t[f].hostAttrs,i);return Sl(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function NI(t,n,i,o,c,f){let _=f?n.classBindings:n.styleBindings,T=ea(_),C=ta(_);t[o]=i;let $,x=!1;if(Array.isArray(i)?($=i[1],(null===$||lu(i,$)>0)&&(x=!0)):$=i,c)if(0!==C){const fe=ea(t[T+1]);t[o+1]=Cl(fe,T),0!==fe&&(t[fe+1]=bl(t[fe+1],o)),t[T+1]=function Lr(t,n){return 131071&t|n<<17}(t[T+1],o)}else t[o+1]=Cl(T,0),0!==T&&(t[T+1]=bl(t[T+1],o)),T=o;else t[o+1]=Cl(C,0),0===T?T=o:t[C+1]=bl(t[C+1],o),C=o;x&&(t[o+1]=Hd(t[o+1])),zd(t,$,o,!0),zd(t,$,o,!1),function xI(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&lu(f,n)>=0&&(i[o+1]=Yp(i[o+1]))}(n,$,t,o,f),_=Cl(T,C),f?n.classBindings=_:n.styleBindings=_}(c,f,n,i,_,o)}}(f,t,_,o),n!==An&&te(c,_,n)&&function Hm(t,n,i,o,c,f,_,T){if(!(3&n.type))return;const C=t.data,x=C[T+1],$=function MI(t){return 1==(1&t)}(x)?qd(C,n,i,c,ta(x),_):void 0;yf($)||(yf(f)||function iv(t){return 2==(2&t)}(x)&&(f=qd(C,null,i,c,T,_)),function bg(t,n,i,o,c){if(n)c?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:fu.DashCase;null==c?t.removeStyle(i,o,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=fu.Important),t.setStyle(i,o,c,f))}}(o,_,function zs(t,n){return Lt(n[t])}(In(),i),c,f))}(f,f.data[In()],c,c[Gt],t,c[_+1]=function lv(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=pe(Ma(t)))),t}(n,i),o,_)}(t,n,null,!0),gf}function Jp(t,n,i,o,c){let f=null;const _=i.directiveEnd;let T=i.directiveStylingLast;for(-1===T?T=i.directiveStart:T++;T<_&&(f=n[T],o=Sl(o,f.hostAttrs,c),f!==t);)T++;return null!==t&&(i.directiveStylingLast=T),o}function Sl(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?c=_:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),es(t,_,!!i||n[++f]))}return void 0===t?null:t}function qd(t,n,i,o,c,f){const _=null===n;let T;for(;c>0;){const C=t[c],x=Array.isArray(C),$=x?C[1]:C,Q=null===$;let fe=i[c+1];fe===An&&(fe=Q?rn:void 0);let De=Q?ph(fe,o):$===o?fe:void 0;if(x&&!yf(De)&&(De=ph(C,o)),yf(De)&&(T=De,_))return T;const Ze=t[c+1];c=_?ea(Ze):ta(Ze)}if(null!==n){let C=f?n.residualClasses:n.residualStyles;null!=C&&(T=ph(C,o))}return T}function yf(t){return void 0!==t}function ng(t,n=""){const i=ot(),o=xn(),c=t+on,f=o.firstCreatePass?Rd(o,c,1,n,null):o.data[c],_=zm(o,i,f,n,t);i[c]=_,Mc()&&Qo(o,i,_,f),fs(f,!1)}let zm=(t,n,i,o,c)=>(Ss(!0),function cd(t,n){return t.createText(n)}(n[Gt],o));const If=void 0;var gw=["en",[["a","p"],["AM","PM"],If],[["AM","PM"],If,If],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],If,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],If,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",If,"{1} 'at' {0}",If],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pw(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let sg={};function BI(t){const n=function mw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=s0(n);if(i)return i;const o=n.split("-")[0];if(i=s0(o),i)return i;if("en"===o)return gw;throw new Ae(701,!1)}function r0(t){return BI(t)[og.PluralCase]}function s0(t){return t in sg||(sg[t]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[t]),sg[t]}var og=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(og||{});const ag="en-US";let o0=ag;function HI(t,n,i,o,c){if(t=We(t),Array.isArray(t))for(let f=0;f<t.length;f++)HI(t[f],n,i,o,c);else{const f=xn(),_=ot(),T=Pn();let C=Eu(t)?t:We(t.provide);const x=P_(t),$=1048575&T.providerIndexes,Q=T.directiveStart,fe=T.providerIndexes>>20;if(Eu(t)||!t.multi){const De=new fo(x,c,Zo),Ze=GI(C,n,c?$:$+fe,Q);-1===Ze?(Ku(po(T,_),f,C),zI(f,t,n.length),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(De),_.push(De)):(i[Ze]=De,_[Ze]=De)}else{const De=GI(C,n,$+fe,Q),Ze=GI(C,n,$,$+fe),Pt=Ze>=0&&i[Ze];if(c&&!Pt||!c&&!(De>=0&&i[De])){Ku(po(T,_),f,C);const Yt=function pA(t,n,i,o,c){const f=new fo(t,i,Zo);return f.multi=[],f.index=n,f.componentProviders=0,M0(f,c,o&&!i),f}(c?fA:hA,i.length,c,o,x);!c&&Pt&&(i[Ze].providerFactory=Yt),zI(f,t,n.length,0),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(Yt),_.push(Yt)}else zI(f,t,De>-1?De:Ze,M0(i[c?Ze:De],x,!c&&o));!c&&o&&Pt&&i[Ze].componentProviders++}}}function zI(t,n,i,o){const c=Eu(n),f=function qg(t){return!!t.useClass}(n);if(c||f){const C=(f?We(n.useClass):n).prototype.ngOnDestroy;if(C){const x=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const $=x.indexOf(i);-1===$?x.push(i,[o,C]):x[$+1].push(o,C)}else x.push(i,C)}}}function M0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function GI(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function hA(t,n,i,o){return WI(this.multi,[])}function fA(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,T=Li(i,i[At],this.providerFactory.index,o);f=T.slice(0,_),WI(c,f);for(let C=_;C<T.length;C++)f.push(T[C])}else f=[],WI(c,f);return f}function WI(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function N0(t,n=[]){return i=>{i.providersResolver=(o,c)=>function dA(t,n,i){const o=xn();if(o.firstCreatePass){const c=Wr(t);HI(i,o.data,o.blueprint,c,!0),HI(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class Ef{}class x0{}function gA(t,n){return new KI(t,n??null,[])}class KI extends Ef{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vm(this);const c=kr(n);this._bootstrapComponents=xa(c.bootstrap),this._r3Injector=om(n,i,[{provide:Ef,useValue:this},{provide:Js,useValue:this.componentFactoryResolver},...o],pe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class qI extends x0{constructor(n){super(),this.moduleType=n}create(n){return new KI(this.moduleType,n,[])}}class O0 extends Ef{constructor(n){super(),this.componentFactoryResolver=new vm(this),this.instance=null;const i=new dl([...n.providers,{provide:Ef,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],n.parent||Uh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function k0(t,n,i=null){return new O0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let _A=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=Fh(0,i.type),c=o.length>0?k0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=tn({token:t,providedIn:"environment",factory:()=>new t(dt(vo))})}}return t})();function L0(t){t.getStandaloneInjector=n=>n.get(_A).getOrCreateStandaloneInjector(t)}function HA(){return this._results[Symbol.iterator]()}class YI{get changes(){return this._changes||(this._changes=new Jo)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=YI.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=HA)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=function Fi(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Hl(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GA(t,n,i,o=!0){const c=n[At];if(function B(t,n,i,o){const c=Gn+o,f=i.length;o>0&&(i[c-1][Gr]=n),o<f-Gn?(n[Gr]=i[c],uu(i,Gn+o,n)):(i.push(n),n[Gr]=null),n[Bn]=i;const _=n[Rr];null!==_&&i!==_&&function ie(t,n){const i=t[Po];n[ur]!==n[Bn][Bn][ur]&&(t[Ls]=!0),null===i?t[Po]=[n]:i.push(n)}(_,n);const T=n[xi];null!==T&&T.insertView(t),n[cn]|=128}(c,n,t,i),o){const f=oc(i,t),_=n[Gt],T=tl(_,t[Ci]);null!==T&&function h(t,n,i,o,c,f){o[dr]=c,o[Sr]=n,Rh(t,o,i,1,c,f)}(c,t[Sr],_,n,T,f)}}let o_=(()=>{class t{static{this.__NG_ELEMENT_ID__=qA}}return t})();const WA=o_,KA=class extends WA{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const c=function zA(t,n,i,o){const c=n.tView,T=Pp(t,c,i,4096&t[cn]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);T[Rr]=t[n.index];const x=t[xi];return null!==x&&(T[xi]=x.createEmbeddedView(c)),Il(c,T,i),T}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new xd(c)}};function qA(){return mv(Pn(),ot())}function mv(t,n){return 4&t.type?new KA(n,t,$h(t,n)):null}let yv=(()=>{class t{static{this.__NG_ELEMENT_ID__=eD}}return t})();function eD(){return eT(Pn(),ot())}const tD=yv,J0=class extends tD{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return $h(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const n=Wu(this._hostTNode,this._hostLView);if(wa(n)){const i=Hu(n,this._hostLView),o=$u(n);return new Br(i[At].data[o+8],i)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Z0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(n,i,o){let c,f;"number"==typeof o?c=o:null!=o&&(c=o.index,f=o.injector);const T=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(T,c,false),T}createComponent(n,i,o,c,f){const _=n&&!function ba(t){return"function"==typeof t}(n);let T;if(_)T=i;else{const _t=i||{};T=_t.index,o=_t.injector,c=_t.projectableNodes,f=_t.environmentInjector||_t.ngModuleRef}const C=_?n:new Od(wn(n)),x=o||this.parentInjector;if(!f&&null==C.ngModule){const Pt=(_?x:this.parentInjector).get(vo,null);Pt&&(f=Pt)}wn(C.componentType??{});const De=C.create(x,c,null,f);return this.insertImpl(De.hostView,T,false),De}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const c=n._lView;if(function Fo(t){return Sn(t[Bn])}(c)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const x=c[Bn],$=new J0(x,x[Sr],x[Bn]);$.detach($.indexOf(n))}}const _=this._adjustIndex(i),T=this._lContainer;return GA(T,c,_,!o),n.attachToViewContainerRef(),uu(XI(T),_,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Z0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=ze(this._lContainer,i);o&&(Bc(XI(this._lContainer),i),Et(o[At],o))}detach(n){const i=this._adjustIndex(n,-1),o=ze(this._lContainer,i);return o&&null!=Bc(XI(this._lContainer),i)?new xd(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function Z0(t){return t[8]}function XI(t){return t[8]||(t[8]=[])}function eT(t,n){let i;const o=n[t.index];return Sn(o)?i=o:(i=xp(o,n,null,t),n[t.index]=i,Op(n,i)),tT(i,n,t,o),new J0(i,t,n)}let tT=function nT(t,n,i,o){if(t[Ci])return;let c;c=8&i.type?Lt(o):function nD(t,n){const i=t[Gt],o=i.createComment(""),c=ci(n,t);return yo(i,tl(i,c),o,function fd(t,n){return t.nextSibling(n)}(i,c),!1),o}(n,i),t[Ci]=c};class JI{constructor(n){this.queryList=n,this.matches=null}clone(){return new JI(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZI{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const _=i.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new ZI(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==lT(n,i).matches&&this.queries[i].setDirty()}}class rT{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class eE{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new eE(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class tE{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new tE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,sD(i,f)),this.matchTNodeWithReadOption(n,i,Vl(i,n,f,!1,!1))}else o===o_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Vl(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===Yo||c===yv||c===o_&&4&i.type)this.addMatch(i.index,-2);else{const f=Vl(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function sD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function aD(t,n,i,o){return-1===i?function oD(t,n){return 11&t.type?$h(t,n):4&t.type?mv(t,n):null}(n,t):-2===i?function uD(t,n,i){return i===Yo?$h(n,t):i===o_?mv(n,t):i===yv?eT(n,t):void 0}(t,n,o):Li(t,t[At],i,n)}function iT(t,n,i,o){const c=n[xi].queries[o];if(null===c.matches){const f=t.data,_=i.matches,T=[];for(let C=0;C<_.length;C+=2){const x=_[C];T.push(x<0?null:aD(n,f[x],_[C+1],i.metadata.read))}c.matches=T}return c.matches}function nE(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const _=iT(t,n,c,i);for(let T=0;T<f.length;T+=2){const C=f[T];if(C>0)o.push(_[T/2]);else{const x=f[T+1],$=n[-C];for(let Q=Gn;Q<$.length;Q++){const fe=$[Q];fe[Rr]===fe[Bn]&&nE(fe[At],fe,x,o)}if(null!==$[Po]){const Q=$[Po];for(let fe=0;fe<Q.length;fe++){const De=Q[fe];nE(De[At],De,x,o)}}}}}return o}function sT(t){const n=ot(),i=xn(),o=Fl();E(o+1);const c=lT(i,o);if(t.dirty&&function wf(t){return 4==(4&t[cn])}(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?nE(i,n,o,[]):iT(i,n,c,o);t.reset(f,Ip),t.notifyOnChanges()}return!0}return!1}function oT(t,n,i,o){const c=xn();if(c.firstCreatePass){const f=Pn();(function cT(t,n,i){null===t.queries&&(t.queries=new eE),t.queries.track(new tE(n,i))})(c,new rT(n,i,o),f.index),function dD(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}!function uT(t,n,i){const o=new YI(4==(4&i));(function fI(t,n,i,o){const c=yy(n);c.push(i),t.firstCreatePass&&_m(t).push(o,c.length-1)})(t,n,o,o.destroy),null===n[xi]&&(n[xi]=new ZI),n[xi].queries.push(new JI(o))}(c,ot(),i)}function aT(){return function lD(t,n){return t[xi].queries[n].queryList}(ot(),Fl())}function lT(t,n){return t.queries.getByIndex(n)}function rE(t){return!!kr(t)}const bT=new Ce("Application Initializer");let uE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=vt(bT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const f=c();if(xm(f))i.push(f);else if(df(f)){const _=new Promise((T,C)=>{f.subscribe({complete:T,error:C})});i.push(_)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ST=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Iv=new Ce("LocaleId",{providedIn:"root",factory:()=>vt(Iv,qt.Optional|qt.SkipSelf)||function xD(){return typeof $localize<"u"&&$localize.locale||ag}()}),OD=new Ce("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let RT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new X.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class LD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let FD=(()=>{class t{compileModuleSync(i){return new qI(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=xa(kr(i).declarations).reduce((_,T)=>{const C=wn(T);return C&&_.push(new Od(C)),_},[]);return new LD(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const xT=new Ce(""),OT=new Ce("");let dE,sC=(()=>{class t{constructor(i,o,c){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dE||(function oC(t){dE=t}(c),c.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ri.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,c){return[]}static{this.\u0275fac=function(o){return new(o||t)(dt(ri),dt(kT),dt(OT))}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac})}}return t})(),kT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return dE?.findTestabilityInTree(this,i,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Xd=null;const LT=new Ce("AllowMultipleToken"),hE=new Ce("PlatformDestroyListeners"),fE=new Ce("appBootstrapListener");class cC{constructor(n,i){this.name=n,this.token=i}}function UT(t,n,i=[]){const o=`Platform: ${n}`,c=new Ce(o);return(f=[])=>{let _=pE();if(!_||_.injector.get(LT,!1)){const T=[...i,...f,{provide:c,useValue:!0}];t?t(T):function lC(t){if(Xd&&!Xd.get(LT,!1))throw new Ae(400,!1);(function FT(){!function wc(t){Ou=t}(()=>{throw new Ae(600,!1)})})(),Xd=t;const n=t.get(jT);(function VT(t){t.get(O_,null)?.forEach(i=>i())})(t)}(function BT(t=[],n){return Eo.create({name:n,providers:[{provide:_d,useValue:"platform"},{provide:hE,useValue:new Set([()=>Xd=null])},...t]})}(T,o))}return function hC(t){const n=pE();if(!n)throw new Ae(401,!1);return n}()}}function pE(){return Xd?.get(jT)??null}let jT=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const c=function fC(t="zone.js",n){return"noop"===t?new iI:"zone.js"===t?new ri(n):t}(o?.ngZone,function $T(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return c.run(()=>{const f=function mA(t,n,i){return new KI(t,n,i)}(i.moduleType,this.injector,function KT(t){return[{provide:ri,useFactory:t},{provide:Na,multi:!0,useFactory:()=>{const n=vt(gC,{optional:!0});return()=>n.initialize()}},{provide:WT,useFactory:pC},{provide:K_,useFactory:Qh}]}(()=>c)),_=f.injector.get(Xo,null);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:C=>{_.handleError(C)}});f.onDestroy(()=>{Tv(this._modules,f),T.unsubscribe()})}),function HT(t,n,i){try{const o=i();return xm(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(_,c,()=>{const T=f.injector.get(uE);return T.runInitializers(),T.donePromise.then(()=>(function a0(t){ue(t,"Expected localeId to be defined"),"string"==typeof t&&(o0=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Iv,ag)||ag),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const c=zT({},o);return function aC(t,n,i){const o=new qI(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get(lg);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new Ae(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(hE,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||t)(dt(Eo))}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function zT(t,n){return Array.isArray(n)?n.reduce(zT,t):{...t,...n}}let lg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=vt(WT),this.zoneIsStable=vt(K_),this.componentTypes=[],this.components=[],this.isStable=vt(RT).hasPendingTasks.pipe((0,$e.n)(i=>i?(0,de.of)(!1):this.zoneIsStable),(0,be.F)(),(0,_e.u)()),this._injector=vt(vo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const c=i instanceof Yv;if(!this._injector.get(uE).done)throw!c&&to(i),new Ae(405,!1);let _;_=c?i:this._injector.get(Js).resolveComponentFactory(i),this.componentTypes.push(_.componentType);const T=function uC(t){return t.isBoundToModule}(_)?void 0:this._injector.get(Ef),x=_.create(Eo.NULL,[],o||_.selector,T),$=x.location.nativeElement,Q=x.injector.get(xT,null);return Q?.registerApplication($),x.onDestroy(()=>{this.detachView(x.hostView),Tv(this.components,x),Q?.unregisterApplication($)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;Tv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(fE,[]);o.push(...this._bootstrapListeners),o.forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Tv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Ae(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const WT=new Ce("",{providedIn:"root",factory:()=>vt(Xo).handleError.bind(void 0)});function pC(){const t=vt(ri),n=vt(Xo);return i=>t.runOutsideAngular(()=>n.handleError(i))}let gC=(()=>{class t{constructor(){this.zone=vt(ri),this.applicationRef=vt(lg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _C(){return!1}let yC=(()=>{class t{static{this.__NG_ELEMENT_ID__=vC}}return t})();function vC(t){return function IC(t,n,i){if(Vr(t)&&!i){const o=wr(t.index,n);return new xd(o,o)}return 47&t.type?new xd(n[ur],n):null}(Pn(),ot(),16==(16&t))}class JT{constructor(){}supports(n){return kt(n)}create(n){return new DC(n)}}const AC=(t,n)=>n;class DC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||AC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const _=!o||i&&i.currentIndex<ew(o,c,f)?i:o,T=ew(_,c,f),C=_.currentIndex;if(_===o)c--,o=o._nextRemoved;else if(i=i._next,null==_.previousIndex)c++;else{f||(f=[]);const x=T-c,$=C-c;if(x!=$){for(let fe=0;fe<x;fe++){const De=fe<f.length?f[fe]:f[fe]=0,Ze=De+fe;$<=Ze&&Ze<x&&(f[fe]=De+1)}f[_.previousIndex]=$-x}}T!==C&&n(_,T,C)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!kt(n))throw new Ae(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,_,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let T=0;T<this.length;T++)f=n[T],_=this._trackByFn(T,f),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,f,_,T)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,_,T),o=!0),i=i._next}else c=0,function Tt(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,T=>{_=this._trackByFn(c,T),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,T,_,c)),Object.is(i.item,T)||this._addIdentityChange(i,T)):(i=this._mismatch(i,T,_,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new CC(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new ZT),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZT),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class ZT{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new bC,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ew(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class tw{constructor(){}supports(n){return n instanceof Map||zt(n)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||zt(n)))throw new Ae(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nw(){return new vE([new JT])}let vE=(()=>{class t{static{this.\u0275prov=tn({token:t,providedIn:"root",factory:nw})}constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||nw()),deps:[[t,new Hc,new Ju]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new Ae(901,!1)}}return t})();function rw(){return new IE([new tw])}let IE=(()=>{class t{static{this.\u0275prov=tn({token:t,providedIn:"root",factory:rw})}constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||rw()),deps:[[t,new Hc,new Ju]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new Ae(901,!1)}}return t})();const NC=UT(null,"core",[]);let xC=(()=>{class t{constructor(i){}static{this.\u0275fac=function(o){return new(o||t)(dt(lg))}}static{this.\u0275mod=oa({type:t})}static{this.\u0275inj=gn({})}}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const n=wn(t);if(!n)return null;const i=new Od(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},8515:(Rt,Be,U)=>{U.d(Be,{Qe:()=>Py,cM:()=>My});var I=U(177),Y=U(7705),ae=U(1825),q=U(9253),de=(U(7955),U(1413)),_e=U(7673),$e=U(1985),be=U(8455),Z=U(7786),ne=U(941),pe=U(5558),ke=U(6354),rt=U(6129);class at extends de.B{constructor(e=1/0,r=1/0,s=rt.U){super(),this._bufferSize=e,this._windowTime=r,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,r)}next(e){const{isStopped:r,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:d,_windowTime:g}=this;r||(s.push(e),!u&&s.push(d.now()+g)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:u}=this,d=u.slice();for(let g=0;g<d.length&&!e.closed;g+=s?1:2)e.next(d[g]);return this._checkFinalizedStatuses(e),r}_trimBuffer(){const{_bufferSize:e,_timestampProvider:r,_buffer:s,_infiniteTimeWindow:u}=this,d=(u?1:2)*e;if(e<1/0&&d<s.length&&s.splice(0,s.length-d),!u){const g=r.now();let w=0;for(let S=1;S<s.length&&s[S]<=g;S+=2)w=S;w&&s.splice(0,w+1)}}}var We=U(7647);function pt(a,e,r){let s,u=!1;return a&&"object"==typeof a?({bufferSize:s=1/0,windowTime:e=1/0,refCount:u=!1,scheduler:r}=a):s=a??1/0,(0,We.u)({connector:()=>new at(s,e,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}var ut=U(1594),Bt=U(8071);function Vt(a,e){return(0,Bt.T)(e)?(0,pe.n)(()=>a,e):(0,pe.n)(()=>a)}var Ae=U(6745),Ge=U(5964),Te=U(7935);const Qe=new Y.nKC("angularfire2.auth.use-emulator"),gt=new Y.nKC("angularfire2.auth.settings"),xt=new Y.nKC("angularfire2.auth.tenant-id"),je=new Y.nKC("angularfire2.auth.langugage-code"),Zt=new Y.nKC("angularfire2.auth.use-device-language"),Vn=new Y.nKC("angularfire.auth.persistence"),pn=(a,e,r,s,u,d,g,w)=>(0,q.BM)(`${a.name}.auth`,"AngularFireAuth",a.name,()=>{const S=e.runOutsideAngular(()=>a.auth());if(r&&S.useEmulator(...r),s&&(S.tenantId=s),S.languageCode=u,d&&S.useDeviceLanguage(),g)for(const[O,j]of Object.entries(g))S.settings[O]=j;return w&&S.setPersistence(w),S},[r,s,u,d,g,w]);let lr=(()=>{class a{authState;idToken;user;idTokenResult;credential;constructor(r,s,u,d,g,w,S,O,j,K,oe,Me){const Je=new de.B,ht=(0,_e.of)(void 0).pipe((0,ne.Q)(g.outsideAngular),(0,pe.n)(()=>d.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,7955)))),(0,ke.T)(()=>(0,q.iB)(r,d,s)),(0,ke.T)(st=>pn(st,d,w,O,j,K,S,oe)),pt({bufferSize:1,refCount:!1}));if((0,I.Vy)(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_e.of)(null);else{ht.pipe((0,ut.$)()).subscribe();const st=ht.pipe((0,pe.n)(Tt=>Tt.getRedirectResult().then(zt=>zt,()=>null)),ae.U0,pt({bufferSize:1,refCount:!1})),kt=ht.pipe((0,pe.n)(Tt=>new $e.c(zt=>({unsubscribe:d.runOutsideAngular(()=>Tt.onAuthStateChanged(yn=>zt.next(yn),yn=>zt.error(yn),()=>zt.complete()))})))),Ht=ht.pipe((0,pe.n)(Tt=>new $e.c(zt=>({unsubscribe:d.runOutsideAngular(()=>Tt.onIdTokenChanged(yn=>zt.next(yn),yn=>zt.error(yn),()=>zt.complete()))}))));this.authState=st.pipe(Vt(kt),(0,Ae._)(g.outsideAngular),(0,ne.Q)(g.insideAngular)),this.user=st.pipe(Vt(Ht),(0,Ae._)(g.outsideAngular),(0,ne.Q)(g.insideAngular)),this.idToken=this.user.pipe((0,pe.n)(Tt=>Tt?(0,be.H)(Tt.getIdToken()):(0,_e.of)(null))),this.idTokenResult=this.user.pipe((0,pe.n)(Tt=>Tt?(0,be.H)(Tt.getIdTokenResult()):(0,_e.of)(null))),this.credential=(0,Z.h)(st,Je,this.authState.pipe((0,Ge.p)(Tt=>!Tt))).pipe((0,ke.T)(Tt=>Tt?.user?Tt:null),(0,Ae._)(g.outsideAngular),(0,ne.Q)(g.insideAngular))}return(0,q.Gt)(this,ht,d,{spy:{apply:(st,kt,Ht)=>{(st.startsWith("signIn")||st.startsWith("createUser"))&&Ht.then(Tt=>Je.next(Tt))}}})}static \u0275fac=function(s){return new(s||a)(Y.KVO(q.rx),Y.KVO(q.uP,8),Y.KVO(Y.Agw),Y.KVO(Y.SKi),Y.KVO(ae.u0),Y.KVO(Qe,8),Y.KVO(gt,8),Y.KVO(xt,8),Y.KVO(je,8),Y.KVO(Zt,8),Y.KVO(Vn,8),Y.KVO(ae.Jv,8))};static \u0275prov=Y.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})();var en=U(3236),Xt=U(9172),he=U(9974),we=U(4360);function Le(){return(0,he.N)((a,e)=>{let r,s=!1;a.subscribe((0,we._)(e,u=>{const d=r;r=u,s&&e.next([d,u]),s=!0}))})}var gn,ir,Ne=U(2816),tt=U(3294),Ye=U(3345),ue=U(467),yt=U(7852),mr=U(1362),Ut=U(8041),Mt=U(1076),tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$r={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(ge,te,le){le||(le=0);var ye=Array(16);if("string"==typeof te)for(var ve=0;16>ve;++ve)ye[ve]=te.charCodeAt(le++)|te.charCodeAt(le++)<<8|te.charCodeAt(le++)<<16|te.charCodeAt(le++)<<24;else for(ve=0;16>ve;++ve)ye[ve]=te[le++]|te[le++]<<8|te[le++]<<16|te[le++]<<24;var Ve=ge.g[3],ce=(te=ge.g[0])+(Ve^(le=ge.g[1])&((ve=ge.g[2])^Ve))+ye[0]+3614090360&4294967295;ce=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=(le=(ve=(Ve=(te=le+(ce<<7&4294967295|ce>>>25))+((ce=Ve+(ve^te&(le^ve))+ye[1]+3905402710&4294967295)<<12&4294967295|ce>>>20))+((ce=ve+(le^Ve&(te^le))+ye[2]+606105819&4294967295)<<17&4294967295|ce>>>15))+((ce=le+(te^ve&(Ve^te))+ye[3]+3250441966&4294967295)<<22&4294967295|ce>>>10))+((ce=te+(Ve^le&(ve^Ve))+ye[4]+4118548399&4294967295)<<7&4294967295|ce>>>25))+((ce=Ve+(ve^te&(le^ve))+ye[5]+1200080426&4294967295)<<12&4294967295|ce>>>20))+((ce=ve+(le^Ve&(te^le))+ye[6]+2821735955&4294967295)<<17&4294967295|ce>>>15))+((ce=le+(te^ve&(Ve^te))+ye[7]+4249261313&4294967295)<<22&4294967295|ce>>>10))+((ce=te+(Ve^le&(ve^Ve))+ye[8]+1770035416&4294967295)<<7&4294967295|ce>>>25))+((ce=Ve+(ve^te&(le^ve))+ye[9]+2336552879&4294967295)<<12&4294967295|ce>>>20))+((ce=ve+(le^Ve&(te^le))+ye[10]+4294925233&4294967295)<<17&4294967295|ce>>>15))+((ce=le+(te^ve&(Ve^te))+ye[11]+2304563134&4294967295)<<22&4294967295|ce>>>10))+((ce=te+(Ve^le&(ve^Ve))+ye[12]+1804603682&4294967295)<<7&4294967295|ce>>>25))+((ce=Ve+(ve^te&(le^ve))+ye[13]+4254626195&4294967295)<<12&4294967295|ce>>>20))+((ce=ve+(le^Ve&(te^le))+ye[14]+2792965006&4294967295)<<17&4294967295|ce>>>15))+((ce=le+(te^ve&(Ve^te))+ye[15]+1236535329&4294967295)<<22&4294967295|ce>>>10))+((ce=te+(ve^Ve&(le^ve))+ye[1]+4129170786&4294967295)<<5&4294967295|ce>>>27))+((ce=Ve+(le^ve&(te^le))+ye[6]+3225465664&4294967295)<<9&4294967295|ce>>>23))+((ce=ve+(te^le&(Ve^te))+ye[11]+643717713&4294967295)<<14&4294967295|ce>>>18))+((ce=le+(Ve^te&(ve^Ve))+ye[0]+3921069994&4294967295)<<20&4294967295|ce>>>12))+((ce=te+(ve^Ve&(le^ve))+ye[5]+3593408605&4294967295)<<5&4294967295|ce>>>27))+((ce=Ve+(le^ve&(te^le))+ye[10]+38016083&4294967295)<<9&4294967295|ce>>>23))+((ce=ve+(te^le&(Ve^te))+ye[15]+3634488961&4294967295)<<14&4294967295|ce>>>18))+((ce=le+(Ve^te&(ve^Ve))+ye[4]+3889429448&4294967295)<<20&4294967295|ce>>>12))+((ce=te+(ve^Ve&(le^ve))+ye[9]+568446438&4294967295)<<5&4294967295|ce>>>27))+((ce=Ve+(le^ve&(te^le))+ye[14]+3275163606&4294967295)<<9&4294967295|ce>>>23))+((ce=ve+(te^le&(Ve^te))+ye[3]+4107603335&4294967295)<<14&4294967295|ce>>>18))+((ce=le+(Ve^te&(ve^Ve))+ye[8]+1163531501&4294967295)<<20&4294967295|ce>>>12))+((ce=te+(ve^Ve&(le^ve))+ye[13]+2850285829&4294967295)<<5&4294967295|ce>>>27))+((ce=Ve+(le^ve&(te^le))+ye[2]+4243563512&4294967295)<<9&4294967295|ce>>>23))+((ce=ve+(te^le&(Ve^te))+ye[7]+1735328473&4294967295)<<14&4294967295|ce>>>18))+((ce=le+(Ve^te&(ve^Ve))+ye[12]+2368359562&4294967295)<<20&4294967295|ce>>>12))+((ce=te+(le^ve^Ve)+ye[5]+4294588738&4294967295)<<4&4294967295|ce>>>28))+((ce=Ve+(te^le^ve)+ye[8]+2272392833&4294967295)<<11&4294967295|ce>>>21))+((ce=ve+(Ve^te^le)+ye[11]+1839030562&4294967295)<<16&4294967295|ce>>>16))+((ce=le+(ve^Ve^te)+ye[14]+4259657740&4294967295)<<23&4294967295|ce>>>9))+((ce=te+(le^ve^Ve)+ye[1]+2763975236&4294967295)<<4&4294967295|ce>>>28))+((ce=Ve+(te^le^ve)+ye[4]+1272893353&4294967295)<<11&4294967295|ce>>>21))+((ce=ve+(Ve^te^le)+ye[7]+4139469664&4294967295)<<16&4294967295|ce>>>16))+((ce=le+(ve^Ve^te)+ye[10]+3200236656&4294967295)<<23&4294967295|ce>>>9))+((ce=te+(le^ve^Ve)+ye[13]+681279174&4294967295)<<4&4294967295|ce>>>28))+((ce=Ve+(te^le^ve)+ye[0]+3936430074&4294967295)<<11&4294967295|ce>>>21))+((ce=ve+(Ve^te^le)+ye[3]+3572445317&4294967295)<<16&4294967295|ce>>>16))+((ce=le+(ve^Ve^te)+ye[6]+76029189&4294967295)<<23&4294967295|ce>>>9))+((ce=te+(le^ve^Ve)+ye[9]+3654602809&4294967295)<<4&4294967295|ce>>>28))+((ce=Ve+(te^le^ve)+ye[12]+3873151461&4294967295)<<11&4294967295|ce>>>21))+((ce=ve+(Ve^te^le)+ye[15]+530742520&4294967295)<<16&4294967295|ce>>>16))+((ce=le+(ve^Ve^te)+ye[2]+3299628645&4294967295)<<23&4294967295|ce>>>9))+((ce=te+(ve^(le|~Ve))+ye[0]+4096336452&4294967295)<<6&4294967295|ce>>>26))+((ce=Ve+(le^(te|~ve))+ye[7]+1126891415&4294967295)<<10&4294967295|ce>>>22))+((ce=ve+(te^(Ve|~le))+ye[14]+2878612391&4294967295)<<15&4294967295|ce>>>17))+((ce=le+(Ve^(ve|~te))+ye[5]+4237533241&4294967295)<<21&4294967295|ce>>>11))+((ce=te+(ve^(le|~Ve))+ye[12]+1700485571&4294967295)<<6&4294967295|ce>>>26))+((ce=Ve+(le^(te|~ve))+ye[3]+2399980690&4294967295)<<10&4294967295|ce>>>22))+((ce=ve+(te^(Ve|~le))+ye[10]+4293915773&4294967295)<<15&4294967295|ce>>>17))+((ce=le+(Ve^(ve|~te))+ye[1]+2240044497&4294967295)<<21&4294967295|ce>>>11))+((ce=te+(ve^(le|~Ve))+ye[8]+1873313359&4294967295)<<6&4294967295|ce>>>26))+((ce=Ve+(le^(te|~ve))+ye[15]+4264355552&4294967295)<<10&4294967295|ce>>>22))+((ce=ve+(te^(Ve|~le))+ye[6]+2734768916&4294967295)<<15&4294967295|ce>>>17))+((ce=le+(Ve^(ve|~te))+ye[13]+1309151649&4294967295)<<21&4294967295|ce>>>11))+((Ve=(te=le+((ce=te+(ve^(le|~Ve))+ye[4]+4149444226&4294967295)<<6&4294967295|ce>>>26))+((ce=Ve+(le^(te|~ve))+ye[11]+3174756917&4294967295)<<10&4294967295|ce>>>22))^((ve=Ve+((ce=ve+(te^(Ve|~le))+ye[2]+718787259&4294967295)<<15&4294967295|ce>>>17))|~te))+ye[9]+3951481745&4294967295,ge.g[0]=ge.g[0]+te&4294967295,ge.g[1]=ge.g[1]+(ve+(ce<<21&4294967295|ce>>>11))&4294967295,ge.g[2]=ge.g[2]+ve&4294967295,ge.g[3]=ge.g[3]+Ve&4294967295}function g(ge,te){this.h=te;for(var le=[],ye=!0,ve=ge.length-1;0<=ve;ve--){var Ve=0|ge[ve];ye&&Ve==te||(le[ve]=Ve,ye=!1)}this.g=le}(function e(ge,te){function le(){}le.prototype=te.prototype,ge.D=te.prototype,ge.prototype=new le,ge.prototype.constructor=ge,ge.C=function(ye,ve,Ve){for(var ce=Array(arguments.length-2),Ps=2;Ps<arguments.length;Ps++)ce[Ps-2]=arguments[Ps];return te.prototype[ve].apply(ye,ce)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(ge,te){void 0===te&&(te=ge.length);for(var le=te-this.blockSize,ye=this.B,ve=this.h,Ve=0;Ve<te;){if(0==ve)for(;Ve<=le;)u(this,ge,Ve),Ve+=this.blockSize;if("string"==typeof ge){for(;Ve<te;)if(ye[ve++]=ge.charCodeAt(Ve++),ve==this.blockSize){u(this,ye),ve=0;break}}else for(;Ve<te;)if(ye[ve++]=ge[Ve++],ve==this.blockSize){u(this,ye),ve=0;break}}this.h=ve,this.o+=te},s.prototype.v=function(){var ge=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ge[0]=128;for(var te=1;te<ge.length-8;++te)ge[te]=0;var le=8*this.o;for(te=ge.length-8;te<ge.length;++te)ge[te]=255&le,le/=256;for(this.u(ge),ge=Array(16),te=le=0;4>te;++te)for(var ye=0;32>ye;ye+=8)ge[le++]=this.g[te]>>>ye&255;return ge};var w={};function S(ge){return-128<=ge&&128>ge?function d(ge,te){var le=w;return Object.prototype.hasOwnProperty.call(le,ge)?le[ge]:le[ge]=te(ge)}(ge,function(te){return new g([0|te],0>te?-1:0)}):new g([0|ge],0>ge?-1:0)}function O(ge){if(isNaN(ge)||!isFinite(ge))return K;if(0>ge)return st(O(-ge));for(var te=[],le=1,ye=0;ge>=le;ye++)te[ye]=ge/le|0,le*=4294967296;return new g(te,0)}var K=S(0),oe=S(1),Me=S(16777216);function Je(ge){if(0!=ge.h)return!1;for(var te=0;te<ge.g.length;te++)if(0!=ge.g[te])return!1;return!0}function ht(ge){return-1==ge.h}function st(ge){for(var te=ge.g.length,le=[],ye=0;ye<te;ye++)le[ye]=~ge.g[ye];return new g(le,~ge.h).add(oe)}function kt(ge,te){return ge.add(st(te))}function Ht(ge,te){for(;(65535&ge[te])!=ge[te];)ge[te+1]+=ge[te]>>>16,ge[te]&=65535,te++}function Tt(ge,te){this.g=ge,this.h=te}function zt(ge,te){if(Je(te))throw Error("division by zero");if(Je(ge))return new Tt(K,K);if(ht(ge))return te=zt(st(ge),te),new Tt(st(te.g),st(te.h));if(ht(te))return te=zt(ge,st(te)),new Tt(st(te.g),te.h);if(30<ge.g.length){if(ht(ge)||ht(te))throw Error("slowDivide_ only works with positive integers.");for(var le=oe,ye=te;0>=ye.l(ge);)le=yn(le),ye=yn(ye);var ve=ln(le,1),Ve=ln(ye,1);for(ye=ln(ye,2),le=ln(le,2);!Je(ye);){var ce=Ve.add(ye);0>=ce.l(ge)&&(ve=ve.add(le),Ve=ce),ye=ln(ye,1),le=ln(le,1)}return te=kt(ge,ve.j(te)),new Tt(ve,te)}for(ve=K;0<=ge.l(te);){for(le=Math.max(1,Math.floor(ge.m()/te.m())),ye=48>=(ye=Math.ceil(Math.log(le)/Math.LN2))?1:Math.pow(2,ye-48),ce=(Ve=O(le)).j(te);ht(ce)||0<ce.l(ge);)ce=(Ve=O(le-=ye)).j(te);Je(Ve)&&(Ve=oe),ve=ve.add(Ve),ge=kt(ge,ce)}return new Tt(ve,ge)}function yn(ge){for(var te=ge.g.length+1,le=[],ye=0;ye<te;ye++)le[ye]=ge.i(ye)<<1|ge.i(ye-1)>>>31;return new g(le,ge.h)}function ln(ge,te){var le=te>>5;te%=32;for(var ye=ge.g.length-le,ve=[],Ve=0;Ve<ye;Ve++)ve[Ve]=0<te?ge.i(Ve+le)>>>te|ge.i(Ve+le+1)<<32-te:ge.i(Ve+le);return new g(ve,ge.h)}(a=g.prototype).m=function(){if(ht(this))return-st(this).m();for(var ge=0,te=1,le=0;le<this.g.length;le++){var ye=this.i(le);ge+=(0<=ye?ye:4294967296+ye)*te,te*=4294967296}return ge},a.toString=function(ge){if(2>(ge=ge||10)||36<ge)throw Error("radix out of range: "+ge);if(Je(this))return"0";if(ht(this))return"-"+st(this).toString(ge);for(var te=O(Math.pow(ge,6)),le=this,ye="";;){var ve=zt(le,te).g,Ve=((0<(le=kt(le,ve.j(te))).g.length?le.g[0]:le.h)>>>0).toString(ge);if(Je(le=ve))return Ve+ye;for(;6>Ve.length;)Ve="0"+Ve;ye=Ve+ye}},a.i=function(ge){return 0>ge?0:ge<this.g.length?this.g[ge]:this.h},a.l=function(ge){return ht(ge=kt(this,ge))?-1:Je(ge)?0:1},a.abs=function(){return ht(this)?st(this):this},a.add=function(ge){for(var te=Math.max(this.g.length,ge.g.length),le=[],ye=0,ve=0;ve<=te;ve++){var Ve=ye+(65535&this.i(ve))+(65535&ge.i(ve)),ce=(Ve>>>16)+(this.i(ve)>>>16)+(ge.i(ve)>>>16);ye=ce>>>16,le[ve]=(ce&=65535)<<16|(Ve&=65535)}return new g(le,-2147483648&le[le.length-1]?-1:0)},a.j=function(ge){if(Je(this)||Je(ge))return K;if(ht(this))return ht(ge)?st(this).j(st(ge)):st(st(this).j(ge));if(ht(ge))return st(this.j(st(ge)));if(0>this.l(Me)&&0>ge.l(Me))return O(this.m()*ge.m());for(var te=this.g.length+ge.g.length,le=[],ye=0;ye<2*te;ye++)le[ye]=0;for(ye=0;ye<this.g.length;ye++)for(var ve=0;ve<ge.g.length;ve++){var Ve=this.i(ye)>>>16,ce=65535&this.i(ye),Ps=ge.i(ve)>>>16,La=65535&ge.i(ve);le[2*ye+2*ve]+=ce*La,Ht(le,2*ye+2*ve),le[2*ye+2*ve+1]+=Ve*La,Ht(le,2*ye+2*ve+1),le[2*ye+2*ve+1]+=ce*Ps,Ht(le,2*ye+2*ve+1),le[2*ye+2*ve+2]+=Ve*Ps,Ht(le,2*ye+2*ve+2)}for(ye=0;ye<te;ye++)le[ye]=le[2*ye+1]<<16|le[2*ye];for(ye=te;ye<2*te;ye++)le[ye]=0;return new g(le,0)},a.A=function(ge){return zt(this,ge).h},a.and=function(ge){for(var te=Math.max(this.g.length,ge.g.length),le=[],ye=0;ye<te;ye++)le[ye]=this.i(ye)&ge.i(ye);return new g(le,this.h&ge.h)},a.or=function(ge){for(var te=Math.max(this.g.length,ge.g.length),le=[],ye=0;ye<te;ye++)le[ye]=this.i(ye)|ge.i(ye);return new g(le,this.h|ge.h)},a.xor=function(ge){for(var te=Math.max(this.g.length,ge.g.length),le=[],ye=0;ye<te;ye++)le[ye]=this.i(ye)^ge.i(ye);return new g(le,this.h^ge.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ir=$r.Md5=s,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=O,g.fromString=function j(ge,te){if(0==ge.length)throw Error("number format error: empty string");if(2>(te=te||10)||36<te)throw Error("radix out of range: "+te);if("-"==ge.charAt(0))return st(j(ge.substring(1),te));if(0<=ge.indexOf("-"))throw Error('number format error: interior "-" character');for(var le=O(Math.pow(te,8)),ye=K,ve=0;ve<ge.length;ve+=8){var Ve=Math.min(8,ge.length-ve),ce=parseInt(ge.substring(ve,ve+Ve),te);8>Ve?(Ve=O(Math.pow(te,Ve)),ye=ye.j(Ve).add(O(ce))):ye=(ye=ye.j(le)).add(O(ce))}return ye},gn=$r.Integer=g}).apply(typeof tn<"u"?tn:typeof self<"u"?self:typeof window<"u"?window:{});var Er,Nr,Ei,Fr,Zn,qt,hn,Kt,Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nt={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,R,L){return p==Array.prototype||p==Object.prototype||(p[R]=L.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Dn&&Dn];for(var R=0;R<p.length;++R){var L=p[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}(this);!function u(p,R){if(R)e:{var L=s;p=p.split(".");for(var W=0;W<p.length-1;W++){var Se=p[W];if(!(Se in L))break e;L=L[Se]}(R=R(W=L[p=p[p.length-1]]))!=W&&null!=R&&e(L,p,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(p){return p||function(){return function d(p,R){p instanceof String&&(p+="");var L=0,W=!1,Se={next:function(){if(!W&&L<p.length){var He=L++;return{value:R(He,p[He]),done:!1}}return W=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}(this,function(R,L){return L})}});var g=g||{},w=this||self;function S(p){var R=typeof p;return"array"==(R="object"!=R?R:p?Array.isArray(p)?"array":R:"null")||"object"==R&&"number"==typeof p.length}function O(p){var R=typeof p;return"object"==R&&null!=p||"function"==R}function j(p,R,L){return p.call.apply(p.bind,arguments)}function K(p,R,L){if(!p)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,W),p.apply(R,Se)}}return function(){return p.apply(R,arguments)}}function oe(p,R,L){return(oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?j:K).apply(null,arguments)}function Me(p,R){var L=Array.prototype.slice.call(arguments,1);return function(){var W=L.slice();return W.push.apply(W,arguments),p.apply(this,W)}}function Je(p,R){function L(){}L.prototype=R.prototype,p.aa=R.prototype,p.prototype=new L,p.prototype.constructor=p,p.Qb=function(W,Se,He){for(var Ct=Array(arguments.length-2),Ar=2;Ar<arguments.length;Ar++)Ct[Ar-2]=arguments[Ar];return R.prototype[Se].apply(W,Ct)}}function ht(p){const R=p.length;if(0<R){const L=Array(R);for(let W=0;W<R;W++)L[W]=p[W];return L}return[]}function st(p,R){for(let L=1;L<arguments.length;L++){const W=arguments[L];if(S(W)){const Se=p.length||0,He=W.length||0;p.length=Se+He;for(let Ct=0;Ct<He;Ct++)p[Se+Ct]=W[Ct]}else p.push(W)}}function Ht(p){return/^[\s\xa0]*$/.test(p)}function Tt(){var p=w.navigator;return p&&(p=p.userAgent)?p:""}function zt(p){return zt[" "](p),p}zt[" "]=function(){};var yn=!(-1==Tt().indexOf("Gecko")||-1!=Tt().toLowerCase().indexOf("webkit")&&-1==Tt().indexOf("Edge")||-1!=Tt().indexOf("Trident")||-1!=Tt().indexOf("MSIE")||-1!=Tt().indexOf("Edge"));function ln(p,R,L){for(const W in p)R.call(L,p[W],W,p)}function te(p){const R={};for(const L in p)R[L]=p[L];return R}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(p,R){let L,W;for(let Se=1;Se<arguments.length;Se++){for(L in W=arguments[Se],W)p[L]=W[L];for(let He=0;He<le.length;He++)L=le[He],Object.prototype.hasOwnProperty.call(W,L)&&(p[L]=W[L])}}function ve(p){var R=1;p=p.split(":");const L=[];for(;0<R&&p.length;)L.push(p.shift()),R--;return p.length&&L.push(p.join(":")),L}function Ve(p){w.setTimeout(()=>{throw p},0)}function ce(){var p=gc;let R=null;return p.g&&(R=p.g,p.g=p.g.next,p.g||(p.h=null),R.next=null),R}var La=new class kt{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new kd,p=>p.reset());class kd{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Fa,Va=!1,gc=new class Ps{constructor(){this.h=this.g=null}add(R,L){const W=La.get();W.set(R,L),this.h?this.h.next=W:this.g=W,this.h=W}},El=()=>{const p=w.Promise.resolve(void 0);Fa=()=>{p.then(Ld)}};var Ld=()=>{for(var p;p=ce();){try{p.h.call(p.g)}catch(L){Ve(L)}var R=La;R.j(p),100>R.h&&(R.h++,p.next=R.g,R.g=p)}Va=!1};function Du(){this.s=this.s,this.C=this.C}function Vi(p,R){this.type=p,this.g=this.target=R,this.defaultPrevented=!1}Du.prototype.s=!1,Du.prototype.ma=function(){this.s||(this.s=!0,this.N())},Du.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Vi.prototype.h=function(){this.defaultPrevented=!0};var Ny=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var p=!1,R=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const L=()=>{};w.addEventListener("test",L,R),w.removeEventListener("test",L,R)}catch{}return p}();function Fd(p,R){if(Vi.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var L=this.type=p.type,W=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=R,R=p.relatedTarget){if(yn){e:{try{zt(R.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(R=null)}}else"mouseover"==L?R=p.fromElement:"mouseout"==L&&(R=p.toElement);this.relatedTarget=R,W?(this.clientX=void 0!==W.clientX?W.clientX:W.pageX,this.clientY=void 0!==W.clientY?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:xy[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Fd.aa.h.call(this)}}Je(Fd,Vi);var xy={2:"touch",3:"pen",4:"mouse"};Fd.prototype.h=function(){Fd.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Vd="closure_listenable_"+(1e6*Math.random()|0),Oy=0;function ky(p,R,L,W,Se){this.listener=p,this.proxy=null,this.src=R,this.type=L,this.capture=!!W,this.ha=Se,this.key=++Oy,this.da=this.fa=!1}function tf(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ud(p){this.src=p,this.g={},this.h=0}function Em(p,R){var L=R.type;if(L in p.g){var He,W=p.g[L],Se=Array.prototype.indexOf.call(W,R,void 0);(He=0<=Se)&&Array.prototype.splice.call(W,Se,1),He&&(tf(R),0==p.g[L].length&&(delete p.g[L],p.h--))}}function Ly(p,R,L,W){for(var Se=0;Se<p.length;++Se){var He=p[Se];if(!He.da&&He.listener==R&&He.capture==!!L&&He.ha==W)return Se}return-1}Ud.prototype.add=function(p,R,L,W,Se){var He=p.toString();(p=this.g[He])||(p=this.g[He]=[],this.h++);var Ct=Ly(p,R,W,Se);return-1<Ct?(R=p[Ct],L||(R.fa=!1)):((R=new ky(R,this.src,He,!!W,Se)).fa=L,p.push(R)),R};var Fy="closure_lm_"+(1e6*Math.random()|0),Tm={};function Vy(p,R,L,W,Se){if(W&&W.once)return SI(p,R,L,W,Se);if(Array.isArray(R)){for(var He=0;He<R.length;He++)Vy(p,R[He],L,W,Se);return null}return L=Bd(L),p&&p[Vd]?p.K(R,L,O(W)?!!W.capture:!!W,Se):CI(p,R,L,!1,W,Se)}function CI(p,R,L,W,Se,He){if(!R)throw Error("Invalid event type");var Ct=O(Se)?!!Se.capture:!!Se,Ar=Tl(p);if(Ar||(p[Fy]=Ar=new Ud(p)),(L=Ar.add(R,L,W,Ct,He)).proxy)return L;if(W=function bI(){const R=Am;return function p(L){return R.call(p.src,p.listener,L)}}(),L.proxy=W,W.src=p,W.listener=L,p.addEventListener)Ny||(Se=Ct),void 0===Se&&(Se=!1),p.addEventListener(R.toString(),W,Se);else if(p.attachEvent)p.attachEvent(By(R.toString()),W);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(W)}return L}function SI(p,R,L,W,Se){if(Array.isArray(R)){for(var He=0;He<R.length;He++)SI(p,R[He],L,W,Se);return null}return L=Bd(L),p&&p[Vd]?p.L(R,L,O(W)?!!W.capture:!!W,Se):CI(p,R,L,!0,W,Se)}function Uy(p,R,L,W,Se){if(Array.isArray(R))for(var He=0;He<R.length;He++)Uy(p,R[He],L,W,Se);else W=O(W)?!!W.capture:!!W,L=Bd(L),p&&p[Vd]?(p=p.i,(R=String(R).toString())in p.g&&-1<(L=Ly(He=p.g[R],L,W,Se))&&(tf(He[L]),Array.prototype.splice.call(He,L,1),0==He.length&&(delete p.g[R],p.h--))):p&&(p=Tl(p))&&(R=p.g[R.toString()],p=-1,R&&(p=Ly(R,L,W,Se)),(L=-1<p?R[p]:null)&&wm(L))}function wm(p){if("number"!=typeof p&&p&&!p.da){var R=p.src;if(R&&R[Vd])Em(R.i,p);else{var L=p.type,W=p.proxy;R.removeEventListener?R.removeEventListener(L,W,p.capture):R.detachEvent?R.detachEvent(By(L),W):R.addListener&&R.removeListener&&R.removeListener(W),(L=Tl(R))?(Em(L,p),0==L.h&&(L.src=null,R[Fy]=null)):tf(p)}}}function By(p){return p in Tm?Tm[p]:Tm[p]="on"+p}function Am(p,R){if(p.da)p=!0;else{R=new Fd(R,this);var L=p.listener,W=p.ha||p.src;p.fa&&wm(p),p=L.call(W,R)}return p}function Tl(p){return(p=p[Fy])instanceof Ud?p:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bd(p){return"function"==typeof p?p:(p[nf]||(p[nf]=function(R){return p.handleEvent(R)}),p[nf])}function Ui(){Du.call(this),this.i=new Ud(this),this.M=this,this.F=null}function Ii(p,R){var L,W=p.F;if(W)for(L=[];W;W=W.F)L.push(W);if(p=p.M,W=R.type||R,"string"==typeof R)R=new Vi(R,p);else if(R instanceof Vi)R.target=R.target||p;else{var Se=R;ye(R=new Vi(W,p),Se)}if(Se=!0,L)for(var He=L.length-1;0<=He;He--){var Ct=R.g=L[He];Se=rf(Ct,W,!0,R)&&Se}if(Se=rf(Ct=R.g=p,W,!0,R)&&Se,Se=rf(Ct,W,!1,R)&&Se,L)for(He=0;He<L.length;He++)Se=rf(Ct=R.g=L[He],W,!1,R)&&Se}function rf(p,R,L,W){if(!(R=p.i.g[String(R)]))return!0;R=R.concat();for(var Se=!0,He=0;He<R.length;++He){var Ct=R[He];if(Ct&&!Ct.da&&Ct.capture==L){var Ar=Ct.listener,Bi=Ct.ha||Ct.src;Ct.fa&&Em(p.i,Ct),Se=!1!==Ar.call(Bi,W)&&Se}}return Se&&!W.defaultPrevented}function jy(p,R,L){if("function"==typeof p)L&&(p=oe(p,L));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=oe(p.handleEvent,p)}return 2147483647<Number(R)?-1:w.setTimeout(p,R||0)}function jd(p){p.g=jy(()=>{p.g=null,p.i&&(p.i=!1,jd(p))},p.l);const R=p.h;p.h=null,p.m.apply(null,R)}Je(Ui,Du),Ui.prototype[Vd]=!0,Ui.prototype.removeEventListener=function(p,R,L,W){Uy(this,p,R,L,W)},Ui.prototype.N=function(){if(Ui.aa.N.call(this),this.i){var R,p=this.i;for(R in p.g){for(var L=p.g[R],W=0;W<L.length;W++)tf(L[W]);delete p.g[R],p.h--}}this.F=null},Ui.prototype.K=function(p,R,L,W){return this.i.add(String(p),R,!1,L,W)},Ui.prototype.L=function(p,R,L,W){return this.i.add(String(p),R,!0,L,W)};class RI extends Du{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:jd(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sf(p){Du.call(this),this.h=p,this.g={}}Je(sf,Du);var $y=[];function Hy(p){ln(p.g,function(R,L){this.g.hasOwnProperty(L)&&wm(R)},p),p.g={}}sf.prototype.N=function(){sf.aa.N.call(this),Hy(this)},sf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var af=w.JSON.stringify,Vp=w.JSON.parse,Up=class{stringify(p){return w.JSON.stringify(p,void 0)}parse(p){return w.JSON.parse(p,void 0)}};function zy(){}function Wy(){}zy.prototype.h=null;var wl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dm(){Vi.call(this,"d")}function Bp(){Vi.call(this,"c")}Je(Dm,Vi),Je(Bp,Vi);var Al={},Ky=null;function uf(){return Ky=Ky||new Ui}function Cm(p){Vi.call(this,Al.La,p)}function $d(p){const R=uf();Ii(R,new Cm(R))}function qy(p,R){Vi.call(this,Al.STAT_EVENT,p),this.stat=R}function vs(p){const R=uf();Ii(R,new qy(R,p))}function Qy(p,R){Vi.call(this,Al.Ma,p),this.size=R}function cf(p,R){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){p()},R)}function Dl(){this.g=!0}function Cu(p,R,L,W){p.info(function(){return"XMLHTTP TEXT ("+R+"): "+function Sm(p,R){if(!p.g)return R;if(!R)return null;try{var L=JSON.parse(R);if(L)for(p=0;p<L.length;p++)if(Array.isArray(L[p])){var W=L[p];if(!(2>W.length)){var Se=W[1];if(Array.isArray(Se)&&!(1>Se.length)){var He=Se[0];if("noop"!=He&&"stop"!=He&&"close"!=He)for(var Ct=1;Ct<Se.length;Ct++)Se[Ct]=""}}}return af(L)}catch{return R}}(p,L)+(W?" "+W:"")})}Al.La="serverreachability",Je(Cm,Vi),Al.STAT_EVENT="statevent",Je(qy,Vi),Al.Ma="timingevent",Je(Qy,Vi),Dl.prototype.xa=function(){this.g=!1},Dl.prototype.info=function(){};var Rm,lf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function $p(){}function Ua(p,R,L,W){this.j=p,this.i=R,this.l=L,this.R=W||1,this.U=new sf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hp}function Hp(){this.i=null,this.g="",this.h=!1}Je($p,zy),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},Rm=new $p;var Pm={},zp={};function Mm(p,R,L){p.L=1,p.v=Hd(Ba(R)),p.m=L,p.P=!0,Xy(p,null)}function Xy(p,R){p.F=Date.now(),df(p),p.A=Ba(p.v);var L=p.A,W=p.R;Array.isArray(W)||(W=[String(W)]),sv(L.i,"t",W),p.C=0,L=p.j.J,p.h=new Hp,p.g=qm(p.j,L?R:null,!p.m),0<p.O&&(p.M=new RI(oe(p.Y,p,p.g),p.O)),R=p.U,L=p.g,W=p.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&($y[0]=Se.toString()),Se=$y);for(var He=0;He<Se.length;He++){var Ct=Vy(L,Se[He],W||R.handleEvent,!1,R.h||R);if(!Ct)break;R.g[Ct.key]=Ct}R=p.H?te(p.H):{},p.m?(p.u||(p.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,R)):(p.u="GET",p.g.ea(p.A,p.u,null,R)),$d(),function bm(p,R,L,W,Se,He){p.info(function(){if(p.g)if(He)for(var Ct="",Ar=He.split("&"),Bi=0;Bi<Ar.length;Bi++){var cr=Ar[Bi].split("=");if(1<cr.length){var rs=cr[0];cr=cr[1];var is=rs.split("_");Ct=2<=is.length&&"type"==is[1]?Ct+(rs+"=")+cr+"&":Ct+(rs+"=redacted&")}}else Ct=null;else Ct=He;return"XMLHTTP REQ ("+W+") [attempt "+Se+"]: "+R+"\n"+L+"\n"+Ct})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Nm(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function xm(p,R){var L=p.C,W=R.indexOf("\n",L);return-1==W?zp:(L=Number(R.substring(L,W)),isNaN(L)?Pm:(W+=1)+L>R.length?zp:(R=R.slice(W,W+L),p.C=W+L,R))}function df(p){p.S=Date.now()+p.I,Gp(p,p.I)}function Gp(p,R){if(null!=p.B)throw Error("WatchDog timer not null");p.B=cf(oe(p.ba,p),R)}function Wp(p){p.B&&(w.clearTimeout(p.B),p.B=null)}function hf(p){0==p.j.G||p.J||dv(p.j,p)}function mc(p){Wp(p);var R=p.M;R&&"function"==typeof R.ma&&R.ma(),p.M=null,Hy(p.U),p.g&&(R=p.g,p.g=null,R.abort(),R.ma())}function Kp(p,R){try{var L=p.j;if(0!=L.G&&(L.g==p||km(L.h,p)))if(!p.K&&km(L.h,p)&&3==L.G){try{var W=L.Da.g.parse(R)}catch{W=null}if(Array.isArray(W)&&3==W.length){var Se=W;if(0==Se[0]){e:if(!L.u){if(L.g){if(!(L.g.F+3e3<p.F))break e;rg(L),Zp(L)}tg(L),vs(18)}}else L.za=Se[1],0<L.za-L.T&&37500>Se[2]&&L.F&&0==L.v&&!L.C&&(L.C=cf(oe(L.Za,L),6e3));if(1>=ev(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Ru(L,11)}else if((p.K||L.g==p)&&rg(L),!Ht(R))for(Se=L.Da.g.parse(R),R=0;R<Se.length;R++){let cr=Se[R];if(L.T=cr[0],cr=cr[1],2==L.G)if("c"==cr[0]){L.K=cr[1],L.ia=cr[2];const rs=cr[3];null!=rs&&(L.la=rs,L.j.info("VER="+L.la));const is=cr[4];null!=is&&(L.Aa=is,L.j.info("SVER="+L.Aa));const Yd=cr[5];null!=Yd&&"number"==typeof Yd&&0<Yd&&(L.L=W=1.5*Yd,L.j.info("backChannelRequestTimeoutMs_="+W)),W=L;const ra=p.g;if(ra){const ig=ra.g?ra.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ig){var He=W.h;He.g||-1==ig.indexOf("spdy")&&-1==ig.indexOf("quic")&&-1==ig.indexOf("h2")||(He.j=He.l,He.g=new Set,He.h&&(qp(He,He.h),He.h=null))}if(W.D){const Jm=ra.g?ra.g.getResponseHeader("X-HTTP-Session-Id"):null;Jm&&(W.ya=Jm,Lr(W.I,W.D,Jm))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-p.F,L.j.info("Handshake RTT: "+L.R+"ms"));var Ct=p;if((W=L).qa=Km(W,W.J?W.ia:null,W.W),Ct.K){Qp(W.h,Ct);var Ar=Ct,Bi=W.L;Bi&&(Ar.I=Bi),Ar.B&&(Wp(Ar),df(Ar)),W.g=Ct}else lv(W);0<L.i.length&&eg(L)}else"stop"!=cr[0]&&"close"!=cr[0]||Ru(L,7);else 3==L.G&&("stop"==cr[0]||"close"==cr[0]?"stop"==cr[0]?Ru(L,7):Sl(L):"noop"!=cr[0]&&L.l&&L.l.ta(cr),L.v=0)}$d()}catch{}}function Om(p){this.l=p||10,p=w.PerformanceNavigationTiming?0<(p=w.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zy(p){return!!p.h||!!p.g&&p.g.size>=p.j}function ev(p){return p.h?1:p.g?p.g.size:0}function km(p,R){return p.h?p.h==R:!!p.g&&p.g.has(R)}function qp(p,R){p.g?p.g.add(R):p.h=R}function Qp(p,R){p.h&&p.h==R?p.h=null:p.g&&p.g.has(R)&&p.g.delete(R)}function Lm(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let R=p.i;for(const L of p.g.values())R=R.concat(L.D);return R}return ht(p.i)}function Fm(p,R){if(p.forEach&&"function"==typeof p.forEach)p.forEach(R,void 0);else if(S(p)||"string"==typeof p)Array.prototype.forEach.call(p,R,void 0);else for(var L=function nv(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(S(p)||"string"==typeof p){var R=[];p=p.length;for(var L=0;L<p;L++)R.push(L);return R}R=[],L=0;for(const W in p)R[L++]=W;return R}}}(p),W=function tv(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(S(p)){for(var R=[],L=p.length,W=0;W<L;W++)R.push(p[W]);return R}for(W in R=[],L=0,p)R[L++]=p[W];return R}(p),Se=W.length,He=0;He<Se;He++)R.call(void 0,W[He],L&&L[He],p)}Ua.prototype.ca=function(p){p=p.target;const R=this.M;R&&3==Su(p)?R.j():this.Y(p)},Ua.prototype.Y=function(p){try{if(p==this.g)e:{const is=Su(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>is)&&(3!=is||this.g&&(this.h.h||this.g.oa()||cv(this.g)))){this.J||4!=is||7==R||$d(),Wp(this);var L=this.g.Z();this.X=L;t:if(Nm(this)){var W=cv(this.g);p="";var Se=W.length,He=4==Su(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mc(this),hf(this);var Ct="";break t}this.h.i=new w.TextDecoder}for(R=0;R<Se;R++)this.h.h=!0,p+=this.h.i.decode(W[R],{stream:!(He&&R==Se-1)});W.length=0,this.h.g+=p,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=200==L,function PI(p,R,L,W,Se,He,Ct){p.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+Se+"]: "+R+"\n"+L+"\n"+He+" "+Ct})}(this.i,this.u,this.A,this.l,this.R,is,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Ar,Bi=this.g;if((Ar=Bi.g?Bi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ht(Ar)){var cr=Ar;break t}}cr=null}if(!(L=cr)){this.o=!1,this.s=3,vs(12),mc(this),hf(this);break e}Cu(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,L)}if(this.P){let ra;for(L=!0;!this.J&&this.C<Ct.length;){if(ra=xm(this,Ct),ra==zp){4==is&&(this.s=4,vs(14),L=!1),Cu(this.i,this.l,null,"[Incomplete Response]");break}if(ra==Pm){this.s=4,vs(15),Cu(this.i,this.l,Ct,"[Invalid Chunk]"),L=!1;break}Cu(this.i,this.l,ra,null),Kp(this,ra)}if(Nm(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=is||0!=Ct.length||this.h.h||(this.s=1,vs(16),L=!1),this.o=this.o&&L,L){if(0<Ct.length&&!this.W){this.W=!0;var rs=this.j;rs.g==this&&rs.ba&&!rs.M&&(rs.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),ng(rs),rs.M=!0,vs(11))}}else Cu(this.i,this.l,Ct,"[Invalid Chunked Response]"),mc(this),hf(this)}else Cu(this.i,this.l,Ct,null),Kp(this,Ct);4==is&&mc(this),this.o&&!this.J&&(4==is?dv(this.j,this):(this.o=!1,df(this)))}else(function VI(p){const R={};p=(p.g&&2<=Su(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let W=0;W<p.length;W++){if(Ht(p[W]))continue;var L=ve(p[W]);const Se=L[0];if("string"!=typeof(L=L[1]))continue;L=L.trim();const He=R[Se]||[];R[Se]=He,He.push(L)}!function ge(p,R){for(const L in p)R.call(void 0,p[L],L,p)}(R,function(W){return W.join(", ")})})(this.g),400==L&&0<Ct.indexOf("Unknown SID")?(this.s=3,vs(12)):(this.s=0,vs(13)),mc(this),hf(this)}}}catch{}},Ua.prototype.cancel=function(){this.J=!0,mc(this)},Ua.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function jp(p,R){p.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&($d(),vs(17)),mc(this),this.s=2,hf(this)):Gp(this,this.S-p)},Om.prototype.cancel=function(){if(this.i=Lm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _c(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof _c){this.h=p.h,Cl(this,p.j),this.o=p.o,this.g=p.g,ea(this,p.s),this.l=p.l;var R=p.i,L=new zd;L.i=R.i,R.g&&(L.g=new Map(R.g),L.h=R.h),iv(this,L),this.m=p.m}else p&&(R=String(p).match(Vm))?(this.h=!1,Cl(this,R[1]||"",!0),this.o=ta(R[2]||""),this.g=ta(R[3]||"",!0),ea(this,R[4]),this.l=ta(R[5]||"",!0),iv(this,R[6]||"",!0),this.m=ta(R[7]||"")):(this.h=!1,this.i=new zd(null,this.h))}function Ba(p){return new _c(p)}function Cl(p,R,L){p.j=L?ta(R,!0):R,p.j&&(p.j=p.j.replace(/:$/,""))}function ea(p,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);p.s=R}else p.s=null}function iv(p,R,L){R instanceof zd?(p.i=R,function ov(p,R){R&&!p.j&&(yc(p),p.i=null,p.g.forEach(function(L,W){var Se=W.toLowerCase();W!=Se&&(mi(this,W),sv(this,Se,L))},p)),p.j=R}(p.i,p.h)):(L||(R=bl(R,NI)),p.i=new zd(R,p.h))}function Lr(p,R,L){p.i.set(R,L)}function Hd(p){return Lr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function ta(p,R){return p?R?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function bl(p,R,L){return"string"==typeof p?(p=encodeURI(p).replace(R,MI),L&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function MI(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}_c.prototype.toString=function(){var p=[],R=this.j;R&&p.push(bl(R,Yp,!0),":");var L=this.g;return(L||"file"==R)&&(p.push("//"),(R=this.o)&&p.push(bl(R,Yp,!0),"@"),p.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(L=this.s)&&p.push(":",String(L))),(L=this.l)&&(this.g&&"/"!=L.charAt(0)&&p.push("/"),p.push(bl(L,"/"==L.charAt(0)?GE:zE,!0))),(L=this.i.toString())&&p.push("?",L),(L=this.m)&&p.push("#",bl(L,xI)),p.join("")};var p,Yp=/[#\/\?@]/g,zE=/[#\?:]/g,GE=/[#\?]/g,NI=/[#\?@]/g,xI=/#/g;function zd(p,R){this.h=this.g=null,this.i=p||null,this.j=!!R}function yc(p){p.g||(p.g=new Map,p.h=0,p.i&&function rv(p,R){if(p){p=p.split("&");for(var L=0;L<p.length;L++){var W=p[L].indexOf("="),Se=null;if(0<=W){var He=p[L].substring(0,W);Se=p[L].substring(W+1)}else He=p[L];R(He,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}(p.i,function(R,L){p.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}function mi(p,R){yc(p),R=Gd(p,R),p.g.has(R)&&(p.i=null,p.h-=p.g.get(R).length,p.g.delete(R))}function Um(p,R){return yc(p),R=Gd(p,R),p.g.has(R)}function sv(p,R,L){mi(p,R),0<L.length&&(p.i=null,p.g.set(Gd(p,R),ht(L)),p.h+=L.length)}function Gd(p,R){return R=String(R),p.j&&(R=R.toLowerCase()),R}function bu(p,R,L,W,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),W(L)}catch{}}function Wd(){this.g=new Up}function kI(p,R,L){const W=L||"";try{Fm(p,function(Se,He){let Ct=Se;O(Se)&&(Ct=af(Se)),R.push(W+He+"="+encodeURIComponent(Ct))})}catch(Se){throw R.push(W+"type="+encodeURIComponent("_badmap")),Se}}function ff(p){this.l=p.Ub||null,this.j=p.eb||!1}function pf(p,R){Ui.call(this),this.D=p,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function uv(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Kd(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Xp(p)}function Xp(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Bm(p){let R="";return ln(p,function(L,W){R+=W,R+=":",R+=L,R+="\r\n"}),R}function gf(p,R,L){e:{for(W in L){var W=!1;break e}W=!0}W||(L=Bm(L),"string"==typeof p?null!=L&&encodeURIComponent(String(L)):Lr(p,R,L))}function fr(p){Ui.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=zd.prototype).add=function(p,R){yc(this),this.i=null,p=Gd(this,p);var L=this.g.get(p);return L||this.g.set(p,L=[]),L.push(R),this.h+=1,this},a.forEach=function(p,R){yc(this),this.g.forEach(function(L,W){L.forEach(function(Se){p.call(R,Se,W,this)},this)},this)},a.na=function(){yc(this);const p=Array.from(this.g.values()),R=Array.from(this.g.keys()),L=[];for(let W=0;W<R.length;W++){const Se=p[W];for(let He=0;He<Se.length;He++)L.push(R[W])}return L},a.V=function(p){yc(this);let R=[];if("string"==typeof p)Um(this,p)&&(R=R.concat(this.g.get(Gd(this,p))));else{p=Array.from(this.g.values());for(let L=0;L<p.length;L++)R=R.concat(p[L])}return R},a.set=function(p,R){return yc(this),this.i=null,Um(this,p=Gd(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[R]),this.h+=1,this},a.get=function(p,R){return p&&0<(p=this.V(p)).length?String(p[0]):R},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],R=Array.from(this.g.keys());for(var L=0;L<R.length;L++){var W=R[L];const He=encodeURIComponent(String(W)),Ct=this.V(W);for(W=0;W<Ct.length;W++){var Se=He;""!==Ct[W]&&(Se+="="+encodeURIComponent(String(Ct[W]))),p.push(Se)}}return this.i=p.join("&")},Je(ff,zy),ff.prototype.g=function(){return new pf(this.l,this.j)},ff.prototype.i=(p={},function(){return p}),Je(pf,Ui),(a=pf.prototype).open=function(p,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=R,this.readyState=1,Xp(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(R.body=p),(this.D||w).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kd(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Xp(this)),this.g&&(this.readyState=3,Xp(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uv(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var R=p.value?p.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!p.done}))&&(this.response=this.responseText+=R)}p.done?Kd(this):Xp(this),3==this.readyState&&uv(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,Kd(this))},a.Qa=function(p){this.g&&(this.response=p,Kd(this))},a.ga=function(){this.g&&Kd(this)},a.setRequestHeader=function(p,R){this.u.append(p,R)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],R=this.h.entries();for(var L=R.next();!L.done;)p.push((L=L.value)[0]+": "+L[1]),L=R.next();return p.join("\r\n")},Object.defineProperty(pf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),Je(fr,Ui);var LI=/^https?$/i,FI=["POST","PUT"];function na(p,R){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=R,p.m=5,To(p),mf(p)}function To(p){p.A||(p.A=!0,Ii(p,"complete"),Ii(p,"error"))}function wo(p){if(p.h&&typeof g<"u"&&(!p.v[1]||4!=Su(p)||2!=p.Z()))if(p.u&&4==Su(p))jy(p.Ea,0,p);else if(Ii(p,"readystatechange"),4==Su(p)){p.h=!1;try{const Ct=p.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var W;if(W=0===Ct){var Se=String(p.D).match(Vm)[1]||null;!Se&&w.self&&w.self.location&&(Se=w.self.location.protocol.slice(0,-1)),W=!LI.test(Se?Se.toLowerCase():"")}L=W}if(L)Ii(p,"complete"),Ii(p,"success");else{p.m=6;try{var He=2<Su(p)?p.g.statusText:""}catch{He=""}p.l=He+" ["+p.Z()+"]",To(p)}}finally{mf(p)}}}function mf(p,R){if(p.g){jm(p);const L=p.g,W=p.v[0]?()=>{}:null;p.g=null,p.v=null,R||Ii(p,"ready");try{L.onreadystatechange=W}catch{}}}function jm(p){p.I&&(w.clearTimeout(p.I),p.I=null)}function Su(p){return p.g?p.g.readyState:0}function cv(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function _f(p,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[p]||R}function Jp(p){this.Aa=0,this.i=[],this.j=new Dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_f("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_f("baseRetryDelayMs",5e3,p),this.cb=_f("retryDelaySeedMs",1e4,p),this.Wa=_f("forwardChannelMaxRetries",2,p),this.wa=_f("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Om(p&&p.concurrentRequestLimit),this.Da=new Wd,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Sl(p){if($m(p),3==p.G){var R=p.U++,L=Ba(p.I);if(Lr(L,"SID",p.K),Lr(L,"RID",R),Lr(L,"TYPE","terminate"),qd(p,L),(R=new Ua(p,p.j,R)).L=2,R.v=Hd(Ba(L)),L=!1,w.navigator&&w.navigator.sendBeacon)try{L=w.navigator.sendBeacon(R.v.toString(),"")}catch{}!L&&w.Image&&((new Image).src=R.v,L=!0),L||(R.g=qm(R.j,null),R.g.ea(R.v)),R.F=Date.now(),df(R)}Wm(p)}function Zp(p){p.g&&(ng(p),p.g.cancel(),p.g=null)}function $m(p){Zp(p),p.u&&(w.clearTimeout(p.u),p.u=null),rg(p),p.h.cancel(),p.s&&("number"==typeof p.s&&w.clearTimeout(p.s),p.s=null)}function eg(p){if(!Zy(p.h)&&!p.s){p.s=!0;var R=p.Ga;Fa||El(),Va||(Fa(),Va=!0),gc.add(R,p),p.B=0}}function Hm(p,R){var L;L=R?R.l:p.U++;const W=Ba(p.I);Lr(W,"SID",p.K),Lr(W,"RID",L),Lr(W,"AID",p.T),qd(p,W),p.m&&p.o&&gf(W,p.m,p.o),L=new Ua(p,p.j,L,p.B+1),null===p.m&&(L.H=p.o),R&&(p.i=R.D.concat(p.i)),R=yf(p,L,1e3),L.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),qp(p.h,L),Mm(L,W,R)}function qd(p,R){p.H&&ln(p.H,function(L,W){Lr(R,W,L)}),p.l&&Fm({},function(L,W){Lr(R,W,L)})}function yf(p,R,L){L=Math.min(p.i.length,L);var W=p.l?oe(p.l.Na,p.l,p):null;e:{var Se=p.i;let He=-1;for(;;){const Ct=["count="+L];-1==He?0<L?(He=Se[0].g,Ct.push("ofs="+He)):He=0:Ct.push("ofs="+He);let Ar=!0;for(let Bi=0;Bi<L;Bi++){let cr=Se[Bi].g;const rs=Se[Bi].map;if(cr-=He,0>cr)He=Math.max(0,Se[Bi].g-100),Ar=!1;else try{kI(rs,Ct,"req"+cr+"_")}catch{W&&W(rs)}}if(Ar){W=Ct.join("&");break e}}}return p=p.i.splice(0,L),R.D=p,W}function lv(p){if(!p.g&&!p.u){p.Y=1;var R=p.Fa;Fa||El(),Va||(Fa(),Va=!0),gc.add(R,p),p.v=0}}function tg(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=cf(oe(p.Fa,p),Gm(p,p.v)),p.v++,0))}function ng(p){null!=p.A&&(w.clearTimeout(p.A),p.A=null)}function zm(p){p.g=new Ua(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var R=Ba(p.qa);Lr(R,"RID","rpc"),Lr(R,"SID",p.K),Lr(R,"AID",p.T),Lr(R,"CI",p.F?"0":"1"),!p.F&&p.ja&&Lr(R,"TO",p.ja),Lr(R,"TYPE","xmlhttp"),qd(p,R),p.m&&p.o&&gf(R,p.m,p.o),p.L&&(p.g.I=p.L);var L=p.g;p=p.ia,L.L=1,L.v=Hd(Ba(R)),L.m=null,L.P=!0,Xy(L,p)}function rg(p){null!=p.C&&(w.clearTimeout(p.C),p.C=null)}function dv(p,R){var L=null;if(p.g==R){rg(p),ng(p),p.g=null;var W=2}else{if(!km(p.h,R))return;L=R.D,Qp(p.h,R),W=1}if(0!=p.G)if(R.o)if(1==W){L=R.m?R.m.length:0,R=Date.now()-R.F;var Se=p.B;Ii(W=uf(),new Qy(W,L)),eg(p)}else lv(p);else if(3==(Se=R.s)||0==Se&&0<R.X||!(1==W&&function UI(p,R){return!(ev(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=R.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=cf(oe(p.Ga,p,R),Gm(p,p.B)),p.B++,0)))}(p,R)||2==W&&tg(p)))switch(L&&0<L.length&&(R=p.h,R.i=R.i.concat(L)),Se){case 1:Ru(p,5);break;case 4:Ru(p,10);break;case 3:Ru(p,6);break;default:Ru(p,2)}}function Gm(p,R){let L=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(L*=2),L*R}function Ru(p,R){if(p.j.info("Error code "+R),2==R){var L=oe(p.fb,p),W=p.Xa;const Se=!W;W=new _c(W||"//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||Cl(W,"https"),Hd(W),Se?function OI(p,R){const L=new Dl;if(w.Image){const W=new Image;W.onload=Me(bu,L,"TestLoadImage: loaded",!0,R,W),W.onerror=Me(bu,L,"TestLoadImage: error",!1,R,W),W.onabort=Me(bu,L,"TestLoadImage: abort",!1,R,W),W.ontimeout=Me(bu,L,"TestLoadImage: timeout",!1,R,W),w.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=p}else R(!1)}(W.toString(),L):function av(p,R){new Dl;const W=new AbortController,Se=setTimeout(()=>{W.abort(),bu(0,0,!1,R)},1e4);fetch(p,{signal:W.signal}).then(He=>{clearTimeout(Se),bu(0,0,!!He.ok,R)}).catch(()=>{clearTimeout(Se),bu(0,0,!1,R)})}(W.toString(),L)}else vs(2);p.G=0,p.l&&p.l.sa(R),Wm(p),$m(p)}function Wm(p){if(p.G=0,p.ka=[],p.l){const R=Lm(p.h);(0!=R.length||0!=p.i.length)&&(st(p.ka,R),st(p.ka,p.i),p.h.i.length=0,ht(p.i),p.i.length=0),p.l.ra()}}function Km(p,R,L){var W=L instanceof _c?Ba(L):new _c(L);if(""!=W.g)R&&(W.g=R+"."+W.g),ea(W,W.s);else{var Se=w.location;W=Se.protocol,R=R?R+"."+Se.hostname:Se.hostname,Se=+Se.port;var He=new _c(null);W&&Cl(He,W),R&&(He.g=R),Se&&ea(He,Se),L&&(He.l=L),W=He}return R=p.ya,(L=p.D)&&R&&Lr(W,L,R),Lr(W,"VER",p.la),qd(p,W),W}function qm(p,R,L){if(R&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new fr(p.Ca&&!p.pa?new ff({eb:L}):p.pa)).Ha(p.J),R}function Qm(){}function vf(){}function Ms(p,R){Ui.call(this),this.g=new Jp(R),this.l=p,this.h=R&&R.messageUrlParams||null,p=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(p?p["X-WebChannel-Content-Type"]=R.messageContentType:p={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(p?p["X-WebChannel-Client-Profile"]=R.va:p={"X-WebChannel-Client-Profile":R.va}),this.g.S=p,(p=R&&R.Sb)&&!Ht(p)&&(this.g.m=p),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Ht(R)&&(this.g.D=R,null!==(p=this.h)&&R in p&&R in(p=this.h)&&delete p[R]),this.j=new Qd(this)}function Ym(p){Dm.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var R=p.__sm__;if(R){e:{for(const L in R){p=L;break e}p=void 0}(this.i=p)&&(p=this.i,R=null!==R&&p in R?R[p]:void 0),this.data=R}else this.data=p}function Xm(){Bp.call(this),this.status=1}function Qd(p){this.g=p}(a=fr.prototype).Ha=function(p){this.J=p},a.ea=function(p,R,L,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);R=R?R.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rm.g(),this.v=function Gy(p){return p.h||(p.h=p.i())}(this.o?this.o:Rm),this.g.onreadystatechange=oe(this.Ea,this);try{this.B=!0,this.g.open(R,String(p),!0),this.B=!1}catch(He){return void na(this,He)}if(p=L||"",L=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var Se in W)L.set(Se,W[Se]);else{if("function"!=typeof W.keys||"function"!=typeof W.get)throw Error("Unknown input type for opt_headers: "+String(W));for(const He of W.keys())L.set(He,W.get(He))}W=Array.from(L.keys()).find(He=>"content-type"==He.toLowerCase()),Se=w.FormData&&p instanceof w.FormData,!(0<=Array.prototype.indexOf.call(FI,R,void 0))||W||Se||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,Ct]of L)this.g.setRequestHeader(He,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jm(this),this.u=!0,this.g.send(p),this.u=!1}catch(He){na(this,He)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ii(this,"complete"),Ii(this,"abort"),mf(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mf(this,!0)),fr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?wo(this):this.bb())},a.bb=function(){wo(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Su(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var R=this.g.responseText;return p&&0==R.indexOf(p)&&(R=R.substring(p.length)),Vp(R)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Jp.prototype).la=8,a.G=1,a.connect=function(p,R,L,W){vs(0),this.W=p,this.H=R||{},L&&void 0!==W&&(this.H.OSID=L,this.H.OAID=W),this.F=this.X,this.I=Km(this,null,this.W),eg(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Se=new Ua(this,this.j,p);let He=this.o;if(this.S&&(He?(He=te(He),ye(He,this.S)):He=this.S),null!==this.m||this.O||(Se.H=He,He=null),this.P)e:{for(var R=0,L=0;L<this.i.length;L++){var W=this.i[L];if(void 0===(W="__data__"in W.map&&"string"==typeof(W=W.map.__data__)?W.length:void 0))break;if(4096<(R+=W)){R=L;break e}if(4096===R||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=yf(this,Se,R),Lr(L=Ba(this.I),"RID",p),Lr(L,"CVER",22),this.D&&Lr(L,"X-HTTP-Session-Id",this.D),qd(this,L),He&&(this.O?R="headers="+encodeURIComponent(String(Bm(He)))+"&"+R:this.m&&gf(L,this.m,He)),qp(this.h,Se),this.Ua&&Lr(L,"TYPE","init"),this.P?(Lr(L,"$req",R),Lr(L,"SID","null"),Se.T=!0,Mm(Se,L,null)):Mm(Se,L,R),this.G=2}}else 3==this.G&&(p?Hm(this,p):0==this.i.length||Zy(this.h)||Hm(this))},a.Fa=function(){if(this.u=null,zm(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=cf(oe(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vs(10),Zp(this),zm(this))},a.Za=function(){null!=this.C&&(this.C=null,Zp(this),tg(this),vs(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),vs(2)):(this.j.info("Failed to ping google.com"),vs(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=Qm.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},vf.prototype.g=function(p,R){return new Ms(p,R)},Je(Ms,Ui),Ms.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ms.prototype.close=function(){Sl(this.g)},Ms.prototype.o=function(p){var R=this.g;if("string"==typeof p){var L={};L.__data__=p,p=L}else this.u&&((L={}).__data__=af(p),p=L);R.i.push(new class{constructor(p,R){this.g=p,this.map=R}}(R.Ya++,p)),3==R.G&&eg(R)},Ms.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,Ms.aa.N.call(this)},Je(Ym,Dm),Je(Xm,Bp),Je(Qd,Qm),Qd.prototype.ua=function(){Ii(this.g,"a")},Qd.prototype.ta=function(p){Ii(this.g,new Ym(p))},Qd.prototype.sa=function(p){Ii(this.g,new Xm)},Qd.prototype.ra=function(){Ii(this.g,"b")},vf.prototype.createWebChannel=vf.prototype.g,Ms.prototype.send=Ms.prototype.o,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Kt=Nt.createWebChannelTransport=function(){return new vf},hn=Nt.getStatEventTarget=function(){return uf()},qt=Nt.Event=Al,Zn=Nt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lf.NO_ERROR=0,lf.TIMEOUT=8,lf.HTTP_ERROR=6,Fr=Nt.ErrorCode=lf,Yy.COMPLETE="complete",Ei=Nt.EventType=Yy,Wy.EventType=wl,wl.OPEN="a",wl.CLOSE="b",wl.ERROR="c",wl.MESSAGE="d",Ui.prototype.listen=Ui.prototype.K,Nr=Nt.WebChannel=Wy,Nt.FetchXmlHttpFactory=ff,fr.prototype.listenOnce=fr.prototype.L,fr.prototype.getLastError=fr.prototype.Ka,fr.prototype.getLastErrorCode=fr.prototype.Ba,fr.prototype.getStatus=fr.prototype.Z,fr.prototype.getResponseJson=fr.prototype.Oa,fr.prototype.getResponseText=fr.prototype.oa,fr.prototype.send=fr.prototype.ea,fr.prototype.setWithCredentials=fr.prototype.Ha,Er=Nt.XhrIo=fr}).apply(typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{});const pr="@firebase/firestore";class bn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let or="10.14.0";const dn=new Ut.Vy("@firebase/firestore");function yr(){return dn.logLevel}function Ce(a,...e){if(dn.logLevel<=Ut.$b.DEBUG){const r=e.map(ii);dn.debug(`Firestore (${or}): ${a}`,...r)}}function zn(a,...e){if(dn.logLevel<=Ut.$b.ERROR){const r=e.map(ii);dn.error(`Firestore (${or}): ${a}`,...r)}}function Wt(a,...e){if(dn.logLevel<=Ut.$b.WARN){const r=e.map(ii);dn.warn(`Firestore (${or}): ${a}`,...r)}}function ii(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function it(a="Unexpected state"){const e=`FIRESTORE (${or}) INTERNAL ASSERTION FAILED: `+a;throw zn(e),new Error(e)}function bt(a,e){a||it()}function ct(a,e){return a}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Mt.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class os{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class si{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(bn.UNAUTHENTICATED))}shutdown(){}}class Ti{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class $i{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;bt(void 0===this.o);let u=this.i;const d=O=>this.i!==u?(u=this.i,r(O)):Promise.resolve();let g=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Yn,e.enqueueRetryable(()=>d(this.currentUser))};const w=()=>{const O=g;e.enqueueRetryable((0,ue.A)(function*(){yield O.promise,yield d(s.currentUser)}))},S=O=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=O,this.o&&(this.auth.addAuthTokenListener(this.o),w())};this.t.onInit(O=>S(O)),setTimeout(()=>{if(!this.auth){const O=this.t.getImmediate({optional:!0});O?S(O):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Yn)}},0),w()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt("string"==typeof s.accessToken),new os(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new bn(e)}}class Hi{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ke{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Hi(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){bt(void 0===this.o);const s=d=>{null!=d.error&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.R;return this.R=d.token,Ce("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?r(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const u=d=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(bt("string"==typeof r.token),this.R=r.token,new z(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function re(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class se{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=re(40);for(let d=0;d<u.length;++d)s.length<20&&u[d]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return s}}function Re(a,e){return a<e?-1:a>e?1:0}function dt(a,e,r){return a.length===e.length&&a.every((s,u)=>r(s,e[u]))}function jt(a){return a+"\0"}class vt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new vt(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new vt(0,0))}static max(){return new mt(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Un{constructor(e,r,s){void 0===r?r=0:r>e.length&&it(),void 0===s?s=e.length-r:s>e.length-r&&it(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Un.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Un?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let u=0;u<s;u++){const d=e.get(u),g=r.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class wt extends Un{construct(e,r,s){return new wt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new Xe(xe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new wt(r)}static emptyPath(){return new wt([])}}const oi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Un{construct(e,r,s){return new kn(e,r,s)}static isValidIdentifier(e){return oi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const r=[];let s="",u=0;const d=()=>{if(0===s.length)throw new Xe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let g=!1;for(;u<e.length;){const w=e[u];if("\\"===w){if(u+1===e.length)throw new Xe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new Xe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,u+=2}else"`"===w?(g=!g,u++):"."!==w||g?(s+=w,u++):(d(),u++)}if(d(),g)throw new Xe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(r)}static emptyPath(){return new kn([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(wt.fromString(e))}static fromName(e){return new It(wt.fromString(e).popFirst(5))}static empty(){return new It(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new wt(e.slice()))}}class Cr{constructor(e,r,s,u){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=u}}function ui(a){return a.fields.find(e=>2===e.kind)}function Hr(a){return a.fields.filter(e=>2!==e.kind)}Cr.UNKNOWN_ID=-1;class rn{constructor(e,r){this.fieldPath=e,this.kind=r}}class Fe{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Fe(0,ft.min())}}function Ie(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=mt.fromTimestamp(1e9===s?new vt(r+1,0):new vt(r,s));return new ft(u,It.empty(),e)}function qe(a){return new ft(a.readTime,a.key,-1)}class ft{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new ft(mt.min(),It.empty(),-1)}static max(){return new ft(mt.max(),It.empty(),-1)}}function $t(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=It.comparator(a.documentKey,e.documentKey),0!==r?r:Re(a.largestBatchId,e.largestBatchId))}const nn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Cn(a){return er.apply(this,arguments)}function er(){return(er=(0,ue.A)(function*(a){if(a.code!==xe.FAILED_PRECONDITION||a.message!==nn)throw a;Ce("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new me((s,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(s,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof me?r:me.resolve(r)}catch(r){return me.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):me.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):me.reject(r)}static resolve(e){return new me((r,s)=>{r(e)})}static reject(e){return new me((r,s)=>{s(e)})}static waitFor(e){return new me((r,s)=>{let u=0,d=0,g=!1;e.forEach(w=>{++u,w.next(()=>{++d,g&&d===u&&r()},S=>s(S))}),g=!0,d===u&&r()})}static or(e){let r=me.resolve(!1);for(const s of e)r=r.next(u=>u?me.resolve(u):s());return r}static forEach(e,r){const s=[];return e.forEach((u,d)=>{s.push(r.call(this,u,d))}),this.waitFor(s)}static mapArray(e,r){return new me((s,u)=>{const d=e.length,g=new Array(d);let w=0;for(let S=0;S<d;S++){const O=S;r(e[O]).next(j=>{g[O]=j,++w,w===d&&s(g)},j=>u(j))}})}static doWhile(e,r){return new me((s,u)=>{const d=()=>{!0===e()?r().next(()=>{d()},u):s()};d()})}}class vn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Gi(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=_i(s.target.error);this.V.reject(new Gi(e,u))}}static open(e,r,s,u){try{return new vn(r,e.transaction(u,s))}catch(d){throw new Gi(r,d)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ia(r)}}class Xr{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===Xr.S((0,Mt.ZQ)())&&zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ce("SimpleDb","Removing database:",e),br(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Mt.zW)())return!1;if(Xr.v())return!0;const e=(0,Mt.ZQ)(),r=Xr.S(e),s=0<r&&r<10,u=zi(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,ue.A)(function*(){return r.db||(Ce("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{u(new Gi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const w=g.target.error;u("VersionError"===w.name?new Xe(xe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new Xe(xe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new Gi(e,w))},d.onupgradeneeded=g=>{Ce("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.p.O(g.target.result,d.transaction,g.oldVersion,r.version).next(()=>{Ce("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,u){var d=this;return(0,ue.A)(function*(){const g="readonly"===r;let w=0;for(;;){++w;try{d.db=yield d.M(e);const S=vn.open(d.db,e,g?"readonly":"readwrite",s),O=u(S).next(j=>(S.g(),j)).catch(j=>(S.abort(j),me.reject(j))).toPromise();return O.catch(()=>{}),yield S.m,O}catch(S){const O=S,j="FirebaseError"!==O.name&&w<3;if(Ce("SimpleDb","Transaction failed with error:",O.message,"Retrying:",j),d.close(),!j)return Promise.reject(O)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function zi(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Pu{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return br(this.B.delete())}}class Gi extends Xe{constructor(e,r){super(xe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function us(a){return"IndexedDbTransactionError"===a.name}class ia{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(Ce("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(Ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),br(s)}add(e){return Ce("SimpleDb","ADD",this.store.name,e,e),br(this.store.add(e))}get(e){return br(this.store.get(e)).next(r=>(void 0===r&&(r=null),Ce("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ce("SimpleDb","DELETE",this.store.name,e),br(this.store.delete(e))}count(){return Ce("SimpleDb","COUNT",this.store.name),br(this.store.count())}U(e,r){const s=this.options(e,r),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(s.range);return new me((g,w)=>{d.onerror=S=>{w(S.target.error)},d.onsuccess=S=>{g(S.target.result)}})}{const d=this.cursor(s),g=[];return this.W(d,(w,S)=>{g.push(S)}).next(()=>g)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new me((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}j(e,r){Ce("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const u=this.cursor(s);return this.W(u,(d,g,w)=>w.delete())}J(e,r){let s;r?s=e:(s={},r=e);const u=this.cursor(s);return this.W(u,r)}Y(e){const r=this.cursor({});return new me((s,u)=>{r.onerror=d=>{const g=_i(d.target.error);u(g)},r.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(w=>{w?g.continue():s()}):s()}})}W(e,r){const s=[];return new me((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const w=g.target.result;if(!w)return void u();const S=new Pu(w),O=r(w.primaryKey,w.value,S);if(O instanceof me){const j=O.catch(K=>(S.done(),me.reject(K)));s.push(j)}S.isDone?u():null===S.K?w.continue():w.continue(S.K)}}).next(()=>me.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function br(a){return new me((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const u=_i(s.target.error);r(u)}})}let Ns=!1;function _i(a){const e=Xr.S((0,Mt.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ns||(Ns=!0,setTimeout(()=>{throw s},0)),s}}return a}class ja{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;Ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.A)(function*(){r.task=null;try{Ce("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){us(s)?Ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Cn(s)}yield r.X(6e4)}))}}class Wi{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,ue.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let u=r,d=!0;return me.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return Ce("IndexBackfiller",`Processing collection: ${g}`),this.ne(e,g,u).next(w=>{u-=w,s.add(g)});d=!1})).next(()=>r-u)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.re(u,d)).next(w=>(Ce("IndexBackfiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,r,w))).next(()=>g.size)}))}re(e,r){let s=e;return r.changes.forEach((u,d)=>{const g=qe(d);$t(g,s)>0&&(s=g)}),new ft(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let zr=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function Pi(a){return null==a}function wi(a){return 0===a&&1/a==-1/0}function sa(a){return"number"==typeof a&&Number.isInteger(a)&&!wi(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function ar(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=Ha(e)),e=$a(a.get(r),e);return Ha(e)}function $a(a,e){let r=e;const s=a.length;for(let u=0;u<s;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function Ha(a){return a+"\x01\x01"}function Ki(a){const e=a.length;if(bt(e>=2),2===e)return bt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),wt.emptyPath();const r=e-2,s=[];let u="";for(let d=0;d<e;){const g=a.indexOf("\x01",d);switch((g<0||g>r)&&it(),a.charAt(g+1)){case"\x01":const w=a.substring(d,g);let S;0===u.length?S=w:(u+=w,S=u,u=""),s.push(S);break;case"\x10":u+=a.substring(d,g),u+="\0";break;case"\x11":u+=a.substring(d,g+1);break;default:it()}d=g+2}return new wt(s)}const za=["userId","batchId"];function So(a,e){return[a,ar(e)]}function oa(a,e,r){return[a,ar(e),r]}const Mu={},Nu=["prefixPath","collectionGroup","readTime","documentId"],xs=["prefixPath","collectionGroup","documentId"],aa=["collectionGroup","readTime","prefixPath","documentId"],wn=["canonicalId","targetId"],Or=["targetId","path"],Jr=["path","targetId"],to=["collectionId","parent"],kr=["indexId","uid"],Ga=["uid","sequenceNumber"],no=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ro=["indexId","uid","orderedDocumentKey"],Mi=["userId","collectionPath","documentId"],qi=["userId","collectionPath","largestBatchId"],dr=["userId","collectionGroup","largestBatchId"],At=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cn=[...At,"documentOverlays"],Bn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gr=Bn,io=[...Gr,"indexConfiguration","indexState","indexEntries"],Sr=io,Os=[...io,"globals"];class tr extends fn{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function sr(a,e){const r=ct(a);return Xr.F(r._e,e)}function Ni(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function Gt(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function ks(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class mn{constructor(e,r){this.comparator=e,this.root=r||Rr.EMPTY}insert(e,r){return new mn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}}class ur{constructor(e,r,s,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=r?s(e.key,r):1,r&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,r,s,u,d){this.key=e,this.value=r,this.color=s??Rr.RED,this.left=u??Rr.EMPTY,this.right=d??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,u,d){return new Rr(e??this.key,r??this.value,s??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let u=this;const d=s(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,r,s),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Rr.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(e,r,s,u,d){return this}insert(e,r,s){return new Rr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new xi(this.data.getIterator())}getIteratorFrom(e){return new xi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new sn(this.comparator);return r.data=e,r}}class xi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ai(a){return a.hasNext()?a.getNext():void 0}class Zr{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Zr([])}unionWith(e){let r=new sn(kn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Zr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return dt(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class Di extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Di("Invalid base64 string: "+d):d}}(e);return new qn(r)}static fromUint8Array(e){const r=function(u){let d="";for(let g=0;g<u.length;++g)d+=String.fromCharCode(u[g]);return d}(e);return new qn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const Ro=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(a){if(bt(!!a),"string"==typeof a){let e=0;const r=Ro.exec(a);if(bt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:hr(a.seconds),nanos:hr(a.nanos)}}function hr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function ei(a){return"string"==typeof a?qn.fromBase64String(a):qn.fromUint8Array(a)}function Ls(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ci(a){const e=a.mapValue.fields.__previous_value__;return Ls(e)?Ci(e):e}function Qi(a){const e=on(a.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class Po{constructor(e,r,s,u,d,g,w,S,O){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=S,this.useFetchStreams=O}}class yi{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new yi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yi&&e.projectId===this.projectId&&e.database===this.database}}const Gn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fs={nullValue:"NULL_VALUE"};function nr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ls(a)?4:vc(a)?9007199254740991:Wn(a)?10:11:it()}function Sn(a,e){if(a===e)return!0;const r=nr(a);if(r!==nr(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Qi(a).isEqual(Qi(e));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const g=on(u.timestampValue),w=on(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return d=e,ei(a.bytesValue).isEqual(ei(d.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,d){return hr(u.geoPointValue.latitude)===hr(d.geoPointValue.latitude)&&hr(u.geoPointValue.longitude)===hr(d.geoPointValue.longitude)}(a,e);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return hr(u.integerValue)===hr(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const g=hr(u.doubleValue),w=hr(d.doubleValue);return g===w?wi(g)===wi(w):isNaN(g)&&isNaN(w)}return!1}(a,e);case 9:return dt(a.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(u,d){const g=u.mapValue.fields||{},w=d.mapValue.fields||{};if(Ni(g)!==Ni(w))return!1;for(const S in g)if(g.hasOwnProperty(S)&&(void 0===w[S]||!Sn(g[S],w[S])))return!1;return!0}(a,e);default:return it()}var d}function Is(a,e){return void 0!==(a.values||[]).find(r=>Sn(r,e))}function Vr(a,e){if(a===e)return 0;const r=nr(a),s=nr(e);if(r!==s)return Re(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return Re(a.booleanValue,e.booleanValue);case 2:return function(d,g){const w=hr(d.integerValue||d.doubleValue),S=hr(g.integerValue||g.doubleValue);return w<S?-1:w>S?1:w===S?0:isNaN(w)?isNaN(S)?0:-1:1}(a,e);case 3:return Wa(a.timestampValue,e.timestampValue);case 4:return Wa(Qi(a),Qi(e));case 5:return Re(a.stringValue,e.stringValue);case 6:return function(d,g){const w=ei(d),S=ei(g);return w.compareTo(S)}(a.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),S=g.split("/");for(let O=0;O<w.length&&O<S.length;O++){const j=Re(w[O],S[O]);if(0!==j)return j}return Re(w.length,S.length)}(a.referenceValue,e.referenceValue);case 8:return function(d,g){const w=Re(hr(d.latitude),hr(g.latitude));return 0!==w?w:Re(hr(d.longitude),hr(g.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return Wr(a.arrayValue,e.arrayValue);case 10:return function(d,g){var w,S,O,j;const Me=null===(w=(d.fields||{}).value)||void 0===w?void 0:w.arrayValue,Je=null===(S=(g.fields||{}).value)||void 0===S?void 0:S.arrayValue,ht=Re((null===(O=Me?.values)||void 0===O?void 0:O.length)||0,(null===(j=Je?.values)||void 0===j?void 0:j.length)||0);return 0!==ht?ht:Wr(Me,Je)}(a.mapValue,e.mapValue);case 11:return function(d,g){if(d===Gn.mapValue&&g===Gn.mapValue)return 0;if(d===Gn.mapValue)return 1;if(g===Gn.mapValue)return-1;const w=d.fields||{},S=Object.keys(w),O=g.fields||{},j=Object.keys(O);S.sort(),j.sort();for(let K=0;K<S.length&&K<j.length;++K){const oe=Re(S[K],j[K]);if(0!==oe)return oe;const Me=Vr(w[S[K]],O[j[K]]);if(0!==Me)return Me}return Re(S.length,j.length)}(a.mapValue,e.mapValue);default:throw it()}}function Wa(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return Re(a,e);const r=on(a),s=on(e),u=Re(r.seconds,s.seconds);return 0!==u?u:Re(r.nanos,s.nanos)}function Wr(a,e){const r=a.values||[],s=e.values||[];for(let u=0;u<r.length&&u<s.length;++u){const d=Vr(r[u],s[u]);if(d)return d}return Re(r.length,s.length)}function Es(a){return Vs(a)}function Vs(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=on(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?ei(a.bytesValue).toBase64():"referenceValue"in a?It.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Vs(d);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of s)d?d=!1:u+=",",u+=`${g}:${Vs(r.fields[g])}`;return u+"}"}(a.mapValue):it()}function so(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Mo(a){return!!a&&"integerValue"in a}function Tr(a){return!!a&&"arrayValue"in a}function oo(a){return!!a&&"nullValue"in a}function Pl(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function ua(a){return!!a&&"mapValue"in a}function Wn(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ts(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Gt(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=Ts(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ts(a.arrayValue.values[r]);return e}return Object.assign({},a)}function vc(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Ml={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ic(a){return"nullValue"in a?Fs:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?so(yi.empty(),It.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Wn(a)?Ml:{mapValue:{}}:it()}function Ec(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?so(yi.empty(),It.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Ml:"mapValue"in a?Wn(a)?{mapValue:{}}:Gn:it()}function xu(a,e){const r=Vr(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function Ka(a,e){const r=Vr(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!ua(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ts(r)}setAll(e){let r=kn.emptyPath(),s={},u=[];e.forEach((g,w)=>{if(!r.isImmediateParentOf(w)){const S=this.getFieldsMap(r);this.applyChanges(S,s,u),s={},u=[],r=w.popLast()}g?s[w.lastSegment()]=Ts(g):u.push(w.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,s,u)}delete(e){const r=this.field(e.popLast());ua(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=r.mapValue.fields[e.get(s)];ua(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,s){Gt(r,(u,d)=>e[u]=d);for(const u of s)delete e[u]}clone(){return new Kr(Ts(this.value))}}function qa(a){const e=[];return Gt(a.fields,(r,s)=>{const u=new kn([r]);if(ua(s)){const d=qa(s.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new Zr(e)}class rr{constructor(e,r,s,u,d,g,w){this.key=e,this.documentType=r,this.version=s,this.readTime=u,this.createTime=d,this.data=g,this.documentState=w}static newInvalidDocument(e){return new rr(e,0,mt.min(),mt.min(),mt.min(),Kr.empty(),0)}static newFoundDocument(e,r,s,u){return new rr(e,1,r,mt.min(),s,u,0)}static newNoDocument(e,r){return new rr(e,2,r,mt.min(),mt.min(),Kr.empty(),0)}static newUnknownDocument(e,r){return new rr(e,3,r,mt.min(),mt.min(),Kr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yi{constructor(e,r){this.position=e,this.inclusive=r}}function ds(a,e,r){let s=0;for(let u=0;u<a.position.length;u++){const d=e[u],g=a.position[u];if(s=d.field.isKeyField()?It.comparator(It.fromName(g.referenceValue),r.key):Vr(g,r.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function ca(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!Sn(a.position[r],e.position[r]))return!1;return!0}class vi{constructor(e,r="asc"){this.field=e,this.dir=r}}function Oi(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Bs{}class Rn extends Bs{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new xo(e,r,s):"array-contains"===r?new Ya(e,s):"in"===r?new uo(e,s):"not-in"===r?new js(e,s):"array-contains-any"===r?new As(e,s):new Rn(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new la(e,s):new Tc(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(Vr(r,this.value)):null!==r&&nr(this.value)===nr(r)&&this.matchesComparison(Vr(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Bs{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new an(e,r)}matches(e){return Xi(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xi(a){return"and"===a.op}function qr(a){return"or"===a.op}function Qa(a){return No(a)&&Xi(a)}function No(a){for(const e of a.filters)if(e instanceof an)return!1;return!0}function ws(a){if(a instanceof Rn)return a.field.canonicalString()+a.op.toString()+Es(a.value);if(Qa(a))return a.filters.map(e=>ws(e)).join(",");{const e=a.filters.map(r=>ws(r)).join(",");return`${a.op}(${e})`}}function hs(a,e){return a instanceof Rn?(s=a,(u=e)instanceof Rn&&s.op===u.op&&s.field.isEqual(u.field)&&Sn(s.value,u.value)):a instanceof an?function(s,u){return u instanceof an&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((d,g,w)=>d&&hs(g,u.filters[w]),!0)}(a,e):void it();var s,u}function ao(a,e){const r=a.filters.concat(e);return an.create(r,a.op)}function Ji(a){return a instanceof Rn?`${(r=a).field.canonicalString()} ${r.op} ${Es(r.value)}`:a instanceof an?function(r){return r.op.toString()+" {"+r.getFilters().map(Ji).join(" ,")+"}"}(a):"Filter";var r}class xo extends Rn{constructor(e,r,s){super(e,r,s),this.key=It.fromName(s.referenceValue)}matches(e){const r=It.comparator(e.key,this.key);return this.matchesComparison(r)}}class la extends Rn{constructor(e,r){super(e,"in",r),this.keys=da(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Tc extends Rn{constructor(e,r){super(e,"not-in",r),this.keys=da(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function da(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>It.fromName(s.referenceValue))}class Ya extends Rn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Tr(r)&&Is(r.arrayValue,this.value)}}class uo extends Rn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Is(this.value.arrayValue,r)}}class js extends Rn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Is(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Is(this.value.arrayValue,r)}}class As extends Rn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Tr(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>Is(this.value.arrayValue,s))}}class Xa{constructor(e,r=null,s=[],u=[],d=null,g=null,w=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=d,this.startAt=g,this.endAt=w,this.ue=null}}function ha(a,e=null,r=[],s=[],u=null,d=null,g=null){return new Xa(a,e,r,s,u,d,g)}function Oo(a){const e=ct(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>ws(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),Pi(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Es(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Es(s)).join(",")),e.ue=r}return e.ue}function ko(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Oi(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!hs(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!ca(a.startAt,e.startAt)&&ca(a.endAt,e.endAt)}function co(a){return It.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Lo(a,e){return a.filters.filter(r=>r instanceof Rn&&r.field.isEqual(e))}function Nl(a,e,r){let s=Fs,u=!0;for(const d of Lo(a,e)){let g=Fs,w=!0;switch(d.op){case"<":case"<=":g=Ic(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,w=!1;break;case"!=":case"not-in":g=Fs}xu({value:s,inclusive:u},{value:g,inclusive:w})<0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];xu({value:s,inclusive:u},{value:g,inclusive:r.inclusive})<0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}function Ou(a,e,r){let s=Gn,u=!0;for(const d of Lo(a,e)){let g=Gn,w=!0;switch(d.op){case">=":case">":g=Ec(d.value),w=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,w=!1;break;case"!=":case"not-in":g=Gn}Ka({value:s,inclusive:u},{value:g,inclusive:w})>0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];Ka({value:s,inclusive:u},{value:g,inclusive:r.inclusive})>0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}class bi{constructor(e,r=null,s=[],u=[],d=null,g="F",w=null,S=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=d,this.limitType=g,this.startAt=w,this.endAt=S,this.ce=null,this.le=null,this.he=null}}function wc(a,e,r,s,u,d,g,w){return new bi(a,e,r,s,u,d,g,w)}function $s(a){return new bi(a)}function Ja(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function fa(a){return null!==a.collectionGroup}function Ds(a){const e=ct(a);if(null===e.ce){e.ce=[];const r=new Set;for(const d of e.explicitOrderBy)e.ce.push(d),r.add(d.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new sn(kn.comparator);return g.filters.forEach(S=>{S.getFlattenedFilters().forEach(O=>{O.isInequality()&&(w=w.add(O.field))})}),w})(e).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||e.ce.push(new vi(d,s))}),r.has(kn.keyField().canonicalString())||e.ce.push(new vi(kn.keyField(),s))}return e.ce}function A(a){const e=ct(a);return e.le||(e.le=function P(a,e){if("F"===a.limitType)return ha(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(u=>new vi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new Yi(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Yi(a.startAt.position,a.startAt.inclusive):null;return ha(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,Ds(a))),e.le}function F(a,e){const r=a.filters.concat([e]);return new bi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function ee(a,e,r){return new bi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function Oe(a,e){return ko(A(a),A(e))&&a.limitType===e.limitType}function nt(a){return`${Oo(A(a))}|lt:${a.limitType}`}function St(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>Ji(u)).join(", ")}]`),Pi(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>Es(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>Es(u)).join(",")),`Target(${s})`}(A(a))}; limitType=${a.limitType})`}function Ln(a,e){return e.isFoundDocument()&&function(s,u){const d=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(d):It.isDocumentKey(s.path)?s.path.isEqual(d):s.path.isImmediateParentOf(d)}(a,e)&&function(s,u){for(const d of Ds(s))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,e)&&function(s,u){for(const d of s.filters)if(!d.matches(u))return!1;return!0}(a,e)&&(u=e,!((s=a).startAt&&!function(g,w,S){const O=ds(g,w,S);return g.inclusive?O<=0:O<0}(s.startAt,Ds(s),u)||s.endAt&&!function(g,w,S){const O=ds(g,w,S);return g.inclusive?O>=0:O>0}(s.endAt,Ds(s),u)));var s,u}function Mn(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Fn(a){return(e,r)=>{let s=!1;for(const u of Ds(a)){const d=_n(u,e,r);if(0!==d)return d;s=s||u.field.isKeyField()}return 0}}function _n(a,e,r){const s=a.field.isKeyField()?It.comparator(e.key,r.key):function(d,g,w){const S=g.data.field(d),O=w.data.field(d);return null!==S&&null!==O?Vr(S,O):it()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return it()}}class Kn{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[u,d]of s)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Gt(this.inner,(r,s)=>{for(const[u,d]of s)e(u,d)})}isEmpty(){return ks(this.inner)}size(){return this.innerSize}}const Xn=new mn(It.comparator);function Nn(){return Xn}const ti=new mn(It.comparator);function ni(...a){let e=ti;for(const r of a)e=e.insert(r.key,r);return e}function Hs(a){let e=ti;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function vr(){return Pr()}function Cs(){return Pr()}function Pr(){return new Kn(a=>a.toString(),(a,e)=>a.isEqual(e))}const Zi=new mn(It.comparator),Jd=new sn(It.comparator);function Lt(...a){let e=Jd;for(const r of a)e=e.add(r);return e}const pa=new sn(Re);function zs(){return pa}function ci(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wi(e)?"-0":e}}function xl(a){return{integerValue:""+a}}function Ol(a,e){return sa(e)?xl(e):ci(a,e)}class lo{constructor(){this._=void 0}}function wr(a,e,r){return a instanceof Fo?function(u,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&Ls(d)&&(d=Ci(d)),d&&(g.fields.__previous_value__=d),{mapValue:g}}(r,e):a instanceof li?Gs(a,e):a instanceof bs?Ll(a,e):function(u,d){const g=kl(u,d),w=Ac(g)+Ac(u.Pe);return Mo(g)&&Mo(u.Pe)?xl(w):ci(u.serializer,w)}(a,e)}function wf(a,e,r){return a instanceof li?Gs(a,e):a instanceof bs?Ll(a,e):r}function kl(a,e){return a instanceof ga?Mo(s=e)||(d=s)&&"doubleValue"in d?e:{integerValue:0}:null;var s,d}class Fo extends lo{}class li extends lo{constructor(e){super(),this.elements=e}}function Gs(a,e){const r=Dc(e);for(const s of a.elements)r.some(u=>Sn(u,s))||r.push(s);return{arrayValue:{values:r}}}class bs extends lo{constructor(e){super(),this.elements=e}}function Ll(a,e){let r=Dc(e);for(const s of a.elements)r=r.filter(u=>!Sn(u,s));return{arrayValue:{values:r}}}class ga extends lo{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Ac(a){return hr(a.integerValue||a.doubleValue)}function Dc(a){return Tr(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Qt{constructor(e,r){this.field=e,this.transform=r}}class Cc{constructor(e,r){this.version=e,this.transformResults=r}}class jn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class ma{}function bc(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new ya(a.key,jn.none()):new eu(a.key,a.data,jn.none());{const r=a.data,s=Kr.empty();let u=new sn(kn.comparator);for(let d of e.fields)if(!u.has(d)){let g=r.field(d);null===g&&d.length>1&&(d=d.popLast(),g=r.field(d)),null===g?s.delete(d):s.set(d,g),u=u.add(d)}return new di(a.key,s,new Zr(u.toArray()),jn.none())}}function Za(a,e,r){a instanceof eu?function(u,d,g){const w=u.value.clone(),S=xn(u.fieldTransforms,d,g.transformResults);w.setAll(S),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(a,e,r):a instanceof di?function(u,d,g){if(!ku(u.precondition,d))return void d.convertToUnknownDocument(g.version);const w=xn(u.fieldTransforms,d,g.transformResults),S=d.data;S.setAll(ot(u)),S.setAll(w),d.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function _a(a,e,r,s){return a instanceof eu?function(d,g,w,S){if(!ku(d.precondition,g))return w;const O=d.value.clone(),j=Uo(d.fieldTransforms,S,g);return O.setAll(j),g.convertToFoundDocument(g.version,O).setHasLocalMutations(),null}(a,e,r,s):a instanceof di?function(d,g,w,S){if(!ku(d.precondition,g))return w;const O=Uo(d.fieldTransforms,S,g),j=g.data;return j.setAll(ot(d)),j.setAll(O),g.convertToFoundDocument(g.version,j).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(K=>K.field))}(a,e,r,s):(w=r,ku(a.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function eh(a,e){let r=null;for(const s of a.fieldTransforms){const u=e.data.field(s.field),d=kl(s.transform,u||null);null!=d&&(null===r&&(r=Kr.empty()),r.set(s.field,d))}return r||null}function Vo(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===u||s&&u&&dt(s,u,(d,g)=>function Zd(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(s=a.transform)instanceof li&&u instanceof li||s instanceof bs&&u instanceof bs?dt(s.elements,u.elements,Sn):s instanceof ga&&u instanceof ga?Sn(s.Pe,u.Pe):s instanceof Fo&&u instanceof Fo);var s,u}(d,g))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,u}class eu extends ma{constructor(e,r,s,u=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class di extends ma{constructor(e,r,s,u,d=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function ot(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function xn(a,e,r){const s=new Map;bt(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],g=d.transform,w=e.data.field(d.field);s.set(d.field,wf(g,w,r[u]))}return s}function Uo(a,e,r){const s=new Map;for(const u of a){const d=u.transform,g=r.data.field(u.field);s.set(u.field,wr(d,g,e))}return s}class ya extends ma{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pn extends ma{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sc{constructor(e,r,s,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Za(d,e,s[u])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=_a(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=_a(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Cs();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let w=this.applyToLocalView(g,d.mutatedFields);w=r.has(u.key)?null:w;const S=bc(g,w);null!==S&&s.set(u.key,S),g.isValidDocument()||g.convertToNoDocument(mt.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Lt())}isEqual(e){return this.batchId===e.batchId&&dt(this.mutations,e.mutations,(r,s)=>Vo(r,s))&&dt(this.baseMutations,e.baseMutations,(r,s)=>Vo(r,s))}}class Ws{constructor(e,r,s,u){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(e,r,s){bt(e.mutations.length===s.length);let u=Zi;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,s[g].version);return new Ws(e,r,s,u)}}class fs{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rc{constructor(e,r){this.count=e,this.unchangedNames=r}}var Ur,$n;function Pc(a){switch(a){default:return it();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function Qr(a){if(void 0===a)return zn("GRPC error has no .code"),xe.UNKNOWN;switch(a){case Ur.OK:return xe.OK;case Ur.CANCELLED:return xe.CANCELLED;case Ur.UNKNOWN:return xe.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return xe.INTERNAL;case Ur.UNAVAILABLE:return xe.UNAVAILABLE;case Ur.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Ur.NOT_FOUND:return xe.NOT_FOUND;case Ur.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Ur.ABORTED:return xe.ABORTED;case Ur.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Ur.DATA_LOSS:return xe.DATA_LOSS;default:return it()}}($n=Ur||(Ur={}))[$n.OK=0]="OK",$n[$n.CANCELLED=1]="CANCELLED",$n[$n.UNKNOWN=2]="UNKNOWN",$n[$n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$n[$n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$n[$n.NOT_FOUND=5]="NOT_FOUND",$n[$n.ALREADY_EXISTS=6]="ALREADY_EXISTS",$n[$n.PERMISSION_DENIED=7]="PERMISSION_DENIED",$n[$n.UNAUTHENTICATED=16]="UNAUTHENTICATED",$n[$n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$n[$n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$n[$n.ABORTED=10]="ABORTED",$n[$n.OUT_OF_RANGE=11]="OUT_OF_RANGE",$n[$n.UNIMPLEMENTED=12]="UNIMPLEMENTED",$n[$n.INTERNAL=13]="INTERNAL",$n[$n.UNAVAILABLE=14]="UNAVAILABLE",$n[$n.DATA_LOSS=15]="DATA_LOSS";function jo(){return new TextEncoder}const Ks=new gn([4294967295,4294967295],0);function ps(a){const e=jo().encode(a),r=new ir;return r.update(e),new Uint8Array(r.digest())}function Lu(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new gn([r,s],0),new gn([u,d],0)]}class Fu{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new va(`Invalid padding: ${r}`);if(s<0)throw new va(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new va(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new va(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=gn.fromNumber(this.Ie)}Ee(e,r,s){let u=e.add(r.multiply(gn.fromNumber(s)));return 1===u.compare(Ks)&&(u=new gn([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=ps(e),[s,u]=Lu(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);if(!this.de(g))return!1}return!0}static create(e,r,s){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new Fu(d,u,r);return s.forEach(w=>g.insert(w)),g}insert(e){if(0===this.Ie)return;const r=ps(e),[s,u]=Lu(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);this.Ae(g)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vu{constructor(e,r,s,u,d){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const u=new Map;return u.set(e,ho.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new Vu(mt.min(),u,new mn(Re),Nn(),Lt())}}class ho{constructor(e,r,s,u,d){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ho(s,r,Lt(),Lt(),Lt())}}class Ia{constructor(e,r,s,u){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=u}}class Fl{constructor(e,r){this.targetId=e,this.me=r}}class E{constructor(e,r,s=qn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=u}}class D{constructor(){this.fe=0,this.ge=N(),this.pe=qn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Lt(),r=Lt(),s=Lt();return this.ge.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:it()}}),new ho(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=N()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class v{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nn(),this.qe=b(),this.Qe=new mn(Re)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:it()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,s=e.me.count,u=this.Je(r);if(u){const d=u.target;if(co(d))if(0===s){const g=new It(d.path);this.Ue(r,g,rr.newNoDocument(g,mt.min()))}else bt(1===s);else{const g=this.Ye(r);if(g!==s){const w=this.Ze(e),S=w?this.Xe(w,e,g):1;0!==S&&(this.je(r),this.Qe=this.Qe.insert(r,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let g,w;try{g=ei(s).toUint8Array()}catch(S){if(S instanceof Di)return Wt("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{w=new Fu(g,u,d)}catch(S){return Wt(S instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===w.Ie?null:w}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let u=0;return s.forEach(d=>{const g=this.Le.tt(),w=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;e.mightContain(w)||(this.Ue(r,d,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((d,g)=>{const w=this.Je(g);if(w){if(d.current&&co(w.target)){const S=new It(w.target.path);null!==this.ke.get(S)||this.it(g,S)||this.Ue(g,S,rr.newNoDocument(S,e))}d.be&&(r.set(g,d.ve()),d.Ce())}});let s=Lt();this.qe.forEach((d,g)=>{let w=!0;g.forEachWhile(S=>{const O=this.Je(S);return!O||"TargetPurposeLimboResolution"===O.purpose||(w=!1,!1)}),w&&(s=s.add(d))}),this.ke.forEach((d,g)=>g.setReadTime(e));const u=new Vu(e,r,this.Qe,this.ke,s);return this.ke=Nn(),this.qe=b(),this.Qe=new mn(Re),u}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new D,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new sn(Re),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||Ce("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new D),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function b(){return new mn(It.comparator)}function N(){return new mn(It.comparator)}const G={asc:"ASCENDING",desc:"DESCENDING"},J={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ue={and:"AND",or:"OR"};class Pe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Dt(a,e){return a.useProto3Json||Pi(e)?e:{value:e}}function un(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function In(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function En(a,e){return un(a,e.toTimestamp())}function Jt(a){return bt(!!a),mt.fromTimestamp(function(r){const s=on(r);return new vt(s.seconds,s.nanos)}(a))}function $o(a,e){return Ho(a,e).canonicalString()}function Ho(a,e){const r=(u=a,new wt(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function Uu(a){const e=wt.fromString(a);return bt(Hu(e)),e}function gs(a,e){return $o(a.databaseId,e.path)}function ms(a,e){const r=Uu(e);if(r.get(1)!==a.databaseId.projectId)throw new Xe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Xe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new It(Af(r))}function th(a,e){return $o(a.databaseId,e)}function Mc(a){const e=Uu(a);return 4===e.length?wt.emptyPath():Af(e)}function Ss(a){return new wt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Af(a){return bt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function tu(a,e,r){return{name:gs(a,e),fields:r.value.mapValue.fields}}function Nc(a,e,r){const s=ms(a,e.name),u=Jt(e.updateTime),d=e.createTime?Jt(e.createTime):mt.min(),g=new Kr({mapValue:{fields:e.fields}}),w=rr.newFoundDocument(s,u,d,g);return r&&w.setHasCommittedMutations(),r?w.setHasCommittedMutations():w}function Ea(a,e){let r;if(e instanceof eu)r={update:tu(a,e.key,e.value)};else if(e instanceof ya)r={delete:gs(a,e.key)};else if(e instanceof di)r={update:tu(a,e.key,e.data),updateMask:ih(e.fieldMask)};else{if(!(e instanceof Pn))return it();r={verify:gs(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof Fo)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof li)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof bs)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof ga)return{fieldPath:g.field.canonicalString(),increment:w.Pe};throw it()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:En(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:it()),r;var d}function nu(a,e){const r=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?jn.updateTime(Jt(d.updateTime)):void 0!==d.exists?jn.exists(d.exists):jn.none():jn.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(g,w){let S=null;"setToServerValue"in w?(bt("REQUEST_TIME"===w.setToServerValue),S=new Fo):"appendMissingElements"in w?S=new li(w.appendMissingElements.values||[]):"removeAllFromArray"in w?S=new bs(w.removeAllFromArray.values||[]):"increment"in w?S=new ga(g,w.increment):it();const O=kn.fromServerFormat(w.fieldPath);return new Qt(O,S)}(a,u)):[];var d;if(e.update){const u=ms(a,e.update.name),d=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Zr((e.updateMask.fieldPaths||[]).map(j=>kn.fromServerFormat(j)));return new di(u,d,g,r,s)}return new eu(u,d,r,s)}if(e.delete){const u=ms(a,e.delete);return new ya(u,r)}if(e.verify){const u=ms(a,e.verify);return new Pn(u,r)}return it()}function ru(a,e){return{documents:[th(a,e.path)]}}function fo(a,e){const r={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=th(a,u);const d=function(O){if(0!==O.length)return $u(an.create(O,"and"))}(e.filters);d&&(r.structuredQuery.where=d);const g=function(O){if(0!==O.length)return O.map(j=>{return{field:Ta((oe=j).field),direction:fg(oe.dir)};var oe})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const w=Dt(a,e.limit);return null!==w&&(r.structuredQuery.limit=w),e.startAt&&(r.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(r.structuredQuery.endAt=function(O){return{before:!O.inclusive,values:O.position}}(e.endAt)),{_t:r,parent:u};var O}function iu(a){let e=Mc(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){bt(1===s);const j=r.from[0];j.allDescendants?u=j.collectionId:e=e.child(j.collectionId)}let d=[];r.where&&(d=function(K){const oe=hg(K);return oe instanceof an&&Qa(oe)?oe.getFilters():[oe]}(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(oe=>{return new vi(wa((Je=oe).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Je.direction));var Je}));let w=null;r.limit&&(w=function(K){let oe;return oe="object"==typeof K?K.value:K,Pi(oe)?null:oe}(r.limit));let S=null;var K;r.startAt&&(S=new Yi((K=r.startAt).values||[],!!K.before));let O=null;return r.endAt&&(O=function(K){return new Yi(K.values||[],!K.before)}(r.endAt)),wc(e,u,g,d,w,"F",S,O)}function hg(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=wa(r.unaryFilter.field);return Rn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=wa(r.unaryFilter.field);return Rn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=wa(r.unaryFilter.field);return Rn.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=wa(r.unaryFilter.field);return Rn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(a):void 0!==a.fieldFilter?Rn.create(wa((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return an.create(r.compositeFilter.filters.map(s=>hg(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return it()}}(r.compositeFilter.op))}(a):it();var r}function fg(a){return G[a]}function pg(a){return J[a]}function Df(a){return Ue[a]}function Ta(a){return{fieldPath:a.canonicalString()}}function wa(a){return kn.fromServerFormat(a.fieldPath)}function $u(a){return a instanceof Rn?function(r){if("=="===r.op){if(Pl(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NAN"}};if(oo(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Pl(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NOT_NAN"}};if(oo(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(r.field),op:pg(r.op),value:r.value}}}(a):a instanceof an?function(r){const s=r.getFilters().map(u=>$u(u));return 1===s.length?s[0]:{compositeFilter:{op:Df(r.op),filters:s}}}(a):it()}function ih(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Hu(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class _s{constructor(e,r,s,u,d=mt.min(),g=mt.min(),w=qn.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=S}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oc{constructor(e){this.ct=e}}function kc(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Lc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:gs(d=a.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:un(d,g.version.toTimestamp()),createTime:un(d,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:qs(e.version)};else{if(!e.isUnknownDocument())return it();s.unknownDocument={path:r.path.toArray(),version:qs(e.version)}}var d,g;return s}function Lc(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function qs(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Si(a){const e=new vt(a.seconds,a.nanoseconds);return mt.fromTimestamp(e)}function su(a,e){const r=(e.baseMutations||[]).map(d=>nu(a.ct,d));for(let d=0;d<e.mutations.length-1;++d)d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(e.mutations[d].updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d);const s=e.mutations.map(d=>nu(a.ct,d)),u=vt.fromMillis(e.localWriteTimeMs);return new Sc(e.batchId,u,r,s)}function po(a){const e=Si(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Si(a.lastLimboFreeSnapshotVersion):mt.min();let s;return s=void 0!==a.query.documents?(bt(1===(d=a.query).documents.length),A($s(Mc(d.documents[0])))):function(d){return A(iu(d))}(a.query),new _s(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,qn.fromBase64String(a.resumeToken));var d}function zu(a,e){const r=qs(e.snapshotVersion),s=qs(e.lastLimboFreeSnapshotVersion);let u;u=co(e.target)?ru(a.ct,e.target):fo(a.ct,e.target)._t;const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oo(e.target),readTime:r,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Gu(a){const e=iu({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?ee(e,e.limit,"L"):e}function Wu(a,e){return new fs(e.largestBatchId,nu(a.ct,e.overlayMutation))}function Ku(a,e){const r=e.path.lastSegment();return[a,ar(e.path.popLast()),r]}function sh(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:qs(s.readTime),documentKey:ar(s.documentKey.path),largestBatchId:s.largestBatchId}}class oh{getBundleMetadata(e,r){return ah(e).get(r).next(s=>{if(s)return{id:(d=s).bundleId,createTime:Si(d.createTime),version:d.version};var d})}saveBundleMetadata(e,r){return ah(e).put({bundleId:(u=r).id,createTime:qs(Jt(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return uh(e).get(r).next(s=>{if(s)return{name:(d=s).name,query:Gu(d.bundledQuery),readTime:Si(d.readTime)};var d})}saveNamedQuery(e,r){return uh(e).put({name:(u=r).name,readTime:qs(Jt(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ah(a){return sr(a,"bundles")}function uh(a){return sr(a,"namedQueries")}class ou{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new ou(e,r.uid||"")}getOverlay(e,r){return Fc(e).get(Ku(this.userId,r)).next(s=>s?Wu(this.serializer,s):null)}getOverlays(e,r){const s=vr();return me.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){const u=[];return s.forEach((d,g)=>{const w=new fs(r,g);u.push(this.ht(e,w))}),me.waitFor(u)}removeOverlaysForBatchId(e,r,s){const u=new Set;r.forEach(g=>u.add(ar(g.getCollectionPath())));const d=[];return u.forEach(g=>{const w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(Fc(e).j("collectionPathOverlayIndex",w))}),me.waitFor(d)}getOverlaysForCollection(e,r,s){const u=vr(),d=ar(r),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Fc(e).U("collectionPathOverlayIndex",g).next(w=>{for(const S of w){const O=Wu(this.serializer,S);u.set(O.getKey(),O)}return u})}getOverlaysForCollectionGroup(e,r,s,u){const d=vr();let g;const w=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Fc(e).J({index:"collectionGroupOverlayIndex",range:w},(S,O,j)=>{const K=Wu(this.serializer,O);d.size()<u||K.largestBatchId===g?(d.set(K.getKey(),K),g=K.largestBatchId):j.done()}).next(()=>d)}ht(e,r){return Fc(e).put(function(u,d,g){const[w,S,O]=Ku(d,g.mutation.key);return{userId:d,collectionPath:S,documentId:O,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Ea(u.ct,g.mutation)}}(this.serializer,this.userId,r))}}function Fc(a){return sr(a,"documentOverlays")}class Vl{Pt(e){return sr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?qn.fromUint8Array(s):qn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class Li{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(hr(e.integerValue));else if("doubleValue"in e){const s=hr(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),wi(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=on(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(ei(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?vc(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Wn(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):it()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const u of Object.keys(s))this.Vt(u,r),this.Tt(s[u],r)}wt(e,r){var s,u;const d=e.fields||{};this.dt(r,53);const g="value",w=(null===(u=null===(s=d[g].arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(hr(w)),this.Vt(g,r),this.Tt(d[g],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const u of s)this.Tt(u,r)}yt(e,r){this.dt(r,37),It.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function gg(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function ch(a){const e=64-function(s){let u=0;for(let d=0;d<8;++d){const g=gg(255&s[d]);if(u+=g,8!==g)break}return u}(a);return Math.ceil(e/8)}Li.vt=new Li;class Ul{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(e){const r=this.qt(e),s=ch(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(e){const r=this.qt(e),s=ch(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let u=1;u<r.length;++u)r[u]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Vc{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class lh{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Br{constructor(){this.jt=new Ul,this.Ht=new Vc(this.jt),this.Jt=new lh(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class zo{constructor(e,r,s,u){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=u}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new zo(this.indexId,this.documentKey,this.arrayValue,s)}}function go(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=qu(a.arrayValue,e.arrayValue),0!==r?r:(r=qu(a.directionalValue,e.directionalValue),0!==r?r:It.comparator(a.documentKey,e.documentKey)))}function qu(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class bf{constructor(e){this.Xt=new sn((r,s)=>kn.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(bt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=ui(e);if(void 0!==r&&!this.sn(r))return!1;const s=Hr(e);let u=new Set,d=0,g=0;for(;d<s.length&&this.sn(s[d]);++d)u=u.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(this.Xt.size>0){const w=this.Xt.getIterator().getNext();if(!u.has(w.field.canonicalString())){const S=s[d];if(!this.on(w,S)||!this._n(this.en[g++],S))return!1}++d}for(;d<s.length;++d)if(g>=this.en.length||!this._n(this.en[g++],s[d]))return!1;return!0}an(){if(this.nn)return null;let e=new sn(kn.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new rn(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new rn(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new rn(s.field,"asc"===s.dir?0:1)));return new Cr(Cr.UNKNOWN_ID,this.collectionId,r,Fe.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Bl(a){var e,r;if(bt(a instanceof Rn||a instanceof an),a instanceof Rn){if(a instanceof uo){const u=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(d=>Rn.create(a.field,"==",d)))||[];return an.create(u,"or")}return a}const s=a.filters.map(u=>Bl(u));return an.create(s,a.op)}function jl(a){if(0===a.getFilters().length)return[];const e=Qu(Bl(a));return bt(Da(e)),Go(e)||Aa(e)?[e]:e.getFilters()}function Go(a){return a instanceof Rn}function Aa(a){return a instanceof an&&Qa(a)}function Da(a){return Go(a)||Aa(a)||function(r){if(r instanceof an&&qr(r)){for(const s of r.getFilters())if(!Go(s)&&!Aa(s))return!1;return!0}return!1}(a)}function Qu(a){if(bt(a instanceof Rn||a instanceof an),a instanceof Rn)return a;if(1===a.filters.length)return Qu(a.filters[0]);const e=a.filters.map(s=>Qu(s));let r=an.create(e,a.op);return r=dh(r),Da(r)?r:(bt(r instanceof an),bt(Xi(r)),bt(r.filters.length>1),r.filters.reduce((s,u)=>Uc(s,u)))}function Uc(a,e){let r;return bt(a instanceof Rn||a instanceof an),bt(e instanceof Rn||e instanceof an),r=a instanceof Rn?e instanceof Rn?an.create([a,e],"and"):au(a,e):e instanceof Rn?au(e,a):function(u,d){if(bt(u.filters.length>0&&d.filters.length>0),Xi(u)&&Xi(d))return ao(u,d.getFilters());const g=qr(u)?u:d,w=qr(u)?d:u,S=g.filters.map(O=>Uc(O,w));return an.create(S,"or")}(a,e),dh(r)}function au(a,e){if(Xi(e))return ao(e,a.getFilters());{const r=e.filters.map(s=>Uc(a,s));return an.create(r,"or")}}function dh(a){if(bt(a instanceof Rn||a instanceof an),a instanceof Rn)return a;const e=a.getFilters();if(1===e.length)return dh(e[0]);if(No(a))return a;const r=e.map(u=>dh(u)),s=[];return r.forEach(u=>{u instanceof Rn?s.push(u):u instanceof an&&(u.op===a.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:an.create(s,a.op)}class hh{constructor(){this.un=new Sf}addToCollectionParentIndex(e,r){return this.un.add(r),me.resolve()}getCollectionParents(e,r){return me.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return me.resolve()}deleteFieldIndex(e,r){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,r){return me.resolve()}getDocumentsMatchingTarget(e,r){return me.resolve(null)}getIndexType(e,r){return me.resolve(0)}getFieldIndexes(e,r){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,r){return me.resolve(ft.min())}getMinOffsetFromCollectionGroup(e,r){return me.resolve(ft.min())}updateCollectionGroup(e,r,s){return me.resolve()}updateIndexEntries(e,r){return me.resolve()}}class Sf{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r]||new sn(wt.comparator),d=!u.has(s);return this.index[r]=u.add(s),d}has(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(e){return(this.index[e]||new sn(wt.comparator)).toArray()}}const fh=new Uint8Array(0);class mg{constructor(e,r){this.databaseId=r,this.cn=new Sf,this.ln=new Kn(s=>Oo(s),(s,u)=>ko(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:s,parent:ar(u)};return _g(e).put(d)}return me.resolve()}getCollectionParents(e,r){const s=[],u=IDBKeyRange.bound([r,""],[jt(r),""],!1,!0);return _g(e).U(u).next(d=>{for(const g of d){if(g.collectionId!==r)break;s.push(Ki(g.parent))}return s})}addFieldIndex(e,r){const s=$l(e),u={indexId:(w=r).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var w;delete u.indexId;const d=s.add(u);if(r.indexState){const g=Qs(e);return d.next(w=>{g.put(sh(w,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(e,r){const s=$l(e),u=Qs(e),d=Ca(e);return s.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=$l(e),s=Ca(e),u=Qs(e);return r.j().next(()=>s.j()).next(()=>u.j())}createTargetIndexes(e,r){return me.forEach(this.hn(r),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const d=new bf(s).an();if(null!=d)return this.addFieldIndex(e,d)}}))}getDocumentsMatchingTarget(e,r){const s=Ca(e);let u=!0;const d=new Map;return me.forEach(this.hn(r),g=>this.Pn(e,g).next(w=>{u&&(u=!!w),d.set(g,w)})).next(()=>{if(u){let g=Lt();const w=[];return me.forEach(d,(S,O)=>{var Tt;Ce("IndexedDbIndexManager",`Using index ${Tt=S,`id=${Tt.indexId}|cg=${Tt.collectionGroup}|f=${Tt.fields.map(zt=>`${zt.fieldPath}:${zt.kind}`).join(",")}`} to execute ${Oo(r)}`);const j=function(Tt,zt){const yn=ui(zt);if(void 0===yn)return null;for(const ln of Lo(Tt,yn.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(O,S),K=function(Tt,zt){const yn=new Map;for(const ln of Hr(zt))for(const ge of Lo(Tt,ln.fieldPath))switch(ge.op){case"==":case"in":yn.set(ln.fieldPath.canonicalString(),ge.value);break;case"not-in":case"!=":return yn.set(ln.fieldPath.canonicalString(),ge.value),Array.from(yn.values())}return null}(O,S),oe=function(Tt,zt){const yn=[];let ln=!0;for(const ge of Hr(zt)){const te=0===ge.kind?Nl(Tt,ge.fieldPath,Tt.startAt):Ou(Tt,ge.fieldPath,Tt.startAt);yn.push(te.value),ln&&(ln=te.inclusive)}return new Yi(yn,ln)}(O,S),Me=function(Tt,zt){const yn=[];let ln=!0;for(const ge of Hr(zt)){const te=0===ge.kind?Ou(Tt,ge.fieldPath,Tt.endAt):Nl(Tt,ge.fieldPath,Tt.endAt);yn.push(te.value),ln&&(ln=te.inclusive)}return new Yi(yn,ln)}(O,S),Je=this.In(S,O,oe),ht=this.In(S,O,Me),st=this.Tn(S,O,K),kt=this.En(S.indexId,j,Je,oe.inclusive,ht,Me.inclusive,st);return me.forEach(kt,Ht=>s.G(Ht,r.limit).next(Tt=>{Tt.forEach(zt=>{const yn=It.fromSegments(zt.documentKey);g.has(yn)||(g=g.add(yn),w.push(yn))})}))}).next(()=>w)}return me.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:jl(an.create(e.filters,"and")).map(s=>ha(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,u,d,g,w){const S=(null!=r?r.length:1)*Math.max(s.length,d.length),O=S/(null!=r?r.length:1),j=[];for(let K=0;K<S;++K){const oe=r?this.dn(r[K/O]):fh,Me=this.An(e,oe,s[K%O],u),Je=this.Rn(e,oe,d[K%O],g),ht=w.map(st=>this.An(e,oe,st,!0));j.push(...this.createRange(Me,Je,ht))}return j}An(e,r,s,u){const d=new zo(e,It.empty(),r,s);return u?d:d.Zt()}Rn(e,r,s,u){const d=new zo(e,It.empty(),r,s);return u?d.Zt():d}Pn(e,r){const s=new bf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const w of d)s.rn(w)&&(!g||w.fields.length>g.fields.length)&&(g=w);return g})}getIndexType(e,r){let s=2;const u=this.hn(r);return me.forEach(u,d=>this.Pn(e,d).next(g=>{g?0!==s&&g.fields.length<function(S){let O=new sn(kn.comparator),j=!1;for(const K of S.filters)for(const oe of K.getFlattenedFilters())oe.field.isKeyField()||("array-contains"===oe.op||"array-contains-any"===oe.op?j=!0:O=O.add(oe.field));for(const K of S.orderBy)K.field.isKeyField()||(O=O.add(K.field));return O.size+(j?1:0)}(d)&&(s=1):s=0})).next(()=>null!==r.limit&&u.length>1&&2===s?1:s)}Vn(e,r){const s=new Br;for(const u of Hr(e)){const d=r.data.field(u.fieldPath);if(null==d)return null;const g=s.Yt(u.kind);Li.vt.It(d,g)}return s.zt()}dn(e){const r=new Br;return Li.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new Br;return Li.vt.It(so(this.databaseId,r),s.Yt(function(d){const g=Hr(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let u=[];u.push(new Br);let d=0;for(const g of Hr(e)){const w=s[d++];for(const S of u)if(this.fn(r,g.fieldPath)&&Tr(w))u=this.gn(u,g,w);else{const O=S.Yt(g.kind);Li.vt.It(w,O)}}return this.pn(u)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const u=[...e],d=[];for(const g of s.arrayValue.values||[])for(const w of u){const S=new Br;S.seed(w.zt()),Li.vt.It(g,S.Yt(r.kind)),d.push(S)}return d}fn(e,r){return!!e.filters.find(s=>s instanceof Rn&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=$l(e),u=Qs(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(d=>{const g=[];return me.forEach(d,w=>u.get([w.indexId,this.uid]).next(S=>{g.push(function(j,K){const oe=K?new Fe(K.sequenceNumber,new ft(Si(K.readTime),new It(Ki(K.documentKey)),K.largestBatchId)):Fe.empty(),Me=j.fields.map(([Je,ht])=>new rn(kn.fromServerFormat(Je),ht));return new Cr(j.indexId,j.collectionGroup,Me,oe)}(w,S))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,u)=>{const d=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Re(s.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const u=$l(e),d=Qs(e);return this.yn(e).next(g=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(w=>me.forEach(w,S=>d.put(sh(S.indexId,this.uid,g,s)))))}updateIndexEntries(e,r){const s=new Map;return me.forEach(r,(u,d)=>{const g=s.get(u.collectionGroup);return(g?me.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(w=>(s.set(u.collectionGroup,w),me.forEach(w,S=>this.wn(e,u,S).next(O=>{const j=this.Sn(d,S);return O.isEqual(j)?me.resolve():this.bn(e,d,S,O,j)}))))})}Dn(e,r,s,u){return Ca(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,u){return Ca(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const u=Ca(e);let d=new sn(go);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(g,w)=>{d=d.add(new zo(s.indexId,r,w.arrayValue,w.directionalValue))}).next(()=>d)}Sn(e,r){let s=new sn(go);const u=this.Vn(r,e);if(null==u)return s;const d=ui(r);if(null!=d){const g=e.data.field(d.fieldPath);if(Tr(g))for(const w of g.arrayValue.values||[])s=s.add(new zo(r.indexId,e.key,this.dn(w),u))}else s=s.add(new zo(r.indexId,e.key,fh,u));return s}bn(e,r,s,u,d){Ce("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const g=[];return function(S,O,j,K,oe){const Me=S.getIterator(),Je=O.getIterator();let ht=Ai(Me),st=Ai(Je);for(;ht||st;){let kt=!1,Ht=!1;if(ht&&st){const Tt=j(ht,st);Tt<0?Ht=!0:Tt>0&&(kt=!0)}else null!=ht?Ht=!0:kt=!0;kt?(K(st),st=Ai(Je)):Ht?(oe(ht),ht=Ai(Me)):(ht=Ai(Me),st=Ai(Je))}}(u,d,go,w=>{g.push(this.Dn(e,r,s,w))},w=>{g.push(this.vn(e,r,s,w))}),me.waitFor(g)}yn(e){let r=1;return Qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((g,w)=>go(g,w)).filter((g,w,S)=>!w||0!==go(g,S[w-1]));const u=[];u.push(e);for(const g of s){const w=go(g,e),S=go(g,r);if(0===w)u[0]=e.Zt();else if(w>0&&S<0)u.push(g),u.push(g.Zt());else if(S>0)break}u.push(r);const d=[];for(let g=0;g<u.length;g+=2){if(this.Cn(u[g],u[g+1]))return[];d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,fh,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,fh,[]]))}return d}Cn(e,r){return go(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Rf)}getMinOffset(e,r){return me.mapArray(this.hn(r),s=>this.Pn(e,s).next(u=>u||it())).next(Rf)}}function _g(a){return sr(a,"collectionParents")}function Ca(a){return sr(a,"indexEntries")}function $l(a){return sr(a,"indexConfiguration")}function Qs(a){return sr(a,"indexState")}function Rf(a){bt(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const u=a[s].indexState.offset;$t(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new ft(e.readTime,e.documentKey,r)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qn{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mf(a,e,r){const s=a.store("mutations"),u=a.store("documentMutations"),d=[],g=IDBKeyRange.only(r.batchId);let w=0;const S=s.J({range:g},(j,K,oe)=>(w++,oe.delete()));d.push(S.next(()=>{bt(1===w)}));const O=[];for(const j of r.mutations){const K=oa(e,j.key.path,r.batchId);d.push(u.delete(K)),O.push(j.key)}return me.waitFor(d).next(()=>O)}function ba(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw it();e=a.noDocument}return JSON.stringify(e).length}Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(41943040,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class Hl{constructor(e,r,s,u){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=u,this.Fn={}}static lt(e,r,s,u){bt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Hl(d,r,s,u)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).J({index:"userMutationsIndex",range:s},(u,d,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(e,r,s,u){const d=uu(e),g=ys(e);return g.add({}).next(w=>{bt("number"==typeof w);const S=new Sc(w,r,s,u),O=function(Me,Je,ht){const st=ht.baseMutations.map(Ht=>Ea(Me.ct,Ht)),kt=ht.mutations.map(Ht=>Ea(Me.ct,Ht));return{userId:Je,batchId:ht.batchId,localWriteTimeMs:ht.localWriteTime.toMillis(),baseMutations:st,mutations:kt}}(this.serializer,this.userId,S),j=[];let K=new sn((oe,Me)=>Re(oe.canonicalString(),Me.canonicalString()));for(const oe of u){const Me=oa(this.userId,oe.key.path,w);K=K.add(oe.key.path.popLast()),j.push(g.put(O)),j.push(d.put(Me,Mu))}return K.forEach(oe=>{j.push(this.indexManager.addToCollectionParentIndex(e,oe))}),e.addOnCommittedListener(()=>{this.Fn[w]=S.keys()}),me.waitFor(j).next(()=>S)})}lookupMutationBatch(e,r){return ys(e).get(r).next(s=>s?(bt(s.userId===this.userId),su(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?me.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const u=s.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return ys(e).J({index:"userMutationsIndex",range:u},(g,w,S)=>{w.userId===this.userId&&(bt(w.batchId>=s),d=su(this.serializer,w)),S.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ys(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).U("userMutationsIndex",r).next(s=>s.map(u=>su(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=So(this.userId,r.path),u=IDBKeyRange.lowerBound(s),d=[];return uu(e).J({range:u},(g,w,S)=>{const[O,j,K]=g,oe=Ki(j);if(O===this.userId&&r.path.isEqual(oe))return ys(e).get(K).next(Me=>{if(!Me)throw it();bt(Me.userId===this.userId),d.push(su(this.serializer,Me))});S.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new sn(Re);const u=[];return r.forEach(d=>{const g=So(this.userId,d.path),w=IDBKeyRange.lowerBound(g),S=uu(e).J({range:w},(O,j,K)=>{const[oe,Me,Je]=O,ht=Ki(Me);oe===this.userId&&d.path.isEqual(ht)?s=s.add(Je):K.done()});u.push(S)}),me.waitFor(u).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1,d=So(this.userId,s),g=IDBKeyRange.lowerBound(d);let w=new sn(Re);return uu(e).J({range:g},(S,O,j)=>{const[K,oe,Me]=S,Je=Ki(oe);K===this.userId&&s.isPrefixOf(Je)?Je.length===u&&(w=w.add(Me)):j.done()}).next(()=>this.xn(e,w))}xn(e,r){const s=[],u=[];return r.forEach(d=>{u.push(ys(e).get(d).next(g=>{if(null===g)throw it();bt(g.userId===this.userId),s.push(su(this.serializer,g))}))}),me.waitFor(u).next(()=>s)}removeMutationBatch(e,r){return Mf(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),me.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return me.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return uu(e).J({range:s},(d,g,w)=>{if(d[0]===this.userId){const S=Ki(d[1]);u.push(S)}else w.done()}).next(()=>{bt(0===u.length)})})}containsKey(e,r){return Fi(e,this.userId,r)}Nn(e){return Bc(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Fi(a,e,r){const s=So(e,r.path),u=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return uu(a).J({range:d,H:!0},(w,S,O)=>{const[j,K,oe]=w;j===e&&K===u&&(g=!0),O.done()}).next(()=>g)}function ys(a){return sr(a,"mutations")}function uu(a){return sr(a,"documentMutations")}function Bc(a){return sr(a,"mutationQueues")}class Ys{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ys(0)}static kn(){return new Ys(-1)}}class yg{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new Ys(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>mt.fromTimestamp(new vt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(e,u)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Yu(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(bt(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let u=0;const d=[];return Yu(e).J((g,w)=>{const S=po(w);S.sequenceNumber<=r&&null===s.get(S.targetId)&&(u++,d.push(this.removeTargetData(e,S)))}).next(()=>me.waitFor(d)).next(()=>u)}forEachTarget(e,r){return Yu(e).J((s,u)=>{const d=po(u);r(d)})}qn(e){return Nf(e).get("targetGlobalKey").next(r=>(bt(null!==r),r))}Qn(e,r){return Nf(e).put("targetGlobalKey",r)}Kn(e,r){return Yu(e).put(zu(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=Oo(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Yu(e).J({range:u,index:"queryTargetsIndex"},(g,w,S)=>{const O=po(w);ko(r,O.target)&&(d=O,S.done())}).next(()=>d)}addMatchingKeys(e,r,s){const u=[],d=cu(e);return r.forEach(g=>{const w=ar(g.path);u.push(d.put({targetId:s,path:w})),u.push(this.referenceDelegate.addReference(e,s,g))}),me.waitFor(u)}removeMatchingKeys(e,r,s){const u=cu(e);return me.forEach(r,d=>{const g=ar(d.path);return me.waitFor([u.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,r){const s=cu(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=cu(e);let d=Lt();return u.J({range:s,H:!0},(g,w,S)=>{const O=Ki(g[1]),j=new It(O);d=d.add(j)}).next(()=>d)}containsKey(e,r){const s=ar(r.path),u=IDBKeyRange.bound([s],[jt(s)],!1,!0);let d=0;return cu(e).J({index:"documentTargetsIndex",H:!0,range:u},([g,w],S,O)=>{0!==g&&(d++,O.done())}).next(()=>d>0)}ot(e,r){return Yu(e).get(r).next(s=>s?po(s):null)}}function Yu(a){return sr(a,"targets")}function Nf(a){return sr(a,"targetGlobal")}function cu(a){return sr(a,"targetDocuments")}function es([a,e],[r,s]){const u=Re(a,r);return 0===u?Re(e,s):u}class ph{constructor(e){this.Un=e,this.buffer=new sn(es),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();es(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class lu{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;Ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){us(s)?Ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Cn(s)}yield r.Hn(3e5)}))}}class xf{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return me.resolve(zr.oe);const s=new ph(r);return this.Jn.forEachTarget(e,u=>s.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(e,u=>s.zn(u))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Pf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,u,d,g,w,S,O;const j=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),u=this.params.maximumSequenceNumbersToCollect):u=K,g=Date.now(),this.nthSequenceNumber(e,u))).next(K=>(s=K,w=Date.now(),this.removeTargets(e,s,r))).next(K=>(d=K,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(K=>(O=Date.now(),yr()<=Ut.$b.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-j}ms\n\tDetermined least recently used ${u} in `+(w-g)+`ms\n\tRemoved ${d} targets in `+(S-w)+`ms\n\tRemoved ${K} documents in `+(O-S)+`ms\nTotal Duration: ${O-j}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:K})))}}class vg{constructor(e,r){this.db=e,this.garbageCollector=function jc(a,e){return new xf(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(u=>s+u))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,u)=>r(u))}addReference(e,r,s){return Xu(e,s)}removeReference(e,r,s){return Xu(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return Xu(e,r)}nr(e,r){return function(u,d){let g=!1;return Bc(u).Y(w=>Fi(u,w,d).next(S=>(S&&(g=!0),me.resolve(!S)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(e,(g,w)=>{if(w<=r){const S=this.nr(e,g).next(O=>{if(!O)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,mt.min()),cu(e).delete([0,ar(g.path)])))});u.push(S)}}).next(()=>me.waitFor(u)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return Xu(e,r)}tr(e,r){const s=cu(e);let u,d=zr.oe;return s.J({index:"documentTargetsIndex"},([g,w],{path:S,sequenceNumber:O})=>{0===g?(d!==zr.oe&&r(new It(Ki(u)),d),d=O,u=S):d=zr.oe}).next(()=>{d!==zr.oe&&r(new It(Ki(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xu(a,e){return cu(a).put((u=a.currentSequenceNumber,{targetId:0,path:ar(e.path),sequenceNumber:u}));var u}class Of{constructor(){this.changes=new Kn(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?me.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return Wo(e).put(s)}removeEntry(e,r,s){return Wo(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Lc(g),w[w.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=rr.newInvalidDocument(r);return Wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(du(r))},(u,d)=>{s=this.ir(r,d)}).next(()=>s)}sr(e,r){let s={size:0,document:rr.newInvalidDocument(r)};return Wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(du(r))},(u,d)=>{s={document:this.ir(r,d),size:ba(d)}}).next(()=>s)}getEntries(e,r){let s=Nn();return this._r(e,r,(u,d)=>{const g=this.ir(u,d);s=s.insert(u,g)}).next(()=>s)}ar(e,r){let s=Nn(),u=new mn(It.comparator);return this._r(e,r,(d,g)=>{const w=this.ir(d,g);s=s.insert(d,w),u=u.insert(d,ba(g))}).next(()=>({documents:s,ur:u}))}_r(e,r,s){if(r.isEmpty())return me.resolve();let u=new sn($c);r.forEach(S=>u=u.add(S));const d=IDBKeyRange.bound(du(u.first()),du(u.last())),g=u.getIterator();let w=g.getNext();return Wo(e).J({index:"documentKeyIndex",range:d},(S,O,j)=>{const K=It.fromSegments([...O.prefixPath,O.collectionGroup,O.documentId]);for(;w&&$c(w,K)<0;)s(w,null),w=g.getNext();w&&w.isEqual(K)&&(s(w,O),w=g.hasNext()?g.getNext():null),w?j.$(du(w)):j.done()}).next(()=>{for(;w;)s(w,null),w=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,r,s,u,d){const g=r.path,w=[g.popLast().toArray(),g.lastSegment(),Lc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).U(IDBKeyRange.bound(w,S,!0)).next(O=>{d?.incrementDocumentReadCount(O.length);let j=Nn();for(const K of O){const oe=this.ir(It.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);oe.isFoundDocument()&&(Ln(r,oe)||u.has(oe.key))&&(j=j.insert(oe.key,oe))}return j})}getAllFromCollectionGroup(e,r,s,u){let d=Nn();const g=Ju(r,s),w=Ju(r,ft.max());return Wo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,w,!0)},(S,O,j)=>{const K=this.ir(It.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);d=d.insert(K.key,K),d.size===u&&j.done()}).next(()=>d)}newChangeBuffer(e){return new mh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return zl(e).get("remoteDocumentGlobalKey").next(r=>(bt(!!r),r))}rr(e,r){return zl(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function Cf(a,e){let r;if(e.document)r=Nc(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=It.fromSegments(e.noDocument.path),u=Si(e.noDocument.readTime);r=rr.newNoDocument(s,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const s=It.fromSegments(e.unknownDocument.path),u=Si(e.unknownDocument.version);r=rr.newUnknownDocument(s,u)}}return e.readTime&&r.setReadTime(function(u){const d=new vt(u[0],u[1]);return mt.fromTimestamp(d)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(mt.min()))return s}return rr.newInvalidDocument(e)}}function gh(a){return new kf(a)}class mh extends Of{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Kn(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const r=[];let s=0,u=new sn((d,g)=>Re(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const w=this.lr.get(d);if(r.push(this.cr.removeEntry(e,d,w.readTime)),g.isValidDocument()){const S=kc(this.cr.serializer,g);u=u.add(d.path.popLast());const O=ba(S);s+=O-w.size,r.push(this.cr.addEntry(e,d,S))}else if(s-=w.size,this.trackRemovals){const S=kc(this.cr.serializer,g.convertToNoDocument(mt.min()));r.push(this.cr.addEntry(e,d,S))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,d))}),r.push(this.cr.updateMetadata(e,s)),me.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:u})=>(u.forEach((d,g)=>{this.lr.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function zl(a){return sr(a,"remoteDocumentGlobal")}function Wo(a){return sr(a,"remoteDocumentsV14")}function du(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ju(a,e){const r=e.documentKey.path.toArray();return[a,Lc(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function $c(a,e){const r=a.path.toArray(),s=e.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<s.length-2;++d)if(u=Re(r[d],s[d]),u)return u;return u=Re(r.length,s.length),u||(u=Re(r[r.length-2],s[s.length-2]),u||Re(r[r.length-1],s[s.length-1]))}class Hc{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class _h{constructor(e,r,s,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==s&&_a(s.mutation,u,Zr.empty(),vt.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,Lt()).next(()=>s))}getLocalViewOfDocuments(e,r,s=Lt()){const u=vr();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,s).next(d=>{let g=ni();return d.forEach((w,S)=>{g=g.insert(w,S.overlayedDocument)}),g}))}getOverlayedDocuments(e,r){const s=vr();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,Lt()))}populateOverlays(e,r,s){const u=[];return s.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,w)=>{r.set(g,w)})})}computeViews(e,r,s,u){let d=Nn();const g=Pr(),w=Pr();return r.forEach((S,O)=>{const j=s.get(O.key);u.has(O.key)&&(void 0===j||j.mutation instanceof di)?d=d.insert(O.key,O):void 0!==j?(g.set(O.key,j.mutation.getFieldMask()),_a(j.mutation,O,j.mutation.getFieldMask(),vt.now())):g.set(O.key,Zr.empty())}),this.recalculateAndSaveOverlays(e,d).next(S=>(S.forEach((O,j)=>g.set(O,j)),r.forEach((O,j)=>{var K;return w.set(O,new Hc(j,null!==(K=g.get(O))&&void 0!==K?K:null))}),w))}recalculateAndSaveOverlays(e,r){const s=Pr();let u=new mn((g,w)=>g-w),d=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(g=>{for(const w of g)w.keys().forEach(S=>{const O=r.get(S);if(null===O)return;let j=s.get(S)||Zr.empty();j=w.applyToLocalView(O,j),s.set(S,j);const K=(u.get(w.batchId)||Lt()).add(S);u=u.insert(w.batchId,K)})}).next(()=>{const g=[],w=u.getReverseIterator();for(;w.hasNext();){const S=w.getNext(),O=S.key,j=S.value,K=Cs();j.forEach(oe=>{if(!d.has(oe)){const Me=bc(r.get(oe),s.get(oe));null!==Me&&K.set(oe,Me),d=d.add(oe)}}),g.push(this.documentOverlayCache.saveOverlays(e,O,K))}return me.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,u){return It.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):fa(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,u):this.getDocumentsMatchingCollectionQuery(e,r,s,u);var g}getNextDocuments(e,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,u-d.size):me.resolve(vr());let w=-1,S=d;return g.next(O=>me.forEach(O,(j,K)=>(w<K.largestBatchId&&(w=K.largestBatchId),d.get(j)?me.resolve():this.remoteDocumentCache.getEntry(e,j).next(oe=>{S=S.insert(j,oe)}))).next(()=>this.populateOverlays(e,O,d)).next(()=>this.computeViews(e,S,O,Lt())).next(j=>({batchId:w,changes:Hs(j)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new It(r)).next(s=>{let u=ni();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,s,u){const d=r.collectionGroup;let g=ni();return this.indexManager.getCollectionParents(e,d).next(w=>me.forEach(w,S=>{const O=(K=r,oe=S.child(d),new bi(oe,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,oe;return this.getDocumentsMatchingCollectionQuery(e,O,s,u).next(j=>{j.forEach((K,oe)=>{g=g.insert(K,oe)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,s,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,d,u))).next(g=>{d.forEach((S,O)=>{const j=O.getKey();null===g.get(j)&&(g=g.insert(j,rr.newInvalidDocument(j)))});let w=ni();return g.forEach((S,O)=>{const j=d.get(S);void 0!==j&&_a(j.mutation,O,Zr.empty(),vt.now()),Ln(r,O)&&(w=w.insert(S,O))}),w})}}class Lf{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return me.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:Jt(u.createTime)}),me.resolve();var u}getNamedQuery(e,r){return me.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(u=r).name,query:Gu(u.bundledQuery),readTime:Jt(u.readTime)}),me.resolve();var u}}class yh{constructor(){this.overlays=new mn(It.comparator),this.Ir=new Map}getOverlay(e,r){return me.resolve(this.overlays.get(r))}getOverlays(e,r){const s=vr();return me.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((u,d)=>{this.ht(e,r,d)}),me.resolve()}removeOverlaysForBatchId(e,r,s){const u=this.Ir.get(s);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(s)),me.resolve()}getOverlaysForCollection(e,r,s){const u=vr(),d=r.length+1,g=new It(r.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const S=w.getNext().value,O=S.getKey();if(!r.isPrefixOf(O.path))break;O.path.length===d&&S.largestBatchId>s&&u.set(S.getKey(),S)}return me.resolve(u)}getOverlaysForCollectionGroup(e,r,s,u){let d=new mn((O,j)=>O-j);const g=this.overlays.getIterator();for(;g.hasNext();){const O=g.getNext().value;if(O.getKey().getCollectionGroup()===r&&O.largestBatchId>s){let j=d.get(O.largestBatchId);null===j&&(j=vr(),d=d.insert(O.largestBatchId,j)),j.set(O.getKey(),O)}}const w=vr(),S=d.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((O,j)=>w.set(O,j)),!(w.size()>=u)););return me.resolve(w)}ht(e,r,s){const u=this.overlays.get(s.key);if(null!==u){const g=this.Ir.get(u.largestBatchId).delete(s.key);this.Ir.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new fs(r,s));let d=this.Ir.get(r);void 0===d&&(d=Lt(),this.Ir.set(r,d)),this.Ir.set(r,d.add(s.key))}}class Gl{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,me.resolve()}}class Wl{constructor(){this.Tr=new sn(hi.Er),this.dr=new sn(hi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new hi(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new hi(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new It(new wt([])),s=new hi(r,e),u=new hi(r,e+1),d=[];return this.dr.forEachInRange([s,u],g=>{this.Vr(g),d.push(g.key)}),d}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new It(new wt([])),s=new hi(r,e),u=new hi(r,e+1);let d=Lt();return this.dr.forEachInRange([s,u],g=>{d=d.add(g.key)}),d}containsKey(e){const r=new hi(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class hi{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return It.comparator(e.key,r.key)||Re(e.wr,r.wr)}static Ar(e,r){return Re(e.wr,r.wr)||It.comparator(e.key,r.key)}}class Ff{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new sn(hi.Er)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,u){const d=this.Sr;this.Sr++;const g=new Sc(d,r,s,u);this.mutationQueue.push(g);for(const w of u)this.br=this.br.add(new hi(w.key,d)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return me.resolve(g)}lookupMutationBatch(e,r){return me.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.vr(r+1),d=u<0?0:u;return me.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new hi(r,0),u=new hi(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([s,u],g=>{const w=this.Dr(g.wr);d.push(w)}),me.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new sn(Re);return r.forEach(u=>{const d=new hi(u,0),g=new hi(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,g],w=>{s=s.add(w.wr)})}),me.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1;let d=s;It.isDocumentKey(d)||(d=d.child(""));const g=new hi(new It(d),0);let w=new sn(Re);return this.br.forEachWhile(S=>{const O=S.key.path;return!!s.isPrefixOf(O)&&(O.length===u&&(w=w.add(S.wr)),!0)},g),me.resolve(this.Cr(w))}Cr(e){const r=[];return e.forEach(s=>{const u=this.Dr(s);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){bt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return me.forEach(r.mutations,u=>{const d=new hi(u.key,r.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new hi(r,0),u=this.br.firstAfterOrEqual(s);return me.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return me.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Zu{constructor(e){this.Mr=e,this.docs=new mn(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,u=this.docs.get(s),d=u?u.size:0,g=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return me.resolve(s?s.document.mutableCopy():rr.newInvalidDocument(r))}getEntries(e,r){let s=Nn();return r.forEach(u=>{const d=this.docs.get(u);s=s.insert(u,d?d.document.mutableCopy():rr.newInvalidDocument(u))}),me.resolve(s)}getDocumentsMatchingQuery(e,r,s,u){let d=Nn();const g=r.path,w=new It(g.child("")),S=this.docs.getIteratorFrom(w);for(;S.hasNext();){const{key:O,value:{document:j}}=S.getNext();if(!g.isPrefixOf(O.path))break;O.path.length>g.length+1||$t(qe(j),s)<=0||(u.has(j.key)||Ln(r,j))&&(d=d.insert(j.key,j.mutableCopy()))}return me.resolve(d)}getAllFromCollectionGroup(e,r,s,u){it()}Or(e,r){return me.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new Kl(this)}getSize(e){return me.resolve(this.size)}}class Kl extends Of{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(e,u)):this.cr.removeEntry(s)}),me.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class Ig{constructor(e){this.persistence=e,this.Nr=new Kn(r=>Oo(r),ko),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wl,this.targetCount=0,this.kr=Ys.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,u)=>r(u)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),me.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Ys(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,me.resolve()}updateTargetData(e,r){return this.Kn(r),me.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,r,s){let u=0;const d=[];return this.Nr.forEach((g,w)=>{w.sequenceNumber<=r&&null===s.get(w.targetId)&&(this.Nr.delete(g),d.push(this.removeMatchingKeysForTargetId(e,w.targetId)),u++)}),me.waitFor(d).next(()=>u)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return me.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),me.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),me.waitFor(d)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),me.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return me.resolve(s)}containsKey(e,r){return me.resolve(this.Br.containsKey(r))}}class Sa{constructor(e,r){this.qr={},this.overlays={},this.Qr=new zr(0),this.Kr=!1,this.Kr=!0,this.$r=new Gl,this.referenceDelegate=e(this),this.Ur=new Ig(this),this.indexManager=new hh,this.remoteDocumentCache=new Zu(s=>this.referenceDelegate.Wr(s)),this.serializer=new Oc(r),this.Gr=new Lf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yh,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new Ff(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){Ce("MemoryPersistence","Starting transaction:",e);const u=new Vf(this.Qr.next());return this.referenceDelegate.zr(),s(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(e,r){return me.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class Vf extends fn{constructor(e){super(),this.currentSequenceNumber=e}}class ql{constructor(e){this.persistence=e,this.Jr=new Wl,this.Yr=null}static Zr(e){return new ql(e)}get Xr(){if(this.Yr)return this.Yr;throw it()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),me.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),me.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xr,s=>{const u=It.fromPath(s);return this.ei(e,u).next(d=>{d||r.removeEntry(u,mt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return me.or([()=>me.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Eg{constructor(e){this.serializer=e}O(e,r,s,u){const d=new vn("createOrUpgrade",r);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",za,{unique:!0}),S.createObjectStore("documentMutations"),Ql(e),function(S){S.createObjectStore("remoteDocuments")}(e));let g=me.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),Ql(e)),g=g.next(()=>function(S){const O=S.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",j)}(d))),s<4&&u>=4&&(0!==s&&(g=g.next(()=>function(S,O){return O.store("mutations").U().next(j=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",za,{unique:!0});const K=O.store("mutations"),oe=j.map(Me=>K.put(Me));return me.waitFor(oe)})}(e,d))),g=g.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(g=g.next(()=>this.ni(d))),s<6&&u>=6&&(g=g.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ri(d)))),s<7&&u>=7&&(g=g.next(()=>this.ii(d))),s<8&&u>=8&&(g=g.next(()=>this.si(e,d))),s<9&&u>=9&&(g=g.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(g=g.next(()=>this.oi(d))),s<11&&u>=11&&(g=g.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(g=g.next(()=>{!function(S){const O=S.createObjectStore("documentOverlays",{keyPath:Mi});O.createIndex("collectionPathOverlayIndex",qi,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",dr,{unique:!1})}(e)})),s<13&&u>=13&&(g=g.next(()=>function(S){const O=S.createObjectStore("remoteDocumentsV14",{keyPath:Nu});O.createIndex("documentKeyIndex",xs),O.createIndex("collectionGroupIndex",aa)}(e)).next(()=>this._i(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(g=g.next(()=>this.ai(e,d))),s<15&&u>=15&&(g=g.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:kr}).createIndex("sequenceNumberIndex",Ga,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:no}).createIndex("documentKeyIndex",ro,{unique:!1})}(e))),s<16&&u>=16&&(g=g.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&u>=17&&(g=g.next(()=>{!function(S){S.createObjectStore("globals",{keyPath:"name"})}(e)})),g}ri(e){let r=0;return e.store("remoteDocuments").J((s,u)=>{r+=ba(u)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(u=>me.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",g).next(w=>me.forEach(w,S=>{bt(S.userId===d.userId);const O=su(this.serializer,S);return Mf(e,d.userId,O).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return s.J((g,w)=>{const S=new wt(g),O=[0,ar(S)];d.push(r.get(O).next(j=>j?me.resolve():r.put({targetId:0,path:ar(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>me.waitFor(d))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:to});const s=r.store("collectionParents"),u=new Sf,d=g=>{if(u.add(g)){const w=g.lastSegment(),S=g.popLast();return s.put({collectionId:w,parent:ar(S)})}};return r.store("remoteDocuments").J({H:!0},(g,w)=>{const S=new wt(g);return d(S.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([g,w,S],O)=>{const j=Ki(w);return d(j.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,u)=>{const d=po(u),g=zu(this.serializer,d);return r.put(g)})}_i(e,r){const s=r.store("remoteDocuments"),u=[];return s.J((d,g)=>{const w=r.store("remoteDocumentsV14"),S=(K=g,K.document?new It(wt.fromString(K.document.name).popFirst(5)):K.noDocument?It.fromSegments(K.noDocument.path):K.unknownDocument?It.fromSegments(K.unknownDocument.path):it()).path.toArray(),O={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var K;u.push(w.put(O))}).next(()=>me.waitFor(u))}ai(e,r){const s=r.store("mutations"),u=gh(this.serializer),d=new Sa(ql.Zr,this.serializer.ct);return s.U().next(g=>{const w=new Map;return g.forEach(S=>{var O;let j=null!==(O=w.get(S.userId))&&void 0!==O?O:Lt();su(this.serializer,S).keys().forEach(K=>j=j.add(K)),w.set(S.userId,j)}),me.forEach(w,(S,O)=>{const j=new bn(O),K=ou.lt(this.serializer,j),oe=d.getIndexManager(j),Me=Hl.lt(j,this.serializer,oe,d.referenceDelegate);return new _h(u,Me,K,oe).recalculateAndSaveOverlaysForDocumentKeys(new tr(r,zr.oe),S).next()})})}}function Ql(a){a.createObjectStore("targetDocuments",{keyPath:Or}).createIndex("documentTargetsIndex",Jr,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wn,{unique:!0}),a.createObjectStore("targetGlobal")}const vh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ec{constructor(e,r,s,u,d,g,w,S,O,j,K=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=d,this.window=g,this.document=w,this.ci=O,this.li=j,this.hi=K,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=oe=>Promise.resolve(),!ec.D())throw new Xe(xe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vg(this,u),this.Ai=r+"main",this.serializer=new Oc(S),this.Ri=new Xr(this.Ai,this.hi,new Eg(this.serializer)),this.$r=new Vl,this.Ur=new yg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gh(this.serializer),this.Gr=new oh,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===j&&zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(xe.FAILED_PRECONDITION,vh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,ue.A)(function*(u){if(r.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,ue.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ue.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(us(e))return Ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ra(e).get("owner").next(r=>me.resolve(this.vi(r)))}Ci(e){return Yl(e).delete(this.clientId)}Fi(){var e=this;return(0,ue.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=sr(s,"clientMetadata");return u.U().next(d=>{const g=e.xi(d,18e5),w=d.filter(S=>-1===g.indexOf(S));return me.forEach(w,S=>u.delete(S.clientId)).next(()=>w)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?me.resolve(!0):Ra(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Xe(xe.FAILED_PRECONDITION,vh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yl(e).U().next(s=>void 0===this.xi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&Ce("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,ue.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new tr(r,zr.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Yl(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Hl.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mg(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ou.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){Ce("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",d=17===(S=this.hi)?Os:16===S?Sr:15===S?io:14===S?Gr:13===S?Bn:12===S?cn:11===S?At:void it();var S;let g;return this.Ri.runTransaction(e,u,d,w=>(g=new tr(w,this.Qr?this.Qr.next():zr.oe),"readwrite-primary"===r?this.wi(g).next(S=>!!S||this.Si(g)).next(S=>{if(!S)throw zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Xe(xe.FAILED_PRECONDITION,nn);return s(g)}).next(S=>this.Di(g).next(()=>S)):this.Ki(g).next(()=>s(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Ki(e){return Ra(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Xe(xe.FAILED_PRECONDITION,vh)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ra(e).put("owner",r)}static D(){return Xr.D()}bi(e){const r=Ra(e);return r.get("owner").next(s=>this.vi(s)?(Ce("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):me.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(zn(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,Mt.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return Ce("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return zn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){zn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ra(a){return sr(a,"owner")}function Yl(a){return sr(a,"clientMetadata")}function Xl(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class Jl{constructor(e,r,s,u){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=u}static Wi(e,r){let s=Lt(),u=Lt();for(const d of r.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Jl(e,r.fromCache,s,u)}}class Uf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Tg{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Mt.nr)()?8:zi((0,Mt.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,u){const d={result:null};return this.Yi(e,r).next(g=>{d.result=g}).next(()=>{if(!d.result)return this.Zi(e,r,u,s).next(g=>{d.result=g})}).next(()=>{if(d.result)return;const g=new Uf;return this.Xi(e,r,g).next(w=>{if(d.result=w,this.zi)return this.es(e,r,g,w.size)})}).next(()=>d.result)}es(e,r,s,u){return s.documentReadCount<this.ji?(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",St(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),me.resolve()):(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","Query:",St(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Hi*u?(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",St(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,A(r))):me.resolve())}Yi(e,r){if(Ja(r))return me.resolve(null);let s=A(r);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=ee(r,null,"F"),s=A(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=Lt(...d);return this.Ji.getDocuments(e,g).next(w=>this.indexManager.getMinOffset(e,s).next(S=>{const O=this.ts(r,w);return this.ns(r,O,g,S.readTime)?this.Yi(e,ee(r,null,"F")):this.rs(e,O,r,S)}))})))}Zi(e,r,s,u){return Ja(r)||u.isEqual(mt.min())?me.resolve(null):this.Ji.getDocuments(e,s).next(d=>{const g=this.ts(r,d);return this.ns(r,g,s,u)?me.resolve(null):(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),St(r)),this.rs(e,g,r,Ie(u,-1)).next(w=>w))})}ts(e,r){let s=new sn(Fn(e));return r.forEach((u,d)=>{Ln(e,d)&&(s=s.add(d))}),s}ns(e,r,s,u){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const d="F"===e.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(e,r,s){return yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",St(r)),this.Ji.getDocumentsMatchingQuery(e,r,ft.min(),s)}rs(e,r,s,u){return this.Ji.getDocumentsMatchingQuery(e,s,u).next(d=>(r.forEach(g=>{d=d.insert(g.key,g)}),d))}}class wg{constructor(e,r,s,u){this.persistence=e,this.ss=r,this.serializer=u,this.os=new mn(Re),this._s=new Kn(d=>Oo(d),ko),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _h(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Bf(a,e,r,s){return new wg(a,e,r,s)}function Zl(a,e){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,ue.A)(function*(a,e){const r=ct(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(d=>(u=d,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],w=[];let S=Lt();for(const O of u){g.push(O.batchId);for(const j of O.mutations)S=S.add(j.key)}for(const O of d){w.push(O.batchId);for(const j of O.mutations)S=S.add(j.key)}return r.localDocuments.getDocuments(s,S).next(O=>({hs:O,removedBatchIds:g,addedBatchIds:w}))})})})).apply(this,arguments)}function ed(a){const e=ct(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Eh(a,e,r){let s=Lt(),u=Lt();return r.forEach(d=>s=s.add(d)),e.getEntries(a,s).next(d=>{let g=Nn();return r.forEach((w,S)=>{const O=d.get(w);S.isFoundDocument()!==O.isFoundDocument()&&(u=u.add(w)),S.isNoDocument()&&S.version.isEqual(mt.min())?(e.removeEntry(w,S.readTime),g=g.insert(w,S)):!O.isValidDocument()||S.version.compareTo(O.version)>0||0===S.version.compareTo(O.version)&&O.hasPendingWrites?(e.addEntry(S),g=g.insert(w,S)):Ce("LocalStore","Ignoring outdated watch update for ",w,". Current version:",O.version," Watch version:",S.version)}),{Ps:g,Is:u}})}function $f(a,e){const r=ct(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Gc(a,e){const r=ct(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.Ur.getTargetData(s,e).next(d=>d?(u=d,me.resolve(u)):r.Ur.allocateTargetId(s).next(g=>(u=new _s(e,g,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.os.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function Wc(a,e,r){return tc.apply(this,arguments)}function tc(){return(tc=(0,ue.A)(function*(a,e,r){const s=ct(a),u=s.os.get(e),d=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!us(g))throw g;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.os=s.os.remove(e),s._s.delete(u.target)})).apply(this,arguments)}function hu(a,e,r){const s=ct(a);let u=mt.min(),d=Lt();return s.persistence.runTransaction("Execute query","readwrite",g=>function(S,O,j){const K=ct(S),oe=K._s.get(j);return void 0!==oe?me.resolve(K.os.get(oe)):K.Ur.getTargetData(O,j)}(s,g,A(e)).next(w=>{if(w)return u=w.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(g,w.targetId).next(S=>{d=S})}).next(()=>s.ss.getDocumentsMatchingQuery(g,e,r?u:mt.min(),r?d:Lt())).next(w=>(td(s,Mn(e),w),{documents:w,Ts:d})))}function Kc(a,e){const r=ct(a),s=ct(r.Ur),u=r.os.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>s.ot(d,e).next(g=>g?g.target:null))}function Th(a,e){const r=ct(a),s=r.us.get(e)||mt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,e,Ie(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(td(r,e,u),u))}function td(a,e,r){let s=a.us.get(e)||mt.min();r.forEach((u,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),a.us.set(e,s)}function Pa(){return(Pa=(0,ue.A)(function*(a,e,r,s){const u=ct(a);let d=Lt(),g=Nn();for(const O of r){const j=e.Es(O.metadata.name);O.document&&(d=d.add(j));const K=e.ds(O);K.setReadTime(e.As(O.metadata.readTime)),g=g.insert(j,K)}const w=u.cs.newChangeBuffer({trackRemovals:!0}),S=yield Gc(u,(j=s,A($s(wt.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",O=>Eh(O,w,g).next(j=>(w.apply(O),j)).next(j=>u.Ur.removeMatchingKeysForTargetId(O,S.targetId).next(()=>u.Ur.addMatchingKeys(O,d,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(O,j.Ps,j.Is)).next(()=>j.Ps)))})).apply(this,arguments)}function zf(a,e){return nd.apply(this,arguments)}function nd(){return(nd=(0,ue.A)(function*(a,e,r=Lt()){const s=yield Gc(a,A(Gu(e.bundledQuery))),u=ct(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=Jt(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return u.Gr.saveNamedQuery(d,e);const w=s.withResumeToken(qn.EMPTY_BYTE_STRING,g);return u.os=u.os.insert(w.targetId,w),u.Ur.updateTargetData(d,w).next(()=>u.Ur.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,s.targetId)).next(()=>u.Gr.saveNamedQuery(d,e))})})).apply(this,arguments)}function Ko(a,e){return`firestore_clients_${a}_${e}`}function qc(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function fu(a,e){return`firestore_targets_${a}_${e}`}class rd{constructor(e,r,s,u){this.user=e,this.batchId=r,this.state=s,this.error=u}static Rs(e,r,s){const u=JSON.parse(s);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new Xe(u.error.code,u.error.message))),g?new rd(e,r,u.state,d):(zn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qc{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Xe(s.error.code,s.error.message))),d?new Qc(e,s.state,u):(zn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class id{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,d=zs();for(let g=0;u&&g<s.activeTargetIds.length;++g)u=sa(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return u?new id(e,d):(zn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class sd{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new sd(r.clientId,r.onlineState):(zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nc{constructor(){this.activeTargetIds=zs()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yc{constructor(e,r,s,u,d){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new mn(Re),this.started=!1,this.bs=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=Ko(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new nc),this.Cs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.A)(function*(){const r=yield e.syncEngine.Qi();for(const u of r){if(u===e.ps)continue;const d=e.getItem(Ko(e.persistenceKey,u));if(d){const g=id.Rs(u,d);g&&(e.Ss=e.Ss.insert(g.clientId,g))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const u=e.Ls(s);u&&e.Bs(u)}for(const u of e.bs)e.ws(u);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e,r=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(fu(this.persistenceKey,e));if(u){const d=Qc.Rs(e,u);d&&(s=d.state)}}return r&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fu(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(u=>{this.Qs(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ce("SharedClientState","READ",e,r),r}setItem(e,r){Ce("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if(Ce("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ue.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const u=r.Gs(s.key);return r.zs(u,null)}{const u=r.js(s.key,s.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const u=r.Hs(s.key,s.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const u=r.Ys(s.key,s.newValue);if(u)return r.Zs(u)}}else if(s.key===r.xs){if(null!==s.newValue){const u=r.Ls(s.newValue);if(u)return r.Bs(u)}}else if(s.key===r.vs){const u=function(g){let w=zr.oe;if(null!=g)try{const S=JSON.parse(g);bt("number"==typeof S),w=S}catch(S){zn("SharedClientState","Failed to read sequence number from WebStorage",S)}return w}(s.newValue);u!==zr.oe&&r.sequenceNumberHandler(u)}else if(s.key===r.Os){const u=r.Xs(s.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const u=new rd(this.currentUser,e,r,s),d=qc(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Vs())}Qs(e){const r=qc(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const u=fu(this.persistenceKey,e),d=new Qc(e,r,s);this.setItem(u,d.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return id.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),u=Number(s[1]);return rd.Rs(new bn(void 0!==s[2]?s[2]:null),u,r)}Ys(e,r){const s=this.Ms.exec(e),u=Number(s[1]);return Qc.Rs(u,r)}Ls(e){return sd.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,ue.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);Ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),u=this.ks(this.Ss),d=this.ks(s),g=[],w=[];return d.forEach(S=>{u.has(S)||g.push(S)}),u.forEach(S=>{d.has(S)||w.push(S)}),this.syncEngine.io(g,w).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=zs();return e.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class od{constructor(){this.so=new nc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nc,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gf{_o(e){}shutdown(){}}class wh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rc=null;function Ah(){return null===rc?rc=268435456+Math.round(2147483648*Math.random()):rc++,"0x"+rc.toString(16)}const Ir={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pu{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const fi="WebChannelConnection";class Dh extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,s,u,d,g){const w=Ah(),S=this.xo(r,s.toUriEncodedString());Ce("RestConnection",`Sending RPC '${r}' ${w}:`,S,u);const O={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(O,d,g),this.No(r,S,O,u).then(j=>(Ce("RestConnection",`Received RPC '${r}' ${w}: `,j),j),j=>{throw Wt("RestConnection",`RPC '${r}' ${w} failed with error: `,j,"url: ",S,"request:",u),j})}Lo(r,s,u,d,g,w){return this.Mo(r,s,u,d,g)}Oo(r,s,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+or,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((d,g)=>r[g]=d),u&&u.headers.forEach((d,g)=>r[g]=d)}xo(r,s){return`${this.Do}/v1/${s}:${Ir[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,u){const d=Ah();return new Promise((g,w)=>{const S=new Er;S.setWithCredentials(!0),S.listenOnce(Ei.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Fr.NO_ERROR:const j=S.getResponseJson();Ce(fi,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(j)),g(j);break;case Fr.TIMEOUT:Ce(fi,`RPC '${e}' ${d} timed out`),w(new Xe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Fr.HTTP_ERROR:const K=S.getStatus();if(Ce(fi,`RPC '${e}' ${d} failed with status:`,K,"response text:",S.getResponseText()),K>0){let oe=S.getResponseJson();Array.isArray(oe)&&(oe=oe[0]);const Me=oe?.error;if(Me&&Me.status&&Me.message){const Je=function(st){const kt=st.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(kt)>=0?kt:xe.UNKNOWN}(Me.status);w(new Xe(Je,Me.message))}else w(new Xe(xe.UNKNOWN,"Server responded with status "+S.getStatus()))}else w(new Xe(xe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ce(fi,`RPC '${e}' ${d} completed.`)}});const O=JSON.stringify(u);Ce(fi,`RPC '${e}' ${d} sending request:`,u),S.send(r,"POST",O,s,15)})}Bo(e,r,s){const u=Ah(),d=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Kt(),w=hn(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},O=this.longPollingOptions.timeoutSeconds;void 0!==O&&(S.longPollingTimeout=Math.round(1e3*O)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Oo(S.initMessageHeaders,r,s),S.encodeInitMessageHeaders=!0;const j=d.join("");Ce(fi,`Creating RPC '${e}' stream ${u}: ${j}`,S);const K=g.createWebChannel(j,S);let oe=!1,Me=!1;const Je=new pu({Io:st=>{Me?Ce(fi,`Not sending because RPC '${e}' stream ${u} is closed:`,st):(oe||(Ce(fi,`Opening RPC '${e}' stream ${u} transport.`),K.open(),oe=!0),Ce(fi,`RPC '${e}' stream ${u} sending:`,st),K.send(st))},To:()=>K.close()}),ht=(st,kt,Ht)=>{st.listen(kt,Tt=>{try{Ht(Tt)}catch(zt){setTimeout(()=>{throw zt},0)}})};return ht(K,Nr.EventType.OPEN,()=>{Me||(Ce(fi,`RPC '${e}' stream ${u} transport opened.`),Je.yo())}),ht(K,Nr.EventType.CLOSE,()=>{Me||(Me=!0,Ce(fi,`RPC '${e}' stream ${u} transport closed`),Je.So())}),ht(K,Nr.EventType.ERROR,st=>{Me||(Me=!0,Wt(fi,`RPC '${e}' stream ${u} transport errored:`,st),Je.So(new Xe(xe.UNAVAILABLE,"The operation could not be completed")))}),ht(K,Nr.EventType.MESSAGE,st=>{var kt;if(!Me){const Ht=st.data[0];bt(!!Ht);const zt=Ht.error||(null===(kt=Ht[0])||void 0===kt?void 0:kt.error);if(zt){Ce(fi,`RPC '${e}' stream ${u} received error:`,zt);const yn=zt.status;let ln=function(le){const ye=Ur[le];if(void 0!==ye)return Qr(ye)}(yn),ge=zt.message;void 0===ln&&(ln=xe.INTERNAL,ge="Unknown error status: "+yn+" with message "+zt.message),Me=!0,Je.So(new Xe(ln,ge)),K.close()}else Ce(fi,`RPC '${e}' stream ${u} received:`,Ht),Je.bo(Ht)}}),ht(w,qt.STAT_EVENT,st=>{st.stat===Zn.PROXY?Ce(fi,`RPC '${e}' stream ${u} detected buffering proxy`):st.stat===Zn.NOPROXY&&Ce(fi,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Je.wo()},0),Je}}function ai(){return typeof window<"u"?window:null}function mo(){return typeof document<"u"?document:null}function ic(a){return new Pe(a,!0)}class Xc{constructor(e,r,s=1e3,u=1.5,d=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-s);u>0&&Ce("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Wf{constructor(e,r,s,u,d,g,w,S){this.ui=e,this.Ho=s,this.Jo=u,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=S,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xc(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ue.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ue.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,ue.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===xe.RESOURCE_EXHAUSTED?(zn(r.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===xe.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Yo===r&&this.P_(s,u)},s=>{e(()=>{const u=new Xe(xe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(u)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{s(()=>this.I_(u))}),this.stream.onMessage(u=>{s(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var e=this;this.state=5,this.t_.Go((0,ue.A)(function*(){e.state=0,e.start()}))}I_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qo extends Wf{constructor(e,r,s,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function nh(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:it(),u=e.targetChange.targetIds||[],d=function(O,j){return O.useProto3Json?(bt(void 0===j||"string"==typeof j),qn.fromBase64String(j||"")):(bt(void 0===j||j instanceof Buffer||j instanceof Uint8Array),qn.fromUint8Array(j||new Uint8Array))}(a,e.targetChange.resumeToken),g=e.targetChange.cause,w=g&&function(O){const j=void 0===O.code?xe.UNKNOWN:Qr(O.code);return new Xe(j,O.message||"")}(g);r=new E(s,u,d,w||null)}else if("documentChange"in e){const s=e.documentChange,u=ms(a,s.document.name),d=Jt(s.document.updateTime),g=s.document.createTime?Jt(s.document.createTime):mt.min(),w=new Kr({mapValue:{fields:s.document.fields}}),S=rr.newFoundDocument(u,d,g,w);r=new Ia(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=ms(a,s.document),d=s.readTime?Jt(s.readTime):mt.min(),g=rr.newNoDocument(u,d);r=new Ia([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,u=ms(a,s.document);r=new Ia([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return it();{const s=e.filter,{count:u=0,unchangedNames:d}=s,g=new Rc(u,d);r=new Fl(s.targetId,g)}}var O;return r}(this.serializer,e),s=function(d){if(!("targetChange"in d))return mt.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?mt.min():g.readTime?Jt(g.readTime):mt.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=Ss(this.serializer),r.addTarget=function(d,g){let w;const S=g.target;if(w=co(S)?{documents:ru(d,S)}:{query:fo(d,S)._t},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=In(d,g.resumeToken);const O=Dt(d,g.expectedCount);null!==O&&(w.expectedCount=O)}else if(g.snapshotVersion.compareTo(mt.min())>0){w.readTime=un(d,g.snapshotVersion.toTimestamp());const O=Dt(d,g.expectedCount);null!==O&&(w.expectedCount=O)}return w}(this.serializer,e);const s=function xc(a,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=Ss(this.serializer),r.removeTarget=e,this.a_(r)}}class Kf extends Wf{constructor(e,r,s,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function rh(a,e){return a&&a.length>0?(bt(void 0!==e),a.map(r=>function(u,d){let g=Jt(u.updateTime?u.updateTime:d);return g.isEqual(mt.min())&&(g=Jt(d)),new Cc(g,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=Jt(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=Ss(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>Ea(this.serializer,s))};this.a_(r)}}class qf extends class{}{constructor(e,r,s,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Xe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Mo(e,Ho(r,s),u,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Xe(xe.UNKNOWN,d.toString())})}Lo(e,r,s,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.Lo(e,Ho(r,s),u,g,w,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Xe(xe.UNKNOWN,g.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ag{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zn(r),this.D_=!1):Ce("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Qf{constructor(e,r,s,u,d){var g=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(w=>{s.enqueueAndForget((0,ue.A)(function*(){var S;Xs(g)&&(Ce("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,ue.A)(function*(j){const K=ct(j);K.L_.add(4),yield _o(K),K.q_.set("Unknown"),K.L_.delete(4),yield sc(K)}),function O(j){return S.apply(this,arguments)})(g))}))}),this.q_=new Ag(s,u)}}function sc(a){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,ue.A)(function*(a){if(Xs(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function _o(a){return gu.apply(this,arguments)}function gu(){return(gu=(0,ue.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function ad(a,e){const r=ct(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ud(r)?Jc(r):vu(r).r_()&&mu(r,e))}function pi(a,e){const r=ct(a),s=vu(r);r.N_.delete(e),s.r_()&&Ch(r,e),0===r.N_.size&&(s.r_()?s.o_():Xs(r)&&r.q_.set("Unknown"))}function mu(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}vu(a).A_(e)}function Ch(a,e){a.Q_.xe(e),vu(a).R_(e)}function Jc(a){a.Q_=new v({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),vu(a).start(),a.q_.v_()}function ud(a){return Xs(a)&&!vu(a).n_()&&a.N_.size>0}function Xs(a){return 0===ct(a).L_.size}function _u(a){a.Q_=void 0}function cd(a){return ld.apply(this,arguments)}function ld(){return(ld=(0,ue.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function bh(a){return m.apply(this,arguments)}function m(){return(m=(0,ue.A)(function*(a){a.N_.forEach((e,r)=>{mu(a,e)})})).apply(this,arguments)}function l(a,e){return h.apply(this,arguments)}function h(){return(h=(0,ue.A)(function*(a,e){_u(a),ud(a)?(a.q_.M_(e),Jc(a)):a.q_.set("Unknown")})).apply(this,arguments)}function y(a,e,r){return M.apply(this,arguments)}function M(){return M=(0,ue.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof E&&2===e.state&&e.cause)try{yield(s=(0,ue.A)(function*(d,g){const w=g.cause;for(const S of g.targetIds)d.N_.has(S)&&(yield d.remoteSyncer.rejectListen(S,w),d.N_.delete(S),d.Q_.removeTarget(S))}),function u(d,g){return s.apply(this,arguments)})(a,e)}catch(s){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield B(a,s)}else if(e instanceof Ia?a.Q_.Ke(e):e instanceof Fl?a.Q_.He(e):a.Q_.We(e),!r.isEqual(mt.min()))try{const s=yield ed(a.localStore);r.compareTo(s)>=0&&(yield function(d,g){const w=d.Q_.rt(g);return w.targetChanges.forEach((S,O)=>{if(S.resumeToken.approximateByteSize()>0){const j=d.N_.get(O);j&&d.N_.set(O,j.withResumeToken(S.resumeToken,g))}}),w.targetMismatches.forEach((S,O)=>{const j=d.N_.get(S);if(!j)return;d.N_.set(S,j.withResumeToken(qn.EMPTY_BYTE_STRING,j.snapshotVersion)),Ch(d,S);const K=new _s(j.target,S,O,j.sequenceNumber);mu(d,K)}),d.remoteSyncer.applyRemoteEvent(w)}(a,r))}catch(s){Ce("RemoteStore","Failed to raise snapshot:",s),yield B(a,s)}var s}),M.apply(this,arguments)}function B(a,e,r){return ie.apply(this,arguments)}function ie(){return(ie=(0,ue.A)(function*(a,e,r){if(!us(e))throw e;a.L_.add(1),yield _o(a),a.q_.set("Offline"),r||(r=()=>ed(a.localStore)),a.asyncQueue.enqueueRetryable((0,ue.A)(function*(){Ce("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield sc(a)}))})).apply(this,arguments)}function Ee(a,e){return e().catch(r=>B(a,r,e))}function ze(a){return Et.apply(this,arguments)}function Et(){return(Et=(0,ue.A)(function*(a){const e=ct(a),r=Qo(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ot(e);)try{const u=yield $f(e.localStore,s);if(null===u){0===e.O_.length&&r.o_();break}s=u.batchId,Ft(e,u)}catch(u){yield B(e,u)}Mr(e)&&ts(e)})).apply(this,arguments)}function Ot(a){return Xs(a)&&a.O_.length<10}function Ft(a,e){a.O_.push(e);const r=Qo(a);r.r_()&&r.V_&&r.m_(e.mutations)}function Mr(a){return Xs(a)&&!Qo(a).n_()&&a.O_.length>0}function ts(a){Qo(a).start()}function Zc(a){return yo.apply(this,arguments)}function yo(){return(yo=(0,ue.A)(function*(a){Qo(a).p_()})).apply(this,arguments)}function dd(a){return el.apply(this,arguments)}function el(){return(el=(0,ue.A)(function*(a){const e=Qo(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function Yf(a,e,r){return hd.apply(this,arguments)}function hd(){return(hd=(0,ue.A)(function*(a,e,r){const s=a.O_.shift(),u=Ws.from(s,e,r);yield Ee(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield ze(a)})).apply(this,arguments)}function tl(a,e){return fd.apply(this,arguments)}function fd(){return fd=(0,ue.A)(function*(a,e){var r;e&&Qo(a).V_&&(yield(r=(0,ue.A)(function*(u,d){if(Pc(w=d.code)&&w!==xe.ABORTED){const g=u.O_.shift();Qo(u).s_(),yield Ee(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,d)),yield ze(u)}var w}),function s(u,d){return r.apply(this,arguments)})(a,e)),Mr(a)&&ts(a)}),fd.apply(this,arguments)}function nl(a,e){return rl.apply(this,arguments)}function rl(){return(rl=(0,ue.A)(function*(a,e){const r=ct(a);r.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const s=Xs(r);r.L_.add(3),yield _o(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield sc(r)})).apply(this,arguments)}function pd(a,e){return yu.apply(this,arguments)}function yu(){return(yu=(0,ue.A)(function*(a,e){const r=ct(a);e?(r.L_.delete(2),yield sc(r)):e||(r.L_.add(2),yield _o(r),r.q_.set("Unknown"))})).apply(this,arguments)}function vu(a){return a.K_||(a.K_=function(r,s,u){const d=ct(r);return d.w_(),new qo(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:cd.bind(null,a),Ro:bh.bind(null,a),mo:l.bind(null,a),d_:y.bind(null,a)}),a.B_.push(function(){var e=(0,ue.A)(function*(r){r?(a.K_.s_(),ud(a)?Jc(a):a.q_.set("Unknown")):(yield a.K_.stop(),_u(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function Qo(a){return a.U_||(a.U_=function(r,s,u){const d=ct(r);return d.w_(),new Kf(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zc.bind(null,a),mo:tl.bind(null,a),f_:dd.bind(null,a),g_:Yf.bind(null,a)}),a.B_.push(function(){var e=(0,ue.A)(function*(r){r?(a.U_.s_(),yield ze(a)):(yield a.U_.stop(),a.O_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class il{constructor(e,r,s,u,d){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=d,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,u,d){const g=Date.now()+s,w=new il(e,r,g,u,d);return w.start(s),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sl(a,e){if(zn("AsyncQueue",`${e}: ${a}`),us(a))return new Xe(xe.UNAVAILABLE,`${e}: ${a}`);throw a}class oc{constructor(e){this.comparator=e?(r,s)=>e(r,s)||It.comparator(r.key,s.key):(r,s)=>It.comparator(r.key,s.key),this.keyedMap=ni(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new oc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof oc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new oc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Sh{constructor(){this.W_=new mn(It.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):it():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class ol{constructor(e,r,s,u,d,g,w,S,O){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=S,this.hasCachedResults=O}static fromInitialDocuments(e,r,s,u,d){const g=[];return r.forEach(w=>{g.push({type:0,doc:w})}),new ol(e,r,oc.emptySet(r),g,s,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class Dg{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Rh{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const u=ct(r),d=u.queries;u.queries=l_(),d.forEach((g,w)=>{for(const S of w.j_)S.onError(s)})}(this,new Xe(xe.ABORTED,"Firestore shutting down"))}}function l_(){return new Kn(a=>nt(a),Oe)}function Xf(a,e){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,ue.A)(function*(a,e){const r=ct(a);let s=3;const u=e.query;let d=r.queries.get(u);d?!d.H_()&&e.J_()&&(s=2):(d=new Dg,s=e.J_()?0:1);try{switch(s){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(g){const w=sl(g,`Initialization of query '${St(e.query)}' failed`);return void e.onError(w)}r.queries.set(u,d),d.j_.push(e),e.Z_(r.onlineState),d.z_&&e.X_(d.z_)&&gd(r)})).apply(this,arguments)}function bg(a,e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ue.A)(function*(a,e){const r=ct(a),s=e.query;let u=3;const d=r.queries.get(s);if(d){const g=d.j_.indexOf(e);g>=0&&(d.j_.splice(g,1),0===d.j_.length?u=e.J_()?0:1:!d.H_()&&e.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function d_(a,e){const r=ct(a);let s=!1;for(const u of e){const g=r.queries.get(u.query);if(g){for(const w of g.j_)w.X_(u)&&(s=!0);g.z_=u}}s&&gd(r)}function h_(a,e,r){const s=ct(a),u=s.queries.get(e);if(u)for(const d of u.j_)d.onError(r);s.queries.delete(e)}function gd(a){a.Y_.forEach(e=>{e.next()})}var Ph,al;(al=Ph||(Ph={})).ea="default",al.Cache="cache";class Rg{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ph.Cache}}class Cv{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class bv{constructor(e){this.serializer=e}Es(e){return ms(this.serializer,e)}ds(e){return e.metadata.exists?Nc(this.serializer,e.document,!1):rr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Jt(e)}}class Sv{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jf(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=wt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new bv(this.serializer);for(const u of e)if(u.metadata.queries){const d=s.Es(u.metadata.name);for(const g of u.metadata.queries){const w=(r.get(g)||Lt()).add(d);r.set(g,w)}}return r}complete(){var e=this;return(0,ue.A)(function*(){const r=yield function Hf(a,e,r,s){return Pa.apply(this,arguments)}(e.localStore,new bv(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const u of e.queries)yield zf(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function Jf(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class f_{constructor(e){this.key=e}}class ul{constructor(e){this.key=e}}class Mh{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Lt(),this.mutatedKeys=Lt(),this.Aa=Fn(e),this.Ra=new oc(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Sh,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,g=u,w=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,O="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((j,K)=>{const oe=u.get(j),Me=Ln(this.query,K)?K:null,Je=!!oe&&this.mutatedKeys.has(oe.key),ht=!!Me&&(Me.hasLocalMutations||this.mutatedKeys.has(Me.key)&&Me.hasCommittedMutations);let st=!1;oe&&Me?oe.data.isEqual(Me.data)?Je!==ht&&(s.track({type:3,doc:Me}),st=!0):this.ga(oe,Me)||(s.track({type:2,doc:Me}),st=!0,(S&&this.Aa(Me,S)>0||O&&this.Aa(Me,O)<0)&&(w=!0)):!oe&&Me?(s.track({type:0,doc:Me}),st=!0):oe&&!Me&&(s.track({type:1,doc:oe}),st=!0,(S||O)&&(w=!0)),st&&(Me?(g=g.add(Me),d=ht?d.add(j):d.delete(j)):(g=g.delete(j),d=d.delete(j)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const j="F"===this.query.limitType?g.last():g.first();g=g.delete(j.key),d=d.delete(j.key),s.track({type:1,doc:j})}return{Ra:g,fa:s,ns:w,mutatedKeys:d}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,u){const d=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const g=e.fa.G_();g.sort((j,K)=>function(Me,Je){const ht=st=>{switch(st){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return ht(Me)-ht(Je)}(j.type,K.type)||this.Aa(j.doc,K.doc)),this.pa(s),u=null!=u&&u;const w=r&&!u?this.ya():[],S=0===this.da.size&&this.current&&!u?1:0,O=S!==this.Ea;return this.Ea=S,0!==g.length||O?{snapshot:new ol(this.query,e.Ra,d,g,e.mutatedKeys,0===S,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:w}:{wa:w}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Lt(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new ul(s))}),this.da.forEach(s=>{e.has(s)||r.push(new f_(s))}),r}ba(e){this.Ta=e.Ts,this.da=Lt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ol.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Pg{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class p_{constructor(e){this.key=e,this.va=!1}}class g_{constructor(e,r,s,u,d,g){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.Ca={},this.Fa=new Kn(w=>nt(w),Oe),this.Ma=new Map,this.xa=new Set,this.Oa=new mn(It.comparator),this.Na=new Map,this.La=new Wl,this.Ba={},this.ka=new Map,this.qa=Ys.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function m_(a,e){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,ue.A)(function*(a,e,r=!0){const s=zg(a);let u;const d=s.Fa.get(e);return d?(s.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield __(s,e,r,!0),u})).apply(this,arguments)}function Rv(a,e){return Mg.apply(this,arguments)}function Mg(){return(Mg=(0,ue.A)(function*(a,e){const r=zg(a);yield __(r,e,!0,!1)})).apply(this,arguments)}function __(a,e,r,s){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ue.A)(function*(a,e,r,s){const u=yield Gc(a.localStore,A(e)),d=u.targetId,g=a.sharedClientState.addLocalQueryTarget(d,r);let w;return s&&(w=yield xg(a,e,d,"current"===g,u.resumeToken)),a.isPrimaryClient&&r&&ad(a.remoteStore,u),w})).apply(this,arguments)}function xg(a,e,r,s,u){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,ue.A)(function*(a,e,r,s,u){a.Ka=(K,oe,Me)=>{return(Je=(0,ue.A)(function*(st,kt,Ht,Tt){let zt=kt.view.ma(Ht);zt.ns&&(zt=yield hu(st.localStore,kt.query,!1).then(({documents:te})=>kt.view.ma(te,zt)));const yn=Tt&&Tt.targetChanges.get(kt.targetId),ln=Tt&&null!=Tt.targetMismatches.get(kt.targetId),ge=kt.view.applyChanges(zt,st.isPrimaryClient,yn,ln);return kh(st,kt.targetId,ge.wa),ge.snapshot}),function ht(st,kt,Ht,Tt){return Je.apply(this,arguments)})(a,K,oe,Me);var Je};const d=yield hu(a.localStore,e,!0),g=new Mh(e,d.Ts),w=g.ma(d.documents),S=ho.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,u),O=g.applyChanges(w,a.isPrimaryClient,S);kh(a,r,O.wa);const j=new Pg(e,r,g);return a.Fa.set(e,j),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),O.snapshot}),Ma.apply(this,arguments)}function Nh(a,e,r){return Og.apply(this,arguments)}function Og(){return(Og=(0,ue.A)(function*(a,e,r){const s=ct(a),u=s.Fa.get(e),d=s.Ma.get(u.targetId);if(d.length>1)return s.Ma.set(u.targetId,d.filter(g=>!Oe(g,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Wc(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),r&&pi(s.remoteStore,u.targetId),Oh(s,u.targetId)}).catch(Cn))):(Oh(s,u.targetId),yield Wc(s.localStore,u.targetId,!0))})).apply(this,arguments)}function wE(a,e){return y_.apply(this,arguments)}function y_(){return(y_=(0,ue.A)(function*(a,e){const r=ct(a),s=r.Fa.get(e),u=r.Ma.get(s.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),pi(r.remoteStore,s.targetId))})).apply(this,arguments)}function v_(){return(v_=(0,ue.A)(function*(a,e,r){const s=D_(a);try{const u=yield function(g,w){const S=ct(g),O=vt.now(),j=w.reduce((Me,Je)=>Me.add(Je.key),Lt());let K,oe;return S.persistence.runTransaction("Locally write mutations","readwrite",Me=>{let Je=Nn(),ht=Lt();return S.cs.getEntries(Me,j).next(st=>{Je=st,Je.forEach((kt,Ht)=>{Ht.isValidDocument()||(ht=ht.add(kt))})}).next(()=>S.localDocuments.getOverlayedDocuments(Me,Je)).next(st=>{K=st;const kt=[];for(const Ht of w){const Tt=eh(Ht,K.get(Ht.key).overlayedDocument);null!=Tt&&kt.push(new di(Ht.key,Tt,qa(Tt.value.mapValue),jn.exists(!0)))}return S.mutationQueue.addMutationBatch(Me,O,kt,w)}).next(st=>{oe=st;const kt=st.applyToLocalDocumentSet(K,ht);return S.documentOverlayCache.saveOverlays(Me,st.batchId,kt)})}).then(()=>({batchId:oe.batchId,changes:Hs(K)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(g,w,S){let O=g.Ba[g.currentUser.toKey()];O||(O=new mn(Re)),O=O.insert(w,S),g.Ba[g.currentUser.toKey()]=O}(s,u.batchId,r),yield ac(s,u.changes),yield ze(s.remoteStore)}catch(u){const d=sl(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function Pv(a,e){return ep.apply(this,arguments)}function ep(){return(ep=(0,ue.A)(function*(a,e){const r=ct(a);try{const s=yield function c_(a,e){const r=ct(a),s=e.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const w=[];e.targetChanges.forEach((j,K)=>{const oe=u.get(K);if(!oe)return;w.push(r.Ur.removeMatchingKeys(d,j.removedDocuments,K).next(()=>r.Ur.addMatchingKeys(d,j.addedDocuments,K)));let Me=oe.withSequenceNumber(d.currentSequenceNumber);var ht,st,kt;null!==e.targetMismatches.get(K)?Me=Me.withResumeToken(qn.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):j.resumeToken.approximateByteSize()>0&&(Me=Me.withResumeToken(j.resumeToken,s)),u=u.insert(K,Me),st=Me,kt=j,(0===(ht=oe).resumeToken.approximateByteSize()||st.snapshotVersion.toMicroseconds()-ht.snapshotVersion.toMicroseconds()>=3e8||kt.addedDocuments.size+kt.modifiedDocuments.size+kt.removedDocuments.size>0)&&w.push(r.Ur.updateTargetData(d,Me))});let S=Nn(),O=Lt();if(e.documentUpdates.forEach(j=>{e.resolvedLimboDocuments.has(j)&&w.push(r.persistence.referenceDelegate.updateLimboDocument(d,j))}),w.push(Eh(d,g,e.documentUpdates).next(j=>{S=j.Ps,O=j.Is})),!s.isEqual(mt.min())){const j=r.Ur.getLastRemoteSnapshotVersion(d).next(K=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,s));w.push(j)}return me.waitFor(w).next(()=>g.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,S,O)).next(()=>S)}).then(d=>(r.os=u,d))}(r.localStore,e);e.targetChanges.forEach((u,d)=>{const g=r.Na.get(d);g&&(bt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.va=!0:u.modifiedDocuments.size>0?bt(g.va):u.removedDocuments.size>0&&(bt(g.va),g.va=!1))}),yield ac(r,s,e)}catch(s){yield Cn(s)}})).apply(this,arguments)}function I_(a,e,r){const s=ct(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.Fa.forEach((d,g)=>{const w=g.view.Z_(e);w.snapshot&&u.push(w.snapshot)}),function(g,w){const S=ct(g);S.onlineState=w;let O=!1;S.queries.forEach((j,K)=>{for(const oe of K.j_)oe.Z_(w)&&(O=!0)}),O&&gd(S)}(s.eventManager,e),u.length&&s.Ca.d_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Mv(a,e,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,ue.A)(function*(a,e,r){const s=ct(a);s.sharedClientState.updateQueryState(e,"rejected",r);const u=s.Na.get(e),d=u&&u.key;if(d){let g=new mn(It.comparator);g=g.insert(d,rr.newNoDocument(d,mt.min()));const w=Lt().add(d),S=new Vu(mt.min(),new Map,new mn(Re),g,w);yield Pv(s,S),s.Oa=s.Oa.remove(d),s.Na.delete(e),w_(s)}else yield Wc(s.localStore,e,!1).then(()=>Oh(s,e,r)).catch(Cn)})).apply(this,arguments)}function Nv(a,e){return xh.apply(this,arguments)}function xh(){return(xh=(0,ue.A)(function*(a,e){const r=ct(a),s=e.batch.batchId;try{const u=yield function jf(a,e){const r=ct(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(w,S,O,j){const K=O.batch,oe=K.keys();let Me=me.resolve();return oe.forEach(Je=>{Me=Me.next(()=>j.getEntry(S,Je)).next(ht=>{const st=O.docVersions.get(Je);bt(null!==st),ht.version.compareTo(st)<0&&(K.applyToRemoteDocument(ht,O),ht.isValidDocument()&&(ht.setReadTime(O.commitVersion),j.addEntry(ht)))})}),Me.next(()=>w.mutationQueue.removeMutationBatch(S,K))}(r,s,e,d).next(()=>d.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let S=Lt();for(let O=0;O<w.mutationResults.length;++O)w.mutationResults[O].transformResults.length>0&&(S=S.add(w.batch.mutations[O].key));return S}(e))).next(()=>r.localDocuments.getDocuments(s,u))})}(r.localStore,e);T_(r,s,null),np(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield ac(r,u)}catch(u){yield Cn(u)}})).apply(this,arguments)}function Iu(a,e,r){return cl.apply(this,arguments)}function cl(){return(cl=(0,ue.A)(function*(a,e,r){const s=ct(a);try{const u=yield function(g,w){const S=ct(g);return S.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let j;return S.mutationQueue.lookupMutationBatch(O,w).next(K=>(bt(null!==K),j=K.keys(),S.mutationQueue.removeMutationBatch(O,K))).next(()=>S.mutationQueue.performConsistencyCheck(O)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(O,j,w)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,j)).next(()=>S.localDocuments.getDocuments(O,j))})}(s.localStore,e);T_(s,e,r),np(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield ac(s,u)}catch(u){yield Cn(u)}})).apply(this,arguments)}function tp(){return(tp=(0,ue.A)(function*(a,e){const r=ct(a);Xs(r.remoteStore)||Ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=ct(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>w.mutationQueue.getHighestUnacknowledgedBatchId(S))}(r.localStore);if(-1===s)return void e.resolve();const u=r.ka.get(s)||[];u.push(e),r.ka.set(s,u)}catch(s){const u=sl(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function np(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function T_(a,e,r){const s=ct(a);let u=s.Ba[s.currentUser.toKey()];if(u){const d=u.get(e);d&&(r?d.reject(r):d.resolve(),u=u.remove(e)),s.Ba[s.currentUser.toKey()]=u}}function Oh(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||xv(a,s)})}function xv(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(pi(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),w_(a))}function kh(a,e,r){for(const s of r)s instanceof f_?(a.La.addReference(s.key,e),Lg(a,s)):s instanceof ul?(Ce("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||xv(a,s.key)):it()}function Lg(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||(Ce("SyncEngine","New document in limbo: "+r),a.xa.add(s),w_(a))}function w_(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new It(wt.fromString(e)),s=a.qa.next();a.Na.set(s,new p_(r)),a.Oa=a.Oa.insert(r,s),ad(a.remoteStore,new _s(A($s(r.path)),s,"TargetPurposeLimboResolution",zr.oe))}}function ac(a,e,r){return rp.apply(this,arguments)}function rp(){return rp=(0,ue.A)(function*(a,e,r){const s=ct(a),u=[],d=[],g=[];var w;s.Fa.isEmpty()||(s.Fa.forEach((w,S)=>{g.push(s.Ka(S,e,r).then(O=>{var j;if((O||r)&&s.isPrimaryClient){const K=O?!O.fromCache:null===(j=r?.targetChanges.get(S.targetId))||void 0===j?void 0:j.current;s.sharedClientState.updateQueryState(S.targetId,K?"current":"not-current")}if(O){u.push(O);const K=Jl.Wi(S.targetId,O);d.push(K)}}))}),yield Promise.all(g),s.Ca.d_(u),yield(w=(0,ue.A)(function*(O,j){const K=ct(O);try{yield K.persistence.runTransaction("notifyLocalViewChanges","readwrite",oe=>me.forEach(j,Me=>me.forEach(Me.$i,Je=>K.persistence.referenceDelegate.addReference(oe,Me.targetId,Je)).next(()=>me.forEach(Me.Ui,Je=>K.persistence.referenceDelegate.removeReference(oe,Me.targetId,Je)))))}catch(oe){if(!us(oe))throw oe;Ce("LocalStore","Failed to update sequence numbers: "+oe)}for(const oe of j){const Me=oe.targetId;if(!oe.fromCache){const Je=K.os.get(Me),st=Je.withLastLimboFreeSnapshotVersion(Je.snapshotVersion);K.os=K.os.insert(Me,st)}}}),function S(O,j){return w.apply(this,arguments)})(s.localStore,d))}),rp.apply(this,arguments)}function Ov(a,e){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,ue.A)(function*(a,e){const r=ct(a);if(!r.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const s=yield Zl(r.localStore,e);r.currentUser=e,(d=r).ka.forEach(w=>{w.forEach(S=>{S.reject(new Xe(xe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ac(r,s.hs)}var d})).apply(this,arguments)}function kv(a,e){const r=ct(a),s=r.Na.get(e);if(s&&s.va)return Lt().add(s.key);{let u=Lt();const d=r.Ma.get(e);if(!d)return u;for(const g of d){const w=r.Fa.get(g);u=u.unionWith(w.view.Va)}return u}}function Lv(a,e){return ip.apply(this,arguments)}function ip(){return(ip=(0,ue.A)(function*(a,e){const r=ct(a),s=yield hu(r.localStore,e.query,!0),u=e.view.ba(s);return r.isPrimaryClient&&kh(r,e.targetId,u.wa),u})).apply(this,arguments)}function sp(a,e){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,ue.A)(function*(a,e){const r=ct(a);return Th(r.localStore,e).then(s=>ac(r,s))})).apply(this,arguments)}function Ug(a,e,r,s){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,ue.A)(function*(a,e,r,s){const u=ct(a),d=yield function(w,S){const O=ct(w),j=ct(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",K=>j.Mn(K,S).next(oe=>oe?O.localDocuments.getDocuments(K,oe):me.resolve(null)))}(u.localStore,e);var S;null!==d?("pending"===r?yield ze(u.remoteStore):"acknowledged"===r||"rejected"===r?(T_(u,e,s||null),np(u,e),S=e,ct(ct(u.localStore).mutationQueue).On(S)):it(),yield ac(u,d)):Ce("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function jg(){return(jg=(0,ue.A)(function*(a,e){const r=ct(a);if(zg(r),D_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield A_(r,s.toArray());r.Qa=!0,yield pd(r.remoteStore,!0);for(const d of u)ad(r.remoteStore,d)}else if(!1===e&&!1!==r.Qa){const s=[];let u=Promise.resolve();r.Ma.forEach((d,g)=>{r.sharedClientState.isLocalQueryTarget(g)?s.push(g):u=u.then(()=>(Oh(r,g),Wc(r.localStore,g,!0))),pi(r.remoteStore,g)}),yield u,yield A_(r,s),function(g){const w=ct(g);w.Na.forEach((S,O)=>{pi(w.remoteStore,O)}),w.La.pr(),w.Na=new Map,w.Oa=new mn(It.comparator)}(r),r.Qa=!1,yield pd(r.remoteStore,!1)}})).apply(this,arguments)}function A_(a,e,r){return op.apply(this,arguments)}function op(){return(op=(0,ue.A)(function*(a,e,r){const s=ct(a),u=[],d=[];for(const g of e){let w;const S=s.Ma.get(g);if(S&&0!==S.length){w=yield Gc(s.localStore,A(S[0]));for(const O of S){const j=s.Fa.get(O),K=yield Lv(s,j);K.snapshot&&d.push(K.snapshot)}}else{const O=yield Kc(s.localStore,g);w=yield Gc(s.localStore,O),yield xg(s,$g(O),g,!1,w.resumeToken)}u.push(w)}return s.Ca.d_(d),u})).apply(this,arguments)}function $g(a){return wc(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Fv(a){return r=ct(a).localStore,ct(ct(r).persistence).Qi();var r}function Vv(a,e,r,s){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,ue.A)(function*(a,e,r,s){const u=ct(a);if(u.Qa)return void Ce("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(e);if(d&&d.length>0)switch(r){case"current":case"not-current":{const g=yield Th(u.localStore,Mn(d[0])),w=Vu.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,qn.EMPTY_BYTE_STRING);yield ac(u,g,w);break}case"rejected":yield Wc(u.localStore,e,!0),Oh(u,e,s);break;default:it()}})).apply(this,arguments)}function Uv(a,e,r){return ap.apply(this,arguments)}function ap(){return(ap=(0,ue.A)(function*(a,e,r){const s=zg(a);if(s.Qa){for(const u of e){if(s.Ma.has(u)&&s.sharedClientState.isActiveQueryTarget(u)){Ce("SyncEngine","Adding an already active target "+u);continue}const d=yield Kc(s.localStore,u),g=yield Gc(s.localStore,d);yield xg(s,$g(d),g.targetId,!1,g.resumeToken),ad(s.remoteStore,g)}for(const u of r)s.Ma.has(u)&&(yield Wc(s.localStore,u,!1).then(()=>{pi(s.remoteStore,u),Oh(s,u)}).catch(Cn))}})).apply(this,arguments)}function zg(a){const e=ct(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mv.bind(null,e),e.Ca.d_=d_.bind(null,e.eventManager),e.Ca.$a=h_.bind(null,e.eventManager),e}function D_(a){const e=ct(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iu.bind(null,e),e}let Na=(()=>{class a{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(r){var s=this;return(0,ue.A)(function*(){s.serializer=ic(r.databaseInfo.databaseId),s.sharedClientState=s.Wa(r),s.persistence=s.Ga(r),yield s.persistence.start(),s.localStore=s.za(r),s.gcScheduler=s.ja(r,s.localStore),s.indexBackfillerScheduler=s.Ha(r,s.localStore)})()}ja(r,s){return null}Ha(r,s){return null}za(r){return Bf(this.persistence,new Tg,r.initialUser,this.serializer)}Ga(r){return new Sa(ql.Zr,this.serializer)}Wa(r){return new od}terminate(){var r=this;return(0,ue.A)(function*(){var s,u;null===(s=r.gcScheduler)||void 0===s||s.stop(),null===(u=r.indexBackfillerScheduler)||void 0===u||u.stop(),r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}return a.provider={build:()=>new a},a})();class up extends Na{constructor(e,r,s){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,ue.A)(function*(){yield r().call(s,e),yield s.Ja.initialize(s,e),yield D_(s.Ja.syncEngine),yield ze(s.Ja.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return Bf(this.persistence,new Tg,e.initialUser,this.serializer)}ja(e,r){return new lu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ha(e,r){const s=new Wi(r,this.persistence);return new ja(e.asyncQueue,s)}Ga(e){const r=Xl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new ec(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,ai(),mo(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new od}}class cp extends up{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,ue.A)(function*(){yield r().call(s,e);const u=s.Ja.syncEngine;s.sharedClientState instanceof Yc&&(s.sharedClientState.syncEngine={no:Ug.bind(null,u),ro:Vv.bind(null,u),io:Uv.bind(null,u),Qi:Fv.bind(null,u),eo:sp.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var d=(0,ue.A)(function*(g){yield function md(a,e){return jg.apply(this,arguments)}(s.Ja.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}Wa(e){const r=ai();if(!Yc.D(r))throw new Xe(xe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Xl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yc(r,e.asyncQueue,s,e.clientId,e.initialUser)}}let ll=(()=>{class a{initialize(r,s){var u=this;return(0,ue.A)(function*(){u.localStore||(u.localStore=r.localStore,u.sharedClientState=r.sharedClientState,u.datastore=u.createDatastore(s),u.remoteStore=u.createRemoteStore(s),u.eventManager=u.createEventManager(s),u.syncEngine=u.createSyncEngine(s,!r.synchronizeTabs),u.sharedClientState.onlineStateHandler=d=>I_(u.syncEngine,d,1),u.remoteStore.remoteSyncer.handleCredentialChange=Ov.bind(null,u.syncEngine),yield pd(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Rh}createDatastore(r){const s=ic(r.databaseInfo.databaseId),u=new Dh(r.databaseInfo);return new qf(r.authCredentials,r.appCheckCredentials,u,s)}createRemoteStore(r){return u=this.localStore,d=this.datastore,g=r.asyncQueue,w=s=>I_(this.syncEngine,s,0),S=wh.D()?new wh:new Gf,new Qf(u,d,g,w,S);var u,d,g,w,S}createSyncEngine(r,s){return function(d,g,w,S,O,j,K){const oe=new g_(d,g,w,S,O,j);return K&&(oe.Qa=!0),oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){var r=this;return(0,ue.A)(function*(){var s,u,d;yield(d=(0,ue.A)(function*(w){const S=ct(w);Ce("RemoteStore","RemoteStore shutting down."),S.L_.add(5),yield _o(S),S.k_.shutdown(),S.q_.set("Unknown")}),function g(w){return d.apply(this,arguments)})(r.remoteStore),null===(s=r.datastore)||void 0===s||s.terminate(),null===(u=r.eventManager)||void 0===u||u.terminate()})()}}return a.provider={build:()=>new a},a})();function b_(a,e=10240){let r=0;return{read:()=>(0,ue.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,ue.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Fh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class S_{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Yn,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ue.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ue.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ue.A)(function*(){const r=yield e.nu();if(null===r)return null;const s=e.eu.decode(r),u=Number(s);isNaN(u)&&e.ru(`length string (${s}) is not valid number`);const d=yield e.iu(u);return new Cv(JSON.parse(d),r.length+u)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,ue.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const r=e.su();r<0&&e.ru("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}iu(e){var r=this;return(0,ue.A)(function*(){for(;r.buffer.length<e;)(yield r.ou())&&r.ru("Reached the end of bundle when more is expected.");const s=r.eu.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ue.A)(function*(){const r=yield e.Xa.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class lp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,ue.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Xe(xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(u=(0,ue.A)(function*(g,w){const S=ct(g),O={documents:w.map(Me=>gs(S.serializer,Me))},j=yield S.Lo("BatchGetDocuments",S.serializer.databaseId,wt.emptyPath(),O,w.length),K=new Map;j.forEach(Me=>{const Je=function Bu(a,e){return"found"in e?function(s,u){bt(!!u.found);const d=ms(s,u.found.name),g=Jt(u.found.updateTime),w=u.found.createTime?Jt(u.found.createTime):mt.min(),S=new Kr({mapValue:{fields:u.found.fields}});return rr.newFoundDocument(d,g,w,S)}(a,e):"missing"in e?function(s,u){bt(!!u.missing),bt(!!u.readTime);const d=ms(s,u.missing),g=Jt(u.readTime);return rr.newNoDocument(d,g)}(a,e):it()}(S.serializer,Me);K.set(Je.key.toString(),Je)});const oe=[];return w.forEach(Me=>{const Je=K.get(Me.toString());bt(!!Je),oe.push(Je)}),oe}),function d(g,w){return u.apply(this,arguments)})(r.datastore,e);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ya(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const d=It.fromPath(u);e.mutations.push(new Pn(d,e.precondition(d)))}),yield(s=(0,ue.A)(function*(d,g){const w=ct(d),S={writes:g.map(O=>Ea(w.serializer,O))};yield w.Mo("Commit",w.serializer.databaseId,wt.emptyPath(),S)}),function u(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw it();r=mt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new Xe(xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(mt.min())?jn.exists(!1):jn.updateTime(r):jn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(mt.min()))throw new Xe(xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(r)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DE{constructor(e,r,s,u,d){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=u,this.deferred=d,this._u=s.maxAttempts,this.t_=new Xc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ue.A)(function*(){const r=new lp(e.datastore),s=e.cu(r);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.lu(d)}))}).catch(u=>{e.lu(u)})}))}cu(e){try{const r=this.updateFunction(e);return!Pi(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Pc(r)}return!1}}class Gg{constructor(e,r,s,u,d){var g=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=bn.UNAUTHENTICATED,this.clientId=se.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(s,function(){var w=(0,ue.A)(function*(S){Ce("FirestoreClient","Received user=",S.uid),yield g.authCredentialListener(S),g.user=S});return function(S){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(Ce("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const u=sl(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function Wg(a,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ue.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ue.A)(function*(d){s.isEqual(d)||(yield Zl(e.localStore,d),s=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),Vh.apply(this,arguments)}function Kg(a,e){return dp.apply(this,arguments)}function dp(){return(dp=(0,ue.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Eu(a);Ce("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>nl(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>nl(e.remoteStore,u)),a._onlineComponents=e})).apply(this,arguments)}function Eu(a){return qg.apply(this,arguments)}function qg(){return(qg=(0,ue.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wg(a,a._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(u=e).name?u.code===xe.FAILED_PRECONDITION||u.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw e;Wt("Error using user provided cache. Falling back to memory cache: "+e),yield Wg(a,new Na)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),yield Wg(a,new Na);var u;return a._offlineComponents})).apply(this,arguments)}function _d(a){return yd.apply(this,arguments)}function yd(){return(yd=(0,ue.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield Kg(a,a._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),yield Kg(a,new ll))),a._onlineComponents})).apply(this,arguments)}function R_(a){return Eu(a).then(e=>e.persistence)}function uc(a){return Eu(a).then(e=>e.localStore)}function Uh(a){return _d(a).then(e=>e.remoteStore)}function vo(a){return _d(a).then(e=>e.syncEngine)}function cc(a){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,ue.A)(function*(a){const e=yield _d(a),r=e.eventManager;return r.onListen=m_.bind(null,e.syncEngine),r.onUnlisten=Nh.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Rv.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=wE.bind(null,e.syncEngine),r})).apply(this,arguments)}function M_(a,e,r={}){const s=new Yn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function(d,g,w,S,O){const j=new Fh({next:oe=>{j.Za(),g.enqueueAndForget(()=>bg(d,K));const Me=oe.docs.has(w);!Me&&oe.fromCache?O.reject(new Xe(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):Me&&oe.fromCache&&S&&"server"===S.source?O.reject(new Xe(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(oe)},error:oe=>O.reject(oe)}),K=new Rg($s(w.path),j,{includeMetadataChanges:!0,_a:!0});return Xf(d,K)}(yield cc(a),a.asyncQueue,e,r,s)})),s.promise}function N_(a,e,r={}){const s=new Yn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function(d,g,w,S,O){const j=new Fh({next:oe=>{j.Za(),g.enqueueAndForget(()=>bg(d,K)),oe.fromCache&&"server"===S.source?O.reject(new Xe(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(oe)},error:oe=>O.reject(oe)}),K=new Rg(w,j,{includeMetadataChanges:!0,_a:!0});return Xf(d,K)}(yield cc(a),a.asyncQueue,e,r,s)})),s.promise}function k_(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const L_=new Map;function F_(a,e,r){if(!r)throw new Xe(xe.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Hv(a,e,r,s){if(!0===e&&!0===s)throw new Xe(xe.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Bh(a){if(!It.isDocumentKey(a))throw new Xe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function V_(a){if(It.isDocumentKey(a))throw new Xe(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Id(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":it()}function On(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Xe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Id(a);throw new Xe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function hl(a,e){if(e<=0)throw new Xe(xe.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class hp{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Xe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=k_(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Xe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Xe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Xe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fl{constructor(e,r,s,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hp(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new si;switch(s.type){case"firstParty":return new Ke(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Xe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ue.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=L_.get(r);s&&(Ce("ComponentProvider","Removing Datastore"),L_.delete(r),s.terminate())}(this),Promise.resolve()}}class gi{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class gr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class Io extends gi{constructor(e,r,s){super(e,r,$s(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new It(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function fp(a,e,...r){if(a=(0,Mt.Ku)(a),F_("collection","path",e),a instanceof fl){const s=wt.fromString(e,...r);return V_(s),new Io(a,null,s)}{if(!(a instanceof gr||a instanceof Io))throw new Xe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(wt.fromString(e,...r));return V_(s),new Io(a.firestore,null,s)}}function Jg(a,e,...r){if(a=(0,Mt.Ku)(a),1===arguments.length&&(e=se.newId()),F_("doc","path",e),a instanceof fl){const s=wt.fromString(e,...r);return Bh(s),new gr(a,null,new It(s))}{if(!(a instanceof gr||a instanceof Io))throw new Xe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(wt.fromString(e,...r));return Bh(s),new gr(a.firestore,a instanceof Io?a.converter:null,new It(s))}}function gp(a,e){return a=(0,Mt.Ku)(a),e=(0,Mt.Ku)(e),(a instanceof gr||a instanceof Io)&&(e instanceof gr||e instanceof Io)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function pl(a,e){return a=(0,Mt.Ku)(a),e=(0,Mt.Ku)(e),a instanceof gi&&e instanceof gi&&a.firestore===e.firestore&&Oe(a._query,e._query)&&a.converter===e.converter}class U_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xc(this,"async_queue_retry"),this.Vu=()=>{const s=mo();s&&Ce("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=mo();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=mo();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ue.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(r){if(!us(r))throw r;Ce("AsyncQueue","Operation failed with retryable error: "+r)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(s=>{throw this.Eu=s,this.du=!1,zn("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const u=il.createAndSchedule(this,e,r,s,d=>this.yu(d));return this.Tu.push(u),u}fu(){this.Eu&&it()}verifyOperationInProgress(){}wu(){var e=this;return(0,ue.A)(function*(){let r;do{r=e.mu,yield r}while(r!==e.mu)})()}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function mp(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class zv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends fl{constructor(e,r,s,u){super(e,r,s,u),this.type="firestore",this._queue=new U_,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ue.A)(function*(){if(e._firestoreClient){const r=e._firestoreClient.terminate();e._queue=new U_(r),e._firestoreClient=void 0,yield r}})()}}function jr(a){if(a._terminated)throw new Xe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||Kv(a),a._firestoreClient}function Kv(a){var e,r,s;const u=a._freezeSettings(),d=(S=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new Po(a._databaseId,S,a._persistenceKey,(j=u).host,j.ssl,j.experimentalForceLongPolling,j.experimentalAutoDetectLongPolling,k_(j.experimentalLongPollingOptions),j.useFetchStreams));var S,j;a._componentsProvider||!(null===(r=u.localCache)||void 0===r)&&r._offlineComponentProvider&&!(null===(s=u.localCache)||void 0===s)&&s._onlineComponentProvider&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new Gg(a._authCredentials,a._appCheckCredentials,a._queue,d,a._componentsProvider&&function(w){const S=w?._online.build();return{_offline:w?._offline.build(S),_online:S}}(a._componentsProvider))}function jh(){return(jh=(0,ue.A)(function*(a){Wt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=a._freezeSettings();B_(a,ll.provider,{build:r=>new cp(r,e.cacheSizeBytes)})})).apply(this,arguments)}function B_(a,e,r){if((a=On(a,_r))._firestoreClient||a._terminated)throw new Xe(xe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new Xe(xe.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:e,_offline:r},Kv(a)}class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(qn.fromBase64String(e))}catch(r){throw new Xe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Js(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Xe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yo{constructor(e){this._methodName=e}}class Ip{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Xe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Xe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}class Hh{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,u){if(s.length!==u.length)return!1;for(let d=0;d<s.length;++d)if(s[d]!==u[d])return!1;return!0}(this._values,e._values)}}const Zv=/^__.*__$/;class eI{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new di(e,this.data,this.fieldMask,r,this.fieldTransforms):new eu(e,this.data,r,this.fieldTransforms)}}class H_{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new di(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function em(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class zh{constructor(e,r,s,u,d,g){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===d&&this.vu(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.Ou(e),u}Nu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.vu(),u}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(em(this.Cu)&&Zv.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tm{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||ic(e)}Qu(e,r,s,u=!1){return new zh({Cu:e,methodName:r,qu:s,path:kn.emptyPath(),xu:!1,ku:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(a){const e=a._freezeSettings(),r=ic(a._databaseId);return new tm(a._databaseId,!!e.ignoreUndefinedProperties,r)}function wd(a,e,r,s,u,d={}){const g=a.Qu(d.merge||d.mergeFields?2:0,e,r,u);wp("Data must be an object, but it was:",g,s);const w=om(s,g);let S,O;if(d.merge)S=new Zr(g.fieldMask),O=g.fieldTransforms;else if(d.mergeFields){const j=[];for(const K of d.mergeFields){const oe=Ap(e,K,r);if(!g.contains(oe))throw new Xe(xe.INVALID_ARGUMENT,`Field '${oe}' is specified in your field mask but missing from your input data.`);G_(j,oe)||j.push(oe)}S=new Zr(j),O=g.fieldTransforms.filter(K=>S.covers(K.field))}else S=null,O=g.fieldTransforms;return new eI(new Kr(w),S,O)}class Ad extends Yo{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function z_(a,e,r){return new zh({Cu:3,qu:e.settings.qu,methodName:a._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nm extends Yo{_toFieldTransform(e){return new Qt(e.path,new Fo)}isEqual(e){return e instanceof nm}}class Ep extends Yo{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=z_(this,e,!0),s=this.Ku.map(d=>lc(d,r)),u=new li(s);return new Qt(e.path,u)}isEqual(e){return e instanceof Ep&&(0,Mt.bD)(this.Ku,e.Ku)}}class rm extends Yo{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=z_(this,e,!0),s=this.Ku.map(d=>lc(d,r)),u=new bs(s);return new Qt(e.path,u)}isEqual(e){return e instanceof rm&&(0,Mt.bD)(this.Ku,e.Ku)}}class Tp extends Yo{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ga(e.serializer,Ol(e.serializer,this.$u));return new Qt(e.path,r)}isEqual(e){return e instanceof Tp&&this.$u===e.$u}}function im(a,e,r,s){const u=a.Qu(1,e,r);wp("Data must be an object, but it was:",u,s);const d=[],g=Kr.empty();Gt(s,(S,O)=>{const j=Xo(e,S,r);O=(0,Mt.Ku)(O);const K=u.Nu(j);if(O instanceof Ad)d.push(j);else{const oe=lc(O,K);null!=oe&&(d.push(j),g.set(j,oe))}});const w=new Zr(d);return new H_(g,w,u.fieldTransforms)}function sm(a,e,r,s,u,d){const g=a.Qu(1,e,r),w=[Ap(e,s,r)],S=[u];if(d.length%2!=0)throw new Xe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let oe=0;oe<d.length;oe+=2)w.push(Ap(e,d[oe])),S.push(d[oe+1]);const O=[],j=Kr.empty();for(let oe=w.length-1;oe>=0;--oe)if(!G_(O,w[oe])){const Me=w[oe];let Je=S[oe];Je=(0,Mt.Ku)(Je);const ht=g.Nu(Me);if(Je instanceof Ad)O.push(Me);else{const st=lc(Je,ht);null!=st&&(O.push(Me),j.set(Me,st))}}const K=new Zr(O);return new H_(j,K,g.fieldTransforms)}function tI(a,e,r,s=!1){return lc(r,a.Qu(s?4:3,e))}function lc(a,e){if(Eo(a=(0,Mt.Ku)(a)))return wp("Unsupported field value:",e,a),om(a,e);if(a instanceof Yo)return function(s,u){if(!em(u.Cu))throw u.Bu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Bu(`${s._methodName}() is not currently supported inside arrays`);const d=s._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(s,u){const d=[];let g=0;for(const w of s){let S=lc(w,u.Lu(g));null==S&&(S={nullValue:"NULL_VALUE"}),d.push(S),g++}return{arrayValue:{values:d}}}(a,e)}return function(s,u){if(null===(s=(0,Mt.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Ol(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const d=vt.fromDate(s);return{timestampValue:un(u.serializer,d)}}if(s instanceof vt){const d=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:un(u.serializer,d)}}if(s instanceof Ip)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Js)return{bytesValue:In(u.serializer,s._byteString)};if(s instanceof gr){const d=u.databaseId,g=s.firestore._databaseId;if(!g.isEqual(d))throw u.Bu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:$o(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof Hh)return w=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(S=>{if("number"!=typeof S)throw w.Bu("VectorValues must only contain numeric values.");return ci(w.serializer,S)})}}}}};var w;throw u.Bu(`Unsupported field value: ${Id(s)}`)}(a,e)}function om(a,e){const r={};return ks(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gt(a,(s,u)=>{const d=lc(u,e.Mu(s));null!=d&&(r[s]=d)}),{mapValue:{fields:r}}}function Eo(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof vt||a instanceof Ip||a instanceof Js||a instanceof gr||a instanceof Yo||a instanceof Hh)}function wp(a,e,r){if(!Eo(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=Id(r);throw e.Bu("an object"===s?a+" a custom object":a+" "+s)}var u}function Ap(a,e,r){if((e=(0,Mt.Ku)(e))instanceof Tu)return e._internalPath;if("string"==typeof e)return Xo(a,e);throw gl("Field path arguments must be of type string or ",a,!1,void 0,r)}const am=new RegExp("[~\\*/\\[\\]]");function Xo(a,e,r){if(e.search(am)>=0)throw gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Tu(...e.split("."))._internalPath}catch{throw gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function gl(a,e,r,s,u){const d=s&&!s.isEmpty(),g=void 0!==u;let w=`Function ${e}() called with invalid data`;r&&(w+=" (via `toFirestore()`)"),w+=". ";let S="";return(d||g)&&(S+=" (found",d&&(S+=` in field ${s}`),g&&(S+=` in document ${u}`),S+=")"),new Xe(xe.INVALID_ARGUMENT,w+a+S)}function G_(a,e){return a.some(r=>r.isEqual(e))}class Gh{constructor(e,r,s,u,d){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Dd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class nI extends Gh{data(){return super.data()}}function Dd(a,e){return"string"==typeof e?Xo(a,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}function Jo(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Xe(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Wh extends Dp{}function ml(a,e,...r){let s=[];e instanceof Dp&&s.push(e),s=s.concat(r),function(d){const g=d.filter(S=>S instanceof dc).length,w=d.filter(S=>S instanceof ri).length;if(g>1||g>0&&w>0)throw new Xe(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class ri extends Wh{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new ri(e,r,s)}_apply(e){const r=this._parse(e);return Y_(e._query,r),new gi(e.firestore,e.converter,F(e._query,r))}_parse(e){const r=Td(e.firestore);return function(d,g,w,S,O,j,K){let oe;if(O.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new Xe(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){Q_(K,j);const Me=[];for(const Je of K)Me.push(_l(S,d,Je));oe={arrayValue:{values:Me}}}else oe=_l(S,d,K)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||Q_(K,j),oe=tI(w,"where",K,"in"===j||"not-in"===j);return Rn.create(O,j,oe)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class dc extends Dp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new dc(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:an.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,d){let g=u;const w=d.getFlattenedFilters();for(const S of w)Y_(g,S),g=F(g,S)}(e._query,r),new gi(e.firestore,e.converter,F(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Kh extends Wh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Kh(e,r)}_apply(e){const r=function(u,d,g){if(null!==u.startAt)throw new Xe(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Xe(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vi(d,g)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(u,d){const g=u.explicitOrderBy.concat([d]);return new bi(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}class qh extends Wh{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new qh(e,r,s)}_apply(e){return new gi(e.firestore,e.converter,ee(e._query,this._limit,this._limitType))}}class Qh extends Wh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Qh(e,r,s)}_apply(e){const r=xa(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(d=r,new bi((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class Cp extends Wh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Cp(e,r,s)}_apply(e){const r=xa(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(d=r,new bi((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function xa(a,e,r,s){if(r[0]=(0,Mt.Ku)(r[0]),r[0]instanceof Gh)return function(d,g,w,S,O){if(!S)throw new Xe(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const j=[];for(const K of Ds(d))if(K.field.isKeyField())j.push(so(g,S.key));else{const oe=S.data.field(K.field);if(Ls(oe))throw new Xe(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+K.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===oe){const Me=K.field.canonicalString();throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Me}' (used as the orderBy) does not exist.`)}j.push(oe)}return new Yi(j,O)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const u=Td(a.firestore);return function(g,w,S,O,j,K){const oe=g.explicitOrderBy;if(j.length>oe.length)throw new Xe(xe.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Me=[];for(let Je=0;Je<j.length;Je++){const ht=j[Je];if(oe[Je].field.isKeyField()){if("string"!=typeof ht)throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof ht}`);if(!fa(g)&&-1!==ht.indexOf("/"))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${ht}' contains a slash.`);const st=g.path.child(wt.fromString(ht));if(!It.isDocumentKey(st))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${st}' is not because it contains an odd number of segments.`);const kt=new It(st);Me.push(so(w,kt))}else{const st=tI(S,O,ht);Me.push(st)}}return new Yi(Me,K)}(a._query,a.firestore._databaseId,u,e,r,s)}}function _l(a,e,r){if("string"==typeof(r=(0,Mt.Ku)(r))){if(""===r)throw new Xe(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fa(e)&&-1!==r.indexOf("/"))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(wt.fromString(r));if(!It.isDocumentKey(s))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return so(a,new It(s))}if(r instanceof gr)return so(a,r._key);throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(r)}.`)}function Q_(a,e){if(!Array.isArray(a)||0===a.length)throw new Xe(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y_(a,e){const r=function(u,d){for(const g of u)for(const w of g.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new Xe(xe.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class bp{convertValue(e,r="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw it()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return Gt(e,(u,d)=>{s[u]=this.convertValue(d,r)}),s}convertVectorValue(e){var r,s,u;const d=null===(u=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.map(g=>hr(g.doubleValue));return new Hh(d)}convertGeoPoint(e){return new Ip(hr(e.latitude),hr(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Ci(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const r=on(e);return new vt(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=wt.fromString(e);bt(Hu(s));const u=new yi(s.get(1),s.get(3)),d=new It(s.popFirst(5));return u.isEqual(r)||zn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function bd(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class Yh extends bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,r)}}class yl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wu extends Gh{constructor(e,r,s,u,d,g){super(e,r,s,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Dd("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Sd extends wu{data(e={}){return super.data(e)}}class vl{constructor(e,r,s,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new yl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Sd(this._firestore,this._userDataWriter,s.key,s,new yl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new Sd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new yl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const S=new Sd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new yl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let O=-1,j=-1;return 0!==w.type&&(O=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),j=g.indexOf(w.doc.key)),{type:uI(w.type),doc:S,oldIndex:O,newIndex:j}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function uI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function cI(a,e){return a instanceof wu&&e instanceof wu?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof vl&&e instanceof vl&&a._firestore===e._firestore&&pl(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class Au extends bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,r)}}function ty(a,e,r){a=On(a,gr);const s=On(a.firestore,_r),u=bd(a.converter,e,r);return Zo(s,[wd(Td(s),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,jn.none())])}function lm(a,e,r,...s){a=On(a,gr);const u=On(a.firestore,_r),d=Td(u);let g;return g="string"==typeof(e=(0,Mt.Ku)(e))||e instanceof Tu?sm(d,"updateDoc",a._key,e,r,s):im(d,"updateDoc",a._key,e),Zo(u,[g.toMutation(a._key,jn.exists(!0))])}function dm(a,...e){var r,s,u;a=(0,Mt.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||mp(e[g])||(d=e[g],g++);const w={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(mp(e[g])){const K=e[g];e[g]=null===(r=K.next)||void 0===r?void 0:r.bind(K),e[g+1]=null===(s=K.error)||void 0===s?void 0:s.bind(K),e[g+2]=null===(u=K.complete)||void 0===u?void 0:u.bind(K)}let S,O,j;if(a instanceof gr)O=On(a.firestore,_r),j=$s(a._key.path),S={next:K=>{e[g]&&e[g](Rp(O,a,K))},error:e[g+1],complete:e[g+2]};else{const K=On(a,gi);O=On(K.firestore,_r),j=K._query;const oe=new Au(O);S={next:Me=>{e[g]&&e[g](new vl(O,oe,K,Me))},error:e[g+1],complete:e[g+2]},Jo(a._query)}return function(oe,Me,Je,ht){const st=new Fh(ht),kt=new Rg(Me,st,Je);return oe.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return Xf(yield cc(oe),kt)})),()=>{st.Za(),oe.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return bg(yield cc(oe),kt)}))}}(jr(O),j,w,S)}function Zo(a,e){return function(s,u){const d=new Yn;return s.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function AE(a,e,r){return v_.apply(this,arguments)}(yield vo(s),u,d)})),d.promise}(jr(a),e)}function Rp(a,e,r){const s=r.docs.get(e._key),u=new Au(a);return new wu(a,u,e._key,s,new yl(r.hasPendingWrites,r.fromCache),e.converter)}const uy={maxAttempts:5};class cy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Td(e)}set(e,r,s){this._verifyNotCommitted();const u=hc(e,this._firestore),d=bd(u.converter,r,s),g=wd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,s);return this._mutations.push(g.toMutation(u._key,jn.none())),this}update(e,r,s,...u){this._verifyNotCommitted();const d=hc(e,this._firestore);let g;return g="string"==typeof(r=(0,Mt.Ku)(r))||r instanceof Tu?sm(this._dataReader,"WriteBatch.update",d._key,r,s,u):im(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(g.toMutation(d._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=hc(e,this._firestore);return this._mutations=this._mutations.concat(new ya(r._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hc(a,e){if((a=(0,Mt.Ku)(a)).firestore!==e)throw new Xe(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class fI extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=Td(r)}get(r){const s=hc(r,this._firestore),u=new Yh(this._firestore);return this._transaction.lookup([s._key]).then(d=>{if(!d||1!==d.length)return it();const g=d[0];if(g.isFoundDocument())return new Gh(this._firestore,u,g.key,g,s.converter);if(g.isNoDocument())return new Gh(this._firestore,u,s._key,null,s.converter);throw it()})}set(r,s,u){const d=hc(r,this._firestore),g=bd(d.converter,s,u),w=wd(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,u);return this._transaction.set(d._key,w),this}update(r,s,u,...d){const g=hc(r,this._firestore);let w;return w="string"==typeof(s=(0,Mt.Ku)(s))||s instanceof Tu?sm(this._dataReader,"Transaction.update",g._key,s,u,d):im(this._dataReader,"Transaction.update",g._key,s),this._transaction.update(g._key,w),this}delete(r){const s=hc(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=hc(e,this._firestore),s=new Au(this._firestore);return super.get(e).then(u=>new wu(this._firestore,s,r._key,u._document,new yl(!1,!1),r.converter))}}function Jh(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xe("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function my(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function gm(){if(!function ls(){return typeof atob<"u"}())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){or=yt.SDK_VERSION,(0,yt._registerComponent)(new mr.uA("firestore",(s,{instanceIdentifier:u,options:d})=>{const g=s.getProvider("app").getImmediate(),w=new _r(new $i(s.getProvider("auth-internal")),new k(s.getProvider("app-check-internal")),function(O,j){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new Xe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(O.options.projectId,j)}(g,u),g);return d=Object.assign({useFetchStreams:r},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,yt.registerVersion)(pr,"4.7.3",e),(0,yt.registerVersion)(pr,"4.7.3","esm2017")}();class Zh{constructor(e){this._delegate=e}static fromBase64String(e){return gm(),new Zh(Js.fromBase64String(e))}static fromUint8Array(e){return my(),new Zh(Js.fromUint8Array(e))}toBase64(){return gm(),this._delegate.toBase64()}toUint8Array(){return my(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xp(a){return function _y(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class Op{enableIndexedDbPersistence(e,r){return function qv(a,e){Wt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings();return B_(a,ll.provider,{build:s=>new up(s,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function _p(a){return jh.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function j_(a){if(a._initialized&&!a._terminated)throw new Xe(xe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ue.A)(function*(){try{yield(r=(0,ue.A)(function*(u){if(!Xr.D())return Promise.resolve();const d=u+"main";yield Xr.delete(d)}),function s(u){return r.apply(this,arguments)})(Xl(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class kp{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof yi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Wt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function Ed(a,e,r,s={}){var u;const d=(a=On(a,fl))._getSettings(),g=`${e}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&Wt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let w,S;if("string"==typeof s.mockUserToken)w=s.mockUserToken,S=bn.MOCK_USER;else{w=(0,Mt.Fy)(s.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new Xe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new bn(O)}a._authCredentials=new Ti(new os(w,S))}}(this._delegate,e,r,s)}enableNetwork(){return function yp(a){return function Bv(a){return a.asyncQueue.enqueue((0,ue.A)(function*(){const e=yield R_(a),r=yield Uh(a);return e.setNetworkEnabled(!0),function(u){const d=ct(u);return d.L_.delete(0),sc(d)}(r)}))}(jr(a=On(a,_r)))}(this._delegate)}disableNetwork(){return function Qv(a){return function P_(a){return a.asyncQueue.enqueue((0,ue.A)(function*(){const e=yield R_(a),r=yield Uh(a);return e.setNetworkEnabled(!1),(s=(0,ue.A)(function*(d){const g=ct(d);g.L_.add(0),yield _o(g),g.q_.set("Offline")}),function u(d){return s.apply(this,arguments)})(r);var s}))}(jr(a=On(a,_r)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Hv("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Zg(a){return function(r){const s=new Yn;return r.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function E_(a,e){return tp.apply(this,arguments)}(yield vo(r),s)})),s.promise}(jr(a=On(a,_r)))}(this._delegate)}onSnapshotsInSync(e){return function ry(a,e){return function x_(a,e){const r=new Fh(e);return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return u=yield cc(a),d=r,ct(u).Y_.add(d),void d.next();var u,d})),()=>{r.Za(),a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return u=yield cc(a),d=r,void ct(u).Y_.delete(d);var u,d}))}}(jr(a=On(a,_r)),mp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ka(this,fp(this._delegate,e))}catch(r){throw Yr(r,"collection()","Firestore.collection()")}}doc(e){try{return new Rs(this,Jg(this._delegate,e))}catch(r){throw Yr(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ns(this,function pp(a,e){if(a=On(a,fl),F_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(xe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gi(a,null,(s=e,new bi(wt.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw Yr(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pI(a,e,r){a=On(a,_r);const s=Object.assign(Object.assign({},uy),r);return function(d){if(d.maxAttempts<1)throw new Xe(xe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,g,w){const S=new Yn;return d.asyncQueue.enqueueAndForget((0,ue.A)(function*(){const O=yield function dl(a){return _d(a).then(e=>e.datastore)}(d);new DE(d.asyncQueue,O,w,g,S).au()})),S.promise}(jr(a),u=>e(new fI(a,u)),s)}(this._delegate,r=>e(new _m(this,r)))}batch(){return jr(this._delegate),new ym(new cy(this._delegate,e=>Zo(this._delegate,e)))}loadBundle(e){return function Xv(a,e){const r=jr(a=On(a,_r)),s=new zv;return function $v(a,e,r,s){const u=function(g,w){let S;return S="string"==typeof g?jo().encode(g):g,j=function(j,K){if(j instanceof Uint8Array)return b_(j,K);if(j instanceof ArrayBuffer)return b_(new Uint8Array(j),K);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new S_(j,w);var j}(r,ic(e));a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){!function Lh(a,e,r){const s=ct(a);var u;(u=(0,ue.A)(function*(g,w,S){try{const O=yield w.getMetadata();if(yield function(Je,ht){const st=ct(Je),kt=Jt(ht.createTime);return st.persistence.runTransaction("hasNewerBundle","readonly",Ht=>st.Gr.getBundleMetadata(Ht,ht.id)).then(Ht=>!!Ht&&Ht.createTime.compareTo(kt)>=0)}(g.localStore,O))return yield w.close(),S._completeWith({taskState:"Success",documentsLoaded:(Je=O).totalDocuments,bytesLoaded:Je.totalBytes,totalDocuments:Je.totalDocuments,totalBytes:Je.totalBytes}),Promise.resolve(new Set);S._updateProgress(Jf(O));const j=new Sv(O,g.localStore,w.serializer);let K=yield w.Ua();for(;K;){const Me=yield j.la(K);Me&&S._updateProgress(Me),K=yield w.Ua()}const oe=yield j.complete();return yield ac(g,oe.Ia,void 0),yield function(Je,ht){const st=ct(Je);return st.persistence.runTransaction("Save bundle","readwrite",kt=>st.Gr.saveBundleMetadata(kt,ht))}(g.localStore,O),S._completeWith(oe.progress),Promise.resolve(oe.Pa)}catch(O){return Wt("SyncEngine",`Loading bundle failed with ${O}`),S._failWith(O),Promise.resolve(new Set)}var Je}),function d(g,w,S){return u.apply(this,arguments)})(s,e,r).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield vo(a),u,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function $_(a,e){return function O_(a,e){return a.asyncQueue.enqueue((0,ue.A)(function*(){return function(s,u){const d=ct(s);return d.persistence.runTransaction("Get named query","readonly",g=>d.Gr.getNamedQuery(g,u))}(yield uc(a),e)}))}(jr(a=On(a,_r)),e).then(r=>r?new gi(a,null,r.query):null)}(this._delegate,e).then(r=>r?new ns(this,r):null)}}class mm extends bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zh(new Js(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return Rs.forKey(r,this.firestore,null)}}class _m{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new mm(e)}get(e){const r=pc(e);return this._delegate.get(r).then(s=>new Il(this._firestore,new wu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const u=pc(e);return s?(Jh("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=pc(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=pc(e);return this._delegate.delete(r),this}}class ym{constructor(e){this._delegate=e}set(e,r,s){const u=pc(e);return s?(Jh("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=pc(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=pc(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class fc{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new Sd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ef(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=fc.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let d=u.get(r);return d||(d=new fc(e,new mm(e),r),u.set(r,d)),d}}fc.INSTANCES=new WeakMap;class Rs{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new mm(e)}static forPath(e,r,s){if(e.length%2!=0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rs(r,new gr(r._delegate,s,new It(e)))}static forKey(e,r,s){return new Rs(r,new gr(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new ka(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ka(this.firestore,fp(this._delegate,e))}catch(r){throw Yr(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.Ku)(e))instanceof gr&&gp(this._delegate,e)}set(e,r){r=Jh("DocumentReference.set",r);try{return r?ty(this._delegate,e,r):ty(this._delegate,e)}catch(s){throw Yr(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?lm(this._delegate,e):lm(this._delegate,e,r,...s)}catch(u){throw Yr(u,"updateDoc()","DocumentReference.update()")}}delete(){return function ny(a){return Zo(On(a.firestore,_r),[new ya(a._key,jn.none())])}(this._delegate)}onSnapshot(...e){const r=vy(e),s=Iy(e,u=>new Il(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return dm(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function J_(a){a=On(a,gr);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return function vd(a,e){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return(s=(0,ue.A)(function*(d,g,w){try{const S=yield function(j,K){const oe=ct(j);return oe.persistence.runTransaction("read document","readonly",Me=>oe.localDocuments.getDocument(Me,K))}(d,g);S.isFoundDocument()?w.resolve(S):S.isNoDocument()?w.resolve(null):w.reject(new Xe(xe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const O=sl(S,`Failed to get document '${g} from cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield uc(a),e,r);var s})),r.promise}(r,a._key).then(u=>new wu(e,s,a._key,u,new yl(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function OE(a){a=On(a,gr);const e=On(a.firestore,_r);return M_(jr(e),a._key,{source:"server"}).then(r=>Rp(e,a,r))}(this._delegate):function xE(a){a=On(a,gr);const e=On(a.firestore,_r);return M_(jr(e),a._key).then(r=>Rp(e,a,r))}(this._delegate),r.then(s=>new Il(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}function Yr(a,e,r){return a.message=a.message.replace(e,r),a}function vy(a){for(const e of a)if("object"==typeof e&&!xp(e))return e;return{}}function Iy(a,e){var r,s;let u;return u=xp(a[0])?a[0]:xp(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Il{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new Rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return cI(this._delegate,e._delegate)}}class ef extends Il{data(e){const r=this._delegate.data(e);return this._delegate._converter||function ji(a,e){a||it()}(void 0!==r),r}}class ns{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new mm(e)}where(e,r,s){try{return new ns(this.firestore,ml(this._delegate,function rI(a,e,r){const s=e,u=Dd("where",a);return ri._create(u,s,r)}(e,r,s)))}catch(u){throw Yr(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new ns(this.firestore,ml(this._delegate,function W_(a,e="asc"){const r=e,s=Dd("orderBy",a);return Kh._create(s,r)}(e,r)))}catch(s){throw Yr(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ns(this.firestore,ml(this._delegate,function iI(a){return hl("limit",a),qh._create("limit",a,"F")}(e)))}catch(r){throw Yr(r,"limit()","Query.limit()")}}limitToLast(e){try{return new ns(this.firestore,ml(this._delegate,function K_(a){return hl("limitToLast",a),qh._create("limitToLast",a,"L")}(e)))}catch(r){throw Yr(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ns(this.firestore,ml(this._delegate,function sI(...a){return Qh._create("startAt",a,!0)}(...e)))}catch(r){throw Yr(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ns(this.firestore,ml(this._delegate,function oI(...a){return Qh._create("startAfter",a,!1)}(...e)))}catch(r){throw Yr(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ns(this.firestore,ml(this._delegate,function q_(...a){return Cp._create("endBefore",a,!1)}(...e)))}catch(r){throw Yr(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ns(this.firestore,ml(this._delegate,function Cd(...a){return Cp._create("endAt",a,!0)}(...e)))}catch(r){throw Yr(r,"endAt()","Query.endAt()")}}isEqual(e){return pl(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function Z_(a){a=On(a,gi);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return function jv(a,e){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return(s=(0,ue.A)(function*(d,g,w){try{const S=yield hu(d,g,!0),O=new Mh(g,S.Ts),j=O.ma(S.documents),K=O.applyChanges(j,!1);w.resolve(K.snapshot)}catch(S){const O=sl(S,`Failed to execute query '${g} against cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield uc(a),e,r);var s})),r.promise}(r,a._query).then(u=>new vl(e,s,a,u))}(this._delegate):"server"===e?.source?function ey(a){a=On(a,gi);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return N_(r,a._query,{source:"server"}).then(u=>new vl(e,s,a,u))}(this._delegate):function Sp(a){a=On(a,gi);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return Jo(a._query),N_(r,a._query).then(u=>new vl(e,s,a,u))}(this._delegate),r.then(s=>new Pd(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=vy(e),s=Iy(e,u=>new Pd(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return dm(this._delegate,r,s)}withConverter(e){return new ns(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}class vI{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new ef(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pd{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ef(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new vI(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new ef(this._firestore,s))})}isEqual(e){return cI(this._delegate,e._delegate)}}class ka extends ns{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rs(this.firestore,e):null}doc(e){try{return new Rs(this.firestore,void 0===e?Jg(this._delegate):Jg(this._delegate,e))}catch(r){throw Yr(r,"doc()","CollectionReference.doc()")}}add(e){return function An(a,e){const r=On(a.firestore,_r),s=Jg(a),u=bd(a.converter,e);return Zo(r,[wd(Td(a.firestore),"addDoc",s._key,u,null!==a.converter,{}).toMutation(s._key,jn.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new Rs(this.firestore,r))}isEqual(e){return gp(this._delegate,e._delegate)}withConverter(e){return new ka(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}function pc(a){return On(a,gr)}class Md{constructor(...e){this._delegate=new Tu(...e)}static documentId(){return new Md(kn.keyField().canonicalString())}isEqual(e){return(e=(0,Mt.Ku)(e))instanceof Tu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dy(){return new nm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nd(e)}static delete(){const e=function ly(){return new Ad("deleteField")}();return e._methodName="FieldValue.delete",new Nd(e)}static arrayUnion(...e){const r=function gI(...a){return new Ep("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new Nd(r)}static arrayRemove(...e){const r=function mI(...a){return new rm("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new Nd(r)}static increment(e){const r=function Zs(a){return new Tp("increment",a)}(e);return r._methodName="FieldValue.increment",new Nd(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const II={Firestore:kp,GeoPoint:Ip,Timestamp:vt,Blob:Zh,Transaction:_m,WriteBatch:ym,DocumentReference:Rs,DocumentSnapshot:Il,Query:ns,QueryDocumentSnapshot:ef,QuerySnapshot:Pd,CollectionReference:ka,FieldPath:Md,FieldValue:Nd,setLogLevel:function yy(a){!function bo(a){dn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};function wy(a,e){return function EI(a,e=en.E){return new $e.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Lp(a,e){return wy(a,e).pipe((0,ke.T)(r=>({payload:r,type:"query"})))}!function Ty(a){(function Ey(a,e){a.INTERNAL.registerComponent(new mr.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},II)))})(a,(e,r)=>new kp(e,r,new Op)),a.registerVersion("@firebase/firestore-compat","0.3.38")}(Ye.A);class xd{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:u,query:d}=Ry(s,r);return new Cy(u,d,this.afs)}snapshotChanges(){return function Ay(a,e){return wy(a,e).pipe((0,Xt.Z)(void 0),Le(),(0,ke.T)(r=>{const[s,u]=r;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ae.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ke.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,be.H)(this.ref.get(e)).pipe(ae.U0)}}function Fp(a,e){return Lp(a,e).pipe((0,Xt.Z)(void 0),Le(),(0,ke.T)(r=>{const[s,u]=r,d=u.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,S)=>{const O=d.find(K=>K.doc.ref.isEqual(w.ref)),j=s?.payload.docs.find(K=>K.ref.isEqual(w.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(w.metadata)||!O&&j&&JSON.stringify(j.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:w}})}),g}))}function vm(a,e,r){return Fp(a,r).pipe((0,Ne.S)((s,u)=>function Dy(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function TI(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Im(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Im(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Im(a,e.oldIndex,1)}return a}(a,s))}),a}(s,u.map(d=>d.payload),e),[]),(0,tt.F)(),(0,ke.T)(s=>s.map(u=>({type:u.type,payload:u}))))}function Im(a,e,r,...s){const u=a.slice();return u.splice(e,r,...s),u}function Od(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Cy{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Fp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,ke.T)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),r.pipe((0,Xt.Z)(void 0),Le(),(0,Ge.p)(([s,u])=>u.length>0||!s),(0,ke.T)(([,s])=>s),ae.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,Ne.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Od(e);return vm(this.query,r,this.afs.schedulers.outsideAngular).pipe(ae.U0)}valueChanges(e={}){return Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ke.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),ae.U0)}get(e){return(0,be.H)(this.query.get(e)).pipe(ae.U0)}add(e){return this.ref.add(e)}doc(e){return new xd(this.ref.doc(e),this.afs)}}class wI{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Fp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ke.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,Ge.p)(r=>r.length>0),ae.U0):Fp(this.query,this.afs.schedulers.outsideAngular).pipe(ae.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,Ne.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Od(e);return vm(this.query,r,this.afs.schedulers.outsideAngular).pipe(ae.U0)}valueChanges(e={}){return Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ke.T)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),ae.U0)}get(e){return(0,be.H)(this.query.get(e)).pipe(ae.U0)}}const by=new Y.nKC("angularfire2.enableFirestorePersistence"),Sy=new Y.nKC("angularfire2.firestore.persistenceSettings"),AI=new Y.nKC("angularfire2.firestore.settings"),DI=new Y.nKC("angularfire2.firestore.use-emulator");function Ry(a,e=(r=>r)){return{query:e(a),ref:a}}let Py=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,u,d,g,w,S,O,j,K,oe,Me,Je,ht,st,kt,Ht){this.schedulers=S;const Tt=(0,q.iB)(r,w,s),zt=j;K&&pn(Tt,w,oe,Je,ht,st,Me,kt),[this.firestore,this.persistenceEnabled$]=(0,q.BM)(`${Tt.name}.firestore`,"AngularFirestore",Tt.name,()=>{const yn=w.runOutsideAngular(()=>Tt.firestore());if(d&&yn.settings(d),zt&&yn.useEmulator(...zt),u&&!(0,I.Vy)(g)){const ln=()=>{try{return(0,be.H)(yn.enablePersistence(O||void 0).then(()=>!0,()=>!1))}catch(ge){return typeof console<"u"&&console.warn(ge),(0,_e.of)(!1)}};return[yn,w.runOutsideAngular(ln)]}return[yn,(0,_e.of)(!1)]},[d,zt,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:g}=Ry(u,s),w=this.schedulers.ngZone.run(()=>d);return new Cy(w,g,this)}collectionGroup(r,s){const u=s||(g=>g),d=this.firestore.collectionGroup(r);return new wI(u(d),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new xd(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(Y.KVO(q.rx),Y.KVO(q.uP,8),Y.KVO(by,8),Y.KVO(AI,8),Y.KVO(Y.Agw),Y.KVO(Y.SKi),Y.KVO(ae.u0),Y.KVO(Sy,8),Y.KVO(DI,8),Y.KVO(lr,8),Y.KVO(Qe,8),Y.KVO(gt,8),Y.KVO(xt,8),Y.KVO(je,8),Y.KVO(Zt,8),Y.KVO(Vn,8),Y.KVO(ae.Jv,8))};static \u0275prov=Y.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),My=(()=>{class a{constructor(){Te.A.registerVersion("angularfire",ae.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:by,useValue:!0},{provide:Sy,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=Y.$C({type:a});static \u0275inj=Y.G2t({providers:[Py]})}return a})()},9253:(Rt,Be,U)=>{U.d(Be,{BM:()=>rt,Gt:()=>X,bf:()=>ke,e7:()=>de,iB:()=>Z,rx:()=>$e,uP:()=>be});var I=U(7705),Y=U(1825),ae=U(7935);const q=["ngOnDestroy"],X=(ut,Bt,Vt,Ae={})=>new Proxy(ut,{get:(Ge,Te)=>Vt.runOutsideAngular(()=>{if(ut[Te])return Ae?.spy?.get&&Ae.spy.get(Te,ut[Te]),ut[Te];if(q.indexOf(Te)>-1)return()=>{};const et=Bt.toPromise().then(Qe=>{const gt=Qe?.[Te];return"function"==typeof gt?gt.bind(Qe):gt?.then?gt.then(xt=>Vt.run(()=>xt)):Vt.run(()=>gt)});return new Proxy(()=>{},{get:(Qe,gt)=>et[gt],apply:(Qe,gt,xt)=>et.then(je=>{const Zt=je?.(...xt);return Ae?.spy?.apply&&Ae.spy.apply(Te,xt,Zt),Zt})})})}),de=(ut,Bt)=>{Bt.forEach(Vt=>{Object.getOwnPropertyNames(Vt.prototype||Vt).forEach(Ae=>{Object.defineProperty(ut.prototype,Ae,Object.getOwnPropertyDescriptor(Vt.prototype||Vt,Ae))})})};class _e{constructor(Bt){return Bt}}const $e=new I.nKC("angularfire2.app.options"),be=new I.nKC("angularfire2.app.name");function Z(ut,Bt,Vt){const Ge="object"==typeof Vt&&Vt||{};Ge.name=Ge.name||"string"==typeof Vt&&Vt||"[DEFAULT]";const et=ae.A.apps.filter(Qe=>Qe&&Qe.name===Ge.name)[0]||Bt.runOutsideAngular(()=>ae.A.initializeApp(ut,Ge));try{if(JSON.stringify(ut)!==JSON.stringify(et.options)){const Qe=!!module.hot;ne("error",`${et.name} Firebase App already initialized with different options${Qe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new _e(et)}const ne=(ut,...Bt)=>{(0,I.naY)()&&typeof console<"u"&&console[ut](...Bt)},pe={provide:_e,useFactory:Z,deps:[$e,I.SKi,[new I.Xx1,be]]};let ke=(()=>{class ut{static initializeApp(Vt,Ae){return{ngModule:ut,providers:[{provide:$e,useValue:Vt},{provide:be,useValue:Ae}]}}constructor(Vt){ae.A.registerVersion("angularfire",Y.xv.full,"core"),ae.A.registerVersion("angularfire",Y.xv.full,"app-compat"),ae.A.registerVersion("angular",I.xvI.full,Vt.toString())}static \u0275fac=function(Ae){return new(Ae||ut)(I.KVO(I.Agw))};static \u0275mod=I.$C({type:ut});static \u0275inj=I.G2t({providers:[pe]})}return ut})();function rt(ut,Bt,Vt,Ae,Ge){const[,Te,et]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===ut)||[];if(Te)return function at(ut,Bt){try{return ut.toString()===Bt.toString()}catch{return ut===Bt}}(Ge,et)||(pt("error",`${Bt} was already initialized on the ${Vt} Firebase App with different settings.${We?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:Ge,was:et})),Te;{const Qe=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ut,Qe,Ge]),Qe}}const We=typeof module<"u"&&!!module.hot,pt=(ut,...Bt)=>{(0,I.naY)()&&typeof console<"u"&&console[ut](...Bt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(Rt,Be,U)=>{U.d(Be,{xv:()=>at,U0:()=>Vn,u0:()=>et,Jv:()=>Bt});var I=U(7705),Y=U(7852);(0,Y.registerVersion)("firebase","10.14.0","app");var X=U(6780),_e=U(9687);const be=new class $e extends _e.q{}(class de extends X.R{constructor(Xt,he){super(Xt,he),this.scheduler=Xt,this.work=he}schedule(Xt,he=0){return he>0?super.schedule(Xt,he):(this.delay=he,this.state=Xt,this.scheduler.flush(this),this)}execute(Xt,he){return he>0||this.closed?super.execute(Xt,he):this._execute(Xt,he)}requestAsyncId(Xt,he,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(Xt,he,we):(Xt.flush(this),0)}});var ne=U(3236),pe=U(8141),ke=U(6745),rt=U(941);const at=new I.RxE("ANGULARFIRE2_VERSION");class Bt{constructor(){return((en,Xt)=>{const he=(0,Y.getApps)(),we=[];return he.forEach(Le=>{Le.container.getProvider(en).instances.forEach(tt=>{we.includes(tt)||we.push(tt)})}),we})(Vt)}}const Vt="app-check";function Ae(){}class Ge{zone;delegate;constructor(Xt,he=be){this.zone=Xt,this.delegate=he}now(){return this.delegate.now()}schedule(Xt,he,we){const Le=this.zone;return this.delegate.schedule(function(tt){Le.runGuarded(()=>{Xt.apply(this,[tt])})},he,we)}}class Te{zone;task=null;constructor(Xt){this.zone=Xt}call(Xt,he){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ae,{},Ae,Ae)),he.pipe((0,pe.M)({next:we,complete:we,error:we})).subscribe(Xt).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let et=(()=>{class en{ngZone;outsideAngular;insideAngular;constructor(he){this.ngZone=he,this.outsideAngular=he.runOutsideAngular(()=>new Ge(Zone.current)),this.insideAngular=he.run(()=>new Ge(Zone.current,ne.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(we){return new(we||en)(I.KVO(I.SKi))};static \u0275prov=I.jDH({token:en,factory:en.\u0275fac,providedIn:"root"})}return en})();function Vn(en){return function pn(en){return function(he){return(he=he.lift(new Te(en.ngZone))).pipe((0,ke._)(en.outsideAngular),(0,rt.Q)(en.insideAngular))}}(function Qe(){const en=globalThis.\u0275AngularFireScheduler;if(!en)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return en}())(en)}},345:(Rt,Be,U)=>{U.d(Be,{Bb:()=>Dn,hE:()=>Ei,sG:()=>tn});var I=U(7705),Y=U(177);class ae extends Y.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class q extends ae{static makeCurrent(){(0,Y.ZD)(new q)}onAndCancel(z,k,H){return z.addEventListener(k,H),()=>{z.removeEventListener(k,H)}}dispatchEvent(z,k){z.dispatchEvent(k)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,k){return(k=k||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,k){return"window"===k?window:"document"===k?z:"body"===k?z.body:null}getBaseHref(z){const k=function de(){return X=X||document.querySelector("base"),X?X.getAttribute("href"):null}();return null==k?null:function $e(Ke){_e=_e||document.createElement("a"),_e.setAttribute("href",Ke);const z=_e.pathname;return"/"===z.charAt(0)?z:`/${z}`}(k)}resetBaseElement(){X=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,Y._b)(document.cookie,z)}}let _e,X=null,Z=(()=>{class Ke{build(){return new XMLHttpRequest}static{this.\u0275fac=function(H){return new(H||Ke)}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const ne=new I.nKC("EventManagerPlugins");let pe=(()=>{class Ke{constructor(k,H){this._zone=H,this._eventNameToPlugin=new Map,k.forEach(re=>{re.manager=this}),this._plugins=k.slice().reverse()}addEventListener(k,H,re){return this._findPluginFor(H).addEventListener(k,H,re)}getZone(){return this._zone}_findPluginFor(k){let H=this._eventNameToPlugin.get(k);if(H)return H;if(H=this._plugins.find(se=>se.supports(k)),!H)throw new I.wOt(5101,!1);return this._eventNameToPlugin.set(k,H),H}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO(ne),I.KVO(I.SKi))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();class ke{constructor(z){this._doc=z}}const rt="ng-app-id";let at=(()=>{class Ke{constructor(k,H,re,se={}){this.doc=k,this.appId=H,this.nonce=re,this.platformId=se,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Y.Vy)(se),this.resetHostNodes()}addStyles(k){for(const H of k)1===this.changeUsageCount(H,1)&&this.onStyleAdded(H)}removeStyles(k){for(const H of k)this.changeUsageCount(H,-1)<=0&&this.onStyleRemoved(H)}ngOnDestroy(){const k=this.styleNodesInDOM;k&&(k.forEach(H=>H.remove()),k.clear());for(const H of this.getAllStyles())this.onStyleRemoved(H);this.resetHostNodes()}addHost(k){this.hostNodes.add(k);for(const H of this.getAllStyles())this.addStyleToHost(k,H)}removeHost(k){this.hostNodes.delete(k)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(k){for(const H of this.hostNodes)this.addStyleToHost(H,k)}onStyleRemoved(k){const H=this.styleRef;H.get(k)?.elements?.forEach(re=>re.remove()),H.delete(k)}collectServerRenderedStyles(){const k=this.doc.head?.querySelectorAll(`style[${rt}="${this.appId}"]`);if(k?.length){const H=new Map;return k.forEach(re=>{null!=re.textContent&&H.set(re.textContent,re)}),H}return null}changeUsageCount(k,H){const re=this.styleRef;if(re.has(k)){const se=re.get(k);return se.usage+=H,se.usage}return re.set(k,{usage:H,elements:[]}),H}getStyleElement(k,H){const re=this.styleNodesInDOM,se=re?.get(H);if(se?.parentNode===k)return re.delete(H),se.removeAttribute(rt),se;{const Re=this.doc.createElement("style");return this.nonce&&Re.setAttribute("nonce",this.nonce),Re.textContent=H,this.platformIsServer&&Re.setAttribute(rt,this.appId),Re}}addStyleToHost(k,H){const re=this.getStyleElement(k,H);k.appendChild(re);const se=this.styleRef,Re=se.get(H)?.elements;Re?Re.push(re):se.set(H,{elements:[re],usage:1})}resetHostNodes(){const k=this.hostNodes;k.clear(),k.add(this.doc.head)}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO(Y.qQ),I.KVO(I.sZ2),I.KVO(I.BIS,8),I.KVO(I.Agw))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const We={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g,Ge=new I.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Qe(Ke,z){return z.map(k=>k.replace(pt,Ke))}let gt=(()=>{class Ke{constructor(k,H,re,se,Re,dt,jt,vt=null){this.eventManager=k,this.sharedStylesHost=H,this.appId=re,this.removeStylesOnCompDestroy=se,this.doc=Re,this.platformId=dt,this.ngZone=jt,this.nonce=vt,this.rendererByCompId=new Map,this.platformIsServer=(0,Y.Vy)(dt),this.defaultRenderer=new xt(k,Re,jt,this.platformIsServer)}createRenderer(k,H){if(!k||!H)return this.defaultRenderer;this.platformIsServer&&H.encapsulation===I.gXe.ShadowDom&&(H={...H,encapsulation:I.gXe.Emulated});const re=this.getOrCreateRenderer(k,H);return re instanceof Jn?re.applyToHost(k):re instanceof lr&&re.applyStyles(),re}getOrCreateRenderer(k,H){const re=this.rendererByCompId;let se=re.get(H.id);if(!se){const Re=this.doc,dt=this.ngZone,jt=this.eventManager,vt=this.sharedStylesHost,mt=this.removeStylesOnCompDestroy,Un=this.platformIsServer;switch(H.encapsulation){case I.gXe.Emulated:se=new Jn(jt,vt,H,this.appId,mt,Re,dt,Un);break;case I.gXe.ShadowDom:return new pn(jt,vt,k,H,Re,dt,this.nonce,Un);default:se=new lr(jt,vt,H,mt,Re,dt,Un)}re.set(H.id,se)}return se}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO(pe),I.KVO(at),I.KVO(I.sZ2),I.KVO(Ge),I.KVO(Y.qQ),I.KVO(I.Agw),I.KVO(I.SKi),I.KVO(I.BIS))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();class xt{constructor(z,k,H,re){this.eventManager=z,this.doc=k,this.ngZone=H,this.platformIsServer=re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,k){return k?this.doc.createElementNS(We[k]||k,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,k){(Vn(z)?z.content:z).appendChild(k)}insertBefore(z,k,H){z&&(Vn(z)?z.content:z).insertBefore(k,H)}removeChild(z,k){z&&z.removeChild(k)}selectRootElement(z,k){let H="string"==typeof z?this.doc.querySelector(z):z;if(!H)throw new I.wOt(-5104,!1);return k||(H.textContent=""),H}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,k,H,re){if(re){k=re+":"+k;const se=We[re];se?z.setAttributeNS(se,k,H):z.setAttribute(k,H)}else z.setAttribute(k,H)}removeAttribute(z,k,H){if(H){const re=We[H];re?z.removeAttributeNS(re,k):z.removeAttribute(`${H}:${k}`)}else z.removeAttribute(k)}addClass(z,k){z.classList.add(k)}removeClass(z,k){z.classList.remove(k)}setStyle(z,k,H,re){re&(I.czy.DashCase|I.czy.Important)?z.style.setProperty(k,H,re&I.czy.Important?"important":""):z.style[k]=H}removeStyle(z,k,H){H&I.czy.DashCase?z.style.removeProperty(k):z.style[k]=""}setProperty(z,k,H){z[k]=H}setValue(z,k){z.nodeValue=k}listen(z,k,H){if("string"==typeof z&&!(z=(0,Y.QT)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${k}`);return this.eventManager.addEventListener(z,k,this.decoratePreventDefault(H))}decoratePreventDefault(z){return k=>{if("__ngUnwrap__"===k)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(k)):z(k))&&k.preventDefault()}}}function Vn(Ke){return"TEMPLATE"===Ke.tagName&&void 0!==Ke.content}class pn extends xt{constructor(z,k,H,re,se,Re,dt,jt){super(z,se,Re,jt),this.sharedStylesHost=k,this.hostEl=H,this.shadowRoot=H.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const vt=Qe(re.id,re.styles);for(const mt of vt){const Un=document.createElement("style");dt&&Un.setAttribute("nonce",dt),Un.textContent=mt,this.shadowRoot.appendChild(Un)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,k){return super.appendChild(this.nodeOrShadowRoot(z),k)}insertBefore(z,k,H){return super.insertBefore(this.nodeOrShadowRoot(z),k,H)}removeChild(z,k){return super.removeChild(this.nodeOrShadowRoot(z),k)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lr extends xt{constructor(z,k,H,re,se,Re,dt,jt){super(z,se,Re,dt),this.sharedStylesHost=k,this.removeStylesOnCompDestroy=re,this.styles=jt?Qe(jt,H.styles):H.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Jn extends lr{constructor(z,k,H,re,se,Re,dt,jt){const vt=re+"-"+H.id;super(z,k,H,se,Re,dt,jt,vt),this.contentAttr=function Te(Ke){return"_ngcontent-%COMP%".replace(pt,Ke)}(vt),this.hostAttr=function et(Ke){return"_nghost-%COMP%".replace(pt,Ke)}(vt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,k){const H=super.createElement(z,k);return super.setAttribute(H,this.contentAttr,""),H}}let en=(()=>{class Ke extends ke{constructor(k){super(k)}supports(k){return!0}addEventListener(k,H,re){return k.addEventListener(H,re,!1),()=>this.removeEventListener(k,H,re)}removeEventListener(k,H,re){return k.removeEventListener(H,re)}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO(Y.qQ))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const Xt=["alt","control","meta","shift"],he={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},we={alt:Ke=>Ke.altKey,control:Ke=>Ke.ctrlKey,meta:Ke=>Ke.metaKey,shift:Ke=>Ke.shiftKey};let Le=(()=>{class Ke extends ke{constructor(k){super(k)}supports(k){return null!=Ke.parseEventName(k)}addEventListener(k,H,re){const se=Ke.parseEventName(H),Re=Ke.eventCallback(se.fullKey,re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Y.QT)().onAndCancel(k,se.domEventName,Re))}static parseEventName(k){const H=k.toLowerCase().split("."),re=H.shift();if(0===H.length||"keydown"!==re&&"keyup"!==re)return null;const se=Ke._normalizeKey(H.pop());let Re="",dt=H.indexOf("code");if(dt>-1&&(H.splice(dt,1),Re="code."),Xt.forEach(vt=>{const mt=H.indexOf(vt);mt>-1&&(H.splice(mt,1),Re+=vt+".")}),Re+=se,0!=H.length||0===se.length)return null;const jt={};return jt.domEventName=re,jt.fullKey=Re,jt}static matchEventFullKeyCode(k,H){let re=he[k.key]||k.key,se="";return H.indexOf("code.")>-1&&(re=k.code,se="code."),!(null==re||!re)&&(re=re.toLowerCase()," "===re?re="space":"."===re&&(re="dot"),Xt.forEach(Re=>{Re!==re&&(0,we[Re])(k)&&(se+=Re+".")}),se+=re,se===H)}static eventCallback(k,H,re){return se=>{Ke.matchEventFullKeyCode(se,k)&&re.runGuarded(()=>H(se))}}static _normalizeKey(k){return"esc"===k?"escape":k}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO(Y.qQ))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const tn=(0,I.oH4)(I.fpN,"browser",[{provide:I.Agw,useValue:Y.AJ},{provide:I.PLl,useValue:function yt(){q.makeCurrent()},multi:!0},{provide:Y.qQ,useFactory:function Ut(){return(0,I.TL$)(document),document},deps:[]}]),$r=new I.nKC(""),gn=[{provide:I.e01,useClass:class be{addToWindow(z){I.JZv.getAngularTestability=(H,re=!0)=>{const se=z.findTestabilityInTree(H,re);if(null==se)throw new I.wOt(5103,!1);return se},I.JZv.getAllAngularTestabilities=()=>z.getAllTestabilities(),I.JZv.getAllAngularRootElements=()=>z.getAllRootElements(),I.JZv.frameworkStabilizers||(I.JZv.frameworkStabilizers=[]),I.JZv.frameworkStabilizers.push(H=>{const re=I.JZv.getAllAngularTestabilities();let se=re.length,Re=!1;const dt=function(jt){Re=Re||jt,se--,0==se&&H(Re)};re.forEach(jt=>{jt.whenStable(dt)})})}findTestabilityInTree(z,k,H){return null==k?null:z.getTestability(k)??(H?(0,Y.QT)().isShadowRoot(k)?this.findTestabilityInTree(z,k.host,!0):this.findTestabilityInTree(z,k.parentElement,!0):null)}},deps:[]},{provide:I.WHO,useClass:I.NYb,deps:[I.SKi,I.giA,I.e01]},{provide:I.NYb,useClass:I.NYb,deps:[I.SKi,I.giA,I.e01]}],ir=[{provide:I.H8p,useValue:"root"},{provide:I.zcH,useFactory:function mr(){return new I.zcH},deps:[]},{provide:ne,useClass:en,multi:!0,deps:[Y.qQ,I.SKi,I.Agw]},{provide:ne,useClass:Le,multi:!0,deps:[Y.qQ]},gt,at,pe,{provide:I._9s,useExisting:gt},{provide:Y.N0,useClass:Z,deps:[]},[]];let Dn=(()=>{class Ke{constructor(k){}static withServerTransition(k){return{ngModule:Ke,providers:[{provide:I.sZ2,useValue:k.appId}]}}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO($r,12))}}static{this.\u0275mod=I.$C({type:Ke})}static{this.\u0275inj=I.G2t({providers:[...ir,...gn],imports:[Y.MD,I.Hbi]})}}return Ke})(),Ei=(()=>{class Ke{constructor(k){this._doc=k}getTitle(){return this._doc.title}setTitle(k){this._doc.title=k||""}static{this.\u0275fac=function(H){return new(H||Ke)(I.KVO(Y.qQ))}}static{this.\u0275prov=I.jDH({token:Ke,factory:function(H){let re=null;return re=H?new H:function Nr(){return new Ei((0,I.KVO)(Y.qQ))}(),re},providedIn:"root"})}}return Ke})();typeof window<"u"&&window},7841:(Rt,Be,U)=>{U.d(Be,{iI:()=>$n,n3:()=>cs});var I=U(7705),Y=U(1985),ae=U(8071),X=U(8455),de=U(7673),_e=U(4412),$e=U(3073),be=U(3669),Z=U(6450),ne=U(3794),pe=U(8496),ke=U(4360),rt=U(5225);function at(...E){const D=(0,ne.lI)(E),v=(0,ne.ms)(E),{args:b,keys:N}=(0,$e.D)(E);if(0===b.length)return(0,X.H)([],D);const G=new Y.c(function We(E,D,v=be.D){return b=>{pt(D,()=>{const{length:N}=E,G=new Array(N);let J=N,Ue=N;for(let Pe=0;Pe<N;Pe++)pt(D,()=>{const Dt=(0,X.H)(E[Pe],D);let un=!1;Dt.subscribe((0,ke._)(b,In=>{G[Pe]=In,un||(un=!0,Ue--),Ue||b.next(v(G.slice()))},()=>{--J||b.complete()}))},b)},b)}}(b,D,N?J=>(0,pe.e)(N,J):be.D));return v?G.pipe((0,Z.I)(v)):G}function pt(E,D,v){E?(0,rt.N)(v,E,D):D()}var ut=U(9350),Bt=U(8793),Vt=U(8750);function Ae(E){return new Y.c(D=>{(0,Vt.Tg)(E()).subscribe(D)})}var Ge=U(1203);function Te(E,D){const v=(0,ae.T)(E)?E:()=>E,b=N=>N.error(v());return new Y.c(D?N=>D.schedule(b,0,N):b)}var et=U(983),Qe=U(8359),gt=U(9974);function xt(){return(0,gt.N)((E,D)=>{let v=null;E._refCount++;const b=(0,ke._)(D,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(v=null);const N=E._connection,G=v;v=null,N&&(!G||N===G)&&N.unsubscribe(),D.unsubscribe()});E.subscribe(b),b.closed||(v=E.connect())})}class je extends Y.c{constructor(D,v){super(),this.source=D,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,gt.S)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Qe.yU;const v=this.getSubject();D.add(this.source.subscribe((0,ke._)(v,void 0,()=>{this._teardown(),v.complete()},b=>{this._teardown(),v.error(b)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Qe.yU.EMPTY)}return D}refCount(){return xt()(this)}}var Zt=U(1413),Vn=U(177),pn=U(6354),lr=U(5558),Jn=U(6697),en=U(9172),Xt=U(5964),he=U(1397),we=U(1594);function Le(E,D){return(0,ae.T)(D)?(0,he.Z)(E,D,1):(0,he.Z)(E,1)}var Ne=U(8141);function tt(E){return(0,gt.N)((D,v)=>{let G,b=null,N=!1;b=D.subscribe((0,ke._)(v,void 0,void 0,J=>{G=(0,Vt.Tg)(E(J,tt(E)(D))),b?(b.unsubscribe(),b=null,G.subscribe(v)):N=!0})),N&&(b.unsubscribe(),b=null,G.subscribe(v))})}var Ye=U(2816),ue=U(9901);function yt(E){return E<=0?()=>et.w:(0,gt.N)((D,v)=>{let b=[];D.subscribe((0,ke._)(v,N=>{b.push(N),E<b.length&&b.shift()},()=>{for(const N of b)v.next(N);v.complete()},void 0,()=>{b=null}))})}var mr=U(3774);function tn(E){return(0,gt.N)((D,v)=>{try{D.subscribe(v)}finally{v.add(E)}})}var $r=U(5343),ir=U(6365),Dn=U(345);const Nt="primary",Er=Symbol("RouteTitle");class ss{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v[0]:v}return null}getAll(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Nr(E){return new ss(E)}function Ei(E,D,v){const b=v.path.split("/");if(b.length>E.length||"full"===v.pathMatch&&(D.hasChildren()||b.length<E.length))return null;const N={};for(let G=0;G<b.length;G++){const J=b[G],Ue=E[G];if(J.startsWith(":"))N[J.substring(1)]=Ue;else if(J!==Ue.path)return null}return{consumed:E.slice(0,b.length),posParams:N}}function Zn(E,D){const v=E?Object.keys(E):void 0,b=D?Object.keys(D):void 0;if(!v||!b||v.length!=b.length)return!1;let N;for(let G=0;G<v.length;G++)if(N=v[G],!qt(E[N],D[N]))return!1;return!0}function qt(E,D){if(Array.isArray(E)&&Array.isArray(D)){if(E.length!==D.length)return!1;const v=[...E].sort(),b=[...D].sort();return v.every((N,G)=>b[G]===N)}return E===D}function hn(E){return E.length>0?E[E.length-1]:null}function Kt(E){return function q(E){return!!E&&(E instanceof Y.c||(0,ae.T)(E.lift)&&(0,ae.T)(E.subscribe))}(E)?E:(0,I.jNT)(E)?(0,X.H)(Promise.resolve(E)):(0,de.of)(E)}const pr={exact:function yr(E,D,v){if(!ct(E.segments,D.segments)||!Wt(E.segments,D.segments,v)||E.numberOfChildren!==D.numberOfChildren)return!1;for(const b in D.children)if(!E.children[b]||!yr(E.children[b],D.children[b],v))return!1;return!0},subset:Ce},bn={exact:function dn(E,D){return Zn(E,D)},subset:function bo(E,D){return Object.keys(D).length<=Object.keys(E).length&&Object.keys(D).every(v=>qt(E[v],D[v]))},ignored:()=>!0};function or(E,D,v){return pr[v.paths](E.root,D.root,v.matrixParams)&&bn[v.queryParams](E.queryParams,D.queryParams)&&!("exact"===v.fragment&&E.fragment!==D.fragment)}function Ce(E,D,v){return zn(E,D,D.segments,v)}function zn(E,D,v,b){if(E.segments.length>v.length){const N=E.segments.slice(0,v.length);return!(!ct(N,v)||D.hasChildren()||!Wt(N,v,b))}if(E.segments.length===v.length){if(!ct(E.segments,v)||!Wt(E.segments,v,b))return!1;for(const N in D.children)if(!E.children[N]||!Ce(E.children[N],D.children[N],b))return!1;return!0}{const N=v.slice(0,E.segments.length),G=v.slice(E.segments.length);return!!(ct(E.segments,N)&&Wt(E.segments,N,b)&&E.children[Nt])&&zn(E.children[Nt],D,G,b)}}function Wt(E,D,v){return D.every((b,N)=>bn[v](E[N].parameters,b.parameters))}class ii{constructor(D=new it([],{}),v={},b=null){this.root=D,this.queryParams=v,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nr(this.queryParams)),this._queryParamMap}toString(){return os.serialize(this)}}class it{constructor(D,v){this.segments=D,this.children=v,this.parent=null,Object.values(v).forEach(b=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class bt{constructor(D,v){this.path=D,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Nr(this.parameters)),this._parameterMap}toString(){return re(this)}}function ct(E,D){return E.length===D.length&&E.every((v,b)=>v.path===D[b].path)}let Xe=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return new Yn},providedIn:"root"})}}return E})();class Yn{parse(D){const v=new It(D);return new ii(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(D){const v=`/${Ti(D.root,!0)}`,b=function Re(E){const D=Object.keys(E).map(v=>{const b=E[v];return Array.isArray(b)?b.map(N=>`${Hi(v)}=${Hi(N)}`).join("&"):`${Hi(v)}=${Hi(b)}`}).filter(v=>!!v);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${v}${b}${"string"==typeof D.fragment?`#${function Ke(E){return encodeURI(E)}(D.fragment)}`:""}`}}const os=new Yn;function si(E){return E.segments.map(D=>re(D)).join("/")}function Ti(E,D){if(!E.hasChildren())return si(E);if(D){const v=E.children[Nt]?Ti(E.children[Nt],!1):"",b=[];return Object.entries(E.children).forEach(([N,G])=>{N!==Nt&&b.push(`${N}:${Ti(G,!1)}`)}),b.length>0?`${v}(${b.join("//")})`:v}{const v=function xe(E,D){let v=[];return Object.entries(E.children).forEach(([b,N])=>{b===Nt&&(v=v.concat(D(N,b)))}),Object.entries(E.children).forEach(([b,N])=>{b!==Nt&&(v=v.concat(D(N,b)))}),v}(E,(b,N)=>N===Nt?[Ti(E.children[Nt],!1)]:[`${N}:${Ti(b,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Nt]?`${si(E)}/${v[0]}`:`${si(E)}/(${v.join("//")})`}}function $i(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hi(E){return $i(E).replace(/%3B/gi,";")}function z(E){return $i(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k(E){return decodeURIComponent(E)}function H(E){return k(E.replace(/\+/g,"%20"))}function re(E){return`${z(E.path)}${function se(E){return Object.keys(E).map(D=>`;${z(D)}=${z(E[D])}`).join("")}(E.parameters)}`}const dt=/^[^\/()?;#]+/;function jt(E){const D=E.match(dt);return D?D[0]:""}const vt=/^[^\/()?;=#]+/,Un=/^[^=?&#]+/,oi=/^[^&#]+/;class It{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new it([],{}):new it([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(D.length>0||Object.keys(v).length>0)&&(b[Nt]=new it(D,v)),b}parseSegment(){const D=jt(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new I.wOt(4009,!1);return this.capture(D),new bt(k(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const v=function mt(E){const D=E.match(vt);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let b="";if(this.consumeOptional("=")){const N=jt(this.remaining);N&&(b=N,this.capture(b))}D[k(v)]=k(b)}parseQueryParam(D){const v=function wt(E){const D=E.match(Un);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let b="";if(this.consumeOptional("=")){const J=function kn(E){const D=E.match(oi);return D?D[0]:""}(this.remaining);J&&(b=J,this.capture(b))}const N=H(v),G=H(b);if(D.hasOwnProperty(N)){let J=D[N];Array.isArray(J)||(J=[J],D[N]=J),J.push(G)}else D[N]=G}parseParens(D){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=jt(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new I.wOt(4010,!1);let G;b.indexOf(":")>-1?(G=b.slice(0,b.indexOf(":")),this.capture(G),this.capture(":")):D&&(G=Nt);const J=this.parseChildren();v[G]=1===Object.keys(J).length?J[Nt]:new it([],J),this.consumeOptional("//")}return v}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new I.wOt(4011,!1)}}function Cr(E){return E.segments.length>0?new it([],{[Nt]:E}):E}function ui(E){const D={};for(const b of Object.keys(E.children)){const G=ui(E.children[b]);if(b===Nt&&0===G.segments.length&&G.hasChildren())for(const[J,Ue]of Object.entries(G.children))D[J]=Ue;else(G.segments.length>0||G.hasChildren())&&(D[b]=G)}return function Hr(E){if(1===E.numberOfChildren&&E.children[Nt]){const D=E.children[Nt];return new it(E.segments.concat(D.segments),D.children)}return E}(new it(E.segments,D))}function xr(E){return E instanceof ii}function as(E){let D;const N=Cr(function v(G){const J={};for(const Pe of G.children){const Dt=v(Pe);J[Pe.outlet]=Dt}const Ue=new it(G.url,J);return G===E&&(D=Ue),Ue}(E.root));return D??N}function Fe(E,D,v,b){let N=E;for(;N.parent;)N=N.parent;if(0===D.length)return ft(N,N,N,v,b);const G=function fn(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new nn(!0,0,E);let D=0,v=!1;const b=E.reduce((N,G,J)=>{if("object"==typeof G&&null!=G){if(G.outlets){const Ue={};return Object.entries(G.outlets).forEach(([Pe,Dt])=>{Ue[Pe]="string"==typeof Dt?Dt.split("/"):Dt}),[...N,{outlets:Ue}]}if(G.segmentPath)return[...N,G.segmentPath]}return"string"!=typeof G?[...N,G]:0===J?(G.split("/").forEach((Ue,Pe)=>{0==Pe&&"."===Ue||(0==Pe&&""===Ue?v=!0:".."===Ue?D++:""!=Ue&&N.push(Ue))}),N):[...N,G]},[]);return new nn(v,D,b)}(D);if(G.toRoot())return ft(N,N,new it([],{}),v,b);const J=function er(E,D,v){if(E.isAbsolute)return new Cn(D,!0,0);if(!v)return new Cn(D,!1,NaN);if(null===v.parent)return new Cn(v,!0,0);const b=Ie(E.commands[0])?0:1;return function me(E,D,v){let b=E,N=D,G=v;for(;G>N;){if(G-=N,b=b.parent,!b)throw new I.wOt(4005,!1);N=b.segments.length}return new Cn(b,!1,N-G)}(v,v.segments.length-1+b,E.numberOfDoubleDots)}(G,N,E),Ue=J.processChildren?zi(J.segmentGroup,J.index,G.commands):Xr(J.segmentGroup,J.index,G.commands);return ft(N,J.segmentGroup,Ue,v,b)}function Ie(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function qe(E){return"object"==typeof E&&null!=E&&E.outlets}function ft(E,D,v,b,N){let J,G={};b&&Object.entries(b).forEach(([Pe,Dt])=>{G[Pe]=Array.isArray(Dt)?Dt.map(un=>`${un}`):`${Dt}`}),J=E===D?v:$t(E,D,v);const Ue=Cr(ui(J));return new ii(Ue,G,N)}function $t(E,D,v){const b={};return Object.entries(E.children).forEach(([N,G])=>{b[N]=G===D?v:$t(G,D,v)}),new it(E.segments,b)}class nn{constructor(D,v,b){if(this.isAbsolute=D,this.numberOfDoubleDots=v,this.commands=b,D&&b.length>0&&Ie(b[0]))throw new I.wOt(4003,!1);const N=b.find(qe);if(N&&N!==hn(b))throw new I.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cn{constructor(D,v,b){this.segmentGroup=D,this.processChildren=v,this.index=b}}function Xr(E,D,v){if(E||(E=new it([],{})),0===E.segments.length&&E.hasChildren())return zi(E,D,v);const b=function Pu(E,D,v){let b=0,N=D;const G={match:!1,pathIndex:0,commandIndex:0};for(;N<E.segments.length;){if(b>=v.length)return G;const J=E.segments[N],Ue=v[b];if(qe(Ue))break;const Pe=`${Ue}`,Dt=b<v.length-1?v[b+1]:null;if(N>0&&void 0===Pe)break;if(Pe&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!br(Pe,Dt,J))return G;b+=2}else{if(!br(Pe,{},J))return G;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(E,D,v),N=v.slice(b.commandIndex);if(b.match&&b.pathIndex<E.segments.length){const G=new it(E.segments.slice(0,b.pathIndex),{});return G.children[Nt]=new it(E.segments.slice(b.pathIndex),E.children),zi(G,0,N)}return b.match&&0===N.length?new it(E.segments,{}):b.match&&!E.hasChildren()?Gi(E,D,v):b.match?zi(E,0,N):Gi(E,D,v)}function zi(E,D,v){if(0===v.length)return new it(E.segments,{});{const b=function vn(E){return qe(E[0])?E[0].outlets:{[Nt]:E}}(v),N={};if(Object.keys(b).some(G=>G!==Nt)&&E.children[Nt]&&1===E.numberOfChildren&&0===E.children[Nt].segments.length){const G=zi(E.children[Nt],D,v);return new it(E.segments,G.children)}return Object.entries(b).forEach(([G,J])=>{"string"==typeof J&&(J=[J]),null!==J&&(N[G]=Xr(E.children[G],D,J))}),Object.entries(E.children).forEach(([G,J])=>{void 0===b[G]&&(N[G]=J)}),new it(E.segments,N)}}function Gi(E,D,v){const b=E.segments.slice(0,D);let N=0;for(;N<v.length;){const G=v[N];if(qe(G)){const Pe=us(G.outlets);return new it(b,Pe)}if(0===N&&Ie(v[0])){b.push(new bt(E.segments[D].path,ia(v[0]))),N++;continue}const J=qe(G)?G.outlets[Nt]:`${G}`,Ue=N<v.length-1?v[N+1]:null;J&&Ue&&Ie(Ue)?(b.push(new bt(J,ia(Ue))),N+=2):(b.push(new bt(J,{})),N++)}return new it(b,{})}function us(E){const D={};return Object.entries(E).forEach(([v,b])=>{"string"==typeof b&&(b=[b]),null!==b&&(D[v]=Gi(new it([],{}),0,b))}),D}function ia(E){const D={};return Object.entries(E).forEach(([v,b])=>D[v]=`${b}`),D}function br(E,D,v){return E==v.path&&Zn(D,v.parameters)}const Ns="imperative";class _i{constructor(D,v){this.id=D,this.url=v}}class ja extends _i{constructor(D,v,b="imperative",N=null){super(D,v),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wi extends _i{constructor(D,v,b){super(D,v),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zr extends _i{constructor(D,v,b,N){super(D,v),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pi extends _i{constructor(D,v,b,N){super(D,v),this.reason=b,this.code=N,this.type=16}}class wi extends _i{constructor(D,v,b,N){super(D,v),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sa extends _i{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends _i{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $a extends _i{constructor(D,v,b,N,G){super(D,v),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ha extends _i{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki extends _i{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class za{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class So{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oa{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nu{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aa{constructor(D,v,b){this.routerEvent=D,this.position=v,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wn{}class Or{constructor(D){this.url=D}}class to{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kr,this.attachRef=null}}let kr=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(v,b){const N=this.getOrCreateContext(v);N.outlet=b,this.contexts.set(v,N)}onChildOutletDestroyed(v){const b=this.getContext(v);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let b=this.getContext(v);return b||(b=new to,this.contexts.set(v,b)),b}getContext(v){return this.contexts.get(v)||null}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();class Ga{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const v=this.pathFromRoot(D);return v.length>1?v[v.length-2]:null}children(D){const v=no(D,this._root);return v?v.children.map(b=>b.value):[]}firstChild(D){const v=no(D,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(D){const v=ro(D,this._root);return v.length<2?[]:v[v.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return ro(D,this._root).map(v=>v.value)}}function no(E,D){if(E===D.value)return D;for(const v of D.children){const b=no(E,v);if(b)return b}return null}function ro(E,D){if(E===D.value)return[D];for(const v of D.children){const b=ro(E,v);if(b.length)return b.unshift(D),b}return[]}class Mi{constructor(D,v){this.value=D,this.children=v}toString(){return`TreeNode(${this.value})`}}function qi(E){const D={};return E&&E.children.forEach(v=>D[v.value.outlet]=v),D}class dr extends Ga{constructor(D,v){super(D),this.snapshot=v,tr(this,D)}toString(){return this.snapshot.toString()}}function At(E,D){const v=function cn(E,D){const J=new Sr([],{},{},"",{},Nt,D,null,{});return new Os("",new Mi(J,[]))}(0,D),b=new _e.t([new bt("",{})]),N=new _e.t({}),G=new _e.t({}),J=new _e.t({}),Ue=new _e.t(""),Pe=new Bn(b,N,J,Ue,G,Nt,D,v.root);return Pe.snapshot=v.root,new dr(new Mi(Pe,[]),v)}class Bn{constructor(D,v,b,N,G,J,Ue,Pe){this.urlSubject=D,this.paramsSubject=v,this.queryParamsSubject=b,this.fragmentSubject=N,this.dataSubject=G,this.outlet=J,this.component=Ue,this._futureSnapshot=Pe,this.title=this.dataSubject?.pipe((0,pn.T)(Dt=>Dt[Er]))??(0,de.of)(void 0),this.url=D,this.params=v,this.queryParams=b,this.fragment=N,this.data=G}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pn.T)(D=>Nr(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pn.T)(D=>Nr(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gr(E,D="emptyOnly"){const v=E.pathFromRoot;let b=0;if("always"!==D)for(b=v.length-1;b>=1;){const N=v[b],G=v[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if(G.component)break;b--}}return function io(E){return E.reduce((D,v)=>({params:{...D.params,...v.params},data:{...D.data,...v.data},resolve:{...v.data,...D.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(b))}class Sr{get title(){return this.data?.[Er]}constructor(D,v,b,N,G,J,Ue,Pe,Dt){this.url=D,this.params=v,this.queryParams=b,this.fragment=N,this.data=G,this.outlet=J,this.component=Ue,this.routeConfig=Pe,this._resolve=Dt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Os extends Ga{constructor(D,v){super(v),this.url=D,tr(this,v)}toString(){return sr(this._root)}}function tr(E,D){D.value._routerState=E,D.children.forEach(v=>tr(E,v))}function sr(E){const D=E.children.length>0?` { ${E.children.map(sr).join(", ")} } `:"";return`${E.value}${D}`}function Ni(E){if(E.snapshot){const D=E.snapshot,v=E._futureSnapshot;E.snapshot=v,Zn(D.queryParams,v.queryParams)||E.queryParamsSubject.next(v.queryParams),D.fragment!==v.fragment&&E.fragmentSubject.next(v.fragment),Zn(D.params,v.params)||E.paramsSubject.next(v.params),function Fr(E,D){if(E.length!==D.length)return!1;for(let v=0;v<E.length;++v)if(!Zn(E[v],D[v]))return!1;return!0}(D.url,v.url)||E.urlSubject.next(v.url),Zn(D.data,v.data)||E.dataSubject.next(v.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function Gt(E,D){const v=Zn(E.params,D.params)&&function ji(E,D){return ct(E,D)&&E.every((v,b)=>Zn(v.parameters,D[b].parameters))}(E.url,D.url);return v&&!(!E.parent!=!D.parent)&&(!E.parent||Gt(E.parent,D.parent))}let cs=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Nt,this.activateEvents=new I.bkB,this.deactivateEvents=new I.bkB,this.attachEvents=new I.bkB,this.detachEvents=new I.bkB,this.parentContexts=(0,I.WQX)(kr),this.location=(0,I.WQX)(I.c1b),this.changeDetector=(0,I.WQX)(I.gRc),this.environmentInjector=(0,I.WQX)(I.uvJ),this.inputBinder=(0,I.WQX)(mn,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:b,previousValue:N}=v.name;if(b)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.wOt(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,b){this.activated=v,this._activatedRoute=b,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,b){if(this.isActivated)throw new I.wOt(4013,!1);this._activatedRoute=v;const N=this.location,J=v.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,Pe=new ks(v,Ue,N.injector);this.activated=N.createComponent(J,{index:N.length,injector:Pe,environmentInjector:b??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275dir=I.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.OA$]})}}return E})();class ks{constructor(D,v,b){this.route=D,this.childContexts=v,this.parent=b}get(D,v){return D===Bn?this.route:D===kr?this.childContexts:this.parent.get(D,v)}}const mn=new I.nKC("");let ur=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:b}=v,N=at([b.queryParams,b.params,b.data]).pipe((0,lr.n)(([G,J,Ue],Pe)=>(Ue={...G,...J,...Ue},0===Pe?(0,de.of)(Ue):Promise.resolve(Ue)))).subscribe(G=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==b||null===b.component)return void this.unsubscribeFromRouteData(v);const J=(0,I.HJs)(b.component);if(J)for(const{templateName:Ue}of J.inputs)v.activatedComponentRef.setInput(Ue,G[Ue]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,N)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac})}}return E})();function sn(E,D,v){if(v&&E.shouldReuseRoute(D.value,v.value.snapshot)){const b=v.value;b._futureSnapshot=D.value;const N=function xi(E,D,v){return D.children.map(b=>{for(const N of v.children)if(E.shouldReuseRoute(b.value,N.value.snapshot))return sn(E,b,N);return sn(E,b)})}(E,D,v);return new Mi(b,N)}{if(E.shouldAttach(D.value)){const G=E.retrieve(D.value);if(null!==G){const J=G.route;return J.value._futureSnapshot=D.value,J.children=D.children.map(Ue=>sn(E,Ue)),J}}const b=function Ai(E){return new Bn(new _e.t(E.url),new _e.t(E.params),new _e.t(E.queryParams),new _e.t(E.fragment),new _e.t(E.data),E.outlet,E.component,E)}(D.value),N=D.children.map(G=>sn(E,G));return new Mi(b,N)}}const Zr="ngNavigationCancelingError";function Di(E,D){const{redirectTo:v,navigationBehaviorOptions:b}=xr(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,N=ls(!1,0,D);return N.url=v,N.navigationBehaviorOptions=b,N}function ls(E,D,v){const b=new Error("NavigationCancelingError: "+(E||""));return b[Zr]=!0,b.cancellationCode=D,v&&(b.url=v),b}function Ro(E){return E&&E[Zr]}let on=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275cmp=I.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[I.aNF],decls:1,vars:0,template:function(b,N){1&b&&I.nrm(0,"router-outlet")},dependencies:[cs],encapsulation:2})}}return E})();function nr(E){const D=E.children&&E.children.map(nr),v=D?{...E,children:D}:{...E};return!v.component&&!v.loadComponent&&(D||v.loadChildren)&&v.outlet&&v.outlet!==Nt&&(v.component=on),v}function Sn(E){return E.outlet||Nt}function Vr(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let D=E.parent;D;D=D.parent){const v=D.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Es{constructor(D,v,b,N,G){this.routeReuseStrategy=D,this.futureState=v,this.currState=b,this.forwardEvent=N,this.inputBindingEnabled=G}activate(D){const v=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,b,D),Ni(this.futureState.root),this.activateChildRoutes(v,b,D)}deactivateChildRoutes(D,v,b){const N=qi(v);D.children.forEach(G=>{const J=G.value.outlet;this.deactivateRoutes(G,N[J],b),delete N[J]}),Object.values(N).forEach(G=>{this.deactivateRouteAndItsChildren(G,b)})}deactivateRoutes(D,v,b){const N=D.value,G=v?v.value:null;if(N===G)if(N.component){const J=b.getContext(N.outlet);J&&this.deactivateChildRoutes(D,v,J.children)}else this.deactivateChildRoutes(D,v,b);else G&&this.deactivateRouteAndItsChildren(v,b)}deactivateRouteAndItsChildren(D,v){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,v):this.deactivateRouteAndOutlet(D,v)}detachAndStoreRouteSubtree(D,v){const b=v.getContext(D.value.outlet),N=b&&D.value.component?b.children:v,G=qi(D);for(const J of Object.keys(G))this.deactivateRouteAndItsChildren(G[J],N);if(b&&b.outlet){const J=b.outlet.detach(),Ue=b.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:J,route:D,contexts:Ue})}}deactivateRouteAndOutlet(D,v){const b=v.getContext(D.value.outlet),N=b&&D.value.component?b.children:v,G=qi(D);for(const J of Object.keys(G))this.deactivateRouteAndItsChildren(G[J],N);b&&(b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated()),b.attachRef=null,b.route=null)}activateChildRoutes(D,v,b){const N=qi(v);D.children.forEach(G=>{this.activateRoutes(G,N[G.value.outlet],b),this.forwardEvent(new xs(G.value.snapshot))}),D.children.length&&this.forwardEvent(new Mu(D.value.snapshot))}activateRoutes(D,v,b){const N=D.value,G=v?v.value:null;if(Ni(N),N===G)if(N.component){const J=b.getOrCreateContext(N.outlet);this.activateChildRoutes(D,v,J.children)}else this.activateChildRoutes(D,v,b);else if(N.component){const J=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Ue=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),J.children.onOutletReAttached(Ue.contexts),J.attachRef=Ue.componentRef,J.route=Ue.route.value,J.outlet&&J.outlet.attach(Ue.componentRef,Ue.route.value),Ni(Ue.route.value),this.activateChildRoutes(D,null,J.children)}else{const Ue=Vr(N.snapshot);J.attachRef=null,J.route=N,J.injector=Ue,J.outlet&&J.outlet.activateWith(N,J.injector),this.activateChildRoutes(D,null,J.children)}}else this.activateChildRoutes(D,null,b)}}class Vs{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Us{constructor(D,v){this.component=D,this.route=v}}function so(E,D,v){const b=E._root;return oo(b,D?D._root:null,v,[b.value])}function Tr(E,D){const v=Symbol(),b=D.get(E,v);return b===v?"function"!=typeof E||(0,I.LfX)(E)?D.get(E):E:b}function oo(E,D,v,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=qi(D);return E.children.forEach(J=>{(function Pl(E,D,v,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=E.value,J=D?D.value:null,Ue=v?v.getContext(E.value.outlet):null;if(J&&G.routeConfig===J.routeConfig){const Pe=function ua(E,D,v){if("function"==typeof v)return v(E,D);switch(v){case"pathParamsChange":return!ct(E.url,D.url);case"pathParamsOrQueryParamsChange":return!ct(E.url,D.url)||!Zn(E.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gt(E,D)||!Zn(E.queryParams,D.queryParams);default:return!Gt(E,D)}}(J,G,G.routeConfig.runGuardsAndResolvers);Pe?N.canActivateChecks.push(new Vs(b)):(G.data=J.data,G._resolvedData=J._resolvedData),oo(E,D,G.component?Ue?Ue.children:null:v,b,N),Pe&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&N.canDeactivateChecks.push(new Us(Ue.outlet.component,J))}else J&&Wn(D,Ue,N),N.canActivateChecks.push(new Vs(b)),oo(E,null,G.component?Ue?Ue.children:null:v,b,N)})(J,G[J.value.outlet],v,b.concat([J.value]),N),delete G[J.value.outlet]}),Object.entries(G).forEach(([J,Ue])=>Wn(Ue,v.getContext(J),N)),N}function Wn(E,D,v){const b=qi(E),N=E.value;Object.entries(b).forEach(([G,J])=>{Wn(J,N.component?D?D.children.getContext(G):null:D,v)}),v.canDeactivateChecks.push(new Us(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}function Ts(E){return"function"==typeof E}function rr(E){return E instanceof ut.G||"EmptyError"===E?.name}const Yi=Symbol("INITIAL_VALUE");function ds(){return(0,lr.n)(E=>at(E.map(D=>D.pipe((0,Jn.s)(1),(0,en.Z)(Yi)))).pipe((0,pn.T)(D=>{for(const v of D)if(!0!==v){if(v===Yi)return Yi;if(!1===v||v instanceof ii)return v}return!0}),(0,Xt.p)(D=>D!==Yi),(0,Jn.s)(1)))}function No(E){return(0,Ge.F)((0,Ne.M)(D=>{if(xr(D))throw Di(0,D)}),(0,pn.T)(D=>!0===D))}class hs{constructor(D){this.segmentGroup=D||null}}class ao{constructor(D){this.urlTree=D}}function Ji(E){return Te(new hs(E))}function xo(E){return Te(new ao(E))}class da{constructor(D,v){this.urlSerializer=D,this.urlTree=v}noMatchError(D){return new I.wOt(4002,!1)}lineralizeSegments(D,v){let b=[],N=v.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,de.of)(b);if(N.numberOfChildren>1||!N.children[Nt])return Te(new I.wOt(4e3,!1));N=N.children[Nt]}}applyRedirectCommands(D,v,b){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),D,b)}applyRedirectCreateUrlTree(D,v,b,N){const G=this.createSegmentGroup(D,v.root,b,N);return new ii(G,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(D,v){const b={};return Object.entries(D).forEach(([N,G])=>{if("string"==typeof G&&G.startsWith(":")){const Ue=G.substring(1);b[N]=v[Ue]}else b[N]=G}),b}createSegmentGroup(D,v,b,N){const G=this.createSegments(D,v.segments,b,N);let J={};return Object.entries(v.children).forEach(([Ue,Pe])=>{J[Ue]=this.createSegmentGroup(D,Pe,b,N)}),new it(G,J)}createSegments(D,v,b,N){return v.map(G=>G.path.startsWith(":")?this.findPosParam(D,G,N):this.findOrReturn(G,b))}findPosParam(D,v,b){const N=b[v.path.substring(1)];if(!N)throw new I.wOt(4001,!1);return N}findOrReturn(D,v){let b=0;for(const N of v){if(N.path===D.path)return v.splice(b),N;b++}return D}}const Ya={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uo(E,D,v,b,N){const G=js(E,D,v);return G.matched?(b=function hr(E,D){return E.providers&&!E._injector&&(E._injector=(0,I.Ol2)(E.providers,D,`Route: ${E.path}`)),E._injector??D}(D,b),function ws(E,D,v,b){const N=D.canMatch;if(!N||0===N.length)return(0,de.of)(!0);const G=N.map(J=>{const Ue=Tr(J,E);return Kt(function Ka(E){return E&&Ts(E.canMatch)}(Ue)?Ue.canMatch(D,v):E.runInContext(()=>Ue(D,v)))});return(0,de.of)(G).pipe(ds(),No())}(b,D,v).pipe((0,pn.T)(J=>!0===J?G:{...Ya}))):(0,de.of)(G)}function js(E,D,v){if(""===D.path)return"full"===D.pathMatch&&(E.hasChildren()||v.length>0)?{...Ya}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const N=(D.matcher||Ei)(v,E,D);if(!N)return{...Ya};const G={};Object.entries(N.posParams??{}).forEach(([Ue,Pe])=>{G[Ue]=Pe.path});const J=N.consumed.length>0?{...G,...N.consumed[N.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:N.consumed,remainingSegments:v.slice(N.consumed.length),parameters:J,positionalParamSegments:N.posParams??{}}}function As(E,D,v,b){return v.length>0&&function Oo(E,D,v){return v.some(b=>co(E,D,b)&&Sn(b)!==Nt)}(E,v,b)?{segmentGroup:new it(D,ha(b,new it(v,E.children))),slicedSegments:[]}:0===v.length&&function ko(E,D,v){return v.some(b=>co(E,D,b))}(E,v,b)?{segmentGroup:new it(E.segments,Xa(E,0,v,b,E.children)),slicedSegments:v}:{segmentGroup:new it(E.segments,E.children),slicedSegments:v}}function Xa(E,D,v,b,N){const G={};for(const J of b)if(co(E,v,J)&&!N[Sn(J)]){const Ue=new it([],{});G[Sn(J)]=Ue}return{...N,...G}}function ha(E,D){const v={};v[Nt]=D;for(const b of E)if(""===b.path&&Sn(b)!==Nt){const N=new it([],{});v[Sn(b)]=N}return v}function co(E,D,v){return(!(E.hasChildren()||D.length>0)||"full"!==v.pathMatch)&&""===v.path}class bi{constructor(D,v,b,N,G,J,Ue){this.injector=D,this.configLoader=v,this.rootComponentType=b,this.config=N,this.urlTree=G,this.paramsInheritanceStrategy=J,this.urlSerializer=Ue,this.allowRedirects=!0,this.applyRedirects=new da(this.urlSerializer,this.urlTree)}noMatchError(D){return new I.wOt(4002,!1)}recognize(){const D=As(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,Nt).pipe(tt(v=>{if(v instanceof ao)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof hs?this.noMatchError(v):v}),(0,pn.T)(v=>{const b=new Sr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,{}),N=new Mi(b,v),G=new Os("",N),J=function rn(E,D,v=null,b=null){return Fe(as(E),D,v,b)}(b,[],this.urlTree.queryParams,this.urlTree.fragment);return J.queryParams=this.urlTree.queryParams,G.url=this.urlSerializer.serialize(J),this.inheritParamsAndData(G._root),{state:G,tree:J}}))}match(D){return this.processSegmentGroup(this.injector,this.config,D.root,Nt).pipe(tt(b=>{throw b instanceof hs?this.noMatchError(b):b}))}inheritParamsAndData(D){const v=D.value,b=Gr(v,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,v,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(D,v,b):this.processSegment(D,v,b,b.segments,N,!0)}processChildren(D,v,b){const N=[];for(const G of Object.keys(b.children))"primary"===G?N.unshift(G):N.push(G);return(0,X.H)(N).pipe(Le(G=>{const J=b.children[G],Ue=function Is(E,D){const v=E.filter(b=>Sn(b)===D);return v.push(...E.filter(b=>Sn(b)!==D)),v}(v,G);return this.processSegmentGroup(D,Ue,J,G)}),(0,Ye.S)((G,J)=>(G.push(...J),G)),(0,ue.U)(null),function Ut(E,D){const v=arguments.length>=2;return b=>b.pipe(E?(0,Xt.p)((N,G)=>E(N,G,b)):be.D,yt(1),v?(0,ue.U)(D):(0,mr.v)(()=>new ut.G))}(),(0,he.Z)(G=>{if(null===G)return Ji(b);const J=Ja(G);return function wc(E){E.sort((D,v)=>D.value.outlet===Nt?-1:v.value.outlet===Nt?1:D.value.outlet.localeCompare(v.value.outlet))}(J),(0,de.of)(J)}))}processSegment(D,v,b,N,G,J){return(0,X.H)(v).pipe(Le(Ue=>this.processSegmentAgainstRoute(Ue._injector??D,v,Ue,b,N,G,J).pipe(tt(Pe=>{if(Pe instanceof hs)return(0,de.of)(null);throw Pe}))),(0,we.$)(Ue=>!!Ue),tt(Ue=>{if(rr(Ue))return function Nl(E,D,v){return 0===D.length&&!E.children[v]}(b,N,G)?(0,de.of)([]):Ji(b);throw Ue}))}processSegmentAgainstRoute(D,v,b,N,G,J,Ue){return function Lo(E,D,v,b){return!!(Sn(E)===b||b!==Nt&&co(D,v,E))&&("**"===E.path||js(D,E,v).matched)}(b,N,G,J)?void 0===b.redirectTo?this.matchSegmentAgainstRoute(D,N,b,G,J,Ue):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,N,v,b,G,J):Ji(N):Ji(N)}expandSegmentAgainstRouteUsingRedirect(D,v,b,N,G,J){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,b,N,J):this.expandRegularSegmentAgainstRouteUsingRedirect(D,v,b,N,G,J)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,v,b,N){const G=this.applyRedirects.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?xo(G):this.applyRedirects.lineralizeSegments(b,G).pipe((0,he.Z)(J=>{const Ue=new it(J,{});return this.processSegment(D,v,Ue,J,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,v,b,N,G,J){const{matched:Ue,consumedSegments:Pe,remainingSegments:Dt,positionalParamSegments:un}=js(v,N,G);if(!Ue)return Ji(v);const In=this.applyRedirects.applyRedirectCommands(Pe,N.redirectTo,un);return N.redirectTo.startsWith("/")?xo(In):this.applyRedirects.lineralizeSegments(N,In).pipe((0,he.Z)(En=>this.processSegment(D,b,v,En.concat(Dt),J,!1)))}matchSegmentAgainstRoute(D,v,b,N,G,J){let Ue;if("**"===b.path){const Pe=N.length>0?hn(N).parameters:{},Dt=new Sr(N,Pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ds(b),Sn(b),b.component??b._loadedComponent??null,b,A(b));Ue=(0,de.of)({snapshot:Dt,consumedSegments:[],remainingSegments:[]}),v.children={}}else Ue=uo(v,b,N,D).pipe((0,pn.T)(({matched:Pe,consumedSegments:Dt,remainingSegments:un,parameters:In})=>Pe?{snapshot:new Sr(Dt,In,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ds(b),Sn(b),b.component??b._loadedComponent??null,b,A(b)),consumedSegments:Dt,remainingSegments:un}:null));return Ue.pipe((0,lr.n)(Pe=>null===Pe?Ji(v):this.getChildConfig(D=b._injector??D,b,N).pipe((0,lr.n)(({routes:Dt})=>{const un=b._loadedInjector??D,{snapshot:In,consumedSegments:En,remainingSegments:Jt}=Pe,{segmentGroup:$o,slicedSegments:Ho}=As(v,En,Jt,Dt);if(0===Ho.length&&$o.hasChildren())return this.processChildren(un,Dt,$o).pipe((0,pn.T)(gs=>null===gs?null:[new Mi(In,gs)]));if(0===Dt.length&&0===Ho.length)return(0,de.of)([new Mi(In,[])]);const Uu=Sn(b)===G;return this.processSegment(un,Dt,$o,Ho,Uu?Nt:G,!0).pipe((0,pn.T)(gs=>[new Mi(In,gs)]))}))))}getChildConfig(D,v,b){return v.children?(0,de.of)({routes:v.children,injector:D}):v.loadChildren?void 0!==v._loadedRoutes?(0,de.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function Qa(E,D,v,b){const N=D.canLoad;if(void 0===N||0===N.length)return(0,de.of)(!0);const G=N.map(J=>{const Ue=Tr(J,E);return Kt(function Ml(E){return E&&Ts(E.canLoad)}(Ue)?Ue.canLoad(D,v):E.runInContext(()=>Ue(D,v)))});return(0,de.of)(G).pipe(ds(),No())}(D,v,b).pipe((0,he.Z)(N=>N?this.configLoader.loadChildren(D,v).pipe((0,Ne.M)(G=>{v._loadedRoutes=G.routes,v._loadedInjector=G.injector})):function Tc(E){return Te(ls(!1,3))}())):(0,de.of)({routes:[],injector:D})}}function $s(E){const D=E.value.routeConfig;return D&&""===D.path}function Ja(E){const D=[],v=new Set;for(const b of E){if(!$s(b)){D.push(b);continue}const N=D.find(G=>b.value.routeConfig===G.value.routeConfig);void 0!==N?(N.children.push(...b.children),v.add(N)):D.push(b)}for(const b of v){const N=Ja(b.children);D.push(new Mi(b.value,N))}return D.filter(b=>!v.has(b))}function Ds(E){return E.data||{}}function A(E){return E.resolve||{}}function St(E){return"string"==typeof E.title||null===E.title}function Ln(E){return(0,lr.n)(D=>{const v=E(D);return v?(0,X.H)(v).pipe((0,pn.T)(()=>D)):(0,de.of)(D)})}const Mn=new I.nKC("ROUTES");let Fn=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,I.WQX)(I.Ql9)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,de.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const b=Kt(v.loadComponent()).pipe((0,pn.T)(Xn),(0,Ne.M)(G=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=G}),tn(()=>{this.componentLoaders.delete(v)})),N=new je(b,()=>new Zt.B).pipe(xt());return this.componentLoaders.set(v,N),N}loadChildren(v,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,de.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const G=function _n(E,D,v,b){return Kt(E.loadChildren()).pipe((0,pn.T)(Xn),(0,he.Z)(N=>N instanceof I.Co$||Array.isArray(N)?(0,de.of)(N):(0,X.H)(D.compileModuleAsync(N))),(0,pn.T)(N=>{b&&b(E);let G,J,Ue=!1;return Array.isArray(N)?(J=N,!0):(G=N.create(v).injector,J=G.get(Mn,[],{optional:!0,self:!0}).flat()),{routes:J.map(nr),injector:G}}))}(b,this.compiler,v,this.onLoadEndListener).pipe(tn(()=>{this.childrenLoaders.delete(b)})),J=new je(G,()=>new Zt.B).pipe(xt());return this.childrenLoaders.set(b,J),J}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Xn(E){return function Kn(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Nn=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt.B,this.transitionAbortSubject=new Zt.B,this.configLoader=(0,I.WQX)(Fn),this.environmentInjector=(0,I.WQX)(I.uvJ),this.urlSerializer=(0,I.WQX)(Xe),this.rootContexts=(0,I.WQX)(kr),this.inputBindingEnabled=null!==(0,I.WQX)(mn,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,de.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new So(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new za(N))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const b=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:b})}setupNavigations(v,b,N){return this.transitions=new _e.t({id:0,currentUrlTree:b,currentRawUrl:b,currentBrowserUrl:b,extractedUrl:v.urlHandlingStrategy.extract(b),urlAfterRedirects:v.urlHandlingStrategy.extract(b),rawUrl:b,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ns,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Xt.p)(G=>0!==G.id),(0,pn.T)(G=>({...G,extractedUrl:v.urlHandlingStrategy.extract(G.rawUrl)})),(0,lr.n)(G=>{this.currentTransition=G;let J=!1,Ue=!1;return(0,de.of)(G).pipe((0,Ne.M)(Pe=>{this.currentNavigation={id:Pe.id,initialUrl:Pe.rawUrl,extractedUrl:Pe.extractedUrl,trigger:Pe.source,extras:Pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,lr.n)(Pe=>{const Dt=Pe.currentBrowserUrl.toString(),un=!v.navigated||Pe.extractedUrl.toString()!==Dt||Dt!==Pe.currentUrlTree.toString();if(!un&&"reload"!==(Pe.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const En="";return this.events.next(new Pi(Pe.id,this.urlSerializer.serialize(Pe.rawUrl),En,0)),Pe.resolve(null),et.w}if(v.urlHandlingStrategy.shouldProcessUrl(Pe.rawUrl))return(0,de.of)(Pe).pipe((0,lr.n)(En=>{const Jt=this.transitions?.getValue();return this.events.next(new ja(En.id,this.urlSerializer.serialize(En.extractedUrl),En.source,En.restoredState)),Jt!==this.transitions?.getValue()?et.w:Promise.resolve(En)}),function V(E,D,v,b,N,G){return(0,he.Z)(J=>function Ou(E,D,v,b,N,G,J="emptyOnly"){return new bi(E,D,v,b,N,J,G).recognize()}(E,D,v,b,J.extractedUrl,N,G).pipe((0,pn.T)(({state:Ue,tree:Pe})=>({...J,targetSnapshot:Ue,urlAfterRedirects:Pe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Ne.M)(En=>{G.targetSnapshot=En.targetSnapshot,G.urlAfterRedirects=En.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:En.urlAfterRedirects};const Jt=new sa(En.id,this.urlSerializer.serialize(En.extractedUrl),this.urlSerializer.serialize(En.urlAfterRedirects),En.targetSnapshot);this.events.next(Jt)}));if(un&&v.urlHandlingStrategy.shouldProcessUrl(Pe.currentRawUrl)){const{id:En,extractedUrl:Jt,source:$o,restoredState:Ho,extras:Uu}=Pe,gs=new ja(En,this.urlSerializer.serialize(Jt),$o,Ho);this.events.next(gs);const ms=At(0,this.rootComponentType).snapshot;return this.currentTransition=G={...Pe,targetSnapshot:ms,urlAfterRedirects:Jt,extras:{...Uu,skipLocationChange:!1,replaceUrl:!1}},(0,de.of)(G)}{const En="";return this.events.next(new Pi(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),En,1)),Pe.resolve(null),et.w}}),(0,Ne.M)(Pe=>{const Dt=new ar(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot);this.events.next(Dt)}),(0,pn.T)(Pe=>(this.currentTransition=G={...Pe,guards:so(Pe.targetSnapshot,Pe.currentSnapshot,this.rootContexts)},G)),function ca(E,D){return(0,he.Z)(v=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:G,canDeactivateChecks:J}}=v;return 0===J.length&&0===G.length?(0,de.of)({...v,guardsResult:!0}):function vi(E,D,v,b){return(0,X.H)(E).pipe((0,he.Z)(N=>function qr(E,D,v,b,N){const G=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,de.of)(!0);const J=G.map(Ue=>{const Pe=Vr(D)??N,Dt=Tr(Ue,Pe);return Kt(function xu(E){return E&&Ts(E.canDeactivate)}(Dt)?Dt.canDeactivate(E,D,v,b):Pe.runInContext(()=>Dt(E,D,v,b))).pipe((0,we.$)())});return(0,de.of)(J).pipe(ds())}(N.component,N.route,v,D,b)),(0,we.$)(N=>!0!==N,!0))}(J,b,N,E).pipe((0,he.Z)(Ue=>Ue&&function vc(E){return"boolean"==typeof E}(Ue)?function Oi(E,D,v,b){return(0,X.H)(D).pipe(Le(N=>(0,Bt.x)(function Rn(E,D){return null!==E&&D&&D(new oa(E)),(0,de.of)(!0)}(N.route.parent,b),function Bs(E,D){return null!==E&&D&&D(new Nu(E)),(0,de.of)(!0)}(N.route,b),function Xi(E,D,v){const b=D[D.length-1],G=D.slice(0,D.length-1).reverse().map(J=>function Mo(E){const D=E.routeConfig?E.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:E,guards:D}:null}(J)).filter(J=>null!==J).map(J=>Ae(()=>{const Ue=J.guards.map(Pe=>{const Dt=Vr(J.node)??v,un=Tr(Pe,Dt);return Kt(function Ec(E){return E&&Ts(E.canActivateChild)}(un)?un.canActivateChild(b,E):Dt.runInContext(()=>un(b,E))).pipe((0,we.$)())});return(0,de.of)(Ue).pipe(ds())}));return(0,de.of)(G).pipe(ds())}(E,N.path,v),function an(E,D,v){const b=D.routeConfig?D.routeConfig.canActivate:null;if(!b||0===b.length)return(0,de.of)(!0);const N=b.map(G=>Ae(()=>{const J=Vr(D)??v,Ue=Tr(G,J);return Kt(function Ic(E){return E&&Ts(E.canActivate)}(Ue)?Ue.canActivate(D,E):J.runInContext(()=>Ue(D,E))).pipe((0,we.$)())}));return(0,de.of)(N).pipe(ds())}(E,N.route,v))),(0,we.$)(N=>!0!==N,!0))}(b,G,E,D):(0,de.of)(Ue)),(0,pn.T)(Ue=>({...v,guardsResult:Ue})))})}(this.environmentInjector,Pe=>this.events.next(Pe)),(0,Ne.M)(Pe=>{if(G.guardsResult=Pe.guardsResult,xr(Pe.guardsResult))throw Di(0,Pe.guardsResult);const Dt=new $a(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot,!!Pe.guardsResult);this.events.next(Dt)}),(0,Xt.p)(Pe=>!!Pe.guardsResult||(this.cancelNavigationTransition(Pe,"",3),!1)),Ln(Pe=>{if(Pe.guards.canActivateChecks.length)return(0,de.of)(Pe).pipe((0,Ne.M)(Dt=>{const un=new Ha(Dt.id,this.urlSerializer.serialize(Dt.extractedUrl),this.urlSerializer.serialize(Dt.urlAfterRedirects),Dt.targetSnapshot);this.events.next(un)}),(0,lr.n)(Dt=>{let un=!1;return(0,de.of)(Dt).pipe(function P(E,D){return(0,he.Z)(v=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=v;if(!N.length)return(0,de.of)(v);let G=0;return(0,X.H)(N).pipe(Le(J=>function F(E,D,v,b){const N=E.routeConfig,G=E._resolve;return void 0!==N?.title&&!St(N)&&(G[Er]=N.title),function ee(E,D,v,b){const N=function Oe(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===N.length)return(0,de.of)({});const G={};return(0,X.H)(N).pipe((0,he.Z)(J=>function nt(E,D,v,b){const N=Vr(D)??b,G=Tr(E,N);return Kt(G.resolve?G.resolve(D,v):N.runInContext(()=>G(D,v)))}(E[J],D,v,b).pipe((0,we.$)(),(0,Ne.M)(Ue=>{G[J]=Ue}))),yt(1),function Mt(E){return(0,pn.T)(()=>E)}(G),tt(J=>rr(J)?et.w:Te(J)))}(G,E,D,b).pipe((0,pn.T)(J=>(E._resolvedData=J,E.data=Gr(E,v).resolve,N&&St(N)&&(E.data[Er]=N.title),null)))}(J.route,b,E,D)),(0,Ne.M)(()=>G++),yt(1),(0,he.Z)(J=>G===N.length?(0,de.of)(v):et.w))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Ne.M)({next:()=>un=!0,complete:()=>{un||this.cancelNavigationTransition(Dt,"",2)}}))}),(0,Ne.M)(Dt=>{const un=new Ki(Dt.id,this.urlSerializer.serialize(Dt.extractedUrl),this.urlSerializer.serialize(Dt.urlAfterRedirects),Dt.targetSnapshot);this.events.next(un)}))}),Ln(Pe=>{const Dt=un=>{const In=[];un.routeConfig?.loadComponent&&!un.routeConfig._loadedComponent&&In.push(this.configLoader.loadComponent(un.routeConfig).pipe((0,Ne.M)(En=>{un.component=En}),(0,pn.T)(()=>{})));for(const En of un.children)In.push(...Dt(En));return In};return at(Dt(Pe.targetSnapshot.root)).pipe((0,ue.U)(),(0,Jn.s)(1))}),Ln(()=>this.afterPreactivation()),(0,pn.T)(Pe=>{const Dt=function Rr(E,D,v){const b=sn(E,D._root,v?v._root:void 0);return new dr(b,D)}(v.routeReuseStrategy,Pe.targetSnapshot,Pe.currentRouterState);return this.currentTransition=G={...Pe,targetRouterState:Dt},G}),(0,Ne.M)(()=>{this.events.next(new wn)}),((E,D,v,b)=>(0,pn.T)(N=>(new Es(D,N.targetRouterState,N.currentRouterState,v,b).activate(E),N)))(this.rootContexts,v.routeReuseStrategy,Pe=>this.events.next(Pe),this.inputBindingEnabled),(0,Jn.s)(1),(0,Ne.M)({next:Pe=>{J=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Wi(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects))),v.titleStrategy?.updateTitle(Pe.targetRouterState.snapshot),Pe.resolve(!0)},complete:()=>{J=!0}}),function gn(E){return(0,gt.N)((D,v)=>{(0,Vt.Tg)(E).subscribe((0,ke._)(v,()=>v.complete(),$r.l)),!v.closed&&D.subscribe(v)})}(this.transitionAbortSubject.pipe((0,Ne.M)(Pe=>{throw Pe}))),tn(()=>{J||Ue||this.cancelNavigationTransition(G,"",1),this.currentNavigation?.id===G.id&&(this.currentNavigation=null)}),tt(Pe=>{if(Ue=!0,Ro(Pe))this.events.next(new zr(G.id,this.urlSerializer.serialize(G.extractedUrl),Pe.message,Pe.cancellationCode)),function qn(E){return Ro(E)&&xr(E.url)}(Pe)?this.events.next(new Or(Pe.url)):G.resolve(!1);else{this.events.next(new wi(G.id,this.urlSerializer.serialize(G.extractedUrl),Pe,G.targetSnapshot??void 0));try{G.resolve(v.errorHandler(Pe))}catch(Dt){G.reject(Dt)}}return et.w}))}))}cancelNavigationTransition(v,b,N){const G=new zr(v.id,this.urlSerializer.serialize(v.extractedUrl),b,N);this.events.next(G),v.resolve(!1)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function ti(E){return E!==Ns}let ni=(()=>{class E{buildTitle(v){let b,N=v.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find(G=>G.outlet===Nt);return b}getResolvedTitleForRoute(v){return v.data[Er]}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Hs)},providedIn:"root"})}}return E})(),Hs=(()=>{class E extends ni{constructor(v){super(),this.title=v}updateTitle(v){const b=this.buildTitle(v);void 0!==b&&this.title.setTitle(b)}static{this.\u0275fac=function(b){return new(b||E)(I.KVO(Dn.hE))}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})(),vr=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Pr)},providedIn:"root"})}}return E})();class Cs{shouldDetach(D){return!1}store(D,v){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,v){return D.routeConfig===v.routeConfig}}let Pr=(()=>{class E extends Cs{static{this.\u0275fac=function(){let v;return function(N){return(v||(v=I.xGo(E)))(N||E)}}()}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const Zi=new I.nKC("",{providedIn:"root",factory:()=>({})});let Jd=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Lt)},providedIn:"root"})}}return E})(),Lt=(()=>{class E{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,b){return v}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();var pa=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(pa||{});function zs(E,D){E.events.pipe((0,Xt.p)(v=>v instanceof Wi||v instanceof zr||v instanceof wi||v instanceof Pi),(0,pn.T)(v=>v instanceof Wi||v instanceof Pi?pa.COMPLETE:v instanceof zr&&(0===v.code||1===v.code)?pa.REDIRECTING:pa.FAILED),(0,Xt.p)(v=>v!==pa.REDIRECTING),(0,Jn.s)(1)).subscribe(()=>{D()})}function ci(E){throw E}function xl(E,D,v){return D.parse("/")}const Ol={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wr=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.WQX)(I.H3F),this.isNgZoneEnabled=!1,this._events=new Zt.B,this.options=(0,I.WQX)(Zi,{optional:!0})||{},this.pendingTasks=(0,I.WQX)(I.$K3),this.errorHandler=this.options.errorHandler||ci,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xl,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.WQX)(Jd),this.routeReuseStrategy=(0,I.WQX)(vr),this.titleStrategy=(0,I.WQX)(ni),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,I.WQX)(Mn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,I.WQX)(Nn),this.urlSerializer=(0,I.WQX)(Xe),this.location=(0,I.WQX)(Vn.aZ),this.componentInputBindingEnabled=!!(0,I.WQX)(mn,{optional:!0}),this.eventsSubscription=new Qe.yU,this.isNgZoneEnabled=(0,I.WQX)(I.SKi)instanceof I.SKi&&I.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=At(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(b=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(kl(b)&&this._events.next(b));if(b instanceof ja)ti(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(b instanceof Pi)this.rawUrlTree=N.rawUrl;else if(b instanceof sa){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(G,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(b instanceof wn)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(b instanceof zr)0!==b.code&&1!==b.code&&(this.navigated=!0),(3===b.code||2===b.code)&&this.restoreHistory(N);else if(b instanceof Or){const G=this.urlHandlingStrategy.merge(b.url,N.currentRawUrl),J={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ti(N.source)};this.scheduleNavigation(G,Ns,null,J,{resolve:N.resolve,reject:N.reject,promise:N.promise})}b instanceof wi&&this.restoreHistory(N,!0),b instanceof Wi&&(this.navigated=!0),kl(b)&&this._events.next(b)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ns,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const b="popstate"===v.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,b,v.state)},0)}))}navigateToSyncWithBrowser(v,b,N){const G={replaceUrl:!0},J=N?.navigationId?N:null;if(N){const Pe={...N};delete Pe.navigationId,delete Pe.\u0275routerPageId,0!==Object.keys(Pe).length&&(G.state=Pe)}const Ue=this.parseUrl(v);this.scheduleNavigation(Ue,b,J,G)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(nr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,b={}){const{relativeTo:N,queryParams:G,fragment:J,queryParamsHandling:Ue,preserveFragment:Pe}=b,Dt=Pe?this.currentUrlTree.fragment:J;let In,un=null;switch(Ue){case"merge":un={...this.currentUrlTree.queryParams,...G};break;case"preserve":un=this.currentUrlTree.queryParams;break;default:un=G||null}null!==un&&(un=this.removeEmptyProps(un));try{In=as(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),In=this.currentUrlTree.root}return Fe(In,v,un,Dt??null)}navigateByUrl(v,b={skipLocationChange:!1}){const N=xr(v)?v:this.parseUrl(v),G=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(G,Ns,null,b)}navigate(v,b={skipLocationChange:!1}){return function wf(E){for(let D=0;D<E.length;D++)if(null==E[D])throw new I.wOt(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,b),b)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let b;try{b=this.urlSerializer.parse(v)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,v)}return b}isActive(v,b){let N;if(N=!0===b?{...Ol}:!1===b?{...lo}:b,xr(v))return or(this.currentUrlTree,v,N);const G=this.parseUrl(v);return or(this.currentUrlTree,G,N)}removeEmptyProps(v){return Object.keys(v).reduce((b,N)=>{const G=v[N];return null!=G&&(b[N]=G),b},{})}scheduleNavigation(v,b,N,G,J){if(this.disposed)return Promise.resolve(!1);let Ue,Pe,Dt;J?(Ue=J.resolve,Pe=J.reject,Dt=J.promise):Dt=new Promise((In,En)=>{Ue=In,Pe=En});const un=this.pendingTasks.add();return zs(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(un))}),this.navigationTransitions.handleNavigationRequest({source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:G,resolve:Ue,reject:Pe,promise:Dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dt.catch(In=>Promise.reject(In))}setBrowserUrl(v,b){const N=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl){const J={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId)};this.location.replaceState(N,"",J)}else{const G={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId+1)};this.location.go(N,"",G)}}restoreHistory(v,b=!1){if("computed"===this.canceledNavigationResolution){const G=this.currentPageId-this.browserPageId;0!==G?this.location.historyGo(G):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===G&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,b){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:b}:{navigationId:v}}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function kl(E){return!(E instanceof wn||E instanceof Or)}class bs{}let Ac=(()=>{class E{constructor(v,b,N,G,J){this.router=v,this.injector=N,this.preloadingStrategy=G,this.loader=J}setUpPreloading(){this.subscription=this.router.events.pipe((0,Xt.p)(v=>v instanceof Wi),Le(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,b){const N=[];for(const G of b){G.providers&&!G._injector&&(G._injector=(0,I.Ol2)(G.providers,v,`Route: ${G.path}`));const J=G._injector??v,Ue=G._loadedInjector??J;(G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent)&&N.push(this.preloadConfig(J,G)),(G.children||G._loadedRoutes)&&N.push(this.processRoutes(Ue,G.children??G._loadedRoutes))}return(0,X.H)(N).pipe((0,ir.U)())}preloadConfig(v,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(v,b):(0,de.of)(null);const G=N.pipe((0,he.Z)(J=>null===J?(0,de.of)(void 0):(b._loadedRoutes=J.routes,b._loadedInjector=J.injector,this.processRoutes(J.injector??v,J.routes))));if(b.loadComponent&&!b._loadedComponent){const J=this.loader.loadComponent(b);return(0,X.H)([G,J]).pipe((0,ir.U)())}return G})}static{this.\u0275fac=function(b){return new(b||E)(I.KVO(wr),I.KVO(I.Ql9),I.KVO(I.uvJ),I.KVO(bs),I.KVO(Fn))}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const Dc=new I.nKC("");let Qt=(()=>{class E{constructor(v,b,N,G,J={}){this.urlSerializer=v,this.transitions=b,this.viewportScroller=N,this.zone=G,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof ja?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Wi?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof Pi&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof aa&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,b){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new aa(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(b){I.QTQ()}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac})}}return E})();function jn(E,D){return{\u0275kind:E,\u0275providers:D}}function _a(){const E=(0,I.WQX)(I.zZn);return D=>{const v=E.get(I.o8S);if(D!==v.components[0])return;const b=E.get(wr),N=E.get(eh);1===E.get(Vo)&&b.initialNavigation(),E.get(xn,null,I.$GK.Optional)?.setUpPreloading(),E.get(Dc,null,I.$GK.Optional)?.init(),b.resetRootComponentType(v.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const eh=new I.nKC("",{factory:()=>new Zt.B}),Vo=new I.nKC("",{providedIn:"root",factory:()=>1}),xn=new I.nKC("");function Uo(E){return jn(0,[{provide:xn,useExisting:Ac},{provide:bs,useExisting:E}])}const Bo=new I.nKC("ROUTER_FORROOT_GUARD"),Rc=[Vn.aZ,{provide:Xe,useClass:Yn},wr,kr,{provide:Bn,useFactory:function Cc(E){return E.routerState.root},deps:[wr]},Fn,[]];function Ur(){return new I.NEm("Router",wr)}let $n=(()=>{class E{constructor(v){}static forRoot(v,b){return{ngModule:E,providers:[Rc,[],{provide:Mn,multi:!0,useValue:v},{provide:Bo,useFactory:jo,deps:[[wr,new I.Xx1,new I.kdw]]},{provide:Zi,useValue:b||{}},b?.useHash?{provide:Vn.hb,useClass:Vn.fw}:{provide:Vn.hb,useClass:Vn.Sm},{provide:Dc,useFactory:()=>{const E=(0,I.WQX)(Vn.Xr),D=(0,I.WQX)(I.SKi),v=(0,I.WQX)(Zi),b=(0,I.WQX)(Nn),N=(0,I.WQX)(Xe);return v.scrollOffset&&E.setOffset(v.scrollOffset),new Qt(N,b,E,D,v)}},b?.preloadingStrategy?Uo(b.preloadingStrategy).\u0275providers:[],{provide:I.NEm,multi:!0,useFactory:Ur},b?.initialNavigation?Ks(b):[],b?.bindToComponentInputs?jn(8,[ur,{provide:mn,useExisting:ur}]).\u0275providers:[],[{provide:ps,useFactory:_a},{provide:I.iLQ,multi:!0,useExisting:ps}]]}}static forChild(v){return{ngModule:E,providers:[{provide:Mn,multi:!0,useValue:v}]}}static{this.\u0275fac=function(b){return new(b||E)(I.KVO(Bo,8))}}static{this.\u0275mod=I.$C({type:E})}static{this.\u0275inj=I.G2t({})}}return E})();function jo(E){return"guarded"}function Ks(E){return["disabled"===E.initialNavigation?jn(3,[{provide:I.hnV,multi:!0,useFactory:()=>{const D=(0,I.WQX)(wr);return()=>{D.setUpLocationChangeListener()}}},{provide:Vo,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?jn(2,[{provide:Vo,useValue:0},{provide:I.hnV,multi:!0,deps:[I.zZn],useFactory:D=>{const v=D.get(Vn.hj,Promise.resolve());return()=>v.then(()=>new Promise(b=>{const N=D.get(wr),G=D.get(eh);zs(N,()=>{b(!0)}),D.get(Nn).afterPreactivation=()=>(b(!0),G.closed?(0,de.of)(void 0):G),N.initialNavigation()}))}}]).\u0275providers:[]]}const ps=new I.nKC("")},3345:(Rt,Be,U)=>{U.d(Be,{A:()=>at});var I=U(1076),Y=U(1362),ae=U(7852),q=U(8041);class X{constructor(pt,ut){this._delegate=pt,this.firebase=ut,(0,ae._addComponent)(pt,new Y.uA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ae.deleteApp)(this._delegate)))}_getService(pt,ut=ae._DEFAULT_ENTRY_NAME){var Bt;this._delegate.checkDestroyed();const Vt=this._delegate.container.getProvider(pt);return!Vt.isInitialized()&&"EXPLICIT"===(null===(Bt=Vt.getComponent())||void 0===Bt?void 0:Bt.instantiationMode)&&Vt.initialize(),Vt.getImmediate({identifier:ut})}_removeServiceInstance(pt,ut=ae._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(ut)}_addComponent(pt){(0,ae._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,ae._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new I.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function be(){const We=function $e(We){const pt={},ut={__esModule:!0,initializeApp:function Ae(Qe,gt={}){const xt=ae.initializeApp(Qe,gt);if((0,I.gR)(pt,xt.name))return pt[xt.name];const je=new We(xt,ut);return pt[xt.name]=je,je},app:Vt,registerVersion:ae.registerVersion,setLogLevel:ae.setLogLevel,onLog:ae.onLog,apps:null,SDK_VERSION:ae.SDK_VERSION,INTERNAL:{registerComponent:function Te(Qe){const gt=Qe.name,xt=gt.replace("-compat","");if(ae._registerComponent(Qe)&&"PUBLIC"===Qe.type){const je=(Zt=Vt())=>{if("function"!=typeof Zt[xt])throw _e.create("invalid-app-argument",{appName:gt});return Zt[xt]()};void 0!==Qe.serviceProps&&(0,I.zw)(je,Qe.serviceProps),ut[xt]=je,We.prototype[xt]=function(...Zt){return this._getService.bind(this,gt).apply(this,Qe.multipleInstances?Zt:[])}}return"PUBLIC"===Qe.type?ut[xt]:null},removeApp:function Bt(Qe){delete pt[Qe]},useAsService:function et(Qe,gt){return"serverAuth"===gt?null:gt},modularAPIs:ae}};function Vt(Qe){if(!(0,I.gR)(pt,Qe=Qe||ae._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Qe});return pt[Qe]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function Ge(){return Object.keys(pt).map(Qe=>pt[Qe])}}),Vt.App=We,ut}(X);return We.INTERNAL=Object.assign(Object.assign({},We.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function pt(ut){(0,I.zw)(We,ut)},createSubscribe:I.tD,ErrorFactory:I.FA,deepExtend:I.zw}),We}(),ne=new q.Vy("@firebase/app-compat");try{const We=(0,I.mS)();if(void 0!==We.firebase){ne.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const pt=We.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&ne.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const at=Z;!function rt(We){(0,ae.registerVersion)("@firebase/app-compat","0.2.42",We)}()},7852:(Rt,Be,U)=>{U.r(Be),U.d(Be,{FirebaseError:()=>q.g,SDK_VERSION:()=>Yn,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>yr,_addOrOverwriteComponent:()=>bo,_apps:()=>bn,_clearComponents:()=>bt,_components:()=>dn,_getProvider:()=>zn,_isFirebaseApp:()=>ii,_isFirebaseServerApp:()=>it,_registerComponent:()=>Ce,_removeServiceInstance:()=>Wt,_serverApps:()=>or,deleteApp:()=>Hi,getApp:()=>Ti,getApps:()=>$i,initializeApp:()=>os,initializeServerApp:()=>si,onLog:()=>k,registerVersion:()=>z,setLogLevel:()=>H});var I=U(467),Y=U(1362),ae=U(8041),q=U(1076);const X=(Fe,Ie)=>Ie.some(qe=>Fe instanceof qe);let de,_e;const Z=new WeakMap,ne=new WeakMap,pe=new WeakMap,ke=new WeakMap,rt=new WeakMap;let pt={get(Fe,Ie,qe){if(Fe instanceof IDBTransaction){if("done"===Ie)return ne.get(Fe);if("objectStoreNames"===Ie)return Fe.objectStoreNames||pe.get(Fe);if("store"===Ie)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return Ae(Fe[Ie])},set:(Fe,Ie,qe)=>(Fe[Ie]=qe,!0),has:(Fe,Ie)=>Fe instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in Fe};function Vt(Fe){return"function"==typeof Fe?function Bt(Fe){return Fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Fe)?function(...Ie){return Fe.apply(Ge(this),Ie),Ae(Z.get(this))}:function(...Ie){return Ae(Fe.apply(Ge(this),Ie))}:function(Ie,...qe){const ft=Fe.call(Ge(this),Ie,...qe);return pe.set(ft,Ie.sort?Ie.sort():[Ie]),Ae(ft)}}(Fe):(Fe instanceof IDBTransaction&&function We(Fe){if(ne.has(Fe))return;const Ie=new Promise((qe,ft)=>{const $t=()=>{Fe.removeEventListener("complete",nn),Fe.removeEventListener("error",fn),Fe.removeEventListener("abort",fn)},nn=()=>{qe(),$t()},fn=()=>{ft(Fe.error||new DOMException("AbortError","AbortError")),$t()};Fe.addEventListener("complete",nn),Fe.addEventListener("error",fn),Fe.addEventListener("abort",fn)});ne.set(Fe,Ie)}(Fe),X(Fe,function $e(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Fe,pt):Fe)}function Ae(Fe){if(Fe instanceof IDBRequest)return function at(Fe){const Ie=new Promise((qe,ft)=>{const $t=()=>{Fe.removeEventListener("success",nn),Fe.removeEventListener("error",fn)},nn=()=>{qe(Ae(Fe.result)),$t()},fn=()=>{ft(Fe.error),$t()};Fe.addEventListener("success",nn),Fe.addEventListener("error",fn)});return Ie.then(qe=>{qe instanceof IDBCursor&&Z.set(qe,Fe)}).catch(()=>{}),rt.set(Ie,Fe),Ie}(Fe);if(ke.has(Fe))return ke.get(Fe);const Ie=Vt(Fe);return Ie!==Fe&&(ke.set(Fe,Ie),rt.set(Ie,Fe)),Ie}const Ge=Fe=>rt.get(Fe),Qe=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],xt=new Map;function je(Fe,Ie){if(!(Fe instanceof IDBDatabase)||Ie in Fe||"string"!=typeof Ie)return;if(xt.get(Ie))return xt.get(Ie);const qe=Ie.replace(/FromIndex$/,""),ft=Ie!==qe,$t=gt.includes(qe);if(!(qe in(ft?IDBIndex:IDBObjectStore).prototype)||!$t&&!Qe.includes(qe))return;const nn=function(){var fn=(0,I.A)(function*(Cn,...er){const me=this.transaction(Cn,$t?"readwrite":"readonly");let vn=me.store;return ft&&(vn=vn.index(er.shift())),(yield Promise.all([vn[qe](...er),$t&&me.done]))[0]});return function(er){return fn.apply(this,arguments)}}();return xt.set(Ie,nn),nn}!function ut(Fe){pt=Fe(pt)}(Fe=>({...Fe,get:(Ie,qe,ft)=>je(Ie,qe)||Fe.get(Ie,qe,ft),has:(Ie,qe)=>!!je(Ie,qe)||Fe.has(Ie,qe)}));class Zt{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function Vn(Fe){const Ie=Fe.getComponent();return"VERSION"===Ie?.type}(qe)){const ft=qe.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(qe=>qe).join(" ")}}const pn="@firebase/app",lr="0.10.12",Jn=new ae.Vy("@firebase/app"),Kt="[DEFAULT]",pr={[pn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},bn=new Map,or=new Map,dn=new Map;function yr(Fe,Ie){try{Fe.container.addComponent(Ie)}catch(qe){Jn.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Fe.name}`,qe)}}function bo(Fe,Ie){Fe.container.addOrOverwriteComponent(Ie)}function Ce(Fe){const Ie=Fe.name;if(dn.has(Ie))return Jn.debug(`There were multiple attempts to register component ${Ie}.`),!1;dn.set(Ie,Fe);for(const qe of bn.values())yr(qe,Fe);for(const qe of or.values())yr(qe,Fe);return!0}function zn(Fe,Ie){const qe=Fe.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),Fe.container.getProvider(Ie)}function Wt(Fe,Ie,qe=Kt){zn(Fe,Ie).clearInstance(qe)}function ii(Fe){return void 0!==Fe.options}function it(Fe){return void 0!==Fe.settings}function bt(){dn.clear()}const ct=new q.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xe{constructor(Ie,qe,ft){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new Y.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}class Xe extends xe{constructor(Ie,qe,ft,$t){const nn=void 0!==qe.automaticDataCollectionEnabled&&qe.automaticDataCollectionEnabled,fn={name:ft,automaticDataCollectionEnabled:nn};super(void 0!==Ie.apiKey?Ie:Ie.options,fn,$t),this._serverConfig=Object.assign({automaticDataCollectionEnabled:nn},qe),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,qe.releaseOnDeref=void 0,z(pn,lr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ie){this.isDeleted||(this._refCount++,void 0!==Ie&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ie,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Hi(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ct.create("server-app-deleted")}}const Yn="10.14.0";function os(Fe,Ie={}){let qe=Fe;"object"!=typeof Ie&&(Ie={name:Ie});const ft=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Ie),$t=ft.name;if("string"!=typeof $t||!$t)throw ct.create("bad-app-name",{appName:String($t)});if(qe||(qe=(0,q.T9)()),!qe)throw ct.create("no-options");const nn=bn.get($t);if(nn){if((0,q.bD)(qe,nn.options)&&(0,q.bD)(ft,nn.config))return nn;throw ct.create("duplicate-app",{appName:$t})}const fn=new Y.h1($t);for(const er of dn.values())fn.addComponent(er);const Cn=new xe(qe,ft,fn);return bn.set($t,Cn),Cn}function si(Fe,Ie){if((0,q.Bd)()&&!(0,q.p7)())throw ct.create("invalid-server-app-environment");let qe;void 0===Ie.automaticDataCollectionEnabled&&(Ie.automaticDataCollectionEnabled=!1),qe=ii(Fe)?Fe.options:Fe;const ft=Object.assign(Object.assign({},Ie),qe);if(void 0!==ft.releaseOnDeref&&delete ft.releaseOnDeref,void 0!==Ie.releaseOnDeref&&typeof FinalizationRegistry>"u")throw ct.create("finalization-registry-not-supported",{});const nn=""+(me=JSON.stringify(ft),[...me].reduce((vn,Xr)=>Math.imul(31,vn)+Xr.charCodeAt(0)|0,0)),fn=or.get(nn);var me;if(fn)return fn.incRefCount(Ie.releaseOnDeref),fn;const Cn=new Y.h1(nn);for(const me of dn.values())Cn.addComponent(me);const er=new Xe(qe,Ie,nn,Cn);return or.set(nn,er),er}function Ti(Fe=Kt){const Ie=bn.get(Fe);if(!Ie&&Fe===Kt&&(0,q.T9)())return os();if(!Ie)throw ct.create("no-app",{appName:Fe});return Ie}function $i(){return Array.from(bn.values())}function Hi(Fe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,I.A)(function*(Fe){let Ie=!1;const qe=Fe.name;bn.has(qe)?(Ie=!0,bn.delete(qe)):or.has(qe)&&Fe.decRefCount()<=0&&(or.delete(qe),Ie=!0),Ie&&(yield Promise.all(Fe.container.getProviders().map(ft=>ft.delete())),Fe.isDeleted=!0)})).apply(this,arguments)}function z(Fe,Ie,qe){var ft;let $t=null!==(ft=pr[Fe])&&void 0!==ft?ft:Fe;qe&&($t+=`-${qe}`);const nn=$t.match(/\s|\//),fn=Ie.match(/\s|\//);if(nn||fn){const Cn=[`Unable to register library "${$t}" with version "${Ie}":`];return nn&&Cn.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),nn&&fn&&Cn.push("and"),fn&&Cn.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void Jn.warn(Cn.join(" "))}Ce(new Y.uA(`${$t}-version`,()=>({library:$t,version:Ie}),"VERSION"))}function k(Fe,Ie){if(null!==Fe&&"function"!=typeof Fe)throw ct.create("invalid-log-argument");(0,ae.Ey)(Fe,Ie)}function H(Fe){(0,ae.He)(Fe)}const re="firebase-heartbeat-database",se=1,Re="firebase-heartbeat-store";let dt=null;function jt(){return dt||(dt=function Te(Fe,Ie,{blocked:qe,upgrade:ft,blocking:$t,terminated:nn}={}){const fn=indexedDB.open(Fe,Ie),Cn=Ae(fn);return ft&&fn.addEventListener("upgradeneeded",er=>{ft(Ae(fn.result),er.oldVersion,er.newVersion,Ae(fn.transaction),er)}),qe&&fn.addEventListener("blocked",er=>qe(er.oldVersion,er.newVersion,er)),Cn.then(er=>{nn&&er.addEventListener("close",()=>nn()),$t&&er.addEventListener("versionchange",me=>$t(me.oldVersion,me.newVersion,me))}).catch(()=>{}),Cn}(re,se,{upgrade:(Fe,Ie)=>{if(0===Ie)try{Fe.createObjectStore(Re)}catch(qe){console.warn(qe)}}}).catch(Fe=>{throw ct.create("idb-open",{originalErrorMessage:Fe.message})})),dt}function mt(){return(mt=(0,I.A)(function*(Fe){try{const qe=(yield jt()).transaction(Re),ft=yield qe.objectStore(Re).get(oi(Fe));return yield qe.done,ft}catch(Ie){if(Ie instanceof q.g)Jn.warn(Ie.message);else{const qe=ct.create("idb-get",{originalErrorMessage:Ie?.message});Jn.warn(qe.message)}}})).apply(this,arguments)}function Un(Fe,Ie){return wt.apply(this,arguments)}function wt(){return(wt=(0,I.A)(function*(Fe,Ie){try{const ft=(yield jt()).transaction(Re,"readwrite");yield ft.objectStore(Re).put(Ie,oi(Fe)),yield ft.done}catch(qe){if(qe instanceof q.g)Jn.warn(qe.message);else{const ft=ct.create("idb-set",{originalErrorMessage:qe?.message});Jn.warn(ft.message)}}})).apply(this,arguments)}function oi(Fe){return`${Fe.name}!${Fe.options.appId}`}class Cr{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new xr(qe),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var Ie=this;return(0,I.A)(function*(){var qe,ft;try{const nn=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=ui();return null==(null===(qe=Ie._heartbeatsCache)||void 0===qe?void 0:qe.heartbeats)&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise,null==(null===(ft=Ie._heartbeatsCache)||void 0===ft?void 0:ft.heartbeats))||Ie._heartbeatsCache.lastSentHeartbeatDate===fn||Ie._heartbeatsCache.heartbeats.some(Cn=>Cn.date===fn)?void 0:(Ie._heartbeatsCache.heartbeats.push({date:fn,agent:nn}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Cn=>{const er=new Date(Cn.date).valueOf();return Date.now()-er<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache))}catch($t){Jn.warn($t)}})()}getHeartbeatsHeader(){var Ie=this;return(0,I.A)(function*(){var qe;try{if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null==(null===(qe=Ie._heartbeatsCache)||void 0===qe?void 0:qe.heartbeats)||0===Ie._heartbeatsCache.heartbeats.length)return"";const ft=ui(),{heartbeatsToSend:$t,unsentEntries:nn}=function Hr(Fe,Ie=1024){const qe=[];let ft=Fe.slice();for(const $t of Fe){const nn=qe.find(fn=>fn.agent===$t.agent);if(nn){if(nn.dates.push($t.date),rn(qe)>Ie){nn.dates.pop();break}}else if(qe.push({agent:$t.agent,dates:[$t.date]}),rn(qe)>Ie){qe.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:qe,unsentEntries:ft}}(Ie._heartbeatsCache.heartbeats),fn=(0,q.Uj)(JSON.stringify({version:2,heartbeats:$t}));return Ie._heartbeatsCache.lastSentHeartbeatDate=ft,nn.length>0?(Ie._heartbeatsCache.heartbeats=nn,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),fn}catch(ft){return Jn.warn(ft),""}})()}}function ui(){return(new Date).toISOString().substring(0,10)}class xr{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.A)(function*(){return!!(0,q.zW)()&&(0,q.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,I.A)(function*(){if(yield Ie._canUseIndexedDBPromise){const ft=yield function vt(Fe){return mt.apply(this,arguments)}(Ie.app);return ft?.heartbeats?ft:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ie){var qe=this;return(0,I.A)(function*(){var ft;if(yield qe._canUseIndexedDBPromise){const nn=yield qe.read();return Un(qe.app,{lastSentHeartbeatDate:null!==(ft=Ie.lastSentHeartbeatDate)&&void 0!==ft?ft:nn.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var qe=this;return(0,I.A)(function*(){var ft;if(yield qe._canUseIndexedDBPromise){const nn=yield qe.read();return Un(qe.app,{lastSentHeartbeatDate:null!==(ft=Ie.lastSentHeartbeatDate)&&void 0!==ft?ft:nn.lastSentHeartbeatDate,heartbeats:[...nn.heartbeats,...Ie.heartbeats]})}})()}}function rn(Fe){return(0,q.Uj)(JSON.stringify({version:2,heartbeats:Fe})).length}!function as(Fe){Ce(new Y.uA("platform-logger",Ie=>new Zt(Ie),"PRIVATE")),Ce(new Y.uA("heartbeat",Ie=>new Cr(Ie),"PRIVATE")),z(pn,lr,Fe),z(pn,lr,"esm2017"),z("fire-js","")}("")},1362:(Rt,Be,U)=>{U.d(Be,{h1:()=>$e,uA:()=>ae});var I=U(467),Y=U(1076);class ae{constructor(Z,ne,pe){this.name=Z,this.instanceFactory=ne,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const q="[DEFAULT]";class X{constructor(Z,ne){this.name=Z,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const ne=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(ne)){const pe=new Y.cY;if(this.instancesDeferred.set(ne,pe),this.isInitialized(ne)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:ne});ke&&pe.resolve(ke)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(Z){var ne;const pe=this.normalizeInstanceIdentifier(Z?.identifier),ke=null!==(ne=Z?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(rt){if(ke)return null;throw rt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function _e(be){return"EAGER"===be.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:q})}catch{}for(const[ne,pe]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(ne);try{const rt=this.getOrInitializeService({instanceIdentifier:ke});pe.resolve(rt)}catch{}}}}clearInstance(Z=q){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,I.A)(function*(){const ne=Array.from(Z.instances.values());yield Promise.all([...ne.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ne.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=q){return this.instances.has(Z)}getOptions(Z=q){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:ne={}}=Z,pe=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:pe,options:ne});for(const[rt,at]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(rt)&&at.resolve(ke);return ke}onInit(Z,ne){var pe;const ke=this.normalizeInstanceIdentifier(ne),rt=null!==(pe=this.onInitCallbacks.get(ke))&&void 0!==pe?pe:new Set;rt.add(Z),this.onInitCallbacks.set(ke,rt);const at=this.instances.get(ke);return at&&Z(at,ke),()=>{rt.delete(Z)}}invokeOnInitCallbacks(Z,ne){const pe=this.onInitCallbacks.get(ne);if(pe)for(const ke of pe)try{ke(Z,ne)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:ne={}}){let pe=this.instances.get(Z);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(be=Z,be===q?void 0:be),options:ne}),this.instances.set(Z,pe),this.instancesOptions.set(Z,ne),this.invokeOnInitCallbacks(pe,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,pe)}catch{}var be;return pe||null}normalizeInstanceIdentifier(Z=q){return this.component?this.component.multipleInstances?Z:q:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $e{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const ne=this.getProvider(Z.name);if(ne.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);ne.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const ne=new X(Z,this);return this.providers.set(Z,ne),ne}getProviders(){return Array.from(this.providers.values())}}},8041:(Rt,Be,U)=>{U.d(Be,{$b:()=>Y,Ey:()=>be,He:()=>$e,Vy:()=>_e});const I=[];var Y=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(Y||{});const ae={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},q=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},de=(Z,ne,...pe)=>{if(ne<Z.logLevel)return;const ke=(new Date).toISOString(),rt=X[ne];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[rt](`[${ke}]  ${Z.name}:`,...pe)};class _e{constructor(ne){this.name=ne,this._logLevel=q,this._logHandler=de,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in Y))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?ae[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...ne),this._logHandler(this,Y.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...ne),this._logHandler(this,Y.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...ne),this._logHandler(this,Y.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...ne),this._logHandler(this,Y.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...ne),this._logHandler(this,Y.ERROR,...ne)}}function $e(Z){I.forEach(ne=>{ne.setLogLevel(Z)})}function be(Z,ne){for(const pe of I){let ke=null;ne&&ne.level&&(ke=ae[ne.level]),pe.userLogHandler=null===Z?null:(rt,at,...We)=>{const pt=We.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");at>=(ke??rt.logLevel)&&Z({level:Y[at].toLowerCase(),message:pt,args:We,type:rt.name})}}}},7935:(Rt,Be,U)=>{U.d(Be,{A:()=>I.A});var I=U(3345);I.A.registerVersion("firebase","10.14.0","app-compat")},7955:(Rt,Be,U)=>{var I=U(467),Y=U(3345),ae=U(7852),q=U(1076),X=U(8041),de=U(1635),_e=U(1362);const be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const at=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},We=function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new q.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bt=new X.Vy("@firebase/auth");function Ae(m,...l){Bt.logLevel<=X.$b.ERROR&&Bt.error(`Auth (${ae.SDK_VERSION}): ${m}`,...l)}function Ge(m,...l){throw xt(m,...l)}function Te(m,...l){return xt(m,...l)}function et(m,l,h){const y=Object.assign(Object.assign({},We()),{[l]:h});return new q.FA("auth","Firebase",y).create(l,{appName:m.name})}function Qe(m){return et(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gt(m,l,h){if(!(l instanceof h))throw h.name!==l.constructor.name&&Ge(m,"argument-error"),et(m,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(m,...l){if("string"!=typeof m){const h=l[0],y=[...l.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(h,...y)}return pt.create(m,...l)}function je(m,l,...h){if(!m)throw xt(l,...h)}function Zt(m){const l="INTERNAL ASSERTION FAILED: "+m;throw Ae(l),new Error(l)}function Vn(m,l){m||Zt(l)}function pn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function lr(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class he{constructor(l,h){this.shortDelay=l,this.longDelay=h,Vn(h>l,"Short delay should be less than long delay!"),this.isMobile=(0,q.jZ)()||(0,q.lV)()}get(){return function en(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lr()||(0,q.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function we(m,l){Vn(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return l?`${h}${l.startsWith("/")?l.slice(1):l}`:h}class Le{static initialize(l,h,y){this.fetchImpl=l,h&&(this.headersImpl=h),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tt=new he(3e4,6e4);function Ye(m,l){return m.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:m.tenantId}):l}function ue(m,l,h,y){return yt.apply(this,arguments)}function yt(){return(yt=(0,I.A)(function*(m,l,h,y,M={}){return mr(m,M,(0,I.A)(function*(){let B={},ie={};y&&("GET"===l?ie=y:B={body:JSON.stringify(y)});const Ee=(0,q.Am)(Object.assign({key:m.config.apiKey},ie)).slice(1),ze=yield m._getAdditionalHeaders();ze["Content-Type"]="application/json",m.languageCode&&(ze["X-Firebase-Locale"]=m.languageCode);const Et=Object.assign({method:l,headers:ze},B);return(0,q.c1)()||(Et.referrerPolicy="no-referrer"),Le.fetch()($r(m,m.config.apiHost,h,Ee),Et)}))})).apply(this,arguments)}function mr(m,l,h){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,I.A)(function*(m,l,h){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},Ne),l);try{const M=new ir(m),B=yield Promise.race([h(),M.promise]);M.clearNetworkTimeout();const ie=yield B.json();if("needConfirmation"in ie)throw Dn(m,"account-exists-with-different-credential",ie);if(B.ok&&!("errorMessage"in ie))return ie;{const Ee=B.ok?ie.errorMessage:ie.error.message,[ze,Et]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ze)throw Dn(m,"credential-already-in-use",ie);if("EMAIL_EXISTS"===ze)throw Dn(m,"email-already-in-use",ie);if("USER_DISABLED"===ze)throw Dn(m,"user-disabled",ie);const Ot=y[ze]||ze.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw et(m,Ot,Et);Ge(m,Ot)}}catch(M){if(M instanceof q.g)throw M;Ge(m,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Mt(m,l,h,y){return tn.apply(this,arguments)}function tn(){return(tn=(0,I.A)(function*(m,l,h,y,M={}){const B=yield ue(m,l,h,y,M);return"mfaPendingCredential"in B&&Ge(m,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function $r(m,l,h,y){const M=`${l}${h}?${y}`;return m.config.emulator?we(m.config,M):`${m.config.apiScheme}://${M}`}function gn(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ir{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((h,y)=>{this.timer=setTimeout(()=>y(Te(this.auth,"network-request-failed")),tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dn(m,l,h){const y={appName:m.name};h.email&&(y.email=h.email),h.phoneNumber&&(y.phoneNumber=h.phoneNumber);const M=Te(m,l,y);return M.customData._tokenResponse=h,M}function Nt(m){return void 0!==m&&void 0!==m.getResponse}function Er(m){return void 0!==m&&void 0!==m.enterprise}class ss{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===l)return gn(h.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Ei(){return(Ei=(0,I.A)(function*(m){return(yield ue(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fr(m,l){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,I.A)(function*(m,l){return ue(m,"GET","/v2/recaptchaConfig",Ye(m,l))})).apply(this,arguments)}function hn(){return(hn=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function pr(){return(pr=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function bn(m,l){return or.apply(this,arguments)}function or(){return(or=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function dn(m){if(m)try{const l=new Date(Number(m));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Ce(){return(Ce=(0,I.A)(function*(m,l=!1){const h=(0,q.Ku)(m),y=yield h.getIdToken(l),M=Wt(y);je(M&&M.exp&&M.auth_time&&M.iat,h.auth,"internal-error");const B="object"==typeof M.firebase?M.firebase:void 0,ie=B?.sign_in_provider;return{claims:M,token:y,authTime:dn(zn(M.auth_time)),issuedAtTime:dn(zn(M.iat)),expirationTime:dn(zn(M.exp)),signInProvider:ie||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function zn(m){return 1e3*Number(m)}function Wt(m){const[l,h,y]=m.split(".");if(void 0===l||void 0===h||void 0===y)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,q.u)(h);return M?JSON.parse(M):(Ae("Failed to decode base64 JWT payload"),null)}catch(M){return Ae("Caught error parsing JWT payload as JSON",M?.toString()),null}}function ii(m){const l=Wt(m);return je(l,"internal-error"),je(typeof l.exp<"u","internal-error"),je(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function it(m,l){return bt.apply(this,arguments)}function bt(){return(bt=(0,I.A)(function*(m,l,h=!1){if(h)return l;try{return yield l}catch(y){throw y instanceof q.g&&function ji({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class ct{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var h;if(l){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(l=!1){var h=this;if(!this.isRunning)return;const y=this.getInterval(l);this.timerId=setTimeout((0,I.A)(function*(){yield h.iteration()}),y)}iteration(){var l=this;return(0,I.A)(function*(){try{yield l.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&l.schedule(!0))}l.schedule()})()}}class xe{constructor(l,h){this.createdAt=l,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xe(m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,I.A)(function*(m){var l;const h=m.auth,y=yield m.getIdToken(),M=yield it(m,bn(h,{idToken:y}));je(M?.users.length,h,"internal-error");const B=M.users[0];m._notifyReloadListener(B);const ie=null!==(l=B.providerUserInfo)&&void 0!==l&&l.length?$i(B.providerUserInfo):[],Ee=function Ti(m,l){return[...m.filter(y=>!l.some(M=>M.providerId===y.providerId)),...l]}(m.providerData,ie),Ot=!!m.isAnonymous&&!(m.email&&B.passwordHash||Ee?.length),Ft={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Ee,metadata:new xe(B.createdAt,B.lastLoginAt),isAnonymous:Ot};Object.assign(m,Ft)})).apply(this,arguments)}function si(){return(si=(0,I.A)(function*(m){const l=(0,q.Ku)(m);yield Xe(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function $i(m){return m.map(l=>{var{providerId:h}=l,y=(0,de.Tt)(l,["providerId"]);return{providerId:h,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function Ke(){return(Ke=(0,I.A)(function*(m,l){const h=yield mr(m,{},(0,I.A)(function*(){const y=(0,q.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:M,apiKey:B}=m.config,ie=$r(m,M,"/v1/token",`key=${B}`),Ee=yield m._getAdditionalHeaders();return Ee["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(ie,{method:"POST",headers:Ee,body:y})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function k(){return(k=(0,I.A)(function*(m,l){return ue(m,"POST","/v2/accounts:revokeToken",Ye(m,l))})).apply(this,arguments)}class H{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){je(l.idToken,"internal-error"),je(typeof l.idToken<"u","internal-error"),je(typeof l.refreshToken<"u","internal-error");const h="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):ii(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,h)}updateFromIdToken(l){je(0!==l.length,"internal-error");const h=ii(l);this.updateTokensAndExpiration(l,null,h)}getToken(l,h=!1){var y=this;return(0,I.A)(function*(){return h||!y.accessToken||y.isExpired?(je(y.refreshToken,l,"user-token-expired"),y.refreshToken?(yield y.refresh(l,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,h){var y=this;return(0,I.A)(function*(){const{accessToken:M,refreshToken:B,expiresIn:ie}=yield function Hi(m,l){return Ke.apply(this,arguments)}(l,h);y.updateTokensAndExpiration(M,B,Number(ie))})()}updateTokensAndExpiration(l,h,y){this.refreshToken=h||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(l,h){const{refreshToken:y,accessToken:M,expirationTime:B}=h,ie=new H;return y&&(je("string"==typeof y,"internal-error",{appName:l}),ie.refreshToken=y),M&&(je("string"==typeof M,"internal-error",{appName:l}),ie.accessToken=M),B&&(je("number"==typeof B,"internal-error",{appName:l}),ie.expirationTime=B),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new H,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function re(m,l){je("string"==typeof m||typeof m>"u","internal-error",{appName:l})}class se{constructor(l){var{uid:h,auth:y,stsTokenManager:M}=l,B=(0,de.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ct(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new xe(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(l){var h=this;return(0,I.A)(function*(){const y=yield it(h,h.stsTokenManager.getToken(h.auth,l));return je(y,h.auth,"internal-error"),h.accessToken!==y&&(h.accessToken=y,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),y})()}getIdTokenResult(l){return function bo(m){return Ce.apply(this,arguments)}(this,l)}reload(){return function os(m){return si.apply(this,arguments)}(this)}_assign(l){this!==l&&(je(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(h=>Object.assign({},h)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const h=new se(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(l){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,h=!1){var y=this;return(0,I.A)(function*(){let M=!1;l.idToken&&l.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(l),M=!0),h&&(yield Xe(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var l=this;return(0,I.A)(function*(){if((0,ae._isFirebaseServerApp)(l.auth.app))return Promise.reject(Qe(l.auth));const h=yield l.getIdToken();return yield it(l,function qt(m,l){return hn.apply(this,arguments)}(l.auth,{idToken:h})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,h){var y,M,B,ie,Ee,ze,Et,Ot;const Ft=null!==(y=h.displayName)&&void 0!==y?y:void 0,Mr=null!==(M=h.email)&&void 0!==M?M:void 0,ts=null!==(B=h.phoneNumber)&&void 0!==B?B:void 0,Zc=null!==(ie=h.photoURL)&&void 0!==ie?ie:void 0,yo=null!==(Ee=h.tenantId)&&void 0!==Ee?Ee:void 0,dd=null!==(ze=h._redirectEventId)&&void 0!==ze?ze:void 0,el=null!==(Et=h.createdAt)&&void 0!==Et?Et:void 0,Yf=null!==(Ot=h.lastLoginAt)&&void 0!==Ot?Ot:void 0,{uid:hd,emailVerified:tl,isAnonymous:fd,providerData:nl,stsTokenManager:rl}=h;je(hd&&rl,l,"internal-error");const pd=H.fromJSON(this.name,rl);je("string"==typeof hd,l,"internal-error"),re(Ft,l.name),re(Mr,l.name),je("boolean"==typeof tl,l,"internal-error"),je("boolean"==typeof fd,l,"internal-error"),re(ts,l.name),re(Zc,l.name),re(yo,l.name),re(dd,l.name),re(el,l.name),re(Yf,l.name);const yu=new se({uid:hd,auth:l,email:Mr,emailVerified:tl,displayName:Ft,isAnonymous:fd,photoURL:Zc,phoneNumber:ts,tenantId:yo,stsTokenManager:pd,createdAt:el,lastLoginAt:Yf});return nl&&Array.isArray(nl)&&(yu.providerData=nl.map(vu=>Object.assign({},vu))),dd&&(yu._redirectEventId=dd),yu}static _fromIdTokenResponse(l,h,y=!1){return(0,I.A)(function*(){const M=new H;M.updateFromServerResponse(h);const B=new se({uid:h.localId,auth:l,stsTokenManager:M,isAnonymous:y});return yield Xe(B),B})()}static _fromGetAccountInfoResponse(l,h,y){return(0,I.A)(function*(){const M=h.users[0];je(void 0!==M.localId,"internal-error");const B=void 0!==M.providerUserInfo?$i(M.providerUserInfo):[],ie=!(M.email&&M.passwordHash||B?.length),Ee=new H;Ee.updateFromIdToken(y);const ze=new se({uid:M.localId,auth:l,stsTokenManager:Ee,isAnonymous:ie}),Et={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:B,metadata:new xe(M.createdAt,M.lastLoginAt),isAnonymous:!(M.email&&M.passwordHash||B?.length)};return Object.assign(ze,Et),ze})()}}const Re=new Map;function dt(m){Vn(m instanceof Function,"Expected a class definition");let l=Re.get(m);return l?(Vn(l instanceof m,"Instance stored in cache mismatched with class"),l):(l=new m,Re.set(m,l),l)}const vt=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.A)(function*(){return!0})()}_set(h,y){var M=this;return(0,I.A)(function*(){M.storage[h]=y})()}_get(h){var y=this;return(0,I.A)(function*(){const M=y.storage[h];return void 0===M?null:M})()}_remove(h){var y=this;return(0,I.A)(function*(){delete y.storage[h]})()}_addListener(h,y){}_removeListener(h,y){}}return m.type="NONE",m})();function mt(m,l,h){return`firebase:${m}:${l}:${h}`}class Un{constructor(l,h,y){this.persistence=l,this.auth=h,this.userKey=y;const{config:M,name:B}=this.auth;this.fullUserKey=mt(this.userKey,M.apiKey,B),this.fullPersistenceKey=mt("persistence",M.apiKey,B),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,I.A)(function*(){const h=yield l.persistence._get(l.fullUserKey);return h?se._fromJSON(l.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var h=this;return(0,I.A)(function*(){if(h.persistence===l)return;const y=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=l,y?h.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,h,y="authUser"){return(0,I.A)(function*(){if(!h.length)return new Un(dt(vt),l,y);const M=(yield Promise.all(h.map(function(){var Et=(0,I.A)(function*(Ot){if(yield Ot._isAvailable())return Ot});return function(Ot){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let B=M[0]||dt(vt);const ie=mt(y,l.config.apiKey,l.name);let Ee=null;for(const Et of h)try{const Ot=yield Et._get(ie);if(Ot){const Ft=se._fromJSON(l,Ot);Et!==B&&(Ee=Ft),B=Et;break}}catch{}const ze=M.filter(Et=>Et._shouldAllowMigration);return B._shouldAllowMigration&&ze.length?(B=ze[0],Ee&&(yield B._set(ie,Ee.toJSON())),yield Promise.all(h.map(function(){var Et=(0,I.A)(function*(Ot){if(Ot!==B)try{yield Ot._remove(ie)}catch{}});return function(Ot){return Et.apply(this,arguments)}}())),new Un(B,l,y)):new Un(B,l,y)})()}}function wt(m){const l=m.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(Cr(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(oi(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Hr(l))return"Blackberry";if(xr(l))return"Webos";if(kn(l))return"Safari";if((l.includes("chrome/")||It(l))&&!l.includes("edge/"))return"Chrome";if(ui(l))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function oi(m=(0,q.ZQ)()){return/firefox\//i.test(m)}function kn(m=(0,q.ZQ)()){const l=m.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function It(m=(0,q.ZQ)()){return/crios\//i.test(m)}function Cr(m=(0,q.ZQ)()){return/iemobile/i.test(m)}function ui(m=(0,q.ZQ)()){return/android/i.test(m)}function Hr(m=(0,q.ZQ)()){return/blackberry/i.test(m)}function xr(m=(0,q.ZQ)()){return/webos/i.test(m)}function rn(m=(0,q.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function qe(m=(0,q.ZQ)()){return rn(m)||ui(m)||xr(m)||Hr(m)||/windows phone/i.test(m)||Cr(m)}function ft(m,l=[]){let h;switch(m){case"Browser":h=wt((0,q.ZQ)());break;case"Worker":h=`${wt((0,q.ZQ)())}-${m}`;break;default:h=m}const y=l.length?l.join(","):"FirebaseCore-web";return`${h}/JsCore/${ae.SDK_VERSION}/${y}`}class $t{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,h){const y=B=>new Promise((ie,Ee)=>{try{ie(l(B))}catch(ze){Ee(ze)}});y.onAbort=h,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(l){var h=this;return(0,I.A)(function*(){if(h.auth.currentUser===l)return;const y=[];try{for(const M of h.queue)yield M(l),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const B of y)try{B()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function fn(){return(fn=(0,I.A)(function*(m,l={}){return ue(m,"GET","/v2/passwordPolicy",Ye(m,l))})).apply(this,arguments)}class er{constructor(l){var h,y,M,B;const ie=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=ie.minPasswordLength)&&void 0!==h?h:6,ie.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ie.maxPasswordLength),void 0!==ie.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ie.containsLowercaseCharacter),void 0!==ie.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ie.containsUppercaseCharacter),void 0!==ie.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ie.containsNumericCharacter),void 0!==ie.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ie.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=l.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(B=l.forceUpgradeOnSignin)&&void 0!==B&&B,this.schemaVersion=l.schemaVersion}validatePassword(l){var h,y,M,B,ie,Ee;const ze={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,ze),this.validatePasswordCharacterOptions(l,ze),ze.isValid&&(ze.isValid=null===(h=ze.meetsMinPasswordLength)||void 0===h||h),ze.isValid&&(ze.isValid=null===(y=ze.meetsMaxPasswordLength)||void 0===y||y),ze.isValid&&(ze.isValid=null===(M=ze.containsLowercaseLetter)||void 0===M||M),ze.isValid&&(ze.isValid=null===(B=ze.containsUppercaseLetter)||void 0===B||B),ze.isValid&&(ze.isValid=null===(ie=ze.containsNumericCharacter)||void 0===ie||ie),ze.isValid&&(ze.isValid=null===(Ee=ze.containsNonAlphanumericCharacter)||void 0===Ee||Ee),ze}validatePasswordLengthOptions(l,h){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(h.meetsMinPasswordLength=l.length>=y),M&&(h.meetsMaxPasswordLength=l.length<=M)}validatePasswordCharacterOptions(l,h){let y;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let M=0;M<l.length;M++)y=l.charAt(M),this.updatePasswordCharacterOptionsStatuses(h,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(l,h,y,M,B){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=B))}}class me{constructor(l,h,y,M){this.app=l,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xr(this),this.idTokenSubscription=new Xr(this),this.beforeStateQueue=new $t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(l,h){var y=this;return h&&(this._popupRedirectResolver=dt(h)),this._initializationPromise=this.queue((0,I.A)(function*(){var M,B;if(!y._deleted&&(y.persistenceManager=yield Un.create(y,l),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(h),y.lastNotifiedUid=(null===(B=y.currentUser)||void 0===B?void 0:B.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,I.A)(function*(){if(l._deleted)return;const h=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||h){if(l.currentUser&&h&&l.currentUser.uid===h.uid)return l._currentUser._assign(h),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(l){var h=this;return(0,I.A)(function*(){try{const y=yield bn(h,{idToken:l}),M=yield se._fromGetAccountInfoResponse(h,y,l);yield h.directlySetCurrentUser(M)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var h=this;return(0,I.A)(function*(){var y;if((0,ae._isFirebaseServerApp)(h.app)){const Ee=h.app.settings.authIdToken;return Ee?new Promise(ze=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(Ee).then(ze,ze))}):h.directlySetCurrentUser(null)}const M=yield h.assertedPersistence.getCurrentUser();let B=M,ie=!1;if(l&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Ee=null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId,ze=B?._redirectEventId,Et=yield h.tryRedirectSignIn(l);(!Ee||Ee===ze)&&Et?.user&&(B=Et.user,ie=!0)}if(!B)return h.directlySetCurrentUser(null);if(!B._redirectEventId){if(ie)try{yield h.beforeStateQueue.runMiddleware(B)}catch(Ee){B=M,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Ee))}return B?h.reloadAndSetCurrentUserOrClear(B):h.directlySetCurrentUser(null)}return je(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===B._redirectEventId?h.directlySetCurrentUser(B):h.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(l){var h=this;return(0,I.A)(function*(){let y=null;try{y=yield h._popupRedirectResolver._completeRedirectFn(h,l,!0)}catch{yield h._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(l){var h=this;return(0,I.A)(function*(){try{yield Xe(l)}catch(y){if("auth/network-request-failed"!==y?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Xt(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var l=this;return(0,I.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var h=this;return(0,I.A)(function*(){if((0,ae._isFirebaseServerApp)(h.app))return Promise.reject(Qe(h));const y=l?(0,q.Ku)(l):null;return y&&je(y.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(y&&y._clone(h))})()}_updateCurrentUser(l,h=!1){var y=this;return(0,I.A)(function*(){if(!y._deleted)return l&&je(y.tenantId===l.tenantId,y,"tenant-id-mismatch"),h||(yield y.beforeStateQueue.runMiddleware(l)),y.queue((0,I.A)(function*(){yield y.directlySetCurrentUser(l),y.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,I.A)(function*(){return(0,ae._isFirebaseServerApp)(l.app)?Promise.reject(Qe(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var h=this;return(0,ae._isFirebaseServerApp)(this.app)?Promise.reject(Qe(this)):this.queue((0,I.A)(function*(){yield h.assertedPersistence.setPersistence(dt(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var h=this;return(0,I.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const y=h._getPasswordPolicyInternal();return y.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,I.A)(function*(){const h=yield function nn(m){return fn.apply(this,arguments)}(l),y=new er(h);null===l.tenantId?l._projectPasswordPolicy=y:l._tenantPasswordPolicies[l.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new q.FA("auth","Firebase",l())}onAuthStateChanged(l,h,y){return this.registerStateListener(this.authStateSubscription,l,h,y)}beforeAuthStateChanged(l,h){return this.beforeStateQueue.pushCallback(l,h)}onIdTokenChanged(l,h,y){return this.registerStateListener(this.idTokenSubscription,l,h,y)}authStateReady(){return new Promise((l,h)=>{if(this.currentUser)l();else{const y=this.onAuthStateChanged(()=>{y(),l()},h)}})}revokeAccessToken(l){var h=this;return(0,I.A)(function*(){if(h.currentUser){const y=yield h.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:y};null!=h.tenantId&&(M.tenantId=h.tenantId),yield function z(m,l){return k.apply(this,arguments)}(h,M)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,h){var y=this;return(0,I.A)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(h);return null===l?M.removeCurrentUser():M.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var h=this;return(0,I.A)(function*(){if(!h.redirectPersistenceManager){const y=l&&dt(l)||h._popupRedirectResolver;je(y,h,"argument-error"),h.redirectPersistenceManager=yield Un.create(h,[dt(y._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(l){var h=this;return(0,I.A)(function*(){var y,M;return h._isInitialized&&(yield h.queue((0,I.A)(function*(){}))),(null===(y=h._currentUser)||void 0===y?void 0:y._redirectEventId)===l?h._currentUser:(null===(M=h.redirectUser)||void 0===M?void 0:M._redirectEventId)===l?h.redirectUser:null})()}_persistUserIfCurrent(l){var h=this;return(0,I.A)(function*(){if(l===h.currentUser)return h.queue((0,I.A)(function*(){return h.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(h=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,h,y,M){if(this._deleted)return()=>{};const B="function"==typeof h?h:h.next.bind(h);let ie=!1;const Ee=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(Ee,this,"internal-error"),Ee.then(()=>{ie||B(this.currentUser)}),"function"==typeof h){const ze=l.addObserver(h,y,M);return()=>{ie=!0,ze()}}{const ze=l.addObserver(h);return()=>{ie=!0,ze()}}}directlySetCurrentUser(l){var h=this;return(0,I.A)(function*(){h.currentUser&&h.currentUser!==l&&h._currentUser._stopProactiveRefresh(),l&&h.isProactiveRefreshEnabled&&l._startProactiveRefresh(),h.currentUser=l,l?yield h.assertedPersistence.setCurrentUser(l):yield h.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=ft(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,I.A)(function*(){var h;const y={"X-Client-Version":l.clientVersion};l.app.options.appId&&(y["X-Firebase-gmpid"]=l.app.options.appId);const M=yield null===(h=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const B=yield l._getAppCheckToken();return B&&(y["X-Firebase-AppCheck"]=B),y})()}_getAppCheckToken(){var l=this;return(0,I.A)(function*(){var h;const y=yield null===(h=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return y?.error&&function Vt(m,...l){Bt.logLevel<=X.$b.WARN&&Bt.warn(`Auth (${ae.SDK_VERSION}): ${m}`,...l)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function vn(m){return(0,q.Ku)(m)}class Xr{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,q.tD)(h=>this.observer=h)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zi={loadJS:()=>(0,I.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gi(m){return zi.loadJS(m)}function Ns(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Wi{constructor(l){this.type="recaptcha-enterprise",this.auth=vn(l)}verify(l="verify",h=!1){var y=this;return(0,I.A)(function*(){function B(){return B=(0,I.A)(function*(Ee){if(!h){if(null==Ee.tenantId&&null!=Ee._agentRecaptchaConfig)return Ee._agentRecaptchaConfig.siteKey;if(null!=Ee.tenantId&&void 0!==Ee._tenantRecaptchaConfigs[Ee.tenantId])return Ee._tenantRecaptchaConfigs[Ee.tenantId].siteKey}return new Promise(function(){var ze=(0,I.A)(function*(Et,Ot){Fr(Ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ft=>{if(void 0!==Ft.recaptchaKey){const Mr=new ss(Ft);return null==Ee.tenantId?Ee._agentRecaptchaConfig=Mr:Ee._tenantRecaptchaConfigs[Ee.tenantId]=Mr,Et(Mr.siteKey)}Ot(new Error("recaptcha Enterprise site key undefined"))}).catch(Ft=>{Ot(Ft)})});return function(Et,Ot){return ze.apply(this,arguments)}}())}),B.apply(this,arguments)}function ie(Ee,ze,Et){const Ot=window.grecaptcha;Er(Ot)?Ot.enterprise.ready(()=>{Ot.enterprise.execute(Ee,{action:l}).then(Ft=>{ze(Ft)}).catch(()=>{ze("NO_RECAPTCHA")})}):Et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ee,ze)=>{(function M(Ee){return B.apply(this,arguments)})(y.auth).then(Et=>{if(!h&&Er(window.grecaptcha))ie(Et,Ee,ze);else{if(typeof window>"u")return void ze(new Error("RecaptchaVerifier is only supported in browser"));let Ot=function ia(){return zi.recaptchaEnterpriseScript}();0!==Ot.length&&(Ot+=Et),Gi(Ot).then(()=>{ie(Et,Ee,ze)}).catch(Ft=>{ze(Ft)})}}).catch(Et=>{ze(Et)})})})()}}function zr(m,l,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,I.A)(function*(m,l,h,y=!1){const M=new Wi(m);let B;try{B=yield M.verify(h)}catch{B=yield M.verify(h,!0)}const ie=Object.assign({},l);return Object.assign(ie,y?{captchaResp:B}:{captchaResponse:B}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}function wi(m,l,h,y){return sa.apply(this,arguments)}function sa(){return sa=(0,I.A)(function*(m,l,h,y){var M;if(null!==(M=m._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const B=yield zr(m,l,h,"getOobCode"===h);return y(m,B)}return y(m,l).catch(function(){var B=(0,I.A)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ee=yield zr(m,l,h,"getOobCode"===h);return y(m,Ee)}return Promise.reject(ie)});return function(ie){return B.apply(this,arguments)}}())}),sa.apply(this,arguments)}function So(m){const l=m.indexOf(":");return l<0?"":m.substr(0,l+1)}function Mu(m){if(!m)return null;const l=Number(m);return isNaN(l)?null:l}class xs{constructor(l,h){this.providerId=l,this.signInMethod=h}toJSON(){return Zt("not implemented")}_getIdTokenResponse(l){return Zt("not implemented")}_linkToIdToken(l,h){return Zt("not implemented")}_getReauthenticationResolver(l){return Zt("not implemented")}}function aa(m,l){return wn.apply(this,arguments)}function wn(){return(wn=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:resetPassword",Ye(m,l))})).apply(this,arguments)}function Jr(){return(Jr=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function to(m,l){return kr.apply(this,arguments)}function kr(){return(kr=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function no(){return(no=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:update",Ye(m,l))})).apply(this,arguments)}function ro(m,l){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithPassword",Ye(m,l))})).apply(this,arguments)}function qi(m,l){return dr.apply(this,arguments)}function dr(){return(dr=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:sendOobCode",Ye(m,l))})).apply(this,arguments)}function cn(){return(cn=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function Bn(m,l){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function io(m,l){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function tr(){return(tr=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function Ni(){return(Ni=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithEmailLink",Ye(m,l))})).apply(this,arguments)}function cs(){return(cs=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithEmailLink",Ye(m,l))})).apply(this,arguments)}class ks extends xs{constructor(l,h,y,M=null){super("password",y),this._email=l,this._password=h,this._tenantId=M}static _fromEmailAndPassword(l,h){return new ks(l,h,"password")}static _fromEmailAndCode(l,h,y=null){return new ks(l,h,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(l){var h=this;return(0,I.A)(function*(){switch(h.signInMethod){case"password":return wi(l,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ro);case"emailLink":return function sr(m,l){return Ni.apply(this,arguments)}(l,{email:h._email,oobCode:h._password});default:Ge(l,"internal-error")}})()}_linkToIdToken(l,h){var y=this;return(0,I.A)(function*(){switch(y.signInMethod){case"password":return wi(l,{idToken:h,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",to);case"emailLink":return function Gt(m,l){return cs.apply(this,arguments)}(l,{idToken:h,email:y._email,oobCode:y._password});default:Ge(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function mn(m,l){return ur.apply(this,arguments)}function ur(){return(ur=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithIdp",Ye(m,l))})).apply(this,arguments)}class sn extends xs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const h=new sn(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(h.idToken=l.idToken),l.accessToken&&(h.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(h.nonce=l.nonce),l.pendingToken&&(h.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(h.accessToken=l.oauthToken,h.secret=l.oauthTokenSecret):Ge("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M}=h,B=(0,de.Tt)(h,["providerId","signInMethod"]);if(!y||!M)return null;const ie=new sn(y,M);return ie.idToken=B.idToken||void 0,ie.accessToken=B.accessToken||void 0,ie.secret=B.secret,ie.nonce=B.nonce,ie.pendingToken=B.pendingToken||null,ie}_getIdTokenResponse(l){return mn(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,mn(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,mn(l,h)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),l.postBody=(0,q.Am)(h)}return l}}function Ai(){return(Ai=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:sendVerificationCode",Ye(m,l))})).apply(this,arguments)}function Di(){return(Di=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ye(m,l))})).apply(this,arguments)}function qn(){return(qn=(0,I.A)(function*(m,l){const h=yield Mt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ye(m,l));if(h.temporaryProof)throw Dn(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Ro={USER_NOT_FOUND:"user-not-found"};function hr(){return(hr=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ye(m,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Ro)})).apply(this,arguments)}class ei extends xs{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,h){return new ei({verificationId:l,verificationCode:h})}static _fromTokenResponse(l,h){return new ei({phoneNumber:l,temporaryProof:h})}_getIdTokenResponse(l){return function Zr(m,l){return Di.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,h){return function ls(m,l){return qn.apply(this,arguments)}(l,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function on(m,l){return hr.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:h,verificationId:y,verificationCode:M}=this.params;return l&&h?{temporaryProof:l,phoneNumber:h}:{sessionInfo:y,code:M}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:B}=l;return y||h||M||B?new ei({verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:B}):null}}class Qi{constructor(l){var h,y,M,B,ie,Ee;const ze=(0,q.I9)((0,q.hp)(l)),Et=null!==(h=ze.apiKey)&&void 0!==h?h:null,Ot=null!==(y=ze.oobCode)&&void 0!==y?y:null,Ft=function Ls(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ze.mode)&&void 0!==M?M:null);je(Et&&Ot&&Ft,"argument-error"),this.apiKey=Et,this.operation=Ft,this.code=Ot,this.continueUrl=null!==(B=ze.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ie=ze.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Ee=ze.tenantId)&&void 0!==Ee?Ee:null}static parseLink(l){const h=function Ci(m){const l=(0,q.I9)((0,q.hp)(m)).link,h=l?(0,q.I9)((0,q.hp)(l)).deep_link_id:null,y=(0,q.I9)((0,q.hp)(m)).deep_link_id;return(y?(0,q.I9)((0,q.hp)(y)).link:null)||y||h||l||m}(l);try{return new Qi(h)}catch{return null}}}let yi=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,y){return ks._fromEmailAndPassword(h,y)}static credentialWithLink(h,y){const M=Qi.parseLink(y);return je(M,"argument-error"),ks._fromEmailAndCode(h,M.code,M.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Gn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Fs extends Gn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class nr extends Fs{static credentialFromJSON(l){const h="string"==typeof l?JSON.parse(l):l;return je("providerId"in h&&"signInMethod"in h,"argument-error"),sn._fromParams(h)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return je(l.idToken||l.accessToken,"argument-error"),sn._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return nr.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return nr.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:h,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:B,nonce:ie,providerId:Ee}=l;if(!y&&!M&&!h&&!B||!Ee)return null;try{return new nr(Ee)._credential({idToken:h,accessToken:y,nonce:ie,pendingToken:B})}catch{return null}}}let Sn=(()=>{class m extends Fs{constructor(){super("facebook.com")}static credential(h){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Is=(()=>{class m extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(h,y){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:y,oauthAccessToken:M}=h;if(!y&&!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Vr=(()=>{class m extends Fs{constructor(){super("github.com")}static credential(h){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Wr extends xs{constructor(l,h){super(l,l),this.pendingToken=h}_getIdTokenResponse(l){return mn(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,mn(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,mn(l,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M,pendingToken:B}=h;return y&&M&&B&&y===M?new Wr(y,B):null}static _create(l,h){return new Wr(l,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vs extends Gn{constructor(l){je(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Vs.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Vs.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const h=Wr.fromJSON(l);return je(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:h,providerId:y}=l;if(!h||!y)return null;try{return Wr._create(y,h)}catch{return null}}}let Us=(()=>{class m extends Fs{constructor(){super("twitter.com")}static credential(h,y){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=h;if(!y||!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function so(m,l){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signUp",Ye(m,l))})).apply(this,arguments)}class Tr{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,h,y,M=!1){return(0,I.A)(function*(){const B=yield se._fromIdTokenResponse(l,y,M),ie=oo(y);return new Tr({user:B,providerId:ie,_tokenResponse:y,operationType:h})})()}static _forOperation(l,h,y){return(0,I.A)(function*(){yield l._updateTokensIfNecessary(y,!0);const M=oo(y);return new Tr({user:l,providerId:M,_tokenResponse:y,operationType:h})})()}}function oo(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function ua(){return(ua=(0,I.A)(function*(m){var l;if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const h=vn(m);if(yield h._initializationPromise,null!==(l=h.currentUser)&&void 0!==l&&l.isAnonymous)return new Tr({user:h.currentUser,providerId:null,operationType:"signIn"});const y=yield so(h,{returnSecureToken:!0}),M=yield Tr._fromIdTokenResponse(h,"signIn",y,!0);return yield h._updateCurrentUser(M.user),M})).apply(this,arguments)}class Wn extends q.g{constructor(l,h,y,M){var B;super(h.code,h.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,Wn.prototype),this.customData={appName:l.name,tenantId:null!==(B=l.tenantId)&&void 0!==B?B:void 0,_serverResponse:h.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(l,h,y,M){return new Wn(l,h,y,M)}}function Ts(m,l,h,y){return("reauthenticate"===l?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?Wn._fromErrorAndOperation(m,B,l,y):B})}function vc(m){return new Set(m.map(({providerId:l})=>l).filter(l=>!!l))}function Ic(){return Ic=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m);yield Ka(!0,h,l);const{providerUserInfo:y}=yield function Kt(m,l){return pr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[l]}),M=vc(y||[]);return h.providerData=h.providerData.filter(B=>M.has(B.providerId)),M.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Ic.apply(this,arguments)}function Ec(m,l){return xu.apply(this,arguments)}function xu(){return(xu=(0,I.A)(function*(m,l,h=!1){const y=yield it(m,l._linkToIdToken(m.auth,yield m.getIdToken()),h);return Tr._forOperation(m,"link",y)})).apply(this,arguments)}function Ka(m,l,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,I.A)(function*(m,l,h){yield Xe(l);const M=!1===m?"provider-already-linked":"no-such-provider";je(vc(l.providerData).has(h)===m,l.auth,M)})).apply(this,arguments)}function qa(m,l){return rr.apply(this,arguments)}function rr(){return(rr=(0,I.A)(function*(m,l,h=!1){const{auth:y}=m;if((0,ae._isFirebaseServerApp)(y.app))return Promise.reject(Qe(y));const M="reauthenticate";try{const B=yield it(m,Ts(y,M,l,m),h);je(B.idToken,y,"internal-error");const ie=Wt(B.idToken);je(ie,y,"internal-error");const{sub:Ee}=ie;return je(m.uid===Ee,y,"user-mismatch"),Tr._forOperation(m,M,B)}catch(B){throw"auth/user-not-found"===B?.code&&Ge(y,"user-mismatch"),B}})).apply(this,arguments)}function Yi(m,l){return ds.apply(this,arguments)}function ds(){return(ds=(0,I.A)(function*(m,l,h=!1){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y="signIn",M=yield Ts(m,y,l),B=yield Tr._fromIdTokenResponse(m,y,M);return h||(yield m._updateCurrentUser(B.user)),B})).apply(this,arguments)}function ca(m,l){return vi.apply(this,arguments)}function vi(){return(vi=(0,I.A)(function*(m,l){return Yi(vn(m),l)})).apply(this,arguments)}function Oi(m,l){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m);return yield Ka(!1,h,l.providerId),Ec(h,l)})).apply(this,arguments)}function Rn(m,l){return an.apply(this,arguments)}function an(){return(an=(0,I.A)(function*(m,l){return qa((0,q.Ku)(m),l)})).apply(this,arguments)}function qr(){return(qr=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithCustomToken",Ye(m,l))})).apply(this,arguments)}function No(){return No=(0,I.A)(function*(m,l){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const h=vn(m),y=yield function Xi(m,l){return qr.apply(this,arguments)}(h,{token:l,returnSecureToken:!0}),M=yield Tr._fromIdTokenResponse(h,"signIn",y);return yield h._updateCurrentUser(M.user),M}),No.apply(this,arguments)}class ws{constructor(l,h){this.factorId=l,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(l,h){return"phoneInfo"in h?hs._fromServerResponse(l,h):"totpInfo"in h?ao._fromServerResponse(l,h):Ge(l,"internal-error")}}class hs extends ws{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,h){return new hs(h)}}class ao extends ws{constructor(l){super("totp",l)}static _fromServerResponse(l,h){return new ao(h)}}function Ji(m,l,h){var y;je((null===(y=h.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),je(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),l.continueUrl=h.url,l.dynamicLinkDomain=h.dynamicLinkDomain,l.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(je(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),l.iOSBundleId=h.iOS.bundleId),h.android&&(je(h.android.packageName.length>0,m,"missing-android-pkg-name"),l.androidInstallApp=h.android.installApp,l.androidMinimumVersionCode=h.android.minimumVersion,l.androidPackageName=h.android.packageName)}function xo(m){return la.apply(this,arguments)}function la(){return(la=(0,I.A)(function*(m){const l=vn(m);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function da(){return(da=(0,I.A)(function*(m,l,h){const y=vn(m),M={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};h&&Ji(y,M,h),yield wi(y,M,"getOobCode",Bn)})).apply(this,arguments)}function uo(){return uo=(0,I.A)(function*(m,l,h){yield aa((0,q.Ku)(m),{oobCode:l,newPassword:h}).catch(function(){var y=(0,I.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&xo(m),M});return function(M){return y.apply(this,arguments)}}())}),uo.apply(this,arguments)}function As(){return As=(0,I.A)(function*(m,l){yield function Ga(m,l){return no.apply(this,arguments)}((0,q.Ku)(m),{oobCode:l})}),As.apply(this,arguments)}function Xa(m,l){return ha.apply(this,arguments)}function ha(){return(ha=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m),y=yield aa(h,{oobCode:l}),M=y.requestType;switch(je(M,h,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":je(y.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":je(y.mfaInfo,h,"internal-error");default:je(y.email,h,"internal-error")}let B=null;return y.mfaInfo&&(B=ws._fromServerResponse(vn(h),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:B},operation:M}})).apply(this,arguments)}function ko(){return(ko=(0,I.A)(function*(m,l){const{data:h}=yield Xa((0,q.Ku)(m),l);return h.email})).apply(this,arguments)}function Lo(){return(Lo=(0,I.A)(function*(m,l,h){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m),ie=yield wi(y,{returnSecureToken:!0,email:l,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",so).catch(ze=>{throw"auth/password-does-not-meet-requirements"===ze.code&&xo(m),ze}),Ee=yield Tr._fromIdTokenResponse(y,"signIn",ie);return yield y._updateCurrentUser(Ee.user),Ee})).apply(this,arguments)}function bi(){return(bi=(0,I.A)(function*(m,l,h){const y=vn(m),M={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function B(ie,Ee){je(Ee.handleCodeInApp,y,"argument-error"),Ee&&Ji(y,ie,Ee)})(M,h),yield wi(y,M,"getOobCode",io)})).apply(this,arguments)}function Ja(){return(Ja=(0,I.A)(function*(m,l,h){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=(0,q.Ku)(m),M=yi.credentialWithLink(l,h||pn());return je(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),ca(y,M)})).apply(this,arguments)}function Ds(){return(Ds=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:createAuthUri",Ye(m,l))})).apply(this,arguments)}function V(){return V=(0,I.A)(function*(m,l){const y={identifier:l,continueUri:lr()?pn():"http://localhost"},{signinMethods:M}=yield function fa(m,l){return Ds.apply(this,arguments)}((0,q.Ku)(m),y);return M||[]}),V.apply(this,arguments)}function F(){return F=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m),M={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};l&&Ji(h.auth,M,l);const{email:B}=yield function At(m,l){return cn.apply(this,arguments)}(h.auth,M);B!==m.email&&(yield m.reload())}),F.apply(this,arguments)}function Oe(){return Oe=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:l};h&&Ji(y.auth,B,h);const{email:ie}=yield function Os(m,l){return tr.apply(this,arguments)}(y.auth,B);ie!==m.email&&(yield m.reload())}),Oe.apply(this,arguments)}function St(){return(St=(0,I.A)(function*(m,l){return ue(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Mn(){return Mn=(0,I.A)(function*(m,{displayName:l,photoURL:h}){if(void 0===l&&void 0===h)return;const y=(0,q.Ku)(m),B={idToken:yield y.getIdToken(),displayName:l,photoUrl:h,returnSecureToken:!0},ie=yield it(y,function nt(m,l){return St.apply(this,arguments)}(y.auth,B));y.displayName=ie.displayName||null,y.photoURL=ie.photoUrl||null;const Ee=y.providerData.find(({providerId:ze})=>"password"===ze);Ee&&(Ee.displayName=y.displayName,Ee.photoURL=y.photoURL),yield y._updateTokensIfNecessary(ie)}),Mn.apply(this,arguments)}function Kn(m,l,h){return Xn.apply(this,arguments)}function Xn(){return Xn=(0,I.A)(function*(m,l,h){const{auth:y}=m,B={idToken:yield m.getIdToken(),returnSecureToken:!0};l&&(B.email=l),h&&(B.password=h);const ie=yield it(m,function Or(m,l){return Jr.apply(this,arguments)}(y,B));yield m._updateTokensIfNecessary(ie,!0)}),Xn.apply(this,arguments)}class ti{constructor(l,h,y={}){this.isNewUser=l,this.providerId=h,this.profile=y}}class ni extends ti{constructor(l,h,y,M){super(l,h,y),this.username=M}}class Hs extends ti{constructor(l,h){super(l,"facebook.com",h)}}class vr extends ni{constructor(l,h){super(l,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Cs extends ti{constructor(l,h){super(l,"google.com",h)}}class Pr extends ni{constructor(l,h,y){super(l,"twitter.com",h,y)}}function Zi(m){const{user:l,_tokenResponse:h}=m;return l.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Nn(m){var l,h;if(!m)return null;const{providerId:y}=m,M=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},B=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const ie=null===(h=null===(l=Wt(m.idToken))||void 0===l?void 0:l.firebase)||void 0===h?void 0:h.sign_in_provider;if(ie)return new ti(B,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!y)return null;switch(y){case"facebook.com":return new Hs(B,M);case"github.com":return new vr(B,M);case"google.com":return new Cs(B,M);case"twitter.com":return new Pr(B,M,m.screenName||null);case"custom":case"anonymous":return new ti(B,null);default:return new ti(B,y,M)}}(h)}class Gs{constructor(l,h,y){this.type=l,this.credential=h,this.user=y}static _fromIdtoken(l,h){return new Gs("enroll",l,h)}static _fromMfaPendingCredential(l){return new Gs("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var h,y;if(l?.multiFactorSession){if(null!==(h=l.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Gs._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(y=l.multiFactorSession)&&void 0!==y&&y.idToken)return Gs._fromIdtoken(l.multiFactorSession.idToken)}return null}}class bs{constructor(l,h,y){this.session=l,this.hints=h,this.signInResolver=y}static _fromError(l,h){const y=vn(l),M=h.customData._serverResponse,B=(M.mfaInfo||[]).map(Ee=>ws._fromServerResponse(y,Ee));je(M.mfaPendingCredential,y,"internal-error");const ie=Gs._fromMfaPendingCredential(M.mfaPendingCredential);return new bs(ie,B,function(){var Ee=(0,I.A)(function*(ze){const Et=yield ze._process(y,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Ot=Object.assign(Object.assign({},M),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(h.operationType){case"signIn":const Ft=yield Tr._fromIdTokenResponse(y,h.operationType,Ot);return yield y._updateCurrentUser(Ft.user),Ft;case"reauthenticate":return je(h.user,y,"internal-error"),Tr._forOperation(h.user,h.operationType,Ot);default:Ge(y,"internal-error")}});return function(ze){return Ee.apply(this,arguments)}}())}resolveSignIn(l){var h=this;return(0,I.A)(function*(){return h.signInResolver(l)})()}}class Cc{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(y=>ws._fromServerResponse(l.auth,y)))})}static _fromUser(l){return new Cc(l)}getSession(){var l=this;return(0,I.A)(function*(){return Gs._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,h){var y=this;return(0,I.A)(function*(){const M=l,B=yield y.getSession(),ie=yield it(y.user,M._process(y.user.auth,B,h));return yield y.user._updateTokensIfNecessary(ie),y.user.reload()})()}unenroll(l){var h=this;return(0,I.A)(function*(){const y="string"==typeof l?l:l.uid,M=yield h.user.getIdToken();try{const B=yield it(h.user,function Zd(m,l){return ue(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(m,l))}(h.user.auth,{idToken:M,mfaEnrollmentId:y}));h.enrolledFactors=h.enrolledFactors.filter(({uid:ie})=>ie!==y),yield h.user._updateTokensIfNecessary(B),yield h.user.reload()}catch(B){throw B}})()}}const jn=new WeakMap,ma="__sak";class bc{constructor(l,h){this.storageRetriever=l,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(ma,"1"),this.storage.removeItem(ma),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,h){return this.storage.setItem(l,JSON.stringify(h)),Promise.resolve()}_get(l){const h=this.storage.getItem(l);return Promise.resolve(h?JSON.parse(h):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vo=(()=>{class m extends bc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,y)=>this.onStorageEvent(h,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qe(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),B=this.localCache[y];M!==B&&h(y,B,M)}}onStorageEvent(h,y=!1){if(!h.key)return void this.forAllChangedKeys((Ee,ze,Et)=>{this.notifyListeners(Ee,Et)});const M=h.key;y?this.detachListener():this.stopPolling();const B=()=>{const Ee=this.storage.getItem(M);!y&&this.localCache[M]===Ee||this.notifyListeners(M,Ee)},ie=this.storage.getItem(M);!function Ie(){return(0,q.lT)()&&10===document.documentMode}()||ie===h.newValue||h.newValue===h.oldValue?B():setTimeout(B,10)}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const B of Array.from(M))B(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,y){var M=()=>super._set,B=this;return(0,I.A)(function*(){yield M().call(B,h,y),B.localCache[h]=JSON.stringify(y)})()}_get(h){var y=()=>super._get,M=this;return(0,I.A)(function*(){const B=yield y().call(M,h);return M.localCache[h]=JSON.stringify(B),B})()}_remove(h){var y=()=>super._remove,M=this;return(0,I.A)(function*(){yield y().call(M,h),delete M.localCache[h]})()}}return m.type="LOCAL",m})(),di=(()=>{class m extends bc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,y){}_removeListener(h,y){}}return m.type="SESSION",m})();let xn=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const y=this.receivers.find(B=>B.isListeningto(h));if(y)return y;const M=new m(h);return this.receivers.push(M),M}isListeningto(h){return this.eventTarget===h}handleEvent(h){var y=this;return(0,I.A)(function*(){const M=h,{eventId:B,eventType:ie,data:Ee}=M.data,ze=y.handlersMap[ie];if(!ze?.size)return;M.ports[0].postMessage({status:"ack",eventId:B,eventType:ie});const Et=Array.from(ze).map(function(){var Ft=(0,I.A)(function*(Mr){return Mr(M.origin,Ee)});return function(Mr){return Ft.apply(this,arguments)}}()),Ot=yield function ot(m){return Promise.all(m.map(function(){var l=(0,I.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(y){return{fulfilled:!1,reason:y}}});return function(h){return l.apply(this,arguments)}}()))}(Et);M.ports[0].postMessage({status:"done",eventId:B,eventType:ie,response:Ot})})()}_subscribe(h,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(y)}_unsubscribe(h,y){this.handlersMap[h]&&y&&this.handlersMap[h].delete(y),(!y||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Uo(m="",l=10){let h="";for(let y=0;y<l;y++)h+=Math.floor(10*Math.random());return m+h}class ya{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,h,y=50){var M=this;return(0,I.A)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ie,Ee;return new Promise((ze,Et)=>{const Ot=Uo("",20);B.port1.start();const Ft=setTimeout(()=>{Et(new Error("unsupported_event"))},y);Ee={messageChannel:B,onMessage(Mr){const ts=Mr;if(ts.data.eventId===Ot)switch(ts.data.status){case"ack":clearTimeout(Ft),ie=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),ze(ts.data.response);break;default:clearTimeout(Ft),clearTimeout(ie),Et(new Error("invalid_response"))}}},M.handlers.add(Ee),B.port1.addEventListener("message",Ee.onMessage),M.target.postMessage({eventType:l,eventId:Ot,data:h},[B.port2])}).finally(()=>{Ee&&M.removeMessageHandler(Ee)})})()}}function Pn(){return window}function Ws(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function Bo(){return(Bo=(0,I.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $n="firebaseLocalStorageDb",Qr="firebaseLocalStorage",ki="fbase_key";class jo{constructor(l){this.request=l}toPromise(){return new Promise((l,h)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Ks(m,l){return m.transaction([Qr],l?"readwrite":"readonly").objectStore(Qr)}function Lu(){const m=indexedDB.open($n,1);return new Promise((l,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(Qr,{keyPath:ki})}catch(M){h(M)}}),m.addEventListener("success",(0,I.A)(function*(){const y=m.result;y.objectStoreNames.contains(Qr)?l(y):(y.close(),yield function ps(){const m=indexedDB.deleteDatabase($n);return new jo(m).toPromise()}(),l(yield Lu()))}))})}function Fu(m,l,h){return va.apply(this,arguments)}function va(){return(va=(0,I.A)(function*(m,l,h){const y=Ks(m,!0).put({[ki]:l,value:h});return new jo(y).toPromise()})).apply(this,arguments)}function ho(){return(ho=(0,I.A)(function*(m,l){const h=Ks(m,!1).get(l),y=yield new jo(h).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Ia(m,l){const h=Ks(m,!0).delete(l);return new jo(h).toPromise()}const v=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,I.A)(function*(){return h.db||(h.db=yield Lu()),h.db})()}_withRetries(h){var y=this;return(0,I.A)(function*(){let M=0;for(;;)try{const B=yield y._openDb();return yield h(B)}catch(B){if(M++>3)throw B;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,I.A)(function*(){return Ws()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,I.A)(function*(){h.receiver=xn._getInstance(function Ur(){return Ws()?self:null}()),h.receiver._subscribe("keyChanged",function(){var y=(0,I.A)(function*(M,B){return{keyProcessed:(yield h._poll()).includes(B.key)}});return function(M,B){return y.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var y=(0,I.A)(function*(M,B){return["keyChanged"]});return function(M,B){return y.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,I.A)(function*(){var y,M;if(h.activeServiceWorker=yield function fs(){return Bo.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new ya(h.activeServiceWorker);const B=yield h.sender._send("ping",{},800);B&&null!==(y=B[0])&&void 0!==y&&y.fulfilled&&null!==(M=B[0])&&void 0!==M&&M.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var y=this;return(0,I.A)(function*(){if(y.sender&&y.activeServiceWorker&&function Rc(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:h},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.A)(function*(){try{if(!indexedDB)return!1;const h=yield Lu();return yield Fu(h,ma,"1"),yield Ia(h,ma),!0}catch{}return!1})()}_withPendingWrite(h){var y=this;return(0,I.A)(function*(){y.pendingWrites++;try{yield h()}finally{y.pendingWrites--}})()}_set(h,y){var M=this;return(0,I.A)(function*(){return M._withPendingWrite((0,I.A)(function*(){return yield M._withRetries(B=>Fu(B,h,y)),M.localCache[h]=y,M.notifyServiceWorker(h)}))})()}_get(h){var y=this;return(0,I.A)(function*(){const M=yield y._withRetries(B=>function Vu(m,l){return ho.apply(this,arguments)}(B,h));return y.localCache[h]=M,M})()}_remove(h){var y=this;return(0,I.A)(function*(){return y._withPendingWrite((0,I.A)(function*(){return yield y._withRetries(M=>Ia(M,h)),delete y.localCache[h],y.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,I.A)(function*(){const y=yield h._withRetries(ie=>{const Ee=Ks(ie,!1).getAll();return new jo(Ee).toPromise()});if(!y)return[];if(0!==h.pendingWrites)return[];const M=[],B=new Set;if(0!==y.length)for(const{fbase_key:ie,value:Ee}of y)B.add(ie),JSON.stringify(h.localCache[ie])!==JSON.stringify(Ee)&&(h.notifyListeners(ie,Ee),M.push(ie));for(const ie of Object.keys(h.localCache))h.localCache[ie]&&!B.has(ie)&&(h.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const B of Array.from(M))B(y)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,I.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),Pe=1e12;class Dt{constructor(l){this.auth=l,this.counter=Pe,this._widgets=new Map}render(l,h){const y=this.counter;return this._widgets.set(y,new un(l,this.auth.name,h||{})),this.counter++,y}reset(l){var h;const y=l||Pe;null===(h=this._widgets.get(y))||void 0===h||h.delete(),this._widgets.delete(y)}getResponse(l){var h;return(null===(h=this._widgets.get(l||Pe))||void 0===h?void 0:h.getResponse())||""}execute(l){var h=this;return(0,I.A)(function*(){var y;return null===(y=h._widgets.get(l||Pe))||void 0===y||y.execute(),""})()}}class un{constructor(l,h,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof l?document.getElementById(l):l;je(M,"argument-error",{appName:h}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function In(m){const l=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)l.push(h.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":h}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const En=Ns("rcb"),Jt=new he(3e4,6e4);class $o{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Pn().grecaptcha)||void 0===l||!l.render)}load(l,h=""){return je(function Ho(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),l,"argument-error"),this.shouldResolveImmediately(h)&&Nt(Pn().grecaptcha)?Promise.resolve(Pn().grecaptcha):new Promise((y,M)=>{const B=Pn().setTimeout(()=>{M(Te(l,"network-request-failed"))},Jt.get());Pn()[En]=()=>{Pn().clearTimeout(B),delete Pn()[En];const Ee=Pn().grecaptcha;if(!Ee||!Nt(Ee))return void M(Te(l,"internal-error"));const ze=Ee.render;Ee.render=(Et,Ot)=>{const Ft=ze(Et,Ot);return this.counter++,Ft},this.hostLanguage=h,y(Ee)},Gi(`${function us(){return zi.recaptchaV2Script}()}?${(0,q.Am)({onload:En,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(B),M(Te(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var h;return!(null===(h=Pn().grecaptcha)||void 0===h||!h.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Uu{load(l){return(0,I.A)(function*(){return new Dt(l)})()}clearedOneInstance(){}}const gs="recaptcha",ms={theme:"light",type:"image"};class th{constructor(l,h,y=Object.assign({},ms)){this.parameters=y,this.type=gs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(l),this.isInvisible="invisible"===this.parameters.size,je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof h?document.getElementById(h):h;je(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uu:new $o,this.validateStartingState()}verify(){var l=this;return(0,I.A)(function*(){l.assertNotDestroyed();const h=yield l.render(),y=l.getAssertedRecaptcha();return y.getResponse(h)||new Promise(B=>{const ie=Ee=>{Ee&&(l.tokenChangeListeners.delete(ie),B(Ee))};l.tokenChangeListeners.add(ie),l.isInvisible&&y.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){je(!this.parameters.sitekey,this.auth,"argument-error"),je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return h=>{if(this.tokenChangeListeners.forEach(y=>y(h)),"function"==typeof l)l(h);else if("string"==typeof l){const y=Pn()[l];"function"==typeof y&&y(h)}}}assertNotDestroyed(){je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,I.A)(function*(){if(yield l.init(),!l.widgetId){let h=l.container;if(!l.isInvisible){const y=document.createElement("div");h.appendChild(y),h=y}l.widgetId=l.getAssertedRecaptcha().render(h,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,I.A)(function*(){je(lr()&&!Ws(),l.auth,"internal-error"),yield function Mc(){let m=null;return new Promise(l=>{"complete"!==document.readyState?(m=()=>l(),window.addEventListener("load",m)):l()}).catch(l=>{throw m&&window.removeEventListener("load",m),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const h=yield function Nr(m){return Ei.apply(this,arguments)}(l.auth);je(h,l.auth,"internal-error"),l.parameters.sitekey=h})()}getAssertedRecaptcha(){return je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ss{constructor(l,h){this.verificationId=l,this.onConfirmation=h}confirm(l){const h=ei._fromVerification(this.verificationId,l);return this.onConfirmation(h)}}function tu(){return(tu=(0,I.A)(function*(m,l,h){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m),M=yield nu(y,l,(0,q.Ku)(h));return new Ss(M,B=>ca(y,B))})).apply(this,arguments)}function Bu(){return(Bu=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);yield Ka(!1,y,"phone");const M=yield nu(y.auth,l,(0,q.Ku)(h));return new Ss(M,B=>Oi(y,B))})).apply(this,arguments)}function Ea(){return(Ea=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);if((0,ae._isFirebaseServerApp)(y.auth.app))return Promise.reject(Qe(y.auth));const M=yield nu(y.auth,l,(0,q.Ku)(h));return new Ss(M,B=>Rn(y,B))})).apply(this,arguments)}function nu(m,l,h){return rh.apply(this,arguments)}function rh(){return rh=(0,I.A)(function*(m,l,h){var y;const M=yield h.verify();try{let B;if(je("string"==typeof M,m,"argument-error"),je(h.type===gs,m,"argument-error"),B="string"==typeof l?{phoneNumber:l}:l,"session"in B){const ie=B.session;if("phoneNumber"in B)return je("enroll"===ie.type,m,"internal-error"),(yield function ga(m,l){return ue(m,"POST","/v2/accounts/mfaEnrollment:start",Ye(m,l))}(m,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{je("signin"===ie.type,m,"internal-error");const Ee=(null===(y=B.multiFactorHint)||void 0===y?void 0:y.uid)||B.multiFactorUid;return je(Ee,m,"missing-multi-factor-info"),(yield function b(m,l){return ue(m,"POST","/v2/accounts/mfaSignIn:start",Ye(m,l))}(m,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function xi(m,l){return Ai.apply(this,arguments)}(m,{phoneNumber:B.phoneNumber,recaptchaToken:M});return ie}}finally{h._reset()}}),rh.apply(this,arguments)}function fo(){return(fo=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m);if((0,ae._isFirebaseServerApp)(h.auth.app))return Promise.reject(Qe(h.auth));yield Ec(h,l)})).apply(this,arguments)}let ju=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=vn(h)}verifyPhoneNumber(h,y){return nu(this.auth,h,(0,q.Ku)(y))}static credential(h,y){return ei._fromVerification(h,y)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:y,temporaryProof:M}=h;return y&&M?ei._fromTokenResponse(y,M):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function iu(m,l){return l?dt(l):(je(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class xc extends xs{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return mn(l,this._buildIdpRequest())}_linkToIdToken(l,h){return mn(l,this._buildIdpRequest(h))}_getReauthenticationResolver(l){return mn(l,this._buildIdpRequest())}_buildIdpRequest(l){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(h.idToken=l),h}}function hg(m){return Yi(m.auth,new xc(m),m.bypassAuthState)}function fg(m){const{auth:l,user:h}=m;return je(h,l,"internal-error"),qa(h,new xc(m),m.bypassAuthState)}function pg(m){return Df.apply(this,arguments)}function Df(){return(Df=(0,I.A)(function*(m){const{auth:l,user:h}=m;return je(h,l,"internal-error"),Ec(h,new xc(m),m.bypassAuthState)})).apply(this,arguments)}class Ta{constructor(l,h,y,M,B=!1){this.auth=l,this.resolver=y,this.user=M,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var l=this;return new Promise(function(){var h=(0,I.A)(function*(y,M){l.pendingPromise={resolve:y,reject:M};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(B){l.reject(B)}});return function(y,M){return h.apply(this,arguments)}}())}onAuthEvent(l){var h=this;return(0,I.A)(function*(){const{urlResponse:y,sessionId:M,postBody:B,tenantId:ie,error:Ee,type:ze}=l;if(Ee)return void h.reject(Ee);const Et={auth:h.auth,requestUri:y,sessionId:M,tenantId:ie||void 0,postBody:B||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(ze)(Et))}catch(Ot){h.reject(Ot)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return hg;case"linkViaPopup":case"linkViaRedirect":return pg;case"reauthViaPopup":case"reauthViaRedirect":return fg;default:Ge(this.auth,"internal-error")}}resolve(l){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wa=new he(2e3,1e4);function ih(){return(ih=(0,I.A)(function*(m,l,h){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Te(m,"operation-not-supported-in-this-environment"));const y=vn(m);gt(m,l,Gn);const M=iu(y,h);return new kc(y,"signInViaPopup",l,M).executeNotNull()})).apply(this,arguments)}function _s(){return(_s=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);if((0,ae._isFirebaseServerApp)(y.auth.app))return Promise.reject(Te(y.auth,"operation-not-supported-in-this-environment"));gt(y.auth,l,Gn);const M=iu(y.auth,h);return new kc(y.auth,"reauthViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}function Cf(){return(Cf=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);gt(y.auth,l,Gn);const M=iu(y.auth,h);return new kc(y.auth,"linkViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}let kc=(()=>{class m extends Ta{constructor(h,y,M,B,ie){super(h,y,B,ie),this.provider=M,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,I.A)(function*(){const y=yield h.execute();return je(y,h.auth,"internal-error"),y})()}onExecution(){var h=this;return(0,I.A)(function*(){Vn(1===h.filter.length,"Popup operations only handle one event");const y=Uo();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],y),h.authWindow.associatedEvent=y,h.resolver._originValidation(h.auth).catch(M=>{h.reject(M)}),h.resolver._isIframeWebStorageSupported(h.auth,M=>{M||h.reject(Te(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,wa.get())};h()}}return m.currentPopupAction=null,m})();const Lc="pendingRedirect",qs=new Map;class Si extends Ta{constructor(l,h,y=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,y),this.eventId=null}execute(){var l=()=>super.execute,h=this;return(0,I.A)(function*(){let y=qs.get(h.auth._key());if(!y){try{const B=(yield function su(m,l){return po.apply(this,arguments)}(h.resolver,h.auth))?yield l().call(h):null;y=()=>Promise.resolve(B)}catch(M){y=()=>Promise.reject(M)}qs.set(h.auth._key(),y)}return h.bypassAuthState||qs.set(h.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(l){var h=()=>super.onAuthEvent,y=this;return(0,I.A)(function*(){if("signInViaRedirect"===l.type)return h().call(y,l);if("unknown"!==l.type){if(l.eventId){const M=yield y.auth._redirectUserForId(l.eventId);if(M)return y.user=M,h().call(y,l);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,I.A)(function*(){})()}cleanUp(){}}function po(){return(po=(0,I.A)(function*(m,l){const h=oh(l),y=sh(m);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(h));return yield y._remove(h),M})).apply(this,arguments)}function zu(m,l){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,I.A)(function*(m,l){return sh(m)._set(oh(l),"true")})).apply(this,arguments)}function Ku(m,l){qs.set(m._key(),l)}function sh(m){return dt(m._redirectPersistence)}function oh(m){return mt(Lc,m.config.apiKey,m.name)}function ah(m,l,h){return function uh(m,l,h){return ou.apply(this,arguments)}(m,l,h)}function ou(){return(ou=(0,I.A)(function*(m,l,h){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m);gt(m,l,Gn),yield y._initializationPromise;const M=iu(y,h);return yield zu(M,y),M._openRedirect(y,l,"signInViaRedirect")})).apply(this,arguments)}function Fc(m,l,h){return function Vl(m,l,h){return Li.apply(this,arguments)}(m,l,h)}function Li(){return(Li=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);if(gt(y.auth,l,Gn),(0,ae._isFirebaseServerApp)(y.auth.app))return Promise.reject(Qe(y.auth));yield y.auth._initializationPromise;const M=iu(y.auth,h);yield zu(M,y.auth);const B=yield go(y);return M._openRedirect(y.auth,l,"reauthViaRedirect",B)})).apply(this,arguments)}function gg(m,l,h){return function ch(m,l,h){return Ul.apply(this,arguments)}(m,l,h)}function Ul(){return(Ul=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);gt(y.auth,l,Gn),yield y.auth._initializationPromise;const M=iu(y.auth,h);yield Ka(!1,y,l.providerId),yield zu(M,y.auth);const B=yield go(y);return M._openRedirect(y.auth,l,"linkViaRedirect",B)})).apply(this,arguments)}function lh(){return(lh=(0,I.A)(function*(m,l){return yield vn(m)._initializationPromise,Br(m,l,!1)})).apply(this,arguments)}function Br(m,l){return zo.apply(this,arguments)}function zo(){return(zo=(0,I.A)(function*(m,l,h=!1){if((0,ae._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m),M=iu(y,l),ie=yield new Si(y,M,h).execute();return ie&&!h&&(delete ie.user._redirectEventId,yield y._persistUserIfCurrent(ie.user),yield y._setRedirectUser(null,l)),ie})).apply(this,arguments)}function go(m){return qu.apply(this,arguments)}function qu(){return(qu=(0,I.A)(function*(m){const l=Uo(`${m.uid}:::`);return m._redirectEventId=l,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),l})).apply(this,arguments)}class Bl{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let h=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(l,y)&&(h=!0,this.sendToConsumer(l,y),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Aa(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Go(m);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=l,h=!0)),h}sendToConsumer(l,h){var y;if(l.error&&!Go(l)){const M=(null===(y=l.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";h.onError(Te(this.auth,M))}else h.onAuthEvent(l)}isEventForConsumer(l,h){const y=null===h.eventId||!!l.eventId&&l.eventId===h.eventId;return h.filter.includes(l.type)&&y}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jl(l))}saveEventToCache(l){this.cachedEventUids.add(jl(l)),this.lastProcessedEventTime=Date.now()}}function jl(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(l=>l).join("-")}function Go({type:m,error:l}){return"unknown"===m&&"auth/no-auth-event"===l?.code}function Da(m){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,I.A)(function*(m,l={}){return ue(m,"GET","/v1/projects",l)})).apply(this,arguments)}const Uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,au=/^https?/;function hh(){return(hh=(0,I.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:l}=yield Da(m);for(const h of l)try{if(Sf(h))return}catch{}Ge(m,"unauthorized-domain")})).apply(this,arguments)}function Sf(m){const l=pn(),{protocol:h,hostname:y}=new URL(l);if(m.startsWith("chrome-extension://")){const ie=new URL(m);return""===ie.hostname&&""===y?"chrome-extension:"===h&&m.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===h&&ie.hostname===y}if(!au.test(h))return!1;if(Uc.test(m))return y===m;const M=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const fh=new he(3e4,6e4);function mg(){const m=Pn().___jsl;if(m?.H)for(const l of Object.keys(m.H))if(m.H[l].r=m.H[l].r||[],m.H[l].L=m.H[l].L||[],m.H[l].r=[...m.H[l].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let Ca=null;const Qs=new he(5e3,15e3),Rf="__/auth/iframe",Pf="emulator/auth/iframe",Qn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ba(m){const l=m.config;je(l.authDomain,m,"auth-domain-config-required");const h=l.emulator?we(l,Pf):`https://${m.config.authDomain}/${Rf}`,y={apiKey:l.apiKey,appName:m.name,v:ae.SDK_VERSION},M=Mf.get(m.config.apiHost);M&&(y.eid=M);const B=m._getFrameworks();return B.length&&(y.fw=B.join(",")),`${h}?${(0,q.Am)(y).slice(1)}`}function Fi(){return Fi=(0,I.A)(function*(m){const l=yield function $l(m){return Ca=Ca||function _g(m){return new Promise((l,h)=>{var y,M,B;function ie(){mg(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{mg(),h(Te(m,"network-request-failed"))},timeout:fh.get()})}if(null!==(M=null===(y=Pn().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)l(gapi.iframes.getContext());else{if(null===(B=Pn().gapi)||void 0===B||!B.load){const Ee=Ns("iframefcb");return Pn()[Ee]=()=>{gapi.load?ie():h(Te(m,"network-request-failed"))},Gi(`${function br(){return zi.gapiScript}()}?onload=${Ee}`).catch(ze=>h(ze))}ie()}}).catch(l=>{throw Ca=null,l})}(m),Ca}(m),h=Pn().gapi;return je(h,m,"internal-error"),l.open({where:document.body,url:ba(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qn,dontclear:!0},y=>new Promise(function(){var M=(0,I.A)(function*(B,ie){yield y.restyle({setHideOnLeave:!1});const Ee=Te(m,"network-request-failed"),ze=Pn().setTimeout(()=>{ie(Ee)},Qs.get());function Et(){Pn().clearTimeout(ze),B(y)}y.ping(Et).then(Et,()=>{ie(Ee)})});return function(B,ie){return M.apply(this,arguments)}}()))}),Fi.apply(this,arguments)}const ys={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yu{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const es="__/auth/handler",ph="emulator/auth/handler",lu=encodeURIComponent("fac");function xf(m,l,h,y,M,B){return jc.apply(this,arguments)}function jc(){return(jc=(0,I.A)(function*(m,l,h,y,M,B){je(m.config.authDomain,m,"auth-domain-config-required"),je(m.config.apiKey,m,"invalid-api-key");const ie={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:y,v:ae.SDK_VERSION,eventId:M};if(l instanceof Gn){l.setDefaultLanguage(m.languageCode),ie.providerId=l.providerId||"",(0,q.Im)(l.getCustomParameters())||(ie.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Ot,Ft]of Object.entries(B||{}))ie[Ot]=Ft}if(l instanceof Fs){const Ot=l.getScopes().filter(Ft=>""!==Ft);Ot.length>0&&(ie.scopes=Ot.join(","))}m.tenantId&&(ie.tid=m.tenantId);const Ee=ie;for(const Ot of Object.keys(Ee))void 0===Ee[Ot]&&delete Ee[Ot];const ze=yield m._getAppCheckToken(),Et=ze?`#${lu}=${encodeURIComponent(ze)}`:"";return`${function vg({config:m}){return m.emulator?we(m,ph):`https://${m.authDomain}/${es}`}(m)}?${(0,q.Am)(Ee).slice(1)}${Et}`})).apply(this,arguments)}const Xu="webStorageSupport",kf=class Of{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=di,this._completeRedirectFn=Br,this._overrideRedirectResult=Ku}_openPopup(l,h,y,M){var B=this;return(0,I.A)(function*(){var ie;Vn(null===(ie=B.eventManagers[l._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Ee=yield xf(l,h,y,pn(),M);return function Nf(m,l,h,y=500,M=600){const B=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-y)/2,0).toString();let Ee="";const ze=Object.assign(Object.assign({},ys),{width:y.toString(),height:M.toString(),top:B,left:ie}),Et=(0,q.ZQ)().toLowerCase();h&&(Ee=It(Et)?"_blank":h),oi(Et)&&(l=l||"http://localhost",ze.scrollbars="yes");const Ot=Object.entries(ze).reduce((Mr,[ts,Zc])=>`${Mr}${ts}=${Zc},`,"");if(function Fe(m=(0,q.ZQ)()){var l;return rn(m)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Et)&&"_self"!==Ee)return function cu(m,l){const h=document.createElement("a");h.href=m,h.target=l;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(y)}(l||"",Ee),new Yu(null);const Ft=window.open(l||"",Ee,Ot);je(Ft,m,"popup-blocked");try{Ft.focus()}catch{}return new Yu(Ft)}(l,Ee,Uo())})()}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B._originValidation(l),function Sc(m){Pn().location.href=m}(yield xf(l,h,y,pn(),M)),new Promise(()=>{})})()}_initialize(l){const h=l._key();if(this.eventManagers[h]){const{manager:M,promise:B}=this.eventManagers[h];return M?Promise.resolve(M):(Vn(B,"If manager is not set, promise should be"),B)}const y=this.initAndGetManager(l);return this.eventManagers[h]={promise:y},y.catch(()=>{delete this.eventManagers[h]}),y}initAndGetManager(l){var h=this;return(0,I.A)(function*(){const y=yield function Hl(m){return Fi.apply(this,arguments)}(l),M=new Bl(l);return y.register("authEvent",B=>(je(B?.authEvent,l,"invalid-auth-event"),{status:M.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[l._key()]={manager:M},h.iframes[l._key()]=y,M})()}_isIframeWebStorageSupported(l,h){this.iframes[l._key()].send(Xu,{type:Xu},M=>{var B;const ie=null===(B=M?.[0])||void 0===B?void 0:B[Xu];void 0!==ie&&h(!!ie),Ge(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function dh(m){return hh.apply(this,arguments)}(l)),this.originValidationPromises[h]}get _shouldInitProactively(){return qe()||kn()||rn()}};class gh{constructor(l){this.factorId=l}_process(l,h,y){switch(h.type){case"enroll":return this._finalizeEnroll(l,h.credential,y);case"signin":return this._finalizeSignIn(l,h.credential);default:return Zt("unexpected MultiFactorSessionType")}}}class mh extends gh{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new mh(l)}_finalizeEnroll(l,h,y){return function Ac(m,l){return ue(m,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(m,l))}(l,{idToken:h,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,h){return function N(m,l){return ue(m,"POST","/v2/accounts/mfaSignIn:finalize",Ye(m,l))}(l,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zl=(()=>{class m{constructor(){}static assertion(h){return mh._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var Hc="@firebase/auth";class Lf{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var h=this;return(0,I.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const h=this.auth.onIdTokenChanged(y=>{l(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,h),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const h=this.internalListeners.get(l);h&&(this.internalListeners.delete(l),h(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Sa(){return window}(0,q.XA)("authIdTokenMaxAge"),function Pu(m){zi=m}({loadJS:m=>new Promise((l,h)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=l,y.onerror=M=>{const B=Te("internal-error");B.customData=M,h(B)},y.type="text/javascript",y.charset="UTF-8",function Ig(){var m,l;return null!==(l=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==l?l:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Gl(m){(0,ae._registerComponent)(new _e.uA("auth",(l,{options:h})=>{const y=l.getProvider("app").getImmediate(),M=l.getProvider("heartbeat"),B=l.getProvider("app-check-internal"),{apiKey:ie,authDomain:Ee}=y.options;je(ie&&!ie.includes(":"),"invalid-api-key",{appName:y.name});const ze={apiKey:ie,authDomain:Ee,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ft(m)},Et=new me(y,M,B,ze);return function Ki(m,l){const h=l?.persistence||[],y=(Array.isArray(h)?h:[h]).map(dt);l?.errorMap&&m._updateErrorMap(l.errorMap),m._initializeWithPersistence(y,l?.popupRedirectResolver)}(Et,h),Et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,h,y)=>{l.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new _e.uA("auth-internal",l=>{const h=vn(l.getProvider("auth").getImmediate());return new Lf(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Hc,"1.7.9",function yh(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,ae.registerVersion)(Hc,"1.7.9","esm2017")}("Browser");function zc(){return zc=(0,I.A)(function*(m,l,h){var y;const{BuildInfo:M}=Sa();Vn(l.sessionId,"AuthEvent did not contain a session ID");const B=yield function Xl(m){return Jl.apply(this,arguments)}(l.sessionId),ie={};return rn()?ie.ibi=M.packageName:ui()?ie.apn=M.packageName:Ge(m,"operation-not-supported-in-this-environment"),M.displayName&&(ie.appDisplayName=M.displayName),ie.sessionId=B,xf(m,h,l.type,void 0,null!==(y=l.eventId)&&void 0!==y?y:void 0,ie)}),zc.apply(this,arguments)}function Ql(){return(Ql=(0,I.A)(function*(m){const{BuildInfo:l}=Sa(),h={};rn()?h.iosBundleId=l.packageName:ui()?h.androidPackageName=l.packageName:Ge(m,"operation-not-supported-in-this-environment"),yield Da(m,h)})).apply(this,arguments)}function Ra(){return(Ra=(0,I.A)(function*(m,l,h){const{cordova:y}=Sa();let M=()=>{};try{yield new Promise((B,ie)=>{let Ee=null;function ze(){var Ft;B();const Mr=null===(Ft=y.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof Mr&&Mr(),"function"==typeof h?.close&&h.close()}function Et(){Ee||(Ee=window.setTimeout(()=>{ie(Te(m,"redirect-cancelled-by-user"))},2e3))}function Ot(){"visible"===document?.visibilityState&&Et()}l.addPassiveListener(ze),document.addEventListener("resume",Et,!1),ui()&&document.addEventListener("visibilitychange",Ot,!1),M=()=>{l.removePassiveListener(ze),document.removeEventListener("resume",Et,!1),document.removeEventListener("visibilitychange",Ot,!1),Ee&&window.clearTimeout(Ee)}})}finally{M()}})).apply(this,arguments)}function Jl(){return(Jl=(0,I.A)(function*(m){const l=function Uf(m){if(Vn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const l=new ArrayBuffer(m.length),h=new Uint8Array(l);for(let y=0;y<m.length;y++)h[y]=m.charCodeAt(y);return h}(m),h=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(h)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class wg extends Bl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(l)),super.onEvent(l)}initialized(){var l=this;return(0,I.A)(function*(){yield l.initPromise})()}}function Ih(m){return jf.apply(this,arguments)}function jf(){return(jf=(0,I.A)(function*(m){const l=yield Eh()._get($f(m));return l&&(yield Eh()._remove($f(m))),l})).apply(this,arguments)}function c_(){const m=[];for(let h=0;h<20;h++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function Eh(){return dt(Vo)}function $f(m){return mt("authEvent",m.config.apiKey,m.name)}function tc(m){if(!m?.includes("?"))return{};const[l,...h]=m.split("?");return(0,q.I9)(h.join("?"))}const Th=class Kc{constructor(){this._redirectPersistence=di,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Br,this._overrideRedirectResult=Ku}_initialize(l){var h=this;return(0,I.A)(function*(){const y=l._key();let M=h.eventManagers.get(y);return M||(M=new wg(l),h.eventManagers.set(y,M),h.attachCallbackListeners(l,M)),M})()}_openPopup(l){Ge(l,"operation-not-supported-in-this-environment")}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){!function Yl(m){var l,h,y,M,B,ie,Ee,ze,Et,Ot;const Ft=Sa();je("function"==typeof(null===(l=Ft?.universalLinks)||void 0===l?void 0:l.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),je(typeof(null===(h=Ft?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),je("function"==typeof(null===(B=null===(M=null===(y=Ft?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===B?void 0:B.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),je("function"==typeof(null===(ze=null===(Ee=null===(ie=Ft?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===ze?void 0:ze.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),je("function"==typeof(null===(Ot=null===(Et=Ft?.cordova)||void 0===Et?void 0:Et.InAppBrowser)||void 0===Ot?void 0:Ot.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const ie=yield B._initialize(l);yield ie.initialized(),ie.resetRedirect(),function Wu(){qs.clear()}(),yield B._originValidation(l);const Ee=function Bf(m,l,h=null){return{type:l,eventId:h,urlResponse:null,sessionId:c_(),postBody:null,tenantId:m.tenantId,error:Te(m,"no-auth-event")}}(l,y,M);yield function Zl(m,l){return Eh()._set($f(m),l)}(l,Ee);const ze=yield function ql(m,l,h){return zc.apply(this,arguments)}(l,Ee,h),Et=yield function vh(m){const{cordova:l}=Sa();return new Promise(h=>{l.plugins.browsertab.isAvailable(y=>{let M=null;y?l.plugins.browsertab.openUrl(m):M=l.InAppBrowser.open(m,function as(m=(0,q.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(M)})})}(ze);return function ec(m,l,h){return Ra.apply(this,arguments)}(l,ie,Et)})()}_isIframeWebStorageSupported(l,h){throw new Error("Method not implemented.")}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Eg(m){return Ql.apply(this,arguments)}(l)),this.originValidationPromises[h]}attachCallbackListeners(l,h){const{universalLinks:y,handleOpenURL:M,BuildInfo:B}=Sa(),ie=setTimeout((0,I.A)(function*(){yield Ih(l),h.onEvent(td())}),500),Ee=function(){var Ot=(0,I.A)(function*(Ft){clearTimeout(ie);const Mr=yield Ih(l);let ts=null;Mr&&Ft?.url&&(ts=function ed(m,l){var h,y;const M=function Wc(m){const l=tc(m),h=l.link?decodeURIComponent(l.link):void 0,y=tc(h).link,M=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return tc(M).link||M||y||h||m}(l);if(M.includes("/__/auth/callback")){const B=tc(M),ie=B.firebaseError?function Gc(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(B.firebaseError)):null,Ee=null===(y=null===(h=ie?.code)||void 0===h?void 0:h.split("auth/"))||void 0===y?void 0:y[1],ze=Ee?Te(Ee):null;return ze?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:ze,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:M,postBody:null}}return null}(Mr,Ft.url)),h.onEvent(ts||td())});return function(Mr){return Ot.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,Ee);const ze=M,Et=`${B.packageName.toLowerCase()}://`;Sa().handleOpenURL=function(){var Ot=(0,I.A)(function*(Ft){if(Ft.toLowerCase().startsWith(Et)&&Ee({url:Ft}),"function"==typeof ze)try{ze(Ft)}catch(Mr){console.error(Mr)}});return function(Ft){return Ot.apply(this,arguments)}}()}};function td(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Ko(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function fu(m=(0,q.ZQ)()){return!("file:"!==Ko()&&"ionic:"!==Ko()&&"capacitor:"!==Ko()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function nc(){try{const m=self.localStorage,l=Uo();if(m)return m.setItem(l,"1"),m.removeItem(l),!function sd(m=(0,q.ZQ)()){return function Qc(){return(0,q.lT)()&&11===document?.documentMode}()||function id(m=(0,q.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,q.zW)()}catch{return Yc()&&(0,q.zW)()}return!1}function Yc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function od(){return(function qc(){return"http:"===Ko()||"https:"===Ko()}()||(0,q.sr)()||fu())&&!function rd(){return(0,q.lV)()||(0,q.Ll)()}()&&nc()&&!Yc()}function Gf(){return fu()&&typeof document<"u"}function rc(){return(rc=(0,I.A)(function*(){return!!Gf()&&new Promise(m=>{const l=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),m(!0)})})})).apply(this,arguments)}const Ir={LOCAL:"local",NONE:"none",SESSION:"session"},pu=je,fi="persistence";function ai(m){return mo.apply(this,arguments)}function mo(){return(mo=(0,I.A)(function*(m){yield m._initializationPromise;const l=Xc(),h=mt(fi,m.config.apiKey,m.name);l&&l.setItem(h,m._getPersistence())})).apply(this,arguments)}function Xc(){var m;try{return(null===(m=function Ah(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Wf=je;class qo{constructor(){this.browserResolver=dt(kf),this.cordovaResolver=dt(Th),this.underlyingResolver=null,this._redirectPersistence=di,this._completeRedirectFn=Br,this._overrideRedirectResult=Ku}_initialize(l){var h=this;return(0,I.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openPopup(l,h,y,M)})()}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openRedirect(l,h,y,M)})()}_isIframeWebStorageSupported(l,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,h)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Gf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,I.A)(function*(){if(l.underlyingResolver)return;const h=yield function wh(){return rc.apply(this,arguments)}();l.underlyingResolver=h?l.cordovaResolver:l.browserResolver})()}}function Kf(m){return m.unwrap()}function Ag(m){return sc(m)}function sc(m){const{_tokenResponse:l}=m instanceof q.g?m.customData:m;if(!l)return null;if(!(m instanceof q.g)&&"temporaryProof"in l&&"phoneNumber"in l)return ju.credentialFromResult(m);const h=l.providerId;if(!h||h===be.PASSWORD)return null;let y;switch(h){case be.GOOGLE:y=Is;break;case be.FACEBOOK:y=Sn;break;case be.GITHUB:y=Vr;break;case be.TWITTER:y=Us;break;default:const{oauthIdToken:M,oauthAccessToken:B,oauthTokenSecret:ie,pendingToken:Ee,nonce:ze}=l;return B||ie||M||Ee?Ee?h.startsWith("saml.")?Wr._create(h,Ee):sn._fromParams({providerId:h,signInMethod:h,pendingToken:Ee,idToken:M,accessToken:B}):new nr(h).credential({idToken:M,accessToken:B,rawNonce:ze}):null}return m instanceof q.g?y.credentialFromError(m):y.credentialFromResult(m)}function Ri(m,l){return l.catch(h=>{throw h instanceof q.g&&function Qf(m,l){var h;const y=null===(h=l.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new ad(m,function Ll(m,l){var h;const y=(0,q.Ku)(m),M=l;return je(l.customData.operationType,y,"argument-error"),je(null===(h=M.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,y,"argument-error"),bs._fromError(y,M)}(m,l));else if(y){const M=sc(l),B=l;M&&(B.credential=M,B.tenantId=y.tenantId||void 0,B.email=y.email||void 0,B.phoneNumber=y.phoneNumber||void 0)}}(m,h),h}).then(h=>{const M=h.user;return{operationType:h.operationType,credential:Ag(h),additionalUserInfo:Zi(h),user:pi.getOrCreate(M)}})}function _o(m,l){return gu.apply(this,arguments)}function gu(){return(gu=(0,I.A)(function*(m,l){const h=yield l;return{verificationId:h.verificationId,confirm:y=>Ri(m,h.confirm(y))}})).apply(this,arguments)}class ad{constructor(l,h){this.resolver=h,this.auth=function qf(m){return m.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return Ri(Kf(this.auth),this.resolver.resolveSignIn(l))}}class pi{constructor(l){this._delegate=l,this.multiFactor=function ku(m){const l=(0,q.Ku)(m);return jn.has(l)||jn.set(l,Cc._fromUser(l)),jn.get(l)}(l)}static getOrCreate(l){return pi.USER_MAP.has(l)||pi.USER_MAP.set(l,new pi(l)),pi.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var h=this;return(0,I.A)(function*(){return Ri(h.auth,Oi(h._delegate,l))})()}linkWithPhoneNumber(l,h){var y=this;return(0,I.A)(function*(){return _o(y.auth,function Nc(m,l,h){return Bu.apply(this,arguments)}(y._delegate,l,h))})()}linkWithPopup(l){var h=this;return(0,I.A)(function*(){return Ri(h.auth,function Oc(m,l,h){return Cf.apply(this,arguments)}(h._delegate,l,qo))})()}linkWithRedirect(l){var h=this;return(0,I.A)(function*(){return yield ai(vn(h.auth)),gg(h._delegate,l,qo)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var h=this;return(0,I.A)(function*(){return Ri(h.auth,Rn(h._delegate,l))})()}reauthenticateWithPhoneNumber(l,h){return _o(this.auth,function nh(m,l,h){return Ea.apply(this,arguments)}(this._delegate,l,h))}reauthenticateWithPopup(l){return Ri(this.auth,function Hu(m,l,h){return _s.apply(this,arguments)}(this._delegate,l,qo))}reauthenticateWithRedirect(l){var h=this;return(0,I.A)(function*(){return yield ai(vn(h.auth)),Fc(h._delegate,l,qo)})()}sendEmailVerification(l){return function P(m,l){return F.apply(this,arguments)}(this._delegate,l)}unlink(l){var h=this;return(0,I.A)(function*(){return yield function Ml(m,l){return Ic.apply(this,arguments)}(h._delegate,l),h})()}updateEmail(l){return function Fn(m,l){const h=(0,q.Ku)(m);return(0,ae._isFirebaseServerApp)(h.auth.app)?Promise.reject(Qe(h.auth)):Kn(h,l,null)}(this._delegate,l)}updatePassword(l){return function _n(m,l){return Kn((0,q.Ku)(m),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function ru(m,l){return fo.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Ln(m,l){return Mn.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,h){return function ee(m,l,h){return Oe.apply(this,arguments)}(this._delegate,l,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pi.USER_MAP=new WeakMap;const mu=je;let Ch=(()=>{class m{constructor(h,y){if(this.app=h,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=h.options;mu(M,"invalid-api-key",{appName:h.name}),mu(M,"invalid-api-key",{appName:h.name});const B=typeof window<"u"?qo:void 0;this._delegate=y.initialize({options:{persistence:ud(M,h.name),popupRedirectResolver:B}}),this._delegate._updateErrorMap(at),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,y){!function za(m,l,h){const y=vn(m);je(y._canInitEmulator,y,"emulator-config-failed"),je(/^https?:\/\//.test(l),y,"invalid-emulator-scheme");const M=!!h?.disableWarnings,B=So(l),{host:ie,port:Ee}=function oa(m){const l=So(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(l.length));if(!h)return{host:"",port:null};const y=h[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const B=M[1];return{host:B,port:Mu(y.substr(B.length+1))}}{const[B,ie]=y.split(":");return{host:B,port:Mu(ie)}}}(l);y.config.emulator={url:`${B}//${ie}${null===Ee?"":`:${Ee}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:ie,port:Ee,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Nu(){function m(){const l=document.createElement("p"),h=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,y)}applyActionCode(h){return function js(m,l){return As.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Xa(this._delegate,h)}confirmPasswordReset(h,y){return function Ya(m,l,h){return uo.apply(this,arguments)}(this._delegate,h,y)}createUserWithEmailAndPassword(h,y){var M=this;return(0,I.A)(function*(){return Ri(M._delegate,function co(m,l,h){return Lo.apply(this,arguments)}(M._delegate,h,y))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function A(m,l){return V.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function wc(m,l){const h=Qi.parseLink(l);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,I.A)(function*(){mu(od(),h._delegate,"operation-not-supported-in-this-environment");const y=yield function Vc(m,l){return lh.apply(this,arguments)}(h._delegate,qo);return y?Ri(h._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Hf(m,l){vn(m)._logFramework(l)}(this._delegate,h)}onAuthStateChanged(h,y,M){const{next:B,error:ie,complete:Ee}=Jc(h,y,M);return this._delegate.onAuthStateChanged(B,ie,Ee)}onIdTokenChanged(h,y,M){const{next:B,error:ie,complete:Ee}=Jc(h,y,M);return this._delegate.onIdTokenChanged(B,ie,Ee)}sendSignInLinkToEmail(h,y){return function Ou(m,l,h){return bi.apply(this,arguments)}(this._delegate,h,y)}sendPasswordResetEmail(h,y){return function Tc(m,l,h){return da.apply(this,arguments)}(this._delegate,h,y||void 0)}setPersistence(h){var y=this;return(0,I.A)(function*(){let M;switch(function Dh(m,l){pu(Object.values(Ir).includes(l),m,"invalid-persistence-type"),(0,q.lV)()?pu(l!==Ir.SESSION,m,"unsupported-persistence-type"):(0,q.Ll)()?pu(l===Ir.NONE,m,"unsupported-persistence-type"):Yc()?pu(l===Ir.NONE||l===Ir.LOCAL&&(0,q.zW)(),m,"unsupported-persistence-type"):pu(l===Ir.NONE||nc(),m,"unsupported-persistence-type")}(y._delegate,h),h){case Ir.SESSION:M=di;break;case Ir.LOCAL:M=(yield dt(v)._isAvailable())?v:Vo;break;case Ir.NONE:M=vt;break;default:return Ge("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Ri(this._delegate,function Pl(m){return ua.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Ri(this._delegate,ca(this._delegate,h))}signInWithCustomToken(h){return Ri(this._delegate,function Qa(m,l){return No.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,y){return Ri(this._delegate,function Nl(m,l,h){return(0,ae._isFirebaseServerApp)(m.app)?Promise.reject(Qe(m)):ca((0,q.Ku)(m),yi.credential(l,h)).catch(function(){var y=(0,I.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&xo(m),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,h,y))}signInWithEmailLink(h,y){return Ri(this._delegate,function $s(m,l,h){return Ja.apply(this,arguments)}(this._delegate,h,y))}signInWithPhoneNumber(h,y){return _o(this._delegate,function Af(m,l,h){return tu.apply(this,arguments)}(this._delegate,h,y))}signInWithPopup(h){var y=this;return(0,I.A)(function*(){return mu(od(),y._delegate,"operation-not-supported-in-this-environment"),Ri(y._delegate,function $u(m,l,h){return ih.apply(this,arguments)}(y._delegate,h,qo))})()}signInWithRedirect(h){var y=this;return(0,I.A)(function*(){return mu(od(),y._delegate,"operation-not-supported-in-this-environment"),yield ai(y._delegate),ah(y._delegate,h,qo)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Oo(m,l){return ko.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Ir,m})();function Jc(m,l,h){let y=m;"function"!=typeof m&&({next:y,error:l,complete:h}=m);const M=y;return{next:ie=>M(ie&&pi.getOrCreate(ie)),error:l,complete:h}}function ud(m,l){const h=function ic(m,l){const h=Xc();if(!h)return[];const y=mt(fi,m,l);switch(h.getItem(y)){case Ir.NONE:return[vt];case Ir.LOCAL:return[v,di];case Ir.SESSION:return[di];default:return[]}}(m,l);if(typeof self<"u"&&!h.includes(v)&&h.push(v),typeof window<"u")for(const y of[Vo,di])h.includes(y)||h.push(y);return h.includes(vt)||h.push(vt),h}class Xs{constructor(){this.providerId="phone",this._delegate=new ju(Kf(Y.A.auth()))}static credential(l,h){return ju.credential(l,h)}verifyPhoneNumber(l,h){return this._delegate.verifyPhoneNumber(l,h)}unwrap(){return this._delegate}}Xs.PHONE_SIGN_IN_METHOD=ju.PHONE_SIGN_IN_METHOD,Xs.PROVIDER_ID=ju.PROVIDER_ID;const _u=je;class cd{constructor(l,h,y=Y.A.app()){var M;_u(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new th(y.auth(),l,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function bh(m){m.INTERNAL.registerComponent(new _e.uA("auth-compat",l=>{const h=l.getProvider("app-compat").getImmediate(),y=l.getProvider("auth");return new Ch(h,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yi,FacebookAuthProvider:Sn,GithubAuthProvider:Vr,GoogleAuthProvider:Is,OAuthProvider:nr,SAMLAuthProvider:Vs,PhoneAuthProvider:Xs,PhoneMultiFactorGenerator:zl,RecaptchaVerifier:cd,TwitterAuthProvider:Us,Auth:Ch,AuthCredential:xs,Error:q.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.14")}(Y.A)},467:(Rt,Be,U)=>{function I(ae,q,X,de,_e,$e,be){try{var Z=ae[$e](be),ne=Z.value}catch(pe){return void X(pe)}Z.done?q(ne):Promise.resolve(ne).then(de,_e)}function Y(ae){return function(){var q=this,X=arguments;return new Promise(function(de,_e){var $e=ae.apply(q,X);function be(ne){I($e,de,_e,be,Z,"next",ne)}function Z(ne){I($e,de,_e,be,Z,"throw",ne)}be(void 0)})}}U.d(Be,{A:()=>Y})},1635:(Rt,Be,U)=>{function q(he,we){var Le={};for(var Ne in he)Object.prototype.hasOwnProperty.call(he,Ne)&&we.indexOf(Ne)<0&&(Le[Ne]=he[Ne]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var tt=0;for(Ne=Object.getOwnPropertySymbols(he);tt<Ne.length;tt++)we.indexOf(Ne[tt])<0&&Object.prototype.propertyIsEnumerable.call(he,Ne[tt])&&(Le[Ne[tt]]=he[Ne[tt]])}return Le}function pe(he,we,Le,Ne){return new(Le||(Le=Promise))(function(Ye,ue){function yt(Mt){try{Ut(Ne.next(Mt))}catch(tn){ue(tn)}}function mr(Mt){try{Ut(Ne.throw(Mt))}catch(tn){ue(tn)}}function Ut(Mt){Mt.done?Ye(Mt.value):function tt(Ye){return Ye instanceof Le?Ye:new Le(function(ue){ue(Ye)})}(Mt.value).then(yt,mr)}Ut((Ne=Ne.apply(he,we||[])).next())})}function Ae(he){return this instanceof Ae?(this.v=he,this):new Ae(he)}function Ge(he,we,Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,Ne=Le.apply(he,we||[]),Ye=[];return tt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),yt("next"),yt("throw"),yt("return",function ue(gn){return function(ir){return Promise.resolve(ir).then(gn,tn)}}),tt[Symbol.asyncIterator]=function(){return this},tt;function yt(gn,ir){Ne[gn]&&(tt[gn]=function(Dn){return new Promise(function(Nt,Er){Ye.push([gn,Dn,Nt,Er])>1||mr(gn,Dn)})},ir&&(tt[gn]=ir(tt[gn])))}function mr(gn,ir){try{!function Ut(gn){gn.value instanceof Ae?Promise.resolve(gn.value.v).then(Mt,tn):$r(Ye[0][2],gn)}(Ne[gn](ir))}catch(Dn){$r(Ye[0][3],Dn)}}function Mt(gn){mr("next",gn)}function tn(gn){mr("throw",gn)}function $r(gn,ir){gn(ir),Ye.shift(),Ye.length&&mr(Ye[0][0],Ye[0][1])}}function et(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,we=he[Symbol.asyncIterator];return we?we.call(he):(he=function We(he){var we="function"==typeof Symbol&&Symbol.iterator,Le=we&&he[we],Ne=0;if(Le)return Le.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ne>=he.length&&(he=void 0),{value:he&&he[Ne++],done:!he}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),Le={},Ne("next"),Ne("throw"),Ne("return"),Le[Symbol.asyncIterator]=function(){return this},Le);function Ne(Ye){Le[Ye]=he[Ye]&&function(ue){return new Promise(function(yt,mr){!function tt(Ye,ue,yt,mr){Promise.resolve(mr).then(function(Ut){Ye({value:Ut,done:yt})},ue)}(yt,mr,(ue=he[Ye](ue)).done,ue.value)})}}}U.d(Be,{AQ:()=>Ge,N3:()=>Ae,Tt:()=>q,sH:()=>pe,xN:()=>et}),"function"==typeof SuppressedError&&SuppressedError}},Rt=>{Rt(Rt.s=2264)}]);