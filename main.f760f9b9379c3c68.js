"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[792],{1076:(Rt,Be,U)=>{U.d(Be,{Am:()=>an,Bd:()=>je,FA:()=>mt,Fy:()=>ke,I9:()=>Wt,Im:()=>qe,Ku:()=>ze,Ll:()=>wt,T9:()=>Te,Uj:()=>Se,XA:()=>Ke,ZQ:()=>Oe,bD:()=>Wr,c1:()=>on,cY:()=>ue,eX:()=>Ae,g:()=>ot,gR:()=>Ze,hp:()=>fr,jZ:()=>Je,lT:()=>Pt,lV:()=>Jn,mS:()=>Ye,nr:()=>pe,p7:()=>Ht,sr:()=>Jt,tD:()=>vr,u:()=>X,zW:()=>be,zw:()=>me});const Q=function(W){const k=[];let B=0;for(let ne=0;ne<W.length;ne++){let ae=W.charCodeAt(ne);ae<128?k[B++]=ae:ae<2048?(k[B++]=ae>>6|192,k[B++]=63&ae|128):55296==(64512&ae)&&ne+1<W.length&&56320==(64512&W.charCodeAt(ne+1))?(ae=65536+((1023&ae)<<10)+(1023&W.charCodeAt(++ne)),k[B++]=ae>>18|240,k[B++]=ae>>12&63|128,k[B++]=ae>>6&63|128,k[B++]=63&ae|128):(k[B++]=ae>>12|224,k[B++]=ae>>6&63|128,k[B++]=63&ae|128)}return k},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,k){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,ne=[];for(let ae=0;ae<W.length;ae+=3){const nt=W[ae],lt=ae+1<W.length,jt=lt?W[ae+1]:0,oe=ae+2<W.length,pn=oe?W[ae+2]:0;let Zr=(15&jt)<<2|pn>>6,pi=63&pn;oe||(pi=64,lt||(Zr=64)),ne.push(B[nt>>2],B[(3&nt)<<4|jt>>4],B[Zr],B[pi])}return ne.join("")},encodeString(W,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(W):this.encodeByteArray(Q(W),k)},decodeString(W,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(W):function(W){const k=[];let B=0,ne=0;for(;B<W.length;){const ae=W[B++];if(ae<128)k[ne++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const nt=W[B++];k[ne++]=String.fromCharCode((31&ae)<<6|63&nt)}else if(ae>239&&ae<365){const oe=((7&ae)<<18|(63&W[B++])<<12|(63&W[B++])<<6|63&W[B++])-65536;k[ne++]=String.fromCharCode(55296+(oe>>10)),k[ne++]=String.fromCharCode(56320+(1023&oe))}else{const nt=W[B++],lt=W[B++];k[ne++]=String.fromCharCode((15&ae)<<12|(63&nt)<<6|63&lt)}}return k.join("")}(this.decodeStringToByteArray(W,k))},decodeStringToByteArray(W,k){this.init_();const B=k?this.charToByteMapWebSafe_:this.charToByteMap_,ne=[];for(let ae=0;ae<W.length;){const nt=B[W.charAt(ae++)],jt=ae<W.length?B[W.charAt(ae)]:0;++ae;const pn=ae<W.length?B[W.charAt(ae)]:64;++ae;const cn=ae<W.length?B[W.charAt(ae)]:64;if(++ae,null==nt||null==jt||null==pn||null==cn)throw new ve;ne.push(nt<<2|jt>>4),64!==pn&&(ne.push(jt<<4&240|pn>>2),64!==cn&&ne.push(pn<<6&192|cn))}return ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(W){return function(W){const k=Q(W);return de.encodeByteArray(k,!0)}(W).replace(/\./g,"")},X=function(W){try{return de.decodeString(W,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function me(W,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return k}for(const B in k)!k.hasOwnProperty(B)||!tt(B)||(W[B]=me(W[B],k[B]));return W}function tt(W){return"__proto__"!==W}function Ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const dt=()=>{try{return Ye().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=W&&X(W[1]);return k&&JSON.parse(k)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},Te=()=>{var W;return null===(W=dt())||void 0===W?void 0:W.config},Ke=W=>{var k;return null===(k=dt())||void 0===k?void 0:k[`_${W}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,B)=>{this.resolve=k,this.reject=B})}wrapCallback(k){return(B,ne)=>{B?this.reject(B):this.resolve(ne),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(B):k(B,ne))}}}function ke(W,k){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ne=k||"demo-project",ae=W.iat||0,nt=W.sub||W.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${ne}`,aud:ne,iat:ae,exp:ae+3600,auth_time:ae,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},W);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(lt)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function wt(){var W;const k=null===(W=dt())||void 0===W?void 0:W.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return typeof window<"u"||Ht()}function Ht(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function on(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Jt(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Jn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pt(){const W=Oe();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function pe(){return!wt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"==typeof indexedDB}catch{return!1}}function Ae(){return new Promise((W,k)=>{try{let B=!0;const ne="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(ne);ae.onsuccess=()=>{ae.result.close(),B||self.indexedDB.deleteDatabase(ne),W(!0)},ae.onupgradeneeded=()=>{B=!1},ae.onerror=()=>{var nt;k((null===(nt=ae.error)||void 0===nt?void 0:nt.message)||"")}}catch(B){k(B)}})}class ot extends Error{constructor(k,B,ne){super(B),this.code=k,this.customData=ne,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mt.prototype.create)}}class mt{constructor(k,B,ne){this.service=k,this.serviceName=B,this.errors=ne}create(k,...B){const ne=B[0]||{},ae=`${this.service}/${k}`,nt=this.errors[k],lt=nt?function $n(W,k){return W.replace(zt,(B,ne)=>{const ae=k[ne];return null!=ae?String(ae):`<${ne}?>`})}(nt,ne):"Error";return new ot(ae,`${this.serviceName}: ${lt} (${ae}).`,ne)}}const zt=/\{\$([^}]+)}/g;function Ze(W,k){return Object.prototype.hasOwnProperty.call(W,k)}function qe(W){for(const k in W)if(Object.prototype.hasOwnProperty.call(W,k))return!1;return!0}function Wr(W,k){if(W===k)return!0;const B=Object.keys(W),ne=Object.keys(k);for(const ae of B){if(!ne.includes(ae))return!1;const nt=W[ae],lt=k[ae];if(ir(nt)&&ir(lt)){if(!Wr(nt,lt))return!1}else if(nt!==lt)return!1}for(const ae of ne)if(!B.includes(ae))return!1;return!0}function ir(W){return null!==W&&"object"==typeof W}function an(W){const k=[];for(const[B,ne]of Object.entries(W))Array.isArray(ne)?ne.forEach(ae=>{k.push(encodeURIComponent(B)+"="+encodeURIComponent(ae))}):k.push(encodeURIComponent(B)+"="+encodeURIComponent(ne));return k.length?"&"+k.join("&"):""}function Wt(W){const k={};return W.replace(/^\?/,"").split("&").forEach(ne=>{if(ne){const[ae,nt]=ne.split("=");k[decodeURIComponent(ae)]=decodeURIComponent(nt)}}),k}function fr(W){const k=W.indexOf("?");if(!k)return"";const B=W.indexOf("#",k);return W.substring(k,B>0?B:void 0)}function vr(W,k){const B=new bn(W,k);return B.subscribe.bind(B)}class bn{constructor(k,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{k(this)}).catch(ne=>{this.error(ne)})}next(k){this.forEachObserver(B=>{B.next(k)})}error(k){this.forEachObserver(B=>{B.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,B,ne){let ae;if(void 0===k&&void 0===B&&void 0===ne)throw new Error("Missing Observer.");ae=function to(W,k){if("object"!=typeof W||null===W)return!1;for(const B of k)if(B in W&&"function"==typeof W[B])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:B,complete:ne},void 0===ae.next&&(ae.next=at),void 0===ae.error&&(ae.error=at),void 0===ae.complete&&(ae.complete=at);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),nt}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,k)}sendOne(k,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{B(this.observers[k])}catch(ne){typeof console<"u"&&console.error&&console.error(ne)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function at(){}function ze(W){return W&&W._delegate?W._delegate:W}},4796:(Rt,Be,U)=>{U.d(Be,{u:()=>re});var v=U(7705),ee=U(1977);let re=(()=>{class Q{constructor(de){this.afAuth=de}signIn(de,ve){return this.afAuth.signInWithEmailAndPassword(de,ve).then(He=>He.user).catch(He=>{throw He})}signOut(){return this.afAuth.signOut()}isAuthenticated(){return this.afAuth.authState}static{this.\u0275fac=function(ve){return new(ve||Q)(v.KVO(ee.DS))}}static{this.\u0275prov=v.jDH({token:Q,factory:Q.\u0275fac,providedIn:"root"})}}return Q})()},2264:(Rt,Be,U)=>{var v=U(345),ee=U(9253),re=U(8079),Q=U(7841),G=U(7705);const de=[{path:"",children:[{path:"",loadChildren:()=>Promise.all([U.e(341),U.e(76),U.e(961)]).then(U.bind(U,4961)).then(ue=>ue.PublicModule)}]},{path:"private",children:[{path:"",loadChildren:()=>Promise.all([U.e(341),U.e(76),U.e(263)]).then(U.bind(U,6263)).then(ue=>ue.PrivateModule)}]},{path:"login",children:[{path:"",loadChildren:()=>Promise.all([U.e(341),U.e(0)]).then(U.bind(U,5e3)).then(ue=>ue.LoginModule)}]}];let ve=(()=>{class ue{static{this.\u0275fac=function(Je){return new(Je||ue)}}static{this.\u0275mod=G.$C({type:ue})}static{this.\u0275inj=G.G2t({imports:[Q.iI.forRoot(de),Q.iI]})}}return ue})();var He=U(4796),Se=U(177);const X=function(){return["/login/sign-in"]};function te(ue,ke){if(1&ue&&(G.j41(0,"a",3),G.EFF(1),G.nrm(2,"i",27),G.EFF(3," Log In"),G.k0s()),2&ue){const Oe=G.XpG();G.Y8G("routerLink",G.lJ4(2,X)),G.R7$(1),G.JRh(Oe.getAuthenticated())}}const me=function(){return["/private/profileEntry"]};function tt(ue,ke){1&ue&&(G.j41(0,"a",3),G.nrm(1,"i",28),G.EFF(2," Profile Entry"),G.k0s()),2&ue&&G.Y8G("routerLink",G.lJ4(1,me))}const Ye=function(){return["/private/profileList"]};function yt(ue,ke){1&ue&&(G.j41(0,"a",3),G.nrm(1,"i",29),G.EFF(2," Profile List"),G.k0s()),2&ue&&G.Y8G("routerLink",G.lJ4(1,Ye))}function st(ue,ke){if(1&ue){const Oe=G.RV6();G.j41(0,"a",21),G.bIt("click",function(){G.eBV(Oe);const wt=G.XpG();return G.Njj(wt.signOut())}),G.nrm(1,"i",30),G.EFF(2," Log Out"),G.k0s()}}const vt=function(){return["/"]};let dt=(()=>{class ue{constructor(Oe,Je){this.authService=Oe,this.router=Je,this.isAuthenticated=!1}goToLinkSection(Oe){this.router.navigateByUrl("/").then(()=>{this.scrollToSection(Oe)})}scrollToSection(Oe){setTimeout(()=>{const Je=document.getElementById(Oe);Je&&Je.scrollIntoView({behavior:"smooth"})},0)}getAuthenticated(){this.authService.isAuthenticated().subscribe(Oe=>{this.user=Oe,this.isAuthenticated=!!Oe})}signOut(){this.router.navigate(["/login"]),this.authService.signOut()}static{this.\u0275fac=function(Je){return new(Je||ue)(G.rXU(He.u),G.rXU(Q.Ix))}}static{this.\u0275cmp=G.VBU({type:ue,selectors:[["app-header"]],decls:45,vars:8,consts:[["id","header",1,"header","dark-background","d-flex","flex-column"],[1,"header-toggle","d-xl-none","bi","bi-list"],[1,"profile-img"],["href","javascript:void(0)",3,"routerLink"],["src","assets/img/my-profile-img.jpg","alt","",1,"img-fluid","rounded-circle"],["href","javascript:void(0)",1,"logo","d-flex","align-items-center","justify-content-center",3,"routerLink"],[1,"sitename"],[1,"social-links","text-center"],["href","javascript:void(0)",1,"twitter"],[1,"bi","bi-twitter-x"],["href","javascript:void(0)",1,"facebook"],[1,"bi","bi-facebook"],["href","javascript:void(0)",1,"instagram"],[1,"bi","bi-instagram"],["href","javascript:void(0)",1,"google-plus"],[1,"bi","bi-skype"],["href","javascript:void(0)",1,"linkedin"],[1,"bi","bi-linkedin"],["id","navmenu",1,"navmenu"],["href","javascript:void(0)",1,"active",3,"click"],[1,"bi","bi-house","navicon"],["href","javascript:void(0)",3,"click"],[1,"bi","bi-person","navicon"],[1,"bi","bi-file-earmark-text","navicon"],[1,"bi","bi-envelope","navicon"],["href","javascript:void(0)",3,"routerLink",4,"ngIf"],["href","javascript:void(0)",3,"click",4,"ngIf"],[1,"bi","bi-box-arrow-in-right","navicon"],[1,"pi","pi-user","navicon"],[1,"pi","pi-users","navicon"],[1,"bi","bi-door-open","navicon"]],template:function(Je,wt){1&Je&&(G.j41(0,"header",0),G.nrm(1,"i",1),G.j41(2,"div",2)(3,"a",3),G.nrm(4,"img",4),G.k0s()(),G.j41(5,"a",5)(6,"h1",6),G.EFF(7,"Tutul Chakma"),G.k0s()(),G.j41(8,"div",7)(9,"a",8),G.nrm(10,"i",9),G.k0s(),G.j41(11,"a",10),G.nrm(12,"i",11),G.k0s(),G.j41(13,"a",12),G.nrm(14,"i",13),G.k0s(),G.j41(15,"a",14),G.nrm(16,"i",15),G.k0s(),G.j41(17,"a",16),G.nrm(18,"i",17),G.k0s()(),G.j41(19,"nav",18)(20,"ul")(21,"li")(22,"a",19),G.bIt("click",function(){return wt.goToLinkSection("hero")}),G.nrm(23,"i",20),G.EFF(24,"Home"),G.k0s()(),G.j41(25,"li")(26,"a",21),G.bIt("click",function(){return wt.goToLinkSection("about")}),G.nrm(27,"i",22),G.EFF(28," About"),G.k0s()(),G.j41(29,"li")(30,"a",21),G.bIt("click",function(){return wt.goToLinkSection("resume")}),G.nrm(31,"i",23),G.EFF(32," Resume"),G.k0s()(),G.j41(33,"li")(34,"a",21),G.bIt("click",function(){return wt.goToLinkSection("contact")}),G.nrm(35,"i",24),G.EFF(36," Contact"),G.k0s()(),G.j41(37,"li"),G.DNE(38,te,4,3,"a",25),G.k0s(),G.j41(39,"li"),G.DNE(40,tt,3,2,"a",25),G.k0s(),G.j41(41,"li"),G.DNE(42,yt,3,2,"a",25),G.k0s(),G.j41(43,"li"),G.DNE(44,st,3,0,"a",26),G.k0s()()()()),2&Je&&(G.R7$(3),G.Y8G("routerLink",G.lJ4(6,vt)),G.R7$(2),G.Y8G("routerLink",G.lJ4(7,vt)),G.R7$(33),G.Y8G("ngIf",!wt.isAuthenticated),G.R7$(2),G.Y8G("ngIf",wt.isAuthenticated),G.R7$(2),G.Y8G("ngIf",wt.isAuthenticated),G.R7$(2),G.Y8G("ngIf",wt.isAuthenticated))},dependencies:[Se.bT,Q.Wk]})}}return ue})(),Vt=(()=>{class ue{static{this.\u0275fac=function(Je){return new(Je||ue)}}static{this.\u0275cmp=G.VBU({type:ue,selectors:[["app-footer"]],decls:6,vars:0,consts:[["id","footer",1,"footer","position-relative","light-background"],[1,"container"],[1,"credits"],["href","https://github.com/Tutul33","target","_blank"]],template:function(Je,wt){1&Je&&(G.j41(0,"footer",0)(1,"div",1)(2,"div",2),G.EFF(3," Developed by "),G.j41(4,"a",3),G.EFF(5,"Tutul Chakma"),G.k0s()()()())}})}}return ue})(),_e=(()=>{class ue{constructor(){this.title="Tutul Chakma - iProfile"}ngOnInit(){this.initPreloader(),this.initScrollTopButton()}initPreloader(){const Oe=document.querySelector("#preloader");Oe&&window.addEventListener("load",()=>{Oe.remove()})}initScrollTopButton(){const Oe=document.querySelector(".scroll-top"),Je=()=>{Oe&&(window.scrollY>100?Oe.classList.add("active"):Oe.classList.remove("active"))};Oe?.addEventListener("click",wt=>{wt.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("load",Je),document.addEventListener("scroll",Je)}static{this.\u0275fac=function(Je){return new(Je||ue)}}static{this.\u0275cmp=G.VBU({type:ue,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"header"],[1,"main"],["href","#","id","scroll-top",1,"scroll-top","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-arrow-up-short"],["id","preloader"]],template:function(Je,wt){1&Je&&(G.nrm(0,"app-header",0),G.j41(1,"main",1),G.nrm(2,"router-outlet"),G.k0s(),G.nrm(3,"app-footer"),G.j41(4,"a",2),G.nrm(5,"i",3),G.k0s(),G.nrm(6,"div",4))},dependencies:[Q.n3,dt,Vt]})}}return ue})();const Te_firebase={apiKey:"AIzaSyAxewJxIFqlKaI5lGvSOnqP8cBHZADh2v4",authDomain:"profilestore-87502.firebaseapp.com",projectId:"profilestore-87502",storageBucket:"profilestore-87502.appspot.com",messagingSenderId:"119648305117",appId:"1:119648305117:web:d3315294cffdaddf474034",measurementId:"G-TPLPTSR76Y"};let Ke=(()=>{class ue{static{this.\u0275fac=function(Je){return new(Je||ue)}}static{this.\u0275mod=G.$C({type:ue,bootstrap:[_e]})}static{this.\u0275inj=G.G2t({imports:[v.Bb,ve,ee.bf.initializeApp(Te_firebase),re.cM]})}}return ue})();v.sG().bootstrapModule(Ke).catch(ue=>console.error(ue))},4412:(Rt,Be,U)=>{U.d(Be,{t:()=>ee});var v=U(1413);class ee extends v.B{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const G=super._subscribe(Q);return!G.closed&&Q.next(this._value),G}getValue(){const{hasError:Q,thrownError:G,_value:de}=this;if(Q)throw G;return this._throwIfClosed(),de}next(Q){super.next(this._value=Q)}}},1985:(Rt,Be,U)=>{U.d(Be,{c:()=>He});var v=U(7707),ee=U(8359),re=U(3494),Q=U(1203),G=U(1026),de=U(8071),ve=U(9786);let He=(()=>{class me{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const yt=new me;return yt.source=this,yt.operator=Ye,yt}subscribe(Ye,yt,st){const vt=function te(me){return me&&me instanceof v.vU||function X(me){return me&&(0,de.T)(me.next)&&(0,de.T)(me.error)&&(0,de.T)(me.complete)}(me)&&(0,ee.Uv)(me)}(Ye)?Ye:new v.Ms(Ye,yt,st);return(0,ve.Y)(()=>{const{operator:dt,source:Vt}=this;vt.add(dt?dt.call(vt,Vt):Vt?this._subscribe(vt):this._trySubscribe(vt))}),vt}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(yt){Ye.error(yt)}}forEach(Ye,yt){return new(yt=Se(yt))((st,vt)=>{const dt=new v.Ms({next:Vt=>{try{Ye(Vt)}catch(_e){vt(_e),dt.unsubscribe()}},error:vt,complete:st});this.subscribe(dt)})}_subscribe(Ye){var yt;return null===(yt=this.source)||void 0===yt?void 0:yt.subscribe(Ye)}[re.s](){return this}pipe(...Ye){return(0,Q.m)(Ye)(this)}toPromise(Ye){return new(Ye=Se(Ye))((yt,st)=>{let vt;this.subscribe(dt=>vt=dt,dt=>st(dt),()=>yt(vt))})}}return me.create=tt=>new me(tt),me})();function Se(me){var tt;return null!==(tt=me??G.$.Promise)&&void 0!==tt?tt:Promise}},1413:(Rt,Be,U)=>{U.d(Be,{B:()=>ve});var v=U(1985),ee=U(8359);const Q=(0,U(1853).L)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var G=U(7908),de=U(9786);let ve=(()=>{class Se extends v.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const me=new He(this,this);return me.operator=te,me}_throwIfClosed(){if(this.closed)throw new Q}next(te){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(te)}})}error(te){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:me}=this;for(;me.length;)me.shift().error(te)}})}complete(){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:me,isStopped:tt,observers:Ye}=this;return me||tt?ee.Kn:(this.currentObservers=null,Ye.push(te),new ee.yU(()=>{this.currentObservers=null,(0,G.o)(Ye,te)}))}_checkFinalizedStatuses(te){const{hasError:me,thrownError:tt,isStopped:Ye}=this;me?te.error(tt):Ye&&te.complete()}asObservable(){const te=new v.c;return te.source=this,te}}return Se.create=(X,te)=>new He(X,te),Se})();class He extends ve{constructor(X,te){super(),this.destination=X,this.source=te}next(X){var te,me;null===(me=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===me||me.call(te,X)}error(X){var te,me;null===(me=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===me||me.call(te,X)}complete(){var X,te;null===(te=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===te||te.call(X)}_subscribe(X){var te,me;return null!==(me=null===(te=this.source)||void 0===te?void 0:te.subscribe(X))&&void 0!==me?me:ee.Kn}}},7707:(Rt,Be,U)=>{U.d(Be,{Ms:()=>st,vU:()=>me});var v=U(8071),ee=U(8359),re=U(1026),Q=U(5334),G=U(5343);const de=Se("C",void 0,void 0);function Se(Te,Ke,ue){return{kind:Te,value:Ke,error:ue}}var X=U(9270),te=U(9786);class me extends ee.yU{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,ee.Uv)(Ke)&&Ke.add(this)):this.destination=_e}static create(Ke,ue,ke){return new st(Ke,ue,ke)}next(Ke){this.isStopped?Vt(function He(Te){return Se("N",Te,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?Vt(function ve(Te){return Se("E",void 0,Te)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?Vt(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function Ye(Te,Ke){return tt.call(Te,Ke)}class yt{constructor(Ke){this.partialObserver=Ke}next(Ke){const{partialObserver:ue}=this;if(ue.next)try{ue.next(Ke)}catch(ke){vt(ke)}}error(Ke){const{partialObserver:ue}=this;if(ue.error)try{ue.error(Ke)}catch(ke){vt(ke)}else vt(Ke)}complete(){const{partialObserver:Ke}=this;if(Ke.complete)try{Ke.complete()}catch(ue){vt(ue)}}}class st extends me{constructor(Ke,ue,ke){let Oe;if(super(),(0,v.T)(Ke)||!Ke)Oe={next:Ke??void 0,error:ue??void 0,complete:ke??void 0};else{let Je;this&&re.$.useDeprecatedNextContext?(Je=Object.create(Ke),Je.unsubscribe=()=>this.unsubscribe(),Oe={next:Ke.next&&Ye(Ke.next,Je),error:Ke.error&&Ye(Ke.error,Je),complete:Ke.complete&&Ye(Ke.complete,Je)}):Oe=Ke}this.destination=new yt(Oe)}}function vt(Te){re.$.useDeprecatedSynchronousErrorHandling?(0,te.l)(Te):(0,Q.m)(Te)}function Vt(Te,Ke){const{onStoppedNotification:ue}=re.$;ue&&X.f.setTimeout(()=>ue(Te,Ke))}const _e={closed:!0,next:G.l,error:function dt(Te){throw Te},complete:G.l}},8359:(Rt,Be,U)=>{U.d(Be,{Kn:()=>de,yU:()=>G,Uv:()=>ve});var v=U(8071);const re=(0,U(1853).L)(Se=>function(te){Se(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((me,tt)=>`${tt+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var Q=U(7908);class G{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const Ye of te)Ye.remove(this);else te.remove(this);const{initialTeardown:me}=this;if((0,v.T)(me))try{me()}catch(Ye){X=Ye instanceof re?Ye.errors:[Ye]}const{_finalizers:tt}=this;if(tt){this._finalizers=null;for(const Ye of tt)try{He(Ye)}catch(yt){X=X??[],yt instanceof re?X=[...X,...yt.errors]:X.push(yt)}}if(X)throw new re(X)}}add(X){var te;if(X&&X!==this)if(this.closed)He(X);else{if(X instanceof G){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(X)}}_hasParent(X){const{_parentage:te}=this;return te===X||Array.isArray(te)&&te.includes(X)}_addParent(X){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(X),te):te?[te,X]:X}_removeParent(X){const{_parentage:te}=this;te===X?this._parentage=null:Array.isArray(te)&&(0,Q.o)(te,X)}remove(X){const{_finalizers:te}=this;te&&(0,Q.o)(te,X),X instanceof G&&X._removeParent(this)}}G.EMPTY=(()=>{const Se=new G;return Se.closed=!0,Se})();const de=G.EMPTY;function ve(Se){return Se instanceof G||Se&&"closed"in Se&&(0,v.T)(Se.remove)&&(0,v.T)(Se.add)&&(0,v.T)(Se.unsubscribe)}function He(Se){(0,v.T)(Se)?Se():Se.unsubscribe()}},1026:(Rt,Be,U)=>{U.d(Be,{$:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(Rt,Be,U)=>{U.d(Be,{x:()=>G});var v=U(6365),re=U(3794),Q=U(8455);function G(...de){return function ee(){return(0,v.U)(1)}()((0,Q.H)(de,(0,re.lI)(de)))}},983:(Rt,Be,U)=>{U.d(Be,{w:()=>ee});const ee=new(U(1985).c)(G=>G.complete())},8455:(Rt,Be,U)=>{U.d(Be,{H:()=>Ke});var v=U(8750),ee=U(941),re=U(6745),de=U(1985),He=U(4761),Se=U(8071),X=U(5225);function me(ue,ke){if(!ue)throw new Error("Iterable cannot be null");return new de.c(Oe=>{(0,X.N)(Oe,ke,()=>{const Je=ue[Symbol.asyncIterator]();(0,X.N)(Oe,ke,()=>{Je.next().then(wt=>{wt.done?Oe.complete():Oe.next(wt.value)})},0,!0)})})}var tt=U(5055),Ye=U(9858),yt=U(7441),st=U(5397),vt=U(7953),dt=U(591),Vt=U(5196);function Ke(ue,ke){return ke?function Te(ue,ke){if(null!=ue){if((0,tt.l)(ue))return function Q(ue,ke){return(0,v.Tg)(ue).pipe((0,re._)(ke),(0,ee.Q)(ke))}(ue,ke);if((0,yt.X)(ue))return function ve(ue,ke){return new de.c(Oe=>{let Je=0;return ke.schedule(function(){Je===ue.length?Oe.complete():(Oe.next(ue[Je++]),Oe.closed||this.schedule())})})}(ue,ke);if((0,Ye.y)(ue))return function G(ue,ke){return(0,v.Tg)(ue).pipe((0,re._)(ke),(0,ee.Q)(ke))}(ue,ke);if((0,vt.T)(ue))return me(ue,ke);if((0,st.x)(ue))return function te(ue,ke){return new de.c(Oe=>{let Je;return(0,X.N)(Oe,ke,()=>{Je=ue[He.l](),(0,X.N)(Oe,ke,()=>{let wt,je;try{({value:wt,done:je}=Je.next())}catch(Ht){return void Oe.error(Ht)}je?Oe.complete():Oe.next(wt)},0,!0)}),()=>(0,Se.T)(Je?.return)&&Je.return()})}(ue,ke);if((0,Vt.U)(ue))return function _e(ue,ke){return me((0,Vt.C)(ue),ke)}(ue,ke)}throw(0,dt.L)(ue)}(ue,ke):(0,v.Tg)(ue)}},8750:(Rt,Be,U)=>{U.d(Be,{Tg:()=>tt});var v=U(1635),ee=U(7441),re=U(9858),Q=U(1985),G=U(5055),de=U(7953),ve=U(591),He=U(5397),Se=U(5196),X=U(8071),te=U(5334),me=U(3494);function tt(Te){if(Te instanceof Q.c)return Te;if(null!=Te){if((0,G.l)(Te))return function Ye(Te){return new Q.c(Ke=>{const ue=Te[me.s]();if((0,X.T)(ue.subscribe))return ue.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ee.X)(Te))return function yt(Te){return new Q.c(Ke=>{for(let ue=0;ue<Te.length&&!Ke.closed;ue++)Ke.next(Te[ue]);Ke.complete()})}(Te);if((0,re.y)(Te))return function st(Te){return new Q.c(Ke=>{Te.then(ue=>{Ke.closed||(Ke.next(ue),Ke.complete())},ue=>Ke.error(ue)).then(null,te.m)})}(Te);if((0,de.T)(Te))return dt(Te);if((0,He.x)(Te))return function vt(Te){return new Q.c(Ke=>{for(const ue of Te)if(Ke.next(ue),Ke.closed)return;Ke.complete()})}(Te);if((0,Se.U)(Te))return function Vt(Te){return dt((0,Se.C)(Te))}(Te)}throw(0,ve.L)(Te)}function dt(Te){return new Q.c(Ke=>{(function _e(Te,Ke){var ue,ke,Oe,Je;return(0,v.sH)(this,void 0,void 0,function*(){try{for(ue=(0,v.xN)(Te);!(ke=yield ue.next()).done;)if(Ke.next(ke.value),Ke.closed)return}catch(wt){Oe={error:wt}}finally{try{ke&&!ke.done&&(Je=ue.return)&&(yield Je.call(ue))}finally{if(Oe)throw Oe.error}}Ke.complete()})})(Te,Ke).catch(ue=>Ke.error(ue))})}},7786:(Rt,Be,U)=>{U.d(Be,{h:()=>de});var v=U(6365),ee=U(8750),re=U(983),Q=U(3794),G=U(8455);function de(...ve){const He=(0,Q.lI)(ve),Se=(0,Q.R0)(ve,1/0),X=ve;return X.length?1===X.length?(0,ee.Tg)(X[0]):(0,v.U)(Se)((0,G.H)(X,He)):re.w}},7673:(Rt,Be,U)=>{U.d(Be,{of:()=>re});var v=U(3794),ee=U(8455);function re(...Q){const G=(0,v.lI)(Q);return(0,ee.H)(Q,G)}},4360:(Rt,Be,U)=>{U.d(Be,{_:()=>ee});var v=U(7707);function ee(Q,G,de,ve,He){return new re(Q,G,de,ve,He)}class re extends v.vU{constructor(G,de,ve,He,Se,X){super(G),this.onFinalize=Se,this.shouldUnsubscribe=X,this._next=de?function(te){try{de(te)}catch(me){G.error(me)}}:super._next,this._error=He?function(te){try{He(te)}catch(me){G.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(te){G.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var G;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(G=this.onFinalize)||void 0===G||G.call(this))}}}},9901:(Rt,Be,U)=>{U.d(Be,{U:()=>re});var v=U(9974),ee=U(4360);function re(Q){return(0,v.N)((G,de)=>{let ve=!1;G.subscribe((0,ee._)(de,He=>{ve=!0,de.next(He)},()=>{ve||de.next(Q),de.complete()}))})}},3294:(Rt,Be,U)=>{U.d(Be,{F:()=>Q});var v=U(3669),ee=U(9974),re=U(4360);function Q(de,ve=v.D){return de=de??G,(0,ee.N)((He,Se)=>{let X,te=!0;He.subscribe((0,re._)(Se,me=>{const tt=ve(me);(te||!de(X,tt))&&(te=!1,X=tt,Se.next(me))}))})}function G(de,ve){return de===ve}},5964:(Rt,Be,U)=>{U.d(Be,{p:()=>re});var v=U(9974),ee=U(4360);function re(Q,G){return(0,v.N)((de,ve)=>{let He=0;de.subscribe((0,ee._)(ve,Se=>Q.call(G,Se,He++)&&ve.next(Se)))})}},1594:(Rt,Be,U)=>{U.d(Be,{$:()=>ve});var v=U(9350),ee=U(5964),re=U(6697),Q=U(9901),G=U(3774),de=U(3669);function ve(He,Se){const X=arguments.length>=2;return te=>te.pipe(He?(0,ee.p)((me,tt)=>He(me,tt,te)):de.D,(0,re.s)(1),X?(0,Q.U)(Se):(0,G.v)(()=>new v.G))}},6354:(Rt,Be,U)=>{U.d(Be,{T:()=>re});var v=U(9974),ee=U(4360);function re(Q,G){return(0,v.N)((de,ve)=>{let He=0;de.subscribe((0,ee._)(ve,Se=>{ve.next(Q.call(G,Se,He++))}))})}},6365:(Rt,Be,U)=>{U.d(Be,{U:()=>re});var v=U(1397),ee=U(3669);function re(Q=1/0){return(0,v.Z)(ee.D,Q)}},1397:(Rt,Be,U)=>{U.d(Be,{Z:()=>He});var v=U(6354),ee=U(8750),re=U(9974),Q=U(5225),G=U(4360),ve=U(8071);function He(Se,X,te=1/0){return(0,ve.T)(X)?He((me,tt)=>(0,v.T)((Ye,yt)=>X(me,Ye,tt,yt))((0,ee.Tg)(Se(me,tt))),te):("number"==typeof X&&(te=X),(0,re.N)((me,tt)=>function de(Se,X,te,me,tt,Ye,yt,st){const vt=[];let dt=0,Vt=0,_e=!1;const Te=()=>{_e&&!vt.length&&!dt&&X.complete()},Ke=ke=>dt<me?ue(ke):vt.push(ke),ue=ke=>{Ye&&X.next(ke),dt++;let Oe=!1;(0,ee.Tg)(te(ke,Vt++)).subscribe((0,G._)(X,Je=>{tt?.(Je),Ye?Ke(Je):X.next(Je)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(dt--;vt.length&&dt<me;){const Je=vt.shift();yt?(0,Q.N)(X,yt,()=>ue(Je)):ue(Je)}Te()}catch(Je){X.error(Je)}}))};return Se.subscribe((0,G._)(X,Ke,()=>{_e=!0,Te()})),()=>{st?.()}}(me,tt,Se,te)))}},941:(Rt,Be,U)=>{U.d(Be,{Q:()=>Q});var v=U(5225),ee=U(9974),re=U(4360);function Q(G,de=0){return(0,ee.N)((ve,He)=>{ve.subscribe((0,re._)(He,Se=>(0,v.N)(He,G,()=>He.next(Se),de),()=>(0,v.N)(He,G,()=>He.complete(),de),Se=>(0,v.N)(He,G,()=>He.error(Se),de)))})}},2816:(Rt,Be,U)=>{U.d(Be,{S:()=>Q});var v=U(9974),ee=U(4360);function Q(G,de){return(0,v.N)(function re(G,de,ve,He,Se){return(X,te)=>{let me=ve,tt=de,Ye=0;X.subscribe((0,ee._)(te,yt=>{const st=Ye++;tt=me?G(tt,yt,st):(me=!0,yt),He&&te.next(tt)},Se&&(()=>{me&&te.next(tt),te.complete()})))}}(G,de,arguments.length>=2,!0))}},7647:(Rt,Be,U)=>{U.d(Be,{u:()=>G});var v=U(8750),ee=U(1413),re=U(7707),Q=U(9974);function G(ve={}){const{connector:He=(()=>new ee.B),resetOnError:Se=!0,resetOnComplete:X=!0,resetOnRefCountZero:te=!0}=ve;return me=>{let tt,Ye,yt,st=0,vt=!1,dt=!1;const Vt=()=>{Ye?.unsubscribe(),Ye=void 0},_e=()=>{Vt(),tt=yt=void 0,vt=dt=!1},Te=()=>{const Ke=tt;_e(),Ke?.unsubscribe()};return(0,Q.N)((Ke,ue)=>{st++,!dt&&!vt&&Vt();const ke=yt=yt??He();ue.add(()=>{st--,0===st&&!dt&&!vt&&(Ye=de(Te,te))}),ke.subscribe(ue),!tt&&st>0&&(tt=new re.Ms({next:Oe=>ke.next(Oe),error:Oe=>{dt=!0,Vt(),Ye=de(_e,Se,Oe),ke.error(Oe)},complete:()=>{vt=!0,Vt(),Ye=de(_e,X),ke.complete()}}),(0,v.Tg)(Ke).subscribe(tt))})(me)}}function de(ve,He,...Se){if(!0===He)return void ve();if(!1===He)return;const X=new re.Ms({next:()=>{X.unsubscribe(),ve()}});return(0,v.Tg)(He(...Se)).subscribe(X)}},9172:(Rt,Be,U)=>{U.d(Be,{Z:()=>Q});var v=U(8793),ee=U(3794),re=U(9974);function Q(...G){const de=(0,ee.lI)(G);return(0,re.N)((ve,He)=>{(de?(0,v.x)(G,ve,de):(0,v.x)(G,ve)).subscribe(He)})}},6745:(Rt,Be,U)=>{U.d(Be,{_:()=>ee});var v=U(9974);function ee(re,Q=0){return(0,v.N)((G,de)=>{de.add(re.schedule(()=>G.subscribe(de),Q))})}},5558:(Rt,Be,U)=>{U.d(Be,{n:()=>Q});var v=U(8750),ee=U(9974),re=U(4360);function Q(G,de){return(0,ee.N)((ve,He)=>{let Se=null,X=0,te=!1;const me=()=>te&&!Se&&He.complete();ve.subscribe((0,re._)(He,tt=>{Se?.unsubscribe();let Ye=0;const yt=X++;(0,v.Tg)(G(tt,yt)).subscribe(Se=(0,re._)(He,st=>He.next(de?de(tt,st,yt,Ye++):st),()=>{Se=null,me()}))},()=>{te=!0,me()}))})}},6697:(Rt,Be,U)=>{U.d(Be,{s:()=>Q});var v=U(983),ee=U(9974),re=U(4360);function Q(G){return G<=0?()=>v.w:(0,ee.N)((de,ve)=>{let He=0;de.subscribe((0,re._)(ve,Se=>{++He<=G&&(ve.next(Se),G<=He&&ve.complete())}))})}},8141:(Rt,Be,U)=>{U.d(Be,{M:()=>G});var v=U(8071),ee=U(9974),re=U(4360),Q=U(3669);function G(de,ve,He){const Se=(0,v.T)(de)||ve||He?{next:de,error:ve,complete:He}:de;return Se?(0,ee.N)((X,te)=>{var me;null===(me=Se.subscribe)||void 0===me||me.call(Se);let tt=!0;X.subscribe((0,re._)(te,Ye=>{var yt;null===(yt=Se.next)||void 0===yt||yt.call(Se,Ye),te.next(Ye)},()=>{var Ye;tt=!1,null===(Ye=Se.complete)||void 0===Ye||Ye.call(Se),te.complete()},Ye=>{var yt;tt=!1,null===(yt=Se.error)||void 0===yt||yt.call(Se,Ye),te.error(Ye)},()=>{var Ye,yt;tt&&(null===(Ye=Se.unsubscribe)||void 0===Ye||Ye.call(Se)),null===(yt=Se.finalize)||void 0===yt||yt.call(Se)}))}):Q.D}},3774:(Rt,Be,U)=>{U.d(Be,{v:()=>Q});var v=U(9350),ee=U(9974),re=U(4360);function Q(de=G){return(0,ee.N)((ve,He)=>{let Se=!1;ve.subscribe((0,re._)(He,X=>{Se=!0,He.next(X)},()=>Se?He.complete():He.error(de())))})}function G(){return new v.G}},6780:(Rt,Be,U)=>{U.d(Be,{R:()=>G});var v=U(8359);class ee extends v.yU{constructor(ve,He){super()}schedule(ve,He=0){return this}}const re={setInterval(de,ve,...He){const{delegate:Se}=re;return Se?.setInterval?Se.setInterval(de,ve,...He):setInterval(de,ve,...He)},clearInterval(de){const{delegate:ve}=re;return(ve?.clearInterval||clearInterval)(de)},delegate:void 0};var Q=U(7908);class G extends ee{constructor(ve,He){super(ve,He),this.scheduler=ve,this.work=He,this.pending=!1}schedule(ve,He=0){var Se;if(this.closed)return this;this.state=ve;const X=this.id,te=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(te,X,He)),this.pending=!0,this.delay=He,this.id=null!==(Se=this.id)&&void 0!==Se?Se:this.requestAsyncId(te,this.id,He),this}requestAsyncId(ve,He,Se=0){return re.setInterval(ve.flush.bind(ve,this),Se)}recycleAsyncId(ve,He,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return He;null!=He&&re.clearInterval(He)}execute(ve,He){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(ve,He);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,He){let X,Se=!1;try{this.work(ve)}catch(te){Se=!0,X=te||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:ve,scheduler:He}=this,{actions:Se}=He;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Q.o)(Se,this),null!=ve&&(this.id=this.recycleAsyncId(He,ve,null)),this.delay=null,super.unsubscribe()}}}},9687:(Rt,Be,U)=>{U.d(Be,{q:()=>re});var v=U(6129);class ee{constructor(G,de=ee.now){this.schedulerActionCtor=G,this.now=de}schedule(G,de=0,ve){return new this.schedulerActionCtor(this,G).schedule(ve,de)}}ee.now=v.U.now;class re extends ee{constructor(G,de=ee.now){super(G,de),this.actions=[],this._active=!1}flush(G){const{actions:de}=this;if(this._active)return void de.push(G);let ve;this._active=!0;do{if(ve=G.execute(G.state,G.delay))break}while(G=de.shift());if(this._active=!1,ve){for(;G=de.shift();)G.unsubscribe();throw ve}}}},3236:(Rt,Be,U)=>{U.d(Be,{E:()=>re});var v=U(6780);const re=new(U(9687).q)(v.R)},6129:(Rt,Be,U)=>{U.d(Be,{U:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},9270:(Rt,Be,U)=>{U.d(Be,{f:()=>v});const v={setTimeout(ee,re,...Q){const{delegate:G}=v;return G?.setTimeout?G.setTimeout(ee,re,...Q):setTimeout(ee,re,...Q)},clearTimeout(ee){const{delegate:re}=v;return(re?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4761:(Rt,Be,U)=>{U.d(Be,{l:()=>ee});const ee=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Rt,Be,U)=>{U.d(Be,{s:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Rt,Be,U)=>{U.d(Be,{G:()=>ee});const ee=(0,U(1853).L)(re=>function(){re(this),this.name="EmptyError",this.message="no elements in sequence"})},3794:(Rt,Be,U)=>{U.d(Be,{R0:()=>de,ms:()=>Q,lI:()=>G});var v=U(8071);function re(ve){return ve[ve.length-1]}function Q(ve){return(0,v.T)(re(ve))?ve.pop():void 0}function G(ve){return function ee(ve){return ve&&(0,v.T)(ve.schedule)}(re(ve))?ve.pop():void 0}function de(ve,He){return"number"==typeof re(ve)?ve.pop():He}},3073:(Rt,Be,U)=>{U.d(Be,{D:()=>G});const{isArray:v}=Array,{getPrototypeOf:ee,prototype:re,keys:Q}=Object;function G(ve){if(1===ve.length){const He=ve[0];if(v(He))return{args:He,keys:null};if(function de(ve){return ve&&"object"==typeof ve&&ee(ve)===re}(He)){const Se=Q(He);return{args:Se.map(X=>He[X]),keys:Se}}}return{args:ve,keys:null}}},7908:(Rt,Be,U)=>{function v(ee,re){if(ee){const Q=ee.indexOf(re);0<=Q&&ee.splice(Q,1)}}U.d(Be,{o:()=>v})},1853:(Rt,Be,U)=>{function v(ee){const Q=ee(G=>{Error.call(G),G.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}U.d(Be,{L:()=>v})},8496:(Rt,Be,U)=>{function v(ee,re){return ee.reduce((Q,G,de)=>(Q[G]=re[de],Q),{})}U.d(Be,{e:()=>v})},9786:(Rt,Be,U)=>{U.d(Be,{Y:()=>re,l:()=>Q});var v=U(1026);let ee=null;function re(G){if(v.$.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),G(),de){const{errorThrown:ve,error:He}=ee;if(ee=null,ve)throw He}}else G()}function Q(G){v.$.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=G)}},5225:(Rt,Be,U)=>{function v(ee,re,Q,G=0,de=!1){const ve=re.schedule(function(){Q(),de?ee.add(this.schedule(null,G)):this.unsubscribe()},G);if(ee.add(ve),!de)return ve}U.d(Be,{N:()=>v})},3669:(Rt,Be,U)=>{function v(ee){return ee}U.d(Be,{D:()=>v})},7441:(Rt,Be,U)=>{U.d(Be,{X:()=>v});const v=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},7953:(Rt,Be,U)=>{U.d(Be,{T:()=>ee});var v=U(8071);function ee(re){return Symbol.asyncIterator&&(0,v.T)(re?.[Symbol.asyncIterator])}},8071:(Rt,Be,U)=>{function v(ee){return"function"==typeof ee}U.d(Be,{T:()=>v})},5055:(Rt,Be,U)=>{U.d(Be,{l:()=>re});var v=U(3494),ee=U(8071);function re(Q){return(0,ee.T)(Q[v.s])}},5397:(Rt,Be,U)=>{U.d(Be,{x:()=>re});var v=U(4761),ee=U(8071);function re(Q){return(0,ee.T)(Q?.[v.l])}},9858:(Rt,Be,U)=>{U.d(Be,{y:()=>ee});var v=U(8071);function ee(re){return(0,v.T)(re?.then)}},5196:(Rt,Be,U)=>{U.d(Be,{C:()=>re,U:()=>Q});var v=U(1635),ee=U(8071);function re(G){return(0,v.AQ)(this,arguments,function*(){const ve=G.getReader();try{for(;;){const{value:He,done:Se}=yield(0,v.N3)(ve.read());if(Se)return yield(0,v.N3)(void 0);yield yield(0,v.N3)(He)}}finally{ve.releaseLock()}})}function Q(G){return(0,ee.T)(G?.getReader)}},9974:(Rt,Be,U)=>{U.d(Be,{N:()=>re,S:()=>ee});var v=U(8071);function ee(Q){return(0,v.T)(Q?.lift)}function re(Q){return G=>{if(ee(G))return G.lift(function(de){try{return Q(de,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Rt,Be,U)=>{U.d(Be,{I:()=>Q});var v=U(6354);const{isArray:ee}=Array;function Q(G){return(0,v.T)(de=>function re(G,de){return ee(de)?G(...de):G(de)}(G,de))}},5343:(Rt,Be,U)=>{function v(){}U.d(Be,{l:()=>v})},1203:(Rt,Be,U)=>{U.d(Be,{F:()=>ee,m:()=>re});var v=U(3669);function ee(...Q){return re(Q)}function re(Q){return 0===Q.length?v.D:1===Q.length?Q[0]:function(de){return Q.reduce((ve,He)=>He(ve),de)}}},5334:(Rt,Be,U)=>{U.d(Be,{m:()=>re});var v=U(1026),ee=U(9270);function re(Q){ee.f.setTimeout(()=>{const{onUnhandledError:G}=v.$;if(!G)throw Q;G(Q)})}},591:(Rt,Be,U)=>{function v(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Be,{L:()=>v})},177:(Rt,Be,U)=>{U.d(Be,{AJ:()=>Wn,B3:()=>ms,MD:()=>ts,N0:()=>oi,QT:()=>re,Sm:()=>yt,Sq:()=>Cn,T3:()=>es,UE:()=>bi,VF:()=>G,Vy:()=>mi,Xr:()=>Sr,YU:()=>nn,ZD:()=>Q,_b:()=>At,aZ:()=>vt,bT:()=>Au,fw:()=>st,hb:()=>tt,hj:()=>He,qQ:()=>de});var v=U(7705);let ee=null;function re(){return ee}function Q(A){ee||(ee=A)}class G{}const de=new v.nKC("DocumentToken");let ve=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=v.jDH({token:A,factory:function(){return(0,v.WQX)(Se)},providedIn:"platform"})}}return A})();const He=new v.nKC("Location Initialized");let Se=(()=>{class A extends ve{constructor(){super(),this._doc=(0,v.WQX)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return re().getBaseHref(this._doc)}onPopState(P){const F=re().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",P,!1),()=>F.removeEventListener("popstate",P)}onHashChange(P){const F=re().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",P,!1),()=>F.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,F,Z){this._history.pushState(P,F,Z)}replaceState(P,F,Z){this._history.replaceState(P,F,Z)}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=v.jDH({token:A,factory:function(){return new A},providedIn:"platform"})}}return A})();function X(A,V){if(0==A.length)return V;if(0==V.length)return A;let P=0;return A.endsWith("/")&&P++,V.startsWith("/")&&P++,2==P?A+V.substring(1):1==P?A+V:A+"/"+V}function te(A){const V=A.match(/#|\?|$/),P=V&&V.index||A.length;return A.slice(0,P-("/"===A[P-1]?1:0))+A.slice(P)}function me(A){return A&&"?"!==A[0]?"?"+A:A}let tt=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=v.jDH({token:A,factory:function(){return(0,v.WQX)(yt)},providedIn:"root"})}}return A})();const Ye=new v.nKC("appBaseHref");let yt=(()=>{class A extends tt{constructor(P,F){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=F??this._platformLocation.getBaseHrefFromDOM()??(0,v.WQX)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return X(this._baseHref,P)}path(P=!1){const F=this._platformLocation.pathname+me(this._platformLocation.search),Z=this._platformLocation.hash;return Z&&P?`${F}${Z}`:F}pushState(P,F,Z,Fe){const rt=this.prepareExternalUrl(Z+me(Fe));this._platformLocation.pushState(P,F,rt)}replaceState(P,F,Z,Fe){const rt=this.prepareExternalUrl(Z+me(Fe));this._platformLocation.replaceState(P,F,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(F){return new(F||A)(v.KVO(ve),v.KVO(Ye,8))}}static{this.\u0275prov=v.jDH({token:A,factory:A.\u0275fac,providedIn:"root"})}}return A})(),st=(()=>{class A extends tt{constructor(P,F){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let F=this._platformLocation.hash;return null==F&&(F="#"),F.length>0?F.substring(1):F}prepareExternalUrl(P){const F=X(this._baseHref,P);return F.length>0?"#"+F:F}pushState(P,F,Z,Fe){let rt=this.prepareExternalUrl(Z+me(Fe));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(P,F,rt)}replaceState(P,F,Z,Fe){let rt=this.prepareExternalUrl(Z+me(Fe));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(P,F,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(F){return new(F||A)(v.KVO(ve),v.KVO(Ye,8))}}static{this.\u0275prov=v.jDH({token:A,factory:A.\u0275fac})}}return A})(),vt=(()=>{class A{constructor(P){this._subject=new v.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const F=this._locationStrategy.getBaseHref();this._basePath=function Te(A){if(new RegExp("^(https?:)?//").test(A)){const[,P]=A.split(/\/\/[^\/]+/);return P}return A}(te(_e(F))),this._locationStrategy.onPopState(Z=>{this._subject.emit({url:this.path(!0),pop:!0,state:Z.state,type:Z.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,F=""){return this.path()==this.normalize(P+me(F))}normalize(P){return A.stripTrailingSlash(function Vt(A,V){if(!A||!V.startsWith(A))return V;const P=V.substring(A.length);return""===P||["/",";","?","#"].includes(P[0])?P:V}(this._basePath,_e(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,F="",Z=null){this._locationStrategy.pushState(Z,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+me(F)),Z)}replaceState(P,F="",Z=null){this._locationStrategy.replaceState(Z,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+me(F)),Z)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)})),()=>{const F=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(F,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",F){this._urlChangeListeners.forEach(Z=>Z(P,F))}subscribe(P,F,Z){return this._subject.subscribe({next:P,error:F,complete:Z})}static{this.normalizeQueryParams=me}static{this.joinWithSlash=X}static{this.stripTrailingSlash=te}static{this.\u0275fac=function(F){return new(F||A)(v.KVO(tt))}}static{this.\u0275prov=v.jDH({token:A,factory:function(){return function dt(){return new vt((0,v.KVO)(tt))}()},providedIn:"root"})}}return A})();function _e(A){return A.replace(/\/index.html$/,"")}function At(A,V){V=encodeURIComponent(V);for(const P of A.split(";")){const F=P.indexOf("="),[Z,Fe]=-1==F?[P,""]:[P.slice(0,F),P.slice(F+1)];if(Z.trim()===V)return decodeURIComponent(Fe)}return null}const Nt=/\s+/,Qt=[];let nn=(()=>{class A{constructor(P,F,Z,Fe){this._iterableDiffers=P,this._keyValueDiffers=F,this._ngEl=Z,this._renderer=Fe,this.initialClasses=Qt,this.stateMap=new Map}set klass(P){this.initialClasses=null!=P?P.trim().split(Nt):Qt}set ngClass(P){this.rawClass="string"==typeof P?P.trim().split(Nt):P}ngDoCheck(){for(const F of this.initialClasses)this._updateState(F,!0);const P=this.rawClass;if(Array.isArray(P)||P instanceof Set)for(const F of P)this._updateState(F,!0);else if(null!=P)for(const F of Object.keys(P))this._updateState(F,!!P[F]);this._applyStateDiff()}_updateState(P,F){const Z=this.stateMap.get(P);void 0!==Z?(Z.enabled!==F&&(Z.changed=!0,Z.enabled=F),Z.touched=!0):this.stateMap.set(P,{enabled:F,changed:!0,touched:!0})}_applyStateDiff(){for(const P of this.stateMap){const F=P[0],Z=P[1];Z.changed?(this._toggleClass(F,Z.enabled),Z.changed=!1):Z.touched||(Z.enabled&&this._toggleClass(F,!1),this.stateMap.delete(F)),Z.touched=!1}}_toggleClass(P,F){(P=P.trim()).length>0&&P.split(Nt).forEach(Z=>{F?this._renderer.addClass(this._ngEl.nativeElement,Z):this._renderer.removeClass(this._ngEl.nativeElement,Z)})}static{this.\u0275fac=function(F){return new(F||A)(v.rXU(v._q3),v.rXU(v.MKu),v.rXU(v.aKT),v.rXU(v.sFG))}}static{this.\u0275dir=v.FsC({type:A,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return A})();class Br{constructor(V,P,F,Z){this.$implicit=V,this.ngForOf=P,this.index=F,this.count=Z}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cn=(()=>{class A{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,F,Z){this._viewContainer=P,this._template=F,this._differs=Z,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const F=this._viewContainer;P.forEachOperation((Z,Fe,rt)=>{if(null==Z.previousIndex)F.createEmbeddedView(this._template,new Br(Z.item,this._ngForOf,-1,-1),null===rt?void 0:rt);else if(null==rt)F.remove(null===Fe?void 0:Fe);else if(null!==Fe){const kt=F.get(Fe);F.move(kt,rt),Us(kt,Z)}});for(let Z=0,Fe=F.length;Z<Fe;Z++){const kt=F.get(Z).context;kt.index=Z,kt.count=Fe,kt.ngForOf=this._ngForOf}P.forEachIdentityChange(Z=>{Us(F.get(Z.currentIndex),Z)})}static ngTemplateContextGuard(P,F){return!0}static{this.\u0275fac=function(F){return new(F||A)(v.rXU(v.c1b),v.rXU(v.C4Q),v.rXU(v._q3))}}static{this.\u0275dir=v.FsC({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return A})();function Us(A,V){A.context.$implicit=V.item}let Au=(()=>{class A{constructor(P,F){this._viewContainer=P,this._context=new no,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){Du("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){Du("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,F){return!0}static{this.\u0275fac=function(F){return new(F||A)(v.rXU(v.c1b),v.rXU(v.C4Q))}}static{this.\u0275dir=v.FsC({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return A})();class no{constructor(){this.$implicit=null,this.ngIf=null}}function Du(A,V){if(V&&!V.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,v.Tbb)(V)}'.`)}let ms=(()=>{class A{constructor(P,F,Z){this._ngEl=P,this._differs=F,this._renderer=Z,this._ngStyle=null,this._differ=null}set ngStyle(P){this._ngStyle=P,!this._differ&&P&&(this._differ=this._differs.find(P).create())}ngDoCheck(){if(this._differ){const P=this._differ.diff(this._ngStyle);P&&this._applyChanges(P)}}_setStyle(P,F){const[Z,Fe]=P.split("."),rt=-1===Z.indexOf("-")?void 0:v.czy.DashCase;null!=F?this._renderer.setStyle(this._ngEl.nativeElement,Z,Fe?`${F}${Fe}`:F,rt):this._renderer.removeStyle(this._ngEl.nativeElement,Z,rt)}_applyChanges(P){P.forEachRemovedItem(F=>this._setStyle(F.key,null)),P.forEachAddedItem(F=>this._setStyle(F.key,F.currentValue)),P.forEachChangedItem(F=>this._setStyle(F.key,F.currentValue))}static{this.\u0275fac=function(F){return new(F||A)(v.rXU(v.aKT),v.rXU(v.MKu),v.rXU(v.sFG))}}static{this.\u0275dir=v.FsC({type:A,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return A})(),es=(()=>{class A{constructor(P){this._viewContainerRef=P,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(P){if(P.ngTemplateOutlet||P.ngTemplateOutletInjector){const F=this._viewContainerRef;if(this._viewRef&&F.remove(F.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Z,ngTemplateOutletContext:Fe,ngTemplateOutletInjector:rt}=this;this._viewRef=F.createEmbeddedView(Z,Fe,rt?{injector:rt}:void 0)}else this._viewRef=null}else this._viewRef&&P.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static{this.\u0275fac=function(F){return new(F||A)(v.rXU(v.c1b))}}static{this.\u0275dir=v.FsC({type:A,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[v.OA$]})}}return A})(),ts=(()=>{class A{static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275mod=v.$C({type:A})}static{this.\u0275inj=v.G2t({})}}return A})();const Wn="browser",ys="server";function bi(A){return A===Wn}function mi(A){return A===ys}let Sr=(()=>{class A{static{this.\u0275prov=(0,v.jDH)({token:A,providedIn:"root",factory:()=>new Fi((0,v.KVO)(de),window)})}}return A})();class Fi{constructor(V,P){this.document=V,this.window=P,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const P=function Si(A,V){const P=A.getElementById(V)||A.getElementsByName(V)[0];if(P)return P;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const F=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let Z=F.currentNode;for(;Z;){const Fe=Z.shadowRoot;if(Fe){const rt=Fe.getElementById(V)||Fe.querySelector(`[name="${V}"]`);if(rt)return rt}Z=F.nextNode()}}return null}(this.document,V);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(V){this.supportsScrolling()&&(this.window.history.scrollRestoration=V)}scrollToElement(V){const P=V.getBoundingClientRect(),F=P.left+this.window.pageXOffset,Z=P.top+this.window.pageYOffset,Fe=this.offset();this.window.scrollTo(F-Fe[0],Z-Fe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class oi{}},7705:(Rt,Be,U)=>{U.d(Be,{$C:()=>La,$GK:()=>qt,$K3:()=>ET,$MX:()=>Pd,AVh:()=>Zp,Aen:()=>Do,Agw:()=>$h,BIS:()=>Nv,BMQ:()=>cf,C4Q:()=>v_,C5r:()=>nT,Co$:()=>p0,DNE:()=>$p,EBC:()=>iy,EFF:()=>bt,EJ8:()=>xi,EWP:()=>ca,FsC:()=>Ps,G2t:()=>sn,GBs:()=>Y0,GFd:()=>Om,H3F:()=>IT,H5H:()=>AI,H8p:()=>up,HJs:()=>KC,HbH:()=>eg,Hbi:()=>xC,JRh:()=>Mi,JZv:()=>bn,Jv_:()=>f0,KH2:()=>rg,KVO:()=>lt,Kcf:()=>hu,L39:()=>zC,LfX:()=>gt,Lme:()=>wc,MKu:()=>iE,NAR:()=>jy,NEm:()=>cC,NYb:()=>sC,Njj:()=>Wl,O8t:()=>Fe,OA$:()=>tn,Ocv:()=>OD,Ol2:()=>m0,PLl:()=>im,QTQ:()=>ly,QZP:()=>by,Ql9:()=>FD,QuC:()=>_s,R7$:()=>uy,RV6:()=>Ec,Rfq:()=>yt,RxE:()=>fm,SKi:()=>ii,SdG:()=>$y,SpI:()=>Ti,TL$:()=>P_,Tbb:()=>me,Udg:()=>WC,UyX:()=>vv,VBU:()=>ka,Vns:()=>wf,Vt3:()=>Vn,WHO:()=>DT,WPN:()=>cl,WQX:()=>oe,XpG:()=>Uy,Xx1:()=>wa,Y8G:()=>Ol,Z63:()=>ll,ZF7:()=>Rd,_9s:()=>Vd,_q3:()=>rE,aKT:()=>Fd,aNF:()=>_0,bIt:()=>Xd,bVm:()=>Kp,bkB:()=>Zo,c1b:()=>lv,cWb:()=>Vg,czy:()=>Qc,e01:()=>CT,e5t:()=>Iv,eBV:()=>Vo,eq3:()=>D0,eu8:()=>Zm,fpN:()=>NC,gRc:()=>yC,gXe:()=>Ai,giA:()=>bT,h9k:()=>Fh,hnV:()=>vT,iLQ:()=>XI,j41:()=>Wp,jDH:()=>Ot,jNT:()=>na,k0s:()=>mf,kS0:()=>$c,kdw:()=>iu,l4e:()=>P0,lJ4:()=>A0,lNU:()=>_e,l_i:()=>C0,lsd:()=>J0,mGM:()=>Q0,mq5:()=>VE,n$t:()=>op,nKC:()=>at,naY:()=>_C,nrm:()=>Gp,o8S:()=>ag,oH4:()=>MT,osQ:()=>Ug,plB:()=>jI,qSk:()=>ya,qex:()=>_f,rXU:()=>zd,rcV:()=>Yo,s1E:()=>R0,sFG:()=>Fv,sGs:()=>M0,sMw:()=>b0,sZ2:()=>z_,sdS:()=>zp,uvJ:()=>Xo,vPA:()=>da,w6W:()=>CA,wOt:()=>Te,wni:()=>X0,xGo:()=>li,xc7:()=>Ul,xe9:()=>hv,xvI:()=>Ud,zJS:()=>N0,zZn:()=>Jo,zcH:()=>hc,ziG:()=>S0,zjR:()=>yf});var v=U(1413),ee=U(8359),re=U(1985),Q=U(7786),G=U(4412),de=U(7673),ve=U(7647),He=U(5558),Se=U(3294);function X(t){for(let n in t)if(t[n]===X)return n;throw Error("Could not find renamed property on target object.")}function te(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function me(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(me).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function tt(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Ye=X({__forward_ref__:X});function yt(t){return t.__forward_ref__=yt,t.toString=function(){return me(this())},t}function st(t){return vt(t)?t():t}function vt(t){return"function"==typeof t&&t.hasOwnProperty(Ye)&&t.__forward_ref__===yt}function dt(t){return t&&!!t.\u0275providers}const _e="https://g.co/ng/security#xss";class Te extends Error{constructor(n,i){super(function Ke(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function ue(t){return"string"==typeof t?t:null==t?"":String(t)}function je(t,n){throw new Te(-201,!1)}function ot(t,n){null==t&&function mt(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Ot(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ht(t){return Lt(t,qe)||Lt(t,Wr)}function gt(t){return null!==ht(t)}function Lt(t,n){return t.hasOwnProperty(n)?t[n]:null}function Re(t){return t&&(t.hasOwnProperty(Xn)||t.hasOwnProperty(ir))?t[Xn]:null}const qe=X({\u0275prov:X}),Xn=X({\u0275inj:X}),Wr=X({ngInjectableDef:X}),ir=X({ngInjectorDef:X});var qt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qt||{});let an;function Wt(){return an}function fr(t){const n=an;return an=t,n}function Pr(t,n,i){const o=ht(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&qt.Optional?null:void 0!==n?n:void je(me(t))}const bn=globalThis;class at{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Ot({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ir={},wi="__NG_DI_FLAG__",Kr="ngTempTokenPath",ze=/\n/gm,k="__source";let B;function ae(t){const n=B;return B=t,n}function nt(t,n=qt.Default){if(void 0===B)throw new Te(-203,!1);return null===B?Pr(t,void 0,n):B.get(t,n&qt.Optional?null:void 0,n)}function lt(t,n=qt.Default){return(Wt()||nt)(st(t),n)}function oe(t,n=qt.Default){return lt(t,pn(n))}function pn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Dn(t){const n=[];for(let i=0;i<t.length;i++){const o=st(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Te(900,!1);let c,f=qt.Default;for(let _=0;_<o.length;_++){const T=o[_],C=Zr(T);"number"==typeof C?-1===C?c=T.token:f|=C:c=T}n.push(lt(c,f))}else n.push(lt(o))}return n}function cn(t,n){return t[wi]=n,t.prototype[wi]=n,t}function Zr(t){return t[wi]}function ei(t){return{toString:t}.toString()}var Or=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Or||{}),Ai=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ai||{});const Er={},hn=[],ps=X({\u0275cmp:X}),Ne=X({\u0275dir:X}),Ie=X({\u0275pipe:X}),Xe=X({\u0275mod:X}),At=X({\u0275fac:X}),Nt=X({__NG_ELEMENT_ID__:X}),Qt=X({__NG_ENV_ID__:X});function nn(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}function Tn(t,n,i){let o=0;for(;o<i.length;){const c=i[o];if("number"==typeof c){if(0!==c)break;o++;const f=i[o++],_=i[o++],T=i[o++];t.setAttribute(n,_,T,f)}else{const f=c,_=i[++o];Br(f)?t.setProperty(n,f,_):t.setAttribute(n,f,_),o++}}return o}function Zn(t){return 3===t||4===t||6===t}function Br(t){return 64===t.charCodeAt(0)}function Cn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||Us(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function Us(t,n,i,o,c){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const T=t[f++];if("number"==typeof T){if(T===n){_=-1;break}if(T>n){_=f-1;break}}}for(;f<t.length;){const T=t[f];if("number"==typeof T)break;if(T===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}const gs="ng-template";function Au(t,n,i){let o=0,c=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&c){const _=t[o++];if(i&&"class"===f&&-1!==nn(_.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function no(t){return 4===t.type&&t.value!==gs}function Du(t,n,i){return n===(4!==t.type||i?t.value:gs)}function ia(t,n,i){let o=4;const c=t.attrs||[],f=function Zi(t){for(let n=0;n<t.length;n++)if(Zn(t[n]))return n;return t.length}(c);let _=!1;for(let T=0;T<n.length;T++){const C=n[T];if("number"!=typeof C){if(!_)if(4&o){if(o=2|1&o,""!==C&&!Du(t,C,i)||""===C&&1===n.length){if(si(o))return!1;_=!0}}else{const x=8&o?C:n[++T];if(8&o&&null!==t.attrs){if(!Au(t.attrs,x,i)){if(si(o))return!1;_=!0}continue}const Y=ro(8&o?"class":C,c,no(t),i);if(-1===Y){if(si(o))return!1;_=!0;continue}if(""!==x){let ge;ge=Y>f?"":c[Y+1].toLowerCase();const De=8&o?ge:null;if(De&&-1!==nn(De,x,0)||2&o&&x!==ge){if(si(o))return!1;_=!0}}}}else{if(!_&&!si(o)&&!si(C))return!1;if(_&&si(C))continue;_=!1,o=C|1&o}}return si(o)||_}function si(t){return 0==(1&t)}function ro(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const _=n[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let T=n[++c];for(;"string"==typeof T;)T=n[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function io(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Ni(t,n,i=!1){for(let o=0;o<n.length;o++)if(ia(t,n[o],i))return!0;return!1}function ms(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let c=0;c<t.length;c++)if(t[c]!==o[c])continue e;return!0}}return!1}function es(t,n){return t?":not("+n.trim()+")":n}function xa(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&o){const T=t[++i];c+="["+_+(T.length>0?'="'+T+'"':"")+"]"}else 8&o?c+="."+_:4&o&&(c+=" "+_);else""!==c&&!si(_)&&(n+=es(f,c),c=""),o=_,f=f||!si(o);i++}return""!==c&&(n+=es(f,c)),n}function ka(t){return ei(()=>{const n=zn(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Or.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ai.Emulated,styles:t.styles||hn,_:null,schemas:t.schemas||null,tView:null,id:""};Bs(i);const o=t.dependencies;return i.directiveDefs=Oi(o,!1),i.pipeDefs=Oi(o,!0),i.id=function ki(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function sa(t){return gn(t)||br(t)}function bu(t){return null!==t}function La(t){return ei(()=>({type:t.type,bootstrap:t.bootstrap||hn,declarations:t.declarations||hn,imports:t.imports||hn,exports:t.exports||hn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Cr(t,n){if(null==t)return Er;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}function Ps(t){return ei(()=>{const n=zn(t);return Bs(n),n})}function xi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function gn(t){return t[ps]||null}function br(t){return t[Ne]||null}function fn(t){return t[Ie]||null}function _s(t){const n=gn(t)||br(t)||fn(t);return null!==n&&n.standalone}function Mn(t,n){const i=t[Xe]||null;if(!i&&!0===n)throw new Error(`Type ${me(t)} does not have '\u0275mod' property.`);return i}function zn(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Er,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||hn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Cr(t.inputs,n),outputs:Cr(t.outputs)}}function Bs(t){t.features?.forEach(n=>n(t))}function Oi(t,n){if(!t)return null;const i=n?fn:sa;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(bu)}const ur=0,_t=1,Zt=2,mn=3,_n=4,Ci=5,gr=6,ts=7,Wn=8,ys=9,jr=10,$t=11,bi=12,mi=13,cr=14,er=15,Li=16,Sr=17,Fi=18,Si=19,Mo=20,oi=21,ti=22,Vi=23,vs=24,yn=25,Ui=1,js=2,_i=7,so=9,dr=11;function mr(t){return Array.isArray(t)&&"object"==typeof t[Ui]}function ln(t){return Array.isArray(t)&&!0===t[Ui]}function xo(t){return 0!=(4&t.flags)}function Nn(t){return t.componentOffset>-1}function Is(t){return 1==(1&t.flags)}function $r(t){return!!t.template}function aa(t){return 0!=(512&t[Zt])}function Bi(t,n){return t.hasOwnProperty(At)?t[At]:null}const Hr=Symbol("SIGNAL");function ko(t,n){return(null===t||"object"!=typeof t)&&Object.is(t,n)}let Tr=null,uo=!1;function qr(t){const n=Tr;return Tr=t,n}const ji={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Lo(t){if(uo)throw new Error("");if(null===Tr)return;const n=Tr.nextProducerIndex++;yi(Tr),n<Tr.producerNode.length&&Tr.producerNode[n]!==t&&Ns(Tr)&&ws(Tr.producerNode[n],Tr.producerIndexOfThis[n]),Tr.producerNode[n]!==t&&(Tr.producerNode[n]=t,Tr.producerIndexOfThis[n]=Ns(Tr)?lo(t,Tr,n):0),Tr.producerLastReadVersion[n]=t.version}function $i(t){if(!Ns(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Nu(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Ts(t){if(void 0===t.liveConsumerNode)return;const n=uo;uo=!0;try{for(const i of t.liveConsumerNode)i.dirty||ai(i)}finally{uo=n}}function Hs(){return!1!==Tr?.consumerAllowSignalWrites}function ai(t){t.dirty=!0,Ts(t),t.consumerMarkedDirty?.(t)}function wr(t){return t&&(t.nextProducerIndex=0),qr(t)}function co(t,n){if(qr(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ns(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)ws(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Nu(t){yi(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||($i(i),o!==i.version))return!0}return!1}function Fo(t){if(yi(t),Ns(t))for(let n=0;n<t.producerNode.length;n++)ws(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function lo(t,n,i){if(zs(t),yi(t),0===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)t.producerIndexOfThis[o]=lo(t.producerNode[o],t,o);return t.liveConsumerIndexOfThis.push(i),t.liveConsumerNode.push(n)-1}function ws(t,n){if(zs(t),yi(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)ws(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],c=t.liveConsumerNode[n];yi(c),c.producerIndexOfThis[o]=n}}function Ns(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function yi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function zs(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ca(t,n){const i=Object.create(xu);i.computation=t,n?.equal&&(i.equal=n.equal);const o=()=>{if($i(i),Lo(i),i.value===ui)throw i.error;return i.value};return o[Hr]=i,o}const ja=Symbol("UNSET"),la=Symbol("COMPUTING"),ui=Symbol("ERRORED"),xu=(()=>({...ji,value:ja,dirty:!0,error:null,equal:ko,producerMustRecompute:t=>t.value===ja||t.value===la,producerRecomputeValue(t){if(t.value===la)throw new Error("Detected cycle in computations.");const n=t.value;t.value=la;const i=wr(t);let o;try{o=t.computation()}catch(c){o=ui,t.error=c}finally{co(t,i)}n!==ja&&n!==ui&&o!==ui&&t.equal(n,o)?t.value=n:(t.value=o,t.version++)}}))();let Ou=function vi(){throw new Error};function xs(){Ou()}let Hi=null;function da(t,n){const i=Object.create($a);function o(){return Lo(i),i.value}return i.value=t,n?.equal&&(i.equal=n.equal),o.set=V,o.update=P,o.mutate=F,o.asReadonly=Z,o[Hr]=i,o}const $a=(()=>({...ji,equal:ko,readonlyFn:void 0}))();function A(t){t.version++,Ts(t),Hi?.()}function V(t){const n=this[Hr];Hs()||xs(),n.equal(n.value,t)||(n.value=t,A(n))}function P(t){Hs()||xs(),V.call(this,t(this[Hr].value))}function F(t){const n=this[Hr];Hs()||xs(),t(n.value),A(n)}function Z(){const t=this[Hr];if(void 0===t.readonlyFn){const n=()=>this();n[Hr]=t,t.readonlyFn=n}return t.readonlyFn}function Fe(t){const n=qr(null);try{return t()}finally{qr(n)}}const kt=()=>{},Qn=(()=>({...ji,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:kt}))();class Bn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function tn(){return Yn}function Yn(t){return t.type.prototype.ngOnChanges&&(t.setInput=tr),Gn}function Gn(){const t=zr(this),n=t?.current;if(n){const i=t.previous;if(i===Er)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function tr(t,n,i,o){const c=this.declaredInputs[i],f=zr(t)||function Ws(t,n){return t[Qr]=n}(t,{previous:Er,current:null}),_=f.current||(f.current={}),T=f.previous,C=T[c];_[c]=new Bn(C&&C.currentValue,n,T===Er),t[o]=n}tn.ngInherit=!0;const Qr="__ngSimpleChanges__";function zr(t){return t[Qr]||null}const Yr=function(t,n,i){},is="svg";function sr(t){for(;Array.isArray(t);)t=t[ur];return t}function fo(t,n){return sr(n[t])}function Ri(t,n){return sr(n[t.index])}function sh(t,n){return t.data[n]}function nr(t,n){const i=n[t];return mr(i)?i:i[ur]}function As(t,n){return null==n?null:t[n]}function Wi(t){t[Sr]=0}function fa(t){1024&t[Zt]||(t[Zt]|=1024,Mc(t,1))}function Pc(t){1024&t[Zt]&&(t[Zt]&=-1025,Mc(t,-1))}function Mc(t,n){let i=t[mn];if(null===i)return;i[Ci]+=n;let o=i;for(i=i[mn];null!==i&&(1===n&&1===o[Ci]||-1===n&&0===o[Ci]);)i[Ci]+=n,o=i,i=i[mn]}function Lu(t,n){if(256==(256&t[Zt]))throw new Te(911,!1);null===t[oi]&&(t[oi]=[]),t[oi].push(n)}const Yt={lFrame:z(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xc(){return Yt.bindingsEnabled}function za(){return null!==Yt.skipHydrationRootTNode}function ut(){return Yt.lFrame.lView}function Rn(){return Yt.lFrame.tView}function Vo(t){return Yt.lFrame.contextLView=t,t[Wn]}function Wl(t){return Yt.lFrame.contextLView=null,t}function Ln(){let t=oh();for(;null!==t&&64===t.type;)t=t.parent;return t}function oh(){return Yt.lFrame.currentTNode}function Os(t,n){const i=Yt.lFrame;i.currentTNode=t,i.isParent=n}function ga(){return Yt.lFrame.isParent}function kc(){Yt.lFrame.isParent=!1}function Ar(){const t=Yt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function rr(){return Yt.lFrame.bindingIndex++}function as(t){const n=Yt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function _a(t,n){const i=Yt.lFrame;i.bindingIndex=i.bindingRootIndex=t,Ga(n)}function Ga(t){Yt.lFrame.currentDirectiveIndex=t}function Fc(){return Yt.lFrame.currentQueryIndex}function E(t){Yt.lFrame.currentQueryIndex=t}function D(t){const n=t[_t];return 2===n.type?n.declTNode:1===n.type?t[gr]:null}function I(t,n,i){if(i&qt.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&qt.Host||(c=D(f),null===c||(f=f[cr],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Yt.lFrame=N();return o.currentTNode=n,o.lView=t,!0}function b(t){const n=N(),i=t[_t];Yt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function N(){const t=Yt.lFrame,n=null===t?null:t.child;return null===n?z(t):n}function z(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function J(){const t=Yt.lFrame;return Yt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ue=J;function Me(){const t=J();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function vn(){return Yt.lFrame.selectedIndex}function In(t){Yt.lFrame.selectedIndex=t}function Kn(){const t=Yt.lFrame;return sh(t.tView,t.selectedIndex)}function ya(){Yt.lFrame.currentNamespace=is}let ch=!0;function Gl(){return ch}function qs(t){ch=t}function qa(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:T,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:$}=f;_&&(t.contentHooks??=[]).push(-i,_),T&&((t.contentHooks??=[]).push(i,T),(t.contentCheckHooks??=[]).push(i,T)),C&&(t.viewHooks??=[]).push(-i,C),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=$&&(t.destroyHooks??=[]).push(i,$)}}function Kl(t,n,i){_o(t,n,3,i)}function Qa(t,n,i,o){(3&t[Zt])===i&&_o(t,n,i,o)}function Bu(t,n){let i=t[Zt];(3&i)===n&&(i&=8191,i+=1,t[Zt]=i)}function _o(t,n,i,o){const f=o??-1,_=n.length-1;let T=0;for(let C=void 0!==o?65535&t[Sr]:0;C<_;C++)if("number"==typeof n[C+1]){if(T=n[C],null!=o&&T>=o)break}else n[C]<0&&(t[Sr]+=65536),(T<f||-1==f)&&(jo(t,i,n,C),t[Sr]=(4294901760&t[Sr])+C+2),C++}function Qs(t,n){Yr(4,t,n);const i=qr(null);try{n.call(t)}finally{qr(i),Yr(5,t,n)}}function jo(t,n,i,o){const c=i[o]<0,f=i[o+1],T=t[c?-i[o]:i[o]];c?t[Zt]>>13<t[Sr]>>16&&(3&t[Zt])===n&&(t[Zt]+=8192,Qs(T,f)):Qs(T,f)}const yo=-1;class va{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Xa(t){return t!==yo}function Uc(t){return 32767&t}function Bc(t,n){let i=function $o(t){return t>>16}(t),o=n;for(;i>0;)o=o[cr],i--;return o}let $u=!0;function Ql(t){const n=$u;return $u=t,n}const Yl=255,Hu=5;let Ys=0;const Ii={};function Ja(t,n){const i=Xl(t,n);if(-1!==i)return i;const o=n[_t];o.firstCreatePass&&(t.injectorIndex=n.length,zu(o.data,t),zu(n,null),zu(o.blueprint,null));const c=Wu(t,n),f=t.injectorIndex;if(Xa(c)){const _=Uc(c),T=Bc(c,n),C=T[_t].data;for(let x=0;x<8;x++)n[f+x]=T[_+x]|C[_+x]}return n[f+8]=c,f}function zu(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Xl(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Wu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){if(o=qu(c),null===o)return yo;if(i++,c=c[cr],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return yo}function Za(t,n,i){!function bf(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(Nt)&&(o=i[Nt]),null==o&&(o=i[Nt]=Ys++);const c=o&Yl;n.data[t+(c>>Hu)]|=1<<c}(t,n,i)}function jc(t,n,i){if(i&qt.Optional||void 0!==t)return t;je()}function Jl(t,n,i,o){if(i&qt.Optional&&void 0===o&&(o=null),!(i&(qt.Self|qt.Host))){const c=t[ys],f=fr(void 0);try{return c?c.get(n,o,i&qt.Optional):Pr(n,o,i&qt.Optional)}finally{fr(f)}}return jc(o,0,i)}function hh(t,n,i,o=qt.Default,c){if(null!==t){if(2048&n[Zt]&&!(o&qt.Self)){const _=function ed(t,n,i,o,c){let f=t,_=n;for(;null!==f&&null!==_&&2048&_[Zt]&&!(512&_[Zt]);){const T=eu(f,_,i,o|qt.Self,Ii);if(T!==Ii)return T;let C=f.parent;if(!C){const x=_[Mo];if(x){const $=x.get(i,Ii,o);if($!==Ii)return $}C=qu(_),_=_[cr]}f=C}return c}(t,n,i,o,Ii);if(_!==Ii)return _}const f=eu(t,n,i,o,Ii);if(f!==Ii)return f}return Jl(n,i,o,c)}function eu(t,n,i,o,c){const f=function hg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Nt)?t[Nt]:void 0;return"number"==typeof n?n>=0?n&Yl:Zl:n}(i);if("function"==typeof f){if(!I(n,t,o))return o&qt.Host?jc(c,0,o):Jl(n,i,o,c);try{let _;if(_=f(o),null!=_||o&qt.Optional)return _;je()}finally{Ue()}}else if("number"==typeof f){let _=null,T=Xl(t,n),C=yo,x=o&qt.Host?n[er][gr]:null;for((-1===T||o&qt.SkipSelf)&&(C=-1===T?Wu(t,n):n[T+8],C!==yo&&Ho(o,!1)?(_=n[_t],T=Uc(C),n=Bc(C,n)):T=-1);-1!==T;){const $=n[_t];if(fh(f,T,$.data)){const Y=dg(T,n,i,_,o,x);if(Y!==Ii)return Y}C=n[T+8],C!==yo&&Ho(o,n[_t].data[T+8]===x)&&fh(f,T,n)?(_=$,T=Uc(C),n=Bc(C,n)):T=-1}}return c}function dg(t,n,i,o,c,f){const _=n[_t],T=_.data[t+8],$=Gu(T,_,i,null==o?Nn(T)&&$u:o!=_&&0!=(3&T.type),c&qt.Host&&f===T);return null!==$?ks(n,_,$,T):Ii}function Gu(t,n,i,o,c){const f=t.providerIndexes,_=n.data,T=1048575&f,C=t.directiveStart,$=f>>20,ge=c?T+$:t.directiveEnd;for(let De=o?T:T+$;De<ge;De++){const et=_[De];if(De<C&&i===et||De>=C&&et.type===i)return De}if(c){const De=_[C];if(De&&$r(De)&&De.type===i)return C}return null}function ks(t,n,i,o){let c=t[i];const f=n.data;if(function Ya(t){return t instanceof va}(c)){const _=c;_.resolving&&function Oe(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Te(-200,`Circular dependency in DI detected for ${t}${i}`)}(function ke(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}(f[i]));const T=Ql(_.canSeeViewProviders);_.resolving=!0;const x=_.injectImpl?fr(_.injectImpl):null;I(t,o,qt.Default);try{c=t[i]=_.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Bo(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const _=Yn(n);(i.preOrderHooks??=[]).push(t,_),(i.preOrderCheckHooks??=[]).push(t,_)}c&&(i.preOrderHooks??=[]).push(0-t,c),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==x&&fr(x),Ql(T),_.resolving=!1,Ue()}}return c}function fh(t,n,i){return!!(i[n+(t>>Hu)]&1<<t)}function Ho(t,n){return!(t&qt.Self||t&qt.Host&&n)}class ni{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return hh(this._tNode,this._lView,n,pn(o),i)}}function Zl(){return new ni(Ln(),ut())}function li(t){return ei(()=>{const n=t.prototype.constructor,i=n[At]||Ku(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[At]||Ku(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Ku(t){return vt(t)?()=>{const n=Ku(st(t));return n&&n()}:Bi(t)}function qu(t){const n=t[_t],i=n.type;return 2===i?n.declTNode:1===i?t[gr]:null}function $c(t){return function dh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(Zn(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Ln(),t)}const Xs="__parameters__";function Js(t,n,i){return ei(()=>{const o=function ph(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const _=new c(...f);return T.annotation=_,T;function T(C,x,$){const Y=C.hasOwnProperty(Xs)?C[Xs]:Object.defineProperty(C,Xs,{value:[]})[Xs];for(;Y.length<=$;)Y.push(null);return(Y[$]=Y[$]||[]).push(_),C}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function nu(t,n){t.forEach(i=>Array.isArray(i)?nu(i,n):n(i))}function gh(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function nd(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Yu(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function or(t,n,i){let o=Xu(t,n);return o>=0?t[1|o]=i:(o=~o,function vg(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function mh(t,n){const i=Xu(t,n);if(i>=0)return t[1|i]}function Xu(t,n){return function rd(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),_=t[f<<i];if(n===_)return f<<i;_>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const wa=cn(Js("Optional"),8),iu=cn(Js("SkipSelf"),4);function Ko(t){return 128==(128&t.flags)}var Qc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qc||{});const Tg=/^>|^->|<!--|-->|--!>|<!-$/g,wg=/(<|>)/g,Ag="\u200b$1\u200b";const ic=new Map;let Aa=0;const vd="__ngContext__";function hi(t,n){mr(n)?(t[vd]=n[Si],function Xc(t){ic.set(t[Si],t)}(n)):t[vd]=n}let cu;function el(t,n){return cu(t,n)}function cs(t){const n=t[mn];return ln(n)?n[mn]:n}function tl(t){return oc(t[bi])}function zf(t){return oc(t[_n])}function oc(t){for(;null!==t&&!ln(t);)t=t[_n];return t}function ac(t,n,i,o,c){if(null!=o){let f,_=!1;ln(o)?f=o:mr(o)&&(_=!0,o=o[ur]);const T=sr(o);0===t&&null!==i?null==c?cc(n,i,T):To(n,i,T,c||null,!0):1===t&&null!==i?To(n,i,T,c||null,!0):2===t?function Xf(t,n,i){const o=du(t,n);o&&function Gf(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,T,_):3===t&&n.destroyNode(T),null!=f&&function Pg(t,n,i,o,c){const f=i[_i];f!==sr(i)&&ac(n,t,o,f,c);for(let T=dr;T<i.length;T++){const C=i[T];Nh(C[_t],C,t,n,o,f)}}(n,t,f,i,c)}}function nl(t,n){return t.createComment(function rc(t){return t.replace(Tg,n=>n.replace(wg,Ag))}(n))}function m(t,n,i){return t.createElement(n,i)}function Ee(t,n){const i=t[so],o=i.indexOf(n);Pc(n),i.splice(o,1)}function Qe(t,n){if(t.length<=dr)return;const i=dr+n,o=t[i];if(o){const c=o[Li];null!==c&&c!==t&&Ee(c,o),n>0&&(t[i-1][_n]=o[_n]);const f=nd(t,dr+n);!function l(t,n){Nh(t,n,n[$t],2,null,null),n[ur]=null,n[gr]=null}(o[_t],o);const _=f[Fi];null!==_&&_.detachView(f[_t]),o[mn]=null,o[_n]=null,o[Zt]&=-129}return o}function Dt(t,n){if(!(256&n[Zt])){const i=n[$t];n[Vi]&&Fo(n[Vi]),n[vs]&&Fo(n[vs]),i.destroyNode&&Nh(t,n,i,3,null,null),function M(t){let n=t[bi];if(!n)return Mt(t[_t],t);for(;n;){let i=null;if(mr(n))i=n[bi];else{const o=n[dr];o&&(i=o)}if(!i){for(;n&&!n[_n]&&n!==t;)mr(n)&&Mt(n[_t],n),n=n[mn];null===n&&(n=t),mr(n)&&Mt(n[_t],n),i=n&&n[_n]}n=i}}(n)}}function Mt(t,n){if(!(256&n[Zt])){n[Zt]&=-129,n[Zt]|=256,function Mr(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof va)){const f=i[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const T=c[f[_]],C=f[_+1];Yr(4,T,C);try{C.call(T)}finally{Yr(5,T,C)}}else{Yr(4,c,f);try{f.call(c)}finally{Yr(5,c,f)}}}}}(t,n),function Ft(t,n){const i=t.cleanup,o=n[ts];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const _=i[f+3];_>=0?o[_]():o[-_].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[ts]=null);const c=n[oi];if(null!==c){n[oi]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,n),1===n[_t].type&&n[$t].destroy();const i=n[Li];if(null!==i&&ln(n[mn])){i!==n[mn]&&Ee(i,n);const o=n[Fi];null!==o&&o.detachView(t)}!function Jc(t){ic.delete(t[Si])}(n)}}function ls(t,n,i){return function lu(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[ur];{const{componentOffset:c}=o;if(c>-1){const{encapsulation:f}=t.data[o.directiveStart+c];if(f===Ai.None||f===Ai.Emulated)return null}return Ri(o,i)}}(t,n.parent,i)}function To(t,n,i,o,c){t.insertBefore(n,i,o,c)}function cc(t,n,i){t.appendChild(n,i)}function rl(t,n,i,o,c){null!==o?To(t,n,i,o,c):cc(t,n,i)}function du(t,n){return t.parentNode(n)}function il(t,n,i){return qf(t,n,i)}let lc,ep,Oh,bd,qf=function sl(t,n,i){return 40&t.type?Ri(t,i):null};function Mh(t,n,i,o){const c=ls(t,o,n),f=n[$t],T=il(o.parent||n[gr],o,n);if(null!=c)if(Array.isArray(i))for(let C=0;C<i.length;C++)rl(f,c,i[C],T,!1);else rl(f,c,i,T,!1);void 0!==lc&&lc(f,o,n,i,c)}function Ad(t,n){if(null!==n){const i=n.type;if(3&i)return Ri(n,t);if(4&i)return Yf(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return Ad(t,o);{const c=t[n.index];return ln(c)?Yf(-1,c):sr(c)}}if(32&i)return el(n,t)()||sr(t[n.index]);{const o=bg(t,n);return null!==o?Array.isArray(o)?o[0]:Ad(cs(t[er]),o):Ad(t,n.next)}}return null}function bg(t,n){return null!==n?t[er][gr].projection[n.projection]:null}function Yf(t,n){const i=dr+t+1;if(i<n.length){const o=n[i],c=o[_t].firstChild;if(null!==c)return Ad(o,c)}return n[_i]}function Sg(t,n,i,o,c,f,_){for(;null!=i;){const T=o[i.index],C=i.type;if(_&&0===n&&(T&&hi(sr(T),o),i.flags|=2),32!=(32&i.flags))if(8&C)Sg(t,n,i.child,o,c,f,!1),ac(n,t,c,T,f);else if(32&C){const x=el(i,o);let $;for(;$=x();)ac(n,t,c,$,f);ac(n,t,c,T,f)}else 16&C?C_(t,n,o,i,c,f):ac(n,t,c,T,f);i=_?i.projectionNext:i.next}}function Nh(t,n,i,o,c,f){Sg(i,o,t.firstChild,n,c,f,!1)}function C_(t,n,i,o,c,f){const _=i[er],C=_[gr].projection[o.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)ac(n,t,c,C[x],f);else{let x=C;const $=_[mn];Ko(o)&&(x.flags|=128),Sg(t,n,x,$,c,f,!0)}}function Jf(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function Zf(t,n,i){const{mergedAttrs:o,classes:c,styles:f}=i;null!==o&&Tn(t,n,o),null!==c&&Jf(t,n,c),null!==f&&function Mg(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function Dd(t){return function xh(){if(void 0===ep&&(ep=null,bn.trustedTypes))try{ep=bn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ep}()?.createHTML(t)||t}function P_(t){Oh=t}function np(t){return function xg(){if(void 0===bd&&(bd=null,bn.trustedTypes))try{bd=bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return bd}()?.createScriptURL(t)||t}class ol{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_e})`}}class Og extends ol{getTypeName(){return"HTML"}}class kg extends ol{getTypeName(){return"Style"}}class Lg extends ol{getTypeName(){return"Script"}}class Sd extends ol{getTypeName(){return"URL"}}class N_ extends ol{getTypeName(){return"ResourceURL"}}function Yo(t){return t instanceof ol?t.changingThisBreaksApplicationSecurity:t}function Rd(t,n){const i=function Fg(t){return t instanceof ol&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${_e})`)}return i===n}function hu(t){return new Og(t)}function Vg(t){return new kg(t)}function vv(t){return new Lg(t)}function Ug(t){return new Sd(t)}function Iv(t){return new N_(t)}class Bg{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(Dd(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch{return null}}}class Ev{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const i=this.inertDocument.createElement("template");return i.innerHTML=Dd(n),i}}const Tv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Pd(t){return(t=String(t)).match(Tv)?t:"unsafe:"+t}function fu(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function al(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const $g=fu("area,br,col,hr,img,wbr"),rp=fu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hg=fu("rp,rt"),zg=al($g,al(rp,fu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),al(Hg,fu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),al(Hg,rp)),kh=fu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),L_=al(kh,fu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Md=fu("script,style,template");class wv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let c=this.checkClobberedElement(i,i.nextSibling);if(c){i=c;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!zg.hasOwnProperty(i))return this.sanitizedSomething=!0,!Md.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let c=0;c<o.length;c++){const f=o.item(c),_=f.name,T=_.toLowerCase();if(!L_.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let C=f.value;kh[T]&&(C=Pd(C)),this.buf.push(" ",_,'="',ul(C),'"')}return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();zg.hasOwnProperty(i)&&!$g.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(ul(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const Gg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,F_=/([^\#-~ |!])/g;function ul(t){return t.replace(/&/g,"&amp;").replace(Gg,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(F_,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Lh;function Fh(t,n){let i=null;try{Lh=Lh||function x_(t){const n=new Ev(t);return function jg(){try{return!!(new window.DOMParser).parseFromString(Dd(""),"text/html")}catch{return!1}}()?new Bg(n):n}(t);let o=n?String(n):"";i=Lh.getInertBodyElement(o);let c=5,f=o;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,o=f,f=i.innerHTML,i=Lh.getInertBodyElement(o)}while(o!==f);return Dd((new wv).sanitizeChildren(Kg(i)||i))}finally{if(i){const o=Kg(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function Kg(t){return"content"in t&&function Av(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(cl||{});function ip(t){const n=Nd();return n?n.sanitize(cl.URL,t)||"":Rd(t,"URL")?Yo(t):Pd(ue(t))}function Qg(t){const n=Nd();if(n)return np(n.sanitize(cl.RESOURCE_URL,t)||"");if(Rd(t,"ResourceURL"))return np(Yo(t));throw new Te(904,!1)}function op(t,n,i){return function sp(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Qg:ip}(n,i)(t)}function Nd(){const t=ut();return t&&t[jr].sanitizer}const ll=new at("ENVIRONMENT_INITIALIZER"),Zg=new at("INJECTOR",-1),dl=new at("INJECTOR_DEF_TYPES");class Uh{get(n,i=Ir){if(i===Ir){const o=new Error(`NullInjectorError: No provider for ${me(n)}!`);throw o.name="NullInjectorError",o}return i}}function bv(...t){return{\u0275providers:U_(0,t),\u0275fromNgModule:!0}}function U_(t,...n){const i=[],o=new Set;let c;const f=_=>{i.push(_)};return nu(n,_=>{const T=_;ap(T,f,[],o)&&(c||=[],c.push(T))}),void 0!==c&&em(c,f),i}function em(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:c}=t[i];tm(c,f=>{n(f,o)})}}function ap(t,n,i,o){if(!(t=st(t)))return!1;let c=null,f=Re(t);const _=!f&&gn(t);if(f||_){if(_&&!_.standalone)return!1;c=t}else{const C=t.ngModule;if(f=Re(C),!f)return!1;c=C}const T=o.has(c);if(_){if(T)return!1;if(o.add(c),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of C)ap(x,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let x;o.add(c);try{nu(f.imports,$=>{ap($,n,i,o)&&(x||=[],x.push($))})}finally{}void 0!==x&&em(x,n)}if(!T){const x=Bi(c)||(()=>new c);n({provide:c,useFactory:x,deps:hn},c),n({provide:dl,useValue:c,multi:!0},c),n({provide:ll,useValue:()=>lt(c),multi:!0},c)}const C=f.providers;if(null!=C&&!T){const x=t;tm(C,$=>{n($,x)})}}}return c!==t&&void 0!==t.providers}function tm(t,n){for(let i of t)dt(i)&&(i=i.\u0275providers),Array.isArray(i)?tm(i,n):n(i)}const Rv=X({provide:String,useValue:X});function nm(t){return null!==t&&"object"==typeof t&&Rv in t}function hl(t){return"function"==typeof t}const up=new at("Set Injector scope."),Bh={},rm={};let cp;function jh(){return void 0===cp&&(cp=new Uh),cp}class Xo{}class pu extends Xo{get destroyed(){return this._destroyed}constructor(n,i,o,c){super(),this.parent=i,this.source=o,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lp(n,_=>this.processProvider(_)),this.records.set(Zg,fl(void 0,this)),c.has("environment")&&this.records.set(Xo,fl(void 0,this));const f=this.records.get(up);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(dl.multi,hn,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=ae(this),o=fr(void 0);try{return n()}finally{ae(i),fr(o)}}get(n,i=Ir,o=qt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Qt))return n[Qt](this);o=pn(o);const f=ae(this),_=fr(void 0);try{if(!(o&qt.SkipSelf)){let C=this.records.get(n);if(void 0===C){const x=function Da(t){return"function"==typeof t||"object"==typeof t&&t instanceof at}(n)&&ht(n);C=x&&this.injectableDefInScope(x)?fl(Fn(n),Bh):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&qt.Self?jh():this.parent).get(n,i=o&qt.Optional&&i===Ir?null:i)}catch(T){if("NullInjectorError"===T.name){if((T[Kr]=T[Kr]||[]).unshift(me(n)),f)throw T;return function pi(t,n,i,o){const c=t[Kr];throw n[k]&&c.unshift(n[k]),t.message=function gi(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=me(n);if(Array.isArray(n))c=n.map(me).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let T=n[_];f.push(_+":"+("string"==typeof T?JSON.stringify(T):me(T)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(ze,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[Kr]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{fr(_),ae(f)}}resolveInjectorInitializers(){const n=ae(this),i=fr(void 0);try{const c=this.get(ll.multi,hn,qt.Self);for(const f of c)f()}finally{ae(n),fr(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(me(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(n){let i=hl(n=st(n))?n:st(n&&n.provide);const o=function H_(t){return nm(t)?fl(void 0,t.useValue):fl(xd(t),Bh)}(n);if(hl(n)||!0!==n.multi)this.records.get(i);else{let c=this.records.get(i);c||(c=fl(void 0,Bh,!0),c.factory=()=>Dn(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===Bh&&(i.value=rm,i.value=i.factory()),"object"==typeof i.value&&i.value&&function Nr(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=st(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Fn(t){const n=ht(t),i=null!==n?n.factory:Bi(t);if(null!==i)return i;if(t instanceof at)throw new Te(204,!1);if(t instanceof Function)return function $_(t){const n=t.length;if(n>0)throw Yu(n,"?"),new Te(204,!1);const i=function Ze(t){return t&&(t[qe]||t[Wr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Te(204,!1)}function xd(t,n,i){let o;if(hl(t)){const c=st(t);return Bi(c)||Fn(c)}if(nm(t))o=()=>st(t.useValue);else if(function j_(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Dn(t.deps||[]));else if(function B_(t){return!(!t||!t.useExisting)}(t))o=()=>lt(st(t.useExisting));else{const c=st(t&&(t.useClass||t.provide));if(!function Gi(t){return!!t.deps}(t))return Bi(c)||Fn(c);o=()=>new c(...Dn(t.deps))}return o}function fl(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function lp(t,n){for(const i of t)Array.isArray(i)?lp(i,n):i&&dt(i)?lp(i.\u0275providers,n):n(i)}const z_=new at("AppId",{providedIn:"root",factory:()=>dp}),dp="ng",im=new at("Platform Initializer"),$h=new at("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nv=new at("CSP nonce",{providedIn:"root",factory:()=>function Cd(){if(void 0!==Oh)return Oh;if(typeof document<"u")return document;throw new Te(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ba=(t,n,i)=>null;function Ld(t,n,i=!1){return ba(t,n,i)}class cm{}class mp{}class dm{resolveComponentFactory(n){throw function lm(t){const n=Error(`No component factory found for ${me(t)}.`);return n.ngComponent=t,n}(n)}}let Qh=(()=>{class t{static{this.NULL=new dm}}return t})();function vl(){return Il(Ln(),ut())}function Il(t,n){return new Fd(Ri(t,n))}let Fd=(()=>{class t{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=vl}}return t})();function hm(t){return t instanceof Fd?t.nativeElement:t}class Vd{}let Fv=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function yp(){const t=ut(),i=nr(Ln().index,t);return(mr(i)?i:t)[$t]}()}}return t})(),vp=(()=>{class t{static{this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>null})}}return t})();class fm{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Ud=new fm("16.2.12"),pm={};function Y_(t,n=null,i=null,o){const c=Xh(t,n,i,o);return c.resolveInjectorInitializers(),c}function Xh(t,n=null,i=null,o,c=new Set){const f=[i||hn,bv(t)];return o=o||("object"==typeof t?void 0:me(t)),new pu(f,n||jh(),o||null,c)}let Jo=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Ir}static{this.NULL=new Uh}static create(i,o){if(Array.isArray(i))return Y_({name:""},o,i,"");{const c=i.name??"";return Y_({name:c},i.parent,i.providers,c)}}static{this.\u0275prov=Ot({token:t,providedIn:"any",factory:()=>lt(Zg)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function _m(t){return t.ngOriginalError}class hc{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&_m(n);for(;i&&_m(i);)i=_m(i);return i||null}}let Tl=(()=>{class t{static{this.__NG_ELEMENT_ID__=Bv}static{this.__NG_ENV_ID__=i=>i}}return t})();class Uv extends Tl{constructor(n){super(),this._lView=n}onDestroy(n){return Lu(this._lView,n),()=>function Nc(t,n){if(null===t[oi])return;const i=t[oi].indexOf(n);-1!==i&&t[oi].splice(i,1)}(this._lView,n)}}function Bv(){return new Uv(ut())}function Tp(t){return n=>{setTimeout(t,void 0,n)}}const Zo=class J_ extends v.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let c=n,f=i||(()=>null),_=o;if(n&&"object"==typeof n){const C=n;c=C.next?.bind(C),f=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(f=Tp(f),c&&(c=Tp(c)),_&&(_=Tp(_)));const T=super.subscribe({next:c,error:f,complete:_});return n instanceof ee.yU&&n.add(T),T}};function ym(...t){}class ii{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zo(!1),this.onMicrotaskEmpty=new Zo(!1),this.onStable=new Zo(!1),this.onError=new Zo(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Z_(){const t="function"==typeof bn.requestAnimationFrame;let n=bn[t?"requestAnimationFrame":"setTimeout"],i=bn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function $v(t){const n=()=>{!function fE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ny(t),t.isCheckStableRunning=!0,ty(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ny(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,_,T)=>{if(function zv(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(T))return i.invokeTask(c,f,_,T);try{return Hv(t),i.invokeTask(c,f,_,T)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),fc(t)}},onInvoke:(i,o,c,f,_,T,C)=>{try{return Hv(t),i.invoke(c,f,_,T,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),fc(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,ny(t),ty(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ii.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(ii.isInAngularZone())throw new Te(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,n,jv,ym,ym);try{return f.runTask(_,i,o)}finally{f.cancelTask(_)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const jv={};function ty(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ny(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Hv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fc(t){t._nesting--,ty(t)}class gu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zo,this.onMicrotaskEmpty=new Zo,this.onStable=new Zo,this.onError=new Zo}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}const jd=new at("",{providedIn:"root",factory:mu});function mu(){const t=oe(ii);let n=!0;const i=new re.c(c=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(n),c.complete()})}),o=new re.c(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{ii.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,c.next(!0))})})});const _=t.onUnstable.subscribe(()=>{ii.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}});return(0,Q.h)(i,o.pipe((0,ve.u)()))}function iy(t){return t.ownerDocument}function yu(t){return t instanceof Function?t():t}let Em=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Jh(t){for(;t;){t[Zt]|=64;const n=cs(t);if(aa(t)&&!n)return t;t=n}return null}const wl=new at("",{providedIn:"root",factory:()=>!1});let wp=null;function ay(t,n){return t[n]??vu()}function Jv(t,n){const i=vu();i.producerNode?.length&&(t[n]=wp,i.lView=t,wp=wm())}const Zv={...ji,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Jh(t.lView)},lView:null};function wm(){return Object.create(Zv)}function vu(){return wp??=wm(),wp}const An={};function uy(t){cy(Rn(),ut(),vn()+t,!1)}function cy(t,n,i,o){if(!o)if(3==(3&n[Zt])){const f=t.preOrderCheckHooks;null!==f&&Kl(n,f,i)}else{const f=t.preOrderHooks;null!==f&&Qa(n,f,0,i)}In(i)}function zd(t,n=qt.Default){const i=ut();return null===i?lt(t,n):hh(Ln(),i,st(t),n)}function ly(){throw new Error("invalid")}function Ap(t,n,i,o,c,f,_,T,C,x,$){const Y=n.blueprint.slice();return Y[ur]=c,Y[Zt]=140|o,(null!==x||t&&2048&t[Zt])&&(Y[Zt]|=2048),Wi(Y),Y[mn]=Y[cr]=t,Y[Wn]=i,Y[jr]=_||t&&t[jr],Y[$t]=T||t&&t[$t],Y[ys]=C||t&&t[ys]||null,Y[gr]=f,Y[Si]=function Yc(){return Aa++}(),Y[ti]=$,Y[Mo]=x,Y[er]=2==n.type?t[er]:Y,Y}function ef(t,n,i,o,c){let f=t.data[n];if(null===f)f=function dy(t,n,i,o,c){const f=oh(),_=ga(),C=t.data[n]=function rI(t,n,i,o,c,f){let _=n?n.injectorIndex:-1,T=0;return za()&&(T|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=C),null!==f&&(_?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(t,n,i,o,c),function Wa(){return Yt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const _=function mo(){const t=Yt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Os(f,!0),f}function Dp(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function Am(t,n,i,o,c){const f=ay(n,Vi),_=vn(),T=2&o;try{In(-1),T&&n.length>yn&&cy(t,n,yn,!1),Yr(T?2:0,c);const x=T?f:null,$=wr(x);try{null!==x&&(x.dirty=!1),i(o,c)}finally{co(x,$)}}finally{T&&null===n[Vi]&&Jv(n,Vi),In(_),Yr(T?3:1,c)}}function Dm(t,n,i){if(xo(n)){const o=qr(null);try{const f=n.directiveEnd;for(let _=n.directiveStart;_<f;_++){const T=t.data[_];T.contentQueries&&T.contentQueries(1,i[_],_)}}finally{qr(o)}}}function hy(t,n,i){xc()&&(function Ey(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;Nn(i)&&function oI(t,n,i){const o=Ri(n,t),c=tI(i);let _=16;i.signals?_=4096:i.onPush&&(_=64);const T=Mp(t,Ap(t,c,null,_,o,n,null,t[jr].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=T}(n,i,t.data[c+i.componentOffset]),t.firstCreatePass||Ja(i,n),hi(o,n);const _=i.initialInputs;for(let T=c;T<f;T++){const C=t.data[T],x=ks(n,t,T,i);hi(x,n),null!==_&&Al(0,T-c,x,C,0,_),$r(C)&&(nr(i.index,n)[Wn]=ks(n,t,T,i))}}(t,n,i,Ri(i,n)),64==(64&i.flags)&&pc(t,n,i))}function fy(t,n,i=Ri){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],T=-1===_?i(n,t):t[_];t[c++]=T}}}function tI(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=py(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function py(t,n,i,o,c,f,_,T,C,x,$){const Y=yn+o,ge=Y+c,De=function gy(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:An);return i}(Y,ge),et="function"==typeof x?x():x;return De[_t]={type:t,blueprint:De,template:i,queries:null,viewQuery:T,declTNode:n,data:De.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:et,incompleteFirstPass:!1,ssrId:$}}let nI=t=>null;function _y(t,n,i,o){for(let c in t)if(t.hasOwnProperty(c)){i=null===i?{}:i;const f=t[c];null===o?bp(i,n,c,f):o.hasOwnProperty(c)&&bp(i,n,o[c],f)}return i}function bp(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function Sp(t,n,i,o){if(xc()){const c=null===o?null:{"":-1},f=function Cs(t,n){const i=t.directiveRegistry;let o=null,c=null;if(i)for(let f=0;f<i.length;f++){const _=i[f];if(Ni(n,_.selectors,!1))if(o||(o=[]),$r(_))if(null!==_.findHostDirectiveDefs){const T=[];c=c||new Map,_.findHostDirectiveDefs(_,T,c),o.unshift(...T,_),Rp(t,n,T.length)}else o.unshift(_),Rp(t,n,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,o,c),o.push(_)}return null===o?null:[o,c]}(t,i);let _,T;null===f?_=T=null:[_,T]=f,null!==_&&tf(t,n,i,_,c,T),c&&function Ty(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new Te(-301,!1);o.push(n[c],f)}}}(i,o,c)}i.mergedAttrs=Cn(i.mergedAttrs,i.attrs)}function tf(t,n,i,o,c,f){for(let x=0;x<o.length;x++)Za(Ja(i,n),t,o[x].type);!function rf(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let x=0;x<o.length;x++){const $=o[x];$.providersResolver&&$.providersResolver($)}let _=!1,T=!1,C=Dp(t,n,o.length,null);for(let x=0;x<o.length;x++){const $=o[x];i.mergedAttrs=Cn(i.mergedAttrs,$.hostAttrs),bs(t,i,n,C,$),nf(C,$,c),null!==$.contentQueries&&(i.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(i.flags|=64);const Y=$.type.prototype;!_&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),_=!0),!T&&(Y.ngOnChanges||Y.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),T=!0),C++}!function yy(t,n,i){const c=n.directiveEnd,f=t.data,_=n.attrs,T=[];let C=null,x=null;for(let $=n.directiveStart;$<c;$++){const Y=f[$],ge=i?i.get(Y):null,et=ge?ge.outputs:null;C=_y(Y.inputs,$,C,ge?ge.inputs:null),x=_y(Y.outputs,$,x,et);const Tt=null===C||null===_||no(n)?null:Dl(C,$,_);T.push(Tt)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=T,n.inputs=C,n.outputs=x}(t,i,f)}function pc(t,n,i){const o=i.directiveStart,c=i.directiveEnd,f=i.index,_=function Ks(){return Yt.lFrame.currentDirectiveIndex}();try{In(f);for(let T=o;T<c;T++){const C=t.data[T],x=n[T];Ga(T),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&wo(C,x)}}finally{In(-1),Ga(_)}}function wo(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Rp(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function nf(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;$r(n)&&(i[""]=t)}}function bs(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=Bi(c.type)),_=new va(f,$r(c),zd);t.blueprint[o]=_,i[o]=_,function sI(t,n,i,o,c){const f=c.hostBindings;if(f){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const T=~n.index;(function Iy(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(_)!=T&&_.push(T),_.push(i,o,f)}}(t,n,o,Dp(t,i,c.hostVars,An),c)}function Ao(t,n,i,o,c,f){const _=Ri(t,n);!function gc(t,n,i,o,c,f,_){if(null==f)t.removeAttribute(n,c,i);else{const T=null==_?ue(f):_(f,o||"",c);t.setAttribute(n,c,T,i)}}(n[$t],_,f,t.value,i,o,c)}function Al(t,n,i,o,c,f){const _=f[n];if(null!==_)for(let T=0;T<_.length;)Pp(o,i,_[T++],_[T++],_[T++])}function Pp(t,n,i,o,c){const f=qr(null);try{const _=t.inputTransforms;null!==_&&_.hasOwnProperty(o)&&(c=_[o].call(n,c)),null!==t.setInput?t.setInput(n,c,i,o):n[o]=c}finally{qr(f)}}function Dl(t,n,i){let o=null,c=0;for(;c<i.length;){const f=i[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const _=t[f];for(let T=0;T<_.length;T+=2)if(_[T]===n){o.push(f,_[T+1],i[c+1]);break}}c+=2}else c+=2;else c+=4}return o}function wy(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function Ay(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const _=t.data[f];E(i[o]),_.contentQueries(2,n[f],f)}}}function Mp(t,n){return t[bi]?t[mi][_n]=n:t[bi]=n,t[mi]=n,n}function Sm(t,n,i){E(0);const o=qr(null);try{n(t,i)}finally{qr(o)}}function Rm(t){return t[ts]||(t[ts]=[])}function Dy(t){return t.cleanup||(t.cleanup=[])}function Pm(t,n){const i=t[ys],o=i?i.get(hc,null):null;o&&o.handleError(n)}function Wd(t,n,i,o,c){for(let f=0;f<i.length;){const _=i[f++],T=i[f++];Pp(t.data[_],n[_],o,T,c)}}function Sa(t,n,i){const o=fo(n,t);!function Wf(t,n,i){t.setValue(n,i)}(t[$t],o,i)}function aI(t,n){const i=nr(n,t),o=i[_t];!function Mm(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const c=i[ur];null!==c&&null===i[ti]&&(i[ti]=Ld(c,i[ys])),Nm(o,i,i[Wn])}function Nm(t,n,i){b(n);try{const o=t.viewQuery;null!==o&&Sm(1,o,i);const c=t.template;null!==c&&Am(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ay(t,n),t.staticViewQueries&&Sm(2,t.viewQuery,i);const f=t.components;null!==f&&function Cy(t,n){for(let i=0;i<n.length;i++)aI(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[Zt]&=-5,Me()}}let xm=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,c){const f=typeof Zone>"u"?null:Zone.current,_=function rt(t,n,i){const o=Object.create(Qn);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const c=_=>{o.cleanupFn=_};return o.ref={notify:()=>ai(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Nu(o))return;o.hasRun=!0;const _=wr(o);try{o.cleanupFn(),o.cleanupFn=kt,o.fn(c)}finally{co(o,_)}},cleanup:()=>o.cleanupFn()},o.ref}(i,x=>{this.all.has(x)&&this.queue.set(x,f)},c);let T;this.all.add(_),_.notify();const C=()=>{_.cleanup(),T?.(),this.all.delete(_),this.queue.delete(_)};return T=o?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}}return t})();function by(t,n){!n?.injector&&function Ip(t){if(!Wt()&&!function ne(){return B}())throw new Te(-203,!1)}();const i=n?.injector??oe(Jo),o=i.get(xm),c=!0!==n?.manualCleanup?i.get(Tl):null;return o.create(t,c,!!n?.allowSignalWrites)}function sf(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const T=n[_];"number"==typeof T?f=T:1==f?c=tt(c,T):2==f&&(o=tt(o,T+": "+n[++_]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}function Gd(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(sr(f)),ln(f)&&Sy(f,o);const _=i.type;if(8&_)Gd(t,n,i.child,o);else if(32&_){const T=el(i,n);let C;for(;C=T();)o.push(C)}else if(16&_){const T=bg(n,i);if(Array.isArray(T))o.push(...T);else{const C=cs(n[er]);Gd(C[_t],C,T,o,!0)}}i=c?i.projectionNext:i.next}return o}function Sy(t,n){for(let i=dr;i<t.length;i++){const o=t[i],c=o[_t].firstChild;null!==c&&Gd(o[_t],o,c,n)}t[_i]!==t[ur]&&n.push(t[_i])}function xp(t,n,i,o=!0){const c=n[jr],f=c.rendererFactory,_=c.afterRenderEventManager;f.begin?.(),_?.begin();try{Py(t,n,t.template,i)}catch(C){throw o&&Pm(n,C),C}finally{f.end?.(),c.effectManager?.flush(),_?.end()}}function Py(t,n,i,o){const c=n[Zt];if(256!=(256&c)){n[jr].effectManager?.flush(),b(n);try{Wi(n),function ma(t){return Yt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Am(t,n,i,2,o);const _=3==(3&c);if(_){const x=t.preOrderCheckHooks;null!==x&&Kl(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Qa(n,x,0,null),Bu(n,0)}if(function e(t){for(let n=tl(t);null!==n;n=zf(n)){if(!n[js])continue;const i=n[so];for(let o=0;o<i.length;o++){fa(i[o])}}}(n),a(n,2),null!==t.contentQueries&&Ay(t,n),_){const x=t.contentCheckHooks;null!==x&&Kl(n,x)}else{const x=t.contentHooks;null!==x&&Qa(n,x,1),Bu(n,1)}!function eI(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=ay(n,vs);try{for(let c=0;c<i.length;c++){const f=i[c];if(f<0)In(~f);else{const _=f,T=i[++c],C=i[++c];_a(T,_),o.dirty=!1;const x=wr(o);try{C(2,n[_])}finally{co(o,x)}}}}finally{null===n[vs]&&Jv(n,vs),In(-1)}}(t,n);const T=t.components;null!==T&&u(n,T,0);const C=t.viewQuery;if(null!==C&&Sm(2,C,o),_){const x=t.viewCheckHooks;null!==x&&Kl(n,x)}else{const x=t.viewHooks;null!==x&&Qa(n,x,2),Bu(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[Zt]&=-73,Pc(n)}finally{Me()}}}function a(t,n){for(let i=tl(t);null!==i;i=zf(i))for(let o=dr;o<i.length;o++)s(i[o],n)}function r(t,n,i){s(nr(n,t),i)}function s(t,n){if(!function $l(t){return 128==(128&t[Zt])}(t))return;const i=t[_t],o=t[Zt];if(80&o&&0===n||1024&o||2===n)Py(i,t,i.template,t[Wn]);else if(t[Ci]>0){a(t,1);const c=i.components;null!==c&&u(t,c,1)}}function u(t,n,i){for(let o=0;o<n.length;o++)r(t,n[o],i)}class d{get rootNodes(){const n=this._lView,i=n[_t];return Gd(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(n){this._lView[Wn]=n}get destroyed(){return 256==(256&this._lView[Zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[mn];if(ln(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Qe(n,o),nd(i,o))}this._attachedToViewContainer=!1}Dt(this._lView[_t],this._lView)}onDestroy(n){Lu(this._lView,n)}markForCheck(){Jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Zt]&=-129}reattach(){this._lView[Zt]|=128}detectChanges(){xp(this._lView[_t],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y(t,n){Nh(t,n,n[$t],2,null,null)}(this._lView[_t],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=n}}class g extends d{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;xp(n[_t],n,n[Wn],!1)}checkNoChanges(){}get context(){return null}}class w extends Qh{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=gn(n);return new q(i,this.ngModule)}}function S(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class H{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=pn(o);const c=this.injector.get(n,pm,o);return c!==pm||i===pm?c:this.parentInjector.get(n,i,o)}}class q extends mp{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=S(n.inputs);if(null!==i)for(const c of o)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return o}get outputs(){return S(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Di(t){return t.map(xa).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,c){let f=(c=c||this.ngModule)instanceof Xo?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new H(n,f):n,T=_.get(Vd,null);if(null===T)throw new Te(407,!1);const Y={rendererFactory:T,sanitizer:_.get(vp,null),effectManager:_.get(xm,null),afterRenderEventManager:_.get(Em,null)},ge=T.createRenderer(null,this.componentDef),De=this.componentDef.selectors[0][0]||"div",et=o?function my(t,n,i,o){const f=o.get(wl,!1)||i===Ai.ShadowDom,_=t.selectRootElement(n,f);return function _E(t){nI(t)}(_),_}(ge,o,this.componentDef.encapsulation,_):m(ge,De,function O(t){const n=t.toLowerCase();return"svg"===n?is:"math"===n?"math":null}(De)),Kt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ft=null;null!==et&&(ft=Ld(et,_,!0));const En=py(0,null,null,1,0,null,null,null,null,null,null),jn=Ap(null,En,null,Kt,null,null,Y,ge,_,null,ft);let Dr,Po;b(jn);try{const Bl=this.componentDef;let ug,oE=null;Bl.findHostDirectiveDefs?(ug=[],oE=new Map,Bl.findHostDirectiveDefs(Bl,ug,oE),ug.push(Bl)):ug=[Bl];const qC=function xe(t,n){const i=t[_t],o=yn;return t[o]=n,ef(i,o,2,"#host",null)}(jn,et),QC=function it(t,n,i,o,c,f,_){const T=c[_t];!function Et(t,n,i,o){for(const c of t)n.mergedAttrs=Cn(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(sf(n,n.mergedAttrs,!0),null!==i&&Zf(o,i,n))}(o,t,n,_);let C=null;null!==n&&(C=Ld(n,c[ys]));const x=f.rendererFactory.createRenderer(n,i);let $=16;i.signals?$=4096:i.onPush&&($=64);const Y=Ap(c,tI(i),null,$,c[t.index],t,f,x,null,null,C);return T.firstCreatePass&&Rp(T,t,o.length-1),Mp(c,Y),c[t.index]=Y}(qC,et,Bl,ug,jn,Y,ge);Po=sh(En,yn),et&&function Ut(t,n,i,o){if(o)Tn(t,i,["ng-version",Ud.full]);else{const{attrs:c,classes:f}=function Oa(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!si(c))break;c=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Tn(t,i,c),f&&f.length>0&&Jf(t,i,f.join(" "))}}(ge,Bl,et,o),void 0!==i&&function Gt(t,n,i){const o=t.projection=[];for(let c=0;c<n.length;c++){const f=i[c];o.push(null!=f?Array.from(f):null)}}(Po,this.ngContentSelectors,i),Dr=function pt(t,n,i,o,c,f){const _=Ln(),T=c[_t],C=Ri(_,c);tf(T,c,_,i,null,o);for(let $=0;$<i.length;$++)hi(ks(c,T,_.directiveStart+$,_),c);pc(T,c,_),C&&hi(C,c);const x=ks(c,T,_.directiveStart+_.componentOffset,_);if(t[Wn]=c[Wn]=x,null!==f)for(const $ of f)$(x,n);return Dm(T,_,t),x}(QC,Bl,ug,oE,jn,[Bt]),Nm(En,jn,null)}finally{Me()}return new le(this.componentType,Dr,Il(Po,jn),jn,Po)}}class le extends cm{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new g(c),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let c;if(null!==o&&(c=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;Wd(f[_t],f,c,n,i),this.previousInputValues.set(n,i),Jh(nr(this._tNode.index,f))}}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Bt(){const t=Ln();qa(ut()[_t],t)}function Vn(t){let n=function rn(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if($r(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Te(903,!1);c=n.\u0275dir}if(c){if(i){o.push(c);const _=t;_.inputs=ye(t.inputs),_.inputTransforms=ye(t.inputTransforms),_.declaredInputs=ye(t.declaredInputs),_.outputs=ye(t.outputs);const T=c.hostBindings;T&&we(t,T);const C=c.viewQuery,x=c.contentQueries;if(C&&se(t,C),x&&fe(t,x),te(t.inputs,c.inputs),te(t.declaredInputs,c.declaredInputs),te(t.outputs,c.outputs),null!==c.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),te(_.inputTransforms,c.inputTransforms)),$r(c)&&c.data.animation){const $=t.data;$.animation=($.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const T=f[_];T&&T.ngInherit&&T(t),T===Vn&&(i=!1)}}n=Object.getPrototypeOf(n)}!function Pn(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=Cn(c.hostAttrs,i=Cn(i,c.hostAttrs))}}(o)}function ye(t){return t===Er?{}:t===hn?[]:t}function se(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function fe(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function we(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}function Om(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const c=n[o];Array.isArray(c)&&c[2]&&(i[o]=c[2])}t.inputTransforms=i}function ea(t){return!!Cl(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Cl(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ls(t,n,i){return t[n]=i}function uf(t,n){return t[n]}function hs(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ra(t,n,i,o){const c=hs(t,n,i);return hs(t,n+1,o)||c}function bl(t,n,i,o,c){const f=Ra(t,n,i,o);return hs(t,n+2,c)||f}function Fs(t,n,i,o,c,f){const _=Ra(t,n,i,o);return Ra(t,n+2,c,f)||_}function cf(t,n,i,o){const c=ut();return hs(c,rr(),n)&&(Rn(),Ao(Kn(),c,t,n,i,o)),cf}function Sl(t,n,i,o,c,f){const T=Ra(t,function Ds(){return Yt.lFrame.bindingIndex}(),i,c);return as(2),T?n+ue(i)+o+ue(c)+f:An}function $p(t,n,i,o,c,f,_,T){const C=ut(),x=Rn(),$=t+yn,Y=x.firstCreatePass?function Gm(t,n,i,o,c,f,_,T,C){const x=n.consts,$=ef(n,t,4,_||null,As(x,T));Sp(n,i,$,As(x,C)),qa(n,$);const Y=$.tView=py(2,$,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,$),Y.queries=n.queries.embeddedTView($)),$}($,x,C,n,i,o,c,f,_):x.data[$];Os(Y,!1);const ge=Km(x,C,Y,t);Gl()&&Mh(x,C,ge,Y),hi(ge,C),Mp(C,C[$]=wy(ge,C,ge,Y)),Is(Y)&&hy(x,C,Y),null!=_&&fy(C,Y,T)}let Km=function qm(t,n,i,o){return qs(!0),n[$t].createComment("")};function zp(t){return function ha(t,n){return t[n]}(function ah(){return Yt.lFrame.contextLView}(),yn+t)}function Ol(t,n,i){const o=ut();return hs(o,rr(),n)&&function Ki(t,n,i,o,c,f,_,T){const C=Ri(n,i);let $,x=n.inputs;!T&&null!=x&&($=x[o])?(Wd(t,i,$,o,c),Nn(n)&&function bm(t,n){const i=nr(n,t);16&i[Zt]||(i[Zt]|=64)}(i,n.index)):3&n.type&&(o=function vy(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=_?_(c,n.value||"",o):c,f.setProperty(C,o,c))}(Rn(),Kn(),o,t,n,o[$t],i,!1),Ol}function Tu(t,n,i,o,c){const _=c?"class":"style";Wd(t,i,n.inputs[_],_,o)}function Wp(t,n,i,o){const c=ut(),f=Rn(),_=yn+t,T=c[$t],C=f.firstCreatePass?function Qm(t,n,i,o,c,f){const _=n.consts,C=ef(n,t,2,o,As(_,c));return Sp(n,i,C,As(_,f)),null!==C.attrs&&sf(C,C.attrs,!1),null!==C.mergedAttrs&&sf(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(_,f,c,n,i,o):f.data[_],x=Ym(f,c,C,T,n,t);c[_]=x;const $=Is(C);return Os(C,!0),Zf(T,x,C),32!=(32&C.flags)&&Gl()&&Mh(f,c,x,C),0===function ss(){return Yt.lFrame.elementDepthCount}()&&hi(x,c),function Hl(){Yt.lFrame.elementDepthCount++}(),$&&(hy(f,c,C),Dm(f,C,c)),null!==o&&fy(c,C),Wp}function mf(){let t=Ln();ga()?kc():(t=t.parent,Os(t,!1));const n=t;(function Oc(t){return Yt.skipHydrationRootTNode===t})(n)&&function os(){Yt.skipHydrationRootTNode=null}(),function pa(){Yt.lFrame.elementDepthCount--}();const i=Rn();return i.firstCreatePass&&(qa(i,t),xo(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function lg(t){return 0!=(8&t.flags)}(n)&&Tu(i,n,ut(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Df(t){return 0!=(16&t.flags)}(n)&&Tu(i,n,ut(),n.stylesWithoutHost,!1),mf}function Gp(t,n,i,o){return Wp(t,n,i,o),mf(),Gp}let Ym=(t,n,i,o,c,f)=>(qs(!0),m(o,c,function Uo(){return Yt.lFrame.currentNamespace}()));function _f(t,n,i){const o=ut(),c=Rn(),f=t+yn,_=c.firstCreatePass?function Fy(t,n,i,o,c){const f=n.consts,_=As(f,o),T=ef(n,t,8,"ng-container",_);return null!==_&&sf(T,_,!0),Sp(n,i,T,As(f,c)),null!==n.queries&&n.queries.elementStart(n,T),T}(f,c,o,n,i):c.data[f];Os(_,!0);const T=e_(c,o,_,t);return o[f]=T,Gl()&&Mh(c,o,T,_),hi(T,o),Is(_)&&(hy(c,o,_),Dm(c,_,o)),null!=i&&fy(o,_),_f}function Kp(){let t=Ln();const n=Rn();return ga()?kc():(t=t.parent,Os(t,!1)),n.firstCreatePass&&(qa(n,t),xo(t)&&n.queries.elementEnd(t)),Kp}function Zm(t,n,i){return _f(t,n,i),Kp(),Zm}let e_=(t,n,i,o)=>(qs(!0),nl(n[$t],""));function Ec(){return ut()}function na(t){return!!t&&"function"==typeof t.then}function yf(t){return!!t&&"function"==typeof t.subscribe}function Xd(t,n,i,o){const c=ut(),f=Rn(),_=Ln();return function vf(t,n,i,o,c,f,_){const T=Is(o),x=t.firstCreatePass&&Dy(t),$=n[Wn],Y=Rm(n);let ge=!0;if(3&o.type||_){const Tt=Ri(o,n),xt=_?_(Tt):Tt,Kt=Y.length,ft=_?jn=>_(sr(jn[o.index])):o.index;let En=null;if(!_&&T&&(En=function xr(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===i&&c[f+1]===o){const T=n[ts],C=c[f+2];return T.length>C?T[C]:null}"string"==typeof _&&(f+=2)}return null}(t,n,c,o.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=f,En.__ngLastListenerFn__=f,ge=!1;else{f=Zd(o,n,$,f,!1);const jn=i.listen(xt,c,f);Y.push(f,jn),x&&x.push(c,ft,Kt,Kt+1)}}else f=Zd(o,n,$,f,!1);const De=o.outputs;let et;if(ge&&null!==De&&(et=De[c])){const Tt=et.length;if(Tt)for(let xt=0;xt<Tt;xt+=2){const Dr=n[et[xt]][et[xt+1]].subscribe(f),Po=Y.length;Y.push(f,Dr),x&&x.push(c,o.index,Po,-(Po+1))}}}(f,c,c[$t],_,t,n,o),Xd}function Jd(t,n,i,o){try{return Yr(6,n,i),!1!==i(o)}catch(c){return Pm(t,c),!1}finally{Yr(7,n,i)}}function Zd(t,n,i,o,c){return function f(_){if(_===Function)return o;Jh(t.componentOffset>-1?nr(t.index,n):n);let C=Jd(n,i,o,_),x=f.__ngNextListenerFn__;for(;x;)C=Jd(n,i,x,_)&&C,x=x.__ngNextListenerFn__;return c&&!1===C&&_.preventDefault(),C}}function Uy(t=1){return function Ct(t){return(Yt.lFrame.contextLView=function dn(t,n){for(;t>0;)n=n[cr],t--;return n}(t,Yt.lFrame.contextLView))[Wn]}(t)}function By(t,n){let i=null;const o=function Na(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(!(1&i))return n[i+1]}return null}(t);for(let c=0;c<n.length;c++){const f=n[c];if("*"!==f){if(null===o?Ni(t,f,!0):ms(o,f))return c}else i=c}return i}function jy(t){const n=ut()[er][gr];if(!n.projection){const o=n.projection=Yu(t?t.length:1,null),c=o.slice();let f=n.child;for(;null!==f;){const _=t?By(f,t):0;null!==_&&(c[_]?c[_].projectionNext=f:o[_]=f,c[_]=f),f=f.next}}}function $y(t,n=0,i){const o=ut(),c=Rn(),f=ef(c,yn+t,16,null,i||null);null===f.projection&&(f.projection=n),kc(),(!o[ti]||za())&&32!=(32&f.flags)&&function Rg(t,n,i){C_(n[$t],0,n,i,ls(t,i,n),il(i.parent||n[gr],i,n))}(c,o,f)}function qp(t,n){return t<<17|n<<2}function Rs(t){return t>>17&32767}function Ll(t){return 2|t}function Pa(t){return(131068&t)>>2}function Qp(t,n){return-131069&t|n<<2}function Fl(t){return 1|t}function Ky(t,n,i,o,c){const f=t[i+1],_=null===n;let T=o?Rs(f):Pa(f),C=!1;for(;0!==T&&(!1===C||_);){const $=t[T+1];qy(t[T],n)&&(C=!0,t[T+1]=o?Fl($):Ll($)),T=o?Rs($):Pa($)}C&&(t[i+1]=o?Ll(f):Fl(f))}function qy(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Xu(t,n)>=0}const fi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function o_(t){return t.substring(fi.key,fi.keyEnd)}function Yp(t){return t.substring(fi.value,fi.valueEnd)}function Ma(t,n){const i=fi.textEnd;return i===n?-1:(n=fi.keyEnd=function a_(t,n,i){for(;n<i&&t.charCodeAt(n)>32;)n++;return n}(t,fi.key=n,i),Vl(t,n,i))}function Xy(t,n){const i=fi.textEnd;let o=fi.key=Vl(t,n,i);return i===o?-1:(o=fi.keyEnd=function Xp(t,n,i){let o;for(;n<i&&(45===(o=t.charCodeAt(n))||95===o||(-33&o)>=65&&(-33&o)<=90||o>=48&&o<=57);)n++;return n}(t,o,i),o=u_(t,o,i),o=fi.value=Vl(t,o,i),o=fi.valueEnd=function Jp(t,n,i){let o=-1,c=-1,f=-1,_=n,T=_;for(;_<i;){const C=t.charCodeAt(_++);if(59===C)return T;34===C||39===C?T=_=Jy(t,C,_,i):n===_-4&&85===f&&82===c&&76===o&&40===C?T=_=Jy(t,41,_,i):C>32&&(T=_),f=c,c=o,o=-33&C}return T}(t,o,i),u_(t,o,i))}function th(t){fi.key=0,fi.keyEnd=0,fi.value=0,fi.valueEnd=0,fi.textEnd=t.length}function Vl(t,n,i){for(;n<i&&t.charCodeAt(n)<=32;)n++;return n}function u_(t,n,i,o){return(n=Vl(t,n,i))<i&&n++,n}function Jy(t,n,i,o){let c=-1,f=i;for(;f<o;){const _=t.charCodeAt(f++);if(_==n&&92!==c)return f;c=92==_&&92===c?0:_}throw new Error}function Ul(t,n,i){return Vs(t,n,i,!1),Ul}function Zp(t,n){return Vs(t,n,null,!0),Zp}function Do(t){Co(d_,c_,t,!1)}function c_(t,n){for(let i=function Yy(t){return th(t),Xy(t,Vl(t,0,fi.textEnd))}(n);i>=0;i=Xy(n,i))d_(t,o_(n),Yp(n))}function eg(t){Co(rh,ra,t,!0)}function ra(t,n){for(let i=function Qy(t){return th(t),Ma(t,Vl(t,0,fi.textEnd))}(n);i>=0;i=Ma(n,i))or(t,o_(n),!0)}function Vs(t,n,i,o){const c=ut(),f=Rn(),_=as(2);f.firstUpdatePass&&Tc(f,t,_,o),n!==An&&hs(c,_,n)&&R(f,f.data[vn()],c,c[$t],t,c[_+1]=function Pe(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=me(Yo(t)))),t}(n,i),o,_)}function Co(t,n,i,o){const c=Rn(),f=as(2);c.firstUpdatePass&&Tc(c,null,f,o);const _=ut();if(i!==An&&hs(_,f,i)){const T=c.data[vn()];if(Ge(T,o)&&!l_(c,f)){let C=o?T.classesWithoutHost:T.stylesWithoutHost;null!==C&&(i=tt(C,i||"")),Tu(c,T,_,i,o)}else!function p(t,n,i,o,c,f,_,T){c===An&&(c=hn);let C=0,x=0,$=0<c.length?c[0]:null,Y=0<f.length?f[0]:null;for(;null!==$||null!==Y;){const ge=C<c.length?c[C+1]:void 0,De=x<f.length?f[x+1]:void 0;let Tt,et=null;$===Y?(C+=2,x+=2,ge!==De&&(et=Y,Tt=De)):null===Y||null!==$&&$<Y?(C+=2,et=$):(x+=2,et=Y,Tt=De),null!==et&&R(t,n,i,o,et,Tt,_,T),$=C<c.length?c[C]:null,Y=x<f.length?f[x]:null}}(c,T,_,_[$t],_[f+1],_[f+1]=function rv(t,n,i){if(null==i||""===i)return hn;const o=[],c=Yo(i);if(Array.isArray(c))for(let f=0;f<c.length;f++)t(o,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&t(o,f,c[f]);else"string"==typeof c&&n(o,c);return o}(t,n,i),o,f)}}function l_(t,n){return n>=t.expandoStartIndex}function Tc(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[vn()],_=l_(t,i);Ge(f,o)&&null===n&&!_&&(n=!1),n=function Zy(t,n,i,o){const c=function Uu(t){const n=Yt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=Qi(i=nh(null,t,n,i,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==c)if(i=nh(c,t,n,i,o),null===f){let C=function ev(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Pa(o))return t[Rs(o)]}(t,n,o);void 0!==C&&Array.isArray(C)&&(C=nh(null,t,n,C[1],o),C=Qi(C,n.attrs,o),function tv(t,n,i,o){t[Rs(i?n.classBindings:n.styleBindings)]=o}(t,n,o,C))}else f=function nv(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=Qi(o,t[f].hostAttrs,i);return Qi(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function Jr(t,n,i,o,c,f){let _=f?n.classBindings:n.styleBindings,T=Rs(_),C=Pa(_);t[o]=i;let $,x=!1;if(Array.isArray(i)?($=i[1],(null===$||Xu(i,$)>0)&&(x=!0)):$=i,c)if(0!==C){const ge=Rs(t[T+1]);t[o+1]=qp(ge,T),0!==ge&&(t[ge+1]=Qp(t[ge+1],o)),t[T+1]=function II(t,n){return 131071&t|n<<17}(t[T+1],o)}else t[o+1]=qp(T,0),0!==T&&(t[T+1]=Qp(t[T+1],o)),T=o;else t[o+1]=qp(C,0),0===T?T=o:t[C+1]=Qp(t[C+1],o),C=o;x&&(t[o+1]=Ll(t[o+1])),Ky(t,$,o,!0),Ky(t,$,o,!1),function TI(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&Xu(f,n)>=0&&(i[o+1]=Fl(i[o+1]))}(n,$,t,o,f),_=qp(T,C),f?n.classBindings=_:n.styleBindings=_}(c,f,n,i,_,o)}}function nh(t,n,i,o,c){let f=null;const _=i.directiveEnd;let T=i.directiveStylingLast;for(-1===T?T=i.directiveStart:T++;T<_&&(f=n[T],o=Qi(o,f.hostAttrs,c),f!==t);)T++;return null!==t&&(i.directiveStylingLast=T),o}function Qi(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?c=_:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),or(t,_,!!i||n[++f]))}return void 0===t?null:t}function d_(t,n,i){or(t,n,Yo(i))}function rh(t,n,i){const o=String(n);""!==o&&!o.includes(" ")&&or(t,o,i)}function R(t,n,i,o,c,f,_,T){if(!(3&n.type))return;const C=t.data,x=C[T+1],$=function If(t){return 1==(1&t)}(x)?L(C,n,i,c,Pa(x),_):void 0;K($)||(K(f)||function vI(t){return 2==(2&t)}(x)&&(f=L(C,null,i,c,T,_)),function b_(t,n,i,o,c){if(n)c?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:Qc.DashCase;null==c?t.removeStyle(i,o,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=Qc.Important),t.setStyle(i,o,c,f))}}(o,_,fo(vn(),i),c,f))}function L(t,n,i,o,c,f){const _=null===n;let T;for(;c>0;){const C=t[c],x=Array.isArray(C),$=x?C[1]:C,Y=null===$;let ge=i[c+1];ge===An&&(ge=Y?hn:void 0);let De=Y?mh(ge,o):$===o?ge:void 0;if(x&&!K(De)&&(De=mh(C,o)),K(De)&&(T=De,_))return T;const et=t[c+1];c=_?Rs(et):Pa(et)}if(null!==n){let C=f?n.residualClasses:n.residualStyles;null!=C&&(T=mh(C,o))}return T}function K(t){return void 0!==t}function Ge(t,n){return 0!=(t.flags&(n?8:16))}function bt(t,n=""){const i=ut(),o=Rn(),c=t+yn,f=o.firstCreatePass?ef(o,c,1,n,null):o.data[c],_=yr(o,i,f,n,t);i[c]=_,Gl()&&Mh(o,i,_,f),Os(f,!1)}let yr=(t,n,i,o,c)=>(qs(!0),function uc(t,n){return t.createText(n)}(n[$t],o));function Mi(t){return Ti("",t,""),Mi}function Ti(t,n,i){const o=ut(),c=function _c(t,n,i,o){return hs(t,rr(),i)?n+ue(i)+o:An}(o,t,n,i);return c!==An&&Sa(o,vn(),c),Ti}function wc(t,n,i,o,c){const f=ut(),_=Sl(f,t,n,i,o,c);return _!==An&&Sa(f,vn(),_),wc}const Tf=void 0;var Cw=["en",[["a","p"],["AM","PM"],Tf],[["AM","PM"],Tf,Tf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Tf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Tf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Tf,"{1} 'at' {0}",Tf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Dw(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let ng={};function AI(t){const n=function bw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=UE(n);if(i)return i;const o=n.split("-")[0];if(i=UE(o),i)return i;if("en"===o)return Cw;throw new Te(701,!1)}function VE(t){return AI(t)[rg.PluralCase]}function UE(t){return t in ng||(ng[t]=bn.ng&&bn.ng.common&&bn.ng.common.locales&&bn.ng.common.locales[t]),ng[t]}var rg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(rg||{});const ig="en-US";let BE=ig;function bI(t,n,i,o,c){if(t=st(t),Array.isArray(t))for(let f=0;f<t.length;f++)bI(t[f],n,i,o,c);else{const f=Rn(),_=ut(),T=Ln();let C=hl(t)?t:st(t.provide);const x=xd(t),$=1048575&T.providerIndexes,Y=T.directiveStart,ge=T.providerIndexes>>20;if(hl(t)||!t.multi){const De=new va(x,c,zd),et=RI(C,n,c?$:$+ge,Y);-1===et?(Za(Ja(T,_),f,C),SI(f,t,n.length),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(De),_.push(De)):(i[et]=De,_[et]=De)}else{const De=RI(C,n,$+ge,Y),et=RI(C,n,$,$+ge),xt=et>=0&&i[et];if(c&&!xt||!c&&!(De>=0&&i[De])){Za(Ja(T,_),f,C);const Kt=function DA(t,n,i,o,c){const f=new va(t,i,zd);return f.multi=[],f.index=n,f.componentProviders=0,h0(f,c,o&&!i),f}(c?AA:wA,i.length,c,o,x);!c&&xt&&(i[et].providerFactory=Kt),SI(f,t,n.length,0),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(Kt),_.push(Kt)}else SI(f,t,De>-1?De:et,h0(i[c?et:De],x,!c&&o));!c&&o&&xt&&i[et].componentProviders++}}}function SI(t,n,i,o){const c=hl(n),f=function Pv(t){return!!t.useClass}(n);if(c||f){const C=(f?st(n.useClass):n).prototype.ngOnDestroy;if(C){const x=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const $=x.indexOf(i);-1===$?x.push(i,[o,C]):x[$+1].push(o,C)}else x.push(i,C)}}}function h0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function RI(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function wA(t,n,i,o){return PI(this.multi,[])}function AA(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,T=ks(i,i[_t],this.providerFactory.index,o);f=T.slice(0,_),PI(c,f);for(let C=_;C<T.length;C++)f.push(T[C])}else f=[],PI(c,f);return f}function PI(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function f0(t,n=[]){return i=>{i.providersResolver=(o,c)=>function TA(t,n,i){const o=Rn();if(o.firstCreatePass){const c=$r(t);bI(i,o.data,o.blueprint,c,!0),bI(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class wf{}class p0{}function CA(t,n){return new MI(t,n??null,[])}class MI extends wf{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new w(this);const c=Mn(n);this._bootstrapComponents=yu(c.bootstrap),this._r3Injector=Xh(n,i,[{provide:wf,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver},...o],me(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class NI extends p0{constructor(n){super(),this.moduleType=n}create(n){return new MI(this.moduleType,n,[])}}class g0 extends wf{constructor(n){super(),this.componentFactoryResolver=new w(this),this.instance=null;const i=new pu([...n.providers,{provide:wf,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],n.parent||jh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function m0(t,n,i=null){return new g0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let SA=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=U_(0,i.type),c=o.length>0?m0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ot({token:t,providedIn:"environment",factory:()=>new t(lt(Xo))})}}return t})();function _0(t){t.getStandaloneInjector=n=>n.get(SA).getOrCreateStandaloneInjector(t)}function A0(t,n,i){const o=Ar()+t,c=ut();return c[o]===An?Ls(c,o,i?n.call(i):n()):uf(c,o)}function D0(t,n,i,o){return function x0(t,n,i,o,c,f){const _=n+i;return hs(t,_,c)?Ls(t,_+1,f?o.call(f,c):o(c)):__(t,_+1)}(ut(),Ar(),t,n,i,o)}function C0(t,n,i,o,c){return function O0(t,n,i,o,c,f,_){const T=n+i;return Ra(t,T,c,f)?Ls(t,T+2,_?o.call(_,c,f):o(c,f)):__(t,T+2)}(ut(),Ar(),t,n,i,o,c)}function b0(t,n,i,o,c,f){return function k0(t,n,i,o,c,f,_,T){const C=n+i;return bl(t,C,c,f,_)?Ls(t,C+3,T?o.call(T,c,f,_):o(c,f,_)):__(t,C+3)}(ut(),Ar(),t,n,i,o,c,f)}function S0(t,n,i,o,c,f,_){return function L0(t,n,i,o,c,f,_,T,C){const x=n+i;return Fs(t,x,c,f,_,T)?Ls(t,x+4,C?o.call(C,c,f,_,T):o(c,f,_,T)):__(t,x+4)}(ut(),Ar(),t,n,i,o,c,f,_)}function R0(t,n,i,o,c,f,_,T){const C=Ar()+t,x=ut(),$=Fs(x,C,i,o,c,f);return hs(x,C+4,_)||$?Ls(x,C+5,T?n.call(T,i,o,c,f,_):n(i,o,c,f,_)):uf(x,C+5)}function P0(t,n,i,o,c,f,_,T,C){const x=Ar()+t,$=ut(),Y=Fs($,x,i,o,c,f);return Ra($,x+4,_,T)||Y?Ls($,x+6,C?n.call(C,i,o,c,f,_,T):n(i,o,c,f,_,T)):uf($,x+6)}function M0(t,n,i,o,c,f,_,T,C,x){const $=Ar()+t,Y=ut();let ge=Fs(Y,$,i,o,c,f);return bl(Y,$+4,_,T,C)||ge?Ls(Y,$+7,x?n.call(x,i,o,c,f,_,T,C):n(i,o,c,f,_,T,C)):uf(Y,$+7)}function N0(t,n,i,o){return function F0(t,n,i,o,c,f){let _=n+i,T=!1;for(let C=0;C<c.length;C++)hs(t,_++,c[C])&&(T=!0);return T?Ls(t,_,o.apply(f,c)):__(t,_)}(ut(),Ar(),t,n,i,o)}function __(t,n){const i=t[n];return i===An?void 0:i}function WA(){return this._results[Symbol.iterator]()}class OI{get changes(){return this._changes||(this._changes=new Zo)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=OI.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=WA)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=function di(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function tu(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function KA(t,n,i,o=!0){const c=n[_t];if(function j(t,n,i,o){const c=dr+o,f=i.length;o>0&&(i[c-1][_n]=n),o<f-dr?(n[_n]=i[c],gh(i,dr+o,n)):(i.push(n),n[_n]=null),n[mn]=i;const _=n[Li];null!==_&&i!==_&&function ie(t,n){const i=t[so];n[er]!==n[mn][mn][er]&&(t[js]=!0),null===i?t[so]=[n]:i.push(n)}(_,n);const T=n[Fi];null!==T&&T.insertView(t),n[Zt]|=128}(c,n,t,i),o){const f=Yf(i,t),_=n[$t],T=du(_,t[_i]);null!==T&&function h(t,n,i,o,c,f){o[ur]=c,o[gr]=n,Nh(t,o,i,1,c,f)}(c,t[gr],_,n,T,f)}}let v_=(()=>{class t{static{this.__NG_ELEMENT_ID__=YA}}return t})();const qA=v_,QA=class extends qA{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const c=function GA(t,n,i,o){const c=n.tView,T=Ap(t,c,i,4096&t[Zt]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);T[Li]=t[n.index];const x=t[Fi];return null!==x&&(T[Fi]=x.createEmbeddedView(c)),Nm(c,T,i),T}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new d(c)}};function YA(){return uv(Ln(),ut())}function uv(t,n){return 4&t.type?new QA(n,t,Il(t,n)):null}let lv=(()=>{class t{static{this.__NG_ELEMENT_ID__=nD}}return t})();function nD(){return z0(Ln(),ut())}const rD=lv,$0=class extends rD{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Il(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){const n=Wu(this._hostTNode,this._hostLView);if(Xa(n)){const i=Bc(n,this._hostLView),o=Uc(n);return new ni(i[_t].data[o+8],i)}return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=H0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(n,i,o){let c,f;"number"==typeof o?c=o:null!=o&&(c=o.index,f=o.injector);const T=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(T,c,false),T}createComponent(n,i,o,c,f){const _=n&&!function Qu(t){return"function"==typeof t}(n);let T;if(_)T=i;else{const Tt=i||{};T=Tt.index,o=Tt.injector,c=Tt.projectableNodes,f=Tt.environmentInjector||Tt.ngModuleRef}const C=_?n:new q(gn(n)),x=o||this.parentInjector;if(!f&&null==C.ngModule){const xt=(_?x:this.parentInjector).get(Xo,null);xt&&(f=xt)}gn(C.componentType??{});const De=C.create(x,c,null,f);return this.insertImpl(De.hostView,T,false),De}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const c=n._lView;if(function ku(t){return ln(t[mn])}(c)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const x=c[mn],$=new $0(x,x[gr],x[mn]);$.detach($.indexOf(n))}}const _=this._adjustIndex(i),T=this._lContainer;return KA(T,c,_,!o),n.attachToViewContainerRef(),gh(kI(T),_,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=H0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Qe(this._lContainer,i);o&&(nd(kI(this._lContainer),i),Dt(o[_t],o))}detach(n){const i=this._adjustIndex(n,-1),o=Qe(this._lContainer,i);return o&&null!=nd(kI(this._lContainer),i)?new d(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function H0(t){return t[8]}function kI(t){return t[8]||(t[8]=[])}function z0(t,n){let i;const o=n[t.index];return ln(o)?i=o:(i=wy(o,n,null,t),n[t.index]=i,Mp(n,i)),W0(i,n,t,o),new $0(i,t,n)}let W0=function G0(t,n,i,o){if(t[_i])return;let c;c=8&i.type?sr(o):function iD(t,n){const i=t[$t],o=i.createComment(""),c=Ri(n,t);return To(i,du(i,c),o,function wd(t,n){return t.nextSibling(n)}(i,c),!1),o}(n,i),t[_i]=c};class LI{constructor(n){this.queryList=n,this.matches=null}clone(){return new LI(this.queryList)}setDirty(){this.queryList.setDirty()}}class FI{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const _=i.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new FI(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==tT(n,i).matches&&this.queries[i].setDirty()}}class K0{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class VI{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new VI(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class UI{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new UI(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,aD(i,f)),this.matchTNodeWithReadOption(n,i,Gu(i,n,f,!1,!1))}else o===v_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Gu(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===Fd||c===lv||c===v_&&4&i.type)this.addMatch(i.index,-2);else{const f=Gu(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function aD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function cD(t,n,i,o){return-1===i?function uD(t,n){return 11&t.type?Il(t,n):4&t.type?uv(t,n):null}(n,t):-2===i?function lD(t,n,i){return i===Fd?Il(n,t):i===v_?uv(n,t):i===lv?z0(n,t):void 0}(t,n,o):ks(t,t[_t],i,n)}function q0(t,n,i,o){const c=n[Fi].queries[o];if(null===c.matches){const f=t.data,_=i.matches,T=[];for(let C=0;C<_.length;C+=2){const x=_[C];T.push(x<0?null:cD(n,f[x],_[C+1],i.metadata.read))}c.matches=T}return c.matches}function BI(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const _=q0(t,n,c,i);for(let T=0;T<f.length;T+=2){const C=f[T];if(C>0)o.push(_[T/2]);else{const x=f[T+1],$=n[-C];for(let Y=dr;Y<$.length;Y++){const ge=$[Y];ge[Li]===ge[mn]&&BI(ge[_t],ge,x,o)}if(null!==$[so]){const Y=$[so];for(let ge=0;ge<Y.length;ge++){const De=Y[ge];BI(De[_t],De,x,o)}}}}}return o}function Q0(t){const n=ut(),i=Rn(),o=Fc();E(o+1);const c=tT(i,o);if(t.dirty&&function po(t){return 4==(4&t[Zt])}(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?BI(i,n,o,[]):q0(i,n,c,o);t.reset(f,hm),t.notifyOnChanges()}return!0}return!1}function Y0(t,n,i){const o=Rn();o.firstCreatePass&&(eT(o,new K0(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),Z0(o,ut(),n)}function X0(t,n,i,o){const c=Rn();if(c.firstCreatePass){const f=Ln();eT(c,new K0(n,i,o),f.index),function hD(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}Z0(c,ut(),i)}function J0(){return function dD(t,n){return t[Fi].queries[n].queryList}(ut(),Fc())}function Z0(t,n,i){const o=new OI(4==(4&i));(function Cp(t,n,i,o){const c=Rm(n);c.push(i),t.firstCreatePass&&Dy(t).push(o,c.length-1)})(t,n,o,o.destroy),null===n[Fi]&&(n[Fi]=new FI),n[Fi].queries.push(new LI(o))}function eT(t,n,i){null===t.queries&&(t.queries=new VI),t.queries.track(new UI(n,i))}function tT(t,n){return t.queries.getByIndex(n)}function nT(t,n){return uv(t,n)}function jI(t){return!!Mn(t)}const vT=new at("Application Initializer");let GI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=oe(vT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const f=c();if(na(f))i.push(f);else if(yf(f)){const _=new Promise((T,C)=>{f.subscribe({complete:T,error:C})});i.push(_)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),IT=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const hv=new at("LocaleId",{providedIn:"root",factory:()=>oe(hv,qt.Optional|qt.SkipSelf)||function xD(){return typeof $localize<"u"&&$localize.locale||ig}()}),OD=new at("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let ET=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new G.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class LD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let FD=(()=>{class t{compileModuleSync(i){return new NI(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=yu(Mn(i).declarations).reduce((_,T)=>{const C=gn(T);return C&&_.push(new q(C)),_},[]);return new LD(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const DT=new at(""),CT=new at("");let QI,sC=(()=>{class t{constructor(i,o,c){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,QI||(function oC(t){QI=t}(c),c.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ii.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,c){return[]}static{this.\u0275fac=function(o){return new(o||t)(lt(ii),lt(bT),lt(CT))}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}}return t})(),bT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return QI?.findTestabilityInTree(this,i,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),ih=null;const ST=new at("AllowMultipleToken"),YI=new at("PlatformDestroyListeners"),XI=new at("appBootstrapListener");class cC{constructor(n,i){this.name=n,this.token=i}}function MT(t,n,i=[]){const o=`Platform: ${n}`,c=new at(o);return(f=[])=>{let _=JI();if(!_||_.injector.get(ST,!1)){const T=[...i,...f,{provide:c,useValue:!0}];t?t(T):function lC(t){if(ih&&!ih.get(ST,!1))throw new Te(400,!1);(function RT(){!function Rc(t){Ou=t}(()=>{throw new Te(600,!1)})})(),ih=t;const n=t.get(xT);(function PT(t){t.get(im,null)?.forEach(i=>i())})(t)}(function NT(t=[],n){return Jo.create({name:n,providers:[{provide:up,useValue:"platform"},{provide:YI,useValue:new Set([()=>ih=null])},...t]})}(T,o))}return function hC(t){const n=JI();if(!n)throw new Te(401,!1);return n}()}}function JI(){return ih?.get(xT)??null}let xT=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const c=function fC(t="zone.js",n){return"noop"===t?new gu:"zone.js"===t?new ii(n):t}(o?.ngZone,function OT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return c.run(()=>{const f=function bA(t,n,i){return new MI(t,n,i)}(i.moduleType,this.injector,function UT(t){return[{provide:ii,useFactory:t},{provide:ll,multi:!0,useFactory:()=>{const n=oe(gC,{optional:!0});return()=>n.initialize()}},{provide:VT,useFactory:pC},{provide:jd,useFactory:mu}]}(()=>c)),_=f.injector.get(hc,null);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:C=>{_.handleError(C)}});f.onDestroy(()=>{pv(this._modules,f),T.unsubscribe()})}),function kT(t,n,i){try{const o=i();return na(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(_,c,()=>{const T=f.injector.get(GI);return T.runInitializers(),T.donePromise.then(()=>(function jE(t){ot(t,"Expected localeId to be defined"),"string"==typeof t&&(BE=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(hv,ig)||ig),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const c=LT({},o);return function aC(t,n,i){const o=new NI(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get(ag);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new Te(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(YI,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||t)(lt(Jo))}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function LT(t,n){return Array.isArray(n)?n.reduce(LT,t):{...t,...n}}let ag=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(VT),this.zoneIsStable=oe(jd),this.componentTypes=[],this.components=[],this.isStable=oe(ET).hasPendingTasks.pipe((0,He.n)(i=>i?(0,de.of)(!1):this.zoneIsStable),(0,Se.F)(),(0,ve.u)()),this._injector=oe(Xo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const c=i instanceof mp;if(!this._injector.get(GI).done)throw!c&&_s(i),new Te(405,!1);let _;_=c?i:this._injector.get(Qh).resolveComponentFactory(i),this.componentTypes.push(_.componentType);const T=function uC(t){return t.isBoundToModule}(_)?void 0:this._injector.get(wf),x=_.create(Jo.NULL,[],o||_.selector,T),$=x.location.nativeElement,Y=x.injector.get(DT,null);return Y?.registerApplication($),x.onDestroy(()=>{this.detachView(x.hostView),pv(this.components,x),Y?.unregisterApplication($)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;pv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(XI,[]);o.push(...this._bootstrapListeners),o.forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>pv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Te(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const VT=new at("",{providedIn:"root",factory:()=>oe(hc).handleError.bind(void 0)});function pC(){const t=oe(ii),n=oe(hc);return i=>t.runOutsideAngular(()=>n.handleError(i))}let gC=(()=>{class t{constructor(){this.zone=oe(ii),this.applicationRef=oe(ag)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _C(){return!1}let yC=(()=>{class t{static{this.__NG_ELEMENT_ID__=vC}}return t})();function vC(t){return function IC(t,n,i){if(Nn(t)&&!i){const o=nr(t.index,n);return new d(o,o)}return 47&t.type?new d(n[er],n):null}(Ln(),ut(),16==(16&t))}class zT{constructor(){}supports(n){return ea(n)}create(n){return new DC(n)}}const AC=(t,n)=>n;class DC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||AC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const _=!o||i&&i.currentIndex<GT(o,c,f)?i:o,T=GT(_,c,f),C=_.currentIndex;if(_===o)c--,o=o._nextRemoved;else if(i=i._next,null==_.previousIndex)c++;else{f||(f=[]);const x=T-c,$=C-c;if(x!=$){for(let ge=0;ge<x;ge++){const De=ge<f.length?f[ge]:f[ge]=0,et=De+ge;$<=et&&et<x&&(f[ge]=De+1)}f[_.previousIndex]=$-x}}T!==C&&n(_,T,C)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!ea(n))throw new Te(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,_,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let T=0;T<this.length;T++)f=n[T],_=this._trackByFn(T,f),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,f,_,T)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,_,T),o=!0),i=i._next}else c=0,function cI(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,T=>{_=this._trackByFn(c,T),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,T,_,c)),Object.is(i.item,T)||this._addIdentityChange(i,T)):(i=this._mismatch(i,T,_,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new CC(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new WT),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WT),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class WT{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new bC,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GT(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class KT{constructor(){}supports(n){return n instanceof Map||Cl(n)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||Cl(n)))throw new Te(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qT(){return new rE([new zT])}let rE=(()=>{class t{static{this.\u0275prov=Ot({token:t,providedIn:"root",factory:qT})}constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||qT()),deps:[[t,new iu,new wa]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new Te(901,!1)}}return t})();function QT(){return new iE([new KT])}let iE=(()=>{class t{static{this.\u0275prov=Ot({token:t,providedIn:"root",factory:QT})}constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||QT()),deps:[[t,new iu,new wa]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new Te(901,!1)}}return t})();const NC=MT(null,"core",[]);let xC=(()=>{class t{constructor(i){}static{this.\u0275fac=function(o){return new(o||t)(lt(ag))}}static{this.\u0275mod=La({type:t})}static{this.\u0275inj=sn({})}}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t,n=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?n:Number(t)}function KC(t){const n=gn(t);if(!n)return null;const i=new q(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1977:(Rt,Be,U)=>{U.d(Be,{DS:()=>Jn,$z:()=>je,UB:()=>on,yy:()=>Je,ZP:()=>wt,AU:()=>Ht,CP:()=>Oe,gF:()=>Jt}),U(7955);var ee=U(177),re=U(7705),Q=U(1825),G=U(9253),de=U(1413),ve=U(7673),He=U(1985),Se=U(8455),X=U(7786),te=U(941),me=U(5558),tt=U(6354),Ye=U(6129);class yt extends de.B{constructor(St=1/0,ce=1/0,pe=Ye.U){super(),this._bufferSize=St,this._windowTime=ce,this._timestampProvider=pe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ce===1/0,this._bufferSize=Math.max(1,St),this._windowTime=Math.max(1,ce)}next(St){const{isStopped:ce,_buffer:pe,_infiniteTimeWindow:be,_timestampProvider:Ae,_windowTime:We}=this;ce||(pe.push(St),!be&&pe.push(Ae.now()+We)),this._trimBuffer(),super.next(St)}_subscribe(St){this._throwIfClosed(),this._trimBuffer();const ce=this._innerSubscribe(St),{_infiniteTimeWindow:pe,_buffer:be}=this,Ae=be.slice();for(let We=0;We<Ae.length&&!St.closed;We+=pe?1:2)St.next(Ae[We]);return this._checkFinalizedStatuses(St),ce}_trimBuffer(){const{_bufferSize:St,_timestampProvider:ce,_buffer:pe,_infiniteTimeWindow:be}=this,Ae=(be?1:2)*St;if(St<1/0&&Ae<pe.length&&pe.splice(0,pe.length-Ae),!be){const We=ce.now();let Le=0;for(let ot=1;ot<pe.length&&pe[ot]<=We;ot+=2)Le=ot;Le&&pe.splice(0,Le+1)}}}var st=U(7647);function vt(Pt,St,ce){let pe,be=!1;return Pt&&"object"==typeof Pt?({bufferSize:pe=1/0,windowTime:St=1/0,refCount:be=!1,scheduler:ce}=Pt):pe=Pt??1/0,(0,st.u)({connector:()=>new yt(pe,St,ce),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:be})}var dt=U(1594),Vt=U(8071);function _e(Pt,St){return(0,Vt.T)(St)?(0,me.n)(()=>Pt,St):(0,me.n)(()=>Pt)}var Te=U(6745),Ke=U(5964);U(7935);const Oe=new re.nKC("angularfire2.auth.use-emulator"),Je=new re.nKC("angularfire2.auth.settings"),wt=new re.nKC("angularfire2.auth.tenant-id"),je=new re.nKC("angularfire2.auth.langugage-code"),Ht=new re.nKC("angularfire2.auth.use-device-language"),on=new re.nKC("angularfire.auth.persistence"),Jt=(Pt,St,ce,pe,be,Ae,We,Le)=>(0,G.BM)(`${Pt.name}.auth`,"AngularFireAuth",Pt.name,()=>{const ot=St.runOutsideAngular(()=>Pt.auth());if(ce&&ot.useEmulator(...ce),pe&&(ot.tenantId=pe),ot.languageCode=be,Ae&&ot.useDeviceLanguage(),We)for(const[mt,$n]of Object.entries(We))ot.settings[mt]=$n;return Le&&ot.setPersistence(Le),ot},[ce,pe,be,Ae,We,Le]);let Jn=(()=>{class Pt{authState;idToken;user;idTokenResult;credential;constructor(ce,pe,be,Ae,We,Le,ot,mt,$n,zt,$e,Ot){const Hn=new de.B,sn=(0,ve.of)(void 0).pipe((0,te.Q)(We.outsideAngular),(0,me.n)(()=>Ae.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,7955)))),(0,tt.T)(()=>(0,G.iB)(ce,Ae,pe)),(0,tt.T)(ht=>Jt(ht,Ae,Le,mt,$n,zt,ot,$e)),vt({bufferSize:1,refCount:!1}));if((0,ee.Vy)(be))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ve.of)(null);else{sn.pipe((0,dt.$)()).subscribe();const ht=sn.pipe((0,me.n)(Ze=>Ze.getRedirectResult().then(Re=>Re,()=>null)),Q.U0,vt({bufferSize:1,refCount:!1})),gt=sn.pipe((0,me.n)(Ze=>new He.c(Re=>({unsubscribe:Ae.runOutsideAngular(()=>Ze.onAuthStateChanged(qe=>Re.next(qe),qe=>Re.error(qe),()=>Re.complete()))})))),Lt=sn.pipe((0,me.n)(Ze=>new He.c(Re=>({unsubscribe:Ae.runOutsideAngular(()=>Ze.onIdTokenChanged(qe=>Re.next(qe),qe=>Re.error(qe),()=>Re.complete()))}))));this.authState=ht.pipe(_e(gt),(0,Te._)(We.outsideAngular),(0,te.Q)(We.insideAngular)),this.user=ht.pipe(_e(Lt),(0,Te._)(We.outsideAngular),(0,te.Q)(We.insideAngular)),this.idToken=this.user.pipe((0,me.n)(Ze=>Ze?(0,Se.H)(Ze.getIdToken()):(0,ve.of)(null))),this.idTokenResult=this.user.pipe((0,me.n)(Ze=>Ze?(0,Se.H)(Ze.getIdTokenResult()):(0,ve.of)(null))),this.credential=(0,X.h)(ht,Hn,this.authState.pipe((0,Ke.p)(Ze=>!Ze))).pipe((0,tt.T)(Ze=>Ze?.user?Ze:null),(0,Te._)(We.outsideAngular),(0,te.Q)(We.insideAngular))}return(0,G.Gt)(this,sn,Ae,{spy:{apply:(ht,gt,Lt)=>{(ht.startsWith("signIn")||ht.startsWith("createUser"))&&Lt.then(Ze=>Hn.next(Ze))}}})}static \u0275fac=function(pe){return new(pe||Pt)(re.KVO(G.rx),re.KVO(G.uP,8),re.KVO(re.Agw),re.KVO(re.SKi),re.KVO(Q.u0),re.KVO(Oe,8),re.KVO(Je,8),re.KVO(wt,8),re.KVO(je,8),re.KVO(Ht,8),re.KVO(on,8),re.KVO(Q.Jv,8))};static \u0275prov=re.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"any"})}return Pt})()},8079:(Rt,Be,U)=>{U.d(Be,{Qe:()=>Ry,cM:()=>Py});var v=U(177),ee=U(7705),re=U(1825),Q=U(9253),G=U(1977),de=U(3236),ve=U(1985),He=U(8455),Se=U(7673),X=U(9172),te=U(9974),me=U(4360);function tt(){return(0,te.N)((a,e)=>{let r,s=!1;a.subscribe((0,me._)(e,u=>{const d=r;r=u,s&&e.next([d,u]),s=!0}))})}var wt,je,Ye=U(6354),yt=U(2816),st=U(3294),vt=U(5964),Vt=(U(7955),U(3345)),_e=U(467),Te=U(7852),Ke=U(1362),ue=U(8041),ke=U(1076),Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Je={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(ye,se,fe){fe||(fe=0);var we=Array(16);if("string"==typeof se)for(var Ce=0;16>Ce;++Ce)we[Ce]=se.charCodeAt(fe++)|se.charCodeAt(fe++)<<8|se.charCodeAt(fe++)<<16|se.charCodeAt(fe++)<<24;else for(Ce=0;16>Ce;++Ce)we[Ce]=se[fe++]|se[fe++]<<8|se[fe++]<<16|se[fe++]<<24;var Ve=ye.g[3],he=(se=ye.g[0])+(Ve^(fe=ye.g[1])&((Ce=ye.g[2])^Ve))+we[0]+3614090360&4294967295;he=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=fe+(he<<7&4294967295|he>>>25))+((he=Ve+(Ce^se&(fe^Ce))+we[1]+3905402710&4294967295)<<12&4294967295|he>>>20))+((he=Ce+(fe^Ve&(se^fe))+we[2]+606105819&4294967295)<<17&4294967295|he>>>15))+((he=fe+(se^Ce&(Ve^se))+we[3]+3250441966&4294967295)<<22&4294967295|he>>>10))+((he=se+(Ve^fe&(Ce^Ve))+we[4]+4118548399&4294967295)<<7&4294967295|he>>>25))+((he=Ve+(Ce^se&(fe^Ce))+we[5]+1200080426&4294967295)<<12&4294967295|he>>>20))+((he=Ce+(fe^Ve&(se^fe))+we[6]+2821735955&4294967295)<<17&4294967295|he>>>15))+((he=fe+(se^Ce&(Ve^se))+we[7]+4249261313&4294967295)<<22&4294967295|he>>>10))+((he=se+(Ve^fe&(Ce^Ve))+we[8]+1770035416&4294967295)<<7&4294967295|he>>>25))+((he=Ve+(Ce^se&(fe^Ce))+we[9]+2336552879&4294967295)<<12&4294967295|he>>>20))+((he=Ce+(fe^Ve&(se^fe))+we[10]+4294925233&4294967295)<<17&4294967295|he>>>15))+((he=fe+(se^Ce&(Ve^se))+we[11]+2304563134&4294967295)<<22&4294967295|he>>>10))+((he=se+(Ve^fe&(Ce^Ve))+we[12]+1804603682&4294967295)<<7&4294967295|he>>>25))+((he=Ve+(Ce^se&(fe^Ce))+we[13]+4254626195&4294967295)<<12&4294967295|he>>>20))+((he=Ce+(fe^Ve&(se^fe))+we[14]+2792965006&4294967295)<<17&4294967295|he>>>15))+((he=fe+(se^Ce&(Ve^se))+we[15]+1236535329&4294967295)<<22&4294967295|he>>>10))+((he=se+(Ce^Ve&(fe^Ce))+we[1]+4129170786&4294967295)<<5&4294967295|he>>>27))+((he=Ve+(fe^Ce&(se^fe))+we[6]+3225465664&4294967295)<<9&4294967295|he>>>23))+((he=Ce+(se^fe&(Ve^se))+we[11]+643717713&4294967295)<<14&4294967295|he>>>18))+((he=fe+(Ve^se&(Ce^Ve))+we[0]+3921069994&4294967295)<<20&4294967295|he>>>12))+((he=se+(Ce^Ve&(fe^Ce))+we[5]+3593408605&4294967295)<<5&4294967295|he>>>27))+((he=Ve+(fe^Ce&(se^fe))+we[10]+38016083&4294967295)<<9&4294967295|he>>>23))+((he=Ce+(se^fe&(Ve^se))+we[15]+3634488961&4294967295)<<14&4294967295|he>>>18))+((he=fe+(Ve^se&(Ce^Ve))+we[4]+3889429448&4294967295)<<20&4294967295|he>>>12))+((he=se+(Ce^Ve&(fe^Ce))+we[9]+568446438&4294967295)<<5&4294967295|he>>>27))+((he=Ve+(fe^Ce&(se^fe))+we[14]+3275163606&4294967295)<<9&4294967295|he>>>23))+((he=Ce+(se^fe&(Ve^se))+we[3]+4107603335&4294967295)<<14&4294967295|he>>>18))+((he=fe+(Ve^se&(Ce^Ve))+we[8]+1163531501&4294967295)<<20&4294967295|he>>>12))+((he=se+(Ce^Ve&(fe^Ce))+we[13]+2850285829&4294967295)<<5&4294967295|he>>>27))+((he=Ve+(fe^Ce&(se^fe))+we[2]+4243563512&4294967295)<<9&4294967295|he>>>23))+((he=Ce+(se^fe&(Ve^se))+we[7]+1735328473&4294967295)<<14&4294967295|he>>>18))+((he=fe+(Ve^se&(Ce^Ve))+we[12]+2368359562&4294967295)<<20&4294967295|he>>>12))+((he=se+(fe^Ce^Ve)+we[5]+4294588738&4294967295)<<4&4294967295|he>>>28))+((he=Ve+(se^fe^Ce)+we[8]+2272392833&4294967295)<<11&4294967295|he>>>21))+((he=Ce+(Ve^se^fe)+we[11]+1839030562&4294967295)<<16&4294967295|he>>>16))+((he=fe+(Ce^Ve^se)+we[14]+4259657740&4294967295)<<23&4294967295|he>>>9))+((he=se+(fe^Ce^Ve)+we[1]+2763975236&4294967295)<<4&4294967295|he>>>28))+((he=Ve+(se^fe^Ce)+we[4]+1272893353&4294967295)<<11&4294967295|he>>>21))+((he=Ce+(Ve^se^fe)+we[7]+4139469664&4294967295)<<16&4294967295|he>>>16))+((he=fe+(Ce^Ve^se)+we[10]+3200236656&4294967295)<<23&4294967295|he>>>9))+((he=se+(fe^Ce^Ve)+we[13]+681279174&4294967295)<<4&4294967295|he>>>28))+((he=Ve+(se^fe^Ce)+we[0]+3936430074&4294967295)<<11&4294967295|he>>>21))+((he=Ce+(Ve^se^fe)+we[3]+3572445317&4294967295)<<16&4294967295|he>>>16))+((he=fe+(Ce^Ve^se)+we[6]+76029189&4294967295)<<23&4294967295|he>>>9))+((he=se+(fe^Ce^Ve)+we[9]+3654602809&4294967295)<<4&4294967295|he>>>28))+((he=Ve+(se^fe^Ce)+we[12]+3873151461&4294967295)<<11&4294967295|he>>>21))+((he=Ce+(Ve^se^fe)+we[15]+530742520&4294967295)<<16&4294967295|he>>>16))+((he=fe+(Ce^Ve^se)+we[2]+3299628645&4294967295)<<23&4294967295|he>>>9))+((he=se+(Ce^(fe|~Ve))+we[0]+4096336452&4294967295)<<6&4294967295|he>>>26))+((he=Ve+(fe^(se|~Ce))+we[7]+1126891415&4294967295)<<10&4294967295|he>>>22))+((he=Ce+(se^(Ve|~fe))+we[14]+2878612391&4294967295)<<15&4294967295|he>>>17))+((he=fe+(Ve^(Ce|~se))+we[5]+4237533241&4294967295)<<21&4294967295|he>>>11))+((he=se+(Ce^(fe|~Ve))+we[12]+1700485571&4294967295)<<6&4294967295|he>>>26))+((he=Ve+(fe^(se|~Ce))+we[3]+2399980690&4294967295)<<10&4294967295|he>>>22))+((he=Ce+(se^(Ve|~fe))+we[10]+4293915773&4294967295)<<15&4294967295|he>>>17))+((he=fe+(Ve^(Ce|~se))+we[1]+2240044497&4294967295)<<21&4294967295|he>>>11))+((he=se+(Ce^(fe|~Ve))+we[8]+1873313359&4294967295)<<6&4294967295|he>>>26))+((he=Ve+(fe^(se|~Ce))+we[15]+4264355552&4294967295)<<10&4294967295|he>>>22))+((he=Ce+(se^(Ve|~fe))+we[6]+2734768916&4294967295)<<15&4294967295|he>>>17))+((he=fe+(Ve^(Ce|~se))+we[13]+1309151649&4294967295)<<21&4294967295|he>>>11))+((Ve=(se=fe+((he=se+(Ce^(fe|~Ve))+we[4]+4149444226&4294967295)<<6&4294967295|he>>>26))+((he=Ve+(fe^(se|~Ce))+we[11]+3174756917&4294967295)<<10&4294967295|he>>>22))^((Ce=Ve+((he=Ce+(se^(Ve|~fe))+we[2]+718787259&4294967295)<<15&4294967295|he>>>17))|~se))+we[9]+3951481745&4294967295,ye.g[0]=ye.g[0]+se&4294967295,ye.g[1]=ye.g[1]+(Ce+(he<<21&4294967295|he>>>11))&4294967295,ye.g[2]=ye.g[2]+Ce&4294967295,ye.g[3]=ye.g[3]+Ve&4294967295}function g(ye,se){this.h=se;for(var fe=[],we=!0,Ce=ye.length-1;0<=Ce;Ce--){var Ve=0|ye[Ce];we&&Ve==se||(fe[Ce]=Ve,we=!1)}this.g=fe}(function e(ye,se){function fe(){}fe.prototype=se.prototype,ye.D=se.prototype,ye.prototype=new fe,ye.prototype.constructor=ye,ye.C=function(we,Ce,Ve){for(var he=Array(arguments.length-2),Iu=2;Iu<arguments.length;Iu++)he[Iu-2]=arguments[Iu];return se.prototype[Ce].apply(we,he)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(ye,se){void 0===se&&(se=ye.length);for(var fe=se-this.blockSize,we=this.B,Ce=this.h,Ve=0;Ve<se;){if(0==Ce)for(;Ve<=fe;)u(this,ye,Ve),Ve+=this.blockSize;if("string"==typeof ye){for(;Ve<se;)if(we[Ce++]=ye.charCodeAt(Ve++),Ce==this.blockSize){u(this,we),Ce=0;break}}else for(;Ve<se;)if(we[Ce++]=ye[Ve++],Ce==this.blockSize){u(this,we),Ce=0;break}}this.h=Ce,this.o+=se},s.prototype.v=function(){var ye=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ye[0]=128;for(var se=1;se<ye.length-8;++se)ye[se]=0;var fe=8*this.o;for(se=ye.length-8;se<ye.length;++se)ye[se]=255&fe,fe/=256;for(this.u(ye),ye=Array(16),se=fe=0;4>se;++se)for(var we=0;32>we;we+=8)ye[fe++]=this.g[se]>>>we&255;return ye};var w={};function S(ye){return-128<=ye&&128>ye?function d(ye,se){var fe=w;return Object.prototype.hasOwnProperty.call(fe,ye)?fe[ye]:fe[ye]=se(ye)}(ye,function(se){return new g([0|se],0>se?-1:0)}):new g([0|ye],0>ye?-1:0)}function O(ye){if(isNaN(ye)||!isFinite(ye))return q;if(0>ye)return pt(O(-ye));for(var se=[],fe=1,we=0;ye>=fe;we++)se[we]=ye/fe|0,fe*=4294967296;return new g(se,0)}var q=S(0),le=S(1),xe=S(16777216);function it(ye){if(0!=ye.h)return!1;for(var se=0;se<ye.g.length;se++)if(0!=ye.g[se])return!1;return!0}function Et(ye){return-1==ye.h}function pt(ye){for(var se=ye.g.length,fe=[],we=0;we<se;we++)fe[we]=~ye.g[we];return new g(fe,~ye.h).add(le)}function Ut(ye,se){return ye.add(pt(se))}function Gt(ye,se){for(;(65535&ye[se])!=ye[se];)ye[se+1]+=ye[se]>>>16,ye[se]&=65535,se++}function Bt(ye,se){this.g=ye,this.h=se}function rn(ye,se){if(it(se))throw Error("division by zero");if(it(ye))return new Bt(q,q);if(Et(ye))return se=rn(pt(ye),se),new Bt(pt(se.g),pt(se.h));if(Et(se))return se=rn(ye,pt(se)),new Bt(pt(se.g),se.h);if(30<ye.g.length){if(Et(ye)||Et(se))throw Error("slowDivide_ only works with positive integers.");for(var fe=le,we=se;0>=we.l(ye);)fe=Vn(fe),we=Vn(we);var Ce=Pn(fe,1),Ve=Pn(we,1);for(we=Pn(we,2),fe=Pn(fe,2);!it(we);){var he=Ve.add(we);0>=he.l(ye)&&(Ce=Ce.add(fe),Ve=he),we=Pn(we,1),fe=Pn(fe,1)}return se=Ut(ye,Ce.j(se)),new Bt(Ce,se)}for(Ce=q;0<=ye.l(se);){for(fe=Math.max(1,Math.floor(ye.m()/se.m())),we=48>=(we=Math.ceil(Math.log(fe)/Math.LN2))?1:Math.pow(2,we-48),he=(Ve=O(fe)).j(se);Et(he)||0<he.l(ye);)he=(Ve=O(fe-=we)).j(se);it(Ve)&&(Ve=le),Ce=Ce.add(Ve),ye=Ut(ye,he)}return new Bt(Ce,ye)}function Vn(ye){for(var se=ye.g.length+1,fe=[],we=0;we<se;we++)fe[we]=ye.i(we)<<1|ye.i(we-1)>>>31;return new g(fe,ye.h)}function Pn(ye,se){var fe=se>>5;se%=32;for(var we=ye.g.length-fe,Ce=[],Ve=0;Ve<we;Ve++)Ce[Ve]=0<se?ye.i(Ve+fe)>>>se|ye.i(Ve+fe+1)<<32-se:ye.i(Ve+fe);return new g(Ce,ye.h)}(a=g.prototype).m=function(){if(Et(this))return-pt(this).m();for(var ye=0,se=1,fe=0;fe<this.g.length;fe++){var we=this.i(fe);ye+=(0<=we?we:4294967296+we)*se,se*=4294967296}return ye},a.toString=function(ye){if(2>(ye=ye||10)||36<ye)throw Error("radix out of range: "+ye);if(it(this))return"0";if(Et(this))return"-"+pt(this).toString(ye);for(var se=O(Math.pow(ye,6)),fe=this,we="";;){var Ce=rn(fe,se).g,Ve=((0<(fe=Ut(fe,Ce.j(se))).g.length?fe.g[0]:fe.h)>>>0).toString(ye);if(it(fe=Ce))return Ve+we;for(;6>Ve.length;)Ve="0"+Ve;we=Ve+we}},a.i=function(ye){return 0>ye?0:ye<this.g.length?this.g[ye]:this.h},a.l=function(ye){return Et(ye=Ut(this,ye))?-1:it(ye)?0:1},a.abs=function(){return Et(this)?pt(this):this},a.add=function(ye){for(var se=Math.max(this.g.length,ye.g.length),fe=[],we=0,Ce=0;Ce<=se;Ce++){var Ve=we+(65535&this.i(Ce))+(65535&ye.i(Ce)),he=(Ve>>>16)+(this.i(Ce)>>>16)+(ye.i(Ce)>>>16);we=he>>>16,fe[Ce]=(he&=65535)<<16|(Ve&=65535)}return new g(fe,-2147483648&fe[fe.length-1]?-1:0)},a.j=function(ye){if(it(this)||it(ye))return q;if(Et(this))return Et(ye)?pt(this).j(pt(ye)):pt(pt(this).j(ye));if(Et(ye))return pt(this.j(pt(ye)));if(0>this.l(xe)&&0>ye.l(xe))return O(this.m()*ye.m());for(var se=this.g.length+ye.g.length,fe=[],we=0;we<2*se;we++)fe[we]=0;for(we=0;we<this.g.length;we++)for(var Ce=0;Ce<ye.g.length;Ce++){var Ve=this.i(we)>>>16,he=65535&this.i(we),Iu=ye.i(Ce)>>>16,Kd=65535&ye.i(Ce);fe[2*we+2*Ce]+=he*Kd,Gt(fe,2*we+2*Ce),fe[2*we+2*Ce+1]+=Ve*Kd,Gt(fe,2*we+2*Ce+1),fe[2*we+2*Ce+1]+=he*Iu,Gt(fe,2*we+2*Ce+1),fe[2*we+2*Ce+2]+=Ve*Iu,Gt(fe,2*we+2*Ce+2)}for(we=0;we<se;we++)fe[we]=fe[2*we+1]<<16|fe[2*we];for(we=se;we<2*se;we++)fe[we]=0;return new g(fe,0)},a.A=function(ye){return rn(this,ye).h},a.and=function(ye){for(var se=Math.max(this.g.length,ye.g.length),fe=[],we=0;we<se;we++)fe[we]=this.i(we)&ye.i(we);return new g(fe,this.h&ye.h)},a.or=function(ye){for(var se=Math.max(this.g.length,ye.g.length),fe=[],we=0;we<se;we++)fe[we]=this.i(we)|ye.i(we);return new g(fe,this.h|ye.h)},a.xor=function(ye){for(var se=Math.max(this.g.length,ye.g.length),fe=[],we=0;we<se;we++)fe[we]=this.i(we)^ye.i(we);return new g(fe,this.h^ye.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,je=Je.Md5=s,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=O,g.fromString=function H(ye,se){if(0==ye.length)throw Error("number format error: empty string");if(2>(se=se||10)||36<se)throw Error("radix out of range: "+se);if("-"==ye.charAt(0))return pt(H(ye.substring(1),se));if(0<=ye.indexOf("-"))throw Error('number format error: interior "-" character');for(var fe=O(Math.pow(se,8)),we=q,Ce=0;Ce<ye.length;Ce+=8){var Ve=Math.min(8,ye.length-Ce),he=parseInt(ye.substring(Ce,Ce+Ve),se);8>Ve?(Ve=O(Math.pow(se,Ve)),we=we.j(Ve).add(O(he))):we=(we=we.j(fe)).add(O(he))}return we},wt=Je.Integer=g}).apply(typeof Oe<"u"?Oe:typeof self<"u"?self:typeof window<"u"?window:{});var Jt,xn,Pt,St,ce,pe,be,Ae,Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,R,L){return p==Array.prototype||p==Object.prototype||(p[R]=L.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ht&&Ht];for(var R=0;R<p.length;++R){var L=p[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}(this);!function u(p,R){if(R)e:{var L=s;p=p.split(".");for(var K=0;K<p.length-1;K++){var Pe=p[K];if(!(Pe in L))break e;L=L[Pe]}(R=R(K=L[p=p[p.length-1]]))!=K&&null!=R&&e(L,p,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(p){return p||function(){return function d(p,R){p instanceof String&&(p+="");var L=0,K=!1,Pe={next:function(){if(!K&&L<p.length){var Ge=L++;return{value:R(Ge,p[Ge]),done:!1}}return K=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}(this,function(R,L){return L})}});var g=g||{},w=this||self;function S(p){var R=typeof p;return"array"==(R="object"!=R?R:p?Array.isArray(p)?"array":R:"null")||"object"==R&&"number"==typeof p.length}function O(p){var R=typeof p;return"object"==R&&null!=p||"function"==R}function H(p,R,L){return p.call.apply(p.bind,arguments)}function q(p,R,L){if(!p)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,K),p.apply(R,Pe)}}return function(){return p.apply(R,arguments)}}function le(p,R,L){return(le=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?H:q).apply(null,arguments)}function xe(p,R){var L=Array.prototype.slice.call(arguments,1);return function(){var K=L.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function it(p,R){function L(){}L.prototype=R.prototype,p.aa=R.prototype,p.prototype=new L,p.prototype.constructor=p,p.Qb=function(K,Pe,Ge){for(var bt=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)bt[yr-2]=arguments[yr];return R.prototype[Pe].apply(K,bt)}}function Et(p){const R=p.length;if(0<R){const L=Array(R);for(let K=0;K<R;K++)L[K]=p[K];return L}return[]}function pt(p,R){for(let L=1;L<arguments.length;L++){const K=arguments[L];if(S(K)){const Pe=p.length||0,Ge=K.length||0;p.length=Pe+Ge;for(let bt=0;bt<Ge;bt++)p[Pe+bt]=K[bt]}else p.push(K)}}function Gt(p){return/^[\s\xa0]*$/.test(p)}function Bt(){var p=w.navigator;return p&&(p=p.userAgent)?p:""}function rn(p){return rn[" "](p),p}rn[" "]=function(){};var Vn=!(-1==Bt().indexOf("Gecko")||-1!=Bt().toLowerCase().indexOf("webkit")&&-1==Bt().indexOf("Edge")||-1!=Bt().indexOf("Trident")||-1!=Bt().indexOf("MSIE")||-1!=Bt().indexOf("Edge"));function Pn(p,R,L){for(const K in p)R.call(L,p[K],K,p)}function se(p){const R={};for(const L in p)R[L]=p[L];return R}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(p,R){let L,K;for(let Pe=1;Pe<arguments.length;Pe++){for(L in K=arguments[Pe],K)p[L]=K[L];for(let Ge=0;Ge<fe.length;Ge++)L=fe[Ge],Object.prototype.hasOwnProperty.call(K,L)&&(p[L]=K[L])}}function Ce(p){var R=1;p=p.split(":");const L=[];for(;0<R&&p.length;)L.push(p.shift()),R--;return p.length&&L.push(p.join(":")),L}function Ve(p){w.setTimeout(()=>{throw p},0)}function he(){var p=kp;let R=null;return p.g&&(R=p.g,p.g=p.g.next,p.g||(p.h=null),R.next=null),R}var Kd=new class Ut{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new My,p=>p.reset());class My{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let af,Op=!1,kp=new class Iu{constructor(){this.h=this.g=null}add(R,L){const K=Kd.get();K.set(R,L),this.h?this.h.next=K:this.g=K,this.h=K}},Om=()=>{const p=w.Promise.resolve(void 0);af=()=>{p.then(EE)}};var EE=()=>{for(var p;p=he();){try{p.h.call(p.g)}catch(L){Ve(L)}var R=Kd;R.j(p),100>R.h&&(R.h++,p.next=R.g,R.g=p)}Op=!1};function ea(){this.s=this.s,this.C=this.C}function ds(p,R){this.type=p,this.g=this.target=R,this.defaultPrevented=!1}ea.prototype.s=!1,ea.prototype.ma=function(){this.s||(this.s=!0,this.N())},ea.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ds.prototype.h=function(){this.defaultPrevented=!0};var cI=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var p=!1,R=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const L=()=>{};w.addEventListener("test",L,R),w.removeEventListener("test",L,R)}catch{}return p}();function Cl(p,R){if(ds.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var L=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=R,R=p.relatedTarget){if(Vn){e:{try{rn(R.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(R=null)}}else"mouseover"==L?R=p.fromElement:"mouseout"==L&&(R=p.toElement);this.relatedTarget=R,K?(this.clientX=void 0!==K.clientX?K.clientX:K.pageX,this.clientY=void 0!==K.clientY?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:lI[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Cl.aa.h.call(this)}}it(Cl,ds);var lI={2:"touch",3:"pen",4:"mouse"};Cl.prototype.h=function(){Cl.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ls="closure_listenable_"+(1e6*Math.random()|0),uf=0;function hs(p,R,L,K,Pe){this.listener=p,this.proxy=null,this.src=R,this.type=L,this.capture=!!K,this.ha=Pe,this.key=++uf,this.da=this.fa=!1}function Ra(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function bl(p){this.src=p,this.g={},this.h=0}function Fs(p,R){var L=R.type;if(L in p.g){var Ge,K=p.g[L],Pe=Array.prototype.indexOf.call(K,R,void 0);(Ge=0<=Pe)&&Array.prototype.splice.call(K,Pe,1),Ge&&(Ra(R),0==p.g[L].length&&(delete p.g[L],p.h--))}}function cf(p,R,L,K){for(var Pe=0;Pe<p.length;++Pe){var Ge=p[Pe];if(!Ge.da&&Ge.listener==R&&Ge.capture==!!L&&Ge.ha==K)return Pe}return-1}bl.prototype.add=function(p,R,L,K,Pe){var Ge=p.toString();(p=this.g[Ge])||(p=this.g[Ge]=[],this.h++);var bt=cf(p,R,K,Pe);return-1<bt?(R=p[bt],L||(R.fa=!1)):((R=new hs(R,this.src,Ge,!!K,Pe)).fa=L,p.push(R)),R};var mc="closure_lm_"+(1e6*Math.random()|0),_c={};function Sl(p,R,L,K,Pe){if(K&&K.once)return Pl(p,R,L,K,Pe);if(Array.isArray(R)){for(var Ge=0;Ge<R.length;Ge++)Sl(p,R[Ge],L,K,Pe);return null}return L=Vp(L),p&&p[Ls]?p.K(R,L,O(K)?!!K.capture:!!K,Pe):Rl(p,R,L,!1,K,Pe)}function Rl(p,R,L,K,Pe,Ge){if(!R)throw Error("Invalid event type");var bt=O(Pe)?!!Pe.capture:!!Pe,yr=Lp(p);if(yr||(p[mc]=yr=new bl(p)),(L=yr.add(R,L,K,bt,Ge)).proxy)return L;if(K=function qd(){const R=Ny;return function p(L){return R.call(p.src,p.listener,L)}}(),L.proxy=K,K.src=p,K.listener=L,p.addEventListener)cI||(Pe=bt),void 0===Pe&&(Pe=!1),p.addEventListener(R.toString(),K,Pe);else if(p.attachEvent)p.attachEvent(Nl(R.toString()),K);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(K)}return L}function Pl(p,R,L,K,Pe){if(Array.isArray(R)){for(var Ge=0;Ge<R.length;Ge++)Pl(p,R[Ge],L,K,Pe);return null}return L=Vp(L),p&&p[Ls]?p.L(R,L,O(K)?!!K.capture:!!K,Pe):Rl(p,R,L,!0,K,Pe)}function Ml(p,R,L,K,Pe){if(Array.isArray(R))for(var Ge=0;Ge<R.length;Ge++)Ml(p,R[Ge],L,K,Pe);else K=O(K)?!!K.capture:!!K,L=Vp(L),p&&p[Ls]?(p=p.i,(R=String(R).toString())in p.g&&-1<(L=cf(Ge=p.g[R],L,K,Pe))&&(Ra(Ge[L]),Array.prototype.splice.call(Ge,L,1),0==Ge.length&&(delete p.g[R],p.h--))):p&&(p=Lp(p))&&(R=p.g[R.toString()],p=-1,R&&(p=cf(R,L,K,Pe)),(L=-1<p?R[p]:null)&&yc(L))}function yc(p){if("number"!=typeof p&&p&&!p.da){var R=p.src;if(R&&R[Ls])Fs(R.i,p);else{var L=p.type,K=p.proxy;R.removeEventListener?R.removeEventListener(L,K,p.capture):R.detachEvent?R.detachEvent(Nl(L),K):R.addListener&&R.removeListener&&R.removeListener(K),(L=Lp(R))?(Fs(L,p),0==L.h&&(L.src=null,R[mc]=null)):Ra(p)}}}function Nl(p){return p in _c?_c[p]:_c[p]="on"+p}function Ny(p,R){if(p.da)p=!0;else{R=new Cl(R,this);var L=p.listener,K=p.ha||p.src;p.fa&&yc(p),p=L.call(K,R)}return p}function Lp(p){return(p=p[mc])instanceof bl?p:null}var Fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vp(p){return"function"==typeof p?p:(p[Fp]||(p[Fp]=function(R){return p.handleEvent(R)}),p[Fp])}function qi(){ea.call(this),this.i=new bl(this),this.M=this,this.F=null}function fs(p,R){var L,K=p.F;if(K)for(L=[];K;K=K.F)L.push(K);if(p=p.M,K=R.type||R,"string"==typeof R)R=new ds(R,p);else if(R instanceof ds)R.target=R.target||p;else{var Pe=R;we(R=new ds(K,p),Pe)}if(Pe=!0,L)for(var Ge=L.length-1;0<=Ge;Ge--){var bt=R.g=L[Ge];Pe=lf(bt,K,!0,R)&&Pe}if(Pe=lf(bt=R.g=p,K,!0,R)&&Pe,Pe=lf(bt,K,!1,R)&&Pe,L)for(Ge=0;Ge<L.length;Ge++)Pe=lf(bt=R.g=L[Ge],K,!1,R)&&Pe}function lf(p,R,L,K){if(!(R=p.i.g[String(R)]))return!0;R=R.concat();for(var Pe=!0,Ge=0;Ge<R.length;++Ge){var bt=R[Ge];if(bt&&!bt.da&&bt.capture==L){var yr=bt.listener,Yi=bt.ha||bt.src;bt.fa&&Fs(p.i,bt),Pe=!1!==yr.call(Yi,K)&&Pe}}return Pe&&!K.defaultPrevented}function km(p,R,L){if("function"==typeof p)L&&(p=le(p,L));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=le(p.handleEvent,p)}return 2147483647<Number(R)?-1:w.setTimeout(p,R||0)}function Lm(p){p.g=km(()=>{p.g=null,p.i&&(p.i=!1,Lm(p))},p.l);const R=p.h;p.h=null,p.m.apply(null,R)}it(qi,ea),qi.prototype[Ls]=!0,qi.prototype.removeEventListener=function(p,R,L,K){Ml(this,p,R,L,K)},qi.prototype.N=function(){if(qi.aa.N.call(this),this.i){var R,p=this.i;for(R in p.g){for(var L=p.g[R],K=0;K<L.length;K++)Ra(L[K]);delete p.g[R],p.h--}}this.F=null},qi.prototype.K=function(p,R,L,K){return this.i.add(String(p),R,!1,L,K)},qi.prototype.L=function(p,R,L,K){return this.i.add(String(p),R,!0,L,K)};class Fm extends ea{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Lm(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function df(p){ea.call(this),this.h=p,this.g={}}it(df,ea);var dI=[];function hI(p){Pn(p.g,function(R,L){this.g.hasOwnProperty(L)&&yc(R)},p),p.g={}}df.prototype.N=function(){df.aa.N.call(this),hI(this)},df.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vm=w.JSON.stringify,fI=w.JSON.parse,TE=class{stringify(p){return w.JSON.stringify(p,void 0)}parse(p){return w.JSON.parse(p,void 0)}};function Um(){}function xy(){}Um.prototype.h=null;var hf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bm(){ds.call(this,"d")}function ff(){ds.call(this,"c")}it(Bm,ds),it(ff,ds);var ta={},Up=null;function xl(){return Up=Up||new qi}function jm(p){ds.call(this,ta.La,p)}function Eu(p){const R=xl();fs(R,new jm(R))}function $m(p,R){ds.call(this,ta.STAT_EVENT,p),this.stat=R}function Ss(p){const R=xl();fs(R,new $m(R,p))}function Qd(p,R){ds.call(this,ta.Ma,p),this.size=R}function pf(p,R){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){p()},R)}function gf(){this.g=!0}function vc(p,R,L,K){p.info(function(){return"XMLHTTP TEXT ("+R+"): "+function jp(p,R){if(!p.g)return R;if(!R)return null;try{var L=JSON.parse(R);if(L)for(p=0;p<L.length;p++)if(Array.isArray(L[p])){var K=L[p];if(!(2>K.length)){var Pe=K[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var Ge=Pe[0];if("noop"!=Ge&&"stop"!=Ge&&"close"!=Ge)for(var bt=1;bt<Pe.length;bt++)Pe[bt]=""}}}return Vm(L)}catch{return R}}(p,L)+(K?" "+K:"")})}ta.La="serverreachability",it(jm,ds),ta.STAT_EVENT="statevent",it($m,ds),ta.Ma="timingevent",it(Qd,ds),gf.prototype.xa=function(){this.g=!1},gf.prototype.info=function(){};var zm,Hm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Yd(){}function Ic(p,R,L,K){this.j=p,this.i=R,this.l=L,this.R=K||1,this.U=new df(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wm}function Wm(){this.i=null,this.g="",this.h=!1}it(Yd,Um),Yd.prototype.g=function(){return new XMLHttpRequest},Yd.prototype.i=function(){return{}},zm=new Yd;var ky={},Gm={};function $p(p,R,L){p.L=1,p.v=vf(na(R)),p.m=L,p.P=!0,Km(p,null)}function Km(p,R){p.F=Date.now(),Hp(p),p.A=na(p.v);var L=p.A,K=p.R;Array.isArray(K)||(K=[String(K)]),s_(L.i,"t",K),p.C=0,L=p.j.J,p.h=new Wm,p.g=tv(p.j,L?R:null,!p.m),0<p.O&&(p.M=new Fm(le(p.Y,p,p.g),p.O)),R=p.U,L=p.g,K=p.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(dI[0]=Pe.toString()),Pe=dI);for(var Ge=0;Ge<Pe.length;Ge++){var bt=Sl(L,Pe[Ge],K||R.handleEvent,!1,R.h||R);if(!bt)break;R.g[bt.key]=bt}R=p.H?se(p.H):{},p.m?(p.u||(p.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,R)):(p.u="GET",p.g.ea(p.A,p.u,null,R)),Eu(),function gI(p,R,L,K,Pe,Ge){p.info(function(){if(p.g)if(Ge)for(var bt="",yr=Ge.split("&"),Yi=0;Yi<yr.length;Yi++){var ar=yr[Yi].split("=");if(1<ar.length){var Mi=ar[0];ar=ar[1];var Ti=Mi.split("_");bt=2<=Ti.length&&"type"==Ti[1]?bt+(Mi+"=")+ar+"&":bt+(Mi+"=redacted&")}}else bt=null;else bt=Ge;return"XMLHTTP REQ ("+K+") [attempt "+Pe+"]: "+R+"\n"+L+"\n"+bt})}(p.i,p.u,p.A,p.l,p.R,p.m)}function qm(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function _I(p,R){var L=p.C,K=R.indexOf("\n",L);return-1==K?Gm:(L=Number(R.substring(L,K)),isNaN(L)?ky:(K+=1)+L>R.length?Gm:(R=R.slice(K,K+L),p.C=K+L,R))}function Hp(p){p.S=Date.now()+p.I,Ly(p,p.I)}function Ly(p,R){if(null!=p.B)throw Error("WatchDog timer not null");p.B=pf(le(p.ba,p),R)}function zp(p){p.B&&(w.clearTimeout(p.B),p.B=null)}function Ol(p){0==p.j.G||p.J||Co(p.j,p)}function Tu(p){zp(p);var R=p.M;R&&"function"==typeof R.ma&&R.ma(),p.M=null,hI(p.U),p.g&&(R=p.g,p.g=null,R.abort(),R.ma())}function Qm(p,R){try{var L=p.j;if(0!=L.G&&(L.g==p||Xm(L.h,p)))if(!p.K&&Xm(L.h,p)&&3==L.G){try{var K=L.Da.g.parse(R)}catch{K=null}if(Array.isArray(K)&&3==K.length){var Pe=K;if(0==Pe[0]){e:if(!L.u){if(L.g){if(!(L.g.F+3e3<p.F))break e;Vs(L),Xp(L)}c_(L),Ss(18)}}else L.za=Pe[1],0<L.za-L.T&&37500>Pe[2]&&L.F&&0==L.v&&!L.C&&(L.C=pf(le(L.Za,L),6e3));if(1>=Ym(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Tc(L,11)}else if((p.K||L.g==p)&&Vs(L),!Gt(R))for(Pe=L.Da.g.parse(R),R=0;R<Pe.length;R++){let ar=Pe[R];if(L.T=ar[0],ar=ar[1],2==L.G)if("c"==ar[0]){L.K=ar[1],L.ia=ar[2];const Mi=ar[3];null!=Mi&&(L.la=Mi,L.j.info("VER="+L.la));const Ti=ar[4];null!=Ti&&(L.Aa=Ti,L.j.info("SVER="+L.Aa));const wc=ar[5];null!=wc&&"number"==typeof wc&&0<wc&&(L.L=K=1.5*wc,L.j.info("backChannelRequestTimeoutMs_="+K)),K=L;const bo=p.g;if(bo){const Ef=bo.g?bo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ef){var Ge=K.h;Ge.g||-1==Ef.indexOf("spdy")&&-1==Ef.indexOf("quic")&&-1==Ef.indexOf("h2")||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(Jm(Ge,Ge.h),Ge.h=null))}if(K.D){const tg=bo.g?bo.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(K.ya=tg,xr(K.I,K.D,tg))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-p.F,L.j.info("Handshake RTT: "+L.R+"ms"));var bt=p;if((K=L).qa=ev(K,K.J?K.ia:null,K.W),bt.K){Fy(K.h,bt);var yr=bt,Yi=K.L;Yi&&(yr.I=Yi),yr.B&&(zp(yr),Hp(yr)),K.g=bt}else Do(K);0<L.i.length&&Jp(L)}else"stop"!=ar[0]&&"close"!=ar[0]||Tc(L,7);else 3==L.G&&("stop"==ar[0]||"close"==ar[0]?"stop"==ar[0]?Tc(L,7):a_(L):"noop"!=ar[0]&&L.l&&L.l.ta(ar),L.v=0)}Eu()}catch{}}function mf(p){this.l=p||10,p=w.PerformanceNavigationTiming?0<(p=w.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gp(p){return!!p.h||!!p.g&&p.g.size>=p.j}function Ym(p){return p.h?1:p.g?p.g.size:0}function Xm(p,R){return p.h?p.h==R:!!p.g&&p.g.has(R)}function Jm(p,R){p.g?p.g.add(R):p.h=R}function Fy(p,R){p.h&&p.h==R?p.h=null:p.g&&p.g.has(R)&&p.g.delete(R)}function _f(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let R=p.i;for(const L of p.g.values())R=R.concat(L.D);return R}return Et(p.i)}function e_(p,R){if(p.forEach&&"function"==typeof p.forEach)p.forEach(R,void 0);else if(S(p)||"string"==typeof p)Array.prototype.forEach.call(p,R,void 0);else for(var L=function Zm(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(S(p)||"string"==typeof p){var R=[];p=p.length;for(var L=0;L<p;L++)R.push(L);return R}R=[],L=0;for(const K in p)R[L++]=K;return R}}}(p),K=function Kp(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(S(p)){for(var R=[],L=p.length,K=0;K<L;K++)R.push(p[K]);return R}for(K in R=[],L=0,p)R[L++]=p[K];return R}(p),Pe=K.length,Ge=0;Ge<Pe;Ge++)R.call(void 0,K[Ge],L&&L[Ge],p)}Ic.prototype.ca=function(p){p=p.target;const R=this.M;R&&3==Ma(p)?R.j():this.Y(p)},Ic.prototype.Y=function(p){try{if(p==this.g)e:{const Ti=Ma(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>Ti)&&(3!=Ti||this.g&&(this.h.h||this.g.oa()||Yy(this.g)))){this.J||4!=Ti||7==R||Eu(),zp(this);var L=this.g.Z();this.X=L;t:if(qm(this)){var K=Yy(this.g);p="";var Pe=K.length,Ge=4==Ma(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tu(this),Ol(this);var bt="";break t}this.h.i=new w.TextDecoder}for(R=0;R<Pe;R++)this.h.h=!0,p+=this.h.i.decode(K[R],{stream:!(Ge&&R==Pe-1)});K.length=0,this.h.g+=p,this.C=0,bt=this.h.g}else bt=this.g.oa();if(this.o=200==L,function mI(p,R,L,K,Pe,Ge,bt){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+Pe+"]: "+R+"\n"+L+"\n"+Ge+" "+bt})}(this.i,this.u,this.A,this.l,this.R,Ti,L),this.o){if(this.T&&!this.K){t:{if(this.g){var yr,Yi=this.g;if((yr=Yi.g?Yi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gt(yr)){var ar=yr;break t}}ar=null}if(!(L=ar)){this.o=!1,this.s=3,Ss(12),Tu(this),Ol(this);break e}vc(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qm(this,L)}if(this.P){let bo;for(L=!0;!this.J&&this.C<bt.length;){if(bo=_I(this,bt),bo==Gm){4==Ti&&(this.s=4,Ss(14),L=!1),vc(this.i,this.l,null,"[Incomplete Response]");break}if(bo==ky){this.s=4,Ss(15),vc(this.i,this.l,bt,"[Invalid Chunk]"),L=!1;break}vc(this.i,this.l,bo,null),Qm(this,bo)}if(qm(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ti||0!=bt.length||this.h.h||(this.s=1,Ss(16),L=!1),this.o=this.o&&L,L){if(0<bt.length&&!this.W){this.W=!0;var Mi=this.j;Mi.g==this&&Mi.ba&&!Mi.M&&(Mi.j.info("Great, no buffering proxy detected. Bytes received: "+bt.length),eg(Mi),Mi.M=!0,Ss(11))}}else vc(this.i,this.l,bt,"[Invalid Chunked Response]"),Tu(this),Ol(this)}else vc(this.i,this.l,bt,null),Qm(this,bt);4==Ti&&Tu(this),this.o&&!this.J&&(4==Ti?Co(this.j,this):(this.o=!1,Hp(this)))}else(function Xy(p){const R={};p=(p.g&&2<=Ma(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let K=0;K<p.length;K++){if(Gt(p[K]))continue;var L=Ce(p[K]);const Pe=L[0];if("string"!=typeof(L=L[1]))continue;L=L.trim();const Ge=R[Pe]||[];R[Pe]=Ge,Ge.push(L)}!function ye(p,R){for(const L in p)R.call(void 0,p[L],L,p)}(R,function(K){return K.join(", ")})})(this.g),400==L&&0<bt.indexOf("Unknown SID")?(this.s=3,Ss(12)):(this.s=0,Ss(13)),Tu(this),Ol(this)}}}catch{}},Ic.prototype.cancel=function(){this.J=!0,Tu(this)},Ic.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function Bp(p,R){p.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&(Eu(),Ss(17)),Tu(this),this.s=2,Ol(this)):Ly(this,this.S-p)},mf.prototype.cancel=function(){if(this.i=_f(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Vy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ec){this.h=p.h,yf(this,p.j),this.o=p.o,this.g=p.g,Xd(this,p.s),this.l=p.l;var R=p.i,L=new eh;L.i=R.i,R.g&&(L.g=new Map(R.g),L.h=R.h),t_(this,L),this.m=p.m}else p&&(R=String(p).match(Vy))?(this.h=!1,yf(this,R[1]||"",!0),this.o=Jd(R[2]||""),this.g=Jd(R[3]||"",!0),Xd(this,R[4]),this.l=Jd(R[5]||"",!0),t_(this,R[6]||"",!0),this.m=Jd(R[7]||"")):(this.h=!1,this.i=new eh(null,this.h))}function na(p){return new Ec(p)}function yf(p,R,L){p.j=L?Jd(R,!0):R,p.j&&(p.j=p.j.replace(/:$/,""))}function Xd(p,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);p.s=R}else p.s=null}function t_(p,R,L){R instanceof eh?(p.i=R,function zy(p,R){R&&!p.j&&(wu(p),p.i=null,p.g.forEach(function(L,K){var Pe=K.toLowerCase();K!=Pe&&(r_(this,K),s_(this,Pe,L))},p)),p.j=R}(p.i,p.h)):(L||(R=Zd(R,Hy)),p.i=new eh(R,p.h))}function xr(p,R,L){p.i.set(R,L)}function vf(p){return xr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Jd(p,R){return p?R?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Zd(p,R,L){return"string"==typeof p?(p=encodeURI(p).replace(R,Uy),L&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Uy(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Ec.prototype.toString=function(){var p=[],R=this.j;R&&p.push(Zd(R,By,!0),":");var L=this.g;return(L||"file"==R)&&(p.push("//"),(R=this.o)&&p.push(Zd(R,By,!0),"@"),p.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(L=this.s)&&p.push(":",String(L))),(L=this.l)&&(this.g&&"/"!=L.charAt(0)&&p.push("/"),p.push(Zd(L,"/"==L.charAt(0)?$y:jy,!0))),(L=this.i.toString())&&p.push("?",L),(L=this.m)&&p.push("#",Zd(L,n_)),p.join("")};var p,By=/[#\/\?@]/g,jy=/[#\?:]/g,$y=/[#\?]/g,Hy=/[#\?@]/g,n_=/#/g;function eh(p,R){this.h=this.g=null,this.i=p||null,this.j=!!R}function wu(p){p.g||(p.g=new Map,p.h=0,p.i&&function yI(p,R){if(p){p=p.split("&");for(var L=0;L<p.length;L++){var K=p[L].indexOf("="),Pe=null;if(0<=K){var Ge=p[L].substring(0,K);Pe=p[L].substring(K+1)}else Ge=p[L];R(Ge,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}(p.i,function(R,L){p.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}function r_(p,R){wu(p),R=kl(p,R),p.g.has(R)&&(p.i=null,p.h-=p.g.get(R).length,p.g.delete(R))}function i_(p,R){return wu(p),R=kl(p,R),p.g.has(R)}function s_(p,R,L){r_(p,R),0<L.length&&(p.i=null,p.g.set(kl(p,R),Et(L)),p.h+=L.length)}function kl(p,R){return R=String(R),p.j&&(R=R.toLowerCase()),R}function Rs(p,R,L,K,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),K(L)}catch{}}function vI(){this.g=new TE}function II(p,R,L){const K=L||"";try{e_(p,function(Pe,Ge){let bt=Pe;O(Pe)&&(bt=Vm(Pe)),R.push(K+Ge+"="+encodeURIComponent(bt))})}catch(Pe){throw R.push(K+"type="+encodeURIComponent("_badmap")),Pe}}function Ll(p){this.l=p.Ub||null,this.j=p.eb||!1}function Pa(p,R){qi.call(this),this.D=p,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Qp(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function If(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Fl(p)}function Fl(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function EI(p){let R="";return Pn(p,function(L,K){R+=K,R+=":",R+=L,R+="\r\n"}),R}function Gy(p,R,L){e:{for(K in L){var K=!1;break e}K=!0}K||(L=EI(L),"string"==typeof p?null!=L&&encodeURIComponent(String(L)):xr(p,R,L))}function Jr(p){qi.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=eh.prototype).add=function(p,R){wu(this),this.i=null,p=kl(this,p);var L=this.g.get(p);return L||this.g.set(p,L=[]),L.push(R),this.h+=1,this},a.forEach=function(p,R){wu(this),this.g.forEach(function(L,K){L.forEach(function(Pe){p.call(R,Pe,K,this)},this)},this)},a.na=function(){wu(this);const p=Array.from(this.g.values()),R=Array.from(this.g.keys()),L=[];for(let K=0;K<R.length;K++){const Pe=p[K];for(let Ge=0;Ge<Pe.length;Ge++)L.push(R[K])}return L},a.V=function(p){wu(this);let R=[];if("string"==typeof p)i_(this,p)&&(R=R.concat(this.g.get(kl(this,p))));else{p=Array.from(this.g.values());for(let L=0;L<p.length;L++)R=R.concat(p[L])}return R},a.set=function(p,R){return wu(this),this.i=null,i_(this,p=kl(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[R]),this.h+=1,this},a.get=function(p,R){return p&&0<(p=this.V(p)).length?String(p[0]):R},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],R=Array.from(this.g.keys());for(var L=0;L<R.length;L++){var K=R[L];const Ge=encodeURIComponent(String(K)),bt=this.V(K);for(K=0;K<bt.length;K++){var Pe=Ge;""!==bt[K]&&(Pe+="="+encodeURIComponent(String(bt[K]))),p.push(Pe)}}return this.i=p.join("&")},it(Ll,Um),Ll.prototype.g=function(){return new Pa(this.l,this.j)},Ll.prototype.i=(p={},function(){return p}),it(Pa,qi),(a=Pa.prototype).open=function(p,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=R,this.readyState=1,Fl(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(R.body=p),(this.D||w).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,If(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Fl(this)),this.g&&(this.readyState=3,Fl(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qp(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var R=p.value?p.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!p.done}))&&(this.response=this.responseText+=R)}p.done?If(this):Fl(this),3==this.readyState&&Qp(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,If(this))},a.Qa=function(p){this.g&&(this.response=p,If(this))},a.ga=function(){this.g&&If(this)},a.setRequestHeader=function(p,R){this.u.append(p,R)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],R=this.h.entries();for(var L=R.next();!L.done;)p.push((L=L.value)[0]+": "+L[1]),L=R.next();return p.join("\r\n")},Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),it(Jr,qi);var TI=/^https?$/i,Ky=["POST","PUT"];function qy(p,R){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=R,p.m=5,fi(p),Yp(p)}function fi(p){p.A||(p.A=!0,fs(p,"complete"),fs(p,"error"))}function o_(p){if(p.h&&typeof g<"u"&&(!p.v[1]||4!=Ma(p)||2!=p.Z()))if(p.u&&4==Ma(p))km(p.Ea,0,p);else if(fs(p,"readystatechange"),4==Ma(p)){p.h=!1;try{const bt=p.Z();e:switch(bt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var K;if(K=0===bt){var Pe=String(p.D).match(Vy)[1]||null;!Pe&&w.self&&w.self.location&&(Pe=w.self.location.protocol.slice(0,-1)),K=!TI.test(Pe?Pe.toLowerCase():"")}L=K}if(L)fs(p,"complete"),fs(p,"success");else{p.m=6;try{var Ge=2<Ma(p)?p.g.statusText:""}catch{Ge=""}p.l=Ge+" ["+p.Z()+"]",fi(p)}}finally{Yp(p)}}}function Yp(p,R){if(p.g){Qy(p);const L=p.g,K=p.v[0]?()=>{}:null;p.g=null,p.v=null,R||fs(p,"ready");try{L.onreadystatechange=K}catch{}}}function Qy(p){p.I&&(w.clearTimeout(p.I),p.I=null)}function Ma(p){return p.g?p.g.readyState:0}function Yy(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function th(p,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[p]||R}function Vl(p){this.Aa=0,this.i=[],this.j=new gf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=th("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=th("baseRetryDelayMs",5e3,p),this.cb=th("retryDelaySeedMs",1e4,p),this.Wa=th("forwardChannelMaxRetries",2,p),this.wa=th("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new mf(p&&p.concurrentRequestLimit),this.Da=new vI,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function a_(p){if(u_(p),3==p.G){var R=p.U++,L=na(p.I);if(xr(L,"SID",p.K),xr(L,"RID",R),xr(L,"TYPE","terminate"),Ul(p,L),(R=new Ic(p,p.j,R)).L=2,R.v=vf(na(L)),L=!1,w.navigator&&w.navigator.sendBeacon)try{L=w.navigator.sendBeacon(R.v.toString(),"")}catch{}!L&&w.Image&&((new Image).src=R.v,L=!0),L||(R.g=tv(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Hp(R)}Zy(p)}function Xp(p){p.g&&(eg(p),p.g.cancel(),p.g=null)}function u_(p){Xp(p),p.u&&(w.clearTimeout(p.u),p.u=null),Vs(p),p.h.cancel(),p.s&&("number"==typeof p.s&&w.clearTimeout(p.s),p.s=null)}function Jp(p){if(!Gp(p.h)&&!p.s){p.s=!0;var R=p.Ga;af||Om(),Op||(af(),Op=!0),kp.add(R,p),p.B=0}}function wI(p,R){var L;L=R?R.l:p.U++;const K=na(p.I);xr(K,"SID",p.K),xr(K,"RID",L),xr(K,"AID",p.T),Ul(p,K),p.m&&p.o&&Gy(K,p.m,p.o),L=new Ic(p,p.j,L,p.B+1),null===p.m&&(L.H=p.o),R&&(p.i=R.D.concat(p.i)),R=Zp(p,L,1e3),L.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Jm(p.h,L),$p(L,K,R)}function Ul(p,R){p.H&&Pn(p.H,function(L,K){xr(R,K,L)}),p.l&&e_({},function(L,K){xr(R,K,L)})}function Zp(p,R,L){L=Math.min(p.i.length,L);var K=p.l?le(p.l.Na,p.l,p):null;e:{var Pe=p.i;let Ge=-1;for(;;){const bt=["count="+L];-1==Ge?0<L?(Ge=Pe[0].g,bt.push("ofs="+Ge)):Ge=0:bt.push("ofs="+Ge);let yr=!0;for(let Yi=0;Yi<L;Yi++){let ar=Pe[Yi].g;const Mi=Pe[Yi].map;if(ar-=Ge,0>ar)Ge=Math.max(0,Pe[Yi].g-100),yr=!1;else try{II(Mi,bt,"req"+ar+"_")}catch{K&&K(Mi)}}if(yr){K=bt.join("&");break e}}}return p=p.i.splice(0,L),R.D=p,K}function Do(p){if(!p.g&&!p.u){p.Y=1;var R=p.Fa;af||Om(),Op||(af(),Op=!0),kp.add(R,p),p.v=0}}function c_(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=pf(le(p.Fa,p),l_(p,p.v)),p.v++,0))}function eg(p){null!=p.A&&(w.clearTimeout(p.A),p.A=null)}function ra(p){p.g=new Ic(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var R=na(p.qa);xr(R,"RID","rpc"),xr(R,"SID",p.K),xr(R,"AID",p.T),xr(R,"CI",p.F?"0":"1"),!p.F&&p.ja&&xr(R,"TO",p.ja),xr(R,"TYPE","xmlhttp"),Ul(p,R),p.m&&p.o&&Gy(R,p.m,p.o),p.L&&(p.g.I=p.L);var L=p.g;p=p.ia,L.L=1,L.v=vf(na(R)),L.m=null,L.P=!0,Km(L,p)}function Vs(p){null!=p.C&&(w.clearTimeout(p.C),p.C=null)}function Co(p,R){var L=null;if(p.g==R){Vs(p),eg(p),p.g=null;var K=2}else{if(!Xm(p.h,R))return;L=R.D,Fy(p.h,R),K=1}if(0!=p.G)if(R.o)if(1==K){L=R.m?R.m.length:0,R=Date.now()-R.F;var Pe=p.B;fs(K=xl(),new Qd(K,L)),Jp(p)}else Do(p);else if(3==(Pe=R.s)||0==Pe&&0<R.X||!(1==K&&function Jy(p,R){return!(Ym(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=R.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=pf(le(p.Ga,p,R),l_(p,p.B)),p.B++,0)))}(p,R)||2==K&&c_(p)))switch(L&&0<L.length&&(R=p.h,R.i=R.i.concat(L)),Pe){case 1:Tc(p,5);break;case 4:Tc(p,10);break;case 3:Tc(p,6);break;default:Tc(p,2)}}function l_(p,R){let L=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(L*=2),L*R}function Tc(p,R){if(p.j.info("Error code "+R),2==R){var L=le(p.fb,p),K=p.Xa;const Pe=!K;K=new Ec(K||"//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||yf(K,"https"),vf(K),Pe?function Wy(p,R){const L=new gf;if(w.Image){const K=new Image;K.onload=xe(Rs,L,"TestLoadImage: loaded",!0,R,K),K.onerror=xe(Rs,L,"TestLoadImage: error",!1,R,K),K.onabort=xe(Rs,L,"TestLoadImage: abort",!1,R,K),K.ontimeout=xe(Rs,L,"TestLoadImage: timeout",!1,R,K),w.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else R(!1)}(K.toString(),L):function qp(p,R){new gf;const K=new AbortController,Pe=setTimeout(()=>{K.abort(),Rs(0,0,!1,R)},1e4);fetch(p,{signal:K.signal}).then(Ge=>{clearTimeout(Pe),Rs(0,0,!!Ge.ok,R)}).catch(()=>{clearTimeout(Pe),Rs(0,0,!1,R)})}(K.toString(),L)}else Ss(2);p.G=0,p.l&&p.l.sa(R),Zy(p),u_(p)}function Zy(p){if(p.G=0,p.ka=[],p.l){const R=_f(p.h);(0!=R.length||0!=p.i.length)&&(pt(p.ka,R),pt(p.ka,p.i),p.h.i.length=0,Et(p.i),p.i.length=0),p.l.ra()}}function ev(p,R,L){var K=L instanceof Ec?na(L):new Ec(L);if(""!=K.g)R&&(K.g=R+"."+K.g),Xd(K,K.s);else{var Pe=w.location;K=Pe.protocol,R=R?R+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var Ge=new Ec(null);K&&yf(Ge,K),R&&(Ge.g=R),Pe&&Xd(Ge,Pe),L&&(Ge.l=L),K=Ge}return R=p.ya,(L=p.D)&&R&&xr(K,L,R),xr(K,"VER",p.la),Ul(p,K),K}function tv(p,R,L){if(R&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new Jr(p.Ca&&!p.pa?new Ll({eb:L}):p.pa)).Ha(p.J),R}function nv(){}function nh(){}function Qi(p,R){qi.call(this),this.g=new Vl(R),this.l=p,this.h=R&&R.messageUrlParams||null,p=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(p?p["X-WebChannel-Content-Type"]=R.messageContentType:p={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(p?p["X-WebChannel-Client-Profile"]=R.va:p={"X-WebChannel-Client-Profile":R.va}),this.g.S=p,(p=R&&R.Sb)&&!Gt(p)&&(this.g.m=p),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Gt(R)&&(this.g.D=R,null!==(p=this.h)&&R in p&&R in(p=this.h)&&delete p[R]),this.j=new rh(this)}function rv(p){Bm.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var R=p.__sm__;if(R){e:{for(const L in R){p=L;break e}p=void 0}(this.i=p)&&(p=this.i,R=null!==R&&p in R?R[p]:void 0),this.data=R}else this.data=p}function d_(){ff.call(this),this.status=1}function rh(p){this.g=p}(a=Jr.prototype).Ha=function(p){this.J=p},a.ea=function(p,R,L,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);R=R?R.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zm.g(),this.v=function pI(p){return p.h||(p.h=p.i())}(this.o?this.o:zm),this.g.onreadystatechange=le(this.Ea,this);try{this.B=!0,this.g.open(R,String(p),!0),this.B=!1}catch(Ge){return void qy(this,Ge)}if(p=L||"",L=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var Pe in K)L.set(Pe,K[Pe]);else{if("function"!=typeof K.keys||"function"!=typeof K.get)throw Error("Unknown input type for opt_headers: "+String(K));for(const Ge of K.keys())L.set(Ge,K.get(Ge))}K=Array.from(L.keys()).find(Ge=>"content-type"==Ge.toLowerCase()),Pe=w.FormData&&p instanceof w.FormData,!(0<=Array.prototype.indexOf.call(Ky,R,void 0))||K||Pe||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,bt]of L)this.g.setRequestHeader(Ge,bt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qy(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ge){qy(this,Ge)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,fs(this,"complete"),fs(this,"abort"),Yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yp(this,!0)),Jr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?o_(this):this.bb())},a.bb=function(){o_(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var R=this.g.responseText;return p&&0==R.indexOf(p)&&(R=R.substring(p.length)),fI(R)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Vl.prototype).la=8,a.G=1,a.connect=function(p,R,L,K){Ss(0),this.W=p,this.H=R||{},L&&void 0!==K&&(this.H.OSID=L,this.H.OAID=K),this.F=this.X,this.I=ev(this,null,this.W),Jp(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Pe=new Ic(this,this.j,p);let Ge=this.o;if(this.S&&(Ge?(Ge=se(Ge),we(Ge,this.S)):Ge=this.S),null!==this.m||this.O||(Pe.H=Ge,Ge=null),this.P)e:{for(var R=0,L=0;L<this.i.length;L++){var K=this.i[L];if(void 0===(K="__data__"in K.map&&"string"==typeof(K=K.map.__data__)?K.length:void 0))break;if(4096<(R+=K)){R=L;break e}if(4096===R||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=Zp(this,Pe,R),xr(L=na(this.I),"RID",p),xr(L,"CVER",22),this.D&&xr(L,"X-HTTP-Session-Id",this.D),Ul(this,L),Ge&&(this.O?R="headers="+encodeURIComponent(String(EI(Ge)))+"&"+R:this.m&&Gy(L,this.m,Ge)),Jm(this.h,Pe),this.Ua&&xr(L,"TYPE","init"),this.P?(xr(L,"$req",R),xr(L,"SID","null"),Pe.T=!0,$p(Pe,L,null)):$p(Pe,L,R),this.G=2}}else 3==this.G&&(p?wI(this,p):0==this.i.length||Gp(this.h)||wI(this))},a.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=pf(le(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ss(10),Xp(this),ra(this))},a.Za=function(){null!=this.C&&(this.C=null,Xp(this),c_(this),Ss(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Ss(2)):(this.j.info("Failed to ping google.com"),Ss(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=nv.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},nh.prototype.g=function(p,R){return new Qi(p,R)},it(Qi,qi),Qi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qi.prototype.close=function(){a_(this.g)},Qi.prototype.o=function(p){var R=this.g;if("string"==typeof p){var L={};L.__data__=p,p=L}else this.u&&((L={}).__data__=Vm(p),p=L);R.i.push(new class{constructor(p,R){this.g=p,this.map=R}}(R.Ya++,p)),3==R.G&&Jp(R)},Qi.prototype.N=function(){this.g.l=null,delete this.j,a_(this.g),delete this.g,Qi.aa.N.call(this)},it(rv,Bm),it(d_,ff),it(rh,nv),rh.prototype.ua=function(){fs(this.g,"a")},rh.prototype.ta=function(p){fs(this.g,new rv(p))},rh.prototype.sa=function(p){fs(this.g,new d_)},rh.prototype.ra=function(){fs(this.g,"b")},nh.prototype.createWebChannel=nh.prototype.g,Qi.prototype.send=Qi.prototype.o,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,Ae=on.createWebChannelTransport=function(){return new nh},be=on.getStatEventTarget=function(){return xl()},pe=on.Event=ta,ce=on.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hm.NO_ERROR=0,Hm.TIMEOUT=8,Hm.HTTP_ERROR=6,St=on.ErrorCode=Hm,Oy.COMPLETE="complete",Pt=on.EventType=Oy,xy.EventType=hf,hf.OPEN="a",hf.CLOSE="b",hf.ERROR="c",hf.MESSAGE="d",qi.prototype.listen=qi.prototype.K,xn=on.WebChannel=xy,on.FetchXmlHttpFactory=Ll,Jr.prototype.listenOnce=Jr.prototype.L,Jr.prototype.getLastError=Jr.prototype.Ka,Jr.prototype.getLastErrorCode=Jr.prototype.Ba,Jr.prototype.getStatus=Jr.prototype.Z,Jr.prototype.getResponseJson=Jr.prototype.Oa,Jr.prototype.getResponseText=Jr.prototype.oa,Jr.prototype.send=Jr.prototype.ea,Jr.prototype.setWithCredentials=Jr.prototype.Ha,Jt=on.XhrIo=Jr}).apply(typeof Ht<"u"?Ht:typeof self<"u"?self:typeof window<"u"?window:{});const We="@firebase/firestore";class Le{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");let ot="10.14.0";const mt=new ue.Vy("@firebase/firestore");function $n(){return mt.logLevel}function $e(a,...e){if(mt.logLevel<=ue.$b.DEBUG){const r=e.map(sn);mt.debug(`Firestore (${ot}): ${a}`,...r)}}function Ot(a,...e){if(mt.logLevel<=ue.$b.ERROR){const r=e.map(sn);mt.error(`Firestore (${ot}): ${a}`,...r)}}function Hn(a,...e){if(mt.logLevel<=ue.$b.WARN){const r=e.map(sn);mt.warn(`Firestore (${ot}): ${a}`,...r)}}function sn(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function ht(a="Unexpected state"){const e=`FIRESTORE (${ot}) INTERNAL ASSERTION FAILED: `+a;throw Ot(e),new Error(e)}function gt(a,e){a||ht()}function Ze(a,e){return a}const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends ke.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Wr{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ir{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Le.UNAUTHENTICATED))}shutdown(){}}class qt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class an{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;gt(void 0===this.o);let u=this.i;const d=O=>this.i!==u?(u=this.i,r(O)):Promise.resolve();let g=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Xn,e.enqueueRetryable(()=>d(this.currentUser))};const w=()=>{const O=g;e.enqueueRetryable((0,_e.A)(function*(){yield O.promise,yield d(s.currentUser)}))},S=O=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=O,this.o&&(this.auth.addAuthTokenListener(this.o),w())};this.t.onInit(O=>S(O)),setTimeout(()=>{if(!this.auth){const O=this.t.getImmediate({optional:!0});O?S(O):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Xn)}},0),w()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt("string"==typeof s.accessToken),new Wr(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Le(e)}}class Wt{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fr{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Wt(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vr{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){gt(void 0===this.o);const s=d=>{null!=d.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.R;return this.R=d.token,$e("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?r(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const u=d=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(gt("string"==typeof r.token),this.R=r.token,new Pr(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Fr(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class to{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=Fr(40);for(let d=0;d<u.length;++d)s.length<20&&u[d]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return s}}function at(a,e){return a<e?-1:a>e?1:0}function Gr(a,e,r){return a.length===e.length&&a.every((s,u)=>r(s,e[u]))}function un(a){return a+"\0"}class Sn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new qe(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qe(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new qe(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new Sn(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ct(e)}static min(){return new ct(new Sn(0,0))}static max(){return new ct(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vr{constructor(e,r,s){void 0===r?r=0:r>e.length&&ht(),void 0===s?s=e.length-r:s>e.length-r&&ht(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Vr.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let u=0;u<s;u++){const d=e.get(u),g=r.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Xt extends Vr{construct(e,r,s){return new Xt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new qe(Re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new Xt(r)}static emptyPath(){return new Xt([])}}const pr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends Vr{construct(e,r,s){return new On(e,r,s)}static isValidIdentifier(e){return pr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const r=[];let s="",u=0;const d=()=>{if(0===s.length)throw new qe(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let g=!1;for(;u<e.length;){const w=e[u];if("\\"===w){if(u+1===e.length)throw new qe(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new qe(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,u+=2}else"`"===w?(g=!g,u++):"."!==w||g?(s+=w,u++):(d(),u++)}if(d(),g)throw new qe(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(r)}static emptyPath(){return new On([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(Xt.fromString(e))}static fromName(e){return new It(Xt.fromString(e).popFirst(5))}static empty(){return new It(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Xt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new Xt(e.slice()))}}class Ur{constructor(e,r,s,u){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=u}}function Xi(a){return a.fields.find(e=>2===e.kind)}function Ir(a){return a.fields.filter(e=>2!==e.kind)}Ur.UNKNOWN_ID=-1;class Kr{constructor(e,r){this.fieldPath=e,this.kind=r}}class ze{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ze(0,B.min())}}function W(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=ct.fromTimestamp(1e9===s?new Sn(r+1,0):new Sn(r,s));return new B(u,It.empty(),e)}function k(a){return new B(a.readTime,a.key,-1)}class B{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new B(ct.min(),It.empty(),-1)}static max(){return new B(ct.max(),It.empty(),-1)}}function ne(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=It.comparator(a.documentKey,e.documentKey),0!==r?r:at(a.largestBatchId,e.largestBatchId))}const ae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lt(a){return jt.apply(this,arguments)}function jt(){return(jt=(0,_e.A)(function*(a){if(a.code!==Re.FAILED_PRECONDITION||a.message!==ae)throw a;$e("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new oe((s,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(s,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof oe?r:oe.resolve(r)}catch(r){return oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):oe.reject(r)}static resolve(e){return new oe((r,s)=>{r(e)})}static reject(e){return new oe((r,s)=>{s(e)})}static waitFor(e){return new oe((r,s)=>{let u=0,d=0,g=!1;e.forEach(w=>{++u,w.next(()=>{++d,g&&d===u&&r()},S=>s(S))}),g=!0,d===u&&r()})}static or(e){let r=oe.resolve(!1);for(const s of e)r=r.next(u=>u?oe.resolve(u):s());return r}static forEach(e,r){const s=[];return e.forEach((u,d)=>{s.push(r.call(this,u,d))}),this.waitFor(s)}static mapArray(e,r){return new oe((s,u)=>{const d=e.length,g=new Array(d);let w=0;for(let S=0;S<d;S++){const O=S;r(e[O]).next(H=>{g[O]=H,++w,w===d&&s(g)},H=>u(H))}})}static doWhile(e,r){return new oe((s,u)=>{const d=()=>{!0===e()?r().next(()=>{d()},u):s()};d()})}}class pn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Xn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new pi(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=Er(s.target.error);this.V.reject(new pi(e,u))}}static open(e,r,s,u){try{return new pn(r,e.transaction(u,s))}catch(d){throw new pi(r,d)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ei(r)}}class Dn{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===Dn.S((0,ke.ZQ)())&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Or(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ke.zW)())return!1;if(Dn.v())return!0;const e=(0,ke.ZQ)(),r=Dn.S(e),s=0<r&&r<10,u=cn(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,_e.A)(function*(){return r.db||($e("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{u(new pi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const w=g.target.error;u("VersionError"===w.name?new qe(Re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new qe(Re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new pi(e,w))},d.onupgradeneeded=g=>{$e("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.p.O(g.target.result,d.transaction,g.oldVersion,r.version).next(()=>{$e("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,u){var d=this;return(0,_e.A)(function*(){const g="readonly"===r;let w=0;for(;;){++w;try{d.db=yield d.M(e);const S=pn.open(d.db,e,g?"readonly":"readwrite",s),O=u(S).next(H=>(S.g(),H)).catch(H=>(S.abort(H),oe.reject(H))).toPromise();return O.catch(()=>{}),yield S.m,O}catch(S){const O=S,H="FirebaseError"!==O.name&&w<3;if($e("SimpleDb","Transaction failed with error:",O.message,"Retrying:",H),d.close(),!H)return Promise.reject(O)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function cn(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Zr{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Or(this.B.delete())}}class pi extends qe{constructor(e,r){super(Re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function gi(a){return"IndexedDbTransactionError"===a.name}class ei{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?($e("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Or(s)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Or(this.store.add(e))}get(e){return Or(this.store.get(e)).next(r=>(void 0===r&&(r=null),$e("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Or(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Or(this.store.count())}U(e,r){const s=this.options(e,r),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(s.range);return new oe((g,w)=>{d.onerror=S=>{w(S.target.error)},d.onsuccess=S=>{g(S.target.result)}})}{const d=this.cursor(s),g=[];return this.W(d,(w,S)=>{g.push(S)}).next(()=>g)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new oe((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}j(e,r){$e("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const u=this.cursor(s);return this.W(u,(d,g,w)=>w.delete())}J(e,r){let s;r?s=e:(s={},r=e);const u=this.cursor(s);return this.W(u,r)}Y(e){const r=this.cursor({});return new oe((s,u)=>{r.onerror=d=>{const g=Er(d.target.error);u(g)},r.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(w=>{w?g.continue():s()}):s()}})}W(e,r){const s=[];return new oe((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const w=g.target.result;if(!w)return void u();const S=new Zr(w),O=r(w.primaryKey,w.value,S);if(O instanceof oe){const H=O.catch(q=>(S.done(),oe.reject(q)));s.push(H)}S.isDone?u():null===S.K?w.continue():w.continue(S.K)}}).next(()=>oe.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Or(a){return new oe((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const u=Er(s.target.error);r(u)}})}let Ai=!1;function Er(a){const e=Dn.S((0,ke.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ai||(Ai=!0,setTimeout(()=>{throw s},0)),s}}return a}class hn{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;$e("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.A)(function*(){r.task=null;try{$e("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){gi(s)?$e("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield lt(s)}yield r.X(6e4)}))}}class ps{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,_e.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let u=r,d=!0;return oe.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return $e("IndexBackfiller",`Processing collection: ${g}`),this.ne(e,g,u).next(w=>{u-=w,s.add(g)});d=!1})).next(()=>r-u)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.re(u,d)).next(w=>($e("IndexBackfiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,r,w))).next(()=>g.size)}))}re(e,r){let s=e;return r.changes.forEach((u,d)=>{const g=k(d);ne(g,s)>0&&(s=g)}),new B(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let Ne=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function Ie(a){return null==a}function Xe(a){return 0===a&&1/a==-1/0}function At(a){return"number"==typeof a&&Number.isInteger(a)&&!Xe(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Nt(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=nn(e)),e=Qt(a.get(r),e);return nn(e)}function Qt(a,e){let r=e;const s=a.length;for(let u=0;u<s;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function nn(a){return a+"\x01\x01"}function Tn(a){const e=a.length;if(gt(e>=2),2===e)return gt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Xt.emptyPath();const r=e-2,s=[];let u="";for(let d=0;d<e;){const g=a.indexOf("\x01",d);switch((g<0||g>r)&&ht(),a.charAt(g+1)){case"\x01":const w=a.substring(d,g);let S;0===u.length?S=w:(u+=w,S=u,u=""),s.push(S);break;case"\x10":u+=a.substring(d,g),u+="\0";break;case"\x11":u+=a.substring(d,g+1);break;default:ht()}d=g+2}return new Xt(s)}const Zn=["userId","batchId"];function Br(a,e){return[a,Nt(e)]}function Cn(a,e,r){return[a,Nt(e),r]}const Us={},gs=["prefixPath","collectionGroup","readTime","documentId"],Au=["prefixPath","collectionGroup","documentId"],no=["collectionGroup","readTime","prefixPath","documentId"],Du=["canonicalId","targetId"],ia=["targetId","path"],si=["path","targetId"],ro=["collectionId","parent"],Ni=["indexId","uid"],Na=["uid","sequenceNumber"],Zi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],io=["indexId","uid","orderedDocumentKey"],ms=["userId","collectionPath","documentId"],es=["userId","collectionPath","largestBatchId"],xa=["userId","collectionGroup","largestBatchId"],Di=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oa=[...Di,"documentOverlays"],ka=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Cu=ka,sa=[...Cu,"indexConfiguration","indexState","indexEntries"],bu=sa,La=[...sa,"globals"];class oa extends nt{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Cr(a,e){const r=Ze(a);return Dn.F(r._e,e)}function Ps(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function xi(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function br(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class fn{constructor(e,r){this.comparator=e,this.root=r||Mn.EMPTY}insert(e,r){return new fn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}}class _s{constructor(e,r,s,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=r?s(e.key,r):1,r&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,r,s,u,d){this.key=e,this.value=r,this.color=s??Mn.RED,this.left=u??Mn.EMPTY,this.right=d??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,u,d){return new Mn(e??this.key,r??this.value,s??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let u=this;const d=s(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,r,s),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Mn.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1,Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(e,r,s,u,d){return this}insert(e,r,s){return new Mn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Bs(this.data.getIterator())}getIteratorFrom(e){return new Bs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new zn(this.comparator);return r.data=e,r}}class Bs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oi(a){return a.hasNext()?a.getNext():void 0}class lr{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new lr([])}unionWith(e){let r=new zn(On.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new lr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gr(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class ki extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new ki("Invalid base64 string: "+d):d}}(e);return new _t(r)}static fromUint8Array(e){const r=function(u){let d="";for(let g=0;g<u.length;++g)d+=String.fromCharCode(u[g]);return d}(e);return new _t(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const Zt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mn(a){if(gt(!!a),"string"==typeof a){let e=0;const r=Zt.exec(a);if(gt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_n(a.seconds),nanos:_n(a.nanos)}}function _n(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Ci(a){return"string"==typeof a?_t.fromBase64String(a):_t.fromUint8Array(a)}function gr(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ts(a){const e=a.mapValue.fields.__previous_value__;return gr(e)?ts(e):e}function Wn(a){const e=mn(a.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}class ys{constructor(e,r,s,u,d,g,w,S,O){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=S,this.useFetchStreams=O}}class jr{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new jr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jr&&e.projectId===this.projectId&&e.database===this.database}}const $t={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bi={nullValue:"NULL_VALUE"};function mi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?gr(a)?4:$s(a)?9007199254740991:js(a)?10:11:ht()}function cr(a,e){if(a===e)return!0;const r=mi(a);if(r!==mi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Wn(a).isEqual(Wn(e));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const g=mn(u.timestampValue),w=mn(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return d=e,Ci(a.bytesValue).isEqual(Ci(d.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,d){return _n(u.geoPointValue.latitude)===_n(d.geoPointValue.latitude)&&_n(u.geoPointValue.longitude)===_n(d.geoPointValue.longitude)}(a,e);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return _n(u.integerValue)===_n(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const g=_n(u.doubleValue),w=_n(d.doubleValue);return g===w?Xe(g)===Xe(w):isNaN(g)&&isNaN(w)}return!1}(a,e);case 9:return Gr(a.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(u,d){const g=u.mapValue.fields||{},w=d.mapValue.fields||{};if(Ps(g)!==Ps(w))return!1;for(const S in g)if(g.hasOwnProperty(S)&&(void 0===w[S]||!cr(g[S],w[S])))return!1;return!0}(a,e);default:return ht()}var d}function er(a,e){return void 0!==(a.values||[]).find(r=>cr(r,e))}function Li(a,e){if(a===e)return 0;const r=mi(a),s=mi(e);if(r!==s)return at(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return at(a.booleanValue,e.booleanValue);case 2:return function(d,g){const w=_n(d.integerValue||d.doubleValue),S=_n(g.integerValue||g.doubleValue);return w<S?-1:w>S?1:w===S?0:isNaN(w)?isNaN(S)?0:-1:1}(a,e);case 3:return Sr(a.timestampValue,e.timestampValue);case 4:return Sr(Wn(a),Wn(e));case 5:return at(a.stringValue,e.stringValue);case 6:return function(d,g){const w=Ci(d),S=Ci(g);return w.compareTo(S)}(a.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),S=g.split("/");for(let O=0;O<w.length&&O<S.length;O++){const H=at(w[O],S[O]);if(0!==H)return H}return at(w.length,S.length)}(a.referenceValue,e.referenceValue);case 8:return function(d,g){const w=at(_n(d.latitude),_n(g.latitude));return 0!==w?w:at(_n(d.longitude),_n(g.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return Fi(a.arrayValue,e.arrayValue);case 10:return function(d,g){var w,S,O,H;const xe=null===(w=(d.fields||{}).value)||void 0===w?void 0:w.arrayValue,it=null===(S=(g.fields||{}).value)||void 0===S?void 0:S.arrayValue,Et=at((null===(O=xe?.values)||void 0===O?void 0:O.length)||0,(null===(H=it?.values)||void 0===H?void 0:H.length)||0);return 0!==Et?Et:Fi(xe,it)}(a.mapValue,e.mapValue);case 11:return function(d,g){if(d===$t.mapValue&&g===$t.mapValue)return 0;if(d===$t.mapValue)return 1;if(g===$t.mapValue)return-1;const w=d.fields||{},S=Object.keys(w),O=g.fields||{},H=Object.keys(O);S.sort(),H.sort();for(let q=0;q<S.length&&q<H.length;++q){const le=at(S[q],H[q]);if(0!==le)return le;const xe=Li(w[S[q]],O[H[q]]);if(0!==xe)return xe}return at(S.length,H.length)}(a.mapValue,e.mapValue);default:throw ht()}}function Sr(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return at(a,e);const r=mn(a),s=mn(e),u=at(r.seconds,s.seconds);return 0!==u?u:at(r.nanos,s.nanos)}function Fi(a,e){const r=a.values||[],s=e.values||[];for(let u=0;u<r.length&&u<s.length;++u){const d=Li(r[u],s[u]);if(d)return d}return at(r.length,s.length)}function Si(a){return Mo(a)}function Mo(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=mn(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Ci(a.bytesValue).toBase64():"referenceValue"in a?It.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Mo(d);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of s)d?d=!1:u+=",",u+=`${g}:${Mo(r.fields[g])}`;return u+"}"}(a.mapValue):ht()}function ti(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Vi(a){return!!a&&"integerValue"in a}function vs(a){return!!a&&"arrayValue"in a}function yn(a){return!!a&&"nullValue"in a}function Fa(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Ui(a){return!!a&&"mapValue"in a}function js(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function _i(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return xi(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=_i(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=_i(a.arrayValue.values[r]);return e}return Object.assign({},a)}function $s(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const so={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function oo(a){return"nullValue"in a?bi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?ti(jr.empty(),It.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?js(a)?so:{mapValue:{}}:ht()}function dr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?ti(jr.empty(),It.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?so:"mapValue"in a?js(a)?{mapValue:{}}:$t:ht()}function No(a,e){const r=Li(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function mr(a,e){const r=Li(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Ui(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=_i(r)}setAll(e){let r=On.emptyPath(),s={},u=[];e.forEach((g,w)=>{if(!r.isImmediateParentOf(w)){const S=this.getFieldsMap(r);this.applyChanges(S,s,u),s={},u=[],r=w.popLast()}g?s[w.lastSegment()]=_i(g):u.push(w.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,s,u)}delete(e){const r=this.field(e.popLast());Ui(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=r.mapValue.fields[e.get(s)];Ui(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,s){xi(r,(u,d)=>e[u]=d);for(const u of s)delete e[u]}clone(){return new ln(_i(this.value))}}function xo(a){const e=[];return xi(a.fields,(r,s)=>{const u=new On([r]);if(Ui(s)){const d=xo(s.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new lr(e)}class Nn{constructor(e,r,s,u,d,g,w){this.key=e,this.documentType=r,this.version=s,this.readTime=u,this.createTime=d,this.data=g,this.documentState=w}static newInvalidDocument(e){return new Nn(e,0,ct.min(),ct.min(),ct.min(),ln.empty(),0)}static newFoundDocument(e,r,s,u){return new Nn(e,1,r,ct.min(),s,u,0)}static newNoDocument(e,r){return new Nn(e,2,r,ct.min(),ct.min(),ln.empty(),0)}static newUnknownDocument(e,r){return new Nn(e,3,r,ct.min(),ct.min(),ln.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Is{constructor(e,r){this.position=e,this.inclusive=r}}function $r(a,e,r){let s=0;for(let u=0;u<a.position.length;u++){const d=e[u],g=a.position[u];if(s=d.field.isKeyField()?It.comparator(It.fromName(g.referenceValue),r.key):Li(g,r.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function aa(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!cr(a.position[r],e.position[r]))return!1;return!0}class Es{constructor(e,r="asc"){this.field=e,this.dir=r}}function ua(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Ac{}class wn extends Ac{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new bc(e,r,s):"array-contains"===r?new Mu(e,s):"in"===r?new Oo(e,s):"not-in"===r?new Ua(e,s):"array-contains-any"===r?new Ms(e,s):new wn(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Sc(e,s):new Ru(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(Li(r,this.value)):null!==r&&mi(this.value)===mi(r)&&this.matchesComparison(Li(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class en extends Ac{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new en(e,r)}matches(e){return ns(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ns(a){return"and"===a.op}function Dc(a){return"or"===a.op}function Va(a){return qn(a)&&ns(a)}function qn(a){for(const e of a.filters)if(e instanceof en)return!1;return!0}function ao(a){if(a instanceof wn)return a.field.canonicalString()+a.op.toString()+Si(a.value);if(Va(a))return a.filters.map(e=>ao(e)).join(",");{const e=a.filters.map(r=>ao(r)).join(",");return`${a.op}(${e})`}}function Cc(a,e){return a instanceof wn?(s=a,(u=e)instanceof wn&&s.op===u.op&&s.field.isEqual(u.field)&&cr(s.value,u.value)):a instanceof en?function(s,u){return u instanceof en&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((d,g,w)=>d&&Cc(g,u.filters[w]),!0)}(a,e):void ht();var s,u}function jl(a,e){const r=a.filters.concat(e);return en.create(r,a.op)}function Su(a){return a instanceof wn?`${(r=a).field.canonicalString()} ${r.op} ${Si(r.value)}`:a instanceof en?function(r){return r.op.toString()+" {"+r.getFilters().map(Su).join(" ,")+"}"}(a):"Filter";var r}class bc extends wn{constructor(e,r,s){super(e,r,s),this.key=It.fromName(s.referenceValue)}matches(e){const r=It.comparator(e.key,this.key);return this.matchesComparison(r)}}class Sc extends wn{constructor(e,r){super(e,"in",r),this.keys=Pu(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Ru extends wn{constructor(e,r){super(e,"not-in",r),this.keys=Pu(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Pu(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>It.fromName(s.referenceValue))}class Mu extends wn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return vs(r)&&er(r.arrayValue,this.value)}}class Oo extends wn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&er(this.value.arrayValue,r)}}class Ua extends wn{constructor(e,r){super(e,"not-in",r)}matches(e){if(er(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!er(this.value.arrayValue,r)}}class Ms extends wn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!vs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>er(this.value.arrayValue,s))}}class Ba{constructor(e,r=null,s=[],u=[],d=null,g=null,w=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=d,this.startAt=g,this.endAt=w,this.ue=null}}function Bi(a,e=null,r=[],s=[],u=null,d=null,g=null){return new Ba(a,e,r,s,u,d,g)}function Hr(a){const e=Ze(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>ao(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),Ie(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Si(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Si(s)).join(",")),e.ue=r}return e.ue}function rs(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!ua(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!Cc(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!aa(a.startAt,e.startAt)&&aa(a.endAt,e.endAt)}function ko(a){return It.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Tr(a,e){return a.filters.filter(r=>r instanceof wn&&r.field.isEqual(e))}function uo(a,e,r){let s=bi,u=!0;for(const d of Tr(a,e)){let g=bi,w=!0;switch(d.op){case"<":case"<=":g=oo(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,w=!1;break;case"!=":case"not-in":g=bi}No({value:s,inclusive:u},{value:g,inclusive:w})<0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];No({value:s,inclusive:u},{value:g,inclusive:r.inclusive})<0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}function qr(a,e,r){let s=$t,u=!0;for(const d of Tr(a,e)){let g=$t,w=!0;switch(d.op){case">=":case">":g=dr(d.value),w=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,w=!1;break;case"!=":case"not-in":g=$t}mr({value:s,inclusive:u},{value:g,inclusive:w})>0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];mr({value:s,inclusive:u},{value:g,inclusive:r.inclusive})>0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}class ji{constructor(e,r=null,s=[],u=[],d=null,g="F",w=null,S=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=d,this.limitType=g,this.startAt=w,this.endAt=S,this.ce=null,this.le=null,this.he=null}}function Lo(a,e,r,s,u,d,g,w){return new ji(a,e,r,s,u,d,g,w)}function $i(a){return new ji(a)}function Ts(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function Hs(a){return null!==a.collectionGroup}function ai(a){const e=Ze(a);if(null===e.ce){e.ce=[];const r=new Set;for(const d of e.explicitOrderBy)e.ce.push(d),r.add(d.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new zn(On.comparator);return g.filters.forEach(S=>{S.getFlattenedFilters().forEach(O=>{O.isInequality()&&(w=w.add(O.field))})}),w})(e).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||e.ce.push(new Es(d,s))}),r.has(On.keyField().canonicalString())||e.ce.push(new Es(On.keyField(),s))}return e.ce}function wr(a){const e=Ze(a);return e.le||(e.le=function Nu(a,e){if("F"===a.limitType)return Bi(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(u=>new Es(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new Is(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Is(a.startAt.position,a.startAt.inclusive):null;return Bi(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,ai(a))),e.le}function Fo(a,e){const r=a.filters.concat([e]);return new ji(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function lo(a,e,r){return new ji(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function ws(a,e){return rs(wr(a),wr(e))&&a.limitType===e.limitType}function Ns(a){return`${Hr(wr(a))}|lt:${a.limitType}`}function yi(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>Su(u)).join(", ")}]`),Ie(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>Si(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>Si(u)).join(",")),`Target(${s})`}(wr(a))}; limitType=${a.limitType})`}function zs(a,e){return e.isFoundDocument()&&function(s,u){const d=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(d):It.isDocumentKey(s.path)?s.path.isEqual(d):s.path.isImmediateParentOf(d)}(a,e)&&function(s,u){for(const d of ai(s))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,e)&&function(s,u){for(const d of s.filters)if(!d.matches(u))return!1;return!0}(a,e)&&(u=e,!((s=a).startAt&&!function(g,w,S){const O=$r(g,w,S);return g.inclusive?O<=0:O<0}(s.startAt,ai(s),u)||s.endAt&&!function(g,w,S){const O=$r(g,w,S);return g.inclusive?O>=0:O>0}(s.endAt,ai(s),u)));var s,u}function ca(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function ja(a){return(e,r)=>{let s=!1;for(const u of ai(a)){const d=la(u,e,r);if(0!==d)return d;s=s||u.field.isKeyField()}return 0}}function la(a,e,r){const s=a.field.isKeyField()?It.comparator(e.key,r.key):function(d,g,w){const S=g.data.field(d),O=w.data.field(d);return null!==S&&null!==O?Li(S,O):ht()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return ht()}}class ui{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[u,d]of s)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(r,s)=>{for(const[u,d]of s)e(u,d)})}isEmpty(){return br(this.inner)}size(){return this.innerSize}}const xu=new fn(It.comparator);function vi(){return xu}const Ou=new fn(It.comparator);function xs(...a){let e=Ou;for(const r of a)e=e.insert(r.key,r);return e}function Rc(a){let e=Ou;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function Hi(){return ho()}function da(){return ho()}function ho(){return new ui(a=>a.toString(),(a,e)=>a.isEqual(e))}const $a=new fn(It.comparator),A=new zn(It.comparator);function V(...a){let e=A;for(const r of a)e=e.add(r);return e}const P=new zn(at);function F(){return P}function Z(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xe(e)?"-0":e}}function Fe(a){return{integerValue:""+a}}function rt(a,e){return At(e)?Fe(e):Z(a,e)}class kt{constructor(){this._=void 0}}function Qn(a,e,r){return a instanceof tn?function(u,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&gr(d)&&(d=ts(d)),d&&(g.fields.__previous_value__=d),{mapValue:g}}(r,e):a instanceof Yn?Gn(a,e):a instanceof tr?Qr(a,e):function(u,d){const g=Bn(u,d),w=Ws(g)+Ws(u.Pe);return Vi(g)&&Vi(u.Pe)?Fe(w):Z(u.serializer,w)}(a,e)}function Un(a,e,r){return a instanceof Yn?Gn(a,e):a instanceof tr?Qr(a,e):r}function Bn(a,e){return a instanceof zr?Vi(s=e)||(d=s)&&"doubleValue"in d?e:{integerValue:0}:null;var s,d}class tn extends kt{}class Yn extends kt{constructor(e){super(),this.elements=e}}function Gn(a,e){const r=ci(e);for(const s of a.elements)r.some(u=>cr(u,s))||r.push(s);return{arrayValue:{values:r}}}class tr extends kt{constructor(e){super(),this.elements=e}}function Qr(a,e){let r=ci(e);for(const s of a.elements)r=r.filter(u=>!cr(u,s));return{arrayValue:{values:r}}}class zr extends kt{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Ws(a){return _n(a.integerValue||a.doubleValue)}function ci(a){return vs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class zi{constructor(e,r){this.field=e,this.transform=r}}class is{constructor(e,r){this.version=e,this.transformResults=r}}class _r{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sr(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class Gs{}function fo(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new Wi(a.key,_r.none()):new nr(a.key,a.data,_r.none());{const r=a.data,s=ln.empty();let u=new zn(On.comparator);for(let d of e.fields)if(!u.has(d)){let g=r.field(d);null===g&&d.length>1&&(d=d.popLast(),g=r.field(d)),null===g?s.delete(d):s.set(d,g),u=u.add(d)}return new po(a.key,s,new lr(u.toArray()),_r.none())}}function Ri(a,e,r){a instanceof nr?function(u,d,g){const w=u.value.clone(),S=ku(u.fieldTransforms,d,g.transformResults);w.setAll(S),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(a,e,r):a instanceof po?function(u,d,g){if(!sr(u.precondition,d))return void d.convertToUnknownDocument(g.version);const w=ku(u.fieldTransforms,d,g.transformResults),S=d.data;S.setAll($l(u)),S.setAll(w),d.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ha(a,e,r,s){return a instanceof nr?function(d,g,w,S){if(!sr(d.precondition,g))return w;const O=d.value.clone(),H=As(d.fieldTransforms,S,g);return O.setAll(H),g.convertToFoundDocument(g.version,O).setHasLocalMutations(),null}(a,e,r,s):a instanceof po?function(d,g,w,S){if(!sr(d.precondition,g))return w;const O=As(d.fieldTransforms,S,g),H=g.data;return H.setAll($l(d)),H.setAll(O),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(q=>q.field))}(a,e,r,s):(w=r,sr(a.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function sh(a,e){let r=null;for(const s of a.fieldTransforms){const u=e.data.field(s.field),d=Bn(s.transform,u||null);null!=d&&(null===r&&(r=ln.empty()),r.set(s.field,d))}return r||null}function ha(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===u||s&&u&&Gr(s,u,(d,g)=>function Yr(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(s=a.transform)instanceof Yn&&u instanceof Yn||s instanceof tr&&u instanceof tr?Gr(s.elements,u.elements,cr):s instanceof zr&&u instanceof zr?cr(s.Pe,u.Pe):s instanceof tn&&u instanceof tn);var s,u}(d,g))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,u}class nr extends Gs{constructor(e,r,s,u=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class po extends Gs{constructor(e,r,s,u,d=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function $l(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function ku(a,e,r){const s=new Map;gt(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],g=d.transform,w=e.data.field(d.field);s.set(d.field,Un(g,w,r[u]))}return s}function As(a,e,r){const s=new Map;for(const u of a){const d=u.transform,g=r.data.field(u.field);s.set(u.field,Qn(d,g,e))}return s}class Wi extends Gs{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fa extends Gs{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pc{constructor(e,r,s,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Ri(d,e,s[u])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Ha(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Ha(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=da();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let w=this.applyToLocalView(g,d.mutatedFields);w=r.has(u.key)?null:w;const S=fo(g,w);null!==S&&s.set(u.key,S),g.isValidDocument()||g.convertToNoDocument(ct.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),V())}isEqual(e){return this.batchId===e.batchId&&Gr(this.mutations,e.mutations,(r,s)=>ha(r,s))&&Gr(this.baseMutations,e.baseMutations,(r,s)=>ha(r,s))}}class Mc{constructor(e,r,s,u){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(e,r,s){gt(e.mutations.length===s.length);let u=$a;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,s[g].version);return new Mc(e,r,s,u)}}class Lu{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yt{constructor(e,r){this.count=e,this.unchangedNames=r}}var kr,kn;function ss(a){switch(a){default:return ht();case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0}}function Hl(a){if(void 0===a)return Ot("GRPC error has no .code"),Re.UNKNOWN;switch(a){case kr.OK:return Re.OK;case kr.CANCELLED:return Re.CANCELLED;case kr.UNKNOWN:return Re.UNKNOWN;case kr.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case kr.INTERNAL:return Re.INTERNAL;case kr.UNAVAILABLE:return Re.UNAVAILABLE;case kr.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case kr.NOT_FOUND:return Re.NOT_FOUND;case kr.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case kr.ABORTED:return Re.ABORTED;case kr.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case kr.DATA_LOSS:return Re.DATA_LOSS;default:return ht()}}(kn=kr||(kr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";function xc(){return new TextEncoder}const za=new wt([4294967295,4294967295],0);function Oc(a){const e=xc().encode(a),r=new je;return r.update(e),new Uint8Array(r.digest())}function zl(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new wt([r,s],0),new wt([u,d],0)]}class go{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Fu(`Invalid padding: ${r}`);if(s<0)throw new Fu(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Fu(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new Fu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=wt.fromNumber(this.Ie)}Ee(e,r,s){let u=e.add(r.multiply(wt.fromNumber(s)));return 1===u.compare(za)&&(u=new wt([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=Oc(e),[s,u]=zl(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);if(!this.de(g))return!1}return!0}static create(e,r,s){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new go(d,u,r);return s.forEach(w=>g.insert(w)),g}insert(e){if(0===this.Ie)return;const r=Oc(e),[s,u]=zl(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);this.Ae(g)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class os{constructor(e,r,s,u,d){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const u=new Map;return u.set(e,ut.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new os(ct.min(),u,new fn(at),vi(),V())}}class ut{constructor(e,r,s,u,d){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ut(s,r,V(),V(),V())}}class Rn{constructor(e,r,s,u){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=u}}class Vo{constructor(e,r){this.targetId=e,this.me=r}}class Wl{constructor(e,r,s=_t.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=u}}class Ln{constructor(){this.fe=0,this.ge=Os(),this.pe=_t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=V(),r=V(),s=V();return this.ge.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:ht()}}),new ut(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=Os()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oh{constructor(e){this.Le=e,this.Be=new Map,this.ke=vi(),this.qe=mo(),this.Qe=new fn(at)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:ht()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,s=e.me.count,u=this.Je(r);if(u){const d=u.target;if(ko(d))if(0===s){const g=new It(d.path);this.Ue(r,g,Nn.newNoDocument(g,ct.min()))}else gt(1===s);else{const g=this.Ye(r);if(g!==s){const w=this.Ze(e),S=w?this.Xe(w,e,g):1;0!==S&&(this.je(r),this.Qe=this.Qe.insert(r,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let g,w;try{g=Ci(s).toUint8Array()}catch(S){if(S instanceof ki)return Hn("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{w=new go(g,u,d)}catch(S){return Hn(S instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===w.Ie?null:w}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let u=0;return s.forEach(d=>{const g=this.Le.tt(),w=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;e.mightContain(w)||(this.Ue(r,d,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((d,g)=>{const w=this.Je(g);if(w){if(d.current&&ko(w.target)){const S=new It(w.target.path);null!==this.ke.get(S)||this.it(g,S)||this.Ue(g,S,Nn.newNoDocument(S,e))}d.be&&(r.set(g,d.ve()),d.Ce())}});let s=V();this.qe.forEach((d,g)=>{let w=!0;g.forEachWhile(S=>{const O=this.Je(S);return!O||"TargetPurposeLimboResolution"===O.purpose||(w=!1,!1)}),w&&(s=s.add(d))}),this.ke.forEach((d,g)=>g.setReadTime(e));const u=new os(e,r,this.Qe,this.ke,s);return this.ke=vi(),this.qe=mo(),this.Qe=new fn(at),u}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Ln,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new zn(at),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||$e("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ln),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function mo(){return new fn(It.comparator)}function Os(){return new fn(It.comparator)}const ga={asc:"ASCENDING",desc:"DESCENDING"},kc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ah={and:"AND",or:"OR"};class uh{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Vu(a,e){return a.useProto3Json||Ie(e)?e:{value:e}}function Ar(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ds(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function ma(a,e){return Ar(a,e.toTimestamp())}function rr(a){return gt(!!a),ct.fromTimestamp(function(r){const s=mn(r);return new Sn(s.seconds,s.nanos)}(a))}function as(a,e){return Wa(a,e).canonicalString()}function Wa(a,e){const r=(u=a,new Xt(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function Lc(a){const e=Xt.fromString(a);return gt(qs(e)),e}function _a(a,e){return as(a.databaseId,e.path)}function Ks(a,e){const r=Lc(e);if(r.get(1)!==a.databaseId.projectId)throw new qe(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new qe(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new It(E(r))}function Ga(a,e){return as(a.databaseId,e)}function Uu(a){const e=Lc(a);return 4===e.length?Xt.emptyPath():E(e)}function Fc(a){return new Xt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function E(a){return gt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function D(a,e,r){return{name:_a(a,e),fields:r.value.mapValue.fields}}function I(a,e,r){const s=Ks(a,e.name),u=rr(e.updateTime),d=e.createTime?rr(e.createTime):ct.min(),g=new ln({mapValue:{fields:e.fields}}),w=Nn.newFoundDocument(s,u,d,g);return r&&w.setHasCommittedMutations(),r?w.setHasCommittedMutations():w}function z(a,e){let r;if(e instanceof nr)r={update:D(a,e.key,e.value)};else if(e instanceof Wi)r={delete:_a(a,e.key)};else if(e instanceof po)r={update:D(a,e.key,e.data),updateMask:Gl(e.fieldMask)};else{if(!(e instanceof fa))return ht();r={verify:_a(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof tn)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Yn)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof tr)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof zr)return{fieldPath:g.field.canonicalString(),increment:w.Pe};throw ht()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:ma(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:ht()),r;var d}function J(a,e){const r=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?_r.updateTime(rr(d.updateTime)):void 0!==d.exists?_r.exists(d.exists):_r.none():_r.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(g,w){let S=null;"setToServerValue"in w?(gt("REQUEST_TIME"===w.setToServerValue),S=new tn):"appendMissingElements"in w?S=new Yn(w.appendMissingElements.values||[]):"removeAllFromArray"in w?S=new tr(w.removeAllFromArray.values||[]):"increment"in w?S=new zr(g,w.increment):ht();const O=On.fromServerFormat(w.fieldPath);return new zi(O,S)}(a,u)):[];var d;if(e.update){const u=Ks(a,e.update.name),d=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new lr((e.updateMask.fieldPaths||[]).map(H=>On.fromServerFormat(H)));return new po(u,d,g,r,s)}return new nr(u,d,r,s)}if(e.delete){const u=Ks(a,e.delete);return new Wi(u,r)}if(e.verify){const u=Ks(a,e.verify);return new fa(u,r)}return ht()}function Me(a,e){return{documents:[Ga(a,e.path)]}}function Ct(a,e){const r={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Ga(a,u);const d=function(O){if(0!==O.length)return ch(en.create(O,"and"))}(e.filters);d&&(r.structuredQuery.where=d);const g=function(O){if(0!==O.length)return O.map(H=>{return{field:Pi((le=H).field),direction:ya(le.dir)};var le})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const w=Vu(a,e.limit);return null!==w&&(r.structuredQuery.limit=w),e.startAt&&(r.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(r.structuredQuery.endAt=function(O){return{before:!O.inclusive,values:O.position}}(e.endAt)),{_t:r,parent:u};var O}function vn(a){let e=Uu(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){gt(1===s);const H=r.from[0];H.allDescendants?u=H.collectionId:e=e.child(H.collectionId)}let d=[];r.where&&(d=function(q){const le=Kn(q);return le instanceof en&&Va(le)?le.getFilters():[le]}(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(le=>{return new Es(Uo((it=le).field),function(pt){switch(pt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(it.direction));var it}));let w=null;r.limit&&(w=function(q){let le;return le="object"==typeof q?q.value:q,Ie(le)?null:le}(r.limit));let S=null;var q;r.startAt&&(S=new Is((q=r.startAt).values||[],!!q.before));let O=null;return r.endAt&&(O=function(q){return new Is(q.values||[],!q.before)}(r.endAt)),Lo(e,u,g,d,w,"F",S,O)}function Kn(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Uo(r.unaryFilter.field);return wn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=Uo(r.unaryFilter.field);return wn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Uo(r.unaryFilter.field);return wn.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Uo(r.unaryFilter.field);return wn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(a):void 0!==a.fieldFilter?wn.create(Uo((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return en.create(r.compositeFilter.filters.map(s=>Kn(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return ht()}}(r.compositeFilter.op))}(a):ht();var r}function ya(a){return ga[a]}function Ka(a){return kc[a]}function Vc(a){return ah[a]}function Pi(a){return{fieldPath:a.canonicalString()}}function Uo(a){return On.fromServerFormat(a.fieldPath)}function ch(a){return a instanceof wn?function(r){if("=="===r.op){if(Fa(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NAN"}};if(yn(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Fa(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NOT_NAN"}};if(yn(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pi(r.field),op:Ka(r.op),value:r.value}}}(a):a instanceof en?function(r){const s=r.getFilters().map(u=>ch(u));return 1===s.length?s[0]:{compositeFilter:{op:Vc(r.op),filters:s}}}(a):ht()}function Gl(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function qs(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class Bo{constructor(e,r,s,u,d=ct.min(),g=ct.min(),w=_t.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=S}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qa{constructor(e){this.ct=e}}function Qa(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Bu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:_a(d=a.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Ar(d,g.version.toTimestamp()),createTime:Ar(d,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:_o(e.version)};else{if(!e.isUnknownDocument())return ht();s.unknownDocument={path:r.path.toArray(),version:_o(e.version)}}var d,g;return s}function Bu(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function _o(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qs(a){const e=new Sn(a.seconds,a.nanoseconds);return ct.fromTimestamp(e)}function jo(a,e){const r=(e.baseMutations||[]).map(d=>J(a.ct,d));for(let d=0;d<e.mutations.length-1;++d)d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(e.mutations[d].updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d);const s=e.mutations.map(d=>J(a.ct,d)),u=Sn.fromMillis(e.localWriteTimeMs);return new Pc(e.batchId,u,r,s)}function yo(a){const e=Qs(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Qs(a.lastLimboFreeSnapshotVersion):ct.min();let s;return s=void 0!==a.query.documents?(gt(1===(d=a.query).documents.length),wr($i(Uu(d.documents[0])))):function(d){return wr(vn(d))}(a.query),new Bo(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,_t.fromBase64String(a.resumeToken));var d}function va(a,e){const r=_o(e.snapshotVersion),s=_o(e.lastLimboFreeSnapshotVersion);let u;u=ko(e.target)?Me(a.ct,e.target):Ct(a.ct,e.target)._t;const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hr(e.target),readTime:r,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Ya(a){const e=vn({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?lo(e,e.limit,"L"):e}function Ia(a,e){return new Lu(e.largestBatchId,J(a.ct,e.overlayMutation))}function ju(a,e){const r=e.path.lastSegment();return[a,Nt(e.path.popLast()),r]}function cg(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:_o(s.readTime),documentKey:Nt(s.documentKey.path),largestBatchId:s.largestBatchId}}class lg{getBundleMetadata(e,r){return Df(e).get(r).next(s=>{if(s)return{id:(d=s).bundleId,createTime:Qs(d.createTime),version:d.version};var d})}saveBundleMetadata(e,r){return Df(e).put({bundleId:(u=r).id,createTime:_o(rr(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return lh(e).get(r).next(s=>{if(s)return{name:(d=s).name,query:Ya(d.bundledQuery),readTime:Qs(d.readTime)};var d})}saveNamedQuery(e,r){return lh(e).put({name:(u=r).name,readTime:_o(rr(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Df(a){return Cr(a,"bundles")}function lh(a){return Cr(a,"namedQueries")}class ql{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new ql(e,r.uid||"")}getOverlay(e,r){return Xa(e).get(ju(this.userId,r)).next(s=>s?Ia(this.serializer,s):null)}getOverlays(e,r){const s=Hi();return oe.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){const u=[];return s.forEach((d,g)=>{const w=new Lu(r,g);u.push(this.ht(e,w))}),oe.waitFor(u)}removeOverlaysForBatchId(e,r,s){const u=new Set;r.forEach(g=>u.add(Nt(g.getCollectionPath())));const d=[];return u.forEach(g=>{const w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(Xa(e).j("collectionPathOverlayIndex",w))}),oe.waitFor(d)}getOverlaysForCollection(e,r,s){const u=Hi(),d=Nt(r),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Xa(e).U("collectionPathOverlayIndex",g).next(w=>{for(const S of w){const O=Ia(this.serializer,S);u.set(O.getKey(),O)}return u})}getOverlaysForCollectionGroup(e,r,s,u){const d=Hi();let g;const w=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Xa(e).J({index:"collectionGroupOverlayIndex",range:w},(S,O,H)=>{const q=Ia(this.serializer,O);d.size()<u||q.largestBatchId===g?(d.set(q.getKey(),q),g=q.largestBatchId):H.done()}).next(()=>d)}ht(e,r){return Xa(e).put(function(u,d,g){const[w,S,O]=ju(d,g.mutation.key);return{userId:d,collectionPath:S,documentId:O,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:z(u.ct,g.mutation)}}(this.serializer,this.userId,r))}}function Xa(a){return Cr(a,"documentOverlays")}class Uc{Pt(e){return Cr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?_t.fromUint8Array(s):_t.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class $o{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(_n(e.integerValue));else if("doubleValue"in e){const s=_n(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),Xe(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=mn(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Ci(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?$s(e)?this.dt(r,Number.MAX_SAFE_INTEGER):js(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):ht()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const u of Object.keys(s))this.Vt(u,r),this.Tt(s[u],r)}wt(e,r){var s,u;const d=e.fields||{};this.dt(r,53);const g="value",w=(null===(u=null===(s=d[g].arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(_n(w)),this.Vt(g,r),this.Tt(d[g],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const u of s)this.Tt(u,r)}yt(e,r){this.dt(r,37),It.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function Bc(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function $u(a){const e=64-function(s){let u=0;for(let d=0;d<8;++d){const g=Bc(255&s[d]);if(u+=g,8!==g)break}return u}(a);return Math.ceil(e/8)}$o.vt=new $o;class Ql{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(e){const r=this.qt(e),s=$u(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(e){const r=this.qt(e),s=$u(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let u=1;u<r.length;++u)r[u]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Cf{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Yl{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Hu{constructor(){this.jt=new Ql,this.Ht=new Cf(this.jt),this.Jt=new Yl(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Ys{constructor(e,r,s,u){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=u}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ys(this.indexId,this.documentKey,this.arrayValue,s)}}function Ii(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=bf(a.arrayValue,e.arrayValue),0!==r?r:(r=bf(a.directionalValue,e.directionalValue),0!==r?r:It.comparator(a.documentKey,e.documentKey)))}function bf(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class Ja{constructor(e){this.Xt=new zn((r,s)=>On.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(gt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Xi(e);if(void 0!==r&&!this.sn(r))return!1;const s=Ir(e);let u=new Set,d=0,g=0;for(;d<s.length&&this.sn(s[d]);++d)u=u.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(this.Xt.size>0){const w=this.Xt.getIterator().getNext();if(!u.has(w.field.canonicalString())){const S=s[d];if(!this.on(w,S)||!this._n(this.en[g++],S))return!1}++d}for(;d<s.length;++d)if(g>=this.en.length||!this._n(this.en[g++],s[d]))return!1;return!0}an(){if(this.nn)return null;let e=new zn(On.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new Kr(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new Kr(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new Kr(s.field,"asc"===s.dir?0:1)));return new Ur(Ur.UNKNOWN_ID,this.collectionId,r,ze.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function zu(a){var e,r;if(gt(a instanceof wn||a instanceof en),a instanceof wn){if(a instanceof Oo){const u=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(d=>wn.create(a.field,"==",d)))||[];return en.create(u,"or")}return a}const s=a.filters.map(u=>zu(u));return en.create(s,a.op)}function Xl(a){if(0===a.getFilters().length)return[];const e=jc(zu(a));return gt(dh(e)),Wu(e)||Za(e)?[e]:e.getFilters()}function Wu(a){return a instanceof wn}function Za(a){return a instanceof en&&Va(a)}function dh(a){return Wu(a)||Za(a)||function(r){if(r instanceof en&&Dc(r)){for(const s of r.getFilters())if(!Wu(s)&&!Za(s))return!1;return!0}return!1}(a)}function jc(a){if(gt(a instanceof wn||a instanceof en),a instanceof wn)return a;if(1===a.filters.length)return jc(a.filters[0]);const e=a.filters.map(s=>jc(s));let r=en.create(e,a.op);return r=eu(r),dh(r)?r:(gt(r instanceof en),gt(ns(r)),gt(r.filters.length>1),r.filters.reduce((s,u)=>Jl(s,u)))}function Jl(a,e){let r;return gt(a instanceof wn||a instanceof en),gt(e instanceof wn||e instanceof en),r=a instanceof wn?e instanceof wn?en.create([a,e],"and"):hh(a,e):e instanceof wn?hh(e,a):function(u,d){if(gt(u.filters.length>0&&d.filters.length>0),ns(u)&&ns(d))return jl(u,d.getFilters());const g=Dc(u)?u:d,w=Dc(u)?d:u,S=g.filters.map(O=>Jl(O,w));return en.create(S,"or")}(a,e),eu(r)}function hh(a,e){if(ns(e))return jl(e,a.getFilters());{const r=e.filters.map(s=>Jl(a,s));return en.create(r,"or")}}function eu(a){if(gt(a instanceof wn||a instanceof en),a instanceof wn)return a;const e=a.getFilters();if(1===e.length)return eu(e[0]);if(qn(a))return a;const r=e.map(u=>eu(u)),s=[];return r.forEach(u=>{u instanceof wn?s.push(u):u instanceof en&&(u.op===a.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:en.create(s,a.op)}class dg{constructor(){this.un=new Gu}addToCollectionParentIndex(e,r){return this.un.add(r),oe.resolve()}getCollectionParents(e,r){return oe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return oe.resolve()}deleteFieldIndex(e,r){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,r){return oe.resolve()}getDocumentsMatchingTarget(e,r){return oe.resolve(null)}getIndexType(e,r){return oe.resolve(0)}getFieldIndexes(e,r){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,r){return oe.resolve(B.min())}getMinOffsetFromCollectionGroup(e,r){return oe.resolve(B.min())}updateCollectionGroup(e,r,s){return oe.resolve()}updateIndexEntries(e,r){return oe.resolve()}}class Gu{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r]||new zn(Xt.comparator),d=!u.has(s);return this.index[r]=u.add(s),d}has(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(e){return(this.index[e]||new zn(Xt.comparator)).toArray()}}const ks=new Uint8Array(0);class hg{constructor(e,r){this.databaseId=r,this.cn=new Gu,this.ln=new ui(s=>Hr(s),(s,u)=>rs(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:s,parent:Nt(u)};return fh(e).put(d)}return oe.resolve()}getCollectionParents(e,r){const s=[],u=IDBKeyRange.bound([r,""],[un(r),""],!1,!0);return fh(e).U(u).next(d=>{for(const g of d){if(g.collectionId!==r)break;s.push(Tn(g.parent))}return s})}addFieldIndex(e,r){const s=zo(e),u={indexId:(w=r).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var w;delete u.indexId;const d=s.add(u);if(r.indexState){const g=Ea(e);return d.next(w=>{g.put(cg(w,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(e,r){const s=zo(e),u=Ea(e),d=Ho(e);return s.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=zo(e),s=Ho(e),u=Ea(e);return r.j().next(()=>s.j()).next(()=>u.j())}createTargetIndexes(e,r){return oe.forEach(this.hn(r),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const d=new Ja(s).an();if(null!=d)return this.addFieldIndex(e,d)}}))}getDocumentsMatchingTarget(e,r){const s=Ho(e);let u=!0;const d=new Map;return oe.forEach(this.hn(r),g=>this.Pn(e,g).next(w=>{u&&(u=!!w),d.set(g,w)})).next(()=>{if(u){let g=V();const w=[];return oe.forEach(d,(S,O)=>{var Bt;$e("IndexedDbIndexManager",`Using index ${Bt=S,`id=${Bt.indexId}|cg=${Bt.collectionGroup}|f=${Bt.fields.map(rn=>`${rn.fieldPath}:${rn.kind}`).join(",")}`} to execute ${Hr(r)}`);const H=function(Bt,rn){const Vn=Xi(rn);if(void 0===Vn)return null;for(const Pn of Tr(Bt,Vn.fieldPath))switch(Pn.op){case"array-contains-any":return Pn.value.arrayValue.values||[];case"array-contains":return[Pn.value]}return null}(O,S),q=function(Bt,rn){const Vn=new Map;for(const Pn of Ir(rn))for(const ye of Tr(Bt,Pn.fieldPath))switch(ye.op){case"==":case"in":Vn.set(Pn.fieldPath.canonicalString(),ye.value);break;case"not-in":case"!=":return Vn.set(Pn.fieldPath.canonicalString(),ye.value),Array.from(Vn.values())}return null}(O,S),le=function(Bt,rn){const Vn=[];let Pn=!0;for(const ye of Ir(rn)){const se=0===ye.kind?uo(Bt,ye.fieldPath,Bt.startAt):qr(Bt,ye.fieldPath,Bt.startAt);Vn.push(se.value),Pn&&(Pn=se.inclusive)}return new Is(Vn,Pn)}(O,S),xe=function(Bt,rn){const Vn=[];let Pn=!0;for(const ye of Ir(rn)){const se=0===ye.kind?qr(Bt,ye.fieldPath,Bt.endAt):uo(Bt,ye.fieldPath,Bt.endAt);Vn.push(se.value),Pn&&(Pn=se.inclusive)}return new Is(Vn,Pn)}(O,S),it=this.In(S,O,le),Et=this.In(S,O,xe),pt=this.Tn(S,O,q),Ut=this.En(S.indexId,H,it,le.inclusive,Et,xe.inclusive,pt);return oe.forEach(Ut,Gt=>s.G(Gt,r.limit).next(Bt=>{Bt.forEach(rn=>{const Vn=It.fromSegments(rn.documentKey);g.has(Vn)||(g=g.add(Vn),w.push(Vn))})}))}).next(()=>w)}return oe.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:Xl(en.create(e.filters,"and")).map(s=>Bi(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,u,d,g,w){const S=(null!=r?r.length:1)*Math.max(s.length,d.length),O=S/(null!=r?r.length:1),H=[];for(let q=0;q<S;++q){const le=r?this.dn(r[q/O]):ks,xe=this.An(e,le,s[q%O],u),it=this.Rn(e,le,d[q%O],g),Et=w.map(pt=>this.An(e,le,pt,!0));H.push(...this.createRange(xe,it,Et))}return H}An(e,r,s,u){const d=new Ys(e,It.empty(),r,s);return u?d:d.Zt()}Rn(e,r,s,u){const d=new Ys(e,It.empty(),r,s);return u?d.Zt():d}Pn(e,r){const s=new Ja(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const w of d)s.rn(w)&&(!g||w.fields.length>g.fields.length)&&(g=w);return g})}getIndexType(e,r){let s=2;const u=this.hn(r);return oe.forEach(u,d=>this.Pn(e,d).next(g=>{g?0!==s&&g.fields.length<function(S){let O=new zn(On.comparator),H=!1;for(const q of S.filters)for(const le of q.getFlattenedFilters())le.field.isKeyField()||("array-contains"===le.op||"array-contains-any"===le.op?H=!0:O=O.add(le.field));for(const q of S.orderBy)q.field.isKeyField()||(O=O.add(q.field));return O.size+(H?1:0)}(d)&&(s=1):s=0})).next(()=>null!==r.limit&&u.length>1&&2===s?1:s)}Vn(e,r){const s=new Hu;for(const u of Ir(e)){const d=r.data.field(u.fieldPath);if(null==d)return null;const g=s.Yt(u.kind);$o.vt.It(d,g)}return s.zt()}dn(e){const r=new Hu;return $o.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new Hu;return $o.vt.It(ti(this.databaseId,r),s.Yt(function(d){const g=Ir(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let u=[];u.push(new Hu);let d=0;for(const g of Ir(e)){const w=s[d++];for(const S of u)if(this.fn(r,g.fieldPath)&&vs(w))u=this.gn(u,g,w);else{const O=S.Yt(g.kind);$o.vt.It(w,O)}}return this.pn(u)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const u=[...e],d=[];for(const g of s.arrayValue.values||[])for(const w of u){const S=new Hu;S.seed(w.zt()),$o.vt.It(g,S.Yt(r.kind)),d.push(S)}return d}fn(e,r){return!!e.filters.find(s=>s instanceof wn&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=zo(e),u=Ea(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(d=>{const g=[];return oe.forEach(d,w=>u.get([w.indexId,this.uid]).next(S=>{g.push(function(H,q){const le=q?new ze(q.sequenceNumber,new B(Qs(q.readTime),new It(Tn(q.documentKey)),q.largestBatchId)):ze.empty(),xe=H.fields.map(([it,Et])=>new Kr(On.fromServerFormat(it),Et));return new Ur(H.indexId,H.collectionGroup,xe,le)}(w,S))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,u)=>{const d=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:at(s.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const u=zo(e),d=Ea(e);return this.yn(e).next(g=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(w=>oe.forEach(w,S=>d.put(cg(S.indexId,this.uid,g,s)))))}updateIndexEntries(e,r){const s=new Map;return oe.forEach(r,(u,d)=>{const g=s.get(u.collectionGroup);return(g?oe.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(w=>(s.set(u.collectionGroup,w),oe.forEach(w,S=>this.wn(e,u,S).next(O=>{const H=this.Sn(d,S);return O.isEqual(H)?oe.resolve():this.bn(e,d,S,O,H)}))))})}Dn(e,r,s,u){return Ho(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,u){return Ho(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const u=Ho(e);let d=new zn(Ii);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(g,w)=>{d=d.add(new Ys(s.indexId,r,w.arrayValue,w.directionalValue))}).next(()=>d)}Sn(e,r){let s=new zn(Ii);const u=this.Vn(r,e);if(null==u)return s;const d=Xi(r);if(null!=d){const g=e.data.field(d.fieldPath);if(vs(g))for(const w of g.arrayValue.values||[])s=s.add(new Ys(r.indexId,e.key,this.dn(w),u))}else s=s.add(new Ys(r.indexId,e.key,ks,u));return s}bn(e,r,s,u,d){$e("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const g=[];return function(S,O,H,q,le){const xe=S.getIterator(),it=O.getIterator();let Et=Oi(xe),pt=Oi(it);for(;Et||pt;){let Ut=!1,Gt=!1;if(Et&&pt){const Bt=H(Et,pt);Bt<0?Gt=!0:Bt>0&&(Ut=!0)}else null!=Et?Gt=!0:Ut=!0;Ut?(q(pt),pt=Oi(it)):Gt?(le(Et),Et=Oi(xe)):(Et=Oi(xe),pt=Oi(it))}}(u,d,Ii,w=>{g.push(this.Dn(e,r,s,w))},w=>{g.push(this.vn(e,r,s,w))}),oe.waitFor(g)}yn(e){let r=1;return Ea(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((g,w)=>Ii(g,w)).filter((g,w,S)=>!w||0!==Ii(g,S[w-1]));const u=[];u.push(e);for(const g of s){const w=Ii(g,e),S=Ii(g,r);if(0===w)u[0]=e.Zt();else if(w>0&&S<0)u.push(g),u.push(g.Zt());else if(S>0)break}u.push(r);const d=[];for(let g=0;g<u.length;g+=2){if(this.Cn(u[g],u[g+1]))return[];d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,ks,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,ks,[]]))}return d}Cn(e,r){return Ii(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(ni)}getMinOffset(e,r){return oe.mapArray(this.hn(r),s=>this.Pn(e,s).next(u=>u||ht())).next(ni)}}function fh(a){return Cr(a,"collectionParents")}function Ho(a){return Cr(a,"indexEntries")}function zo(a){return Cr(a,"indexConfiguration")}function Ea(a){return Cr(a,"indexState")}function ni(a){gt(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const u=a[s].indexState.offset;ne(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new B(e.readTime,e.documentKey,r)}const Zl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class li{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new li(e,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ku(a,e,r){const s=a.store("mutations"),u=a.store("documentMutations"),d=[],g=IDBKeyRange.only(r.batchId);let w=0;const S=s.J({range:g},(H,q,le)=>(w++,le.delete()));d.push(S.next(()=>{gt(1===w)}));const O=[];for(const H of r.mutations){const q=Cn(e,H.key.path,r.batchId);d.push(u.delete(q)),O.push(H.key)}return oe.waitFor(d).next(()=>O)}function ed(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw ht();e=a.noDocument}return JSON.stringify(e).length}li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(41943040,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);class qu{constructor(e,r,s,u){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=u,this.Fn={}}static lt(e,r,s,u){gt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new qu(d,r,s,u)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return us(e).J({index:"userMutationsIndex",range:s},(u,d,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(e,r,s,u){const d=Xs(e),g=us(e);return g.add({}).next(w=>{gt("number"==typeof w);const S=new Pc(w,r,s,u),O=function(xe,it,Et){const pt=Et.baseMutations.map(Gt=>z(xe.ct,Gt)),Ut=Et.mutations.map(Gt=>z(xe.ct,Gt));return{userId:it,batchId:Et.batchId,localWriteTimeMs:Et.localWriteTime.toMillis(),baseMutations:pt,mutations:Ut}}(this.serializer,this.userId,S),H=[];let q=new zn((le,xe)=>at(le.canonicalString(),xe.canonicalString()));for(const le of u){const xe=Cn(this.userId,le.key.path,w);q=q.add(le.key.path.popLast()),H.push(g.put(O)),H.push(d.put(xe,Us))}return q.forEach(le=>{H.push(this.indexManager.addToCollectionParentIndex(e,le))}),e.addOnCommittedListener(()=>{this.Fn[w]=S.keys()}),oe.waitFor(H).next(()=>S)})}lookupMutationBatch(e,r){return us(e).get(r).next(s=>s?(gt(s.userId===this.userId),jo(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?oe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const u=s.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return us(e).J({index:"userMutationsIndex",range:u},(g,w,S)=>{w.userId===this.userId&&(gt(w.batchId>=s),d=jo(this.serializer,w)),S.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return us(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return us(e).U("userMutationsIndex",r).next(s=>s.map(u=>jo(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=Br(this.userId,r.path),u=IDBKeyRange.lowerBound(s),d=[];return Xs(e).J({range:u},(g,w,S)=>{const[O,H,q]=g,le=Tn(H);if(O===this.userId&&r.path.isEqual(le))return us(e).get(q).next(xe=>{if(!xe)throw ht();gt(xe.userId===this.userId),d.push(jo(this.serializer,xe))});S.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new zn(at);const u=[];return r.forEach(d=>{const g=Br(this.userId,d.path),w=IDBKeyRange.lowerBound(g),S=Xs(e).J({range:w},(O,H,q)=>{const[le,xe,it]=O,Et=Tn(xe);le===this.userId&&d.path.isEqual(Et)?s=s.add(it):q.done()});u.push(S)}),oe.waitFor(u).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1,d=Br(this.userId,s),g=IDBKeyRange.lowerBound(d);let w=new zn(at);return Xs(e).J({range:g},(S,O,H)=>{const[q,le,xe]=S,it=Tn(le);q===this.userId&&s.isPrefixOf(it)?it.length===u&&(w=w.add(xe)):H.done()}).next(()=>this.xn(e,w))}xn(e,r){const s=[],u=[];return r.forEach(d=>{u.push(us(e).get(d).next(g=>{if(null===g)throw ht();gt(g.userId===this.userId),s.push(jo(this.serializer,g))}))}),oe.waitFor(u).next(()=>s)}removeMutationBatch(e,r){return Ku(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),oe.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return oe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return Xs(e).J({range:s},(d,g,w)=>{if(d[0]===this.userId){const S=Tn(d[1]);u.push(S)}else w.done()}).next(()=>{gt(0===u.length)})})}containsKey(e,r){return $c(e,this.userId,r)}Nn(e){return Ta(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $c(a,e,r){const s=Br(e,r.path),u=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return Xs(a).J({range:d,H:!0},(w,S,O)=>{const[H,q,le]=w;H===e&&q===u&&(g=!0),O.done()}).next(()=>g)}function us(a){return Cr(a,"mutations")}function Xs(a){return Cr(a,"documentMutations")}function Ta(a){return Cr(a,"mutationQueues")}class vo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vo(0)}static kn(){return new vo(-1)}}class ph{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new vo(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>ct.fromTimestamp(new Sn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(e,u)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Js(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(gt(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let u=0;const d=[];return Js(e).J((g,w)=>{const S=yo(w);S.sequenceNumber<=r&&null===s.get(S.targetId)&&(u++,d.push(this.removeTargetData(e,S)))}).next(()=>oe.waitFor(d)).next(()=>u)}forEachTarget(e,r){return Js(e).J((s,u)=>{const d=yo(u);r(d)})}qn(e){return fg(e).get("targetGlobalKey").next(r=>(gt(null!==r),r))}Qn(e,r){return fg(e).put("targetGlobalKey",r)}Kn(e,r){return Js(e).put(va(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=Hr(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Js(e).J({range:u,index:"queryTargetsIndex"},(g,w,S)=>{const O=yo(w);rs(r,O.target)&&(d=O,S.done())}).next(()=>d)}addMatchingKeys(e,r,s){const u=[],d=Io(e);return r.forEach(g=>{const w=Nt(g.path);u.push(d.put({targetId:s,path:w})),u.push(this.referenceDelegate.addReference(e,s,g))}),oe.waitFor(u)}removeMatchingKeys(e,r,s){const u=Io(e);return oe.forEach(r,d=>{const g=Nt(d.path);return oe.waitFor([u.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,r){const s=Io(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=Io(e);let d=V();return u.J({range:s,H:!0},(g,w,S)=>{const O=Tn(g[1]),H=new It(O);d=d.add(H)}).next(()=>d)}containsKey(e,r){const s=Nt(r.path),u=IDBKeyRange.bound([s],[un(s)],!1,!0);let d=0;return Io(e).J({index:"documentTargetsIndex",H:!0,range:u},([g,w],S,O)=>{0!==g&&(d++,O.done())}).next(()=>d>0)}ot(e,r){return Js(e).get(r).next(s=>s?yo(s):null)}}function Js(a){return Cr(a,"targets")}function fg(a){return Cr(a,"targetGlobal")}function Io(a){return Cr(a,"targetDocuments")}function pg([a,e],[r,s]){const u=at(a,r);return 0===u?at(e,s):u}class T_{constructor(e){this.Un=e,this.buffer=new zn(pg),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();pg(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Sf{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){gi(s)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield lt(s)}yield r.Hn(3e5)}))}}class w_{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return oe.resolve(Ne.oe);const s=new T_(r);return this.Jn.forEachTarget(e,u=>s.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(e,u=>s.zn(u))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Zl)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zl):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,u,d,g,w,S,O;const H=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(q=>(q>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${q}`),u=this.params.maximumSequenceNumbersToCollect):u=q,g=Date.now(),this.nthSequenceNumber(e,u))).next(q=>(s=q,w=Date.now(),this.removeTargets(e,s,r))).next(q=>(d=q,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(q=>(O=Date.now(),$n()<=ue.$b.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-H}ms\n\tDetermined least recently used ${u} in `+(w-g)+`ms\n\tRemoved ${d} targets in `+(S-w)+`ms\n\tRemoved ${q} documents in `+(O-S)+`ms\nTotal Duration: ${O-H}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:q})))}}class A_{constructor(e,r){this.db=e,this.garbageCollector=function td(a,e){return new w_(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(u=>s+u))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,u)=>r(u))}addReference(e,r,s){return Wo(e,s)}removeReference(e,r,s){return Wo(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return Wo(e,r)}nr(e,r){return function(u,d){let g=!1;return Ta(u).Y(w=>$c(u,w,d).next(S=>(S&&(g=!0),oe.resolve(!S)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(e,(g,w)=>{if(w<=r){const S=this.nr(e,g).next(O=>{if(!O)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,ct.min()),Io(e).delete([0,Nt(g.path)])))});u.push(S)}}).next(()=>oe.waitFor(u)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return Wo(e,r)}tr(e,r){const s=Io(e);let u,d=Ne.oe;return s.J({index:"documentTargetsIndex"},([g,w],{path:S,sequenceNumber:O})=>{0===g?(d!==Ne.oe&&r(new It(Tn(u)),d),d=O,u=S):d=Ne.oe}).next(()=>{d!==Ne.oe&&r(new It(Tn(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wo(a,e){return Io(a).put((u=a.currentSequenceNumber,{targetId:0,path:Nt(e.path),sequenceNumber:u}));var u}class Rf{constructor(){this.changes=new ui(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?oe.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return tu(e).put(s)}removeEntry(e,r,s){return tu(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Bu(g),w[w.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=Nn.newInvalidDocument(r);return tu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(di(r))},(u,d)=>{s=this.ir(r,d)}).next(()=>s)}sr(e,r){let s={size:0,document:Nn.newInvalidDocument(r)};return tu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(di(r))},(u,d)=>{s={document:this.ir(r,d),size:ed(d)}}).next(()=>s)}getEntries(e,r){let s=vi();return this._r(e,r,(u,d)=>{const g=this.ir(u,d);s=s.insert(u,g)}).next(()=>s)}ar(e,r){let s=vi(),u=new fn(It.comparator);return this._r(e,r,(d,g)=>{const w=this.ir(d,g);s=s.insert(d,w),u=u.insert(d,ed(g))}).next(()=>({documents:s,ur:u}))}_r(e,r,s){if(r.isEmpty())return oe.resolve();let u=new zn(gh);r.forEach(S=>u=u.add(S));const d=IDBKeyRange.bound(di(u.first()),di(u.last())),g=u.getIterator();let w=g.getNext();return tu(e).J({index:"documentKeyIndex",range:d},(S,O,H)=>{const q=It.fromSegments([...O.prefixPath,O.collectionGroup,O.documentId]);for(;w&&gh(w,q)<0;)s(w,null),w=g.getNext();w&&w.isEqual(q)&&(s(w,O),w=g.hasNext()?g.getNext():null),w?H.$(di(w)):H.done()}).next(()=>{for(;w;)s(w,null),w=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,r,s,u,d){const g=r.path,w=[g.popLast().toArray(),g.lastSegment(),Bu(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tu(e).U(IDBKeyRange.bound(w,S,!0)).next(O=>{d?.incrementDocumentReadCount(O.length);let H=vi();for(const q of O){const le=this.ir(It.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);le.isFoundDocument()&&(zs(r,le)||u.has(le.key))&&(H=H.insert(le.key,le))}return H})}getAllFromCollectionGroup(e,r,s,u){let d=vi();const g=nu(r,s),w=nu(r,B.max());return tu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,w,!0)},(S,O,H)=>{const q=this.ir(It.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);d=d.insert(q.key,q),d.size===u&&H.done()}).next(()=>d)}newChangeBuffer(e){return new mg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Qu(e).get("remoteDocumentGlobalKey").next(r=>(gt(!!r),r))}rr(e,r){return Qu(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function Kl(a,e){let r;if(e.document)r=I(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=It.fromSegments(e.noDocument.path),u=Qs(e.noDocument.readTime);r=Nn.newNoDocument(s,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const s=It.fromSegments(e.unknownDocument.path),u=Qs(e.unknownDocument.version);r=Nn.newUnknownDocument(s,u)}}return e.readTime&&r.setReadTime(function(u){const d=new Sn(u[0],u[1]);return ct.fromTimestamp(d)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(ct.min()))return s}return Nn.newInvalidDocument(e)}}function Xr(a){return new gg(a)}class mg extends Rf{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new ui(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const r=[];let s=0,u=new zn((d,g)=>at(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const w=this.lr.get(d);if(r.push(this.cr.removeEntry(e,d,w.readTime)),g.isValidDocument()){const S=Qa(this.cr.serializer,g);u=u.add(d.path.popLast());const O=ed(S);s+=O-w.size,r.push(this.cr.addEntry(e,d,S))}else if(s-=w.size,this.trackRemovals){const S=Qa(this.cr.serializer,g.convertToNoDocument(ct.min()));r.push(this.cr.addEntry(e,d,S))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,d))}),r.push(this.cr.updateMetadata(e,s)),oe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:u})=>(u.forEach((d,g)=>{this.lr.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function Qu(a){return Cr(a,"remoteDocumentGlobal")}function tu(a){return Cr(a,"remoteDocumentsV14")}function di(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nu(a,e){const r=e.documentKey.path.toArray();return[a,Bu(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function gh(a,e){const r=a.path.toArray(),s=e.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<s.length-2;++d)if(u=at(r[d],s[d]),u)return u;return u=at(r.length,s.length),u||(u=at(r[r.length-2],s[s.length-2]),u||at(r[r.length-1],s[s.length-1]))}class nd{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Yu{constructor(e,r,s,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==s&&Ha(s.mutation,u,lr.empty(),Sn.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,V()).next(()=>s))}getLocalViewOfDocuments(e,r,s=V()){const u=Hi();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,s).next(d=>{let g=xs();return d.forEach((w,S)=>{g=g.insert(w,S.overlayedDocument)}),g}))}getOverlayedDocuments(e,r){const s=Hi();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,V()))}populateOverlays(e,r,s){const u=[];return s.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,w)=>{r.set(g,w)})})}computeViews(e,r,s,u){let d=vi();const g=ho(),w=ho();return r.forEach((S,O)=>{const H=s.get(O.key);u.has(O.key)&&(void 0===H||H.mutation instanceof po)?d=d.insert(O.key,O):void 0!==H?(g.set(O.key,H.mutation.getFieldMask()),Ha(H.mutation,O,H.mutation.getFieldMask(),Sn.now())):g.set(O.key,lr.empty())}),this.recalculateAndSaveOverlays(e,d).next(S=>(S.forEach((O,H)=>g.set(O,H)),r.forEach((O,H)=>{var q;return w.set(O,new nd(H,null!==(q=g.get(O))&&void 0!==q?q:null))}),w))}recalculateAndSaveOverlays(e,r){const s=ho();let u=new fn((g,w)=>g-w),d=V();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(g=>{for(const w of g)w.keys().forEach(S=>{const O=r.get(S);if(null===O)return;let H=s.get(S)||lr.empty();H=w.applyToLocalView(O,H),s.set(S,H);const q=(u.get(w.batchId)||V()).add(S);u=u.insert(w.batchId,q)})}).next(()=>{const g=[],w=u.getReverseIterator();for(;w.hasNext();){const S=w.getNext(),O=S.key,H=S.value,q=da();H.forEach(le=>{if(!d.has(le)){const xe=fo(r.get(le),s.get(le));null!==xe&&q.set(le,xe),d=d.add(le)}}),g.push(this.documentOverlayCache.saveOverlays(e,O,q))}return oe.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,u){return It.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Hs(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,u):this.getDocumentsMatchingCollectionQuery(e,r,s,u);var g}getNextDocuments(e,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,u-d.size):oe.resolve(Hi());let w=-1,S=d;return g.next(O=>oe.forEach(O,(H,q)=>(w<q.largestBatchId&&(w=q.largestBatchId),d.get(H)?oe.resolve():this.remoteDocumentCache.getEntry(e,H).next(le=>{S=S.insert(H,le)}))).next(()=>this.populateOverlays(e,O,d)).next(()=>this.computeViews(e,S,O,V())).next(H=>({batchId:w,changes:Rc(H)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new It(r)).next(s=>{let u=xs();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,s,u){const d=r.collectionGroup;let g=xs();return this.indexManager.getCollectionParents(e,d).next(w=>oe.forEach(w,S=>{const O=(q=r,le=S.child(d),new ji(le,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,le;return this.getDocumentsMatchingCollectionQuery(e,O,s,u).next(H=>{H.forEach((q,le)=>{g=g.insert(q,le)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,s,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,d,u))).next(g=>{d.forEach((S,O)=>{const H=O.getKey();null===g.get(H)&&(g=g.insert(H,Nn.newInvalidDocument(H)))});let w=xs();return g.forEach((S,O)=>{const H=d.get(S);void 0!==H&&Ha(H.mutation,O,lr.empty(),Sn.now()),zs(r,O)&&(w=w.insert(S,O))}),w})}}class _g{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return oe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:rr(u.createTime)}),oe.resolve();var u}getNamedQuery(e,r){return oe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(u=r).name,query:Ya(u.bundledQuery),readTime:rr(u.readTime)}),oe.resolve();var u}}class yg{constructor(){this.overlays=new fn(It.comparator),this.Ir=new Map}getOverlay(e,r){return oe.resolve(this.overlays.get(r))}getOverlays(e,r){const s=Hi();return oe.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((u,d)=>{this.ht(e,r,d)}),oe.resolve()}removeOverlaysForBatchId(e,r,s){const u=this.Ir.get(s);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(s)),oe.resolve()}getOverlaysForCollection(e,r,s){const u=Hi(),d=r.length+1,g=new It(r.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const S=w.getNext().value,O=S.getKey();if(!r.isPrefixOf(O.path))break;O.path.length===d&&S.largestBatchId>s&&u.set(S.getKey(),S)}return oe.resolve(u)}getOverlaysForCollectionGroup(e,r,s,u){let d=new fn((O,H)=>O-H);const g=this.overlays.getIterator();for(;g.hasNext();){const O=g.getNext().value;if(O.getKey().getCollectionGroup()===r&&O.largestBatchId>s){let H=d.get(O.largestBatchId);null===H&&(H=Hi(),d=d.insert(O.largestBatchId,H)),H.set(O.getKey(),O)}}const w=Hi(),S=d.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((O,H)=>w.set(O,H)),!(w.size()>=u)););return oe.resolve(w)}ht(e,r,s){const u=this.overlays.get(s.key);if(null!==u){const g=this.Ir.get(u.largestBatchId).delete(s.key);this.Ir.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new Lu(r,s));let d=this.Ir.get(r);void 0===d&&(d=V(),this.Ir.set(r,d)),this.Ir.set(r,d.add(s.key))}}class vg{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,oe.resolve()}}class Pf{constructor(){this.Tr=new zn(or.Er),this.dr=new zn(or.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new or(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new or(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new It(new Xt([])),s=new or(r,e),u=new or(r,e+1),d=[];return this.dr.forEachInRange([s,u],g=>{this.Vr(g),d.push(g.key)}),d}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new It(new Xt([])),s=new or(r,e),u=new or(r,e+1);let d=V();return this.dr.forEachInRange([s,u],g=>{d=d.add(g.key)}),d}containsKey(e){const r=new or(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class or{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return It.comparator(e.key,r.key)||at(e.wr,r.wr)}static Ar(e,r){return at(e.wr,r.wr)||It.comparator(e.key,r.key)}}class mh{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new zn(or.Er)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,u){const d=this.Sr;this.Sr++;const g=new Pc(d,r,s,u);this.mutationQueue.push(g);for(const w of u)this.br=this.br.add(new or(w.key,d)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return oe.resolve(g)}lookupMutationBatch(e,r){return oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.vr(r+1),d=u<0?0:u;return oe.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new or(r,0),u=new or(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([s,u],g=>{const w=this.Dr(g.wr);d.push(w)}),oe.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new zn(at);return r.forEach(u=>{const d=new or(u,0),g=new or(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,g],w=>{s=s.add(w.wr)})}),oe.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1;let d=s;It.isDocumentKey(d)||(d=d.child(""));const g=new or(new It(d),0);let w=new zn(at);return this.br.forEachWhile(S=>{const O=S.key.path;return!!s.isPrefixOf(O)&&(O.length===u&&(w=w.add(S.wr)),!0)},g),oe.resolve(this.Cr(w))}Cr(e){const r=[];return e.forEach(s=>{const u=this.Dr(s);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){gt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return oe.forEach(r.mutations,u=>{const d=new or(u.key,r.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new or(r,0),u=this.br.firstAfterOrEqual(s);return oe.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return oe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Xu{constructor(e){this.Mr=e,this.docs=new fn(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,u=this.docs.get(s),d=u?u.size:0,g=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return oe.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(r))}getEntries(e,r){let s=vi();return r.forEach(u=>{const d=this.docs.get(u);s=s.insert(u,d?d.document.mutableCopy():Nn.newInvalidDocument(u))}),oe.resolve(s)}getDocumentsMatchingQuery(e,r,s,u){let d=vi();const g=r.path,w=new It(g.child("")),S=this.docs.getIteratorFrom(w);for(;S.hasNext();){const{key:O,value:{document:H}}=S.getNext();if(!g.isPrefixOf(O.path))break;O.path.length>g.length+1||ne(k(H),s)<=0||(u.has(H.key)||zs(r,H))&&(d=d.insert(H.key,H.mutableCopy()))}return oe.resolve(d)}getAllFromCollectionGroup(e,r,s,u){ht()}Or(e,r){return oe.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new Mf(this)}getSize(e){return oe.resolve(this.size)}}class Mf extends Rf{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(e,u)):this.cr.removeEntry(s)}),oe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class rd{constructor(e){this.persistence=e,this.Nr=new ui(r=>Hr(r),rs),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pf,this.targetCount=0,this.kr=vo.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,u)=>r(u)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new vo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,oe.resolve()}updateTargetData(e,r){return this.Kn(r),oe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,r,s){let u=0;const d=[];return this.Nr.forEach((g,w)=>{w.sequenceNumber<=r&&null===s.get(w.targetId)&&(this.Nr.delete(g),d.push(this.removeMatchingKeysForTargetId(e,w.targetId)),u++)}),oe.waitFor(d).next(()=>u)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return oe.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),oe.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),oe.waitFor(d)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),oe.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return oe.resolve(s)}containsKey(e,r){return oe.resolve(this.Br.containsKey(r))}}class _h{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ne(0),this.Kr=!1,this.Kr=!0,this.$r=new vg,this.referenceDelegate=e(this),this.Ur=new rd(this),this.indexManager=new dg,this.remoteDocumentCache=new Xu(s=>this.referenceDelegate.Wr(s)),this.serializer=new qa(r),this.Gr=new _g(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yg,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new mh(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){$e("MemoryPersistence","Starting transaction:",e);const u=new yh(this.Qr.next());return this.referenceDelegate.zr(),s(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(e,r){return oe.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class yh extends nt{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Jr=new Pf,this.Yr=null}static Zr(e){return new id(e)}get Xr(){if(this.Yr)return this.Yr;throw ht()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),oe.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),oe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,s=>{const u=It.fromPath(s);return this.ei(e,u).next(d=>{d||r.removeEntry(u,ct.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return oe.or([()=>oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Nf{constructor(e){this.serializer=e}O(e,r,s,u){const d=new pn("createOrUpgrade",r);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zn,{unique:!0}),S.createObjectStore("documentMutations"),sd(e),function(S){S.createObjectStore("remoteDocuments")}(e));let g=oe.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),sd(e)),g=g.next(()=>function(S){const O=S.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ct.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",H)}(d))),s<4&&u>=4&&(0!==s&&(g=g.next(()=>function(S,O){return O.store("mutations").U().next(H=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zn,{unique:!0});const q=O.store("mutations"),le=H.map(xe=>q.put(xe));return oe.waitFor(le)})}(e,d))),g=g.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(g=g.next(()=>this.ni(d))),s<6&&u>=6&&(g=g.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ri(d)))),s<7&&u>=7&&(g=g.next(()=>this.ii(d))),s<8&&u>=8&&(g=g.next(()=>this.si(e,d))),s<9&&u>=9&&(g=g.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(g=g.next(()=>this.oi(d))),s<11&&u>=11&&(g=g.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(g=g.next(()=>{!function(S){const O=S.createObjectStore("documentOverlays",{keyPath:ms});O.createIndex("collectionPathOverlayIndex",es,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",xa,{unique:!1})}(e)})),s<13&&u>=13&&(g=g.next(()=>function(S){const O=S.createObjectStore("remoteDocumentsV14",{keyPath:gs});O.createIndex("documentKeyIndex",Au),O.createIndex("collectionGroupIndex",no)}(e)).next(()=>this._i(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(g=g.next(()=>this.ai(e,d))),s<15&&u>=15&&(g=g.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:Ni}).createIndex("sequenceNumberIndex",Na,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:Zi}).createIndex("documentKeyIndex",io,{unique:!1})}(e))),s<16&&u>=16&&(g=g.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&u>=17&&(g=g.next(()=>{!function(S){S.createObjectStore("globals",{keyPath:"name"})}(e)})),g}ri(e){let r=0;return e.store("remoteDocuments").J((s,u)=>{r+=ed(u)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(u=>oe.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",g).next(w=>oe.forEach(w,S=>{gt(S.userId===d.userId);const O=jo(this.serializer,S);return Ku(e,d.userId,O).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return s.J((g,w)=>{const S=new Xt(g),O=[0,Nt(S)];d.push(r.get(O).next(H=>H?oe.resolve():r.put({targetId:0,path:Nt(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>oe.waitFor(d))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:ro});const s=r.store("collectionParents"),u=new Gu,d=g=>{if(u.add(g)){const w=g.lastSegment(),S=g.popLast();return s.put({collectionId:w,parent:Nt(S)})}};return r.store("remoteDocuments").J({H:!0},(g,w)=>{const S=new Xt(g);return d(S.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([g,w,S],O)=>{const H=Tn(w);return d(H.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,u)=>{const d=yo(u),g=va(this.serializer,d);return r.put(g)})}_i(e,r){const s=r.store("remoteDocuments"),u=[];return s.J((d,g)=>{const w=r.store("remoteDocumentsV14"),S=(q=g,q.document?new It(Xt.fromString(q.document.name).popFirst(5)):q.noDocument?It.fromSegments(q.noDocument.path):q.unknownDocument?It.fromSegments(q.unknownDocument.path):ht()).path.toArray(),O={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var q;u.push(w.put(O))}).next(()=>oe.waitFor(u))}ai(e,r){const s=r.store("mutations"),u=Xr(this.serializer),d=new _h(id.Zr,this.serializer.ct);return s.U().next(g=>{const w=new Map;return g.forEach(S=>{var O;let H=null!==(O=w.get(S.userId))&&void 0!==O?O:V();jo(this.serializer,S).keys().forEach(q=>H=H.add(q)),w.set(S.userId,H)}),oe.forEach(w,(S,O)=>{const H=new Le(O),q=ql.lt(this.serializer,H),le=d.getIndexManager(H),xe=qu.lt(H,this.serializer,le,d.referenceDelegate);return new Yu(u,xe,q,le).recalculateAndSaveOverlaysForDocumentKeys(new oa(r,Ne.oe),S).next()})})}}function sd(a){a.createObjectStore("targetDocuments",{keyPath:ia}).createIndex("documentTargetsIndex",si,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Du,{unique:!0}),a.createObjectStore("targetGlobal")}const zc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wc{constructor(e,r,s,u,d,g,w,S,O,H,q=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=d,this.window=g,this.document=w,this.ci=O,this.li=H,this.hi=q,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=le=>Promise.resolve(),!Wc.D())throw new qe(Re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new A_(this,u),this.Ai=r+"main",this.serializer=new qa(S),this.Ri=new Dn(this.Ai,this.hi,new Nf(this.serializer)),this.$r=new Uc,this.Ur=new ph(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xr(this.serializer),this.Gr=new lg,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===H&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Re.FAILED_PRECONDITION,zc);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ne(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,_e.A)(function*(u){if(r.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,_e.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,_e.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wa(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(gi(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ru(e).get("owner").next(r=>oe.resolve(this.vi(r)))}Ci(e){return wa(e).delete(this.clientId)}Fi(){var e=this;return(0,_e.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Cr(s,"clientMetadata");return u.U().next(d=>{const g=e.xi(d,18e5),w=d.filter(S=>-1===g.indexOf(S));return oe.forEach(w,S=>u.delete(S.clientId)).next(()=>w)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?oe.resolve(!0):ru(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new qe(Re.FAILED_PRECONDITION,zc);return!1}}return!(!this.networkEnabled||!this.inForeground)||wa(e).U().next(s=>void 0===this.xi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&$e("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,_e.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new oa(r,Ne.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>wa(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return qu.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hg(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ql.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){$e("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",d=17===(S=this.hi)?La:16===S?bu:15===S?sa:14===S?Cu:13===S?ka:12===S?Oa:11===S?Di:void ht();var S;let g;return this.Ri.runTransaction(e,u,d,w=>(g=new oa(w,this.Qr?this.Qr.next():Ne.oe),"readwrite-primary"===r?this.wi(g).next(S=>!!S||this.Si(g)).next(S=>{if(!S)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new qe(Re.FAILED_PRECONDITION,ae);return s(g)}).next(S=>this.Di(g).next(()=>S)):this.Ki(g).next(()=>s(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Ki(e){return ru(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new qe(Re.FAILED_PRECONDITION,zc)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ru(e).put("owner",r)}static D(){return Dn.D()}bi(e){const r=ru(e);return r.get("owner").next(s=>this.vi(s)?($e("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):oe.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(Ot(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,ke.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return $e("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ot("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ru(a){return Cr(a,"owner")}function wa(a){return Cr(a,"clientMetadata")}function Ju(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class iu{constructor(e,r,s,u){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=u}static Wi(e,r){let s=V(),u=V();for(const d of r.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new iu(e,r.fromCache,s,u)}}class xf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vh{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ke.nr)()?8:cn((0,ke.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,u){const d={result:null};return this.Yi(e,r).next(g=>{d.result=g}).next(()=>{if(!d.result)return this.Zi(e,r,u,s).next(g=>{d.result=g})}).next(()=>{if(d.result)return;const g=new xf;return this.Xi(e,r,g).next(w=>{if(d.result=w,this.zi)return this.es(e,r,g,w.size)})}).next(()=>d.result)}es(e,r,s,u){return s.documentReadCount<this.ji?($n()<=ue.$b.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",yi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):($n()<=ue.$b.DEBUG&&$e("QueryEngine","Query:",yi(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Hi*u?($n()<=ue.$b.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",yi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(r))):oe.resolve())}Yi(e,r){if(Ts(r))return oe.resolve(null);let s=wr(r);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=lo(r,null,"F"),s=wr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=V(...d);return this.Ji.getDocuments(e,g).next(w=>this.indexManager.getMinOffset(e,s).next(S=>{const O=this.ts(r,w);return this.ns(r,O,g,S.readTime)?this.Yi(e,lo(r,null,"F")):this.rs(e,O,r,S)}))})))}Zi(e,r,s,u){return Ts(r)||u.isEqual(ct.min())?oe.resolve(null):this.Ji.getDocuments(e,s).next(d=>{const g=this.ts(r,d);return this.ns(r,g,s,u)?oe.resolve(null):($n()<=ue.$b.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),yi(r)),this.rs(e,g,r,W(u,-1)).next(w=>w))})}ts(e,r){let s=new zn(ja(e));return r.forEach((u,d)=>{zs(e,d)&&(s=s.add(d))}),s}ns(e,r,s,u){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const d="F"===e.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(e,r,s){return $n()<=ue.$b.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",yi(r)),this.Ji.getDocumentsMatchingQuery(e,r,B.min(),s)}rs(e,r,s,u){return this.Ji.getDocumentsMatchingQuery(e,s,u).next(d=>(r.forEach(g=>{d=d.insert(g.key,g)}),d))}}class Ih{constructor(e,r,s,u){this.persistence=e,this.ss=r,this.serializer=u,this.os=new fn(at),this._s=new ui(d=>Hr(d),rs),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Gc(a,e,r,s){return new Ih(a,e,r,s)}function Eh(a,e){return Th.apply(this,arguments)}function Th(){return(Th=(0,_e.A)(function*(a,e){const r=Ze(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(d=>(u=d,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],w=[];let S=V();for(const O of u){g.push(O.batchId);for(const H of O.mutations)S=S.add(H.key)}for(const O of d){w.push(O.batchId);for(const H of O.mutations)S=S.add(H.key)}return r.localDocuments.getDocuments(s,S).next(O=>({hs:O,removedBatchIds:g,addedBatchIds:w}))})})})).apply(this,arguments)}function su(a){const e=Ze(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function kf(a,e,r){let s=V(),u=V();return r.forEach(d=>s=s.add(d)),e.getEntries(a,s).next(d=>{let g=vi();return r.forEach((w,S)=>{const O=d.get(w);S.isFoundDocument()!==O.isFoundDocument()&&(u=u.add(w)),S.isNoDocument()&&S.version.isEqual(ct.min())?(e.removeEntry(w,S.readTime),g=g.insert(w,S)):!O.isValidDocument()||S.version.compareTo(O.version)>0||0===S.version.compareTo(O.version)&&O.hasPendingWrites?(e.addEntry(S),g=g.insert(w,S)):$e("LocalStore","Ignoring outdated watch update for ",w,". Current version:",O.version," Watch version:",S.version)}),{Ps:g,Is:u}})}function Zu(a,e){const r=Ze(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ou(a,e){const r=Ze(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.Ur.getTargetData(s,e).next(d=>d?(u=d,oe.resolve(u)):r.Ur.allocateTargetId(s).next(g=>(u=new Bo(e,g,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.os.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function ec(a,e,r){return ad.apply(this,arguments)}function ad(){return(ad=(0,_e.A)(function*(a,e,r){const s=Ze(a),u=s.os.get(e),d=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!gi(g))throw g;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.os=s.os.remove(e),s._s.delete(u.target)})).apply(this,arguments)}function ud(a,e,r){const s=Ze(a);let u=ct.min(),d=V();return s.persistence.runTransaction("Execute query","readwrite",g=>function(S,O,H){const q=Ze(S),le=q._s.get(H);return void 0!==le?oe.resolve(q.os.get(le)):q.Ur.getTargetData(O,H)}(s,g,wr(e)).next(w=>{if(w)return u=w.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(g,w.targetId).next(S=>{d=S})}).next(()=>s.ss.getDocumentsMatchingQuery(g,e,r?u:ct.min(),r?d:V())).next(w=>(Kc(s,ca(e),w),{documents:w,Ts:d})))}function cd(a,e){const r=Ze(a),s=Ze(r.Ur),u=r.os.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>s.ot(d,e).next(g=>g?g.target:null))}function Lf(a,e){const r=Ze(a),s=r.us.get(e)||ct.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,e,W(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Kc(r,e,u),u))}function Kc(a,e,r){let s=a.us.get(e)||ct.min();r.forEach((u,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),a.us.set(e,s)}function wh(){return(wh=(0,_e.A)(function*(a,e,r,s){const u=Ze(a);let d=V(),g=vi();for(const O of r){const H=e.Es(O.metadata.name);O.document&&(d=d.add(H));const q=e.ds(O);q.setReadTime(e.As(O.metadata.readTime)),g=g.insert(H,q)}const w=u.cs.newChangeBuffer({trackRemovals:!0}),S=yield ou(u,(H=s,wr($i(Xt.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",O=>kf(O,w,g).next(H=>(w.apply(O),H)).next(H=>u.Ur.removeMatchingKeysForTargetId(O,S.targetId).next(()=>u.Ur.addMatchingKeys(O,d,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(O,H.Ps,H.Is)).next(()=>H.Ps)))})).apply(this,arguments)}function Ff(a,e){return dd.apply(this,arguments)}function dd(){return(dd=(0,_e.A)(function*(a,e,r=V()){const s=yield ou(a,wr(Ya(e.bundledQuery))),u=Ze(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=rr(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return u.Gr.saveNamedQuery(d,e);const w=s.withResumeToken(_t.EMPTY_BYTE_STRING,g);return u.os=u.os.insert(w.targetId,w),u.Ur.updateTargetData(d,w).next(()=>u.Ur.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,s.targetId)).next(()=>u.Gr.saveNamedQuery(d,e))})})).apply(this,arguments)}function Ah(a,e){return`firestore_clients_${a}_${e}`}function Ig(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Dh(a,e){return`firestore_targets_${a}_${e}`}class hd{constructor(e,r,s,u){this.user=e,this.batchId=r,this.state=s,this.error=u}static Rs(e,r,s){const u=JSON.parse(s);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new qe(u.error.code,u.error.message))),g?new hd(e,r,u.state,d):(Ot("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class au{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new qe(s.error.code,s.error.message))),d?new au(e,s.state,u):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fd{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,d=F();for(let g=0;u&&g<s.activeTargetIds.length;++g)u=At(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return u?new fd(e,d):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class pd{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new pd(r.clientId,r.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qc{constructor(){this.activeTargetIds=F()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vf{constructor(e,r,s,u,d){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new fn(at),this.started=!1,this.bs=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=Ah(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new qc),this.Cs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.A)(function*(){const r=yield e.syncEngine.Qi();for(const u of r){if(u===e.ps)continue;const d=e.getItem(Ah(e.persistenceKey,u));if(d){const g=fd.Rs(u,d);g&&(e.Ss=e.Ss.insert(g.clientId,g))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const u=e.Ls(s);u&&e.Bs(u)}for(const u of e.bs)e.ws(u);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e,r=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(Dh(this.persistenceKey,e));if(u){const d=au.Rs(e,u);d&&(s=d.state)}}return r&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dh(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(u=>{this.Qs(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return $e("SharedClientState","READ",e,r),r}setItem(e,r){$e("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if($e("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,_e.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const u=r.Gs(s.key);return r.zs(u,null)}{const u=r.js(s.key,s.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const u=r.Hs(s.key,s.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const u=r.Ys(s.key,s.newValue);if(u)return r.Zs(u)}}else if(s.key===r.xs){if(null!==s.newValue){const u=r.Ls(s.newValue);if(u)return r.Bs(u)}}else if(s.key===r.vs){const u=function(g){let w=Ne.oe;if(null!=g)try{const S=JSON.parse(g);gt("number"==typeof S),w=S}catch(S){Ot("SharedClientState","Failed to read sequence number from WebStorage",S)}return w}(s.newValue);u!==Ne.oe&&r.sequenceNumberHandler(u)}else if(s.key===r.Os){const u=r.Xs(s.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const u=new hd(this.currentUser,e,r,s),d=Ig(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Vs())}Qs(e){const r=Ig(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const u=Dh(this.persistenceKey,e),d=new au(e,r,s);this.setItem(u,d.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return fd.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),u=Number(s[1]);return hd.Rs(new Le(void 0!==s[2]?s[2]:null),u,r)}Ys(e,r){const s=this.Ms.exec(e),u=Number(s[1]);return au.Rs(u,r)}Ls(e){return pd.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,_e.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),u=this.ks(this.Ss),d=this.ks(s),g=[],w=[];return d.forEach(S=>{u.has(S)||g.push(S)}),u.forEach(S=>{d.has(S)||w.push(S)}),this.syncEngine.io(g,w).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=F();return e.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class Ch{constructor(){this.so=new qc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qc,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uf{_o(e){}shutdown(){}}class Eg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bh=null;function tc(){return null===bh?bh=268435456+Math.round(2147483648*Math.random()):bh++,"0x"+bh.toString(16)}const gd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class md{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ei="WebChannelConnection";class Sh extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,s,u,d,g){const w=tc(),S=this.xo(r,s.toUriEncodedString());$e("RestConnection",`Sending RPC '${r}' ${w}:`,S,u);const O={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(O,d,g),this.No(r,S,O,u).then(H=>($e("RestConnection",`Received RPC '${r}' ${w}: `,H),H),H=>{throw Hn("RestConnection",`RPC '${r}' ${w} failed with error: `,H,"url: ",S,"request:",u),H})}Lo(r,s,u,d,g,w){return this.Mo(r,s,u,d,g)}Oo(r,s,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+ot,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((d,g)=>r[g]=d),u&&u.headers.forEach((d,g)=>r[g]=d)}xo(r,s){return`${this.Do}/v1/${s}:${gd[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,u){const d=tc();return new Promise((g,w)=>{const S=new Jt;S.setWithCredentials(!0),S.listenOnce(Pt.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case St.NO_ERROR:const H=S.getResponseJson();$e(Ei,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(H)),g(H);break;case St.TIMEOUT:$e(Ei,`RPC '${e}' ${d} timed out`),w(new qe(Re.DEADLINE_EXCEEDED,"Request time out"));break;case St.HTTP_ERROR:const q=S.getStatus();if($e(Ei,`RPC '${e}' ${d} failed with status:`,q,"response text:",S.getResponseText()),q>0){let le=S.getResponseJson();Array.isArray(le)&&(le=le[0]);const xe=le?.error;if(xe&&xe.status&&xe.message){const it=function(pt){const Ut=pt.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(Ut)>=0?Ut:Re.UNKNOWN}(xe.status);w(new qe(it,xe.message))}else w(new qe(Re.UNKNOWN,"Server responded with status "+S.getStatus()))}else w(new qe(Re.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e(Ei,`RPC '${e}' ${d} completed.`)}});const O=JSON.stringify(u);$e(Ei,`RPC '${e}' ${d} sending request:`,u),S.send(r,"POST",O,s,15)})}Bo(e,r,s){const u=tc(),d=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Ae(),w=be(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},O=this.longPollingOptions.timeoutSeconds;void 0!==O&&(S.longPollingTimeout=Math.round(1e3*O)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Oo(S.initMessageHeaders,r,s),S.encodeInitMessageHeaders=!0;const H=d.join("");$e(Ei,`Creating RPC '${e}' stream ${u}: ${H}`,S);const q=g.createWebChannel(H,S);let le=!1,xe=!1;const it=new md({Io:pt=>{xe?$e(Ei,`Not sending because RPC '${e}' stream ${u} is closed:`,pt):(le||($e(Ei,`Opening RPC '${e}' stream ${u} transport.`),q.open(),le=!0),$e(Ei,`RPC '${e}' stream ${u} sending:`,pt),q.send(pt))},To:()=>q.close()}),Et=(pt,Ut,Gt)=>{pt.listen(Ut,Bt=>{try{Gt(Bt)}catch(rn){setTimeout(()=>{throw rn},0)}})};return Et(q,xn.EventType.OPEN,()=>{xe||($e(Ei,`RPC '${e}' stream ${u} transport opened.`),it.yo())}),Et(q,xn.EventType.CLOSE,()=>{xe||(xe=!0,$e(Ei,`RPC '${e}' stream ${u} transport closed`),it.So())}),Et(q,xn.EventType.ERROR,pt=>{xe||(xe=!0,Hn(Ei,`RPC '${e}' stream ${u} transport errored:`,pt),it.So(new qe(Re.UNAVAILABLE,"The operation could not be completed")))}),Et(q,xn.EventType.MESSAGE,pt=>{var Ut;if(!xe){const Gt=pt.data[0];gt(!!Gt);const rn=Gt.error||(null===(Ut=Gt[0])||void 0===Ut?void 0:Ut.error);if(rn){$e(Ei,`RPC '${e}' stream ${u} received error:`,rn);const Vn=rn.status;let Pn=function(fe){const we=kr[fe];if(void 0!==we)return Hl(we)}(Vn),ye=rn.message;void 0===Pn&&(Pn=Re.INTERNAL,ye="Unknown error status: "+Vn+" with message "+rn.message),xe=!0,it.So(new qe(Pn,ye)),q.close()}else $e(Ei,`RPC '${e}' stream ${u} received:`,Gt),it.bo(Gt)}}),Et(w,pe.STAT_EVENT,pt=>{pt.stat===ce.PROXY?$e(Ei,`RPC '${e}' stream ${u} detected buffering proxy`):pt.stat===ce.NOPROXY&&$e(Ei,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{it.wo()},0),it}}function Rh(){return typeof window<"u"?window:null}function Go(){return typeof document<"u"?document:null}function nc(a){return new uh(a,!0)}class _d{constructor(e,r,s=1e3,u=1.5,d=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-s);u>0&&$e("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ko{constructor(e,r,s,u,d,g,w,S){this.ui=e,this.Ho=s,this.Jo=u,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=S,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _d(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,_e.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,_e.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,_e.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===Re.RESOURCE_EXHAUSTED?(Ot(r.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===Re.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Yo===r&&this.P_(s,u)},s=>{e(()=>{const u=new qe(Re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(u)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{s(()=>this.I_(u))}),this.stream.onMessage(u=>{s(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var e=this;this.state=5,this.t_.Go((0,_e.A)(function*(){e.state=0,e.start()}))}I_(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yd extends Ko{constructor(e,r,s,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function N(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:ht(),u=e.targetChange.targetIds||[],d=function(O,H){return O.useProto3Json?(gt(void 0===H||"string"==typeof H),_t.fromBase64String(H||"")):(gt(void 0===H||H instanceof Buffer||H instanceof Uint8Array),_t.fromUint8Array(H||new Uint8Array))}(a,e.targetChange.resumeToken),g=e.targetChange.cause,w=g&&function(O){const H=void 0===O.code?Re.UNKNOWN:Hl(O.code);return new qe(H,O.message||"")}(g);r=new Wl(s,u,d,w||null)}else if("documentChange"in e){const s=e.documentChange,u=Ks(a,s.document.name),d=rr(s.document.updateTime),g=s.document.createTime?rr(s.document.createTime):ct.min(),w=new ln({mapValue:{fields:s.document.fields}}),S=Nn.newFoundDocument(u,d,g,w);r=new Rn(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=Ks(a,s.document),d=s.readTime?rr(s.readTime):ct.min(),g=Nn.newNoDocument(u,d);r=new Rn([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,u=Ks(a,s.document);r=new Rn([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return ht();{const s=e.filter,{count:u=0,unchangedNames:d}=s,g=new Yt(u,d);r=new Vo(s.targetId,g)}}var O;return r}(this.serializer,e),s=function(d){if(!("targetChange"in d))return ct.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?ct.min():g.readTime?rr(g.readTime):ct.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=Fc(this.serializer),r.addTarget=function(d,g){let w;const S=g.target;if(w=ko(S)?{documents:Me(d,S)}:{query:Ct(d,S)._t},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=Ds(d,g.resumeToken);const O=Vu(d,g.expectedCount);null!==O&&(w.expectedCount=O)}else if(g.snapshotVersion.compareTo(ct.min())>0){w.readTime=Ar(d,g.snapshotVersion.toTimestamp());const O=Vu(d,g.expectedCount);null!==O&&(w.expectedCount=O)}return w}(this.serializer,e);const s=function In(a,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=Fc(this.serializer),r.removeTarget=e,this.a_(r)}}class Qc extends Ko{constructor(e,r,s,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function Ue(a,e){return a&&a.length>0?(gt(void 0!==e),a.map(r=>function(u,d){let g=rr(u.updateTime?u.updateTime:d);return g.isEqual(ct.min())&&(g=rr(d)),new is(g,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=rr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=Fc(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>z(this.serializer,s))};this.a_(r)}}class Tg extends class{}{constructor(e,r,s,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new qe(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Mo(e,Wa(r,s),u,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new qe(Re.UNKNOWN,d.toString())})}Lo(e,r,s,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.Lo(e,Wa(r,s),u,g,w,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new qe(Re.UNKNOWN,g.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class wg{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ot(r),this.D_=!1):$e("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ag{constructor(e,r,s,u,d){var g=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(w=>{s.enqueueAndForget((0,_e.A)(function*(){var S;Eo(g)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,_e.A)(function*(H){const q=Ze(H);q.L_.add(4),yield Aa(q),q.q_.set("Unknown"),q.L_.delete(4),yield rc(q)}),function O(H){return S.apply(this,arguments)})(g))}))}),this.q_=new wg(s,u)}}function rc(a){return ic.apply(this,arguments)}function ic(){return(ic=(0,_e.A)(function*(a){if(Eo(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function Aa(a){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,_e.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function Xc(a,e){const r=Ze(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),qo(r)?hr(r):M(r).r_()&&Jc(r,e))}function uu(a,e){const r=Ze(a),s=M(r);r.N_.delete(e),s.r_()&&Bf(r,e),0===r.N_.size&&(s.r_()?s.o_():Eo(r)&&r.q_.set("Unknown"))}function Jc(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}M(a).A_(e)}function Bf(a,e){a.Q_.xe(e),M(a).R_(e)}function hr(a){a.Q_=new oh({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),M(a).start(),a.q_.v_()}function qo(a){return Eo(a)&&!M(a).n_()&&a.N_.size>0}function Eo(a){return 0===Ze(a).L_.size}function vd(a){a.Q_=void 0}function hi(a){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,_e.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function jf(a){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_e.A)(function*(a){a.N_.forEach((e,r)=>{Jc(a,e)})})).apply(this,arguments)}function Dg(a,e){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,_e.A)(function*(a,e){vd(a),qo(a)?(a.q_.M_(e),hr(a)):a.q_.set("Unknown")})).apply(this,arguments)}function $f(a,e,r){return Id.apply(this,arguments)}function Id(){return Id=(0,_e.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof Wl&&2===e.state&&e.cause)try{yield(s=(0,_e.A)(function*(d,g){const w=g.cause;for(const S of g.targetIds)d.N_.has(S)&&(yield d.remoteSyncer.rejectListen(S,w),d.N_.delete(S),d.Q_.removeTarget(S))}),function u(d,g){return s.apply(this,arguments)})(a,e)}catch(s){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Ed(a,s)}else if(e instanceof Rn?a.Q_.Ke(e):e instanceof Vo?a.Q_.He(e):a.Q_.We(e),!r.isEqual(ct.min()))try{const s=yield su(a.localStore);r.compareTo(s)>=0&&(yield function(d,g){const w=d.Q_.rt(g);return w.targetChanges.forEach((S,O)=>{if(S.resumeToken.approximateByteSize()>0){const H=d.N_.get(O);H&&d.N_.set(O,H.withResumeToken(S.resumeToken,g))}}),w.targetMismatches.forEach((S,O)=>{const H=d.N_.get(S);if(!H)return;d.N_.set(S,H.withResumeToken(_t.EMPTY_BYTE_STRING,H.snapshotVersion)),Bf(d,S);const q=new Bo(H.target,S,O,H.sequenceNumber);Jc(d,q)}),d.remoteSyncer.applyRemoteEvent(w)}(a,r))}catch(s){$e("RemoteStore","Failed to raise snapshot:",s),yield Ed(a,s)}var s}),Id.apply(this,arguments)}function Ed(a,e,r){return Td.apply(this,arguments)}function Td(){return(Td=(0,_e.A)(function*(a,e,r){if(!gi(e))throw e;a.L_.add(1),yield Aa(a),a.q_.set("Offline"),r||(r=()=>su(a.localStore)),a.asyncQueue.enqueueRetryable((0,_e.A)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield rc(a)}))})).apply(this,arguments)}function Ph(a,e){return e().catch(r=>Ed(a,r,e))}function ri(a){return cu.apply(this,arguments)}function cu(){return(cu=(0,_e.A)(function*(a){const e=Ze(a),r=j(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;el(e);)try{const u=yield Zu(e.localStore,s);if(null===u){0===e.O_.length&&r.o_();break}s=u.batchId,Cg(e,u)}catch(u){yield Ed(e,u)}cs(e)&&sc(e)})).apply(this,arguments)}function el(a){return Eo(a)&&a.O_.length<10}function Cg(a,e){a.O_.push(e);const r=j(a);r.r_()&&r.V_&&r.m_(e.mutations)}function cs(a){return Eo(a)&&!j(a).n_()&&a.O_.length>0}function sc(a){j(a).start()}function Hf(a){return tl.apply(this,arguments)}function tl(){return(tl=(0,_e.A)(function*(a){j(a).p_()})).apply(this,arguments)}function zf(a){return oc.apply(this,arguments)}function oc(){return(oc=(0,_e.A)(function*(a){const e=j(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function ac(a,e,r){return uc.apply(this,arguments)}function uc(){return(uc=(0,_e.A)(function*(a,e,r){const s=a.O_.shift(),u=Mc.from(s,e,r);yield Ph(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield ri(a)})).apply(this,arguments)}function Wf(a,e){return nl.apply(this,arguments)}function nl(){return nl=(0,_e.A)(function*(a,e){var r;e&&j(a).V_&&(yield(r=(0,_e.A)(function*(u,d){if(ss(w=d.code)&&w!==Re.ABORTED){const g=u.O_.shift();j(u).s_(),yield Ph(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,d)),yield ri(u)}var w}),function s(u,d){return r.apply(this,arguments)})(a,e)),cs(a)&&sc(a)}),nl.apply(this,arguments)}function m(a,e){return l.apply(this,arguments)}function l(){return(l=(0,_e.A)(function*(a,e){const r=Ze(a);r.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const s=Eo(r);r.L_.add(3),yield Aa(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield rc(r)})).apply(this,arguments)}function h(a,e){return y.apply(this,arguments)}function y(){return(y=(0,_e.A)(function*(a,e){const r=Ze(a);e?(r.L_.delete(2),yield rc(r)):e||(r.L_.add(2),yield Aa(r),r.q_.set("Unknown"))})).apply(this,arguments)}function M(a){return a.K_||(a.K_=function(r,s,u){const d=Ze(r);return d.w_(),new yd(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:hi.bind(null,a),Ro:jf.bind(null,a),mo:Dg.bind(null,a),d_:$f.bind(null,a)}),a.B_.push(function(){var e=(0,_e.A)(function*(r){r?(a.K_.s_(),qo(a)?hr(a):a.q_.set("Unknown")):(yield a.K_.stop(),vd(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function j(a){return a.U_||(a.U_=function(r,s,u){const d=Ze(r);return d.w_(),new Qc(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hf.bind(null,a),mo:Wf.bind(null,a),f_:zf.bind(null,a),g_:ac.bind(null,a)}),a.B_.push(function(){var e=(0,_e.A)(function*(r){r?(a.U_.s_(),yield ri(a)):(yield a.U_.stop(),a.O_.length>0&&($e("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class ie{constructor(e,r,s,u,d){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=d,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,u,d){const g=Date.now()+s,w=new ie(e,r,g,u,d);return w.start(s),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qe(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ee(a,e){if(Ot("AsyncQueue",`${e}: ${a}`),gi(a))return new qe(Re.UNAVAILABLE,`${e}: ${a}`);throw a}class Qe{constructor(e){this.comparator=e?(r,s)=>e(r,s)||It.comparator(r.key,s.key):(r,s)=>It.comparator(r.key,s.key),this.keyedMap=xs(),this.sortedSet=new fn(this.comparator)}static emptySet(e){return new Qe(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new Qe;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Dt{constructor(){this.W_=new fn(It.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ht():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class Mt{constructor(e,r,s,u,d,g,w,S,O){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=S,this.hasCachedResults=O}static fromInitialDocuments(e,r,s,u,d){const g=[];return r.forEach(w=>{g.push({type:0,doc:w})}),new Mt(e,r,Qe.emptySet(r),g,s,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ws(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class Ft{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mr{constructor(){this.queries=ls(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const u=Ze(r),d=u.queries;u.queries=ls(),d.forEach((g,w)=>{for(const S of w.j_)S.onError(s)})}(this,new qe(Re.ABORTED,"Firestore shutting down"))}}function ls(){return new ui(a=>Ns(a),ws)}function lu(a,e){return To.apply(this,arguments)}function To(){return(To=(0,_e.A)(function*(a,e){const r=Ze(a);let s=3;const u=e.query;let d=r.queries.get(u);d?!d.H_()&&e.J_()&&(s=2):(d=new Ft,s=e.J_()?0:1);try{switch(s){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(g){const w=Ee(g,`Initialization of query '${yi(e.query)}' failed`);return void e.onError(w)}r.queries.set(u,d),d.j_.push(e),e.Z_(r.onlineState),d.z_&&e.X_(d.z_)&&du(r)})).apply(this,arguments)}function cc(a,e){return rl.apply(this,arguments)}function rl(){return(rl=(0,_e.A)(function*(a,e){const r=Ze(a),s=e.query;let u=3;const d=r.queries.get(s);if(d){const g=d.j_.indexOf(e);g>=0&&(d.j_.splice(g,1),0===d.j_.length?u=e.J_()?0:1:!d.H_()&&e.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function Gf(a,e){const r=Ze(a);let s=!1;for(const u of e){const g=r.queries.get(u.query);if(g){for(const w of g.j_)w.X_(u)&&(s=!0);g.z_=u}}s&&du(r)}function Kf(a,e,r){const s=Ze(a),u=s.queries.get(e);if(u)for(const d of u.j_)d.onError(r);s.queries.delete(e)}function du(a){a.Y_.forEach(e=>{e.next()})}var wd,il;(il=wd||(wd={})).ea="default",il.Cache="cache";class sl{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Mt(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Mt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wd.Cache}}class qf{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class lc{constructor(e){this.serializer=e}Es(e){return Ks(this.serializer,e)}ds(e){return e.metadata.exists?I(this.serializer,e.document,!1):Nn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return rr(e)}}class Qf{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mh(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=Xt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new lc(this.serializer);for(const u of e)if(u.metadata.queries){const d=s.Es(u.metadata.name);for(const g of u.metadata.queries){const w=(r.get(g)||V()).add(d);r.set(g,w)}}return r}complete(){var e=this;return(0,_e.A)(function*(){const r=yield function ld(a,e,r,s){return wh.apply(this,arguments)}(e.localStore,new lc(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const u of e.queries)yield Ff(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function Mh(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Ad{constructor(e){this.key=e}}class bg{constructor(e){this.key=e}}class Yf{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=V(),this.mutatedKeys=V(),this.Aa=ja(e),this.Ra=new Qe(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Dt,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,g=u,w=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,O="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((H,q)=>{const le=u.get(H),xe=zs(this.query,q)?q:null,it=!!le&&this.mutatedKeys.has(le.key),Et=!!xe&&(xe.hasLocalMutations||this.mutatedKeys.has(xe.key)&&xe.hasCommittedMutations);let pt=!1;le&&xe?le.data.isEqual(xe.data)?it!==Et&&(s.track({type:3,doc:xe}),pt=!0):this.ga(le,xe)||(s.track({type:2,doc:xe}),pt=!0,(S&&this.Aa(xe,S)>0||O&&this.Aa(xe,O)<0)&&(w=!0)):!le&&xe?(s.track({type:0,doc:xe}),pt=!0):le&&!xe&&(s.track({type:1,doc:le}),pt=!0,(S||O)&&(w=!0)),pt&&(xe?(g=g.add(xe),d=Et?d.add(H):d.delete(H)):(g=g.delete(H),d=d.delete(H)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const H="F"===this.query.limitType?g.last():g.first();g=g.delete(H.key),d=d.delete(H.key),s.track({type:1,doc:H})}return{Ra:g,fa:s,ns:w,mutatedKeys:d}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,u){const d=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const g=e.fa.G_();g.sort((H,q)=>function(xe,it){const Et=pt=>{switch(pt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return Et(xe)-Et(it)}(H.type,q.type)||this.Aa(H.doc,q.doc)),this.pa(s),u=null!=u&&u;const w=r&&!u?this.ya():[],S=0===this.da.size&&this.current&&!u?1:0,O=S!==this.Ea;return this.Ea=S,0!==g.length||O?{snapshot:new Mt(this.query,e.Ra,d,g,e.mutatedKeys,0===S,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:w}:{wa:w}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dt,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=V(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new bg(s))}),this.da.forEach(s=>{e.has(s)||r.push(new Ad(s))}),r}ba(e){this.Ta=e.Ts,this.da=V();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Mt.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Xf{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class D_{constructor(e){this.key=e,this.va=!1}}class Sg{constructor(e,r,s,u,d,g){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.Ca={},this.Fa=new ui(w=>Ns(w),ws),this.Ma=new Map,this.xa=new Set,this.Oa=new fn(It.comparator),this.Na=new Map,this.La=new Pf,this.Ba={},this.ka=new Map,this.qa=vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Nh(a,e){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,_e.A)(function*(a,e,r=!0){const s=Wg(a);let u;const d=s.Fa.get(e);return d?(s.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield b_(s,e,r,!0),u})).apply(this,arguments)}function C_(a,e){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,_e.A)(function*(a,e){const r=Wg(a);yield b_(r,e,!0,!1)})).apply(this,arguments)}function b_(a,e,r,s){return Mg.apply(this,arguments)}function Mg(){return(Mg=(0,_e.A)(function*(a,e,r,s){const u=yield ou(a.localStore,wr(e)),d=u.targetId,g=a.sharedClientState.addLocalQueryTarget(d,r);let w;return s&&(w=yield Jf(a,e,d,"current"===g,u.resumeToken)),a.isPrimaryClient&&r&&Xc(a.remoteStore,u),w})).apply(this,arguments)}function Jf(a,e,r,s,u){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,_e.A)(function*(a,e,r,s,u){a.Ka=(q,le,xe)=>{return(it=(0,_e.A)(function*(pt,Ut,Gt,Bt){let rn=Ut.view.ma(Gt);rn.ns&&(rn=yield ud(pt.localStore,Ut.query,!1).then(({documents:se})=>Ut.view.ma(se,rn)));const Vn=Bt&&Bt.targetChanges.get(Ut.targetId),Pn=Bt&&null!=Bt.targetMismatches.get(Ut.targetId),ye=Ut.view.applyChanges(rn,pt.isPrimaryClient,Vn,Pn);return Yo(pt,Ut.targetId,ye.wa),ye.snapshot}),function Et(pt,Ut,Gt,Bt){return it.apply(this,arguments)})(a,q,le,xe);var it};const d=yield ud(a.localStore,e,!0),g=new Yf(e,d.Ts),w=g.ma(d.documents),S=ut.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,u),O=g.applyChanges(w,a.isPrimaryClient,S);Yo(a,r,O.wa);const H=new Xf(e,r,g);return a.Fa.set(e,H),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),O.snapshot}),Zf.apply(this,arguments)}function ep(a,e,r){return xh.apply(this,arguments)}function xh(){return(xh=(0,_e.A)(function*(a,e,r){const s=Ze(a),u=s.Fa.get(e),d=s.Ma.get(u.targetId);if(d.length>1)return s.Ma.set(u.targetId,d.filter(g=>!ws(g,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield ec(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),r&&uu(s.remoteStore,u.targetId),Sd(s,u.targetId)}).catch(lt))):(Sd(s,u.targetId),yield ec(s.localStore,u.targetId,!0))})).apply(this,arguments)}function Dd(a,e){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,_e.A)(function*(a,e){const r=Ze(a),s=r.Fa.get(e),u=r.Ma.get(s.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),uu(r.remoteStore,s.targetId))})).apply(this,arguments)}function S_(){return(S_=(0,_e.A)(function*(a,e,r){const s=k_(a);try{const u=yield function(g,w){const S=Ze(g),O=Sn.now(),H=w.reduce((xe,it)=>xe.add(it.key),V());let q,le;return S.persistence.runTransaction("Locally write mutations","readwrite",xe=>{let it=vi(),Et=V();return S.cs.getEntries(xe,H).next(pt=>{it=pt,it.forEach((Ut,Gt)=>{Gt.isValidDocument()||(Et=Et.add(Ut))})}).next(()=>S.localDocuments.getOverlayedDocuments(xe,it)).next(pt=>{q=pt;const Ut=[];for(const Gt of w){const Bt=sh(Gt,q.get(Gt.key).overlayedDocument);null!=Bt&&Ut.push(new po(Gt.key,Bt,xo(Bt.value.mapValue),_r.exists(!0)))}return S.mutationQueue.addMutationBatch(xe,O,Ut,w)}).next(pt=>{le=pt;const Ut=pt.applyToLocalDocumentSet(q,Et);return S.documentOverlayCache.saveOverlays(xe,pt.batchId,Ut)})}).then(()=>({batchId:le.batchId,changes:Rc(q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(g,w,S){let O=g.Ba[g.currentUser.toKey()];O||(O=new fn(at)),O=O.insert(w,S),g.Ba[g.currentUser.toKey()]=O}(s,u.batchId,r),yield hu(s,u.changes),yield ri(s.remoteStore)}catch(u){const d=Ee(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function R_(a,e){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,_e.A)(function*(a,e){const r=Ze(a);try{const s=yield function od(a,e){const r=Ze(a),s=e.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const w=[];e.targetChanges.forEach((H,q)=>{const le=u.get(q);if(!le)return;w.push(r.Ur.removeMatchingKeys(d,H.removedDocuments,q).next(()=>r.Ur.addMatchingKeys(d,H.addedDocuments,q)));let xe=le.withSequenceNumber(d.currentSequenceNumber);var Et,pt,Ut;null!==e.targetMismatches.get(q)?xe=xe.withResumeToken(_t.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):H.resumeToken.approximateByteSize()>0&&(xe=xe.withResumeToken(H.resumeToken,s)),u=u.insert(q,xe),pt=xe,Ut=H,(0===(Et=le).resumeToken.approximateByteSize()||pt.snapshotVersion.toMicroseconds()-Et.snapshotVersion.toMicroseconds()>=3e8||Ut.addedDocuments.size+Ut.modifiedDocuments.size+Ut.removedDocuments.size>0)&&w.push(r.Ur.updateTargetData(d,xe))});let S=vi(),O=V();if(e.documentUpdates.forEach(H=>{e.resolvedLimboDocuments.has(H)&&w.push(r.persistence.referenceDelegate.updateLimboDocument(d,H))}),w.push(kf(d,g,e.documentUpdates).next(H=>{S=H.Ps,O=H.Is})),!s.isEqual(ct.min())){const H=r.Ur.getLastRemoteSnapshotVersion(d).next(q=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,s));w.push(H)}return oe.waitFor(w).next(()=>g.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,S,O)).next(()=>S)}).then(d=>(r.os=u,d))}(r.localStore,e);e.targetChanges.forEach((u,d)=>{const g=r.Na.get(d);g&&(gt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.va=!0:u.modifiedDocuments.size>0?gt(g.va):u.removedDocuments.size>0&&(gt(g.va),g.va=!1))}),yield hu(r,s,e)}catch(s){yield lt(s)}})).apply(this,arguments)}function P_(a,e,r){const s=Ze(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.Fa.forEach((d,g)=>{const w=g.view.Z_(e);w.snapshot&&u.push(w.snapshot)}),function(g,w){const S=Ze(g);S.onlineState=w;let O=!1;S.queries.forEach((H,q)=>{for(const le of q.j_)le.Z_(w)&&(O=!0)}),O&&du(S)}(s.eventManager,e),u.length&&s.Ca.d_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Cd(a,e,r){return bd.apply(this,arguments)}function bd(){return(bd=(0,_e.A)(function*(a,e,r){const s=Ze(a);s.sharedClientState.updateQueryState(e,"rejected",r);const u=s.Na.get(e),d=u&&u.key;if(d){let g=new fn(It.comparator);g=g.insert(d,Nn.newNoDocument(d,ct.min()));const w=V().add(d),S=new os(ct.min(),new Map,new fn(at),g,w);yield R_(s,S),s.Oa=s.Oa.remove(d),s.Na.delete(e),Fg(s)}else yield ec(s.localStore,e,!1).then(()=>Sd(s,e,r)).catch(lt)})).apply(this,arguments)}function xg(a,e){return tp.apply(this,arguments)}function tp(){return(tp=(0,_e.A)(function*(a,e){const r=Ze(a),s=e.batch.batchId;try{const u=yield function Of(a,e){const r=Ze(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(w,S,O,H){const q=O.batch,le=q.keys();let xe=oe.resolve();return le.forEach(it=>{xe=xe.next(()=>H.getEntry(S,it)).next(Et=>{const pt=O.docVersions.get(it);gt(null!==pt),Et.version.compareTo(pt)<0&&(q.applyToRemoteDocument(Et,O),Et.isValidDocument()&&(Et.setReadTime(O.commitVersion),H.addEntry(Et)))})}),xe.next(()=>w.mutationQueue.removeMutationBatch(S,q))}(r,s,e,d).next(()=>d.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let S=V();for(let O=0;O<w.mutationResults.length;++O)w.mutationResults[O].transformResults.length>0&&(S=S.add(w.batch.mutations[O].key));return S}(e))).next(()=>r.localDocuments.getDocuments(s,u))})}(r.localStore,e);Lg(r,s,null),kg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield hu(r,u)}catch(u){yield lt(u)}})).apply(this,arguments)}function M_(a,e,r){return np.apply(this,arguments)}function np(){return(np=(0,_e.A)(function*(a,e,r){const s=Ze(a);try{const u=yield function(g,w){const S=Ze(g);return S.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let H;return S.mutationQueue.lookupMutationBatch(O,w).next(q=>(gt(null!==q),H=q.keys(),S.mutationQueue.removeMutationBatch(O,q))).next(()=>S.mutationQueue.performConsistencyCheck(O)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(O,H,w)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,H)).next(()=>S.localDocuments.getDocuments(O,H))})}(s.localStore,e);Lg(s,e,r),kg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield hu(s,u)}catch(u){yield lt(u)}})).apply(this,arguments)}function Og(){return(Og=(0,_e.A)(function*(a,e){const r=Ze(a);Eo(r.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=Ze(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>w.mutationQueue.getHighestUnacknowledgedBatchId(S))}(r.localStore);if(-1===s)return void e.resolve();const u=r.ka.get(s)||[];u.push(e),r.ka.set(s,u)}catch(s){const u=Ee(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function kg(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function Lg(a,e,r){const s=Ze(a);let u=s.Ba[s.currentUser.toKey()];if(u){const d=u.get(e);d&&(r?d.reject(r):d.resolve(),u=u.remove(e)),s.Ba[s.currentUser.toKey()]=u}}function Sd(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||N_(a,s)})}function N_(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(uu(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),Fg(a))}function Yo(a,e,r){for(const s of r)s instanceof Ad?(a.La.addReference(s.key,e),Rd(a,s)):s instanceof bg?($e("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||N_(a,s.key)):ht()}function Rd(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||($e("SyncEngine","New document in limbo: "+r),a.xa.add(s),Fg(a))}function Fg(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new It(Xt.fromString(e)),s=a.qa.next();a.Na.set(s,new D_(r)),a.Oa=a.Oa.insert(r,s),Xc(a.remoteStore,new Bo(wr($i(r.path)),s,"TargetPurposeLimboResolution",Ne.oe))}}function hu(a,e,r){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,_e.A)(function*(a,e,r){const s=Ze(a),u=[],d=[],g=[];var w;s.Fa.isEmpty()||(s.Fa.forEach((w,S)=>{g.push(s.Ka(S,e,r).then(O=>{var H;if((O||r)&&s.isPrimaryClient){const q=O?!O.fromCache:null===(H=r?.targetChanges.get(S.targetId))||void 0===H?void 0:H.current;s.sharedClientState.updateQueryState(S.targetId,q?"current":"not-current")}if(O){u.push(O);const q=iu.Wi(S.targetId,O);d.push(q)}}))}),yield Promise.all(g),s.Ca.d_(u),yield(w=(0,_e.A)(function*(O,H){const q=Ze(O);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",le=>oe.forEach(H,xe=>oe.forEach(xe.$i,it=>q.persistence.referenceDelegate.addReference(le,xe.targetId,it)).next(()=>oe.forEach(xe.Ui,it=>q.persistence.referenceDelegate.removeReference(le,xe.targetId,it)))))}catch(le){if(!gi(le))throw le;$e("LocalStore","Failed to update sequence numbers: "+le)}for(const le of H){const xe=le.targetId;if(!le.fromCache){const it=q.os.get(xe),pt=it.withLastLimboFreeSnapshotVersion(it.snapshotVersion);q.os=q.os.insert(xe,pt)}}}),function S(O,H){return w.apply(this,arguments)})(s.localStore,d))}),Vg.apply(this,arguments)}function vv(a,e){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,_e.A)(function*(a,e){const r=Ze(a);if(!r.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const s=yield Eh(r.localStore,e);r.currentUser=e,(d=r).ka.forEach(w=>{w.forEach(S=>{S.reject(new qe(Re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield hu(r,s.hs)}var d})).apply(this,arguments)}function Iv(a,e){const r=Ze(a),s=r.Na.get(e);if(s&&s.va)return V().add(s.key);{let u=V();const d=r.Ma.get(e);if(!d)return u;for(const g of d){const w=r.Fa.get(g);u=u.unionWith(w.view.Va)}return u}}function x_(a,e){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,_e.A)(function*(a,e){const r=Ze(a),s=yield ud(r.localStore,e.query,!0),u=e.view.ba(s);return r.isPrimaryClient&&Yo(r,e.targetId,u.wa),u})).apply(this,arguments)}function Ev(a,e){return jg.apply(this,arguments)}function jg(){return(jg=(0,_e.A)(function*(a,e){const r=Ze(a);return Lf(r.localStore,e).then(s=>hu(r,s))})).apply(this,arguments)}function Tv(a,e,r,s){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,_e.A)(function*(a,e,r,s){const u=Ze(a),d=yield function(w,S){const O=Ze(w),H=Ze(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",q=>H.Mn(q,S).next(le=>le?O.localDocuments.getDocuments(q,le):oe.resolve(null)))}(u.localStore,e);var S;null!==d?("pending"===r?yield ri(u.remoteStore):"acknowledged"===r||"rejected"===r?(Lg(u,e,s||null),kg(u,e),S=e,Ze(Ze(u.localStore).mutationQueue).On(S)):ht(),yield hu(u,d)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function al(){return(al=(0,_e.A)(function*(a,e){const r=Ze(a);if(Wg(r),k_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield $g(r,s.toArray());r.Qa=!0,yield h(r.remoteStore,!0);for(const d of u)Xc(r.remoteStore,d)}else if(!1===e&&!1!==r.Qa){const s=[];let u=Promise.resolve();r.Ma.forEach((d,g)=>{r.sharedClientState.isLocalQueryTarget(g)?s.push(g):u=u.then(()=>(Sd(r,g),ec(r.localStore,g,!0))),uu(r.remoteStore,g)}),yield u,yield $g(r,s),function(g){const w=Ze(g);w.Na.forEach((S,O)=>{uu(w.remoteStore,O)}),w.La.pr(),w.Na=new Map,w.Oa=new fn(It.comparator)}(r),r.Qa=!1,yield h(r.remoteStore,!1)}})).apply(this,arguments)}function $g(a,e,r){return rp.apply(this,arguments)}function rp(){return(rp=(0,_e.A)(function*(a,e,r){const s=Ze(a),u=[],d=[];for(const g of e){let w;const S=s.Ma.get(g);if(S&&0!==S.length){w=yield ou(s.localStore,wr(S[0]));for(const O of S){const H=s.Fa.get(O),q=yield x_(s,H);q.snapshot&&d.push(q.snapshot)}}else{const O=yield cd(s.localStore,g);w=yield ou(s.localStore,O),yield Jf(s,Hg(O),g,!1,w.resumeToken)}u.push(w)}return s.Ca.d_(d),u})).apply(this,arguments)}function Hg(a){return Lo(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function aE(a){return r=Ze(a).localStore,Ze(Ze(r).persistence).Qi();var r}function uE(a,e,r,s){return O_.apply(this,arguments)}function O_(){return(O_=(0,_e.A)(function*(a,e,r,s){const u=Ze(a);if(u.Qa)return void $e("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(e);if(d&&d.length>0)switch(r){case"current":case"not-current":{const g=yield Lf(u.localStore,ca(d[0])),w=os.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,_t.EMPTY_BYTE_STRING);yield hu(u,g,w);break}case"rejected":yield ec(u.localStore,e,!0),Sd(u,e,s);break;default:ht()}})).apply(this,arguments)}function zg(a,e,r){return kh.apply(this,arguments)}function kh(){return(kh=(0,_e.A)(function*(a,e,r){const s=Wg(a);if(s.Qa){for(const u of e){if(s.Ma.has(u)&&s.sharedClientState.isActiveQueryTarget(u)){$e("SyncEngine","Adding an already active target "+u);continue}const d=yield cd(s.localStore,u),g=yield ou(s.localStore,d);yield Jf(s,Hg(d),g.targetId,!1,g.resumeToken),Xc(s.remoteStore,g)}for(const u of r)s.Ma.has(u)&&(yield ec(s.localStore,u,!1).then(()=>{uu(s.remoteStore,u),Sd(s,u)}).catch(lt))}})).apply(this,arguments)}function Wg(a){const e=Ze(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=R_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cd.bind(null,e),e.Ca.d_=Gf.bind(null,e.eventManager),e.Ca.$a=Kf.bind(null,e.eventManager),e}function k_(a){const e=Ze(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M_.bind(null,e),e}let Md=(()=>{class a{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(r){var s=this;return(0,_e.A)(function*(){s.serializer=nc(r.databaseInfo.databaseId),s.sharedClientState=s.Wa(r),s.persistence=s.Ga(r),yield s.persistence.start(),s.localStore=s.za(r),s.gcScheduler=s.ja(r,s.localStore),s.indexBackfillerScheduler=s.Ha(r,s.localStore)})()}ja(r,s){return null}Ha(r,s){return null}za(r){return Gc(this.persistence,new vh,r.initialUser,this.serializer)}Ga(r){return new _h(id.Zr,this.serializer)}Wa(r){return new Ch}terminate(){var r=this;return(0,_e.A)(function*(){var s,u;null===(s=r.gcScheduler)||void 0===s||s.stop(),null===(u=r.indexBackfillerScheduler)||void 0===u||u.stop(),r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}return a.provider={build:()=>new a},a})();class Gg extends Md{constructor(e,r,s){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,_e.A)(function*(){yield r().call(s,e),yield s.Ja.initialize(s,e),yield k_(s.Ja.syncEngine),yield ri(s.Ja.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return Gc(this.persistence,new vh,e.initialUser,this.serializer)}ja(e,r){return new Sf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ha(e,r){const s=new ps(r,this.persistence);return new hn(e.asyncQueue,s)}Ga(e){const r=Ju(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new Wc(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,Rh(),Go(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ch}}class F_ extends Gg{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,_e.A)(function*(){yield r().call(s,e);const u=s.Ja.syncEngine;s.sharedClientState instanceof Vf&&(s.sharedClientState.syncEngine={no:Tv.bind(null,u),ro:uE.bind(null,u),io:zg.bind(null,u),Qi:aE.bind(null,u),eo:Ev.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var d=(0,_e.A)(function*(g){yield function fu(a,e){return al.apply(this,arguments)}(s.Ja.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}Wa(e){const r=Rh();if(!Vf.D(r))throw new qe(Re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Ju(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vf(r,e.asyncQueue,s,e.clientId,e.initialUser)}}let ul=(()=>{class a{initialize(r,s){var u=this;return(0,_e.A)(function*(){u.localStore||(u.localStore=r.localStore,u.sharedClientState=r.sharedClientState,u.datastore=u.createDatastore(s),u.remoteStore=u.createRemoteStore(s),u.eventManager=u.createEventManager(s),u.syncEngine=u.createSyncEngine(s,!r.synchronizeTabs),u.sharedClientState.onlineStateHandler=d=>P_(u.syncEngine,d,1),u.remoteStore.remoteSyncer.handleCredentialChange=vv.bind(null,u.syncEngine),yield h(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Mr}createDatastore(r){const s=nc(r.databaseInfo.databaseId),u=new Sh(r.databaseInfo);return new Tg(r.authCredentials,r.appCheckCredentials,u,s)}createRemoteStore(r){return u=this.localStore,d=this.datastore,g=r.asyncQueue,w=s=>P_(this.syncEngine,s,0),S=Eg.D()?new Eg:new Uf,new Ag(u,d,g,w,S);var u,d,g,w,S}createSyncEngine(r,s){return function(d,g,w,S,O,H,q){const le=new Sg(d,g,w,S,O,H);return q&&(le.Qa=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){var r=this;return(0,_e.A)(function*(){var s,u,d;yield(d=(0,_e.A)(function*(w){const S=Ze(w);$e("RemoteStore","RemoteStore shutting down."),S.L_.add(5),yield Aa(S),S.k_.shutdown(),S.q_.set("Unknown")}),function g(w){return d.apply(this,arguments)})(r.remoteStore),null===(s=r.datastore)||void 0===s||s.terminate(),null===(u=r.eventManager)||void 0===u||u.terminate()})()}}return a.provider={build:()=>new a},a})();function Lh(a,e=10240){let r=0;return{read:()=>(0,_e.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,_e.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Fh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class Kg{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Xn,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,_e.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,_e.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,_e.A)(function*(){const r=yield e.nu();if(null===r)return null;const s=e.eu.decode(r),u=Number(s);isNaN(u)&&e.ru(`length string (${s}) is not valid number`);const d=yield e.iu(u);return new qf(JSON.parse(d),r.length+u)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,_e.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const r=e.su();r<0&&e.ru("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}iu(e){var r=this;return(0,_e.A)(function*(){for(;r.buffer.length<e;)(yield r.ou())&&r.ru("Reached the end of bundle when more is expected.");const s=r.eu.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,_e.A)(function*(){const r=yield e.Xa.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class Av{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,_e.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new qe(Re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(u=(0,_e.A)(function*(g,w){const S=Ze(g),O={documents:w.map(xe=>_a(S.serializer,xe))},H=yield S.Lo("BatchGetDocuments",S.serializer.databaseId,Xt.emptyPath(),O,w.length),q=new Map;H.forEach(xe=>{const it=function b(a,e){return"found"in e?function(s,u){gt(!!u.found);const d=Ks(s,u.found.name),g=rr(u.found.updateTime),w=u.found.createTime?rr(u.found.createTime):ct.min(),S=new ln({mapValue:{fields:u.found.fields}});return Nn.newFoundDocument(d,g,w,S)}(a,e):"missing"in e?function(s,u){gt(!!u.missing),gt(!!u.readTime);const d=Ks(s,u.missing),g=rr(u.readTime);return Nn.newNoDocument(d,g)}(a,e):ht()}(S.serializer,xe);q.set(it.key.toString(),it)});const le=[];return w.forEach(xe=>{const it=q.get(xe.toString());gt(!!it),le.push(it)}),le}),function d(g,w){return u.apply(this,arguments)})(r.datastore,e);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const d=It.fromPath(u);e.mutations.push(new fa(d,e.precondition(d)))}),yield(s=(0,_e.A)(function*(d,g){const w=Ze(d),S={writes:g.map(O=>z(w.serializer,O))};yield w.Mo("Commit",w.serializer.databaseId,Xt.emptyPath(),S)}),function u(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw ht();r=ct.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new qe(Re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(ct.min())?_r.exists(!1):_r.updateTime(r):_r.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(ct.min()))throw new qe(Re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(r)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cl{constructor(e,r,s,u,d){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=u,this.deferred=d,this._u=s.maxAttempts,this.t_=new _d(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,_e.A)(function*(){const r=new Av(e.datastore),s=e.cu(r);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.lu(d)}))}).catch(u=>{e.lu(u)})}))}cu(e){try{const r=this.updateFunction(e);return!Ie(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!ss(r)}return!1}}class Dv{constructor(e,r,s,u,d){var g=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=Le.UNAUTHENTICATED,this.clientId=to.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(s,function(){var w=(0,_e.A)(function*(S){$e("FirestoreClient","Received user=",S.uid),yield g.authCredentialListener(S),g.user=S});return function(S){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>($e("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const u=Ee(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function qg(a,e){return ip.apply(this,arguments)}function ip(){return ip=(0,_e.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,_e.A)(function*(d){s.isEqual(d)||(yield Eh(e.localStore,d),s=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),ip.apply(this,arguments)}function Qg(a,e){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,_e.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Xg(a);$e("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>m(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>m(e.remoteStore,u)),a._onlineComponents=e})).apply(this,arguments)}function Xg(a){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,_e.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qg(a,a._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(u=e).name?u.code===Re.FAILED_PRECONDITION||u.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw e;Hn("Error using user provided cache. Falling back to memory cache: "+e),yield qg(a,new Md)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield qg(a,new Md);var u;return a._offlineComponents})).apply(this,arguments)}function sp(a){return op.apply(this,arguments)}function op(){return(op=(0,_e.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield Qg(a,a._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield Qg(a,new ul))),a._onlineComponents})).apply(this,arguments)}function Cv(a){return Xg(a).then(e=>e.persistence)}function Vh(a){return Xg(a).then(e=>e.localStore)}function Nd(a){return sp(a).then(e=>e.remoteStore)}function ll(a){return sp(a).then(e=>e.syncEngine)}function dl(a){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,_e.A)(function*(a){const e=yield sp(a),r=e.eventManager;return r.onListen=Nh.bind(null,e.syncEngine),r.onUnlisten=ep.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=C_.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Dd.bind(null,e.syncEngine),r})).apply(this,arguments)}function em(a,e,r={}){const s=new Xn;return a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return function(d,g,w,S,O){const H=new Fh({next:le=>{H.Za(),g.enqueueAndForget(()=>cc(d,q));const xe=le.docs.has(w);!xe&&le.fromCache?O.reject(new qe(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):xe&&le.fromCache&&S&&"server"===S.source?O.reject(new qe(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(le)},error:le=>O.reject(le)}),q=new sl($i(w.path),H,{includeMetadataChanges:!0,_a:!0});return lu(d,q)}(yield dl(a),a.asyncQueue,e,r,s)})),s.promise}function Sv(a,e,r={}){const s=new Xn;return a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return function(d,g,w,S,O){const H=new Fh({next:le=>{H.Za(),g.enqueueAndForget(()=>cc(d,q)),le.fromCache&&"server"===S.source?O.reject(new qe(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(le)},error:le=>O.reject(le)}),q=new sl(w,H,{includeMetadataChanges:!0,_a:!0});return lu(d,q)}(yield dl(a),a.asyncQueue,e,r,s)})),s.promise}function up(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const Bh=new Map;function rm(a,e,r){if(!r)throw new qe(Re.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function cp(a,e,r,s){if(!0===e&&!0===s)throw new qe(Re.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function jh(a){if(!It.isDocumentKey(a))throw new qe(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Xo(a){if(It.isDocumentKey(a))throw new qe(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function pu(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":ht()}function Fn(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new qe(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=pu(a);throw new qe(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function $_(a,e){if(e<=0)throw new qe(Re.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class H_{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new qe(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qe(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=up(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,r,s,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qe(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new ir;switch(s.type){case"firstParty":return new fr(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new qe(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,_e.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Bh.get(r);s&&($e("ComponentProvider","Removing Datastore"),Bh.delete(r),s.terminate())}(this),Promise.resolve()}}class Gi{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Nr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}}class Da extends Gi{constructor(e,r,s){super(e,r,$i(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new It(e))}withConverter(e){return new Da(this.firestore,e,this._path)}}function lp(a,e,...r){if(a=(0,ke.Ku)(a),rm("collection","path",e),a instanceof xd){const s=Xt.fromString(e,...r);return Xo(s),new Da(a,null,s)}{if(!(a instanceof Nr||a instanceof Da))throw new qe(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Xt.fromString(e,...r));return Xo(s),new Da(a.firestore,null,s)}}function dp(a,e,...r){if(a=(0,ke.Ku)(a),1===arguments.length&&(e=to.newId()),rm("doc","path",e),a instanceof xd){const s=Xt.fromString(e,...r);return jh(s),new Nr(a,null,new It(s))}{if(!(a instanceof Nr||a instanceof Da))throw new qe(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Xt.fromString(e,...r));return jh(s),new Nr(a.firestore,a instanceof Da?a.converter:null,new It(s))}}function im(a,e){return a=(0,ke.Ku)(a),e=(0,ke.Ku)(e),(a instanceof Nr||a instanceof Da)&&(e instanceof Nr||e instanceof Da)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function $h(a,e){return a=(0,ke.Ku)(a),e=(0,ke.Ku)(e),a instanceof Gi&&e instanceof Gi&&a.firestore===e.firestore&&ws(a._query,e._query)&&a.converter===e.converter}class Mv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _d(this,"async_queue_retry"),this.Vu=()=>{const s=Go();s&&$e("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=Go();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Go();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,_e.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(r){if(!gi(r))throw r;$e("AsyncQueue","Operation failed with retryable error: "+r)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(s=>{throw this.Eu=s,this.du=!1,Ot("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const u=ie.createAndSchedule(this,e,r,s,d=>this.yu(d));return this.Tu.push(u),u}fu(){this.Eu&&ht()}verifyOperationInProgress(){}wu(){var e=this;return(0,_e.A)(function*(){let r;do{r=e.mu,yield r}while(r!==e.mu)})()}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function W_(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class Nv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rr extends xd{constructor(e,r,s,u){super(e,r,s,u),this.type="firestore",this._queue=new Mv,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,_e.A)(function*(){if(e._firestoreClient){const r=e._firestoreClient.terminate();e._queue=new Mv(r),e._firestoreClient=void 0,yield r}})()}}function Lr(a){if(a._terminated)throw new qe(Re.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||hp(a),a._firestoreClient}function hp(a){var e,r,s;const u=a._freezeSettings(),d=(S=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new ys(a._databaseId,S,a._persistenceKey,(H=u).host,H.ssl,H.experimentalForceLongPolling,H.experimentalAutoDetectLongPolling,up(H.experimentalLongPollingOptions),H.useFetchStreams));var S,H;a._componentsProvider||!(null===(r=u.localCache)||void 0===r)&&r._offlineComponentProvider&&!(null===(s=u.localCache)||void 0===s)&&s._onlineComponentProvider&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new Dv(a._authCredentials,a._appCheckCredentials,a._queue,d,a._componentsProvider&&function(w){const S=w?._online.build();return{_offline:w?._offline.build(S),_online:S}}(a._componentsProvider))}function Hh(){return(Hh=(0,_e.A)(function*(a){Hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=a._freezeSettings();fp(a,ul.provider,{build:r=>new F_(r,e.cacheSizeBytes)})})).apply(this,arguments)}function fp(a,e,r){if((a=Fn(a,Rr))._firestoreClient||a._terminated)throw new qe(Re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new qe(Re.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:e,_offline:r},hp(a)}class Ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ca(_t.fromBase64String(e))}catch(r){throw new qe(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ca(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ba{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new qe(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gl{constructor(e){this._methodName=e}}class Ld{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new qe(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new qe(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}class Gh{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,u){if(s.length!==u.length)return!1;for(let d=0;d<s.length;++d)if(s[d]!==u[d])return!1;return!0}(this._values,e._values)}}const Ov=/^__.*__$/;class kv{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new po(e,this.data,this.fieldMask,r,this.fieldTransforms):new nr(e,this.data,r,this.fieldTransforms)}}class Lv{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new po(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function K_(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class ml{constructor(e,r,s,u,d,g){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===d&&this.vu(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ml(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.Ou(e),u}Nu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.vu(),u}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(K_(this.Cu)&&Ov.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class um{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||nc(e)}Qu(e,r,s,u=!1){return new ml({Cu:e,methodName:r,qu:s,path:On.emptyPath(),xu:!1,ku:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _l(a){const e=a._freezeSettings(),r=nc(a._databaseId);return new um(a._databaseId,!!e.ignoreUndefinedProperties,r)}function Kh(a,e,r,s,u,d={}){const g=a.Qu(d.merge||d.mergeFields?2:0,e,r,u);hm("Data must be an object, but it was:",g,s);const w=Il(s,g);let S,O;if(d.merge)S=new lr(g.fieldMask),O=g.fieldTransforms;else if(d.mergeFields){const H=[];for(const q of d.mergeFields){const le=Vd(e,q,r);if(!g.contains(le))throw new qe(Re.INVALID_ARGUMENT,`Field '${le}' is specified in your field mask but missing from your input data.`);fm(H,le)||H.push(le)}S=new lr(H),O=g.fieldTransforms.filter(q=>S.covers(q.field))}else S=null,O=g.fieldTransforms;return new kv(new ln(w),S,O)}class yl extends gl{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yl}}function qh(a,e,r){return new ml({Cu:3,qu:e.settings.qu,methodName:a._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cm extends gl{_toFieldTransform(e){return new zi(e.path,new tn)}isEqual(e){return e instanceof cm}}class mp extends gl{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=qh(this,e,!0),s=this.Ku.map(d=>vl(d,r)),u=new Yn(s);return new zi(e.path,u)}isEqual(e){return e instanceof mp&&(0,ke.bD)(this.Ku,e.Ku)}}class lm extends gl{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=qh(this,e,!0),s=this.Ku.map(d=>vl(d,r)),u=new tr(s);return new zi(e.path,u)}isEqual(e){return e instanceof lm&&(0,ke.bD)(this.Ku,e.Ku)}}class _p extends gl{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new zr(e.serializer,rt(e.serializer,this.$u));return new zi(e.path,r)}isEqual(e){return e instanceof _p&&this.$u===e.$u}}function q_(a,e,r,s){const u=a.Qu(1,e,r);hm("Data must be an object, but it was:",u,s);const d=[],g=ln.empty();xi(s,(S,O)=>{const H=yp(e,S,r);O=(0,ke.Ku)(O);const q=u.Nu(H);if(O instanceof yl)d.push(H);else{const le=vl(O,q);null!=le&&(d.push(H),g.set(H,le))}});const w=new lr(d);return new Lv(g,w,u.fieldTransforms)}function dm(a,e,r,s,u,d){const g=a.Qu(1,e,r),w=[Vd(e,s,r)],S=[u];if(d.length%2!=0)throw new qe(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let le=0;le<d.length;le+=2)w.push(Vd(e,d[le])),S.push(d[le+1]);const O=[],H=ln.empty();for(let le=w.length-1;le>=0;--le)if(!fm(O,w[le])){const xe=w[le];let it=S[le];it=(0,ke.Ku)(it);const Et=g.Nu(xe);if(it instanceof yl)O.push(xe);else{const pt=vl(it,Et);null!=pt&&(O.push(xe),H.set(xe,pt))}}const q=new lr(O);return new Lv(H,q,g.fieldTransforms)}function Qh(a,e,r,s=!1){return vl(r,a.Qu(s?4:3,e))}function vl(a,e){if(Fd(a=(0,ke.Ku)(a)))return hm("Unsupported field value:",e,a),Il(a,e);if(a instanceof gl)return function(s,u){if(!K_(u.Cu))throw u.Bu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Bu(`${s._methodName}() is not currently supported inside arrays`);const d=s._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(s,u){const d=[];let g=0;for(const w of s){let S=vl(w,u.Lu(g));null==S&&(S={nullValue:"NULL_VALUE"}),d.push(S),g++}return{arrayValue:{values:d}}}(a,e)}return function(s,u){if(null===(s=(0,ke.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return rt(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const d=Sn.fromDate(s);return{timestampValue:Ar(u.serializer,d)}}if(s instanceof Sn){const d=new Sn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ar(u.serializer,d)}}if(s instanceof Ld)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ca)return{bytesValue:Ds(u.serializer,s._byteString)};if(s instanceof Nr){const d=u.databaseId,g=s.firestore._databaseId;if(!g.isEqual(d))throw u.Bu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:as(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof Gh)return w=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(S=>{if("number"!=typeof S)throw w.Bu("VectorValues must only contain numeric values.");return Z(w.serializer,S)})}}}}};var w;throw u.Bu(`Unsupported field value: ${pu(s)}`)}(a,e)}function Il(a,e){const r={};return br(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(a,(s,u)=>{const d=vl(u,e.Mu(s));null!=d&&(r[s]=d)}),{mapValue:{fields:r}}}function Fd(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Sn||a instanceof Ld||a instanceof Ca||a instanceof Nr||a instanceof gl||a instanceof Gh)}function hm(a,e,r){if(!Fd(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=pu(r);throw e.Bu("an object"===s?a+" a custom object":a+" "+s)}var u}function Vd(a,e,r){if((e=(0,ke.Ku)(e))instanceof ba)return e._internalPath;if("string"==typeof e)return yp(a,e);throw vp("Field path arguments must be of type string or ",a,!1,void 0,r)}const Fv=new RegExp("[~\\*/\\[\\]]");function yp(a,e,r){if(e.search(Fv)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new ba(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function vp(a,e,r,s,u){const d=s&&!s.isEmpty(),g=void 0!==u;let w=`Function ${e}() called with invalid data`;r&&(w+=" (via `toFirestore()`)"),w+=". ";let S="";return(d||g)&&(S+=" (found",d&&(S+=` in field ${s}`),g&&(S+=` in document ${u}`),S+=")"),new qe(Re.INVALID_ARGUMENT,w+a+S)}function fm(a,e){return a.some(r=>r.isEqual(e))}class Ud{constructor(e,r,s,u,d){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class pm extends Ud{data(){return super.data()}}function gm(a,e){return"string"==typeof e?yp(a,e):e instanceof ba?e._internalPath:e._delegate._internalPath}function Ip(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new qe(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ep{}class Yh extends Ep{}function dc(a,e,...r){let s=[];e instanceof Ep&&s.push(e),s=s.concat(r),function(d){const g=d.filter(S=>S instanceof El).length,w=d.filter(S=>S instanceof Bd).length;if(g>1||g>0&&w>0)throw new qe(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class Bd extends Yh{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new Bd(e,r,s)}_apply(e){const r=this._parse(e);return ym(e._query,r),new Gi(e.firestore,e.converter,Fo(e._query,r))}_parse(e){const r=_l(e.firestore);return function(d,g,w,S,O,H,q){let le;if(O.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new qe(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Zo(q,H);const xe=[];for(const it of q)xe.push(Tp(S,d,it));le={arrayValue:{values:xe}}}else le=Tp(S,d,q)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Zo(q,H),le=Qh(w,"where",q,"in"===H||"not-in"===H);return wn.create(O,H,le)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class El extends Ep{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new El(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:en.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,d){let g=u;const w=d.getFlattenedFilters();for(const S of w)ym(g,S),g=Fo(g,S)}(e._query,r),new Gi(e.firestore,e.converter,Fo(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Q_ extends Yh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Q_(e,r)}_apply(e){const r=function(u,d,g){if(null!==u.startAt)throw new qe(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new qe(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Es(d,g)}(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,function(u,d){const g=u.explicitOrderBy.concat([d]);return new ji(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}class Xh extends Yh{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Xh(e,r,s)}_apply(e){return new Gi(e.firestore,e.converter,lo(e._query,this._limit,this._limitType))}}class mm extends Yh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new mm(e,r,s)}_apply(e){const r=J_(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(d=r,new ji((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class Tl extends Yh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Tl(e,r,s)}_apply(e){const r=J_(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(d=r,new ji((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function J_(a,e,r,s){if(r[0]=(0,ke.Ku)(r[0]),r[0]instanceof Ud)return function(d,g,w,S,O){if(!S)throw new qe(Re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const H=[];for(const q of ai(d))if(q.field.isKeyField())H.push(ti(g,S.key));else{const le=S.data.field(q.field);if(gr(le))throw new qe(Re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===le){const xe=q.field.canonicalString();throw new qe(Re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${xe}' (used as the orderBy) does not exist.`)}H.push(le)}return new Is(H,O)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const u=_l(a.firestore);return function(g,w,S,O,H,q){const le=g.explicitOrderBy;if(H.length>le.length)throw new qe(Re.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const xe=[];for(let it=0;it<H.length;it++){const Et=H[it];if(le[it].field.isKeyField()){if("string"!=typeof Et)throw new qe(Re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof Et}`);if(!Hs(g)&&-1!==Et.indexOf("/"))throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${Et}' contains a slash.`);const pt=g.path.child(Xt.fromString(Et));if(!It.isDocumentKey(pt))throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${pt}' is not because it contains an odd number of segments.`);const Ut=new It(pt);xe.push(ti(w,Ut))}else{const pt=Qh(S,O,Et);xe.push(pt)}}return new Is(xe,q)}(a._query,a.firestore._databaseId,u,e,r,s)}}function Tp(a,e,r){if("string"==typeof(r=(0,ke.Ku)(r))){if(""===r)throw new qe(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hs(e)&&-1!==r.indexOf("/"))throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(Xt.fromString(r));if(!It.isDocumentKey(s))throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ti(a,new It(s))}if(r instanceof Nr)return ti(a,r._key);throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pu(r)}.`)}function Zo(a,e){if(!Array.isArray(a)||0===a.length)throw new qe(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ym(a,e){const r=function(u,d){for(const g of u)for(const w of g.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new qe(Re.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class ey{convertValue(e,r="none"){switch(mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ht()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return xi(e,(u,d)=>{s[u]=this.convertValue(d,r)}),s}convertVectorValue(e){var r,s,u;const d=null===(u=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.map(g=>_n(g.doubleValue));return new Gh(d)}convertGeoPoint(e){return new Ld(_n(e.latitude),_n(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=ts(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Wn(e));default:return null}}convertTimestamp(e){const r=mn(e);return new Sn(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=Xt.fromString(e);gt(qs(s));const u=new jr(s.get(1),s.get(3)),d=new It(s.popFirst(5));return u.isEqual(r)||Ot(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function ii(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class jv extends ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,r)}}class fc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gu extends Ud{constructor(e,r,s,u,d,g){super(e,r,s,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class jd extends gu{data(e={}){return super.data(e)}}class mu{constructor(e,r,s,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new fc(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new jd(this._firestore,this._userDataWriter,s.key,s,new fc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qe(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new jd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new fc(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const S=new jd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new fc(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let O=-1,H=-1;return 0!==w.type&&(O=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),H=g.indexOf(w.doc.key)),{type:zv(w.type),doc:S,oldIndex:O,newIndex:H}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function zv(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function ry(a,e){return a instanceof gu&&e instanceof gu?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof mu&&e instanceof mu&&a._firestore===e._firestore&&$h(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class _u extends ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,r)}}function vm(a,e,r){a=Fn(a,Nr);const s=Fn(a.firestore,Rr),u=ii(a.converter,e,r);return wl(s,[Kh(_l(s),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,_r.none())])}function Im(a,e,r,...s){a=Fn(a,Nr);const u=Fn(a.firestore,Rr),d=_l(u);let g;return g="string"==typeof(e=(0,ke.Ku)(e))||e instanceof ba?dm(d,"updateDoc",a._key,e,r,s):q_(d,"updateDoc",a._key,e),wl(u,[g.toMutation(a._key,_r.exists(!0))])}function Zh(a,...e){var r,s,u;a=(0,ke.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||W_(e[g])||(d=e[g],g++);const w={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(W_(e[g])){const q=e[g];e[g]=null===(r=q.next)||void 0===r?void 0:r.bind(q),e[g+1]=null===(s=q.error)||void 0===s?void 0:s.bind(q),e[g+2]=null===(u=q.complete)||void 0===u?void 0:u.bind(q)}let S,O,H;if(a instanceof Nr)O=Fn(a.firestore,Rr),H=$i(a._key.path),S={next:q=>{e[g]&&e[g](Tm(O,a,q))},error:e[g+1],complete:e[g+2]};else{const q=Fn(a,Gi);O=Fn(q.firestore,Rr),H=q._query;const le=new _u(O);S={next:xe=>{e[g]&&e[g](new mu(O,le,q,xe))},error:e[g+1],complete:e[g+2]},Ip(a._query)}return function(le,xe,it,Et){const pt=new Fh(Et),Ut=new sl(xe,pt,it);return le.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return lu(yield dl(le),Ut)})),()=>{pt.Za(),le.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return cc(yield dl(le),Ut)}))}}(Lr(O),H,w,S)}function wl(a,e){return function(s,u){const d=new Xn;return s.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return function yv(a,e,r){return S_.apply(this,arguments)}(yield ll(s),u,d)})),d.promise}(Lr(a),e)}function Tm(a,e,r){const s=r.docs.get(e._key),u=new _u(a);return new gu(a,u,e._key,s,new fc(r.hasPendingWrites,r.fromCache),e.converter)}const Zv={maxAttempts:5};class wm{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=_l(e)}set(e,r,s){this._verifyNotCommitted();const u=vu(e,this._firestore),d=ii(u.converter,r,s),g=Kh(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,s);return this._mutations.push(g.toMutation(u._key,_r.none())),this}update(e,r,s,...u){this._verifyNotCommitted();const d=vu(e,this._firestore);let g;return g="string"==typeof(r=(0,ke.Ku)(r))||r instanceof ba?dm(this._dataReader,"WriteBatch.update",d._key,r,s,u):q_(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(g.toMutation(d._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=vu(e,this._firestore);return this._mutations=this._mutations.concat(new Wi(r._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(Re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vu(a,e){if((a=(0,ke.Ku)(a)).firestore!==e)throw new qe(Re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class An extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=_l(r)}get(r){const s=vu(r,this._firestore),u=new jv(this._firestore);return this._transaction.lookup([s._key]).then(d=>{if(!d||1!==d.length)return ht();const g=d[0];if(g.isFoundDocument())return new Ud(this._firestore,u,g.key,g,s.converter);if(g.isNoDocument())return new Ud(this._firestore,u,s._key,null,s.converter);throw ht()})}set(r,s,u){const d=vu(r,this._firestore),g=ii(d.converter,s,u),w=Kh(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,u);return this._transaction.set(d._key,w),this}update(r,s,u,...d){const g=vu(r,this._firestore);let w;return w="string"==typeof(s=(0,ke.Ku)(s))||s instanceof ba?dm(this._dataReader,"Transaction.update",g._key,s,u,d):q_(this._dataReader,"Transaction.update",g._key,s),this._transaction.update(g._key,w),this}delete(r){const s=vu(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=vu(e,this._firestore),s=new _u(this._firestore);return super.get(e).then(u=>new gu(this._firestore,s,r._key,u._document,new fc(!1,!1),r.converter))}}function bp(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qe("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function yy(){if(typeof Uint8Array>"u")throw new qe("unimplemented","Uint8Arrays are not available in this environment.")}function vy(){if(!function ur(){return typeof atob<"u"}())throw new qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){ot=Te.SDK_VERSION,(0,Te._registerComponent)(new Ke.uA("firestore",(s,{instanceIdentifier:u,options:d})=>{const g=s.getProvider("app").getImmediate(),w=new Rr(new an(s.getProvider("auth-internal")),new vr(s.getProvider("app-check-internal")),function(O,H){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new qe(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jr(O.options.projectId,H)}(g,u),g);return d=Object.assign({useFetchStreams:r},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(We,"4.7.3",e),(0,Te.registerVersion)(We,"4.7.3","esm2017")}();class Ki{constructor(e){this._delegate=e}static fromBase64String(e){return vy(),new Ki(Ca.fromBase64String(e))}static fromUint8Array(e){return yy(),new Ki(Ca.fromUint8Array(e))}toBase64(){return vy(),this._delegate.toBase64()}toUint8Array(){return yy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bm(a){return function iI(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class vE{enableIndexedDbPersistence(e,r){return function om(a,e){Hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings();return fp(a,ul.provider,{build:s=>new Gg(s,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function Od(a){return Hh.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function zh(a){if(a._initialized&&!a._terminated)throw new qe(Re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,_e.A)(function*(){try{yield(r=(0,_e.A)(function*(u){if(!Dn.D())return Promise.resolve();const d=u+"main";yield Dn.delete(d)}),function s(u){return r.apply(this,arguments)})(Ju(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Sp{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof jr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Hn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function fl(a,e,r,s={}){var u;const d=(a=Fn(a,xd))._getSettings(),g=`${e}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let w,S;if("string"==typeof s.mockUserToken)w=s.mockUserToken,S=Le.MOCK_USER;else{w=(0,ke.Fy)(s.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new qe(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Le(O)}a._authCredentials=new qt(new Wr(w,S))}}(this._delegate,e,r,s)}enableNetwork(){return function kd(a){return function V_(a){return a.asyncQueue.enqueue((0,_e.A)(function*(){const e=yield Cv(a),r=yield Nd(a);return e.setNetworkEnabled(!0),function(u){const d=Ze(u);return d.L_.delete(0),rc(d)}(r)}))}(Lr(a=Fn(a,Rr)))}(this._delegate)}disableNetwork(){return function am(a){return function bv(a){return a.asyncQueue.enqueue((0,_e.A)(function*(){const e=yield Cv(a),r=yield Nd(a);return e.setNetworkEnabled(!1),(s=(0,_e.A)(function*(d){const g=Ze(d);g.L_.add(0),yield Aa(g),g.q_.set("Offline")}),function u(d){return s.apply(this,arguments)})(r);var s}))}(Lr(a=Fn(a,Rr)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,cp("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pp(a){return function(r){const s=new Xn;return r.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return function ol(a,e){return Og.apply(this,arguments)}(yield ll(r),s)})),s.promise}(Lr(a=Fn(a,Rr)))}(this._delegate)}onSnapshotsInSync(e){return function sy(a,e){return function Rv(a,e){const r=new Fh(e);return a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return u=yield dl(a),d=r,Ze(u).Y_.add(d),void d.next();var u,d})),()=>{r.Za(),a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return u=yield dl(a),d=r,void Ze(u).Y_.delete(d);var u,d}))}}(Lr(a=Fn(a,Rr)),W_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gc(this,lp(this._delegate,e))}catch(r){throw Cs(r,"collection()","Firestore.collection()")}}doc(e){try{return new wo(this,dp(this._delegate,e))}catch(r){throw Cs(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bs(this,function z_(a,e){if(a=Fn(a,xd),rm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qe(Re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(a,null,(s=e,new ji(Xt.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw Cs(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uy(a,e,r){a=Fn(a,Rr);const s=Object.assign(Object.assign({},Zv),r);return function(d){if(d.maxAttempts<1)throw new qe(Re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,g,w){const S=new Xn;return d.asyncQueue.enqueueAndForget((0,_e.A)(function*(){const O=yield function Zg(a){return sp(a).then(e=>e.datastore)}(d);new cl(d.asyncQueue,O,w,g,S).au()})),S.promise}(Lr(a),u=>e(new An(a,u)),s)}(this._delegate,r=>e(new Iy(this,r)))}batch(){return Lr(this._delegate),new Ey(new wm(this._delegate,e=>wl(this._delegate,e)))}loadBundle(e){return function gp(a,e){const r=Lr(a=Fn(a,Rr)),s=new Nv;return function nm(a,e,r,s){const u=function(g,w){let S;return S="string"==typeof g?xc().encode(g):g,H=function(H,q){if(H instanceof Uint8Array)return Lh(H,q);if(H instanceof ArrayBuffer)return Lh(new Uint8Array(H),q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new Kg(H,w);var H}(r,nc(e));a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){!function L_(a,e,r){const s=Ze(a);var u;(u=(0,_e.A)(function*(g,w,S){try{const O=yield w.getMetadata();if(yield function(it,Et){const pt=Ze(it),Ut=rr(Et.createTime);return pt.persistence.runTransaction("hasNewerBundle","readonly",Gt=>pt.Gr.getBundleMetadata(Gt,Et.id)).then(Gt=>!!Gt&&Gt.createTime.compareTo(Ut)>=0)}(g.localStore,O))return yield w.close(),S._completeWith({taskState:"Success",documentsLoaded:(it=O).totalDocuments,bytesLoaded:it.totalBytes,totalDocuments:it.totalDocuments,totalBytes:it.totalBytes}),Promise.resolve(new Set);S._updateProgress(Mh(O));const H=new Qf(O,g.localStore,w.serializer);let q=yield w.Ua();for(;q;){const xe=yield H.la(q);xe&&S._updateProgress(xe),q=yield w.Ua()}const le=yield H.complete();return yield hu(g,le.Ia,void 0),yield function(it,Et){const pt=Ze(it);return pt.persistence.runTransaction("Save bundle","readwrite",Ut=>pt.Gr.saveBundleMetadata(Ut,Et))}(g.localStore,O),S._completeWith(le.progress),Promise.resolve(le.Pa)}catch(O){return Hn("SyncEngine",`Loading bundle failed with ${O}`),S._failWith(O),Promise.resolve(new Set)}var it}),function d(g,w,S){return u.apply(this,arguments)})(s,e,r).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield ll(a),u,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function cE(a,e){return function B_(a,e){return a.asyncQueue.enqueue((0,_e.A)(function*(){return function(s,u){const d=Ze(s);return d.persistence.runTransaction("Get named query","readonly",g=>d.Gr.getNamedQuery(g,u))}(yield Vh(a),e)}))}(Lr(a=Fn(a,Rr)),e).then(r=>r?new Gi(a,null,r.query):null)}(this._delegate,e).then(r=>r?new bs(this,r):null)}}class tf extends ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(new Ca(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return wo.forKey(r,this.firestore,null)}}class Iy{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new tf(e)}get(e){const r=Al(e);return this._delegate.get(r).then(s=>new nf(this._firestore,new gu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const u=Al(e);return s?(bp("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=Al(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=Al(e);return this._delegate.delete(r),this}}class Ey{constructor(e){this._delegate=e}set(e,r,s){const u=Al(e);return s?(bp("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=Al(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=Al(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class pc{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new jd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rf(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=pc.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let d=u.get(r);return d||(d=new pc(e,new tf(e),r),u.set(r,d)),d}}pc.INSTANCES=new WeakMap;class wo{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new tf(e)}static forPath(e,r,s){if(e.length%2!=0)throw new qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wo(r,new Nr(r._delegate,s,new It(e)))}static forKey(e,r,s){return new wo(r,new Nr(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new gc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gc(this.firestore,lp(this._delegate,e))}catch(r){throw Cs(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ke.Ku)(e))instanceof Nr&&im(this._delegate,e)}set(e,r){r=bp("DocumentReference.set",r);try{return r?vm(this._delegate,e,r):vm(this._delegate,e)}catch(s){throw Cs(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?Im(this._delegate,e):Im(this._delegate,e,r,...s)}catch(u){throw Cs(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Em(a){return wl(Fn(a.firestore,Rr),[new Wi(a._key,_r.none())])}(this._delegate)}onSnapshot(...e){const r=Rp(e),s=Ty(e,u=>new nf(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Zh(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function $d(a){a=Fn(a,Nr);const e=Fn(a.firestore,Rr),r=Lr(e),s=new _u(e);return function U_(a,e){const r=new Xn;return a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return(s=(0,_e.A)(function*(d,g,w){try{const S=yield function(H,q){const le=Ze(H);return le.persistence.runTransaction("read document","readonly",xe=>le.localDocuments.getDocument(xe,q))}(d,g);S.isFoundDocument()?w.resolve(S):S.isNoDocument()?w.resolve(null):w.reject(new qe(Re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const O=Ee(S,`Failed to get document '${g} from cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield Vh(a),e,r);var s})),r.promise}(r,a._key).then(u=>new gu(e,s,a._key,u,new fc(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function yu(a){a=Fn(a,Nr);const e=Fn(a.firestore,Rr);return em(Lr(e),a._key,{source:"server"}).then(r=>Tm(e,a,r))}(this._delegate):function iy(a){a=Fn(a,Nr);const e=Fn(a.firestore,Rr);return em(Lr(e),a._key).then(r=>Tm(e,a,r))}(this._delegate),r.then(s=>new nf(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new wo(this.firestore,this._delegate.withConverter(e?pc.getInstance(this.firestore,e):null))}}function Cs(a,e,r){return a.message=a.message.replace(e,r),a}function Rp(a){for(const e of a)if("object"==typeof e&&!bm(e))return e;return{}}function Ty(a,e){var r,s;let u;return u=bm(a[0])?a[0]:bm(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class nf{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return ry(this._delegate,e._delegate)}}class rf extends nf{data(e){const r=this._delegate.data(e);return this._delegate._converter||function Lt(a,e){a||ht()}(void 0!==r),r}}class bs{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new tf(e)}where(e,r,s){try{return new bs(this.firestore,dc(this._delegate,function Vv(a,e,r){const s=e,u=gm("where",a);return Bd._create(u,s,r)}(e,r,s)))}catch(u){throw Cs(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new bs(this.firestore,dc(this._delegate,function Y_(a,e="asc"){const r=e,s=gm("orderBy",a);return Q_._create(s,r)}(e,r)))}catch(s){throw Cs(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bs(this.firestore,dc(this._delegate,function Jo(a){return $_("limit",a),Xh._create("limit",a,"F")}(e)))}catch(r){throw Cs(r,"limit()","Query.limit()")}}limitToLast(e){try{return new bs(this.firestore,dc(this._delegate,function X_(a){return $_("limitToLast",a),Xh._create("limitToLast",a,"L")}(e)))}catch(r){throw Cs(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bs(this.firestore,dc(this._delegate,function _m(...a){return mm._create("startAt",a,!0)}(...e)))}catch(r){throw Cs(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bs(this.firestore,dc(this._delegate,function hc(...a){return mm._create("startAfter",a,!1)}(...e)))}catch(r){throw Cs(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bs(this.firestore,dc(this._delegate,function Uv(...a){return Tl._create("endBefore",a,!1)}(...e)))}catch(r){throw Cs(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bs(this.firestore,dc(this._delegate,function Bv(...a){return Tl._create("endAt",a,!0)}(...e)))}catch(r){throw Cs(r,"endAt()","Query.endAt()")}}isEqual(e){return $h(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function Wv(a){a=Fn(a,Gi);const e=Fn(a.firestore,Rr),r=Lr(e),s=new _u(e);return function ap(a,e){const r=new Xn;return a.asyncQueue.enqueueAndForget((0,_e.A)(function*(){return(s=(0,_e.A)(function*(d,g,w){try{const S=yield ud(d,g,!0),O=new Yf(g,S.Ts),H=O.ma(S.documents),q=O.applyChanges(H,!1);w.resolve(q.snapshot)}catch(S){const O=Ee(S,`Failed to execute query '${g} against cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield Vh(a),e,r);var s})),r.promise}(r,a._query).then(u=>new mu(e,s,a,u))}(this._delegate):"server"===e?.source?function Gv(a){a=Fn(a,Gi);const e=Fn(a.firestore,Rr),r=Lr(e),s=new _u(e);return Sv(r,a._query,{source:"server"}).then(u=>new mu(e,s,a,u))}(this._delegate):function Hd(a){a=Fn(a,Gi);const e=Fn(a.firestore,Rr),r=Lr(e),s=new _u(e);return Ip(a._query),Sv(r,a._query).then(u=>new mu(e,s,a,u))}(this._delegate),r.then(s=>new Ao(this.firestore,new mu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=Rp(e),s=Ty(e,u=>new Ao(this.firestore,new mu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Zh(this._delegate,r,s)}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?pc.getInstance(this.firestore,e):null))}}class oI{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new rf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ao{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new oI(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new rf(this._firestore,s))})}isEqual(e){return ry(this._delegate,e._delegate)}}class gc extends bs{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wo(this.firestore,e):null}doc(e){try{return new wo(this.firestore,void 0===e?dp(this._delegate):dp(this._delegate,e))}catch(r){throw Cs(r,"doc()","CollectionReference.doc()")}}add(e){return function Jh(a,e){const r=Fn(a.firestore,Rr),s=dp(a),u=ii(a.converter,e);return wl(r,[Kh(_l(a.firestore),"addDoc",s._key,u,null!==a.converter,{}).toMutation(s._key,_r.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new wo(this.firestore,r))}isEqual(e){return im(this._delegate,e._delegate)}withConverter(e){return new gc(this.firestore,this._delegate.withConverter(e?pc.getInstance(this.firestore,e):null))}}function Al(a){return Fn(a,Nr)}class Pp{constructor(...e){this._delegate=new ba(...e)}static documentId(){return new Pp(On.keyField().canonicalString())}isEqual(e){return(e=(0,ke.Ku)(e))instanceof ba&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function zd(){return new cm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dl(e)}static delete(){const e=function cy(){return new yl("deleteField")}();return e._methodName="FieldValue.delete",new Dl(e)}static arrayUnion(...e){const r=function ly(...a){return new mp("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new Dl(r)}static arrayRemove(...e){const r=function eI(...a){return new lm("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new Dl(r)}static increment(e){const r=function Ap(a){return new _p("increment",a)}(e);return r._methodName="FieldValue.increment",new Dl(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wy={Firestore:Sp,GeoPoint:Ld,Timestamp:Sn,Blob:Ki,Transaction:Iy,WriteBatch:Ey,DocumentReference:wo,DocumentSnapshot:nf,Query:bs,QueryDocumentSnapshot:rf,QuerySnapshot:Ao,CollectionReference:gc,FieldPath:Pp,FieldValue:Dl,setLogLevel:function sI(a){!function zt(a){mt.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Mp(a){(function Ay(a,e){a.INTERNAL.registerComponent(new Ke.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},wy)))})(a,(e,r)=>new Sp(e,r,new vE)),a.registerVersion("@firebase/firestore-compat","0.3.38")}(Vt.A);var Sm=U(7935);function Rm(a,e){return function IE(a,e=de.E){return new ve.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Np(a,e){return Rm(a,e).pipe((0,Ye.T)(r=>({payload:r,type:"query"})))}class Pm{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:u,query:d}=uI(s,r);return new xm(u,d,this.afs)}snapshotChanges(){return function Dy(a,e){return Rm(a,e).pipe((0,X.Z)(void 0),tt(),(0,Ye.T)(r=>{const[s,u]=r;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(re.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ye.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,He.H)(this.ref.get(e)).pipe(re.U0)}}function Wd(a,e){return Np(a,e).pipe((0,X.Z)(void 0),tt(),(0,Ye.T)(r=>{const[s,u]=r,d=u.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,S)=>{const O=d.find(q=>q.doc.ref.isEqual(w.ref)),H=s?.payload.docs.find(q=>q.ref.isEqual(w.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(w.metadata)||!O&&H&&JSON.stringify(H.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:w}})}),g}))}function Sa(a,e,r){return Wd(a,r).pipe((0,yt.S)((s,u)=>function aI(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function Nm(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Mm(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Mm(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Mm(a,e.oldIndex,1)}return a}(a,s))}),a}(s,u.map(d=>d.payload),e),[]),(0,st.F)(),(0,Ye.T)(s=>s.map(u=>({type:u.type,payload:u}))))}function Mm(a,e,r,...s){const u=a.slice();return u.splice(e,r,...s),u}function Cy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class xm{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Wd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Ye.T)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),r.pipe((0,X.Z)(void 0),tt(),(0,vt.p)(([s,u])=>u.length>0||!s),(0,Ye.T)(([,s])=>s),re.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,yt.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Cy(e);return Sa(this.query,r,this.afs.schedulers.outsideAngular).pipe(re.U0)}valueChanges(e={}){return Np(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),re.U0)}get(e){return(0,He.H)(this.query.get(e)).pipe(re.U0)}add(e){return this.ref.add(e)}doc(e){return new Pm(this.ref.doc(e),this.afs)}}class by{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Wd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,vt.p)(r=>r.length>0),re.U0):Wd(this.query,this.afs.schedulers.outsideAngular).pipe(re.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,yt.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Cy(e);return Sa(this.query,r,this.afs.schedulers.outsideAngular).pipe(re.U0)}valueChanges(e={}){return Np(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.T)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),re.U0)}get(e){return(0,He.H)(this.query.get(e)).pipe(re.U0)}}const sf=new ee.nKC("angularfire2.enableFirestorePersistence"),Gd=new ee.nKC("angularfire2.firestore.persistenceSettings"),Sy=new ee.nKC("angularfire2.firestore.settings"),xp=new ee.nKC("angularfire2.firestore.use-emulator");function uI(a,e=(r=>r)){return{query:e(a),ref:a}}let Ry=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,u,d,g,w,S,O,H,q,le,xe,it,Et,pt,Ut,Gt){this.schedulers=S;const Bt=(0,Q.iB)(r,w,s),rn=H;q&&(0,G.gF)(Bt,w,le,it,Et,pt,xe,Ut),[this.firestore,this.persistenceEnabled$]=(0,Q.BM)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const Vn=w.runOutsideAngular(()=>Bt.firestore());if(d&&Vn.settings(d),rn&&Vn.useEmulator(...rn),u&&!(0,v.Vy)(g)){const Pn=()=>{try{return(0,He.H)(Vn.enablePersistence(O||void 0).then(()=>!0,()=>!1))}catch(ye){return typeof console<"u"&&console.warn(ye),(0,Se.of)(!1)}};return[Vn,w.runOutsideAngular(Pn)]}return[Vn,(0,Se.of)(!1)]},[d,rn,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:g}=uI(u,s),w=this.schedulers.ngZone.run(()=>d);return new xm(w,g,this)}collectionGroup(r,s){const u=s||(g=>g),d=this.firestore.collectionGroup(r);return new by(u(d),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new Pm(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(ee.KVO(Q.rx),ee.KVO(Q.uP,8),ee.KVO(sf,8),ee.KVO(Sy,8),ee.KVO(ee.Agw),ee.KVO(ee.SKi),ee.KVO(re.u0),ee.KVO(Gd,8),ee.KVO(xp,8),ee.KVO(G.DS,8),ee.KVO(G.CP,8),ee.KVO(G.yy,8),ee.KVO(G.ZP,8),ee.KVO(G.$z,8),ee.KVO(G.AU,8),ee.KVO(G.UB,8),ee.KVO(re.Jv,8))};static \u0275prov=ee.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Py=(()=>{class a{constructor(){Sm.A.registerVersion("angularfire",re.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:sf,useValue:!0},{provide:Gd,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=ee.$C({type:a});static \u0275inj=ee.G2t({providers:[Ry]})}return a})()},9253:(Rt,Be,U)=>{U.d(Be,{BM:()=>Ye,Gt:()=>G,bf:()=>tt,e7:()=>de,iB:()=>X,rx:()=>He,uP:()=>Se});var v=U(7705),ee=U(1825),re=U(7935);const Q=["ngOnDestroy"],G=(dt,Vt,_e,Te={})=>new Proxy(dt,{get:(Ke,ue)=>_e.runOutsideAngular(()=>{if(dt[ue])return Te?.spy?.get&&Te.spy.get(ue,dt[ue]),dt[ue];if(Q.indexOf(ue)>-1)return()=>{};const ke=Vt.toPromise().then(Oe=>{const Je=Oe?.[ue];return"function"==typeof Je?Je.bind(Oe):Je?.then?Je.then(wt=>_e.run(()=>wt)):_e.run(()=>Je)});return new Proxy(()=>{},{get:(Oe,Je)=>ke[Je],apply:(Oe,Je,wt)=>ke.then(je=>{const Ht=je?.(...wt);return Te?.spy?.apply&&Te.spy.apply(ue,wt,Ht),Ht})})})}),de=(dt,Vt)=>{Vt.forEach(_e=>{Object.getOwnPropertyNames(_e.prototype||_e).forEach(Te=>{Object.defineProperty(dt.prototype,Te,Object.getOwnPropertyDescriptor(_e.prototype||_e,Te))})})};class ve{constructor(Vt){return Vt}}const He=new v.nKC("angularfire2.app.options"),Se=new v.nKC("angularfire2.app.name");function X(dt,Vt,_e){const Ke="object"==typeof _e&&_e||{};Ke.name=Ke.name||"string"==typeof _e&&_e||"[DEFAULT]";const ke=re.A.apps.filter(Oe=>Oe&&Oe.name===Ke.name)[0]||Vt.runOutsideAngular(()=>re.A.initializeApp(dt,Ke));try{if(JSON.stringify(dt)!==JSON.stringify(ke.options)){const Oe=!!module.hot;te("error",`${ke.name} Firebase App already initialized with different options${Oe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ve(ke)}const te=(dt,...Vt)=>{(0,v.naY)()&&typeof console<"u"&&console[dt](...Vt)},me={provide:ve,useFactory:X,deps:[He,v.SKi,[new v.Xx1,Se]]};let tt=(()=>{class dt{static initializeApp(_e,Te){return{ngModule:dt,providers:[{provide:He,useValue:_e},{provide:Se,useValue:Te}]}}constructor(_e){re.A.registerVersion("angularfire",ee.xv.full,"core"),re.A.registerVersion("angularfire",ee.xv.full,"app-compat"),re.A.registerVersion("angular",v.xvI.full,_e.toString())}static \u0275fac=function(Te){return new(Te||dt)(v.KVO(v.Agw))};static \u0275mod=v.$C({type:dt});static \u0275inj=v.G2t({providers:[me]})}return dt})();function Ye(dt,Vt,_e,Te,Ke){const[,ue,ke]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===dt)||[];if(ue)return function yt(dt,Vt){try{return dt.toString()===Vt.toString()}catch{return dt===Vt}}(Ke,ke)||(vt("error",`${Vt} was already initialized on the ${_e} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),vt("warn",{is:Ke,was:ke})),ue;{const Oe=Te();return globalThis.\u0275AngularfireInstanceCache.push([dt,Oe,Ke]),Oe}}const st=typeof module<"u"&&!!module.hot,vt=(dt,...Vt)=>{(0,v.naY)()&&typeof console<"u"&&console[dt](...Vt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(Rt,Be,U)=>{U.d(Be,{xv:()=>yt,U0:()=>on,u0:()=>ke,Jv:()=>Vt});var v=U(7705),ee=U(7852);(0,ee.registerVersion)("firebase","10.14.0","app");var G=U(6780),ve=U(9687);const Se=new class He extends ve.q{}(class de extends G.R{constructor(St,ce){super(St,ce),this.scheduler=St,this.work=ce}schedule(St,ce=0){return ce>0?super.schedule(St,ce):(this.delay=ce,this.state=St,this.scheduler.flush(this),this)}execute(St,ce){return ce>0||this.closed?super.execute(St,ce):this._execute(St,ce)}requestAsyncId(St,ce,pe=0){return null!=pe&&pe>0||null==pe&&this.delay>0?super.requestAsyncId(St,ce,pe):(St.flush(this),0)}});var te=U(3236),me=U(8141),tt=U(6745),Ye=U(941);const yt=new v.RxE("ANGULARFIRE2_VERSION");class Vt{constructor(){return((Pt,St)=>{const ce=(0,ee.getApps)(),pe=[];return ce.forEach(be=>{be.container.getProvider(Pt).instances.forEach(We=>{pe.includes(We)||pe.push(We)})}),pe})(_e)}}const _e="app-check";function Te(){}class Ke{zone;delegate;constructor(St,ce=Se){this.zone=St,this.delegate=ce}now(){return this.delegate.now()}schedule(St,ce,pe){const be=this.zone;return this.delegate.schedule(function(We){be.runGuarded(()=>{St.apply(this,[We])})},ce,pe)}}class ue{zone;task=null;constructor(St){this.zone=St}call(St,ce){const pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Te,{},Te,Te)),ce.pipe((0,me.M)({next:pe,complete:pe,error:pe})).subscribe(St).add(pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ke=(()=>{class Pt{ngZone;outsideAngular;insideAngular;constructor(ce){this.ngZone=ce,this.outsideAngular=ce.runOutsideAngular(()=>new Ke(Zone.current)),this.insideAngular=ce.run(()=>new Ke(Zone.current,te.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(pe){return new(pe||Pt)(v.KVO(v.SKi))};static \u0275prov=v.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}return Pt})();function on(Pt){return function Jt(Pt){return function(ce){return(ce=ce.lift(new ue(Pt.ngZone))).pipe((0,tt._)(Pt.outsideAngular),(0,Ye.Q)(Pt.insideAngular))}}(function Oe(){const Pt=globalThis.\u0275AngularFireScheduler;if(!Pt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Pt}())(Pt)}},345:(Rt,Be,U)=>{U.d(Be,{Bb:()=>gt,hE:()=>Xn,sG:()=>Ot,up:()=>Vr});var v=U(7705),ee=U(177);class re extends ee.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Q extends re{static makeCurrent(){(0,ee.ZD)(new Q)}onAndCancel(W,k,B){return W.addEventListener(k,B),()=>{W.removeEventListener(k,B)}}dispatchEvent(W,k){W.dispatchEvent(k)}remove(W){W.parentNode&&W.parentNode.removeChild(W)}createElement(W,k){return(k=k||this.getDefaultDocument()).createElement(W)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(W){return W.nodeType===Node.ELEMENT_NODE}isShadowRoot(W){return W instanceof DocumentFragment}getGlobalEventTarget(W,k){return"window"===k?window:"document"===k?W:"body"===k?W.body:null}getBaseHref(W){const k=function de(){return G=G||document.querySelector("base"),G?G.getAttribute("href"):null}();return null==k?null:function He(ze){ve=ve||document.createElement("a"),ve.setAttribute("href",ze);const W=ve.pathname;return"/"===W.charAt(0)?W:`/${W}`}(k)}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}getCookie(W){return(0,ee._b)(document.cookie,W)}}let ve,G=null,X=(()=>{class ze{build(){return new XMLHttpRequest}static{this.\u0275fac=function(B){return new(B||ze)}}static{this.\u0275prov=v.jDH({token:ze,factory:ze.\u0275fac})}}return ze})();const te=new v.nKC("EventManagerPlugins");let me=(()=>{class ze{constructor(k,B){this._zone=B,this._eventNameToPlugin=new Map,k.forEach(ne=>{ne.manager=this}),this._plugins=k.slice().reverse()}addEventListener(k,B,ne){return this._findPluginFor(B).addEventListener(k,B,ne)}getZone(){return this._zone}_findPluginFor(k){let B=this._eventNameToPlugin.get(k);if(B)return B;if(B=this._plugins.find(ae=>ae.supports(k)),!B)throw new v.wOt(5101,!1);return this._eventNameToPlugin.set(k,B),B}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(te),v.KVO(v.SKi))}}static{this.\u0275prov=v.jDH({token:ze,factory:ze.\u0275fac})}}return ze})();class tt{constructor(W){this._doc=W}}const Ye="ng-app-id";let yt=(()=>{class ze{constructor(k,B,ne,ae={}){this.doc=k,this.appId=B,this.nonce=ne,this.platformId=ae,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ee.Vy)(ae),this.resetHostNodes()}addStyles(k){for(const B of k)1===this.changeUsageCount(B,1)&&this.onStyleAdded(B)}removeStyles(k){for(const B of k)this.changeUsageCount(B,-1)<=0&&this.onStyleRemoved(B)}ngOnDestroy(){const k=this.styleNodesInDOM;k&&(k.forEach(B=>B.remove()),k.clear());for(const B of this.getAllStyles())this.onStyleRemoved(B);this.resetHostNodes()}addHost(k){this.hostNodes.add(k);for(const B of this.getAllStyles())this.addStyleToHost(k,B)}removeHost(k){this.hostNodes.delete(k)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(k){for(const B of this.hostNodes)this.addStyleToHost(B,k)}onStyleRemoved(k){const B=this.styleRef;B.get(k)?.elements?.forEach(ne=>ne.remove()),B.delete(k)}collectServerRenderedStyles(){const k=this.doc.head?.querySelectorAll(`style[${Ye}="${this.appId}"]`);if(k?.length){const B=new Map;return k.forEach(ne=>{null!=ne.textContent&&B.set(ne.textContent,ne)}),B}return null}changeUsageCount(k,B){const ne=this.styleRef;if(ne.has(k)){const ae=ne.get(k);return ae.usage+=B,ae.usage}return ne.set(k,{usage:B,elements:[]}),B}getStyleElement(k,B){const ne=this.styleNodesInDOM,ae=ne?.get(B);if(ae?.parentNode===k)return ne.delete(B),ae.removeAttribute(Ye),ae;{const nt=this.doc.createElement("style");return this.nonce&&nt.setAttribute("nonce",this.nonce),nt.textContent=B,this.platformIsServer&&nt.setAttribute(Ye,this.appId),nt}}addStyleToHost(k,B){const ne=this.getStyleElement(k,B);k.appendChild(ne);const ae=this.styleRef,nt=ae.get(B)?.elements;nt?nt.push(ne):ae.set(B,{elements:[ne],usage:1})}resetHostNodes(){const k=this.hostNodes;k.clear(),k.add(this.doc.head)}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(ee.qQ),v.KVO(v.sZ2),v.KVO(v.BIS,8),v.KVO(v.Agw))}}static{this.\u0275prov=v.jDH({token:ze,factory:ze.\u0275fac})}}return ze})();const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vt=/%COMP%/g,Ke=new v.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Oe(ze,W){return W.map(k=>k.replace(vt,ze))}let Je=(()=>{class ze{constructor(k,B,ne,ae,nt,lt,jt,oe=null){this.eventManager=k,this.sharedStylesHost=B,this.appId=ne,this.removeStylesOnCompDestroy=ae,this.doc=nt,this.platformId=lt,this.ngZone=jt,this.nonce=oe,this.rendererByCompId=new Map,this.platformIsServer=(0,ee.Vy)(lt),this.defaultRenderer=new wt(k,nt,jt,this.platformIsServer)}createRenderer(k,B){if(!k||!B)return this.defaultRenderer;this.platformIsServer&&B.encapsulation===v.gXe.ShadowDom&&(B={...B,encapsulation:v.gXe.Emulated});const ne=this.getOrCreateRenderer(k,B);return ne instanceof xn?ne.applyToHost(k):ne instanceof Jn&&ne.applyStyles(),ne}getOrCreateRenderer(k,B){const ne=this.rendererByCompId;let ae=ne.get(B.id);if(!ae){const nt=this.doc,lt=this.ngZone,jt=this.eventManager,oe=this.sharedStylesHost,pn=this.removeStylesOnCompDestroy,Dn=this.platformIsServer;switch(B.encapsulation){case v.gXe.Emulated:ae=new xn(jt,oe,B,this.appId,pn,nt,lt,Dn);break;case v.gXe.ShadowDom:return new Jt(jt,oe,k,B,nt,lt,this.nonce,Dn);default:ae=new Jn(jt,oe,B,pn,nt,lt,Dn)}ne.set(B.id,ae)}return ae}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(me),v.KVO(yt),v.KVO(v.sZ2),v.KVO(Ke),v.KVO(ee.qQ),v.KVO(v.Agw),v.KVO(v.SKi),v.KVO(v.BIS))}}static{this.\u0275prov=v.jDH({token:ze,factory:ze.\u0275fac})}}return ze})();class wt{constructor(W,k,B,ne){this.eventManager=W,this.doc=k,this.ngZone=B,this.platformIsServer=ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(W,k){return k?this.doc.createElementNS(st[k]||k,W):this.doc.createElement(W)}createComment(W){return this.doc.createComment(W)}createText(W){return this.doc.createTextNode(W)}appendChild(W,k){(on(W)?W.content:W).appendChild(k)}insertBefore(W,k,B){W&&(on(W)?W.content:W).insertBefore(k,B)}removeChild(W,k){W&&W.removeChild(k)}selectRootElement(W,k){let B="string"==typeof W?this.doc.querySelector(W):W;if(!B)throw new v.wOt(-5104,!1);return k||(B.textContent=""),B}parentNode(W){return W.parentNode}nextSibling(W){return W.nextSibling}setAttribute(W,k,B,ne){if(ne){k=ne+":"+k;const ae=st[ne];ae?W.setAttributeNS(ae,k,B):W.setAttribute(k,B)}else W.setAttribute(k,B)}removeAttribute(W,k,B){if(B){const ne=st[B];ne?W.removeAttributeNS(ne,k):W.removeAttribute(`${B}:${k}`)}else W.removeAttribute(k)}addClass(W,k){W.classList.add(k)}removeClass(W,k){W.classList.remove(k)}setStyle(W,k,B,ne){ne&(v.czy.DashCase|v.czy.Important)?W.style.setProperty(k,B,ne&v.czy.Important?"important":""):W.style[k]=B}removeStyle(W,k,B){B&v.czy.DashCase?W.style.removeProperty(k):W.style[k]=""}setProperty(W,k,B){W[k]=B}setValue(W,k){W.nodeValue=k}listen(W,k,B){if("string"==typeof W&&!(W=(0,ee.QT)().getGlobalEventTarget(this.doc,W)))throw new Error(`Unsupported event target ${W} for event ${k}`);return this.eventManager.addEventListener(W,k,this.decoratePreventDefault(B))}decoratePreventDefault(W){return k=>{if("__ngUnwrap__"===k)return W;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>W(k)):W(k))&&k.preventDefault()}}}function on(ze){return"TEMPLATE"===ze.tagName&&void 0!==ze.content}class Jt extends wt{constructor(W,k,B,ne,ae,nt,lt,jt){super(W,ae,nt,jt),this.sharedStylesHost=k,this.hostEl=B,this.shadowRoot=B.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const oe=Oe(ne.id,ne.styles);for(const pn of oe){const Dn=document.createElement("style");lt&&Dn.setAttribute("nonce",lt),Dn.textContent=pn,this.shadowRoot.appendChild(Dn)}}nodeOrShadowRoot(W){return W===this.hostEl?this.shadowRoot:W}appendChild(W,k){return super.appendChild(this.nodeOrShadowRoot(W),k)}insertBefore(W,k,B){return super.insertBefore(this.nodeOrShadowRoot(W),k,B)}removeChild(W,k){return super.removeChild(this.nodeOrShadowRoot(W),k)}parentNode(W){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(W)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Jn extends wt{constructor(W,k,B,ne,ae,nt,lt,jt){super(W,ae,nt,lt),this.sharedStylesHost=k,this.removeStylesOnCompDestroy=ne,this.styles=jt?Oe(jt,B.styles):B.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class xn extends Jn{constructor(W,k,B,ne,ae,nt,lt,jt){const oe=ne+"-"+B.id;super(W,k,B,ae,nt,lt,jt,oe),this.contentAttr=function ue(ze){return"_ngcontent-%COMP%".replace(vt,ze)}(oe),this.hostAttr=function ke(ze){return"_nghost-%COMP%".replace(vt,ze)}(oe)}applyToHost(W){this.applyStyles(),this.setAttribute(W,this.hostAttr,"")}createElement(W,k){const B=super.createElement(W,k);return super.setAttribute(B,this.contentAttr,""),B}}let Pt=(()=>{class ze extends tt{constructor(k){super(k)}supports(k){return!0}addEventListener(k,B,ne){return k.addEventListener(B,ne,!1),()=>this.removeEventListener(k,B,ne)}removeEventListener(k,B,ne){return k.removeEventListener(B,ne)}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(ee.qQ))}}static{this.\u0275prov=v.jDH({token:ze,factory:ze.\u0275fac})}}return ze})();const St=["alt","control","meta","shift"],ce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pe={alt:ze=>ze.altKey,control:ze=>ze.ctrlKey,meta:ze=>ze.metaKey,shift:ze=>ze.shiftKey};let be=(()=>{class ze extends tt{constructor(k){super(k)}supports(k){return null!=ze.parseEventName(k)}addEventListener(k,B,ne){const ae=ze.parseEventName(B),nt=ze.eventCallback(ae.fullKey,ne,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ee.QT)().onAndCancel(k,ae.domEventName,nt))}static parseEventName(k){const B=k.toLowerCase().split("."),ne=B.shift();if(0===B.length||"keydown"!==ne&&"keyup"!==ne)return null;const ae=ze._normalizeKey(B.pop());let nt="",lt=B.indexOf("code");if(lt>-1&&(B.splice(lt,1),nt="code."),St.forEach(oe=>{const pn=B.indexOf(oe);pn>-1&&(B.splice(pn,1),nt+=oe+".")}),nt+=ae,0!=B.length||0===ae.length)return null;const jt={};return jt.domEventName=ne,jt.fullKey=nt,jt}static matchEventFullKeyCode(k,B){let ne=ce[k.key]||k.key,ae="";return B.indexOf("code.")>-1&&(ne=k.code,ae="code."),!(null==ne||!ne)&&(ne=ne.toLowerCase()," "===ne?ne="space":"."===ne&&(ne="dot"),St.forEach(nt=>{nt!==ne&&(0,pe[nt])(k)&&(ae+=nt+".")}),ae+=ne,ae===B)}static eventCallback(k,B,ne){return ae=>{ze.matchEventFullKeyCode(ae,k)&&ne.runGuarded(()=>B(ae))}}static _normalizeKey(k){return"esc"===k?"escape":k}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(ee.qQ))}}static{this.\u0275prov=v.jDH({token:ze,factory:ze.\u0275fac})}}return ze})();const Ot=(0,v.oH4)(v.fpN,"browser",[{provide:v.Agw,useValue:ee.AJ},{provide:v.PLl,useValue:function mt(){Q.makeCurrent()},multi:!0},{provide:ee.qQ,useFactory:function zt(){return(0,v.TL$)(document),document},deps:[]}]),Hn=new v.nKC(""),sn=[{provide:v.e01,useClass:class Se{addToWindow(W){v.JZv.getAngularTestability=(B,ne=!0)=>{const ae=W.findTestabilityInTree(B,ne);if(null==ae)throw new v.wOt(5103,!1);return ae},v.JZv.getAllAngularTestabilities=()=>W.getAllTestabilities(),v.JZv.getAllAngularRootElements=()=>W.getAllRootElements(),v.JZv.frameworkStabilizers||(v.JZv.frameworkStabilizers=[]),v.JZv.frameworkStabilizers.push(B=>{const ne=v.JZv.getAllAngularTestabilities();let ae=ne.length,nt=!1;const lt=function(jt){nt=nt||jt,ae--,0==ae&&B(nt)};ne.forEach(jt=>{jt.whenStable(lt)})})}findTestabilityInTree(W,k,B){return null==k?null:W.getTestability(k)??(B?(0,ee.QT)().isShadowRoot(k)?this.findTestabilityInTree(W,k.host,!0):this.findTestabilityInTree(W,k.parentElement,!0):null)}},deps:[]},{provide:v.WHO,useClass:v.NYb,deps:[v.SKi,v.giA,v.e01]},{provide:v.NYb,useClass:v.NYb,deps:[v.SKi,v.giA,v.e01]}],ht=[{provide:v.H8p,useValue:"root"},{provide:v.zcH,useFactory:function $n(){return new v.zcH},deps:[]},{provide:te,useClass:Pt,multi:!0,deps:[ee.qQ,v.SKi,v.Agw]},{provide:te,useClass:be,multi:!0,deps:[ee.qQ]},Je,yt,me,{provide:v._9s,useExisting:Je},{provide:ee.N0,useClass:X,deps:[]},[]];let gt=(()=>{class ze{constructor(k){}static withServerTransition(k){return{ngModule:ze,providers:[{provide:v.sZ2,useValue:k.appId}]}}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(Hn,12))}}static{this.\u0275mod=v.$C({type:ze})}static{this.\u0275inj=v.G2t({providers:[...ht,...sn],imports:[ee.MD,v.Hbi]})}}return ze})(),Xn=(()=>{class ze{constructor(k){this._doc=k}getTitle(){return this._doc.title}setTitle(k){this._doc.title=k||""}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(ee.qQ))}}static{this.\u0275prov=v.jDH({token:ze,factory:function(B){let ne=null;return ne=B?new B:function qe(){return new Xn((0,v.KVO)(ee.qQ))}(),ne},providedIn:"root"})}}return ze})();typeof window<"u"&&window;let Vr=(()=>{class ze{static{this.\u0275fac=function(B){return new(B||ze)}}static{this.\u0275prov=v.jDH({token:ze,factory:function(B){let ne=null;return ne=B?new(B||ze):v.KVO(pr),ne},providedIn:"root"})}}return ze})(),pr=(()=>{class ze extends Vr{constructor(k){super(),this._doc=k}sanitize(k,B){if(null==B)return null;switch(k){case v.WPN.NONE:return B;case v.WPN.HTML:return(0,v.ZF7)(B,"HTML")?(0,v.rcV)(B):(0,v.h9k)(this._doc,String(B)).toString();case v.WPN.STYLE:return(0,v.ZF7)(B,"Style")?(0,v.rcV)(B):B;case v.WPN.SCRIPT:if((0,v.ZF7)(B,"Script"))return(0,v.rcV)(B);throw new v.wOt(5200,!1);case v.WPN.URL:return(0,v.ZF7)(B,"URL")?(0,v.rcV)(B):(0,v.$MX)(String(B));case v.WPN.RESOURCE_URL:if((0,v.ZF7)(B,"ResourceURL"))return(0,v.rcV)(B);throw new v.wOt(5201,!1);default:throw new v.wOt(5202,!1)}}bypassSecurityTrustHtml(k){return(0,v.Kcf)(k)}bypassSecurityTrustStyle(k){return(0,v.cWb)(k)}bypassSecurityTrustScript(k){return(0,v.UyX)(k)}bypassSecurityTrustUrl(k){return(0,v.osQ)(k)}bypassSecurityTrustResourceUrl(k){return(0,v.e5t)(k)}static{this.\u0275fac=function(B){return new(B||ze)(v.KVO(ee.qQ))}}static{this.\u0275prov=v.jDH({token:ze,factory:function(B){let ne=null;return ne=B?new B:function Xt(ze){return new pr(ze.get(ee.qQ))}(v.KVO(v.zZn)),ne},providedIn:"root"})}}return ze})()},7841:(Rt,Be,U)=>{U.d(Be,{Ix:()=>nr,Wk:()=>ku,iI:()=>uh,n3:()=>bi});var v=U(7705),ee=U(1985),re=U(8071),G=U(8455),de=U(7673),ve=U(4412),He=U(3073),Se=U(3669),X=U(6450),te=U(3794),me=U(8496),tt=U(4360),Ye=U(5225);function yt(...E){const D=(0,te.lI)(E),I=(0,te.ms)(E),{args:b,keys:N}=(0,He.D)(E);if(0===b.length)return(0,G.H)([],D);const z=new ee.c(function st(E,D,I=Se.D){return b=>{vt(D,()=>{const{length:N}=E,z=new Array(N);let J=N,Ue=N;for(let Me=0;Me<N;Me++)vt(D,()=>{const Ct=(0,G.H)(E[Me],D);let dn=!1;Ct.subscribe((0,tt._)(b,vn=>{z[Me]=vn,dn||(dn=!0,Ue--),Ue||b.next(I(z.slice()))},()=>{--J||b.complete()}))},b)},b)}}(b,D,N?J=>(0,me.e)(N,J):Se.D));return I?z.pipe((0,X.I)(I)):z}function vt(E,D,I){E?(0,Ye.N)(I,E,D):D()}var dt=U(9350),Vt=U(8793),_e=U(8750);function Te(E){return new ee.c(D=>{(0,_e.Tg)(E()).subscribe(D)})}var Ke=U(1203);function ue(E,D){const I=(0,re.T)(E)?E:()=>E,b=N=>N.error(I());return new ee.c(D?N=>D.schedule(b,0,N):b)}var ke=U(983),Oe=U(8359),Je=U(9974);function wt(){return(0,Je.N)((E,D)=>{let I=null;E._refCount++;const b=(0,tt._)(D,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(I=null);const N=E._connection,z=I;I=null,N&&(!z||N===z)&&N.unsubscribe(),D.unsubscribe()});E.subscribe(b),b.closed||(I=E.connect())})}class je extends ee.c{constructor(D,I){super(),this.source=D,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Je.S)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Oe.yU;const I=this.getSubject();D.add(this.source.subscribe((0,tt._)(I,void 0,()=>{this._teardown(),I.complete()},b=>{this._teardown(),I.error(b)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Oe.yU.EMPTY)}return D}refCount(){return wt()(this)}}var Ht=U(1413),on=U(177),Jt=U(6354),Jn=U(5558),xn=U(6697),Pt=U(9172),St=U(5964),ce=U(1397),pe=U(1594);function be(E,D){return(0,re.T)(D)?(0,ce.Z)(E,D,1):(0,ce.Z)(E,1)}var Ae=U(8141);function We(E){return(0,Je.N)((D,I)=>{let z,b=null,N=!1;b=D.subscribe((0,tt._)(I,void 0,void 0,J=>{z=(0,_e.Tg)(E(J,We(E)(D))),b?(b.unsubscribe(),b=null,z.subscribe(I)):N=!0})),N&&(b.unsubscribe(),b=null,z.subscribe(I))})}var Le=U(2816),ot=U(9901);function mt(E){return E<=0?()=>ke.w:(0,Je.N)((D,I)=>{let b=[];D.subscribe((0,tt._)(I,N=>{b.push(N),E<b.length&&b.shift()},()=>{for(const N of b)I.next(N);I.complete()},void 0,()=>{b=null}))})}var $n=U(3774);function Ot(E){return(0,Je.N)((D,I)=>{try{D.subscribe(I)}finally{I.add(E)}})}var Hn=U(5343),ht=U(6365),gt=U(345);const Lt="primary",Ze=Symbol("RouteTitle");class Re{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I[0]:I}return null}getAll(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function qe(E){return new Re(E)}function Xn(E,D,I){const b=I.path.split("/");if(b.length>E.length||"full"===I.pathMatch&&(D.hasChildren()||b.length<E.length))return null;const N={};for(let z=0;z<b.length;z++){const J=b[z],Ue=E[z];if(J.startsWith(":"))N[J.substring(1)]=Ue;else if(J!==Ue.path)return null}return{consumed:E.slice(0,b.length),posParams:N}}function ir(E,D){const I=E?Object.keys(E):void 0,b=D?Object.keys(D):void 0;if(!I||!b||I.length!=b.length)return!1;let N;for(let z=0;z<I.length;z++)if(N=I[z],!qt(E[N],D[N]))return!1;return!0}function qt(E,D){if(Array.isArray(E)&&Array.isArray(D)){if(E.length!==D.length)return!1;const I=[...E].sort(),b=[...D].sort();return I.every((N,z)=>b[z]===N)}return E===D}function an(E){return E.length>0?E[E.length-1]:null}function Wt(E){return function Q(E){return!!E&&(E instanceof ee.c||(0,re.T)(E.lift)&&(0,re.T)(E.subscribe))}(E)?E:(0,v.jNT)(E)?(0,G.H)(Promise.resolve(E)):(0,de.of)(E)}const fr={exact:function Fr(E,D,I){if(!pr(E.segments,D.segments)||!un(E.segments,D.segments,I)||E.numberOfChildren!==D.numberOfChildren)return!1;for(const b in D.children)if(!E.children[b]||!Fr(E.children[b],D.children[b],I))return!1;return!0},subset:at},Pr={exact:function bn(E,D){return ir(E,D)},subset:function to(E,D){return Object.keys(D).length<=Object.keys(E).length&&Object.keys(D).every(I=>qt(E[I],D[I]))},ignored:()=>!0};function vr(E,D,I){return fr[I.paths](E.root,D.root,I.matrixParams)&&Pr[I.queryParams](E.queryParams,D.queryParams)&&!("exact"===I.fragment&&E.fragment!==D.fragment)}function at(E,D,I){return Gr(E,D,D.segments,I)}function Gr(E,D,I,b){if(E.segments.length>I.length){const N=E.segments.slice(0,I.length);return!(!pr(N,I)||D.hasChildren()||!un(N,I,b))}if(E.segments.length===I.length){if(!pr(E.segments,I)||!un(E.segments,I,b))return!1;for(const N in D.children)if(!E.children[N]||!at(E.children[N],D.children[N],b))return!1;return!0}{const N=I.slice(0,E.segments.length),z=I.slice(E.segments.length);return!!(pr(E.segments,N)&&un(E.segments,N,b)&&E.children[Lt])&&Gr(E.children[Lt],D,z,b)}}function un(E,D,I){return D.every((b,N)=>Pr[I](E[N].parameters,b.parameters))}class Sn{constructor(D=new ct([],{}),I={},b=null){this.root=D,this.queryParams=I,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return Xi.serialize(this)}}class ct{constructor(D,I){this.segments=D,this.children=I,this.parent=null,Object.values(I).forEach(b=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ir(this)}}class Vr{constructor(D,I){this.path=D,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=qe(this.parameters)),this._parameterMap}toString(){return ne(this)}}function pr(E,D){return E.length===D.length&&E.every((I,b)=>I.path===D[b].path)}let It=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:function(){return new Ur},providedIn:"root"})}}return E})();class Ur{parse(D){const I=new gi(D);return new Sn(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(D){const I=`/${wi(D.root,!0)}`,b=function nt(E){const D=Object.keys(E).map(I=>{const b=E[I];return Array.isArray(b)?b.map(N=>`${Ji(I)}=${Ji(N)}`).join("&"):`${Ji(I)}=${Ji(b)}`}).filter(I=>!!I);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${I}${b}${"string"==typeof D.fragment?`#${function ze(E){return encodeURI(E)}(D.fragment)}`:""}`}}const Xi=new Ur;function Ir(E){return E.segments.map(D=>ne(D)).join("/")}function wi(E,D){if(!E.hasChildren())return Ir(E);if(D){const I=E.children[Lt]?wi(E.children[Lt],!1):"",b=[];return Object.entries(E.children).forEach(([N,z])=>{N!==Lt&&b.push(`${N}:${wi(z,!1)}`)}),b.length>0?`${I}(${b.join("//")})`:I}{const I=function On(E,D){let I=[];return Object.entries(E.children).forEach(([b,N])=>{b===Lt&&(I=I.concat(D(N,b)))}),Object.entries(E.children).forEach(([b,N])=>{b!==Lt&&(I=I.concat(D(N,b)))}),I}(E,(b,N)=>N===Lt?[wi(E.children[Lt],!1)]:[`${N}:${wi(b,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Lt]?`${Ir(E)}/${I[0]}`:`${Ir(E)}/(${I.join("//")})`}}function Kr(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ji(E){return Kr(E).replace(/%3B/gi,";")}function W(E){return Kr(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k(E){return decodeURIComponent(E)}function B(E){return k(E.replace(/\+/g,"%20"))}function ne(E){return`${W(E.path)}${function ae(E){return Object.keys(E).map(D=>`;${W(D)}=${W(E[D])}`).join("")}(E.parameters)}`}const lt=/^[^\/()?;#]+/;function jt(E){const D=E.match(lt);return D?D[0]:""}const oe=/^[^\/()?;=#]+/,Dn=/^[^=?&#]+/,Zr=/^[^&#]+/;class gi{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(D.length>0||Object.keys(I).length>0)&&(b[Lt]=new ct(D,I)),b}parseSegment(){const D=jt(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new v.wOt(4009,!1);return this.capture(D),new Vr(k(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const I=function pn(E){const D=E.match(oe);return D?D[0]:""}(this.remaining);if(!I)return;this.capture(I);let b="";if(this.consumeOptional("=")){const N=jt(this.remaining);N&&(b=N,this.capture(b))}D[k(I)]=k(b)}parseQueryParam(D){const I=function cn(E){const D=E.match(Dn);return D?D[0]:""}(this.remaining);if(!I)return;this.capture(I);let b="";if(this.consumeOptional("=")){const J=function pi(E){const D=E.match(Zr);return D?D[0]:""}(this.remaining);J&&(b=J,this.capture(b))}const N=B(I),z=B(b);if(D.hasOwnProperty(N)){let J=D[N];Array.isArray(J)||(J=[J],D[N]=J),J.push(z)}else D[N]=z}parseParens(D){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=jt(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new v.wOt(4010,!1);let z;b.indexOf(":")>-1?(z=b.slice(0,b.indexOf(":")),this.capture(z),this.capture(":")):D&&(z=Lt);const J=this.parseChildren();I[z]=1===Object.keys(J).length?J[Lt]:new ct([],J),this.consumeOptional("//")}return I}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new v.wOt(4011,!1)}}function ei(E){return E.segments.length>0?new ct([],{[Lt]:E}):E}function Or(E){const D={};for(const b of Object.keys(E.children)){const z=Or(E.children[b]);if(b===Lt&&0===z.segments.length&&z.hasChildren())for(const[J,Ue]of Object.entries(z.children))D[J]=Ue;else(z.segments.length>0||z.hasChildren())&&(D[b]=z)}return function Ai(E){if(1===E.numberOfChildren&&E.children[Lt]){const D=E.children[Lt];return new ct(E.segments.concat(D.segments),D.children)}return E}(new ct(E.segments,D))}function Er(E){return E instanceof Sn}function ps(E){let D;const N=ei(function I(z){const J={};for(const Me of z.children){const Ct=I(Me);J[Me.outlet]=Ct}const Ue=new ct(z.url,J);return z===E&&(D=Ue),Ue}(E.root));return D??N}function Ne(E,D,I,b){let N=E;for(;N.parent;)N=N.parent;if(0===D.length)return At(N,N,N,I,b);const z=function nn(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Qt(!0,0,E);let D=0,I=!1;const b=E.reduce((N,z,J)=>{if("object"==typeof z&&null!=z){if(z.outlets){const Ue={};return Object.entries(z.outlets).forEach(([Me,Ct])=>{Ue[Me]="string"==typeof Ct?Ct.split("/"):Ct}),[...N,{outlets:Ue}]}if(z.segmentPath)return[...N,z.segmentPath]}return"string"!=typeof z?[...N,z]:0===J?(z.split("/").forEach((Ue,Me)=>{0==Me&&"."===Ue||(0==Me&&""===Ue?I=!0:".."===Ue?D++:""!=Ue&&N.push(Ue))}),N):[...N,z]},[]);return new Qt(I,D,b)}(D);if(z.toRoot())return At(N,N,new ct([],{}),I,b);const J=function Zn(E,D,I){if(E.isAbsolute)return new Tn(D,!0,0);if(!I)return new Tn(D,!1,NaN);if(null===I.parent)return new Tn(I,!0,0);const b=Ie(E.commands[0])?0:1;return function Br(E,D,I){let b=E,N=D,z=I;for(;z>N;){if(z-=N,b=b.parent,!b)throw new v.wOt(4005,!1);N=b.segments.length}return new Tn(b,!1,N-z)}(I,I.segments.length-1+b,E.numberOfDoubleDots)}(z,N,E),Ue=J.processChildren?gs(J.segmentGroup,J.index,z.commands):Us(J.segmentGroup,J.index,z.commands);return At(N,J.segmentGroup,Ue,I,b)}function Ie(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function Xe(E){return"object"==typeof E&&null!=E&&E.outlets}function At(E,D,I,b,N){let J,z={};b&&Object.entries(b).forEach(([Me,Ct])=>{z[Me]=Array.isArray(Ct)?Ct.map(dn=>`${dn}`):`${Ct}`}),J=E===D?I:Nt(E,D,I);const Ue=ei(Or(J));return new Sn(Ue,z,N)}function Nt(E,D,I){const b={};return Object.entries(E.children).forEach(([N,z])=>{b[N]=z===D?I:Nt(z,D,I)}),new ct(E.segments,b)}class Qt{constructor(D,I,b){if(this.isAbsolute=D,this.numberOfDoubleDots=I,this.commands=b,D&&b.length>0&&Ie(b[0]))throw new v.wOt(4003,!1);const N=b.find(Xe);if(N&&N!==an(b))throw new v.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tn{constructor(D,I,b){this.segmentGroup=D,this.processChildren=I,this.index=b}}function Us(E,D,I){if(E||(E=new ct([],{})),0===E.segments.length&&E.hasChildren())return gs(E,D,I);const b=function Au(E,D,I){let b=0,N=D;const z={match:!1,pathIndex:0,commandIndex:0};for(;N<E.segments.length;){if(b>=I.length)return z;const J=E.segments[N],Ue=I[b];if(Xe(Ue))break;const Me=`${Ue}`,Ct=b<I.length-1?I[b+1]:null;if(N>0&&void 0===Me)break;if(Me&&Ct&&"object"==typeof Ct&&void 0===Ct.outlets){if(!si(Me,Ct,J))return z;b+=2}else{if(!si(Me,{},J))return z;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(E,D,I),N=I.slice(b.commandIndex);if(b.match&&b.pathIndex<E.segments.length){const z=new ct(E.segments.slice(0,b.pathIndex),{});return z.children[Lt]=new ct(E.segments.slice(b.pathIndex),E.children),gs(z,0,N)}return b.match&&0===N.length?new ct(E.segments,{}):b.match&&!E.hasChildren()?no(E,D,I):b.match?gs(E,0,N):no(E,D,I)}function gs(E,D,I){if(0===I.length)return new ct(E.segments,{});{const b=function Cn(E){return Xe(E[0])?E[0].outlets:{[Lt]:E}}(I),N={};if(Object.keys(b).some(z=>z!==Lt)&&E.children[Lt]&&1===E.numberOfChildren&&0===E.children[Lt].segments.length){const z=gs(E.children[Lt],D,I);return new ct(E.segments,z.children)}return Object.entries(b).forEach(([z,J])=>{"string"==typeof J&&(J=[J]),null!==J&&(N[z]=Us(E.children[z],D,J))}),Object.entries(E.children).forEach(([z,J])=>{void 0===b[z]&&(N[z]=J)}),new ct(E.segments,N)}}function no(E,D,I){const b=E.segments.slice(0,D);let N=0;for(;N<I.length;){const z=I[N];if(Xe(z)){const Me=Du(z.outlets);return new ct(b,Me)}if(0===N&&Ie(I[0])){b.push(new Vr(E.segments[D].path,ia(I[0]))),N++;continue}const J=Xe(z)?z.outlets[Lt]:`${z}`,Ue=N<I.length-1?I[N+1]:null;J&&Ue&&Ie(Ue)?(b.push(new Vr(J,ia(Ue))),N+=2):(b.push(new Vr(J,{})),N++)}return new ct(b,{})}function Du(E){const D={};return Object.entries(E).forEach(([I,b])=>{"string"==typeof b&&(b=[b]),null!==b&&(D[I]=no(new ct([],{}),0,b))}),D}function ia(E){const D={};return Object.entries(E).forEach(([I,b])=>D[I]=`${b}`),D}function si(E,D,I){return E==I.path&&ir(D,I.parameters)}const ro="imperative";class Ni{constructor(D,I){this.id=D,this.url=I}}class Na extends Ni{constructor(D,I,b="imperative",N=null){super(D,I),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zi extends Ni{constructor(D,I,b){super(D,I),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class io extends Ni{constructor(D,I,b,N){super(D,I),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ms extends Ni{constructor(D,I,b,N){super(D,I),this.reason=b,this.code=N,this.type=16}}class es extends Ni{constructor(D,I,b,N){super(D,I),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xa extends Ni{constructor(D,I,b,N){super(D,I),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Di extends Ni{constructor(D,I,b,N){super(D,I),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oa extends Ni{constructor(D,I,b,N,z){super(D,I),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ka extends Ni{constructor(D,I,b,N){super(D,I),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cu extends Ni{constructor(D,I,b,N){super(D,I),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sa{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bu{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class La{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oa{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cr{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xi{constructor(D,I,b){this.routerEvent=D,this.position=I,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gn{}class br{constructor(D){this.url=D}}class _s{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Mn,this.attachRef=null}}let Mn=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(I,b){const N=this.getOrCreateContext(I);N.outlet=b,this.contexts.set(I,N)}onChildOutletDestroyed(I){const b=this.getContext(I);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let b=this.getContext(I);return b||(b=new _s,this.contexts.set(I,b)),b}getContext(I){return this.contexts.get(I)||null}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();class zn{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const I=this.pathFromRoot(D);return I.length>1?I[I.length-2]:null}children(D){const I=Bs(D,this._root);return I?I.children.map(b=>b.value):[]}firstChild(D){const I=Bs(D,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(D){const I=Oi(D,this._root);return I.length<2?[]:I[I.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return Oi(D,this._root).map(I=>I.value)}}function Bs(E,D){if(E===D.value)return D;for(const I of D.children){const b=Bs(E,I);if(b)return b}return null}function Oi(E,D){if(E===D.value)return[D];for(const I of D.children){const b=Oi(E,I);if(b.length)return b.unshift(D),b}return[]}class lr{constructor(D,I){this.value=D,this.children=I}toString(){return`TreeNode(${this.value})`}}function ki(E){const D={};return E&&E.children.forEach(I=>D[I.value.outlet]=I),D}class ur extends zn{constructor(D,I){super(D),this.snapshot=I,Wn(this,D)}toString(){return this.snapshot.toString()}}function _t(E,D){const I=function Zt(E,D){const J=new gr([],{},{},"",{},Lt,D,null,{});return new ts("",new lr(J,[]))}(0,D),b=new ve.t([new Vr("",{})]),N=new ve.t({}),z=new ve.t({}),J=new ve.t({}),Ue=new ve.t(""),Me=new mn(b,N,J,Ue,z,Lt,D,I.root);return Me.snapshot=I.root,new ur(new lr(Me,[]),I)}class mn{constructor(D,I,b,N,z,J,Ue,Me){this.urlSubject=D,this.paramsSubject=I,this.queryParamsSubject=b,this.fragmentSubject=N,this.dataSubject=z,this.outlet=J,this.component=Ue,this._futureSnapshot=Me,this.title=this.dataSubject?.pipe((0,Jt.T)(Ct=>Ct[Ze]))??(0,de.of)(void 0),this.url=D,this.params=I,this.queryParams=b,this.fragment=N,this.data=z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Jt.T)(D=>qe(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Jt.T)(D=>qe(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _n(E,D="emptyOnly"){const I=E.pathFromRoot;let b=0;if("always"!==D)for(b=I.length-1;b>=1;){const N=I[b],z=I[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if(z.component)break;b--}}return function Ci(E){return E.reduce((D,I)=>({params:{...D.params,...I.params},data:{...D.data,...I.data},resolve:{...I.data,...D.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(b))}class gr{get title(){return this.data?.[Ze]}constructor(D,I,b,N,z,J,Ue,Me,Ct){this.url=D,this.params=I,this.queryParams=b,this.fragment=N,this.data=z,this.outlet=J,this.component=Ue,this.routeConfig=Me,this._resolve=Ct}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ts extends zn{constructor(D,I){super(I),this.url=D,Wn(this,I)}toString(){return ys(this._root)}}function Wn(E,D){D.value._routerState=E,D.children.forEach(I=>Wn(E,I))}function ys(E){const D=E.children.length>0?` { ${E.children.map(ys).join(", ")} } `:"";return`${E.value}${D}`}function jr(E){if(E.snapshot){const D=E.snapshot,I=E._futureSnapshot;E.snapshot=I,ir(D.queryParams,I.queryParams)||E.queryParamsSubject.next(I.queryParams),D.fragment!==I.fragment&&E.fragmentSubject.next(I.fragment),ir(D.params,I.params)||E.paramsSubject.next(I.params),function Wr(E,D){if(E.length!==D.length)return!1;for(let I=0;I<E.length;++I)if(!ir(E[I],D[I]))return!1;return!0}(D.url,I.url)||E.urlSubject.next(I.url),ir(D.data,I.data)||E.dataSubject.next(I.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function $t(E,D){const I=ir(E.params,D.params)&&function Xt(E,D){return pr(E,D)&&E.every((I,b)=>ir(I.parameters,D[b].parameters))}(E.url,D.url);return I&&!(!E.parent!=!D.parent)&&(!E.parent||$t(E.parent,D.parent))}let bi=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new v.bkB,this.deactivateEvents=new v.bkB,this.attachEvents=new v.bkB,this.detachEvents=new v.bkB,this.parentContexts=(0,v.WQX)(Mn),this.location=(0,v.WQX)(v.c1b),this.changeDetector=(0,v.WQX)(v.gRc),this.environmentInjector=(0,v.WQX)(v.uvJ),this.inputBinder=(0,v.WQX)(cr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:b,previousValue:N}=I.name;if(b)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.wOt(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,b){this.activated=I,this._activatedRoute=b,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,b){if(this.isActivated)throw new v.wOt(4013,!1);this._activatedRoute=I;const N=this.location,J=I.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,Me=new mi(I,Ue,N.injector);this.activated=N.createComponent(J,{index:N.length,injector:Me,environmentInjector:b??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275dir=v.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[v.OA$]})}}return E})();class mi{constructor(D,I,b){this.route=D,this.childContexts=I,this.parent=b}get(D,I){return D===mn?this.route:D===Mn?this.childContexts:this.parent.get(D,I)}}const cr=new v.nKC("");let er=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:b}=I,N=yt([b.queryParams,b.params,b.data]).pipe((0,Jn.n)(([z,J,Ue],Me)=>(Ue={...z,...J,...Ue},0===Me?(0,de.of)(Ue):Promise.resolve(Ue)))).subscribe(z=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==b||null===b.component)return void this.unsubscribeFromRouteData(I);const J=(0,v.HJs)(b.component);if(J)for(const{templateName:Ue}of J.inputs)I.activatedComponentRef.setInput(Ue,z[Ue]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,N)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac})}}return E})();function Sr(E,D,I){if(I&&E.shouldReuseRoute(D.value,I.value.snapshot)){const b=I.value;b._futureSnapshot=D.value;const N=function Fi(E,D,I){return D.children.map(b=>{for(const N of I.children)if(E.shouldReuseRoute(b.value,N.value.snapshot))return Sr(E,b,N);return Sr(E,b)})}(E,D,I);return new lr(b,N)}{if(E.shouldAttach(D.value)){const z=E.retrieve(D.value);if(null!==z){const J=z.route;return J.value._futureSnapshot=D.value,J.children=D.children.map(Ue=>Sr(E,Ue)),J}}const b=function Si(E){return new mn(new ve.t(E.url),new ve.t(E.params),new ve.t(E.queryParams),new ve.t(E.fragment),new ve.t(E.data),E.outlet,E.component,E)}(D.value),N=D.children.map(z=>Sr(E,z));return new lr(b,N)}}const Mo="ngNavigationCancelingError";function oi(E,D){const{redirectTo:I,navigationBehaviorOptions:b}=Er(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,N=ti(!1,0,D);return N.url=I,N.navigationBehaviorOptions=b,N}function ti(E,D,I){const b=new Error("NavigationCancelingError: "+(E||""));return b[Mo]=!0,b.cancellationCode=D,I&&(b.url=I),b}function vs(E){return E&&E[Mo]}let yn=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275cmp=v.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[v.aNF],decls:1,vars:0,template:function(b,N){1&b&&v.nrm(0,"router-outlet")},dependencies:[bi],encapsulation:2})}}return E})();function mr(E){const D=E.children&&E.children.map(mr),I=D?{...E,children:D}:{...E};return!I.component&&!I.loadComponent&&(D||I.loadChildren)&&I.outlet&&I.outlet!==Lt&&(I.component=yn),I}function ln(E){return E.outlet||Lt}function Nn(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let D=E.parent;D;D=D.parent){const I=D.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class aa{constructor(D,I,b,N,z){this.routeReuseStrategy=D,this.futureState=I,this.currState=b,this.forwardEvent=N,this.inputBindingEnabled=z}activate(D){const I=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,b,D),jr(this.futureState.root),this.activateChildRoutes(I,b,D)}deactivateChildRoutes(D,I,b){const N=ki(I);D.children.forEach(z=>{const J=z.value.outlet;this.deactivateRoutes(z,N[J],b),delete N[J]}),Object.values(N).forEach(z=>{this.deactivateRouteAndItsChildren(z,b)})}deactivateRoutes(D,I,b){const N=D.value,z=I?I.value:null;if(N===z)if(N.component){const J=b.getContext(N.outlet);J&&this.deactivateChildRoutes(D,I,J.children)}else this.deactivateChildRoutes(D,I,b);else z&&this.deactivateRouteAndItsChildren(I,b)}deactivateRouteAndItsChildren(D,I){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,I):this.deactivateRouteAndOutlet(D,I)}detachAndStoreRouteSubtree(D,I){const b=I.getContext(D.value.outlet),N=b&&D.value.component?b.children:I,z=ki(D);for(const J of Object.keys(z))this.deactivateRouteAndItsChildren(z[J],N);if(b&&b.outlet){const J=b.outlet.detach(),Ue=b.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:J,route:D,contexts:Ue})}}deactivateRouteAndOutlet(D,I){const b=I.getContext(D.value.outlet),N=b&&D.value.component?b.children:I,z=ki(D);for(const J of Object.keys(z))this.deactivateRouteAndItsChildren(z[J],N);b&&(b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated()),b.attachRef=null,b.route=null)}activateChildRoutes(D,I,b){const N=ki(I);D.children.forEach(z=>{this.activateRoutes(z,N[z.value.outlet],b),this.forwardEvent(new Ps(z.value.snapshot))}),D.children.length&&this.forwardEvent(new oa(D.value.snapshot))}activateRoutes(D,I,b){const N=D.value,z=I?I.value:null;if(jr(N),N===z)if(N.component){const J=b.getOrCreateContext(N.outlet);this.activateChildRoutes(D,I,J.children)}else this.activateChildRoutes(D,I,b);else if(N.component){const J=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Ue=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),J.children.onOutletReAttached(Ue.contexts),J.attachRef=Ue.componentRef,J.route=Ue.route.value,J.outlet&&J.outlet.attach(Ue.componentRef,Ue.route.value),jr(Ue.route.value),this.activateChildRoutes(D,null,J.children)}else{const Ue=Nn(N.snapshot);J.attachRef=null,J.route=N,J.injector=Ue,J.outlet&&J.outlet.activateWith(N,J.injector),this.activateChildRoutes(D,null,J.children)}}else this.activateChildRoutes(D,null,b)}}class Es{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class ua{constructor(D,I){this.component=D,this.route=I}}function Ac(E,D,I){const b=E._root;return ns(b,D?D._root:null,I,[b.value])}function en(E,D){const I=Symbol(),b=D.get(E,I);return b===I?"function"!=typeof E||(0,v.LfX)(E)?D.get(E):E:b}function ns(E,D,I,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const z=ki(D);return E.children.forEach(J=>{(function Dc(E,D,I,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const z=E.value,J=D?D.value:null,Ue=I?I.getContext(E.value.outlet):null;if(J&&z.routeConfig===J.routeConfig){const Me=function Va(E,D,I){if("function"==typeof I)return I(E,D);switch(I){case"pathParamsChange":return!pr(E.url,D.url);case"pathParamsOrQueryParamsChange":return!pr(E.url,D.url)||!ir(E.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$t(E,D)||!ir(E.queryParams,D.queryParams);default:return!$t(E,D)}}(J,z,z.routeConfig.runGuardsAndResolvers);Me?N.canActivateChecks.push(new Es(b)):(z.data=J.data,z._resolvedData=J._resolvedData),ns(E,D,z.component?Ue?Ue.children:null:I,b,N),Me&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&N.canDeactivateChecks.push(new ua(Ue.outlet.component,J))}else J&&qn(D,Ue,N),N.canActivateChecks.push(new Es(b)),ns(E,null,z.component?Ue?Ue.children:null:I,b,N)})(J,z[J.value.outlet],I,b.concat([J.value]),N),delete z[J.value.outlet]}),Object.entries(z).forEach(([J,Ue])=>qn(Ue,I.getContext(J),N)),N}function qn(E,D,I){const b=ki(E),N=E.value;Object.entries(b).forEach(([z,J])=>{qn(J,N.component?D?D.children.getContext(z):null:D,I)}),I.canDeactivateChecks.push(new ua(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}function ao(E){return"function"==typeof E}function Oo(E){return E instanceof dt.G||"EmptyError"===E?.name}const Ua=Symbol("INITIAL_VALUE");function Ms(){return(0,Jn.n)(E=>yt(E.map(D=>D.pipe((0,xn.s)(1),(0,Pt.Z)(Ua)))).pipe((0,Jt.T)(D=>{for(const I of D)if(!0!==I){if(I===Ua)return Ua;if(!1===I||I instanceof Sn)return I}return!0}),(0,St.p)(D=>D!==Ua),(0,xn.s)(1)))}function Lo(E){return(0,Ke.F)((0,Ae.M)(D=>{if(Er(D))throw oi(0,D)}),(0,Jt.T)(D=>!0===D))}class Ts{constructor(D){this.segmentGroup=D||null}}class Hs{constructor(D){this.urlTree=D}}function ai(E){return ue(new Ts(E))}function wr(E){return ue(new Hs(E))}class Fo{constructor(D,I){this.urlSerializer=D,this.urlTree=I}noMatchError(D){return new v.wOt(4002,!1)}lineralizeSegments(D,I){let b=[],N=I.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,de.of)(b);if(N.numberOfChildren>1||!N.children[Lt])return ue(new v.wOt(4e3,!1));N=N.children[Lt]}}applyRedirectCommands(D,I,b){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),D,b)}applyRedirectCreateUrlTree(D,I,b,N){const z=this.createSegmentGroup(D,I.root,b,N);return new Sn(z,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(D,I){const b={};return Object.entries(D).forEach(([N,z])=>{if("string"==typeof z&&z.startsWith(":")){const Ue=z.substring(1);b[N]=I[Ue]}else b[N]=z}),b}createSegmentGroup(D,I,b,N){const z=this.createSegments(D,I.segments,b,N);let J={};return Object.entries(I.children).forEach(([Ue,Me])=>{J[Ue]=this.createSegmentGroup(D,Me,b,N)}),new ct(z,J)}createSegments(D,I,b,N){return I.map(z=>z.path.startsWith(":")?this.findPosParam(D,z,N):this.findOrReturn(z,b))}findPosParam(D,I,b){const N=b[I.path.substring(1)];if(!N)throw new v.wOt(4001,!1);return N}findOrReturn(D,I){let b=0;for(const N of I){if(N.path===D.path)return I.splice(b),N;b++}return D}}const lo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ws(E,D,I,b,N){const z=Ns(E,D,I);return z.matched?(b=function Fa(E,D){return E.providers&&!E._injector&&(E._injector=(0,v.Ol2)(E.providers,D,`Route: ${E.path}`)),E._injector??D}(D,b),function $i(E,D,I,b){const N=D.canMatch;if(!N||0===N.length)return(0,de.of)(!0);const z=N.map(J=>{const Ue=en(J,E);return Wt(function Ru(E){return E&&ao(E.canMatch)}(Ue)?Ue.canMatch(D,I):E.runInContext(()=>Ue(D,I)))});return(0,de.of)(z).pipe(Ms(),Lo())}(b,D,I).pipe((0,Jt.T)(J=>!0===J?z:{...lo}))):(0,de.of)(z)}function Ns(E,D,I){if(""===D.path)return"full"===D.pathMatch&&(E.hasChildren()||I.length>0)?{...lo}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const N=(D.matcher||Xn)(I,E,D);if(!N)return{...lo};const z={};Object.entries(N.posParams??{}).forEach(([Ue,Me])=>{z[Ue]=Me.path});const J=N.consumed.length>0?{...z,...N.consumed[N.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:N.consumed,remainingSegments:I.slice(N.consumed.length),parameters:J,positionalParamSegments:N.posParams??{}}}function yi(E,D,I,b){return I.length>0&&function ja(E,D,I){return I.some(b=>ui(E,D,b)&&ln(b)!==Lt)}(E,I,b)?{segmentGroup:new ct(D,ca(b,new ct(I,E.children))),slicedSegments:[]}:0===I.length&&function la(E,D,I){return I.some(b=>ui(E,D,b))}(E,I,b)?{segmentGroup:new ct(E.segments,zs(E,0,I,b,E.children)),slicedSegments:I}:{segmentGroup:new ct(E.segments,E.children),slicedSegments:I}}function zs(E,D,I,b,N){const z={};for(const J of b)if(ui(E,I,J)&&!N[ln(J)]){const Ue=new ct([],{});z[ln(J)]=Ue}return{...N,...z}}function ca(E,D){const I={};I[Lt]=D;for(const b of E)if(""===b.path&&ln(b)!==Lt){const N=new ct([],{});I[ln(b)]=N}return I}function ui(E,D,I){return(!(E.hasChildren()||D.length>0)||"full"!==I.pathMatch)&&""===I.path}class xs{constructor(D,I,b,N,z,J,Ue){this.injector=D,this.configLoader=I,this.rootComponentType=b,this.config=N,this.urlTree=z,this.paramsInheritanceStrategy=J,this.urlSerializer=Ue,this.allowRedirects=!0,this.applyRedirects=new Fo(this.urlSerializer,this.urlTree)}noMatchError(D){return new v.wOt(4002,!1)}recognize(){const D=yi(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,Lt).pipe(We(I=>{if(I instanceof Hs)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof Ts?this.noMatchError(I):I}),(0,Jt.T)(I=>{const b=new gr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,{}),N=new lr(b,I),z=new ts("",N),J=function hn(E,D,I=null,b=null){return Ne(ps(E),D,I,b)}(b,[],this.urlTree.queryParams,this.urlTree.fragment);return J.queryParams=this.urlTree.queryParams,z.url=this.urlSerializer.serialize(J),this.inheritParamsAndData(z._root),{state:z,tree:J}}))}match(D){return this.processSegmentGroup(this.injector,this.config,D.root,Lt).pipe(We(b=>{throw b instanceof Ts?this.noMatchError(b):b}))}inheritParamsAndData(D){const I=D.value,b=_n(I,this.paramsInheritanceStrategy);I.params=Object.freeze(b.params),I.data=Object.freeze(b.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,I,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(D,I,b):this.processSegment(D,I,b,b.segments,N,!0)}processChildren(D,I,b){const N=[];for(const z of Object.keys(b.children))"primary"===z?N.unshift(z):N.push(z);return(0,G.H)(N).pipe(be(z=>{const J=b.children[z],Ue=function xo(E,D){const I=E.filter(b=>ln(b)===D);return I.push(...E.filter(b=>ln(b)!==D)),I}(I,z);return this.processSegmentGroup(D,Ue,J,z)}),(0,Le.S)((z,J)=>(z.push(...J),z)),(0,ot.U)(null),function zt(E,D){const I=arguments.length>=2;return b=>b.pipe(E?(0,St.p)((N,z)=>E(N,z,b)):Se.D,mt(1),I?(0,ot.U)(D):(0,$n.v)(()=>new dt.G))}(),(0,ce.Z)(z=>{if(null===z)return ai(b);const J=da(z);return function Rc(E){E.sort((D,I)=>D.value.outlet===Lt?-1:I.value.outlet===Lt?1:D.value.outlet.localeCompare(I.value.outlet))}(J),(0,de.of)(J)}))}processSegment(D,I,b,N,z,J){return(0,G.H)(I).pipe(be(Ue=>this.processSegmentAgainstRoute(Ue._injector??D,I,Ue,b,N,z,J).pipe(We(Me=>{if(Me instanceof Ts)return(0,de.of)(null);throw Me}))),(0,pe.$)(Ue=>!!Ue),We(Ue=>{if(Oo(Ue))return function vi(E,D,I){return 0===D.length&&!E.children[I]}(b,N,z)?(0,de.of)([]):ai(b);throw Ue}))}processSegmentAgainstRoute(D,I,b,N,z,J,Ue){return function xu(E,D,I,b){return!!(ln(E)===b||b!==Lt&&ui(D,I,E))&&("**"===E.path||Ns(D,E,I).matched)}(b,N,z,J)?void 0===b.redirectTo?this.matchSegmentAgainstRoute(D,N,b,z,J,Ue):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,N,I,b,z,J):ai(N):ai(N)}expandSegmentAgainstRouteUsingRedirect(D,I,b,N,z,J){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,b,N,J):this.expandRegularSegmentAgainstRouteUsingRedirect(D,I,b,N,z,J)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,I,b,N){const z=this.applyRedirects.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?wr(z):this.applyRedirects.lineralizeSegments(b,z).pipe((0,ce.Z)(J=>{const Ue=new ct(J,{});return this.processSegment(D,I,Ue,J,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,I,b,N,z,J){const{matched:Ue,consumedSegments:Me,remainingSegments:Ct,positionalParamSegments:dn}=Ns(I,N,z);if(!Ue)return ai(I);const vn=this.applyRedirects.applyRedirectCommands(Me,N.redirectTo,dn);return N.redirectTo.startsWith("/")?wr(vn):this.applyRedirects.lineralizeSegments(N,vn).pipe((0,ce.Z)(In=>this.processSegment(D,b,I,In.concat(Ct),J,!1)))}matchSegmentAgainstRoute(D,I,b,N,z,J){let Ue;if("**"===b.path){const Me=N.length>0?an(N).parameters:{},Ct=new gr(N,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$a(b),ln(b),b.component??b._loadedComponent??null,b,A(b));Ue=(0,de.of)({snapshot:Ct,consumedSegments:[],remainingSegments:[]}),I.children={}}else Ue=ws(I,b,N,D).pipe((0,Jt.T)(({matched:Me,consumedSegments:Ct,remainingSegments:dn,parameters:vn})=>Me?{snapshot:new gr(Ct,vn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$a(b),ln(b),b.component??b._loadedComponent??null,b,A(b)),consumedSegments:Ct,remainingSegments:dn}:null));return Ue.pipe((0,Jn.n)(Me=>null===Me?ai(I):this.getChildConfig(D=b._injector??D,b,N).pipe((0,Jn.n)(({routes:Ct})=>{const dn=b._loadedInjector??D,{snapshot:vn,consumedSegments:In,remainingSegments:Kn}=Me,{segmentGroup:ya,slicedSegments:Ka}=yi(I,In,Kn,Ct);if(0===Ka.length&&ya.hasChildren())return this.processChildren(dn,Ct,ya).pipe((0,Jt.T)(Pi=>null===Pi?null:[new lr(vn,Pi)]));if(0===Ct.length&&0===Ka.length)return(0,de.of)([new lr(vn,[])]);const Vc=ln(b)===z;return this.processSegment(dn,Ct,ya,Ka,Vc?Lt:z,!0).pipe((0,Jt.T)(Pi=>[new lr(vn,Pi)]))}))))}getChildConfig(D,I,b){return I.children?(0,de.of)({routes:I.children,injector:D}):I.loadChildren?void 0!==I._loadedRoutes?(0,de.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function ji(E,D,I,b){const N=D.canLoad;if(void 0===N||0===N.length)return(0,de.of)(!0);const z=N.map(J=>{const Ue=en(J,E);return Wt(function jl(E){return E&&ao(E.canLoad)}(Ue)?Ue.canLoad(D,I):E.runInContext(()=>Ue(D,I)))});return(0,de.of)(z).pipe(Ms(),Lo())}(D,I,b).pipe((0,ce.Z)(N=>N?this.configLoader.loadChildren(D,I).pipe((0,Ae.M)(z=>{I._loadedRoutes=z.routes,I._loadedInjector=z.injector})):function Nu(E){return ue(ti(!1,3))}())):(0,de.of)({routes:[],injector:D})}}function Hi(E){const D=E.value.routeConfig;return D&&""===D.path}function da(E){const D=[],I=new Set;for(const b of E){if(!Hi(b)){D.push(b);continue}const N=D.find(z=>b.value.routeConfig===z.value.routeConfig);void 0!==N?(N.children.push(...b.children),I.add(N)):D.push(b)}for(const b of I){const N=da(b.children);D.push(new lr(b.value,N))}return D.filter(b=>!I.has(b))}function $a(E){return E.data||{}}function A(E){return E.resolve||{}}function kt(E){return"string"==typeof E.title||null===E.title}function Qn(E){return(0,Jn.n)(D=>{const I=E(D);return I?(0,G.H)(I).pipe((0,Jt.T)(()=>D)):(0,de.of)(D)})}const Un=new v.nKC("ROUTES");let Bn=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,v.WQX)(v.Ql9)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,de.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const b=Wt(I.loadComponent()).pipe((0,Jt.T)(Gn),(0,Ae.M)(z=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=z}),Ot(()=>{this.componentLoaders.delete(I)})),N=new je(b,()=>new Ht.B).pipe(wt());return this.componentLoaders.set(I,N),N}loadChildren(I,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,de.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const z=function tn(E,D,I,b){return Wt(E.loadChildren()).pipe((0,Jt.T)(Gn),(0,ce.Z)(N=>N instanceof v.Co$||Array.isArray(N)?(0,de.of)(N):(0,G.H)(D.compileModuleAsync(N))),(0,Jt.T)(N=>{b&&b(E);let z,J,Ue=!1;return Array.isArray(N)?(J=N,!0):(z=N.create(I).injector,J=z.get(Un,[],{optional:!0,self:!0}).flat()),{routes:J.map(mr),injector:z}}))}(b,this.compiler,I,this.onLoadEndListener).pipe(Ot(()=>{this.childrenLoaders.delete(b)})),J=new je(z,()=>new Ht.B).pipe(wt());return this.childrenLoaders.set(b,J),J}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Gn(E){return function Yn(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let tr=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ht.B,this.transitionAbortSubject=new Ht.B,this.configLoader=(0,v.WQX)(Bn),this.environmentInjector=(0,v.WQX)(v.uvJ),this.urlSerializer=(0,v.WQX)(It),this.rootContexts=(0,v.WQX)(Mn),this.inputBindingEnabled=null!==(0,v.WQX)(cr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,de.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new bu(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new sa(N))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const b=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:b})}setupNavigations(I,b,N){return this.transitions=new ve.t({id:0,currentUrlTree:b,currentRawUrl:b,currentBrowserUrl:b,extractedUrl:I.urlHandlingStrategy.extract(b),urlAfterRedirects:I.urlHandlingStrategy.extract(b),rawUrl:b,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ro,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,St.p)(z=>0!==z.id),(0,Jt.T)(z=>({...z,extractedUrl:I.urlHandlingStrategy.extract(z.rawUrl)})),(0,Jn.n)(z=>{this.currentTransition=z;let J=!1,Ue=!1;return(0,de.of)(z).pipe((0,Ae.M)(Me=>{this.currentNavigation={id:Me.id,initialUrl:Me.rawUrl,extractedUrl:Me.extractedUrl,trigger:Me.source,extras:Me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Jn.n)(Me=>{const Ct=Me.currentBrowserUrl.toString(),dn=!I.navigated||Me.extractedUrl.toString()!==Ct||Ct!==Me.currentUrlTree.toString();if(!dn&&"reload"!==(Me.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const In="";return this.events.next(new ms(Me.id,this.urlSerializer.serialize(Me.rawUrl),In,0)),Me.resolve(null),ke.w}if(I.urlHandlingStrategy.shouldProcessUrl(Me.rawUrl))return(0,de.of)(Me).pipe((0,Jn.n)(In=>{const Kn=this.transitions?.getValue();return this.events.next(new Na(In.id,this.urlSerializer.serialize(In.extractedUrl),In.source,In.restoredState)),Kn!==this.transitions?.getValue()?ke.w:Promise.resolve(In)}),function V(E,D,I,b,N,z){return(0,ce.Z)(J=>function Ou(E,D,I,b,N,z,J="emptyOnly"){return new xs(E,D,I,b,N,J,z).recognize()}(E,D,I,b,J.extractedUrl,N,z).pipe((0,Jt.T)(({state:Ue,tree:Me})=>({...J,targetSnapshot:Ue,urlAfterRedirects:Me}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Ae.M)(In=>{z.targetSnapshot=In.targetSnapshot,z.urlAfterRedirects=In.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:In.urlAfterRedirects};const Kn=new xa(In.id,this.urlSerializer.serialize(In.extractedUrl),this.urlSerializer.serialize(In.urlAfterRedirects),In.targetSnapshot);this.events.next(Kn)}));if(dn&&I.urlHandlingStrategy.shouldProcessUrl(Me.currentRawUrl)){const{id:In,extractedUrl:Kn,source:ya,restoredState:Ka,extras:Vc}=Me,Pi=new Na(In,this.urlSerializer.serialize(Kn),ya,Ka);this.events.next(Pi);const Uo=_t(0,this.rootComponentType).snapshot;return this.currentTransition=z={...Me,targetSnapshot:Uo,urlAfterRedirects:Kn,extras:{...Vc,skipLocationChange:!1,replaceUrl:!1}},(0,de.of)(z)}{const In="";return this.events.next(new ms(Me.id,this.urlSerializer.serialize(Me.extractedUrl),In,1)),Me.resolve(null),ke.w}}),(0,Ae.M)(Me=>{const Ct=new Di(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(Ct)}),(0,Jt.T)(Me=>(this.currentTransition=z={...Me,guards:Ac(Me.targetSnapshot,Me.currentSnapshot,this.rootContexts)},z)),function Ba(E,D){return(0,ce.Z)(I=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:z,canDeactivateChecks:J}}=I;return 0===J.length&&0===z.length?(0,de.of)({...I,guardsResult:!0}):function Bi(E,D,I,b){return(0,G.H)(E).pipe((0,ce.Z)(N=>function qr(E,D,I,b,N){const z=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,de.of)(!0);const J=z.map(Ue=>{const Me=Nn(D)??N,Ct=en(Ue,Me);return Wt(function Sc(E){return E&&ao(E.canDeactivate)}(Ct)?Ct.canDeactivate(E,D,I,b):Me.runInContext(()=>Ct(E,D,I,b))).pipe((0,pe.$)())});return(0,de.of)(J).pipe(Ms())}(N.component,N.route,I,D,b)),(0,pe.$)(N=>!0!==N,!0))}(J,b,N,E).pipe((0,ce.Z)(Ue=>Ue&&function Cc(E){return"boolean"==typeof E}(Ue)?function Hr(E,D,I,b){return(0,G.H)(D).pipe(be(N=>(0,Vt.x)(function ko(E,D){return null!==E&&D&&D(new La(E)),(0,de.of)(!0)}(N.route.parent,b),function rs(E,D){return null!==E&&D&&D(new Cr(E)),(0,de.of)(!0)}(N.route,b),function uo(E,D,I){const b=D[D.length-1],z=D.slice(0,D.length-1).reverse().map(J=>function wn(E){const D=E.routeConfig?E.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:E,guards:D}:null}(J)).filter(J=>null!==J).map(J=>Te(()=>{const Ue=J.guards.map(Me=>{const Ct=Nn(J.node)??I,dn=en(Me,Ct);return Wt(function bc(E){return E&&ao(E.canActivateChild)}(dn)?dn.canActivateChild(b,E):Ct.runInContext(()=>dn(b,E))).pipe((0,pe.$)())});return(0,de.of)(Ue).pipe(Ms())}));return(0,de.of)(z).pipe(Ms())}(E,N.path,I),function Tr(E,D,I){const b=D.routeConfig?D.routeConfig.canActivate:null;if(!b||0===b.length)return(0,de.of)(!0);const N=b.map(z=>Te(()=>{const J=Nn(D)??I,Ue=en(z,J);return Wt(function Su(E){return E&&ao(E.canActivate)}(Ue)?Ue.canActivate(D,E):J.runInContext(()=>Ue(D,E))).pipe((0,pe.$)())}));return(0,de.of)(N).pipe(Ms())}(E,N.route,I))),(0,pe.$)(N=>!0!==N,!0))}(b,z,E,D):(0,de.of)(Ue)),(0,Jt.T)(Ue=>({...I,guardsResult:Ue})))})}(this.environmentInjector,Me=>this.events.next(Me)),(0,Ae.M)(Me=>{if(z.guardsResult=Me.guardsResult,Er(Me.guardsResult))throw oi(0,Me.guardsResult);const Ct=new Oa(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot,!!Me.guardsResult);this.events.next(Ct)}),(0,St.p)(Me=>!!Me.guardsResult||(this.cancelNavigationTransition(Me,"",3),!1)),Qn(Me=>{if(Me.guards.canActivateChecks.length)return(0,de.of)(Me).pipe((0,Ae.M)(Ct=>{const dn=new ka(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(dn)}),(0,Jn.n)(Ct=>{let dn=!1;return(0,de.of)(Ct).pipe(function P(E,D){return(0,ce.Z)(I=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=I;if(!N.length)return(0,de.of)(I);let z=0;return(0,G.H)(N).pipe(be(J=>function F(E,D,I,b){const N=E.routeConfig,z=E._resolve;return void 0!==N?.title&&!kt(N)&&(z[Ze]=N.title),function Z(E,D,I,b){const N=function Fe(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===N.length)return(0,de.of)({});const z={};return(0,G.H)(N).pipe((0,ce.Z)(J=>function rt(E,D,I,b){const N=Nn(D)??b,z=en(E,N);return Wt(z.resolve?z.resolve(D,I):N.runInContext(()=>z(D,I)))}(E[J],D,I,b).pipe((0,pe.$)(),(0,Ae.M)(Ue=>{z[J]=Ue}))),mt(1),function $e(E){return(0,Jt.T)(()=>E)}(z),We(J=>Oo(J)?ke.w:ue(J)))}(z,E,D,b).pipe((0,Jt.T)(J=>(E._resolvedData=J,E.data=_n(E,I).resolve,N&&kt(N)&&(E.data[Ze]=N.title),null)))}(J.route,b,E,D)),(0,Ae.M)(()=>z++),mt(1),(0,ce.Z)(J=>z===N.length?(0,de.of)(I):ke.w))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Ae.M)({next:()=>dn=!0,complete:()=>{dn||this.cancelNavigationTransition(Ct,"",2)}}))}),(0,Ae.M)(Ct=>{const dn=new Cu(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(dn)}))}),Qn(Me=>{const Ct=dn=>{const vn=[];dn.routeConfig?.loadComponent&&!dn.routeConfig._loadedComponent&&vn.push(this.configLoader.loadComponent(dn.routeConfig).pipe((0,Ae.M)(In=>{dn.component=In}),(0,Jt.T)(()=>{})));for(const In of dn.children)vn.push(...Ct(In));return vn};return yt(Ct(Me.targetSnapshot.root)).pipe((0,ot.U)(),(0,xn.s)(1))}),Qn(()=>this.afterPreactivation()),(0,Jt.T)(Me=>{const Ct=function Li(E,D,I){const b=Sr(E,D._root,I?I._root:void 0);return new ur(b,D)}(I.routeReuseStrategy,Me.targetSnapshot,Me.currentRouterState);return this.currentTransition=z={...Me,targetRouterState:Ct},z}),(0,Ae.M)(()=>{this.events.next(new gn)}),((E,D,I,b)=>(0,Jt.T)(N=>(new aa(D,N.targetRouterState,N.currentRouterState,I,b).activate(E),N)))(this.rootContexts,I.routeReuseStrategy,Me=>this.events.next(Me),this.inputBindingEnabled),(0,xn.s)(1),(0,Ae.M)({next:Me=>{J=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zi(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects))),I.titleStrategy?.updateTitle(Me.targetRouterState.snapshot),Me.resolve(!0)},complete:()=>{J=!0}}),function sn(E){return(0,Je.N)((D,I)=>{(0,_e.Tg)(E).subscribe((0,tt._)(I,()=>I.complete(),Hn.l)),!I.closed&&D.subscribe(I)})}(this.transitionAbortSubject.pipe((0,Ae.M)(Me=>{throw Me}))),Ot(()=>{J||Ue||this.cancelNavigationTransition(z,"",1),this.currentNavigation?.id===z.id&&(this.currentNavigation=null)}),We(Me=>{if(Ue=!0,vs(Me))this.events.next(new io(z.id,this.urlSerializer.serialize(z.extractedUrl),Me.message,Me.cancellationCode)),function Vi(E){return vs(E)&&Er(E.url)}(Me)?this.events.next(new br(Me.url)):z.resolve(!1);else{this.events.next(new es(z.id,this.urlSerializer.serialize(z.extractedUrl),Me,z.targetSnapshot??void 0));try{z.resolve(I.errorHandler(Me))}catch(Ct){z.reject(Ct)}}return ke.w}))}))}cancelNavigationTransition(I,b,N){const z=new io(I.id,this.urlSerializer.serialize(I.extractedUrl),b,N);this.events.next(z),I.resolve(!1)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Qr(E){return E!==ro}let zr=(()=>{class E{buildTitle(I){let b,N=I.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find(z=>z.outlet===Lt);return b}getResolvedTitleForRoute(I){return I.data[Ze]}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:function(){return(0,v.WQX)(Ws)},providedIn:"root"})}}return E})(),Ws=(()=>{class E extends zr{constructor(I){super(),this.title=I}updateTitle(I){const b=this.buildTitle(I);void 0!==b&&this.title.setTitle(b)}static{this.\u0275fac=function(b){return new(b||E)(v.KVO(gt.hE))}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})(),ci=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:function(){return(0,v.WQX)(Yr)},providedIn:"root"})}}return E})();class zi{shouldDetach(D){return!1}store(D,I){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,I){return D.routeConfig===I.routeConfig}}let Yr=(()=>{class E extends zi{static{this.\u0275fac=function(){let I;return function(N){return(I||(I=v.xGo(E)))(N||E)}}()}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const is=new v.nKC("",{providedIn:"root",factory:()=>({})});let _r=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:function(){return(0,v.WQX)(sr)},providedIn:"root"})}}return E})(),sr=(()=>{class E{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,b){return I}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();var Gs=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Gs||{});function fo(E,D){E.events.pipe((0,St.p)(I=>I instanceof Zi||I instanceof io||I instanceof es||I instanceof ms),(0,Jt.T)(I=>I instanceof Zi||I instanceof ms?Gs.COMPLETE:I instanceof io&&(0===I.code||1===I.code)?Gs.REDIRECTING:Gs.FAILED),(0,St.p)(I=>I!==Gs.REDIRECTING),(0,xn.s)(1)).subscribe(()=>{D()})}function Ri(E){throw E}function Ha(E,D,I){return D.parse("/")}const sh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ha={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nr=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,v.WQX)(v.H3F),this.isNgZoneEnabled=!1,this._events=new Ht.B,this.options=(0,v.WQX)(is,{optional:!0})||{},this.pendingTasks=(0,v.WQX)(v.$K3),this.errorHandler=this.options.errorHandler||Ri,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ha,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,v.WQX)(_r),this.routeReuseStrategy=(0,v.WQX)(ci),this.titleStrategy=(0,v.WQX)(zr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,v.WQX)(Un,{optional:!0})?.flat()??[],this.navigationTransitions=(0,v.WQX)(tr),this.urlSerializer=(0,v.WQX)(It),this.location=(0,v.WQX)(on.aZ),this.componentInputBindingEnabled=!!(0,v.WQX)(cr,{optional:!0}),this.eventsSubscription=new Oe.yU,this.isNgZoneEnabled=(0,v.WQX)(v.SKi)instanceof v.SKi&&v.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_t(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(b=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void($l(b)&&this._events.next(b));if(b instanceof Na)Qr(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(b instanceof ms)this.rawUrlTree=N.rawUrl;else if(b instanceof xa){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(z,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(b instanceof gn)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(b instanceof io)0!==b.code&&1!==b.code&&(this.navigated=!0),(3===b.code||2===b.code)&&this.restoreHistory(N);else if(b instanceof br){const z=this.urlHandlingStrategy.merge(b.url,N.currentRawUrl),J={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qr(N.source)};this.scheduleNavigation(z,ro,null,J,{resolve:N.resolve,reject:N.reject,promise:N.promise})}b instanceof es&&this.restoreHistory(N,!0),b instanceof Zi&&(this.navigated=!0),$l(b)&&this._events.next(b)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ro,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const b="popstate"===I.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,b,I.state)},0)}))}navigateToSyncWithBrowser(I,b,N){const z={replaceUrl:!0},J=N?.navigationId?N:null;if(N){const Me={...N};delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&(z.state=Me)}const Ue=this.parseUrl(I);this.scheduleNavigation(Ue,b,J,z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(mr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,b={}){const{relativeTo:N,queryParams:z,fragment:J,queryParamsHandling:Ue,preserveFragment:Me}=b,Ct=Me?this.currentUrlTree.fragment:J;let vn,dn=null;switch(Ue){case"merge":dn={...this.currentUrlTree.queryParams,...z};break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=z||null}null!==dn&&(dn=this.removeEmptyProps(dn));try{vn=ps(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),vn=this.currentUrlTree.root}return Ne(vn,I,dn,Ct??null)}navigateByUrl(I,b={skipLocationChange:!1}){const N=Er(I)?I:this.parseUrl(I),z=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(z,ro,null,b)}navigate(I,b={skipLocationChange:!1}){return function po(E){for(let D=0;D<E.length;D++)if(null==E[D])throw new v.wOt(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,b),b)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let b;try{b=this.urlSerializer.parse(I)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,I)}return b}isActive(I,b){let N;if(N=!0===b?{...sh}:!1===b?{...ha}:b,Er(I))return vr(this.currentUrlTree,I,N);const z=this.parseUrl(I);return vr(this.currentUrlTree,z,N)}removeEmptyProps(I){return Object.keys(I).reduce((b,N)=>{const z=I[N];return null!=z&&(b[N]=z),b},{})}scheduleNavigation(I,b,N,z,J){if(this.disposed)return Promise.resolve(!1);let Ue,Me,Ct;J?(Ue=J.resolve,Me=J.reject,Ct=J.promise):Ct=new Promise((vn,In)=>{Ue=vn,Me=In});const dn=this.pendingTasks.add();return fo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(dn))}),this.navigationTransitions.handleNavigationRequest({source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:z,resolve:Ue,reject:Me,promise:Ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ct.catch(vn=>Promise.reject(vn))}setBrowserUrl(I,b){const N=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl){const J={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId)};this.location.replaceState(N,"",J)}else{const z={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId+1)};this.location.go(N,"",z)}}restoreHistory(I,b=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-this.browserPageId;0!==z?this.location.historyGo(z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===z&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,b){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:b}:{navigationId:I}}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function $l(E){return!(E instanceof gn||E instanceof br)}let ku=(()=>{class E{constructor(I,b,N,z,J,Ue){this.router=I,this.route=b,this.tabIndexAttribute=N,this.renderer=z,this.el=J,this.locationStrategy=Ue,this.href=null,this.commands=null,this.onChanges=new Ht.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Me=J.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Me||"area"===Me,this.isAnchorElement?this.subscription=I.events.subscribe(Ct=>{Ct instanceof Zi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,b,N,z,J){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||b||N||z||J||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,v.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,b){const N=this.renderer,z=this.el.nativeElement;null!==b?N.setAttribute(z,I,b):N.removeAttribute(z,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(b){return new(b||E)(v.rXU(nr),v.rXU(mn),v.kS0("tabindex"),v.rXU(v.sFG),v.rXU(v.aKT),v.rXU(on.hb))}}static{this.\u0275dir=v.FsC({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,N){1&b&&v.bIt("click",function(J){return N.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&b&&v.BMQ("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",v.L39],skipLocationChange:["skipLocationChange","skipLocationChange",v.L39],replaceUrl:["replaceUrl","replaceUrl",v.L39],routerLink:"routerLink"},standalone:!0,features:[v.GFd,v.OA$]})}}return E})();class fa{}let Lu=(()=>{class E{constructor(I,b,N,z,J){this.router=I,this.injector=N,this.preloadingStrategy=z,this.loader=J}setUpPreloading(){this.subscription=this.router.events.pipe((0,St.p)(I=>I instanceof Zi),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,b){const N=[];for(const z of b){z.providers&&!z._injector&&(z._injector=(0,v.Ol2)(z.providers,I,`Route: ${z.path}`));const J=z._injector??I,Ue=z._loadedInjector??J;(z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent)&&N.push(this.preloadConfig(J,z)),(z.children||z._loadedRoutes)&&N.push(this.processRoutes(Ue,z.children??z._loadedRoutes))}return(0,G.H)(N).pipe((0,ht.U)())}preloadConfig(I,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(I,b):(0,de.of)(null);const z=N.pipe((0,ce.Z)(J=>null===J?(0,de.of)(void 0):(b._loadedRoutes=J.routes,b._loadedInjector=J.injector,this.processRoutes(J.injector??I,J.routes))));if(b.loadComponent&&!b._loadedComponent){const J=this.loader.loadComponent(b);return(0,G.H)([z,J]).pipe((0,ht.U)())}return z})}static{this.\u0275fac=function(b){return new(b||E)(v.KVO(nr),v.KVO(v.Ql9),v.KVO(v.uvJ),v.KVO(fa),v.KVO(Bn))}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const Nc=new v.nKC("");let Yt=(()=>{class E{constructor(I,b,N,z,J={}){this.urlSerializer=I,this.transitions=b,this.viewportScroller=N,this.zone=z,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Na?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Zi?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof ms&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof xi&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,b){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xi(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(b){v.QTQ()}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac})}}return E})();function ss(E,D){return{\u0275kind:E,\u0275providers:D}}function Oc(){const E=(0,v.WQX)(v.zZn);return D=>{const I=E.get(v.o8S);if(D!==I.components[0])return;const b=E.get(nr),N=E.get(zl);1===E.get(go)&&b.initialNavigation(),E.get(Rn,null,v.$GK.Optional)?.setUpPreloading(),E.get(Nc,null,v.$GK.Optional)?.init(),b.resetRootComponentType(I.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const zl=new v.nKC("",{factory:()=>new Ht.B}),go=new v.nKC("",{providedIn:"root",factory:()=>1}),Rn=new v.nKC("");function Vo(E){return ss(0,[{provide:Rn,useExisting:Lu},{provide:fa,useExisting:E}])}const ga=new v.nKC("ROUTER_FORROOT_GUARD"),kc=[on.aZ,{provide:It,useClass:Ur},nr,Mn,{provide:mn,useFactory:function kn(E){return E.routerState.root},deps:[nr]},Bn,[]];function ah(){return new v.NEm("Router",nr)}let uh=(()=>{class E{constructor(I){}static forRoot(I,b){return{ngModule:E,providers:[kc,[],{provide:Un,multi:!0,useValue:I},{provide:ga,useFactory:ma,deps:[[nr,new v.Xx1,new v.kdw]]},{provide:is,useValue:b||{}},b?.useHash?{provide:on.hb,useClass:on.fw}:{provide:on.hb,useClass:on.Sm},{provide:Nc,useFactory:()=>{const E=(0,v.WQX)(on.Xr),D=(0,v.WQX)(v.SKi),I=(0,v.WQX)(is),b=(0,v.WQX)(tr),N=(0,v.WQX)(It);return I.scrollOffset&&E.setOffset(I.scrollOffset),new Yt(N,b,E,D,I)}},b?.preloadingStrategy?Vo(b.preloadingStrategy).\u0275providers:[],{provide:v.NEm,multi:!0,useFactory:ah},b?.initialNavigation?rr(b):[],b?.bindToComponentInputs?ss(8,[er,{provide:cr,useExisting:er}]).\u0275providers:[],[{provide:as,useFactory:Oc},{provide:v.iLQ,multi:!0,useExisting:as}]]}}static forChild(I){return{ngModule:E,providers:[{provide:Un,multi:!0,useValue:I}]}}static{this.\u0275fac=function(b){return new(b||E)(v.KVO(ga,8))}}static{this.\u0275mod=v.$C({type:E})}static{this.\u0275inj=v.G2t({})}}return E})();function ma(E){return"guarded"}function rr(E){return["disabled"===E.initialNavigation?ss(3,[{provide:v.hnV,multi:!0,useFactory:()=>{const D=(0,v.WQX)(nr);return()=>{D.setUpLocationChangeListener()}}},{provide:go,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?ss(2,[{provide:go,useValue:0},{provide:v.hnV,multi:!0,deps:[v.zZn],useFactory:D=>{const I=D.get(on.hj,Promise.resolve());return()=>I.then(()=>new Promise(b=>{const N=D.get(nr),z=D.get(zl);fo(N,()=>{b(!0)}),D.get(tr).afterPreactivation=()=>(b(!0),z.closed?(0,de.of)(void 0):z),N.initialNavigation()}))}}]).\u0275providers:[]]}const as=new v.nKC("")},3345:(Rt,Be,U)=>{U.d(Be,{A:()=>yt});var v=U(1076),ee=U(1362),re=U(7852),Q=U(8041);class G{constructor(vt,dt){this._delegate=vt,this.firebase=dt,(0,re._addComponent)(vt,new ee.uA("app-compat",()=>this,"PUBLIC")),this.container=vt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(vt){this._delegate.automaticDataCollectionEnabled=vt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(vt=>{this._delegate.checkDestroyed(),vt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,re.deleteApp)(this._delegate)))}_getService(vt,dt=re._DEFAULT_ENTRY_NAME){var Vt;this._delegate.checkDestroyed();const _e=this._delegate.container.getProvider(vt);return!_e.isInitialized()&&"EXPLICIT"===(null===(Vt=_e.getComponent())||void 0===Vt?void 0:Vt.instantiationMode)&&_e.initialize(),_e.getImmediate({identifier:dt})}_removeServiceInstance(vt,dt=re._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(vt).clearInstance(dt)}_addComponent(vt){(0,re._addComponent)(this._delegate,vt)}_addOrOverwriteComponent(vt){(0,re._addOrOverwriteComponent)(this._delegate,vt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new v.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Se(){const st=function He(st){const vt={},dt={__esModule:!0,initializeApp:function Te(Oe,Je={}){const wt=re.initializeApp(Oe,Je);if((0,v.gR)(vt,wt.name))return vt[wt.name];const je=new st(wt,dt);return vt[wt.name]=je,je},app:_e,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function ue(Oe){const Je=Oe.name,wt=Je.replace("-compat","");if(re._registerComponent(Oe)&&"PUBLIC"===Oe.type){const je=(Ht=_e())=>{if("function"!=typeof Ht[wt])throw ve.create("invalid-app-argument",{appName:Je});return Ht[wt]()};void 0!==Oe.serviceProps&&(0,v.zw)(je,Oe.serviceProps),dt[wt]=je,st.prototype[wt]=function(...Ht){return this._getService.bind(this,Je).apply(this,Oe.multipleInstances?Ht:[])}}return"PUBLIC"===Oe.type?dt[wt]:null},removeApp:function Vt(Oe){delete vt[Oe]},useAsService:function ke(Oe,Je){return"serverAuth"===Je?null:Je},modularAPIs:re}};function _e(Oe){if(!(0,v.gR)(vt,Oe=Oe||re._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Oe});return vt[Oe]}return dt.default=dt,Object.defineProperty(dt,"apps",{get:function Ke(){return Object.keys(vt).map(Oe=>vt[Oe])}}),_e.App=st,dt}(G);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function vt(dt){(0,v.zw)(st,dt)},createSubscribe:v.tD,ErrorFactory:v.FA,deepExtend:v.zw}),st}(),te=new Q.Vy("@firebase/app-compat");try{const st=(0,v.mS)();if(void 0!==st.firebase){te.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const vt=st.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&te.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const yt=X;!function Ye(st){(0,re.registerVersion)("@firebase/app-compat","0.2.42",st)}()},7852:(Rt,Be,U)=>{U.r(Be),U.d(Be,{FirebaseError:()=>Q.g,SDK_VERSION:()=>Ur,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>Fr,_addOrOverwriteComponent:()=>to,_apps:()=>Pr,_clearComponents:()=>Vr,_components:()=>bn,_getProvider:()=>Gr,_isFirebaseApp:()=>Sn,_isFirebaseServerApp:()=>ct,_registerComponent:()=>at,_removeServiceInstance:()=>un,_serverApps:()=>vr,deleteApp:()=>Ji,getApp:()=>wi,getApps:()=>Kr,initializeApp:()=>Xi,initializeServerApp:()=>Ir,onLog:()=>k,registerVersion:()=>W,setLogLevel:()=>B});var v=U(467),ee=U(1362),re=U(8041),Q=U(1076);const G=(Ne,Ie)=>Ie.some(Xe=>Ne instanceof Xe);let de,ve;const X=new WeakMap,te=new WeakMap,me=new WeakMap,tt=new WeakMap,Ye=new WeakMap;let vt={get(Ne,Ie,Xe){if(Ne instanceof IDBTransaction){if("done"===Ie)return te.get(Ne);if("objectStoreNames"===Ie)return Ne.objectStoreNames||me.get(Ne);if("store"===Ie)return Xe.objectStoreNames[1]?void 0:Xe.objectStore(Xe.objectStoreNames[0])}return Te(Ne[Ie])},set:(Ne,Ie,Xe)=>(Ne[Ie]=Xe,!0),has:(Ne,Ie)=>Ne instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in Ne};function _e(Ne){return"function"==typeof Ne?function Vt(Ne){return Ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ne)?function(...Ie){return Ne.apply(Ke(this),Ie),Te(X.get(this))}:function(...Ie){return Te(Ne.apply(Ke(this),Ie))}:function(Ie,...Xe){const At=Ne.call(Ke(this),Ie,...Xe);return me.set(At,Ie.sort?Ie.sort():[Ie]),Te(At)}}(Ne):(Ne instanceof IDBTransaction&&function st(Ne){if(te.has(Ne))return;const Ie=new Promise((Xe,At)=>{const Nt=()=>{Ne.removeEventListener("complete",Qt),Ne.removeEventListener("error",nn),Ne.removeEventListener("abort",nn)},Qt=()=>{Xe(),Nt()},nn=()=>{At(Ne.error||new DOMException("AbortError","AbortError")),Nt()};Ne.addEventListener("complete",Qt),Ne.addEventListener("error",nn),Ne.addEventListener("abort",nn)});te.set(Ne,Ie)}(Ne),G(Ne,function He(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ne,vt):Ne)}function Te(Ne){if(Ne instanceof IDBRequest)return function yt(Ne){const Ie=new Promise((Xe,At)=>{const Nt=()=>{Ne.removeEventListener("success",Qt),Ne.removeEventListener("error",nn)},Qt=()=>{Xe(Te(Ne.result)),Nt()},nn=()=>{At(Ne.error),Nt()};Ne.addEventListener("success",Qt),Ne.addEventListener("error",nn)});return Ie.then(Xe=>{Xe instanceof IDBCursor&&X.set(Xe,Ne)}).catch(()=>{}),Ye.set(Ie,Ne),Ie}(Ne);if(tt.has(Ne))return tt.get(Ne);const Ie=_e(Ne);return Ie!==Ne&&(tt.set(Ne,Ie),Ye.set(Ie,Ne)),Ie}const Ke=Ne=>Ye.get(Ne),Oe=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],wt=new Map;function je(Ne,Ie){if(!(Ne instanceof IDBDatabase)||Ie in Ne||"string"!=typeof Ie)return;if(wt.get(Ie))return wt.get(Ie);const Xe=Ie.replace(/FromIndex$/,""),At=Ie!==Xe,Nt=Je.includes(Xe);if(!(Xe in(At?IDBIndex:IDBObjectStore).prototype)||!Nt&&!Oe.includes(Xe))return;const Qt=function(){var nn=(0,v.A)(function*(Tn,...Zn){const Br=this.transaction(Tn,Nt?"readwrite":"readonly");let Cn=Br.store;return At&&(Cn=Cn.index(Zn.shift())),(yield Promise.all([Cn[Xe](...Zn),Nt&&Br.done]))[0]});return function(Zn){return nn.apply(this,arguments)}}();return wt.set(Ie,Qt),Qt}!function dt(Ne){vt=Ne(vt)}(Ne=>({...Ne,get:(Ie,Xe,At)=>je(Ie,Xe)||Ne.get(Ie,Xe,At),has:(Ie,Xe)=>!!je(Ie,Xe)||Ne.has(Ie,Xe)}));class Ht{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function on(Ne){const Ie=Ne.getComponent();return"VERSION"===Ie?.type}(Xe)){const At=Xe.getImmediate();return`${At.library}/${At.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Jt="@firebase/app",Jn="0.10.12",xn=new re.Vy("@firebase/app"),Wt="[DEFAULT]",fr={[Jt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Pr=new Map,vr=new Map,bn=new Map;function Fr(Ne,Ie){try{Ne.container.addComponent(Ie)}catch(Xe){xn.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Ne.name}`,Xe)}}function to(Ne,Ie){Ne.container.addOrOverwriteComponent(Ie)}function at(Ne){const Ie=Ne.name;if(bn.has(Ie))return xn.debug(`There were multiple attempts to register component ${Ie}.`),!1;bn.set(Ie,Ne);for(const Xe of Pr.values())Fr(Xe,Ne);for(const Xe of vr.values())Fr(Xe,Ne);return!0}function Gr(Ne,Ie){const Xe=Ne.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ne.container.getProvider(Ie)}function un(Ne,Ie,Xe=Wt){Gr(Ne,Ie).clearInstance(Xe)}function Sn(Ne){return void 0!==Ne.options}function ct(Ne){return void 0!==Ne.settings}function Vr(){bn.clear()}const pr=new Q.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class On{constructor(Ie,Xe,At){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new ee.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}class It extends On{constructor(Ie,Xe,At,Nt){const Qt=void 0!==Xe.automaticDataCollectionEnabled&&Xe.automaticDataCollectionEnabled,nn={name:At,automaticDataCollectionEnabled:Qt};super(void 0!==Ie.apiKey?Ie:Ie.options,nn,Nt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Qt},Xe),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Xe.releaseOnDeref=void 0,W(Jt,Jn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ie){this.isDeleted||(this._refCount++,void 0!==Ie&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ie,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ji(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pr.create("server-app-deleted")}}const Ur="10.14.0";function Xi(Ne,Ie={}){let Xe=Ne;"object"!=typeof Ie&&(Ie={name:Ie});const At=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},Ie),Nt=At.name;if("string"!=typeof Nt||!Nt)throw pr.create("bad-app-name",{appName:String(Nt)});if(Xe||(Xe=(0,Q.T9)()),!Xe)throw pr.create("no-options");const Qt=Pr.get(Nt);if(Qt){if((0,Q.bD)(Xe,Qt.options)&&(0,Q.bD)(At,Qt.config))return Qt;throw pr.create("duplicate-app",{appName:Nt})}const nn=new ee.h1(Nt);for(const Zn of bn.values())nn.addComponent(Zn);const Tn=new On(Xe,At,nn);return Pr.set(Nt,Tn),Tn}function Ir(Ne,Ie){if((0,Q.Bd)()&&!(0,Q.p7)())throw pr.create("invalid-server-app-environment");let Xe;void 0===Ie.automaticDataCollectionEnabled&&(Ie.automaticDataCollectionEnabled=!1),Xe=Sn(Ne)?Ne.options:Ne;const At=Object.assign(Object.assign({},Ie),Xe);if(void 0!==At.releaseOnDeref&&delete At.releaseOnDeref,void 0!==Ie.releaseOnDeref&&typeof FinalizationRegistry>"u")throw pr.create("finalization-registry-not-supported",{});const Qt=""+(Br=JSON.stringify(At),[...Br].reduce((Cn,Us)=>Math.imul(31,Cn)+Us.charCodeAt(0)|0,0)),nn=vr.get(Qt);var Br;if(nn)return nn.incRefCount(Ie.releaseOnDeref),nn;const Tn=new ee.h1(Qt);for(const Br of bn.values())Tn.addComponent(Br);const Zn=new It(Xe,Ie,Qt,Tn);return vr.set(Qt,Zn),Zn}function wi(Ne=Wt){const Ie=Pr.get(Ne);if(!Ie&&Ne===Wt&&(0,Q.T9)())return Xi();if(!Ie)throw pr.create("no-app",{appName:Ne});return Ie}function Kr(){return Array.from(Pr.values())}function Ji(Ne){return ze.apply(this,arguments)}function ze(){return(ze=(0,v.A)(function*(Ne){let Ie=!1;const Xe=Ne.name;Pr.has(Xe)?(Ie=!0,Pr.delete(Xe)):vr.has(Xe)&&Ne.decRefCount()<=0&&(vr.delete(Xe),Ie=!0),Ie&&(yield Promise.all(Ne.container.getProviders().map(At=>At.delete())),Ne.isDeleted=!0)})).apply(this,arguments)}function W(Ne,Ie,Xe){var At;let Nt=null!==(At=fr[Ne])&&void 0!==At?At:Ne;Xe&&(Nt+=`-${Xe}`);const Qt=Nt.match(/\s|\//),nn=Ie.match(/\s|\//);if(Qt||nn){const Tn=[`Unable to register library "${Nt}" with version "${Ie}":`];return Qt&&Tn.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),Qt&&nn&&Tn.push("and"),nn&&Tn.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void xn.warn(Tn.join(" "))}at(new ee.uA(`${Nt}-version`,()=>({library:Nt,version:Ie}),"VERSION"))}function k(Ne,Ie){if(null!==Ne&&"function"!=typeof Ne)throw pr.create("invalid-log-argument");(0,re.Ey)(Ne,Ie)}function B(Ne){(0,re.He)(Ne)}const ne="firebase-heartbeat-database",ae=1,nt="firebase-heartbeat-store";let lt=null;function jt(){return lt||(lt=function ue(Ne,Ie,{blocked:Xe,upgrade:At,blocking:Nt,terminated:Qt}={}){const nn=indexedDB.open(Ne,Ie),Tn=Te(nn);return At&&nn.addEventListener("upgradeneeded",Zn=>{At(Te(nn.result),Zn.oldVersion,Zn.newVersion,Te(nn.transaction),Zn)}),Xe&&nn.addEventListener("blocked",Zn=>Xe(Zn.oldVersion,Zn.newVersion,Zn)),Tn.then(Zn=>{Qt&&Zn.addEventListener("close",()=>Qt()),Nt&&Zn.addEventListener("versionchange",Br=>Nt(Br.oldVersion,Br.newVersion,Br))}).catch(()=>{}),Tn}(ne,ae,{upgrade:(Ne,Ie)=>{if(0===Ie)try{Ne.createObjectStore(nt)}catch(Xe){console.warn(Xe)}}}).catch(Ne=>{throw pr.create("idb-open",{originalErrorMessage:Ne.message})})),lt}function pn(){return(pn=(0,v.A)(function*(Ne){try{const Xe=(yield jt()).transaction(nt),At=yield Xe.objectStore(nt).get(Zr(Ne));return yield Xe.done,At}catch(Ie){if(Ie instanceof Q.g)xn.warn(Ie.message);else{const Xe=pr.create("idb-get",{originalErrorMessage:Ie?.message});xn.warn(Xe.message)}}})).apply(this,arguments)}function Dn(Ne,Ie){return cn.apply(this,arguments)}function cn(){return(cn=(0,v.A)(function*(Ne,Ie){try{const At=(yield jt()).transaction(nt,"readwrite");yield At.objectStore(nt).put(Ie,Zr(Ne)),yield At.done}catch(Xe){if(Xe instanceof Q.g)xn.warn(Xe.message);else{const At=pr.create("idb-set",{originalErrorMessage:Xe?.message});xn.warn(At.message)}}})).apply(this,arguments)}function Zr(Ne){return`${Ne.name}!${Ne.options.appId}`}class ei{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Er(Xe),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Ie=this;return(0,v.A)(function*(){var Xe,At;try{const Qt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nn=Or();return null==(null===(Xe=Ie._heartbeatsCache)||void 0===Xe?void 0:Xe.heartbeats)&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise,null==(null===(At=Ie._heartbeatsCache)||void 0===At?void 0:At.heartbeats))||Ie._heartbeatsCache.lastSentHeartbeatDate===nn||Ie._heartbeatsCache.heartbeats.some(Tn=>Tn.date===nn)?void 0:(Ie._heartbeatsCache.heartbeats.push({date:nn,agent:Qt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Tn=>{const Zn=new Date(Tn.date).valueOf();return Date.now()-Zn<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache))}catch(Nt){xn.warn(Nt)}})()}getHeartbeatsHeader(){var Ie=this;return(0,v.A)(function*(){var Xe;try{if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null==(null===(Xe=Ie._heartbeatsCache)||void 0===Xe?void 0:Xe.heartbeats)||0===Ie._heartbeatsCache.heartbeats.length)return"";const At=Or(),{heartbeatsToSend:Nt,unsentEntries:Qt}=function Ai(Ne,Ie=1024){const Xe=[];let At=Ne.slice();for(const Nt of Ne){const Qt=Xe.find(nn=>nn.agent===Nt.agent);if(Qt){if(Qt.dates.push(Nt.date),hn(Xe)>Ie){Qt.dates.pop();break}}else if(Xe.push({agent:Nt.agent,dates:[Nt.date]}),hn(Xe)>Ie){Xe.pop();break}At=At.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:At}}(Ie._heartbeatsCache.heartbeats),nn=(0,Q.Uj)(JSON.stringify({version:2,heartbeats:Nt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=At,Qt.length>0?(Ie._heartbeatsCache.heartbeats=Qt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),nn}catch(At){return xn.warn(At),""}})()}}function Or(){return(new Date).toISOString().substring(0,10)}class Er{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.A)(function*(){return!!(0,Q.zW)()&&(0,Q.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,v.A)(function*(){if(yield Ie._canUseIndexedDBPromise){const At=yield function oe(Ne){return pn.apply(this,arguments)}(Ie.app);return At?.heartbeats?At:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ie){var Xe=this;return(0,v.A)(function*(){var At;if(yield Xe._canUseIndexedDBPromise){const Qt=yield Xe.read();return Dn(Xe.app,{lastSentHeartbeatDate:null!==(At=Ie.lastSentHeartbeatDate)&&void 0!==At?At:Qt.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var Xe=this;return(0,v.A)(function*(){var At;if(yield Xe._canUseIndexedDBPromise){const Qt=yield Xe.read();return Dn(Xe.app,{lastSentHeartbeatDate:null!==(At=Ie.lastSentHeartbeatDate)&&void 0!==At?At:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Ie.heartbeats]})}})()}}function hn(Ne){return(0,Q.Uj)(JSON.stringify({version:2,heartbeats:Ne})).length}!function ps(Ne){at(new ee.uA("platform-logger",Ie=>new Ht(Ie),"PRIVATE")),at(new ee.uA("heartbeat",Ie=>new ei(Ie),"PRIVATE")),W(Jt,Jn,Ne),W(Jt,Jn,"esm2017"),W("fire-js","")}("")},1362:(Rt,Be,U)=>{U.d(Be,{h1:()=>He,uA:()=>re});var v=U(467),ee=U(1076);class re{constructor(X,te,me){this.name=X,this.instanceFactory=te,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const Q="[DEFAULT]";class G{constructor(X,te){this.name=X,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const te=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(te)){const me=new ee.cY;if(this.instancesDeferred.set(te,me),this.isInitialized(te)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:te});tt&&me.resolve(tt)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(X){var te;const me=this.normalizeInstanceIdentifier(X?.identifier),tt=null!==(te=X?.optional)&&void 0!==te&&te;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(Ye){if(tt)return null;throw Ye}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function ve(Se){return"EAGER"===Se.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[te,me]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(te);try{const Ye=this.getOrInitializeService({instanceIdentifier:tt});me.resolve(Ye)}catch{}}}}clearInstance(X=Q){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,v.A)(function*(){const te=Array.from(X.instances.values());yield Promise.all([...te.filter(me=>"INTERNAL"in me).map(me=>me.INTERNAL.delete()),...te.filter(me=>"_delete"in me).map(me=>me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=Q){return this.instances.has(X)}getOptions(X=Q){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:te={}}=X,me=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(me))throw Error(`${this.name}(${me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:me,options:te});for(const[Ye,yt]of this.instancesDeferred.entries())me===this.normalizeInstanceIdentifier(Ye)&&yt.resolve(tt);return tt}onInit(X,te){var me;const tt=this.normalizeInstanceIdentifier(te),Ye=null!==(me=this.onInitCallbacks.get(tt))&&void 0!==me?me:new Set;Ye.add(X),this.onInitCallbacks.set(tt,Ye);const yt=this.instances.get(tt);return yt&&X(yt,tt),()=>{Ye.delete(X)}}invokeOnInitCallbacks(X,te){const me=this.onInitCallbacks.get(te);if(me)for(const tt of me)try{tt(X,te)}catch{}}getOrInitializeService({instanceIdentifier:X,options:te={}}){let me=this.instances.get(X);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=X,Se===Q?void 0:Se),options:te}),this.instances.set(X,me),this.instancesOptions.set(X,te),this.invokeOnInitCallbacks(me,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,me)}catch{}var Se;return me||null}normalizeInstanceIdentifier(X=Q){return this.component?this.component.multipleInstances?X:Q:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const te=this.getProvider(X.name);if(te.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);te.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const te=new G(X,this);return this.providers.set(X,te),te}getProviders(){return Array.from(this.providers.values())}}},8041:(Rt,Be,U)=>{U.d(Be,{$b:()=>ee,Ey:()=>Se,He:()=>He,Vy:()=>ve});const v=[];var ee=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(ee||{});const re={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Q=ee.INFO,G={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(X,te,...me)=>{if(te<X.logLevel)return;const tt=(new Date).toISOString(),Ye=G[te];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[Ye](`[${tt}]  ${X.name}:`,...me)};class ve{constructor(te){this.name=te,this._logLevel=Q,this._logHandler=de,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in ee))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?re[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...te),this._logHandler(this,ee.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...te),this._logHandler(this,ee.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...te),this._logHandler(this,ee.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...te),this._logHandler(this,ee.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...te),this._logHandler(this,ee.ERROR,...te)}}function He(X){v.forEach(te=>{te.setLogLevel(X)})}function Se(X,te){for(const me of v){let tt=null;te&&te.level&&(tt=re[te.level]),me.userLogHandler=null===X?null:(Ye,yt,...st)=>{const vt=st.map(dt=>{if(null==dt)return null;if("string"==typeof dt)return dt;if("number"==typeof dt||"boolean"==typeof dt)return dt.toString();if(dt instanceof Error)return dt.message;try{return JSON.stringify(dt)}catch{return null}}).filter(dt=>dt).join(" ");yt>=(tt??Ye.logLevel)&&X({level:ee[yt].toLowerCase(),message:vt,args:st,type:Ye.name})}}}},7935:(Rt,Be,U)=>{U.d(Be,{A:()=>v.A});var v=U(3345);v.A.registerVersion("firebase","10.14.0","app-compat")},7955:(Rt,Be,U)=>{var v=U(467),ee=U(3345),re=U(7852),Q=U(1076),G=U(8041),de=U(1635),ve=U(1362);const Se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const yt=function tt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},st=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vt=new Q.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vt=new G.Vy("@firebase/auth");function Te(m,...l){Vt.logLevel<=G.$b.ERROR&&Vt.error(`Auth (${re.SDK_VERSION}): ${m}`,...l)}function Ke(m,...l){throw wt(m,...l)}function ue(m,...l){return wt(m,...l)}function ke(m,l,h){const y=Object.assign(Object.assign({},st()),{[l]:h});return new Q.FA("auth","Firebase",y).create(l,{appName:m.name})}function Oe(m){return ke(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Je(m,l,h){if(!(l instanceof h))throw h.name!==l.constructor.name&&Ke(m,"argument-error"),ke(m,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wt(m,...l){if("string"!=typeof m){const h=l[0],y=[...l.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(h,...y)}return vt.create(m,...l)}function je(m,l,...h){if(!m)throw wt(l,...h)}function Ht(m){const l="INTERNAL ASSERTION FAILED: "+m;throw Te(l),new Error(l)}function on(m,l){m||Ht(l)}function Jt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Jn(){return"http:"===xn()||"https:"===xn()}function xn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class ce{constructor(l,h){this.shortDelay=l,this.longDelay=h,on(h>l,"Short delay should be less than long delay!"),this.isMobile=(0,Q.jZ)()||(0,Q.lV)()}get(){return function Pt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jn()||(0,Q.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pe(m,l){on(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return l?`${h}${l.startsWith("/")?l.slice(1):l}`:h}class be{static initialize(l,h,y){this.fetchImpl=l,h&&(this.headersImpl=h),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},We=new ce(3e4,6e4);function Le(m,l){return m.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:m.tenantId}):l}function ot(m,l,h,y){return mt.apply(this,arguments)}function mt(){return(mt=(0,v.A)(function*(m,l,h,y,M={}){return $n(m,M,(0,v.A)(function*(){let j={},ie={};y&&("GET"===l?ie=y:j={body:JSON.stringify(y)});const Ee=(0,Q.Am)(Object.assign({key:m.config.apiKey},ie)).slice(1),Qe=yield m._getAdditionalHeaders();Qe["Content-Type"]="application/json",m.languageCode&&(Qe["X-Firebase-Locale"]=m.languageCode);const Dt=Object.assign({method:l,headers:Qe},j);return(0,Q.c1)()||(Dt.referrerPolicy="no-referrer"),be.fetch()(Hn(m,m.config.apiHost,h,Ee),Dt)}))})).apply(this,arguments)}function $n(m,l,h){return zt.apply(this,arguments)}function zt(){return(zt=(0,v.A)(function*(m,l,h){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},Ae),l);try{const M=new ht(m),j=yield Promise.race([h(),M.promise]);M.clearNetworkTimeout();const ie=yield j.json();if("needConfirmation"in ie)throw gt(m,"account-exists-with-different-credential",ie);if(j.ok&&!("errorMessage"in ie))return ie;{const Ee=j.ok?ie.errorMessage:ie.error.message,[Qe,Dt]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qe)throw gt(m,"credential-already-in-use",ie);if("EMAIL_EXISTS"===Qe)throw gt(m,"email-already-in-use",ie);if("USER_DISABLED"===Qe)throw gt(m,"user-disabled",ie);const Mt=y[Qe]||Qe.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw ke(m,Mt,Dt);Ke(m,Mt)}}catch(M){if(M instanceof Q.g)throw M;Ke(m,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function $e(m,l,h,y){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,v.A)(function*(m,l,h,y,M={}){const j=yield ot(m,l,h,y,M);return"mfaPendingCredential"in j&&Ke(m,"multi-factor-auth-required",{_serverResponse:j}),j})).apply(this,arguments)}function Hn(m,l,h,y){const M=`${l}${h}?${y}`;return m.config.emulator?pe(m.config,M):`${m.config.apiScheme}://${M}`}function sn(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ht{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((h,y)=>{this.timer=setTimeout(()=>y(ue(this.auth,"network-request-failed")),We.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gt(m,l,h){const y={appName:m.name};h.email&&(y.email=h.email),h.phoneNumber&&(y.phoneNumber=h.phoneNumber);const M=ue(m,l,y);return M.customData._tokenResponse=h,M}function Lt(m){return void 0!==m&&void 0!==m.getResponse}function Ze(m){return void 0!==m&&void 0!==m.enterprise}class Re{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===l)return sn(h.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Xn(){return(Xn=(0,v.A)(function*(m){return(yield ot(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wr(m,l){return ir.apply(this,arguments)}function ir(){return(ir=(0,v.A)(function*(m,l){return ot(m,"GET","/v2/recaptchaConfig",Le(m,l))})).apply(this,arguments)}function an(){return(an=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function fr(){return(fr=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Pr(m,l){return vr.apply(this,arguments)}function vr(){return(vr=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function bn(m){if(m)try{const l=new Date(Number(m));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function at(){return(at=(0,v.A)(function*(m,l=!1){const h=(0,Q.Ku)(m),y=yield h.getIdToken(l),M=un(y);je(M&&M.exp&&M.auth_time&&M.iat,h.auth,"internal-error");const j="object"==typeof M.firebase?M.firebase:void 0,ie=j?.sign_in_provider;return{claims:M,token:y,authTime:bn(Gr(M.auth_time)),issuedAtTime:bn(Gr(M.iat)),expirationTime:bn(Gr(M.exp)),signInProvider:ie||null,signInSecondFactor:j?.sign_in_second_factor||null}})).apply(this,arguments)}function Gr(m){return 1e3*Number(m)}function un(m){const[l,h,y]=m.split(".");if(void 0===l||void 0===h||void 0===y)return Te("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,Q.u)(h);return M?JSON.parse(M):(Te("Failed to decode base64 JWT payload"),null)}catch(M){return Te("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Sn(m){const l=un(m);return je(l,"internal-error"),je(typeof l.exp<"u","internal-error"),je(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function ct(m,l){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,v.A)(function*(m,l,h=!1){if(h)return l;try{return yield l}catch(y){throw y instanceof Q.g&&function Xt({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class pr{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var h;if(l){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(l=!1){var h=this;if(!this.isRunning)return;const y=this.getInterval(l);this.timerId=setTimeout((0,v.A)(function*(){yield h.iteration()}),y)}iteration(){var l=this;return(0,v.A)(function*(){try{yield l.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&l.schedule(!0))}l.schedule()})()}}class On{constructor(l,h){this.createdAt=l,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function It(m){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,v.A)(function*(m){var l;const h=m.auth,y=yield m.getIdToken(),M=yield ct(m,Pr(h,{idToken:y}));je(M?.users.length,h,"internal-error");const j=M.users[0];m._notifyReloadListener(j);const ie=null!==(l=j.providerUserInfo)&&void 0!==l&&l.length?Kr(j.providerUserInfo):[],Ee=function wi(m,l){return[...m.filter(y=>!l.some(M=>M.providerId===y.providerId)),...l]}(m.providerData,ie),Mt=!!m.isAnonymous&&!(m.email&&j.passwordHash||Ee?.length),Ft={uid:j.localId,displayName:j.displayName||null,photoURL:j.photoUrl||null,email:j.email||null,emailVerified:j.emailVerified||!1,phoneNumber:j.phoneNumber||null,tenantId:j.tenantId||null,providerData:Ee,metadata:new On(j.createdAt,j.lastLoginAt),isAnonymous:Mt};Object.assign(m,Ft)})).apply(this,arguments)}function Ir(){return(Ir=(0,v.A)(function*(m){const l=(0,Q.Ku)(m);yield It(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Kr(m){return m.map(l=>{var{providerId:h}=l,y=(0,de.Tt)(l,["providerId"]);return{providerId:h,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function ze(){return(ze=(0,v.A)(function*(m,l){const h=yield $n(m,{},(0,v.A)(function*(){const y=(0,Q.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:M,apiKey:j}=m.config,ie=Hn(m,M,"/v1/token",`key=${j}`),Ee=yield m._getAdditionalHeaders();return Ee["Content-Type"]="application/x-www-form-urlencoded",be.fetch()(ie,{method:"POST",headers:Ee,body:y})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function k(){return(k=(0,v.A)(function*(m,l){return ot(m,"POST","/v2/accounts:revokeToken",Le(m,l))})).apply(this,arguments)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){je(l.idToken,"internal-error"),je(typeof l.idToken<"u","internal-error"),je(typeof l.refreshToken<"u","internal-error");const h="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Sn(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,h)}updateFromIdToken(l){je(0!==l.length,"internal-error");const h=Sn(l);this.updateTokensAndExpiration(l,null,h)}getToken(l,h=!1){var y=this;return(0,v.A)(function*(){return h||!y.accessToken||y.isExpired?(je(y.refreshToken,l,"user-token-expired"),y.refreshToken?(yield y.refresh(l,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,h){var y=this;return(0,v.A)(function*(){const{accessToken:M,refreshToken:j,expiresIn:ie}=yield function Ji(m,l){return ze.apply(this,arguments)}(l,h);y.updateTokensAndExpiration(M,j,Number(ie))})()}updateTokensAndExpiration(l,h,y){this.refreshToken=h||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(l,h){const{refreshToken:y,accessToken:M,expirationTime:j}=h,ie=new B;return y&&(je("string"==typeof y,"internal-error",{appName:l}),ie.refreshToken=y),M&&(je("string"==typeof M,"internal-error",{appName:l}),ie.accessToken=M),j&&(je("number"==typeof j,"internal-error",{appName:l}),ie.expirationTime=j),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return Ht("not implemented")}}function ne(m,l){je("string"==typeof m||typeof m>"u","internal-error",{appName:l})}class ae{constructor(l){var{uid:h,auth:y,stsTokenManager:M}=l,j=(0,de.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new On(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(l){var h=this;return(0,v.A)(function*(){const y=yield ct(h,h.stsTokenManager.getToken(h.auth,l));return je(y,h.auth,"internal-error"),h.accessToken!==y&&(h.accessToken=y,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),y})()}getIdTokenResult(l){return function to(m){return at.apply(this,arguments)}(this,l)}reload(){return function Xi(m){return Ir.apply(this,arguments)}(this)}_assign(l){this!==l&&(je(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(h=>Object.assign({},h)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const h=new ae(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(l){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,h=!1){var y=this;return(0,v.A)(function*(){let M=!1;l.idToken&&l.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(l),M=!0),h&&(yield It(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var l=this;return(0,v.A)(function*(){if((0,re._isFirebaseServerApp)(l.auth.app))return Promise.reject(Oe(l.auth));const h=yield l.getIdToken();return yield ct(l,function qt(m,l){return an.apply(this,arguments)}(l.auth,{idToken:h})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,h){var y,M,j,ie,Ee,Qe,Dt,Mt;const Ft=null!==(y=h.displayName)&&void 0!==y?y:void 0,Mr=null!==(M=h.email)&&void 0!==M?M:void 0,ls=null!==(j=h.phoneNumber)&&void 0!==j?j:void 0,lu=null!==(ie=h.photoURL)&&void 0!==ie?ie:void 0,To=null!==(Ee=h.tenantId)&&void 0!==Ee?Ee:void 0,cc=null!==(Qe=h._redirectEventId)&&void 0!==Qe?Qe:void 0,rl=null!==(Dt=h.createdAt)&&void 0!==Dt?Dt:void 0,Gf=null!==(Mt=h.lastLoginAt)&&void 0!==Mt?Mt:void 0,{uid:Kf,emailVerified:du,isAnonymous:wd,providerData:il,stsTokenManager:sl}=h;je(Kf&&sl,l,"internal-error");const qf=B.fromJSON(this.name,sl);je("string"==typeof Kf,l,"internal-error"),ne(Ft,l.name),ne(Mr,l.name),je("boolean"==typeof du,l,"internal-error"),je("boolean"==typeof wd,l,"internal-error"),ne(ls,l.name),ne(lu,l.name),ne(To,l.name),ne(cc,l.name),ne(rl,l.name),ne(Gf,l.name);const lc=new ae({uid:Kf,auth:l,email:Mr,emailVerified:du,displayName:Ft,isAnonymous:wd,photoURL:lu,phoneNumber:ls,tenantId:To,stsTokenManager:qf,createdAt:rl,lastLoginAt:Gf});return il&&Array.isArray(il)&&(lc.providerData=il.map(Qf=>Object.assign({},Qf))),cc&&(lc._redirectEventId=cc),lc}static _fromIdTokenResponse(l,h,y=!1){return(0,v.A)(function*(){const M=new B;M.updateFromServerResponse(h);const j=new ae({uid:h.localId,auth:l,stsTokenManager:M,isAnonymous:y});return yield It(j),j})()}static _fromGetAccountInfoResponse(l,h,y){return(0,v.A)(function*(){const M=h.users[0];je(void 0!==M.localId,"internal-error");const j=void 0!==M.providerUserInfo?Kr(M.providerUserInfo):[],ie=!(M.email&&M.passwordHash||j?.length),Ee=new B;Ee.updateFromIdToken(y);const Qe=new ae({uid:M.localId,auth:l,stsTokenManager:Ee,isAnonymous:ie}),Dt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:j,metadata:new On(M.createdAt,M.lastLoginAt),isAnonymous:!(M.email&&M.passwordHash||j?.length)};return Object.assign(Qe,Dt),Qe})()}}const nt=new Map;function lt(m){on(m instanceof Function,"Expected a class definition");let l=nt.get(m);return l?(on(l instanceof m,"Instance stored in cache mismatched with class"),l):(l=new m,nt.set(m,l),l)}const oe=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.A)(function*(){return!0})()}_set(h,y){var M=this;return(0,v.A)(function*(){M.storage[h]=y})()}_get(h){var y=this;return(0,v.A)(function*(){const M=y.storage[h];return void 0===M?null:M})()}_remove(h){var y=this;return(0,v.A)(function*(){delete y.storage[h]})()}_addListener(h,y){}_removeListener(h,y){}}return m.type="NONE",m})();function pn(m,l,h){return`firebase:${m}:${l}:${h}`}class Dn{constructor(l,h,y){this.persistence=l,this.auth=h,this.userKey=y;const{config:M,name:j}=this.auth;this.fullUserKey=pn(this.userKey,M.apiKey,j),this.fullPersistenceKey=pn("persistence",M.apiKey,j),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,v.A)(function*(){const h=yield l.persistence._get(l.fullUserKey);return h?ae._fromJSON(l.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var h=this;return(0,v.A)(function*(){if(h.persistence===l)return;const y=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=l,y?h.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,h,y="authUser"){return(0,v.A)(function*(){if(!h.length)return new Dn(lt(oe),l,y);const M=(yield Promise.all(h.map(function(){var Dt=(0,v.A)(function*(Mt){if(yield Mt._isAvailable())return Mt});return function(Mt){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let j=M[0]||lt(oe);const ie=pn(y,l.config.apiKey,l.name);let Ee=null;for(const Dt of h)try{const Mt=yield Dt._get(ie);if(Mt){const Ft=ae._fromJSON(l,Mt);Dt!==j&&(Ee=Ft),j=Dt;break}}catch{}const Qe=M.filter(Dt=>Dt._shouldAllowMigration);return j._shouldAllowMigration&&Qe.length?(j=Qe[0],Ee&&(yield j._set(ie,Ee.toJSON())),yield Promise.all(h.map(function(){var Dt=(0,v.A)(function*(Mt){if(Mt!==j)try{yield Mt._remove(ie)}catch{}});return function(Mt){return Dt.apply(this,arguments)}}())),new Dn(j,l,y)):new Dn(j,l,y)})()}}function cn(m){const l=m.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(ei(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Zr(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Ai(l))return"Blackberry";if(Er(l))return"Webos";if(pi(l))return"Safari";if((l.includes("chrome/")||gi(l))&&!l.includes("edge/"))return"Chrome";if(Or(l))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function Zr(m=(0,Q.ZQ)()){return/firefox\//i.test(m)}function pi(m=(0,Q.ZQ)()){const l=m.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function gi(m=(0,Q.ZQ)()){return/crios\//i.test(m)}function ei(m=(0,Q.ZQ)()){return/iemobile/i.test(m)}function Or(m=(0,Q.ZQ)()){return/android/i.test(m)}function Ai(m=(0,Q.ZQ)()){return/blackberry/i.test(m)}function Er(m=(0,Q.ZQ)()){return/webos/i.test(m)}function hn(m=(0,Q.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Xe(m=(0,Q.ZQ)()){return hn(m)||Or(m)||Er(m)||Ai(m)||/windows phone/i.test(m)||ei(m)}function At(m,l=[]){let h;switch(m){case"Browser":h=cn((0,Q.ZQ)());break;case"Worker":h=`${cn((0,Q.ZQ)())}-${m}`;break;default:h=m}const y=l.length?l.join(","):"FirebaseCore-web";return`${h}/JsCore/${re.SDK_VERSION}/${y}`}class Nt{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,h){const y=j=>new Promise((ie,Ee)=>{try{ie(l(j))}catch(Qe){Ee(Qe)}});y.onAbort=h,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(l){var h=this;return(0,v.A)(function*(){if(h.auth.currentUser===l)return;const y=[];try{for(const M of h.queue)yield M(l),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const j of y)try{j()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function nn(){return(nn=(0,v.A)(function*(m,l={}){return ot(m,"GET","/v2/passwordPolicy",Le(m,l))})).apply(this,arguments)}class Zn{constructor(l){var h,y,M,j;const ie=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=ie.minPasswordLength)&&void 0!==h?h:6,ie.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ie.maxPasswordLength),void 0!==ie.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ie.containsLowercaseCharacter),void 0!==ie.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ie.containsUppercaseCharacter),void 0!==ie.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ie.containsNumericCharacter),void 0!==ie.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ie.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=l.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(j=l.forceUpgradeOnSignin)&&void 0!==j&&j,this.schemaVersion=l.schemaVersion}validatePassword(l){var h,y,M,j,ie,Ee;const Qe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,Qe),this.validatePasswordCharacterOptions(l,Qe),Qe.isValid&&(Qe.isValid=null===(h=Qe.meetsMinPasswordLength)||void 0===h||h),Qe.isValid&&(Qe.isValid=null===(y=Qe.meetsMaxPasswordLength)||void 0===y||y),Qe.isValid&&(Qe.isValid=null===(M=Qe.containsLowercaseLetter)||void 0===M||M),Qe.isValid&&(Qe.isValid=null===(j=Qe.containsUppercaseLetter)||void 0===j||j),Qe.isValid&&(Qe.isValid=null===(ie=Qe.containsNumericCharacter)||void 0===ie||ie),Qe.isValid&&(Qe.isValid=null===(Ee=Qe.containsNonAlphanumericCharacter)||void 0===Ee||Ee),Qe}validatePasswordLengthOptions(l,h){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(h.meetsMinPasswordLength=l.length>=y),M&&(h.meetsMaxPasswordLength=l.length<=M)}validatePasswordCharacterOptions(l,h){let y;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let M=0;M<l.length;M++)y=l.charAt(M),this.updatePasswordCharacterOptionsStatuses(h,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(l,h,y,M,j){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=j))}}class Br{constructor(l,h,y,M){this.app=l,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Us(this),this.idTokenSubscription=new Us(this),this.beforeStateQueue=new Nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(l,h){var y=this;return h&&(this._popupRedirectResolver=lt(h)),this._initializationPromise=this.queue((0,v.A)(function*(){var M,j;if(!y._deleted&&(y.persistenceManager=yield Dn.create(y,l),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(h),y.lastNotifiedUid=(null===(j=y.currentUser)||void 0===j?void 0:j.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,v.A)(function*(){if(l._deleted)return;const h=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||h){if(l.currentUser&&h&&l.currentUser.uid===h.uid)return l._currentUser._assign(h),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(l){var h=this;return(0,v.A)(function*(){try{const y=yield Pr(h,{idToken:l}),M=yield ae._fromGetAccountInfoResponse(h,y,l);yield h.directlySetCurrentUser(M)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var h=this;return(0,v.A)(function*(){var y;if((0,re._isFirebaseServerApp)(h.app)){const Ee=h.app.settings.authIdToken;return Ee?new Promise(Qe=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(Ee).then(Qe,Qe))}):h.directlySetCurrentUser(null)}const M=yield h.assertedPersistence.getCurrentUser();let j=M,ie=!1;if(l&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Ee=null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId,Qe=j?._redirectEventId,Dt=yield h.tryRedirectSignIn(l);(!Ee||Ee===Qe)&&Dt?.user&&(j=Dt.user,ie=!0)}if(!j)return h.directlySetCurrentUser(null);if(!j._redirectEventId){if(ie)try{yield h.beforeStateQueue.runMiddleware(j)}catch(Ee){j=M,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Ee))}return j?h.reloadAndSetCurrentUserOrClear(j):h.directlySetCurrentUser(null)}return je(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===j._redirectEventId?h.directlySetCurrentUser(j):h.reloadAndSetCurrentUserOrClear(j)})()}tryRedirectSignIn(l){var h=this;return(0,v.A)(function*(){let y=null;try{y=yield h._popupRedirectResolver._completeRedirectFn(h,l,!0)}catch{yield h._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(l){var h=this;return(0,v.A)(function*(){try{yield It(l)}catch(y){if("auth/network-request-failed"!==y?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function St(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var l=this;return(0,v.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var h=this;return(0,v.A)(function*(){if((0,re._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const y=l?(0,Q.Ku)(l):null;return y&&je(y.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(y&&y._clone(h))})()}_updateCurrentUser(l,h=!1){var y=this;return(0,v.A)(function*(){if(!y._deleted)return l&&je(y.tenantId===l.tenantId,y,"tenant-id-mismatch"),h||(yield y.beforeStateQueue.runMiddleware(l)),y.queue((0,v.A)(function*(){yield y.directlySetCurrentUser(l),y.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,v.A)(function*(){return(0,re._isFirebaseServerApp)(l.app)?Promise.reject(Oe(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var h=this;return(0,re._isFirebaseServerApp)(this.app)?Promise.reject(Oe(this)):this.queue((0,v.A)(function*(){yield h.assertedPersistence.setPersistence(lt(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var h=this;return(0,v.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const y=h._getPasswordPolicyInternal();return y.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,v.A)(function*(){const h=yield function Qt(m){return nn.apply(this,arguments)}(l),y=new Zn(h);null===l.tenantId?l._projectPasswordPolicy=y:l._tenantPasswordPolicies[l.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new Q.FA("auth","Firebase",l())}onAuthStateChanged(l,h,y){return this.registerStateListener(this.authStateSubscription,l,h,y)}beforeAuthStateChanged(l,h){return this.beforeStateQueue.pushCallback(l,h)}onIdTokenChanged(l,h,y){return this.registerStateListener(this.idTokenSubscription,l,h,y)}authStateReady(){return new Promise((l,h)=>{if(this.currentUser)l();else{const y=this.onAuthStateChanged(()=>{y(),l()},h)}})}revokeAccessToken(l){var h=this;return(0,v.A)(function*(){if(h.currentUser){const y=yield h.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:y};null!=h.tenantId&&(M.tenantId=h.tenantId),yield function W(m,l){return k.apply(this,arguments)}(h,M)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,h){var y=this;return(0,v.A)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(h);return null===l?M.removeCurrentUser():M.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var h=this;return(0,v.A)(function*(){if(!h.redirectPersistenceManager){const y=l&&lt(l)||h._popupRedirectResolver;je(y,h,"argument-error"),h.redirectPersistenceManager=yield Dn.create(h,[lt(y._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(l){var h=this;return(0,v.A)(function*(){var y,M;return h._isInitialized&&(yield h.queue((0,v.A)(function*(){}))),(null===(y=h._currentUser)||void 0===y?void 0:y._redirectEventId)===l?h._currentUser:(null===(M=h.redirectUser)||void 0===M?void 0:M._redirectEventId)===l?h.redirectUser:null})()}_persistUserIfCurrent(l){var h=this;return(0,v.A)(function*(){if(l===h.currentUser)return h.queue((0,v.A)(function*(){return h.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(h=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,h,y,M){if(this._deleted)return()=>{};const j="function"==typeof h?h:h.next.bind(h);let ie=!1;const Ee=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(Ee,this,"internal-error"),Ee.then(()=>{ie||j(this.currentUser)}),"function"==typeof h){const Qe=l.addObserver(h,y,M);return()=>{ie=!0,Qe()}}{const Qe=l.addObserver(h);return()=>{ie=!0,Qe()}}}directlySetCurrentUser(l){var h=this;return(0,v.A)(function*(){h.currentUser&&h.currentUser!==l&&h._currentUser._stopProactiveRefresh(),l&&h.isProactiveRefreshEnabled&&l._startProactiveRefresh(),h.currentUser=l,l?yield h.assertedPersistence.setCurrentUser(l):yield h.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=At(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,v.A)(function*(){var h;const y={"X-Client-Version":l.clientVersion};l.app.options.appId&&(y["X-Firebase-gmpid"]=l.app.options.appId);const M=yield null===(h=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const j=yield l._getAppCheckToken();return j&&(y["X-Firebase-AppCheck"]=j),y})()}_getAppCheckToken(){var l=this;return(0,v.A)(function*(){var h;const y=yield null===(h=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return y?.error&&function _e(m,...l){Vt.logLevel<=G.$b.WARN&&Vt.warn(`Auth (${re.SDK_VERSION}): ${m}`,...l)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function Cn(m){return(0,Q.Ku)(m)}class Us{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,Q.tD)(h=>this.observer=h)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gs={loadJS:()=>(0,v.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function no(m){return gs.loadJS(m)}function ro(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Zi{constructor(l){this.type="recaptcha-enterprise",this.auth=Cn(l)}verify(l="verify",h=!1){var y=this;return(0,v.A)(function*(){function j(){return j=(0,v.A)(function*(Ee){if(!h){if(null==Ee.tenantId&&null!=Ee._agentRecaptchaConfig)return Ee._agentRecaptchaConfig.siteKey;if(null!=Ee.tenantId&&void 0!==Ee._tenantRecaptchaConfigs[Ee.tenantId])return Ee._tenantRecaptchaConfigs[Ee.tenantId].siteKey}return new Promise(function(){var Qe=(0,v.A)(function*(Dt,Mt){Wr(Ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ft=>{if(void 0!==Ft.recaptchaKey){const Mr=new Re(Ft);return null==Ee.tenantId?Ee._agentRecaptchaConfig=Mr:Ee._tenantRecaptchaConfigs[Ee.tenantId]=Mr,Dt(Mr.siteKey)}Mt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ft=>{Mt(Ft)})});return function(Dt,Mt){return Qe.apply(this,arguments)}}())}),j.apply(this,arguments)}function ie(Ee,Qe,Dt){const Mt=window.grecaptcha;Ze(Mt)?Mt.enterprise.ready(()=>{Mt.enterprise.execute(Ee,{action:l}).then(Ft=>{Qe(Ft)}).catch(()=>{Qe("NO_RECAPTCHA")})}):Dt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ee,Qe)=>{(function M(Ee){return j.apply(this,arguments)})(y.auth).then(Dt=>{if(!h&&Ze(window.grecaptcha))ie(Dt,Ee,Qe);else{if(typeof window>"u")return void Qe(new Error("RecaptchaVerifier is only supported in browser"));let Mt=function ia(){return gs.recaptchaEnterpriseScript}();0!==Mt.length&&(Mt+=Dt),no(Mt).then(()=>{ie(Dt,Ee,Qe)}).catch(Ft=>{Qe(Ft)})}}).catch(Dt=>{Qe(Dt)})})})()}}function io(m,l,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,v.A)(function*(m,l,h,y=!1){const M=new Zi(m);let j;try{j=yield M.verify(h)}catch{j=yield M.verify(h,!0)}const ie=Object.assign({},l);return Object.assign(ie,y?{captchaResp:j}:{captchaResponse:j}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}function es(m,l,h,y){return xa.apply(this,arguments)}function xa(){return xa=(0,v.A)(function*(m,l,h,y){var M;if(null!==(M=m._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const j=yield io(m,l,h,"getOobCode"===h);return y(m,j)}return y(m,l).catch(function(){var j=(0,v.A)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ee=yield io(m,l,h,"getOobCode"===h);return y(m,Ee)}return Promise.reject(ie)});return function(ie){return j.apply(this,arguments)}}())}),xa.apply(this,arguments)}function bu(m){const l=m.indexOf(":");return l<0?"":m.substr(0,l+1)}function oa(m){if(!m)return null;const l=Number(m);return isNaN(l)?null:l}class Ps{constructor(l,h){this.providerId=l,this.signInMethod=h}toJSON(){return Ht("not implemented")}_getIdTokenResponse(l){return Ht("not implemented")}_linkToIdToken(l,h){return Ht("not implemented")}_getReauthenticationResolver(l){return Ht("not implemented")}}function xi(m,l){return gn.apply(this,arguments)}function gn(){return(gn=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:resetPassword",Le(m,l))})).apply(this,arguments)}function fn(){return(fn=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function _s(m,l){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Bs(){return(Bs=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:update",Le(m,l))})).apply(this,arguments)}function Oi(m,l){return lr.apply(this,arguments)}function lr(){return(lr=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithPassword",Le(m,l))})).apply(this,arguments)}function ki(m,l){return ur.apply(this,arguments)}function ur(){return(ur=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:sendOobCode",Le(m,l))})).apply(this,arguments)}function Zt(){return(Zt=(0,v.A)(function*(m,l){return ki(m,l)})).apply(this,arguments)}function mn(m,l){return _n.apply(this,arguments)}function _n(){return(_n=(0,v.A)(function*(m,l){return ki(m,l)})).apply(this,arguments)}function Ci(m,l){return gr.apply(this,arguments)}function gr(){return(gr=(0,v.A)(function*(m,l){return ki(m,l)})).apply(this,arguments)}function Wn(){return(Wn=(0,v.A)(function*(m,l){return ki(m,l)})).apply(this,arguments)}function jr(){return(jr=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithEmailLink",Le(m,l))})).apply(this,arguments)}function bi(){return(bi=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithEmailLink",Le(m,l))})).apply(this,arguments)}class mi extends Ps{constructor(l,h,y,M=null){super("password",y),this._email=l,this._password=h,this._tenantId=M}static _fromEmailAndPassword(l,h){return new mi(l,h,"password")}static _fromEmailAndCode(l,h,y=null){return new mi(l,h,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(l){var h=this;return(0,v.A)(function*(){switch(h.signInMethod){case"password":return es(l,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oi);case"emailLink":return function ys(m,l){return jr.apply(this,arguments)}(l,{email:h._email,oobCode:h._password});default:Ke(l,"internal-error")}})()}_linkToIdToken(l,h){var y=this;return(0,v.A)(function*(){switch(y.signInMethod){case"password":return es(l,{idToken:h,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s);case"emailLink":return function $t(m,l){return bi.apply(this,arguments)}(l,{idToken:h,email:y._email,oobCode:y._password});default:Ke(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function cr(m,l){return er.apply(this,arguments)}function er(){return(er=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithIdp",Le(m,l))})).apply(this,arguments)}class Sr extends Ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const h=new Sr(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(h.idToken=l.idToken),l.accessToken&&(h.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(h.nonce=l.nonce),l.pendingToken&&(h.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(h.accessToken=l.oauthToken,h.secret=l.oauthTokenSecret):Ke("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M}=h,j=(0,de.Tt)(h,["providerId","signInMethod"]);if(!y||!M)return null;const ie=new Sr(y,M);return ie.idToken=j.idToken||void 0,ie.accessToken=j.accessToken||void 0,ie.secret=j.secret,ie.nonce=j.nonce,ie.pendingToken=j.pendingToken||null,ie}_getIdTokenResponse(l){return cr(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,cr(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,cr(l,h)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),l.postBody=(0,Q.Am)(h)}return l}}function Si(){return(Si=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:sendVerificationCode",Le(m,l))})).apply(this,arguments)}function oi(){return(oi=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithPhoneNumber",Le(m,l))})).apply(this,arguments)}function Vi(){return(Vi=(0,v.A)(function*(m,l){const h=yield $e(m,"POST","/v1/accounts:signInWithPhoneNumber",Le(m,l));if(h.temporaryProof)throw gt(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const vs={USER_NOT_FOUND:"user-not-found"};function Fa(){return(Fa=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithPhoneNumber",Le(m,Object.assign(Object.assign({},l),{operation:"REAUTH"})),vs)})).apply(this,arguments)}class Ui extends Ps{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,h){return new Ui({verificationId:l,verificationCode:h})}static _fromTokenResponse(l,h){return new Ui({phoneNumber:l,temporaryProof:h})}_getIdTokenResponse(l){return function Mo(m,l){return oi.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,h){return function ti(m,l){return Vi.apply(this,arguments)}(l,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function yn(m,l){return Fa.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:h,verificationId:y,verificationCode:M}=this.params;return l&&h?{temporaryProof:l,phoneNumber:h}:{sessionInfo:y,code:M}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:j}=l;return y||h||M||j?new Ui({verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:j}):null}}class $s{constructor(l){var h,y,M,j,ie,Ee;const Qe=(0,Q.I9)((0,Q.hp)(l)),Dt=null!==(h=Qe.apiKey)&&void 0!==h?h:null,Mt=null!==(y=Qe.oobCode)&&void 0!==y?y:null,Ft=function js(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Qe.mode)&&void 0!==M?M:null);je(Dt&&Mt&&Ft,"argument-error"),this.apiKey=Dt,this.operation=Ft,this.code=Mt,this.continueUrl=null!==(j=Qe.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(ie=Qe.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Ee=Qe.tenantId)&&void 0!==Ee?Ee:null}static parseLink(l){const h=function _i(m){const l=(0,Q.I9)((0,Q.hp)(m)).link,h=l?(0,Q.I9)((0,Q.hp)(l)).deep_link_id:null,y=(0,Q.I9)((0,Q.hp)(m)).deep_link_id;return(y?(0,Q.I9)((0,Q.hp)(y)).link:null)||y||h||l||m}(l);try{return new $s(h)}catch{return null}}}let oo=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,y){return mi._fromEmailAndPassword(h,y)}static credentialWithLink(h,y){const M=$s.parseLink(y);return je(M,"argument-error"),mi._fromEmailAndCode(h,M.code,M.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class dr{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class No extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class mr extends No{static credentialFromJSON(l){const h="string"==typeof l?JSON.parse(l):l;return je("providerId"in h&&"signInMethod"in h,"argument-error"),Sr._fromParams(h)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return je(l.idToken||l.accessToken,"argument-error"),Sr._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return mr.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return mr.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:h,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:j,nonce:ie,providerId:Ee}=l;if(!y&&!M&&!h&&!j||!Ee)return null;try{return new mr(Ee)._credential({idToken:h,accessToken:y,nonce:ie,pendingToken:j})}catch{return null}}}let ln=(()=>{class m extends No{constructor(){super("facebook.com")}static credential(h){return Sr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),xo=(()=>{class m extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(h,y){return Sr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:y,oauthAccessToken:M}=h;if(!y&&!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Nn=(()=>{class m extends No{constructor(){super("github.com")}static credential(h){return Sr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class $r extends Ps{constructor(l,h){super(l,l),this.pendingToken=h}_getIdTokenResponse(l){return cr(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,cr(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,cr(l,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M,pendingToken:j}=h;return y&&M&&j&&y===M?new $r(y,j):null}static _create(l,h){return new $r(l,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Es extends dr{constructor(l){je(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Es.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Es.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const h=$r.fromJSON(l);return je(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:h,providerId:y}=l;if(!h||!y)return null;try{return $r._create(y,h)}catch{return null}}}let ua=(()=>{class m extends No{constructor(){super("twitter.com")}static credential(h,y){return Sr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=h;if(!y||!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ac(m,l){return wn.apply(this,arguments)}function wn(){return(wn=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signUp",Le(m,l))})).apply(this,arguments)}class en{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,h,y,M=!1){return(0,v.A)(function*(){const j=yield ae._fromIdTokenResponse(l,y,M),ie=ns(y);return new en({user:j,providerId:ie,_tokenResponse:y,operationType:h})})()}static _forOperation(l,h,y){return(0,v.A)(function*(){yield l._updateTokensIfNecessary(y,!0);const M=ns(y);return new en({user:l,providerId:M,_tokenResponse:y,operationType:h})})()}}function ns(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Va(){return(Va=(0,v.A)(function*(m){var l;if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const h=Cn(m);if(yield h._initializationPromise,null!==(l=h.currentUser)&&void 0!==l&&l.isAnonymous)return new en({user:h.currentUser,providerId:null,operationType:"signIn"});const y=yield Ac(h,{returnSecureToken:!0}),M=yield en._fromIdTokenResponse(h,"signIn",y,!0);return yield h._updateCurrentUser(M.user),M})).apply(this,arguments)}class qn extends Q.g{constructor(l,h,y,M){var j;super(h.code,h.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,qn.prototype),this.customData={appName:l.name,tenantId:null!==(j=l.tenantId)&&void 0!==j?j:void 0,_serverResponse:h.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(l,h,y,M){return new qn(l,h,y,M)}}function ao(m,l,h,y){return("reauthenticate"===l?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?qn._fromErrorAndOperation(m,j,l,y):j})}function Cc(m){return new Set(m.map(({providerId:l})=>l).filter(l=>!!l))}function Su(){return Su=(0,v.A)(function*(m,l){const h=(0,Q.Ku)(m);yield Ru(!0,h,l);const{providerUserInfo:y}=yield function Wt(m,l){return fr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[l]}),M=Cc(y||[]);return h.providerData=h.providerData.filter(j=>M.has(j.providerId)),M.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Su.apply(this,arguments)}function bc(m,l){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,v.A)(function*(m,l,h=!1){const y=yield ct(m,l._linkToIdToken(m.auth,yield m.getIdToken()),h);return en._forOperation(m,"link",y)})).apply(this,arguments)}function Ru(m,l,h){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,v.A)(function*(m,l,h){yield It(l);const M=!1===m?"provider-already-linked":"no-such-provider";je(Cc(l.providerData).has(h)===m,l.auth,M)})).apply(this,arguments)}function Mu(m,l){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,v.A)(function*(m,l,h=!1){const{auth:y}=m;if((0,re._isFirebaseServerApp)(y.app))return Promise.reject(Oe(y));const M="reauthenticate";try{const j=yield ct(m,ao(y,M,l,m),h);je(j.idToken,y,"internal-error");const ie=un(j.idToken);je(ie,y,"internal-error");const{sub:Ee}=ie;return je(m.uid===Ee,y,"user-mismatch"),en._forOperation(m,M,j)}catch(j){throw"auth/user-not-found"===j?.code&&Ke(y,"user-mismatch"),j}})).apply(this,arguments)}function Ua(m,l){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,v.A)(function*(m,l,h=!1){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const y="signIn",M=yield ao(m,y,l),j=yield en._fromIdTokenResponse(m,y,M);return h||(yield m._updateCurrentUser(j.user)),j})).apply(this,arguments)}function Ba(m,l){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,v.A)(function*(m,l){return Ua(Cn(m),l)})).apply(this,arguments)}function Hr(m,l){return rs.apply(this,arguments)}function rs(){return(rs=(0,v.A)(function*(m,l){const h=(0,Q.Ku)(m);return yield Ru(!1,h,l.providerId),bc(h,l)})).apply(this,arguments)}function ko(m,l){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,v.A)(function*(m,l){return Mu((0,Q.Ku)(m),l)})).apply(this,arguments)}function qr(){return(qr=(0,v.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithCustomToken",Le(m,l))})).apply(this,arguments)}function Lo(){return Lo=(0,v.A)(function*(m,l){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const h=Cn(m),y=yield function uo(m,l){return qr.apply(this,arguments)}(h,{token:l,returnSecureToken:!0}),M=yield en._fromIdTokenResponse(h,"signIn",y);return yield h._updateCurrentUser(M.user),M}),Lo.apply(this,arguments)}class $i{constructor(l,h){this.factorId=l,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(l,h){return"phoneInfo"in h?Ts._fromServerResponse(l,h):"totpInfo"in h?Hs._fromServerResponse(l,h):Ke(l,"internal-error")}}class Ts extends $i{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,h){return new Ts(h)}}class Hs extends $i{constructor(l){super("totp",l)}static _fromServerResponse(l,h){return new Hs(h)}}function ai(m,l,h){var y;je((null===(y=h.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),je(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),l.continueUrl=h.url,l.dynamicLinkDomain=h.dynamicLinkDomain,l.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(je(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),l.iOSBundleId=h.iOS.bundleId),h.android&&(je(h.android.packageName.length>0,m,"missing-android-pkg-name"),l.androidInstallApp=h.android.installApp,l.androidMinimumVersionCode=h.android.minimumVersion,l.androidPackageName=h.android.packageName)}function wr(m){return co.apply(this,arguments)}function co(){return(co=(0,v.A)(function*(m){const l=Cn(m);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function Fo(){return(Fo=(0,v.A)(function*(m,l,h){const y=Cn(m),M={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};h&&ai(y,M,h),yield es(y,M,"getOobCode",mn)})).apply(this,arguments)}function ws(){return ws=(0,v.A)(function*(m,l,h){yield xi((0,Q.Ku)(m),{oobCode:l,newPassword:h}).catch(function(){var y=(0,v.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&wr(m),M});return function(M){return y.apply(this,arguments)}}())}),ws.apply(this,arguments)}function yi(){return yi=(0,v.A)(function*(m,l){yield function zn(m,l){return Bs.apply(this,arguments)}((0,Q.Ku)(m),{oobCode:l})}),yi.apply(this,arguments)}function zs(m,l){return ca.apply(this,arguments)}function ca(){return(ca=(0,v.A)(function*(m,l){const h=(0,Q.Ku)(m),y=yield xi(h,{oobCode:l}),M=y.requestType;switch(je(M,h,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":je(y.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":je(y.mfaInfo,h,"internal-error");default:je(y.email,h,"internal-error")}let j=null;return y.mfaInfo&&(j=$i._fromServerResponse(Cn(h),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:j},operation:M}})).apply(this,arguments)}function la(){return(la=(0,v.A)(function*(m,l){const{data:h}=yield zs((0,Q.Ku)(m),l);return h.email})).apply(this,arguments)}function xu(){return(xu=(0,v.A)(function*(m,l,h){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const y=Cn(m),ie=yield es(y,{returnSecureToken:!0,email:l,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ac).catch(Qe=>{throw"auth/password-does-not-meet-requirements"===Qe.code&&wr(m),Qe}),Ee=yield en._fromIdTokenResponse(y,"signIn",ie);return yield y._updateCurrentUser(Ee.user),Ee})).apply(this,arguments)}function xs(){return(xs=(0,v.A)(function*(m,l,h){const y=Cn(m),M={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function j(ie,Ee){je(Ee.handleCodeInApp,y,"argument-error"),Ee&&ai(y,ie,Ee)})(M,h),yield es(y,M,"getOobCode",Ci)})).apply(this,arguments)}function da(){return(da=(0,v.A)(function*(m,l,h){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const y=(0,Q.Ku)(m),M=oo.credentialWithLink(l,h||Jt());return je(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),Ba(y,M)})).apply(this,arguments)}function $a(){return($a=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:createAuthUri",Le(m,l))})).apply(this,arguments)}function V(){return V=(0,v.A)(function*(m,l){const y={identifier:l,continueUri:Jn()?Jt():"http://localhost"},{signinMethods:M}=yield function ho(m,l){return $a.apply(this,arguments)}((0,Q.Ku)(m),y);return M||[]}),V.apply(this,arguments)}function F(){return F=(0,v.A)(function*(m,l){const h=(0,Q.Ku)(m),M={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};l&&ai(h.auth,M,l);const{email:j}=yield function _t(m,l){return Zt.apply(this,arguments)}(h.auth,M);j!==m.email&&(yield m.reload())}),F.apply(this,arguments)}function Fe(){return Fe=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m),j={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:l};h&&ai(y.auth,j,h);const{email:ie}=yield function ts(m,l){return Wn.apply(this,arguments)}(y.auth,j);ie!==m.email&&(yield m.reload())}),Fe.apply(this,arguments)}function kt(){return(kt=(0,v.A)(function*(m,l){return ot(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Un(){return Un=(0,v.A)(function*(m,{displayName:l,photoURL:h}){if(void 0===l&&void 0===h)return;const y=(0,Q.Ku)(m),j={idToken:yield y.getIdToken(),displayName:l,photoUrl:h,returnSecureToken:!0},ie=yield ct(y,function rt(m,l){return kt.apply(this,arguments)}(y.auth,j));y.displayName=ie.displayName||null,y.photoURL=ie.photoUrl||null;const Ee=y.providerData.find(({providerId:Qe})=>"password"===Qe);Ee&&(Ee.displayName=y.displayName,Ee.photoURL=y.photoURL),yield y._updateTokensIfNecessary(ie)}),Un.apply(this,arguments)}function Yn(m,l,h){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,v.A)(function*(m,l,h){const{auth:y}=m,j={idToken:yield m.getIdToken(),returnSecureToken:!0};l&&(j.email=l),h&&(j.password=h);const ie=yield ct(m,function br(m,l){return fn.apply(this,arguments)}(y,j));yield m._updateTokensIfNecessary(ie,!0)}),Gn.apply(this,arguments)}class Qr{constructor(l,h,y={}){this.isNewUser=l,this.providerId=h,this.profile=y}}class zr extends Qr{constructor(l,h,y,M){super(l,h,y),this.username=M}}class Ws extends Qr{constructor(l,h){super(l,"facebook.com",h)}}class ci extends zr{constructor(l,h){super(l,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class zi extends Qr{constructor(l,h){super(l,"google.com",h)}}class Yr extends zr{constructor(l,h,y){super(l,"twitter.com",h,y)}}function is(m){const{user:l,_tokenResponse:h}=m;return l.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function tr(m){var l,h;if(!m)return null;const{providerId:y}=m,M=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},j=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const ie=null===(h=null===(l=un(m.idToken))||void 0===l?void 0:l.firebase)||void 0===h?void 0:h.sign_in_provider;if(ie)return new Qr(j,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!y)return null;switch(y){case"facebook.com":return new Ws(j,M);case"github.com":return new ci(j,M);case"google.com":return new zi(j,M);case"twitter.com":return new Yr(j,M,m.screenName||null);case"custom":case"anonymous":return new Qr(j,null);default:return new Qr(j,y,M)}}(h)}class Wi{constructor(l,h,y){this.type=l,this.credential=h,this.user=y}static _fromIdtoken(l,h){return new Wi("enroll",l,h)}static _fromMfaPendingCredential(l){return new Wi("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var h,y;if(l?.multiFactorSession){if(null!==(h=l.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Wi._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(y=l.multiFactorSession)&&void 0!==y&&y.idToken)return Wi._fromIdtoken(l.multiFactorSession.idToken)}return null}}class fa{constructor(l,h,y){this.session=l,this.hints=h,this.signInResolver=y}static _fromError(l,h){const y=Cn(l),M=h.customData._serverResponse,j=(M.mfaInfo||[]).map(Ee=>$i._fromServerResponse(y,Ee));je(M.mfaPendingCredential,y,"internal-error");const ie=Wi._fromMfaPendingCredential(M.mfaPendingCredential);return new fa(ie,j,function(){var Ee=(0,v.A)(function*(Qe){const Dt=yield Qe._process(y,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Mt=Object.assign(Object.assign({},M),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(h.operationType){case"signIn":const Ft=yield en._fromIdTokenResponse(y,h.operationType,Mt);return yield y._updateCurrentUser(Ft.user),Ft;case"reauthenticate":return je(h.user,y,"internal-error"),en._forOperation(h.user,h.operationType,Mt);default:Ke(y,"internal-error")}});return function(Qe){return Ee.apply(this,arguments)}}())}resolveSignIn(l){var h=this;return(0,v.A)(function*(){return h.signInResolver(l)})()}}class kn{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(y=>$i._fromServerResponse(l.auth,y)))})}static _fromUser(l){return new kn(l)}getSession(){var l=this;return(0,v.A)(function*(){return Wi._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,h){var y=this;return(0,v.A)(function*(){const M=l,j=yield y.getSession(),ie=yield ct(y.user,M._process(y.user.auth,j,h));return yield y.user._updateTokensIfNecessary(ie),y.user.reload()})()}unenroll(l){var h=this;return(0,v.A)(function*(){const y="string"==typeof l?l:l.uid,M=yield h.user.getIdToken();try{const j=yield ct(h.user,function kr(m,l){return ot(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Le(m,l))}(h.user.auth,{idToken:M,mfaEnrollmentId:y}));h.enrolledFactors=h.enrolledFactors.filter(({uid:ie})=>ie!==y),yield h.user._updateTokensIfNecessary(j),yield h.user.reload()}catch(j){throw j}})()}}const ss=new WeakMap,pa="__sak";class xc{constructor(l,h){this.storageRetriever=l,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(pa,"1"),this.storage.removeItem(pa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,h){return this.storage.setItem(l,JSON.stringify(h)),Promise.resolve()}_get(l){const h=this.storage.getItem(l);return Promise.resolve(h?JSON.parse(h):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const go=(()=>{class m extends xc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,y)=>this.onStorageEvent(h,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xe(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),j=this.localCache[y];M!==j&&h(y,j,M)}}onStorageEvent(h,y=!1){if(!h.key)return void this.forAllChangedKeys((Ee,Qe,Dt)=>{this.notifyListeners(Ee,Dt)});const M=h.key;y?this.detachListener():this.stopPolling();const j=()=>{const Ee=this.storage.getItem(M);!y&&this.localCache[M]===Ee||this.notifyListeners(M,Ee)},ie=this.storage.getItem(M);!function Ie(){return(0,Q.lT)()&&10===document.documentMode}()||ie===h.newValue||h.newValue===h.oldValue?j():setTimeout(j,10)}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const j of Array.from(M))j(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,y){var M=()=>super._set,j=this;return(0,v.A)(function*(){yield M().call(j,h,y),j.localCache[h]=JSON.stringify(y)})()}_get(h){var y=()=>super._get,M=this;return(0,v.A)(function*(){const j=yield y().call(M,h);return M.localCache[h]=JSON.stringify(j),j})()}_remove(h){var y=()=>super._remove,M=this;return(0,v.A)(function*(){yield y().call(M,h),delete M.localCache[h]})()}}return m.type="LOCAL",m})(),os=(()=>{class m extends xc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,y){}_removeListener(h,y){}}return m.type="SESSION",m})();let Rn=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const y=this.receivers.find(j=>j.isListeningto(h));if(y)return y;const M=new m(h);return this.receivers.push(M),M}isListeningto(h){return this.eventTarget===h}handleEvent(h){var y=this;return(0,v.A)(function*(){const M=h,{eventId:j,eventType:ie,data:Ee}=M.data,Qe=y.handlersMap[ie];if(!Qe?.size)return;M.ports[0].postMessage({status:"ack",eventId:j,eventType:ie});const Dt=Array.from(Qe).map(function(){var Ft=(0,v.A)(function*(Mr){return Mr(M.origin,Ee)});return function(Mr){return Ft.apply(this,arguments)}}()),Mt=yield function ut(m){return Promise.all(m.map(function(){var l=(0,v.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(y){return{fulfilled:!1,reason:y}}});return function(h){return l.apply(this,arguments)}}()))}(Dt);M.ports[0].postMessage({status:"done",eventId:j,eventType:ie,response:Mt})})()}_subscribe(h,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(y)}_unsubscribe(h,y){this.handlersMap[h]&&y&&this.handlersMap[h].delete(y),(!y||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Vo(m="",l=10){let h="";for(let y=0;y<l;y++)h+=Math.floor(10*Math.random());return m+h}class Wl{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,h,y=50){var M=this;return(0,v.A)(function*(){const j=typeof MessageChannel<"u"?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let ie,Ee;return new Promise((Qe,Dt)=>{const Mt=Vo("",20);j.port1.start();const Ft=setTimeout(()=>{Dt(new Error("unsupported_event"))},y);Ee={messageChannel:j,onMessage(Mr){const ls=Mr;if(ls.data.eventId===Mt)switch(ls.data.status){case"ack":clearTimeout(Ft),ie=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),Qe(ls.data.response);break;default:clearTimeout(Ft),clearTimeout(ie),Dt(new Error("invalid_response"))}}},M.handlers.add(Ee),j.port1.addEventListener("message",Ee.onMessage),M.target.postMessage({eventType:l,eventId:Mt,data:h},[j.port2])}).finally(()=>{Ee&&M.removeMessageHandler(Ee)})})()}}function Ln(){return window}function mo(){return typeof Ln().WorkerGlobalScope<"u"&&"function"==typeof Ln().importScripts}function ga(){return(ga=(0,v.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const uh="firebaseLocalStorageDb",Ar="firebaseLocalStorage",Ds="fbase_key";class ma{constructor(l){this.request=l}toPromise(){return new Promise((l,h)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function rr(m,l){return m.transaction([Ar],l?"readwrite":"readonly").objectStore(Ar)}function Wa(){const m=indexedDB.open(uh,1);return new Promise((l,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(Ar,{keyPath:Ds})}catch(M){h(M)}}),m.addEventListener("success",(0,v.A)(function*(){const y=m.result;y.objectStoreNames.contains(Ar)?l(y):(y.close(),yield function as(){const m=indexedDB.deleteDatabase(uh);return new ma(m).toPromise()}(),l(yield Wa()))}))})}function Lc(m,l,h){return _a.apply(this,arguments)}function _a(){return(_a=(0,v.A)(function*(m,l,h){const y=rr(m,!0).put({[Ds]:l,value:h});return new ma(y).toPromise()})).apply(this,arguments)}function Ga(){return(Ga=(0,v.A)(function*(m,l){const h=rr(m,!1).get(l),y=yield new ma(h).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Uu(m,l){const h=rr(m,!0).delete(l);return new ma(h).toPromise()}const I=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,v.A)(function*(){return h.db||(h.db=yield Wa()),h.db})()}_withRetries(h){var y=this;return(0,v.A)(function*(){let M=0;for(;;)try{const j=yield y._openDb();return yield h(j)}catch(j){if(M++>3)throw j;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,v.A)(function*(){return mo()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,v.A)(function*(){h.receiver=Rn._getInstance(function ah(){return mo()?self:null}()),h.receiver._subscribe("keyChanged",function(){var y=(0,v.A)(function*(M,j){return{keyProcessed:(yield h._poll()).includes(j.key)}});return function(M,j){return y.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var y=(0,v.A)(function*(M,j){return["keyChanged"]});return function(M,j){return y.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,v.A)(function*(){var y,M;if(h.activeServiceWorker=yield function Os(){return ga.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Wl(h.activeServiceWorker);const j=yield h.sender._send("ping",{},800);j&&null!==(y=j[0])&&void 0!==y&&y.fulfilled&&null!==(M=j[0])&&void 0!==M&&M.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var y=this;return(0,v.A)(function*(){if(y.sender&&y.activeServiceWorker&&function kc(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:h},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.A)(function*(){try{if(!indexedDB)return!1;const h=yield Wa();return yield Lc(h,pa,"1"),yield Uu(h,pa),!0}catch{}return!1})()}_withPendingWrite(h){var y=this;return(0,v.A)(function*(){y.pendingWrites++;try{yield h()}finally{y.pendingWrites--}})()}_set(h,y){var M=this;return(0,v.A)(function*(){return M._withPendingWrite((0,v.A)(function*(){return yield M._withRetries(j=>Lc(j,h,y)),M.localCache[h]=y,M.notifyServiceWorker(h)}))})()}_get(h){var y=this;return(0,v.A)(function*(){const M=yield y._withRetries(j=>function Ks(m,l){return Ga.apply(this,arguments)}(j,h));return y.localCache[h]=M,M})()}_remove(h){var y=this;return(0,v.A)(function*(){return y._withPendingWrite((0,v.A)(function*(){return yield y._withRetries(M=>Uu(M,h)),delete y.localCache[h],y.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,v.A)(function*(){const y=yield h._withRetries(ie=>{const Ee=rr(ie,!1).getAll();return new ma(Ee).toPromise()});if(!y)return[];if(0!==h.pendingWrites)return[];const M=[],j=new Set;if(0!==y.length)for(const{fbase_key:ie,value:Ee}of y)j.add(ie),JSON.stringify(h.localCache[ie])!==JSON.stringify(Ee)&&(h.notifyListeners(ie,Ee),M.push(ie));for(const ie of Object.keys(h.localCache))h.localCache[ie]&&!j.has(ie)&&(h.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const j of Array.from(M))j(y)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,v.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),Me=1e12;class Ct{constructor(l){this.auth=l,this.counter=Me,this._widgets=new Map}render(l,h){const y=this.counter;return this._widgets.set(y,new dn(l,this.auth.name,h||{})),this.counter++,y}reset(l){var h;const y=l||Me;null===(h=this._widgets.get(y))||void 0===h||h.delete(),this._widgets.delete(y)}getResponse(l){var h;return(null===(h=this._widgets.get(l||Me))||void 0===h?void 0:h.getResponse())||""}execute(l){var h=this;return(0,v.A)(function*(){var y;return null===(y=h._widgets.get(l||Me))||void 0===y||y.execute(),""})()}}class dn{constructor(l,h,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof l?document.getElementById(l):l;je(M,"argument-error",{appName:h}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vn(m){const l=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)l.push(h.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":h}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=ro("rcb"),Kn=new ce(3e4,6e4);class ya{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Ln().grecaptcha)||void 0===l||!l.render)}load(l,h=""){return je(function Ka(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),l,"argument-error"),this.shouldResolveImmediately(h)&&Lt(Ln().grecaptcha)?Promise.resolve(Ln().grecaptcha):new Promise((y,M)=>{const j=Ln().setTimeout(()=>{M(ue(l,"network-request-failed"))},Kn.get());Ln()[In]=()=>{Ln().clearTimeout(j),delete Ln()[In];const Ee=Ln().grecaptcha;if(!Ee||!Lt(Ee))return void M(ue(l,"internal-error"));const Qe=Ee.render;Ee.render=(Dt,Mt)=>{const Ft=Qe(Dt,Mt);return this.counter++,Ft},this.hostLanguage=h,y(Ee)},no(`${function Du(){return gs.recaptchaV2Script}()}?${(0,Q.Am)({onload:In,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(j),M(ue(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var h;return!(null===(h=Ln().grecaptcha)||void 0===h||!h.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vc{load(l){return(0,v.A)(function*(){return new Ct(l)})()}clearedOneInstance(){}}const Pi="recaptcha",Uo={theme:"light",type:"image"};class ch{constructor(l,h,y=Object.assign({},Uo)){this.parameters=y,this.type=Pi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(l),this.isInvisible="invisible"===this.parameters.size,je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof h?document.getElementById(h):h;je(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vc:new ya,this.validateStartingState()}verify(){var l=this;return(0,v.A)(function*(){l.assertNotDestroyed();const h=yield l.render(),y=l.getAssertedRecaptcha();return y.getResponse(h)||new Promise(j=>{const ie=Ee=>{Ee&&(l.tokenChangeListeners.delete(ie),j(Ee))};l.tokenChangeListeners.add(ie),l.isInvisible&&y.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){je(!this.parameters.sitekey,this.auth,"argument-error"),je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return h=>{if(this.tokenChangeListeners.forEach(y=>y(h)),"function"==typeof l)l(h);else if("string"==typeof l){const y=Ln()[l];"function"==typeof y&&y(h)}}}assertNotDestroyed(){je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,v.A)(function*(){if(yield l.init(),!l.widgetId){let h=l.container;if(!l.isInvisible){const y=document.createElement("div");h.appendChild(y),h=y}l.widgetId=l.getAssertedRecaptcha().render(h,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,v.A)(function*(){je(Jn()&&!mo(),l.auth,"internal-error"),yield function Gl(){let m=null;return new Promise(l=>{"complete"!==document.readyState?(m=()=>l(),window.addEventListener("load",m)):l()}).catch(l=>{throw m&&window.removeEventListener("load",m),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const h=yield function qe(m){return Xn.apply(this,arguments)}(l.auth);je(h,l.auth,"internal-error"),l.parameters.sitekey=h})()}getAssertedRecaptcha(){return je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qs{constructor(l,h){this.verificationId=l,this.onConfirmation=h}confirm(l){const h=Ui._fromVerification(this.verificationId,l);return this.onConfirmation(h)}}function qa(){return(qa=(0,v.A)(function*(m,l,h){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const y=Cn(m),M=yield Qs(y,l,(0,Q.Ku)(h));return new qs(M,j=>Ba(y,j))})).apply(this,arguments)}function Qa(){return(Qa=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m);yield Ru(!1,y,"phone");const M=yield Qs(y.auth,l,(0,Q.Ku)(h));return new qs(M,j=>Hr(y,j))})).apply(this,arguments)}function _o(){return(_o=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m);if((0,re._isFirebaseServerApp)(y.auth.app))return Promise.reject(Oe(y.auth));const M=yield Qs(y.auth,l,(0,Q.Ku)(h));return new qs(M,j=>ko(y,j))})).apply(this,arguments)}function Qs(m,l,h){return jo.apply(this,arguments)}function jo(){return jo=(0,v.A)(function*(m,l,h){var y;const M=yield h.verify();try{let j;if(je("string"==typeof M,m,"argument-error"),je(h.type===Pi,m,"argument-error"),j="string"==typeof l?{phoneNumber:l}:l,"session"in j){const ie=j.session;if("phoneNumber"in j)return je("enroll"===ie.type,m,"internal-error"),(yield function Mc(m,l){return ot(m,"POST","/v2/accounts/mfaEnrollment:start",Le(m,l))}(m,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{je("signin"===ie.type,m,"internal-error");const Ee=(null===(y=j.multiFactorHint)||void 0===y?void 0:y.uid)||j.multiFactorUid;return je(Ee,m,"missing-multi-factor-info"),(yield function b(m,l){return ot(m,"POST","/v2/accounts/mfaSignIn:start",Le(m,l))}(m,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function Fi(m,l){return Si.apply(this,arguments)}(m,{phoneNumber:j.phoneNumber,recaptchaToken:M});return ie}}finally{h._reset()}}),jo.apply(this,arguments)}function va(){return(va=(0,v.A)(function*(m,l){const h=(0,Q.Ku)(m);if((0,re._isFirebaseServerApp)(h.auth.app))return Promise.reject(Oe(h.auth));yield bc(h,l)})).apply(this,arguments)}let Ya=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=Cn(h)}verifyPhoneNumber(h,y){return Qs(this.auth,h,(0,Q.Ku)(y))}static credential(h,y){return Ui._fromVerification(h,y)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:y,temporaryProof:M}=h;return y&&M?Ui._fromTokenResponse(y,M):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ia(m,l){return l?lt(l):(je(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class ju extends Ps{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return cr(l,this._buildIdpRequest())}_linkToIdToken(l,h){return cr(l,this._buildIdpRequest(h))}_getReauthenticationResolver(l){return cr(l,this._buildIdpRequest())}_buildIdpRequest(l){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(h.idToken=l),h}}function cg(m){return Ua(m.auth,new ju(m),m.bypassAuthState)}function lg(m){const{auth:l,user:h}=m;return je(h,l,"internal-error"),Mu(h,new ju(m),m.bypassAuthState)}function Df(m){return lh.apply(this,arguments)}function lh(){return(lh=(0,v.A)(function*(m){const{auth:l,user:h}=m;return je(h,l,"internal-error"),bc(h,new ju(m),m.bypassAuthState)})).apply(this,arguments)}class ql{constructor(l,h,y,M,j=!1){this.auth=l,this.resolver=y,this.user=M,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var l=this;return new Promise(function(){var h=(0,v.A)(function*(y,M){l.pendingPromise={resolve:y,reject:M};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(j){l.reject(j)}});return function(y,M){return h.apply(this,arguments)}}())}onAuthEvent(l){var h=this;return(0,v.A)(function*(){const{urlResponse:y,sessionId:M,postBody:j,tenantId:ie,error:Ee,type:Qe}=l;if(Ee)return void h.reject(Ee);const Dt={auth:h.auth,requestUri:y,sessionId:M,tenantId:ie||void 0,postBody:j||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Qe)(Dt))}catch(Mt){h.reject(Mt)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return cg;case"linkViaPopup":case"linkViaRedirect":return Df;case"reauthViaPopup":case"reauthViaRedirect":return lg;default:Ke(this.auth,"internal-error")}}resolve(l){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xa=new ce(2e3,1e4);function $o(){return($o=(0,v.A)(function*(m,l,h){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(ue(m,"operation-not-supported-in-this-environment"));const y=Cn(m);Je(m,l,dr);const M=Ia(y,h);return new Yl(y,"signInViaPopup",l,M).executeNotNull()})).apply(this,arguments)}function $u(){return($u=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m);if((0,re._isFirebaseServerApp)(y.auth.app))return Promise.reject(ue(y.auth,"operation-not-supported-in-this-environment"));Je(y.auth,l,dr);const M=Ia(y.auth,h);return new Yl(y.auth,"reauthViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}function Cf(){return(Cf=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m);Je(y.auth,l,dr);const M=Ia(y.auth,h);return new Yl(y.auth,"linkViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}let Yl=(()=>{class m extends ql{constructor(h,y,M,j,ie){super(h,y,j,ie),this.provider=M,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,v.A)(function*(){const y=yield h.execute();return je(y,h.auth,"internal-error"),y})()}onExecution(){var h=this;return(0,v.A)(function*(){on(1===h.filter.length,"Popup operations only handle one event");const y=Vo();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],y),h.authWindow.associatedEvent=y,h.resolver._originValidation(h.auth).catch(M=>{h.reject(M)}),h.resolver._isIframeWebStorageSupported(h.auth,M=>{M||h.reject(ue(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ue(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,Xa.get())};h()}}return m.currentPopupAction=null,m})();const Hu="pendingRedirect",Ys=new Map;class Ii extends ql{constructor(l,h,y=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,y),this.eventId=null}execute(){var l=()=>super.execute,h=this;return(0,v.A)(function*(){let y=Ys.get(h.auth._key());if(!y){try{const j=(yield function bf(m,l){return Ja.apply(this,arguments)}(h.resolver,h.auth))?yield l().call(h):null;y=()=>Promise.resolve(j)}catch(M){y=()=>Promise.reject(M)}Ys.set(h.auth._key(),y)}return h.bypassAuthState||Ys.set(h.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(l){var h=()=>super.onAuthEvent,y=this;return(0,v.A)(function*(){if("signInViaRedirect"===l.type)return h().call(y,l);if("unknown"!==l.type){if(l.eventId){const M=yield y.auth._redirectUserForId(l.eventId);if(M)return y.user=M,h().call(y,l);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,v.A)(function*(){})()}cleanUp(){}}function Ja(){return(Ja=(0,v.A)(function*(m,l){const h=jc(l),y=dh(m);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(h));return yield y._remove(h),M})).apply(this,arguments)}function zu(m,l){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,v.A)(function*(m,l){return dh(m)._set(jc(l),"true")})).apply(this,arguments)}function Za(m,l){Ys.set(m._key(),l)}function dh(m){return lt(m._redirectPersistence)}function jc(m){return pn(Hu,m.config.apiKey,m.name)}function Jl(m,l,h){return function hh(m,l,h){return eu.apply(this,arguments)}(m,l,h)}function eu(){return(eu=(0,v.A)(function*(m,l,h){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const y=Cn(m);Je(m,l,dr),yield y._initializationPromise;const M=Ia(y,h);return yield zu(M,y),M._openRedirect(y,l,"signInViaRedirect")})).apply(this,arguments)}function dg(m,l,h){return function Gu(m,l,h){return ks.apply(this,arguments)}(m,l,h)}function ks(){return(ks=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m);if(Je(y.auth,l,dr),(0,re._isFirebaseServerApp)(y.auth.app))return Promise.reject(Oe(y.auth));yield y.auth._initializationPromise;const M=Ia(y.auth,h);yield zu(M,y.auth);const j=yield li(y);return M._openRedirect(y.auth,l,"reauthViaRedirect",j)})).apply(this,arguments)}function hg(m,l,h){return function fh(m,l,h){return Ho.apply(this,arguments)}(m,l,h)}function Ho(){return(Ho=(0,v.A)(function*(m,l,h){const y=(0,Q.Ku)(m);Je(y.auth,l,dr),yield y.auth._initializationPromise;const M=Ia(y.auth,h);yield Ru(!1,y,l.providerId),yield zu(M,y.auth);const j=yield li(y);return M._openRedirect(y.auth,l,"linkViaRedirect",j)})).apply(this,arguments)}function Ea(){return(Ea=(0,v.A)(function*(m,l){return yield Cn(m)._initializationPromise,ni(m,l,!1)})).apply(this,arguments)}function ni(m,l){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,v.A)(function*(m,l,h=!1){if((0,re._isFirebaseServerApp)(m.app))return Promise.reject(Oe(m));const y=Cn(m),M=Ia(y,l),ie=yield new Ii(y,M,h).execute();return ie&&!h&&(delete ie.user._redirectEventId,yield y._persistUserIfCurrent(ie.user),yield y._setRedirectUser(null,l)),ie})).apply(this,arguments)}function li(m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,v.A)(function*(m){const l=Vo(`${m.uid}:::`);return m._redirectEventId=l,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),l})).apply(this,arguments)}class qu{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let h=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(l,y)&&(h=!0,this.sendToConsumer(l,y),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Xs(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return us(m);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=l,h=!0)),h}sendToConsumer(l,h){var y;if(l.error&&!us(l)){const M=(null===(y=l.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";h.onError(ue(this.auth,M))}else h.onAuthEvent(l)}isEventForConsumer(l,h){const y=null===h.eventId||!!l.eventId&&l.eventId===h.eventId;return h.filter.includes(l.type)&&y}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($c(l))}saveEventToCache(l){this.cachedEventUids.add($c(l)),this.lastProcessedEventTime=Date.now()}}function $c(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(l=>l).join("-")}function us({type:m,error:l}){return"unknown"===m&&"auth/no-auth-event"===l?.code}function Ta(m){return vo.apply(this,arguments)}function vo(){return(vo=(0,v.A)(function*(m,l={}){return ot(m,"GET","/v1/projects",l)})).apply(this,arguments)}const ph=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Js=/^https?/;function Io(){return(Io=(0,v.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:l}=yield Ta(m);for(const h of l)try{if(pg(h))return}catch{}Ke(m,"unauthorized-domain")})).apply(this,arguments)}function pg(m){const l=Jt(),{protocol:h,hostname:y}=new URL(l);if(m.startsWith("chrome-extension://")){const ie=new URL(m);return""===ie.hostname&&""===y?"chrome-extension:"===h&&m.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===h&&ie.hostname===y}if(!Js.test(h))return!1;if(ph.test(m))return y===m;const M=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const T_=new ce(3e4,6e4);function Sf(){const m=Ln().___jsl;if(m?.H)for(const l of Object.keys(m.H))if(m.H[l].r=m.H[l].r||[],m.H[l].L=m.H[l].L||[],m.H[l].r=[...m.H[l].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let td=null;const Wo=new ce(5e3,15e3),Rf="__/auth/iframe",gg="emulator/auth/iframe",Xr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qu(m){const l=m.config;je(l.authDomain,m,"auth-domain-config-required");const h=l.emulator?pe(l,gg):`https://${m.config.authDomain}/${Rf}`,y={apiKey:l.apiKey,appName:m.name,v:re.SDK_VERSION},M=mg.get(m.config.apiHost);M&&(y.eid=M);const j=m._getFrameworks();return j.length&&(y.fw=j.join(",")),`${h}?${(0,Q.Am)(y).slice(1)}`}function di(){return di=(0,v.A)(function*(m){const l=yield function A_(m){return td=td||function w_(m){return new Promise((l,h)=>{var y,M,j;function ie(){Sf(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Sf(),h(ue(m,"network-request-failed"))},timeout:T_.get()})}if(null!==(M=null===(y=Ln().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)l(gapi.iframes.getContext());else{if(null===(j=Ln().gapi)||void 0===j||!j.load){const Ee=ro("iframefcb");return Ln()[Ee]=()=>{gapi.load?ie():h(ue(m,"network-request-failed"))},no(`${function si(){return gs.gapiScript}()}?onload=${Ee}`).catch(Qe=>h(Qe))}ie()}}).catch(l=>{throw td=null,l})}(m),td}(m),h=Ln().gapi;return je(h,m,"internal-error"),l.open({where:document.body,url:Qu(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xr,dontclear:!0},y=>new Promise(function(){var M=(0,v.A)(function*(j,ie){yield y.restyle({setHideOnLeave:!1});const Ee=ue(m,"network-request-failed"),Qe=Ln().setTimeout(()=>{ie(Ee)},Wo.get());function Dt(){Ln().clearTimeout(Qe),j(y)}y.ping(Dt).then(Dt,()=>{ie(Ee)})});return function(j,ie){return M.apply(this,arguments)}}()))}),di.apply(this,arguments)}const nu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yg{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const or="__/auth/handler",mh="emulator/auth/handler",Xu=encodeURIComponent("fac");function Mf(m,l,h,y,M,j){return rd.apply(this,arguments)}function rd(){return(rd=(0,v.A)(function*(m,l,h,y,M,j){je(m.config.authDomain,m,"auth-domain-config-required"),je(m.config.apiKey,m,"invalid-api-key");const ie={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:y,v:re.SDK_VERSION,eventId:M};if(l instanceof dr){l.setDefaultLanguage(m.languageCode),ie.providerId=l.providerId||"",(0,Q.Im)(l.getCustomParameters())||(ie.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Mt,Ft]of Object.entries(j||{}))ie[Mt]=Ft}if(l instanceof No){const Mt=l.getScopes().filter(Ft=>""!==Ft);Mt.length>0&&(ie.scopes=Mt.join(","))}m.tenantId&&(ie.tid=m.tenantId);const Ee=ie;for(const Mt of Object.keys(Ee))void 0===Ee[Mt]&&delete Ee[Mt];const Qe=yield m._getAppCheckToken(),Dt=Qe?`#${Xu}=${encodeURIComponent(Qe)}`:"";return`${function _h({config:m}){return m.emulator?pe(m,mh):`https://${m.authDomain}/${or}`}(m)}?${(0,Q.Am)(Ee).slice(1)}${Dt}`})).apply(this,arguments)}const yh="webStorageSupport",Hc=class id{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=os,this._completeRedirectFn=ni,this._overrideRedirectResult=Za}_openPopup(l,h,y,M){var j=this;return(0,v.A)(function*(){var ie;on(null===(ie=j.eventManagers[l._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Ee=yield Mf(l,h,y,Jt(),M);return function vg(m,l,h,y=500,M=600){const j=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-y)/2,0).toString();let Ee="";const Qe=Object.assign(Object.assign({},nu),{width:y.toString(),height:M.toString(),top:j,left:ie}),Dt=(0,Q.ZQ)().toLowerCase();h&&(Ee=gi(Dt)?"_blank":h),Zr(Dt)&&(l=l||"http://localhost",Qe.scrollbars="yes");const Mt=Object.entries(Qe).reduce((Mr,[ls,lu])=>`${Mr}${ls}=${lu},`,"");if(function Ne(m=(0,Q.ZQ)()){var l;return hn(m)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Dt)&&"_self"!==Ee)return function Pf(m,l){const h=document.createElement("a");h.href=m,h.target=l;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(y)}(l||"",Ee),new yg(null);const Ft=window.open(l||"",Ee,Mt);je(Ft,m,"popup-blocked");try{Ft.focus()}catch{}return new yg(Ft)}(l,Ee,Vo())})()}_openRedirect(l,h,y,M){var j=this;return(0,v.A)(function*(){return yield j._originValidation(l),function oh(m){Ln().location.href=m}(yield Mf(l,h,y,Jt(),M)),new Promise(()=>{})})()}_initialize(l){const h=l._key();if(this.eventManagers[h]){const{manager:M,promise:j}=this.eventManagers[h];return M?Promise.resolve(M):(on(j,"If manager is not set, promise should be"),j)}const y=this.initAndGetManager(l);return this.eventManagers[h]={promise:y},y.catch(()=>{delete this.eventManagers[h]}),y}initAndGetManager(l){var h=this;return(0,v.A)(function*(){const y=yield function tu(m){return di.apply(this,arguments)}(l),M=new qu(l);return y.register("authEvent",j=>(je(j?.authEvent,l,"invalid-auth-event"),{status:M.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[l._key()]={manager:M},h.iframes[l._key()]=y,M})()}_isIframeWebStorageSupported(l,h){this.iframes[l._key()].send(yh,{type:yh},M=>{var j;const ie=null===(j=M?.[0])||void 0===j?void 0:j[yh];void 0!==ie&&h(!!ie),Ke(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function fg(m){return Io.apply(this,arguments)}(l)),this.originValidationPromises[h]}get _shouldInitProactively(){return Xe()||pi()||hn()}};class Nf{constructor(l){this.factorId=l}_process(l,h,y){switch(h.type){case"enroll":return this._finalizeEnroll(l,h.credential,y);case"signin":return this._finalizeSignIn(l,h.credential);default:return Ht("unexpected MultiFactorSessionType")}}}class sd extends Nf{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new sd(l)}_finalizeEnroll(l,h,y){return function Lu(m,l){return ot(m,"POST","/v2/accounts/mfaEnrollment:finalize",Le(m,l))}(l,{idToken:h,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,h){return function N(m,l){return ot(m,"POST","/v2/accounts/mfaSignIn:finalize",Le(m,l))}(l,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zc=(()=>{class m{constructor(){}static assertion(h){return sd._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var iu="@firebase/auth";class vh{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var h=this;return(0,v.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const h=this.auth.onIdTokenChanged(y=>{l(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,h),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const h=this.internalListeners.get(l);h&&(this.internalListeners.delete(l),h(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zu(){return window}(0,Q.XA)("authIdTokenMaxAge"),function Au(m){gs=m}({loadJS:m=>new Promise((l,h)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=l,y.onerror=M=>{const j=ue("internal-error");j.customData=M,h(j)},y.type="text/javascript",y.charset="UTF-8",function kf(){var m,l;return null!==(l=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==l?l:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Gc(m){(0,re._registerComponent)(new ve.uA("auth",(l,{options:h})=>{const y=l.getProvider("app").getImmediate(),M=l.getProvider("heartbeat"),j=l.getProvider("app-check-internal"),{apiKey:ie,authDomain:Ee}=y.options;je(ie&&!ie.includes(":"),"invalid-api-key",{appName:y.name});const Qe={apiKey:ie,authDomain:Ee,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:At(m)},Dt=new Br(y,M,j,Qe);return function Cu(m,l){const h=l?.persistence||[],y=(Array.isArray(h)?h:[h]).map(lt);l?.errorMap&&m._updateErrorMap(l.errorMap),m._initializeWithPersistence(y,l?.popupRedirectResolver)}(Dt,h),Dt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,h,y)=>{l.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new ve.uA("auth-internal",l=>{const h=Cn(l.getProvider("auth").getImmediate());return new vh(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(iu,"1.7.9",function Ih(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,re.registerVersion)(iu,"1.7.9","esm2017")}("Browser");function ad(){return ad=(0,v.A)(function*(m,l,h){var y;const{BuildInfo:M}=Zu();on(l.sessionId,"AuthEvent did not contain a session ID");const j=yield function Ff(m){return dd.apply(this,arguments)}(l.sessionId),ie={};return hn()?ie.ibi=M.packageName:Or()?ie.apn=M.packageName:Ke(m,"operation-not-supported-in-this-environment"),M.displayName&&(ie.appDisplayName=M.displayName),ie.sessionId=j,Mf(m,h,l.type,void 0,null!==(y=l.eventId)&&void 0!==y?y:void 0,ie)}),ad.apply(this,arguments)}function cd(){return(cd=(0,v.A)(function*(m){const{BuildInfo:l}=Zu(),h={};hn()?h.iosBundleId=l.packageName:Or()?h.androidPackageName=l.packageName:Ke(m,"operation-not-supported-in-this-environment"),yield Ta(m,h)})).apply(this,arguments)}function ld(){return(ld=(0,v.A)(function*(m,l,h){const{cordova:y}=Zu();let M=()=>{};try{yield new Promise((j,ie)=>{let Ee=null;function Qe(){var Ft;j();const Mr=null===(Ft=y.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof Mr&&Mr(),"function"==typeof h?.close&&h.close()}function Dt(){Ee||(Ee=window.setTimeout(()=>{ie(ue(m,"redirect-cancelled-by-user"))},2e3))}function Mt(){"visible"===document?.visibilityState&&Dt()}l.addPassiveListener(Qe),document.addEventListener("resume",Dt,!1),Or()&&document.addEventListener("visibilitychange",Mt,!1),M=()=>{l.removePassiveListener(Qe),document.removeEventListener("resume",Dt,!1),document.removeEventListener("visibilitychange",Mt,!1),Ee&&window.clearTimeout(Ee)}})}finally{M()}})).apply(this,arguments)}function dd(){return(dd=(0,v.A)(function*(m){const l=function Ah(m){if(on(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const l=new ArrayBuffer(m.length),h=new Uint8Array(l);for(let y=0;y<m.length;y++)h[y]=m.charCodeAt(y);return h}(m),h=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(h)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Dh extends qu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(l)),super.onEvent(l)}initialized(){var l=this;return(0,v.A)(function*(){yield l.initPromise})()}}function fd(m){return pd.apply(this,arguments)}function pd(){return(pd=(0,v.A)(function*(m){const l=yield Ch()._get(Uf(m));return l&&(yield Ch()._remove(Uf(m))),l})).apply(this,arguments)}function Vf(){const m=[];for(let h=0;h<20;h++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function Ch(){return lt(go)}function Uf(m){return pn("authEvent",m.config.apiKey,m.name)}function tc(m){if(!m?.includes("?"))return{};const[l,...h]=m.split("?");return(0,Q.I9)(h.join("?"))}const Ei=class md{constructor(){this._redirectPersistence=os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ni,this._overrideRedirectResult=Za}_initialize(l){var h=this;return(0,v.A)(function*(){const y=l._key();let M=h.eventManagers.get(y);return M||(M=new Dh(l),h.eventManagers.set(y,M),h.attachCallbackListeners(l,M)),M})()}_openPopup(l){Ke(l,"operation-not-supported-in-this-environment")}_openRedirect(l,h,y,M){var j=this;return(0,v.A)(function*(){!function wh(m){var l,h,y,M,j,ie,Ee,Qe,Dt,Mt;const Ft=Zu();je("function"==typeof(null===(l=Ft?.universalLinks)||void 0===l?void 0:l.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),je(typeof(null===(h=Ft?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),je("function"==typeof(null===(j=null===(M=null===(y=Ft?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===j?void 0:j.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),je("function"==typeof(null===(Qe=null===(Ee=null===(ie=Ft?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===Qe?void 0:Qe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),je("function"==typeof(null===(Mt=null===(Dt=Ft?.cordova)||void 0===Dt?void 0:Dt.InAppBrowser)||void 0===Mt?void 0:Mt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const ie=yield j._initialize(l);yield ie.initialized(),ie.resetRedirect(),function Wu(){Ys.clear()}(),yield j._originValidation(l);const Ee=function hd(m,l,h=null){return{type:l,eventId:h,urlResponse:null,sessionId:Vf(),postBody:null,tenantId:m.tenantId,error:ue(m,"no-auth-event")}}(l,y,M);yield function au(m,l){return Ch()._set(Uf(m),l)}(l,Ee);const Qe=yield function ec(m,l,h){return ad.apply(this,arguments)}(l,Ee,h),Dt=yield function Lf(m){const{cordova:l}=Zu();return new Promise(h=>{l.plugins.browsertab.isAvailable(y=>{let M=null;y?l.plugins.browsertab.openUrl(m):M=l.InAppBrowser.open(m,function ps(m=(0,Q.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(M)})})}(Qe);return function Kc(m,l,h){return ld.apply(this,arguments)}(l,ie,Dt)})()}_isIframeWebStorageSupported(l,h){throw new Error("Method not implemented.")}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function ud(m){return cd.apply(this,arguments)}(l)),this.originValidationPromises[h]}attachCallbackListeners(l,h){const{universalLinks:y,handleOpenURL:M,BuildInfo:j}=Zu(),ie=setTimeout((0,v.A)(function*(){yield fd(l),h.onEvent(Sh())}),500),Ee=function(){var Mt=(0,v.A)(function*(Ft){clearTimeout(ie);const Mr=yield fd(l);let ls=null;Mr&&Ft?.url&&(ls=function qc(m,l){var h,y;const M=function bh(m){const l=tc(m),h=l.link?decodeURIComponent(l.link):void 0,y=tc(h).link,M=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return tc(M).link||M||y||h||m}(l);if(M.includes("/__/auth/callback")){const j=tc(M),ie=j.firebaseError?function Eg(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(j.firebaseError)):null,Ee=null===(y=null===(h=ie?.code)||void 0===h?void 0:h.split("auth/"))||void 0===y?void 0:y[1],Qe=Ee?ue(Ee):null;return Qe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Qe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:M,postBody:null}}return null}(Mr,Ft.url)),h.onEvent(ls||Sh())});return function(Mr){return Mt.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,Ee);const Qe=M,Dt=`${j.packageName.toLowerCase()}://`;Zu().handleOpenURL=function(){var Mt=(0,v.A)(function*(Ft){if(Ft.toLowerCase().startsWith(Dt)&&Ee({url:Ft}),"function"==typeof Qe)try{Qe(Ft)}catch(Mr){console.error(Mr)}});return function(Ft){return Mt.apply(this,arguments)}}()}};function Sh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ue("no-auth-event")}}function Ko(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Qc(m=(0,Q.ZQ)()){return!("file:"!==Ko()&&"ionic:"!==Ko()&&"capacitor:"!==Ko()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function ic(){try{const m=self.localStorage,l=Vo();if(m)return m.setItem(l,"1"),m.removeItem(l),!function rc(m=(0,Q.ZQ)()){return function wg(){return(0,Q.lT)()&&11===document?.documentMode}()||function Ag(m=(0,Q.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,Q.zW)()}catch{return Aa()&&(0,Q.zW)()}return!1}function Aa(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yc(){return(function yd(){return"http:"===Ko()||"https:"===Ko()}()||(0,Q.sr)()||Qc())&&!function Tg(){return(0,Q.lV)()||(0,Q.Ll)()}()&&ic()&&!Aa()}function Xc(){return Qc()&&typeof document<"u"}function Jc(){return(Jc=(0,v.A)(function*(){return!!Xc()&&new Promise(m=>{const l=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),m(!0)})})})).apply(this,arguments)}const hr={LOCAL:"local",NONE:"none",SESSION:"session"},qo=je,Eo="persistence";function hi(m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,v.A)(function*(m){yield m._initializationPromise;const l=Zc(),h=pn(Eo,m.config.apiKey,m.name);l&&l.setItem(h,m._getPersistence())})).apply(this,arguments)}function Zc(){var m;try{return(null===(m=function Bf(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Dg=je;class Zs{constructor(){this.browserResolver=lt(Hc),this.cordovaResolver=lt(Ei),this.underlyingResolver=null,this._redirectPersistence=os,this._completeRedirectFn=ni,this._overrideRedirectResult=Za}_initialize(l){var h=this;return(0,v.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,h,y,M){var j=this;return(0,v.A)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openPopup(l,h,y,M)})()}_openRedirect(l,h,y,M){var j=this;return(0,v.A)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openRedirect(l,h,y,M)})()}_isIframeWebStorageSupported(l,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,h)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Xc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,v.A)(function*(){if(l.underlyingResolver)return;const h=yield function uu(){return Jc.apply(this,arguments)}();l.underlyingResolver=h?l.cordovaResolver:l.browserResolver})()}}function $f(m){return m.unwrap()}function Ed(m){return Ph(m)}function Ph(m){const{_tokenResponse:l}=m instanceof Q.g?m.customData:m;if(!l)return null;if(!(m instanceof Q.g)&&"temporaryProof"in l&&"phoneNumber"in l)return Ya.credentialFromResult(m);const h=l.providerId;if(!h||h===Se.PASSWORD)return null;let y;switch(h){case Se.GOOGLE:y=xo;break;case Se.FACEBOOK:y=ln;break;case Se.GITHUB:y=Nn;break;case Se.TWITTER:y=ua;break;default:const{oauthIdToken:M,oauthAccessToken:j,oauthTokenSecret:ie,pendingToken:Ee,nonce:Qe}=l;return j||ie||M||Ee?Ee?h.startsWith("saml.")?$r._create(h,Ee):Sr._fromParams({providerId:h,signInMethod:h,pendingToken:Ee,idToken:M,accessToken:j}):new mr(h).credential({idToken:M,accessToken:j,rawNonce:Qe}):null}return m instanceof Q.g?y.credentialFromError(m):y.credentialFromResult(m)}function ri(m,l){return l.catch(h=>{throw h instanceof Q.g&&function Td(m,l){var h;const y=null===(h=l.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new Cg(m,function Pc(m,l){var h;const y=(0,Q.Ku)(m),M=l;return je(l.customData.operationType,y,"argument-error"),je(null===(h=M.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,y,"argument-error"),fa._fromError(y,M)}(m,l));else if(y){const M=Ph(l),j=l;M&&(j.credential=M,j.tenantId=y.tenantId||void 0,j.email=y.email||void 0,j.phoneNumber=y.phoneNumber||void 0)}}(m,h),h}).then(h=>{const M=h.user;return{operationType:h.operationType,credential:Ed(h),additionalUserInfo:is(h),user:cs.getOrCreate(M)}})}function cu(m,l){return el.apply(this,arguments)}function el(){return(el=(0,v.A)(function*(m,l){const h=yield l;return{verificationId:h.verificationId,confirm:y=>ri(m,h.confirm(y))}})).apply(this,arguments)}class Cg{constructor(l,h){this.resolver=h,this.auth=function Id(m){return m.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return ri($f(this.auth),this.resolver.resolveSignIn(l))}}class cs{constructor(l){this._delegate=l,this.multiFactor=function Hl(m){const l=(0,Q.Ku)(m);return ss.has(l)||ss.set(l,kn._fromUser(l)),ss.get(l)}(l)}static getOrCreate(l){return cs.USER_MAP.has(l)||cs.USER_MAP.set(l,new cs(l)),cs.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var h=this;return(0,v.A)(function*(){return ri(h.auth,Hr(h._delegate,l))})()}linkWithPhoneNumber(l,h){var y=this;return(0,v.A)(function*(){return cu(y.auth,function Kl(m,l,h){return Qa.apply(this,arguments)}(y._delegate,l,h))})()}linkWithPopup(l){var h=this;return(0,v.A)(function*(){return ri(h.auth,function Ql(m,l,h){return Cf.apply(this,arguments)}(h._delegate,l,Zs))})()}linkWithRedirect(l){var h=this;return(0,v.A)(function*(){return yield hi(Cn(h.auth)),hg(h._delegate,l,Zs)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var h=this;return(0,v.A)(function*(){return ri(h.auth,ko(h._delegate,l))})()}reauthenticateWithPhoneNumber(l,h){return cu(this.auth,function Bu(m,l,h){return _o.apply(this,arguments)}(this._delegate,l,h))}reauthenticateWithPopup(l){return ri(this.auth,function Bc(m,l,h){return $u.apply(this,arguments)}(this._delegate,l,Zs))}reauthenticateWithRedirect(l){var h=this;return(0,v.A)(function*(){return yield hi(Cn(h.auth)),dg(h._delegate,l,Zs)})()}sendEmailVerification(l){return function P(m,l){return F.apply(this,arguments)}(this._delegate,l)}unlink(l){var h=this;return(0,v.A)(function*(){return yield function jl(m,l){return Su.apply(this,arguments)}(h._delegate,l),h})()}updateEmail(l){return function Bn(m,l){const h=(0,Q.Ku)(m);return(0,re._isFirebaseServerApp)(h.auth.app)?Promise.reject(Oe(h.auth)):Yn(h,l,null)}(this._delegate,l)}updatePassword(l){return function tn(m,l){return Yn((0,Q.Ku)(m),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function yo(m,l){return va.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Qn(m,l){return Un.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,h){return function Z(m,l,h){return Fe.apply(this,arguments)}(this._delegate,l,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const sc=je;let Hf=(()=>{class m{constructor(h,y){if(this.app=h,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=h.options;sc(M,"invalid-api-key",{appName:h.name}),sc(M,"invalid-api-key",{appName:h.name});const j=typeof window<"u"?Zs:void 0;this._delegate=y.initialize({options:{persistence:zf(M,h.name),popupRedirectResolver:j}}),this._delegate._updateErrorMap(yt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,y){!function sa(m,l,h){const y=Cn(m);je(y._canInitEmulator,y,"emulator-config-failed"),je(/^https?:\/\//.test(l),y,"invalid-emulator-scheme");const M=!!h?.disableWarnings,j=bu(l),{host:ie,port:Ee}=function La(m){const l=bu(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(l.length));if(!h)return{host:"",port:null};const y=h[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const j=M[1];return{host:j,port:oa(y.substr(j.length+1))}}{const[j,ie]=y.split(":");return{host:j,port:oa(ie)}}}(l);y.config.emulator={url:`${j}//${ie}${null===Ee?"":`:${Ee}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:ie,port:Ee,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Cr(){function m(){const l=document.createElement("p"),h=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,y)}applyActionCode(h){return function Ns(m,l){return yi.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return zs(this._delegate,h)}confirmPasswordReset(h,y){return function lo(m,l,h){return ws.apply(this,arguments)}(this._delegate,h,y)}createUserWithEmailAndPassword(h,y){var M=this;return(0,v.A)(function*(){return ri(M._delegate,function ui(m,l,h){return xu.apply(this,arguments)}(M._delegate,h,y))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function A(m,l){return V.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function Rc(m,l){const h=$s.parseLink(l);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,v.A)(function*(){sc(Yc(),h._delegate,"operation-not-supported-in-this-environment");const y=yield function zo(m,l){return Ea.apply(this,arguments)}(h._delegate,Zs);return y?ri(h._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Rh(m,l){Cn(m)._logFramework(l)}(this._delegate,h)}onAuthStateChanged(h,y,M){const{next:j,error:ie,complete:Ee}=tl(h,y,M);return this._delegate.onAuthStateChanged(j,ie,Ee)}onIdTokenChanged(h,y,M){const{next:j,error:ie,complete:Ee}=tl(h,y,M);return this._delegate.onIdTokenChanged(j,ie,Ee)}sendSignInLinkToEmail(h,y){return function Ou(m,l,h){return xs.apply(this,arguments)}(this._delegate,h,y)}sendPasswordResetEmail(h,y){return function Nu(m,l,h){return Fo.apply(this,arguments)}(this._delegate,h,y||void 0)}setPersistence(h){var y=this;return(0,v.A)(function*(){let M;switch(function vd(m,l){qo(Object.values(hr).includes(l),m,"invalid-persistence-type"),(0,Q.lV)()?qo(l!==hr.SESSION,m,"unsupported-persistence-type"):(0,Q.Ll)()?qo(l===hr.NONE,m,"unsupported-persistence-type"):Aa()?qo(l===hr.NONE||l===hr.LOCAL&&(0,Q.zW)(),m,"unsupported-persistence-type"):qo(l===hr.NONE||ic(),m,"unsupported-persistence-type")}(y._delegate,h),h){case hr.SESSION:M=os;break;case hr.LOCAL:M=(yield lt(I)._isAvailable())?I:go;break;case hr.NONE:M=oe;break;default:return Ke("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return ri(this._delegate,function Dc(m){return Va.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return ri(this._delegate,Ba(this._delegate,h))}signInWithCustomToken(h){return ri(this._delegate,function ji(m,l){return Lo.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,y){return ri(this._delegate,function vi(m,l,h){return(0,re._isFirebaseServerApp)(m.app)?Promise.reject(Oe(m)):Ba((0,Q.Ku)(m),oo.credential(l,h)).catch(function(){var y=(0,v.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&wr(m),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,h,y))}signInWithEmailLink(h,y){return ri(this._delegate,function Hi(m,l,h){return da.apply(this,arguments)}(this._delegate,h,y))}signInWithPhoneNumber(h,y){return cu(this._delegate,function Bo(m,l,h){return qa.apply(this,arguments)}(this._delegate,h,y))}signInWithPopup(h){var y=this;return(0,v.A)(function*(){return sc(Yc(),y._delegate,"operation-not-supported-in-this-environment"),ri(y._delegate,function Uc(m,l,h){return $o.apply(this,arguments)}(y._delegate,h,Zs))})()}signInWithRedirect(h){var y=this;return(0,v.A)(function*(){return sc(Yc(),y._delegate,"operation-not-supported-in-this-environment"),yield hi(y._delegate),Jl(y._delegate,h,Zs)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function ja(m,l){return la.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=hr,m})();function tl(m,l,h){let y=m;"function"!=typeof m&&({next:y,error:l,complete:h}=m);const M=y;return{next:ie=>M(ie&&cs.getOrCreate(ie)),error:l,complete:h}}function zf(m,l){const h=function jf(m,l){const h=Zc();if(!h)return[];const y=pn(Eo,m,l);switch(h.getItem(y)){case hr.NONE:return[oe];case hr.LOCAL:return[I,os];case hr.SESSION:return[os];default:return[]}}(m,l);if(typeof self<"u"&&!h.includes(I)&&h.push(I),typeof window<"u")for(const y of[go,os])h.includes(y)||h.push(y);return h.includes(oe)||h.push(oe),h}class oc{constructor(){this.providerId="phone",this._delegate=new Ya($f(ee.A.auth()))}static credential(l,h){return Ya.credential(l,h)}verifyPhoneNumber(l,h){return this._delegate.verifyPhoneNumber(l,h)}unwrap(){return this._delegate}}oc.PHONE_SIGN_IN_METHOD=Ya.PHONE_SIGN_IN_METHOD,oc.PROVIDER_ID=Ya.PROVIDER_ID;const ac=je;class uc{constructor(l,h,y=ee.A.app()){var M;ac(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new ch(y.auth(),l,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function nl(m){m.INTERNAL.registerComponent(new ve.uA("auth-compat",l=>{const h=l.getProvider("app-compat").getImmediate(),y=l.getProvider("auth");return new Hf(h,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:oo,FacebookAuthProvider:ln,GithubAuthProvider:Nn,GoogleAuthProvider:xo,OAuthProvider:mr,SAMLAuthProvider:Es,PhoneAuthProvider:oc,PhoneMultiFactorGenerator:zc,RecaptchaVerifier:uc,TwitterAuthProvider:ua,Auth:Hf,AuthCredential:Ps,Error:Q.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.14")}(ee.A)},467:(Rt,Be,U)=>{function v(re,Q,G,de,ve,He,Se){try{var X=re[He](Se),te=X.value}catch(me){return void G(me)}X.done?Q(te):Promise.resolve(te).then(de,ve)}function ee(re){return function(){var Q=this,G=arguments;return new Promise(function(de,ve){var He=re.apply(Q,G);function Se(te){v(He,de,ve,Se,X,"next",te)}function X(te){v(He,de,ve,Se,X,"throw",te)}Se(void 0)})}}U.d(Be,{A:()=>ee})},1635:(Rt,Be,U)=>{function Q(ce,pe){var be={};for(var Ae in ce)Object.prototype.hasOwnProperty.call(ce,Ae)&&pe.indexOf(Ae)<0&&(be[Ae]=ce[Ae]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(Ae=Object.getOwnPropertySymbols(ce);We<Ae.length;We++)pe.indexOf(Ae[We])<0&&Object.prototype.propertyIsEnumerable.call(ce,Ae[We])&&(be[Ae[We]]=ce[Ae[We]])}return be}function me(ce,pe,be,Ae){return new(be||(be=Promise))(function(Le,ot){function mt($e){try{zt(Ae.next($e))}catch(Ot){ot(Ot)}}function $n($e){try{zt(Ae.throw($e))}catch(Ot){ot(Ot)}}function zt($e){$e.done?Le($e.value):function We(Le){return Le instanceof be?Le:new be(function(ot){ot(Le)})}($e.value).then(mt,$n)}zt((Ae=Ae.apply(ce,pe||[])).next())})}function Te(ce){return this instanceof Te?(this.v=ce,this):new Te(ce)}function Ke(ce,pe,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Ae=be.apply(ce,pe||[]),Le=[];return We=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),mt("next"),mt("throw"),mt("return",function ot(sn){return function(ht){return Promise.resolve(ht).then(sn,Ot)}}),We[Symbol.asyncIterator]=function(){return this},We;function mt(sn,ht){Ae[sn]&&(We[sn]=function(gt){return new Promise(function(Lt,Ze){Le.push([sn,gt,Lt,Ze])>1||$n(sn,gt)})},ht&&(We[sn]=ht(We[sn])))}function $n(sn,ht){try{!function zt(sn){sn.value instanceof Te?Promise.resolve(sn.value.v).then($e,Ot):Hn(Le[0][2],sn)}(Ae[sn](ht))}catch(gt){Hn(Le[0][3],gt)}}function $e(sn){$n("next",sn)}function Ot(sn){$n("throw",sn)}function Hn(sn,ht){sn(ht),Le.shift(),Le.length&&$n(Le[0][0],Le[0][1])}}function ke(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,pe=ce[Symbol.asyncIterator];return pe?pe.call(ce):(ce=function st(ce){var pe="function"==typeof Symbol&&Symbol.iterator,be=pe&&ce[pe],Ae=0;if(be)return be.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&Ae>=ce.length&&(ce=void 0),{value:ce&&ce[Ae++],done:!ce}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),be={},Ae("next"),Ae("throw"),Ae("return"),be[Symbol.asyncIterator]=function(){return this},be);function Ae(Le){be[Le]=ce[Le]&&function(ot){return new Promise(function(mt,$n){!function We(Le,ot,mt,$n){Promise.resolve($n).then(function(zt){Le({value:zt,done:mt})},ot)}(mt,$n,(ot=ce[Le](ot)).done,ot.value)})}}}U.d(Be,{AQ:()=>Ke,N3:()=>Te,Tt:()=>Q,sH:()=>me,xN:()=>ke}),"function"==typeof SuppressedError&&SuppressedError}},Rt=>{Rt(Rt.s=2264)}]);