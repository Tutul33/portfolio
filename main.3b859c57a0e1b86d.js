"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[792],{1076:(Pt,Be,U)=>{U.d(Be,{Am:()=>an,Bd:()=>He,FA:()=>_t,Fy:()=>ke,I9:()=>Gt,Im:()=>We,Ku:()=>Ke,Ll:()=>St,T9:()=>he,Uj:()=>Se,XA:()=>Oe,ZQ:()=>Xe,bD:()=>zr,c1:()=>on,cY:()=>me,eX:()=>Ae,g:()=>st,gR:()=>Je,hp:()=>fr,jZ:()=>pt,lT:()=>Mt,lV:()=>Jn,mS:()=>Qe,nr:()=>pe,p7:()=>Ht,sr:()=>Xt,tD:()=>vr,u:()=>X,zW:()=>be,zw:()=>_e});const Q=function(z){const k=[];let j=0;for(let re=0;re<z.length;re++){let ae=z.charCodeAt(re);ae<128?k[j++]=ae:ae<2048?(k[j++]=ae>>6|192,k[j++]=63&ae|128):55296==(64512&ae)&&re+1<z.length&&56320==(64512&z.charCodeAt(re+1))?(ae=65536+((1023&ae)<<10)+(1023&z.charCodeAt(++re)),k[j++]=ae>>18|240,k[j++]=ae>>12&63|128,k[j++]=ae>>6&63|128,k[j++]=63&ae|128):(k[j++]=ae>>12|224,k[j++]=ae>>6&63|128,k[j++]=63&ae|128)}return k},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,k){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let ae=0;ae<z.length;ae+=3){const tt=z[ae],ct=ae+1<z.length,jt=ct?z[ae+1]:0,oe=ae+2<z.length,pn=oe?z[ae+2]:0;let Zr=(15&jt)<<2|pn>>6,fi=63&pn;oe||(fi=64,ct||(Zr=64)),re.push(j[tt>>2],j[(3&tt)<<4|jt>>4],j[Zr],j[fi])}return re.join("")},encodeString(z,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(z):this.encodeByteArray(Q(z),k)},decodeString(z,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(z):function(z){const k=[];let j=0,re=0;for(;j<z.length;){const ae=z[j++];if(ae<128)k[re++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const tt=z[j++];k[re++]=String.fromCharCode((31&ae)<<6|63&tt)}else if(ae>239&&ae<365){const oe=((7&ae)<<18|(63&z[j++])<<12|(63&z[j++])<<6|63&z[j++])-65536;k[re++]=String.fromCharCode(55296+(oe>>10)),k[re++]=String.fromCharCode(56320+(1023&oe))}else{const tt=z[j++],ct=z[j++];k[re++]=String.fromCharCode((15&ae)<<12|(63&tt)<<6|63&ct)}}return k.join("")}(this.decodeStringToByteArray(z,k))},decodeStringToByteArray(z,k){this.init_();const j=k?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let ae=0;ae<z.length;){const tt=j[z.charAt(ae++)],jt=ae<z.length?j[z.charAt(ae)]:0;++ae;const pn=ae<z.length?j[z.charAt(ae)]:64;++ae;const cn=ae<z.length?j[z.charAt(ae)]:64;if(++ae,null==tt||null==jt||null==pn||null==cn)throw new Ie;re.push(tt<<2|jt>>4),64!==pn&&(re.push(jt<<4&240|pn>>2),64!==cn&&re.push(pn<<6&192|cn))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(z){return function(z){const k=Q(z);return le.encodeByteArray(k,!0)}(z).replace(/\./g,"")},X=function(z){try{return le.decodeString(z,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function _e(z,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return k}for(const j in k)!k.hasOwnProperty(j)||!et(j)||(z[j]=_e(z[j],k[j]));return z}function et(z){return"__proto__"!==z}function Qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const lt=()=>{try{return Qe().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=z&&X(z[1]);return k&&JSON.parse(k)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},he=()=>{var z;return null===(z=lt())||void 0===z?void 0:z.config},Oe=z=>{var k;return null===(k=lt())||void 0===k?void 0:k[`_${z}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,j)=>{this.resolve=k,this.reject=j})}wrapCallback(k){return(j,re)=>{j?this.reject(j):this.resolve(re),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(j):k(j,re))}}}function ke(z,k){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=k||"demo-project",ae=z.iat||0,tt=z.sub||z.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:ae,exp:ae+3600,auth_time:ae,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},z);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(ct)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function St(){var z;const k=null===(z=lt())||void 0===z?void 0:z.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return typeof window<"u"||Ht()}function Ht(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function on(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Xt(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Jn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Mt(){const z=Xe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function pe(){return!St()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"==typeof indexedDB}catch{return!1}}function Ae(){return new Promise((z,k)=>{try{let j=!0;const re="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(re);ae.onsuccess=()=>{ae.result.close(),j||self.indexedDB.deleteDatabase(re),z(!0)},ae.onupgradeneeded=()=>{j=!1},ae.onerror=()=>{var tt;k((null===(tt=ae.error)||void 0===tt?void 0:tt.message)||"")}}catch(j){k(j)}})}class st extends Error{constructor(k,j,re){super(j),this.code=k,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_t.prototype.create)}}class _t{constructor(k,j,re){this.service=k,this.serviceName=j,this.errors=re}create(k,...j){const re=j[0]||{},ae=`${this.service}/${k}`,tt=this.errors[k],ct=tt?function $n(z,k){return z.replace(zt,(j,re)=>{const ae=k[re];return null!=ae?String(ae):`<${re}?>`})}(tt,re):"Error";return new st(ae,`${this.serviceName}: ${ct} (${ae}).`,re)}}const zt=/\{\$([^}]+)}/g;function Je(z,k){return Object.prototype.hasOwnProperty.call(z,k)}function We(z){for(const k in z)if(Object.prototype.hasOwnProperty.call(z,k))return!1;return!0}function zr(z,k){if(z===k)return!0;const j=Object.keys(z),re=Object.keys(k);for(const ae of j){if(!re.includes(ae))return!1;const tt=z[ae],ct=k[ae];if(ir(tt)&&ir(ct)){if(!zr(tt,ct))return!1}else if(tt!==ct)return!1}for(const ae of re)if(!j.includes(ae))return!1;return!0}function ir(z){return null!==z&&"object"==typeof z}function an(z){const k=[];for(const[j,re]of Object.entries(z))Array.isArray(re)?re.forEach(ae=>{k.push(encodeURIComponent(j)+"="+encodeURIComponent(ae))}):k.push(encodeURIComponent(j)+"="+encodeURIComponent(re));return k.length?"&"+k.join("&"):""}function Gt(z){const k={};return z.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[ae,tt]=re.split("=");k[decodeURIComponent(ae)]=decodeURIComponent(tt)}}),k}function fr(z){const k=z.indexOf("?");if(!k)return"";const j=z.indexOf("#",k);return z.substring(k,j>0?j:void 0)}function vr(z,k){const j=new bn(z,k);return j.subscribe.bind(j)}class bn{constructor(k,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{k(this)}).catch(re=>{this.error(re)})}next(k){this.forEachObserver(j=>{j.next(k)})}error(k){this.forEachObserver(j=>{j.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,j,re){let ae;if(void 0===k&&void 0===j&&void 0===re)throw new Error("Missing Observer.");ae=function to(z,k){if("object"!=typeof z||null===z)return!1;for(const j of k)if(j in z&&"function"==typeof z[j])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:j,complete:re},void 0===ae.next&&(ae.next=ot),void 0===ae.error&&(ae.error=ot),void 0===ae.complete&&(ae.complete=ot);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),tt}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,k)}sendOne(k,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{j(this.observers[k])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ot(){}function Ke(z){return z&&z._delegate?z._delegate:z}},4796:(Pt,Be,U)=>{U.d(Be,{u:()=>ne});var I=U(7705),ee=U(1977);let ne=(()=>{class Q{constructor(le){this.afAuth=le}signIn(le,Ie){return this.afAuth.signInWithEmailAndPassword(le,Ie).then(je=>(console.log("User signed in:",je.user),je.user)).catch(je=>{throw console.error("Sign-in error:",je),je})}signOut(){return this.afAuth.signOut()}isAuthenticated(){return this.afAuth.authState}static{this.\u0275fac=function(Ie){return new(Ie||Q)(I.KVO(ee.DS))}}static{this.\u0275prov=I.jDH({token:Q,factory:Q.\u0275fac,providedIn:"root"})}}return Q})()},2264:(Pt,Be,U)=>{var I=U(345),ee=U(9253),ne=U(8079),Q=U(7841),K=U(7705);const le=[{path:"",children:[{path:"",loadChildren:()=>Promise.all([U.e(341),U.e(76),U.e(961)]).then(U.bind(U,4961)).then(mt=>mt.PublicModule)}]},{path:"private",children:[{path:"",loadChildren:()=>Promise.all([U.e(341),U.e(76),U.e(387)]).then(U.bind(U,1387)).then(mt=>mt.PrivateModule)}]},{path:"login",children:[{path:"",loadChildren:()=>Promise.all([U.e(341),U.e(0)]).then(U.bind(U,5e3)).then(mt=>mt.LoginModule)}]}];let Ie=(()=>{class mt{static{this.\u0275fac=function(Oe){return new(Oe||mt)}}static{this.\u0275mod=K.$C({type:mt})}static{this.\u0275inj=K.G2t({imports:[Q.iI.forRoot(le),Q.iI]})}}return mt})();var je=U(4796),Se=U(177);const X=function(){return["/login/sign-in"]};function te(mt,ye){if(1&mt&&(K.j41(0,"a",3),K.EFF(1),K.nrm(2,"i",27),K.EFF(3," Log In"),K.k0s()),2&mt){const he=K.XpG();K.Y8G("routerLink",K.lJ4(2,X)),K.R7$(1),K.JRh(he.getAuthenticated())}}function _e(mt,ye){if(1&mt){const he=K.RV6();K.j41(0,"a",21),K.bIt("click",function(){K.eBV(he);const me=K.XpG();return K.Njj(me.signOut())}),K.nrm(1,"i",28),K.EFF(2," Log Out"),K.k0s()}}const et=function(){return["/"]};let Qe=(()=>{class mt{constructor(he,Oe){this.authService=he,this.router=Oe,this.isAuthenticated=!1}goToLinkSection(he){this.router.navigateByUrl("/").then(()=>{this.scrollToSection(he)})}scrollToSection(he){setTimeout(()=>{const Oe=document.getElementById(he);Oe&&Oe.scrollIntoView({behavior:"smooth"})},0)}getAuthenticated(){this.authService.isAuthenticated().subscribe(he=>{this.user=he,this.isAuthenticated=!!he})}signOut(){return this.authService.signOut()}static{this.\u0275fac=function(Oe){return new(Oe||mt)(K.rXU(je.u),K.rXU(Q.Ix))}}static{this.\u0275cmp=K.VBU({type:mt,selectors:[["app-header"]],decls:41,vars:6,consts:[["id","header",1,"header","dark-background","d-flex","flex-column"],[1,"header-toggle","d-xl-none","bi","bi-list"],[1,"profile-img"],["href","javascript:void(0)",3,"routerLink"],["src","assets/img/my-profile-img.jpg","alt","",1,"img-fluid","rounded-circle"],["href","javascript:void(0)",1,"logo","d-flex","align-items-center","justify-content-center",3,"routerLink"],[1,"sitename"],[1,"social-links","text-center"],["href","javascript:void(0)",1,"twitter"],[1,"bi","bi-twitter-x"],["href","javascript:void(0)",1,"facebook"],[1,"bi","bi-facebook"],["href","javascript:void(0)",1,"instagram"],[1,"bi","bi-instagram"],["href","javascript:void(0)",1,"google-plus"],[1,"bi","bi-skype"],["href","javascript:void(0)",1,"linkedin"],[1,"bi","bi-linkedin"],["id","navmenu",1,"navmenu"],["href","javascript:void(0)",1,"active",3,"click"],[1,"bi","bi-house","navicon"],["href","javascript:void(0)",3,"click"],[1,"bi","bi-person","navicon"],[1,"bi","bi-file-earmark-text","navicon"],[1,"bi","bi-envelope","navicon"],["href","javascript:void(0)",3,"routerLink",4,"ngIf"],["href","javascript:void(0)",3,"click",4,"ngIf"],[1,"bi","bi-box-arrow-in-right","navicon"],[1,"bi","bi-door-open","navicon"]],template:function(Oe,me){1&Oe&&(K.j41(0,"header",0),K.nrm(1,"i",1),K.j41(2,"div",2)(3,"a",3),K.nrm(4,"img",4),K.k0s()(),K.j41(5,"a",5)(6,"h1",6),K.EFF(7,"Tutul Chakma"),K.k0s()(),K.j41(8,"div",7)(9,"a",8),K.nrm(10,"i",9),K.k0s(),K.j41(11,"a",10),K.nrm(12,"i",11),K.k0s(),K.j41(13,"a",12),K.nrm(14,"i",13),K.k0s(),K.j41(15,"a",14),K.nrm(16,"i",15),K.k0s(),K.j41(17,"a",16),K.nrm(18,"i",17),K.k0s()(),K.j41(19,"nav",18)(20,"ul")(21,"li")(22,"a",19),K.bIt("click",function(){return me.goToLinkSection("hero")}),K.nrm(23,"i",20),K.EFF(24,"Home"),K.k0s()(),K.j41(25,"li")(26,"a",21),K.bIt("click",function(){return me.goToLinkSection("about")}),K.nrm(27,"i",22),K.EFF(28," About"),K.k0s()(),K.j41(29,"li")(30,"a",21),K.bIt("click",function(){return me.goToLinkSection("resume")}),K.nrm(31,"i",23),K.EFF(32," Resume"),K.k0s()(),K.j41(33,"li")(34,"a",21),K.bIt("click",function(){return me.goToLinkSection("contact")}),K.nrm(35,"i",24),K.EFF(36," Contact"),K.k0s()(),K.j41(37,"li"),K.DNE(38,te,4,3,"a",25),K.k0s(),K.j41(39,"li"),K.DNE(40,_e,3,0,"a",26),K.k0s()()()()),2&Oe&&(K.R7$(3),K.Y8G("routerLink",K.lJ4(4,et)),K.R7$(2),K.Y8G("routerLink",K.lJ4(5,et)),K.R7$(33),K.Y8G("ngIf",!me.isAuthenticated),K.R7$(2),K.Y8G("ngIf",me.isAuthenticated))},dependencies:[Se.bT,Q.Wk]})}}return mt})(),vt=(()=>{class mt{static{this.\u0275fac=function(Oe){return new(Oe||mt)}}static{this.\u0275cmp=K.VBU({type:mt,selectors:[["app-footer"]],decls:15,vars:0,consts:[["id","footer",1,"footer","position-relative","light-background"],[1,"container"],[1,"copyright","text-center"],[1,"px-1","sitename"],[1,"credits"],["href","https://bootstrapmade.com/"]],template:function(Oe,me){1&Oe&&(K.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"p"),K.EFF(4,"\xa9 "),K.j41(5,"span"),K.EFF(6,"Copyright"),K.k0s(),K.j41(7,"strong",3),K.EFF(8,"iPortfolio"),K.k0s(),K.j41(9,"span"),K.EFF(10,"All Rights Reserved"),K.k0s()()(),K.j41(11,"div",4),K.EFF(12," Designed by "),K.j41(13,"a",5),K.EFF(14,"BootstrapMade"),K.k0s()()()())}})}}return mt})(),it=(()=>{class mt{constructor(){this.title="Tutul Chakma - iProfile"}ngOnInit(){this.initPreloader(),this.initScrollTopButton()}initPreloader(){const he=document.querySelector("#preloader");he&&window.addEventListener("load",()=>{he.remove()})}initScrollTopButton(){const he=document.querySelector(".scroll-top"),Oe=()=>{he&&(window.scrollY>100?he.classList.add("active"):he.classList.remove("active"))};he?.addEventListener("click",me=>{me.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("load",Oe),document.addEventListener("scroll",Oe)}static{this.\u0275fac=function(Oe){return new(Oe||mt)}}static{this.\u0275cmp=K.VBU({type:mt,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"header"],[1,"main"],["href","#","id","scroll-top",1,"scroll-top","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-arrow-up-short"],["id","preloader"]],template:function(Oe,me){1&Oe&&(K.nrm(0,"app-header",0),K.j41(1,"main",1),K.nrm(2,"router-outlet"),K.k0s(),K.nrm(3,"app-footer"),K.j41(4,"a",2),K.nrm(5,"i",3),K.k0s(),K.nrm(6,"div",4))},dependencies:[Q.n3,Qe,vt]})}}return mt})();const Tt_firebase={apiKey:"AIzaSyAxewJxIFqlKaI5lGvSOnqP8cBHZADh2v4",authDomain:"profilestore-87502.firebaseapp.com",projectId:"profilestore-87502",storageBucket:"profilestore-87502.appspot.com",messagingSenderId:"119648305117",appId:"1:119648305117:web:d3315294cffdaddf474034",measurementId:"G-TPLPTSR76Y"};let lt=(()=>{class mt{static{this.\u0275fac=function(Oe){return new(Oe||mt)}}static{this.\u0275mod=K.$C({type:mt,bootstrap:[it]})}static{this.\u0275inj=K.G2t({imports:[I.Bb,Ie,ee.bf.initializeApp(Tt_firebase),ne.cM]})}}return mt})();I.sG().bootstrapModule(lt).catch(mt=>console.error(mt))},4412:(Pt,Be,U)=>{U.d(Be,{t:()=>ee});var I=U(1413);class ee extends I.B{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const K=super._subscribe(Q);return!K.closed&&Q.next(this._value),K}getValue(){const{hasError:Q,thrownError:K,_value:le}=this;if(Q)throw K;return this._throwIfClosed(),le}next(Q){super.next(this._value=Q)}}},1985:(Pt,Be,U)=>{U.d(Be,{c:()=>je});var I=U(7707),ee=U(8359),ne=U(3494),Q=U(1203),K=U(1026),le=U(8071),Ie=U(9786);let je=(()=>{class _e{constructor(Qe){Qe&&(this._subscribe=Qe)}lift(Qe){const vt=new _e;return vt.source=this,vt.operator=Qe,vt}subscribe(Qe,vt,it){const Tt=function te(_e){return _e&&_e instanceof I.vU||function X(_e){return _e&&(0,le.T)(_e.next)&&(0,le.T)(_e.error)&&(0,le.T)(_e.complete)}(_e)&&(0,ee.Uv)(_e)}(Qe)?Qe:new I.Ms(Qe,vt,it);return(0,Ie.Y)(()=>{const{operator:lt,source:mt}=this;Tt.add(lt?lt.call(Tt,mt):mt?this._subscribe(Tt):this._trySubscribe(Tt))}),Tt}_trySubscribe(Qe){try{return this._subscribe(Qe)}catch(vt){Qe.error(vt)}}forEach(Qe,vt){return new(vt=Se(vt))((it,Tt)=>{const lt=new I.Ms({next:mt=>{try{Qe(mt)}catch(ye){Tt(ye),lt.unsubscribe()}},error:Tt,complete:it});this.subscribe(lt)})}_subscribe(Qe){var vt;return null===(vt=this.source)||void 0===vt?void 0:vt.subscribe(Qe)}[ne.s](){return this}pipe(...Qe){return(0,Q.m)(Qe)(this)}toPromise(Qe){return new(Qe=Se(Qe))((vt,it)=>{let Tt;this.subscribe(lt=>Tt=lt,lt=>it(lt),()=>vt(Tt))})}}return _e.create=et=>new _e(et),_e})();function Se(_e){var et;return null!==(et=_e??K.$.Promise)&&void 0!==et?et:Promise}},1413:(Pt,Be,U)=>{U.d(Be,{B:()=>Ie});var I=U(1985),ee=U(8359);const Q=(0,U(1853).L)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var K=U(7908),le=U(9786);let Ie=(()=>{class Se extends I.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const _e=new je(this,this);return _e.operator=te,_e}_throwIfClosed(){if(this.closed)throw new Q}next(te){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(te)}})}error(te){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:_e}=this;for(;_e.length;)_e.shift().error(te)}})}complete(){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:_e,isStopped:et,observers:Qe}=this;return _e||et?ee.Kn:(this.currentObservers=null,Qe.push(te),new ee.yU(()=>{this.currentObservers=null,(0,K.o)(Qe,te)}))}_checkFinalizedStatuses(te){const{hasError:_e,thrownError:et,isStopped:Qe}=this;_e?te.error(et):Qe&&te.complete()}asObservable(){const te=new I.c;return te.source=this,te}}return Se.create=(X,te)=>new je(X,te),Se})();class je extends Ie{constructor(X,te){super(),this.destination=X,this.source=te}next(X){var te,_e;null===(_e=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===_e||_e.call(te,X)}error(X){var te,_e;null===(_e=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===_e||_e.call(te,X)}complete(){var X,te;null===(te=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===te||te.call(X)}_subscribe(X){var te,_e;return null!==(_e=null===(te=this.source)||void 0===te?void 0:te.subscribe(X))&&void 0!==_e?_e:ee.Kn}}},7707:(Pt,Be,U)=>{U.d(Be,{Ms:()=>it,vU:()=>_e});var I=U(8071),ee=U(8359),ne=U(1026),Q=U(5334),K=U(5343);const le=Se("C",void 0,void 0);function Se(he,Oe,me){return{kind:he,value:Oe,error:me}}var X=U(9270),te=U(9786);class _e extends ee.yU{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,ee.Uv)(Oe)&&Oe.add(this)):this.destination=ye}static create(Oe,me,ke){return new it(Oe,me,ke)}next(Oe){this.isStopped?mt(function je(he){return Se("N",he,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?mt(function Ie(he){return Se("E",void 0,he)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?mt(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Qe(he,Oe){return et.call(he,Oe)}class vt{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:me}=this;if(me.next)try{me.next(Oe)}catch(ke){Tt(ke)}}error(Oe){const{partialObserver:me}=this;if(me.error)try{me.error(Oe)}catch(ke){Tt(ke)}else Tt(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(me){Tt(me)}}}class it extends _e{constructor(Oe,me,ke){let Xe;if(super(),(0,I.T)(Oe)||!Oe)Xe={next:Oe??void 0,error:me??void 0,complete:ke??void 0};else{let pt;this&&ne.$.useDeprecatedNextContext?(pt=Object.create(Oe),pt.unsubscribe=()=>this.unsubscribe(),Xe={next:Oe.next&&Qe(Oe.next,pt),error:Oe.error&&Qe(Oe.error,pt),complete:Oe.complete&&Qe(Oe.complete,pt)}):Xe=Oe}this.destination=new vt(Xe)}}function Tt(he){ne.$.useDeprecatedSynchronousErrorHandling?(0,te.l)(he):(0,Q.m)(he)}function mt(he,Oe){const{onStoppedNotification:me}=ne.$;me&&X.f.setTimeout(()=>me(he,Oe))}const ye={closed:!0,next:K.l,error:function lt(he){throw he},complete:K.l}},8359:(Pt,Be,U)=>{U.d(Be,{Kn:()=>le,yU:()=>K,Uv:()=>Ie});var I=U(8071);const ne=(0,U(1853).L)(Se=>function(te){Se(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((_e,et)=>`${et+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var Q=U(7908);class K{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const Qe of te)Qe.remove(this);else te.remove(this);const{initialTeardown:_e}=this;if((0,I.T)(_e))try{_e()}catch(Qe){X=Qe instanceof ne?Qe.errors:[Qe]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Qe of et)try{je(Qe)}catch(vt){X=X??[],vt instanceof ne?X=[...X,...vt.errors]:X.push(vt)}}if(X)throw new ne(X)}}add(X){var te;if(X&&X!==this)if(this.closed)je(X);else{if(X instanceof K){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(X)}}_hasParent(X){const{_parentage:te}=this;return te===X||Array.isArray(te)&&te.includes(X)}_addParent(X){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(X),te):te?[te,X]:X}_removeParent(X){const{_parentage:te}=this;te===X?this._parentage=null:Array.isArray(te)&&(0,Q.o)(te,X)}remove(X){const{_finalizers:te}=this;te&&(0,Q.o)(te,X),X instanceof K&&X._removeParent(this)}}K.EMPTY=(()=>{const Se=new K;return Se.closed=!0,Se})();const le=K.EMPTY;function Ie(Se){return Se instanceof K||Se&&"closed"in Se&&(0,I.T)(Se.remove)&&(0,I.T)(Se.add)&&(0,I.T)(Se.unsubscribe)}function je(Se){(0,I.T)(Se)?Se():Se.unsubscribe()}},1026:(Pt,Be,U)=>{U.d(Be,{$:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(Pt,Be,U)=>{U.d(Be,{x:()=>K});var I=U(6365),ne=U(3794),Q=U(8455);function K(...le){return function ee(){return(0,I.U)(1)}()((0,Q.H)(le,(0,ne.lI)(le)))}},983:(Pt,Be,U)=>{U.d(Be,{w:()=>ee});const ee=new(U(1985).c)(K=>K.complete())},8455:(Pt,Be,U)=>{U.d(Be,{H:()=>Oe});var I=U(8750),ee=U(941),ne=U(6745),le=U(1985),je=U(4761),Se=U(8071),X=U(5225);function _e(me,ke){if(!me)throw new Error("Iterable cannot be null");return new le.c(Xe=>{(0,X.N)(Xe,ke,()=>{const pt=me[Symbol.asyncIterator]();(0,X.N)(Xe,ke,()=>{pt.next().then(St=>{St.done?Xe.complete():Xe.next(St.value)})},0,!0)})})}var et=U(5055),Qe=U(9858),vt=U(7441),it=U(5397),Tt=U(7953),lt=U(591),mt=U(5196);function Oe(me,ke){return ke?function he(me,ke){if(null!=me){if((0,et.l)(me))return function Q(me,ke){return(0,I.Tg)(me).pipe((0,ne._)(ke),(0,ee.Q)(ke))}(me,ke);if((0,vt.X)(me))return function Ie(me,ke){return new le.c(Xe=>{let pt=0;return ke.schedule(function(){pt===me.length?Xe.complete():(Xe.next(me[pt++]),Xe.closed||this.schedule())})})}(me,ke);if((0,Qe.y)(me))return function K(me,ke){return(0,I.Tg)(me).pipe((0,ne._)(ke),(0,ee.Q)(ke))}(me,ke);if((0,Tt.T)(me))return _e(me,ke);if((0,it.x)(me))return function te(me,ke){return new le.c(Xe=>{let pt;return(0,X.N)(Xe,ke,()=>{pt=me[je.l](),(0,X.N)(Xe,ke,()=>{let St,He;try{({value:St,done:He}=pt.next())}catch(Ht){return void Xe.error(Ht)}He?Xe.complete():Xe.next(St)},0,!0)}),()=>(0,Se.T)(pt?.return)&&pt.return()})}(me,ke);if((0,mt.U)(me))return function ye(me,ke){return _e((0,mt.C)(me),ke)}(me,ke)}throw(0,lt.L)(me)}(me,ke):(0,I.Tg)(me)}},8750:(Pt,Be,U)=>{U.d(Be,{Tg:()=>et});var I=U(1635),ee=U(7441),ne=U(9858),Q=U(1985),K=U(5055),le=U(7953),Ie=U(591),je=U(5397),Se=U(5196),X=U(8071),te=U(5334),_e=U(3494);function et(he){if(he instanceof Q.c)return he;if(null!=he){if((0,K.l)(he))return function Qe(he){return new Q.c(Oe=>{const me=he[_e.s]();if((0,X.T)(me.subscribe))return me.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,ee.X)(he))return function vt(he){return new Q.c(Oe=>{for(let me=0;me<he.length&&!Oe.closed;me++)Oe.next(he[me]);Oe.complete()})}(he);if((0,ne.y)(he))return function it(he){return new Q.c(Oe=>{he.then(me=>{Oe.closed||(Oe.next(me),Oe.complete())},me=>Oe.error(me)).then(null,te.m)})}(he);if((0,le.T)(he))return lt(he);if((0,je.x)(he))return function Tt(he){return new Q.c(Oe=>{for(const me of he)if(Oe.next(me),Oe.closed)return;Oe.complete()})}(he);if((0,Se.U)(he))return function mt(he){return lt((0,Se.C)(he))}(he)}throw(0,Ie.L)(he)}function lt(he){return new Q.c(Oe=>{(function ye(he,Oe){var me,ke,Xe,pt;return(0,I.sH)(this,void 0,void 0,function*(){try{for(me=(0,I.xN)(he);!(ke=yield me.next()).done;)if(Oe.next(ke.value),Oe.closed)return}catch(St){Xe={error:St}}finally{try{ke&&!ke.done&&(pt=me.return)&&(yield pt.call(me))}finally{if(Xe)throw Xe.error}}Oe.complete()})})(he,Oe).catch(me=>Oe.error(me))})}},7786:(Pt,Be,U)=>{U.d(Be,{h:()=>le});var I=U(6365),ee=U(8750),ne=U(983),Q=U(3794),K=U(8455);function le(...Ie){const je=(0,Q.lI)(Ie),Se=(0,Q.R0)(Ie,1/0),X=Ie;return X.length?1===X.length?(0,ee.Tg)(X[0]):(0,I.U)(Se)((0,K.H)(X,je)):ne.w}},7673:(Pt,Be,U)=>{U.d(Be,{of:()=>ne});var I=U(3794),ee=U(8455);function ne(...Q){const K=(0,I.lI)(Q);return(0,ee.H)(Q,K)}},4360:(Pt,Be,U)=>{U.d(Be,{_:()=>ee});var I=U(7707);function ee(Q,K,le,Ie,je){return new ne(Q,K,le,Ie,je)}class ne extends I.vU{constructor(K,le,Ie,je,Se,X){super(K),this.onFinalize=Se,this.shouldUnsubscribe=X,this._next=le?function(te){try{le(te)}catch(_e){K.error(_e)}}:super._next,this._error=je?function(te){try{je(te)}catch(_e){K.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(te){K.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var K;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(K=this.onFinalize)||void 0===K||K.call(this))}}}},9901:(Pt,Be,U)=>{U.d(Be,{U:()=>ne});var I=U(9974),ee=U(4360);function ne(Q){return(0,I.N)((K,le)=>{let Ie=!1;K.subscribe((0,ee._)(le,je=>{Ie=!0,le.next(je)},()=>{Ie||le.next(Q),le.complete()}))})}},3294:(Pt,Be,U)=>{U.d(Be,{F:()=>Q});var I=U(3669),ee=U(9974),ne=U(4360);function Q(le,Ie=I.D){return le=le??K,(0,ee.N)((je,Se)=>{let X,te=!0;je.subscribe((0,ne._)(Se,_e=>{const et=Ie(_e);(te||!le(X,et))&&(te=!1,X=et,Se.next(_e))}))})}function K(le,Ie){return le===Ie}},5964:(Pt,Be,U)=>{U.d(Be,{p:()=>ne});var I=U(9974),ee=U(4360);function ne(Q,K){return(0,I.N)((le,Ie)=>{let je=0;le.subscribe((0,ee._)(Ie,Se=>Q.call(K,Se,je++)&&Ie.next(Se)))})}},1594:(Pt,Be,U)=>{U.d(Be,{$:()=>Ie});var I=U(9350),ee=U(5964),ne=U(6697),Q=U(9901),K=U(3774),le=U(3669);function Ie(je,Se){const X=arguments.length>=2;return te=>te.pipe(je?(0,ee.p)((_e,et)=>je(_e,et,te)):le.D,(0,ne.s)(1),X?(0,Q.U)(Se):(0,K.v)(()=>new I.G))}},6354:(Pt,Be,U)=>{U.d(Be,{T:()=>ne});var I=U(9974),ee=U(4360);function ne(Q,K){return(0,I.N)((le,Ie)=>{let je=0;le.subscribe((0,ee._)(Ie,Se=>{Ie.next(Q.call(K,Se,je++))}))})}},6365:(Pt,Be,U)=>{U.d(Be,{U:()=>ne});var I=U(1397),ee=U(3669);function ne(Q=1/0){return(0,I.Z)(ee.D,Q)}},1397:(Pt,Be,U)=>{U.d(Be,{Z:()=>je});var I=U(6354),ee=U(8750),ne=U(9974),Q=U(5225),K=U(4360),Ie=U(8071);function je(Se,X,te=1/0){return(0,Ie.T)(X)?je((_e,et)=>(0,I.T)((Qe,vt)=>X(_e,Qe,et,vt))((0,ee.Tg)(Se(_e,et))),te):("number"==typeof X&&(te=X),(0,ne.N)((_e,et)=>function le(Se,X,te,_e,et,Qe,vt,it){const Tt=[];let lt=0,mt=0,ye=!1;const he=()=>{ye&&!Tt.length&&!lt&&X.complete()},Oe=ke=>lt<_e?me(ke):Tt.push(ke),me=ke=>{Qe&&X.next(ke),lt++;let Xe=!1;(0,ee.Tg)(te(ke,mt++)).subscribe((0,K._)(X,pt=>{et?.(pt),Qe?Oe(pt):X.next(pt)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(lt--;Tt.length&&lt<_e;){const pt=Tt.shift();vt?(0,Q.N)(X,vt,()=>me(pt)):me(pt)}he()}catch(pt){X.error(pt)}}))};return Se.subscribe((0,K._)(X,Oe,()=>{ye=!0,he()})),()=>{it?.()}}(_e,et,Se,te)))}},941:(Pt,Be,U)=>{U.d(Be,{Q:()=>Q});var I=U(5225),ee=U(9974),ne=U(4360);function Q(K,le=0){return(0,ee.N)((Ie,je)=>{Ie.subscribe((0,ne._)(je,Se=>(0,I.N)(je,K,()=>je.next(Se),le),()=>(0,I.N)(je,K,()=>je.complete(),le),Se=>(0,I.N)(je,K,()=>je.error(Se),le)))})}},2816:(Pt,Be,U)=>{U.d(Be,{S:()=>Q});var I=U(9974),ee=U(4360);function Q(K,le){return(0,I.N)(function ne(K,le,Ie,je,Se){return(X,te)=>{let _e=Ie,et=le,Qe=0;X.subscribe((0,ee._)(te,vt=>{const it=Qe++;et=_e?K(et,vt,it):(_e=!0,vt),je&&te.next(et)},Se&&(()=>{_e&&te.next(et),te.complete()})))}}(K,le,arguments.length>=2,!0))}},7647:(Pt,Be,U)=>{U.d(Be,{u:()=>K});var I=U(8750),ee=U(1413),ne=U(7707),Q=U(9974);function K(Ie={}){const{connector:je=(()=>new ee.B),resetOnError:Se=!0,resetOnComplete:X=!0,resetOnRefCountZero:te=!0}=Ie;return _e=>{let et,Qe,vt,it=0,Tt=!1,lt=!1;const mt=()=>{Qe?.unsubscribe(),Qe=void 0},ye=()=>{mt(),et=vt=void 0,Tt=lt=!1},he=()=>{const Oe=et;ye(),Oe?.unsubscribe()};return(0,Q.N)((Oe,me)=>{it++,!lt&&!Tt&&mt();const ke=vt=vt??je();me.add(()=>{it--,0===it&&!lt&&!Tt&&(Qe=le(he,te))}),ke.subscribe(me),!et&&it>0&&(et=new ne.Ms({next:Xe=>ke.next(Xe),error:Xe=>{lt=!0,mt(),Qe=le(ye,Se,Xe),ke.error(Xe)},complete:()=>{Tt=!0,mt(),Qe=le(ye,X),ke.complete()}}),(0,I.Tg)(Oe).subscribe(et))})(_e)}}function le(Ie,je,...Se){if(!0===je)return void Ie();if(!1===je)return;const X=new ne.Ms({next:()=>{X.unsubscribe(),Ie()}});return(0,I.Tg)(je(...Se)).subscribe(X)}},9172:(Pt,Be,U)=>{U.d(Be,{Z:()=>Q});var I=U(8793),ee=U(3794),ne=U(9974);function Q(...K){const le=(0,ee.lI)(K);return(0,ne.N)((Ie,je)=>{(le?(0,I.x)(K,Ie,le):(0,I.x)(K,Ie)).subscribe(je)})}},6745:(Pt,Be,U)=>{U.d(Be,{_:()=>ee});var I=U(9974);function ee(ne,Q=0){return(0,I.N)((K,le)=>{le.add(ne.schedule(()=>K.subscribe(le),Q))})}},5558:(Pt,Be,U)=>{U.d(Be,{n:()=>Q});var I=U(8750),ee=U(9974),ne=U(4360);function Q(K,le){return(0,ee.N)((Ie,je)=>{let Se=null,X=0,te=!1;const _e=()=>te&&!Se&&je.complete();Ie.subscribe((0,ne._)(je,et=>{Se?.unsubscribe();let Qe=0;const vt=X++;(0,I.Tg)(K(et,vt)).subscribe(Se=(0,ne._)(je,it=>je.next(le?le(et,it,vt,Qe++):it),()=>{Se=null,_e()}))},()=>{te=!0,_e()}))})}},6697:(Pt,Be,U)=>{U.d(Be,{s:()=>Q});var I=U(983),ee=U(9974),ne=U(4360);function Q(K){return K<=0?()=>I.w:(0,ee.N)((le,Ie)=>{let je=0;le.subscribe((0,ne._)(Ie,Se=>{++je<=K&&(Ie.next(Se),K<=je&&Ie.complete())}))})}},8141:(Pt,Be,U)=>{U.d(Be,{M:()=>K});var I=U(8071),ee=U(9974),ne=U(4360),Q=U(3669);function K(le,Ie,je){const Se=(0,I.T)(le)||Ie||je?{next:le,error:Ie,complete:je}:le;return Se?(0,ee.N)((X,te)=>{var _e;null===(_e=Se.subscribe)||void 0===_e||_e.call(Se);let et=!0;X.subscribe((0,ne._)(te,Qe=>{var vt;null===(vt=Se.next)||void 0===vt||vt.call(Se,Qe),te.next(Qe)},()=>{var Qe;et=!1,null===(Qe=Se.complete)||void 0===Qe||Qe.call(Se),te.complete()},Qe=>{var vt;et=!1,null===(vt=Se.error)||void 0===vt||vt.call(Se,Qe),te.error(Qe)},()=>{var Qe,vt;et&&(null===(Qe=Se.unsubscribe)||void 0===Qe||Qe.call(Se)),null===(vt=Se.finalize)||void 0===vt||vt.call(Se)}))}):Q.D}},3774:(Pt,Be,U)=>{U.d(Be,{v:()=>Q});var I=U(9350),ee=U(9974),ne=U(4360);function Q(le=K){return(0,ee.N)((Ie,je)=>{let Se=!1;Ie.subscribe((0,ne._)(je,X=>{Se=!0,je.next(X)},()=>Se?je.complete():je.error(le())))})}function K(){return new I.G}},6780:(Pt,Be,U)=>{U.d(Be,{R:()=>K});var I=U(8359);class ee extends I.yU{constructor(Ie,je){super()}schedule(Ie,je=0){return this}}const ne={setInterval(le,Ie,...je){const{delegate:Se}=ne;return Se?.setInterval?Se.setInterval(le,Ie,...je):setInterval(le,Ie,...je)},clearInterval(le){const{delegate:Ie}=ne;return(Ie?.clearInterval||clearInterval)(le)},delegate:void 0};var Q=U(7908);class K extends ee{constructor(Ie,je){super(Ie,je),this.scheduler=Ie,this.work=je,this.pending=!1}schedule(Ie,je=0){var Se;if(this.closed)return this;this.state=Ie;const X=this.id,te=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(te,X,je)),this.pending=!0,this.delay=je,this.id=null!==(Se=this.id)&&void 0!==Se?Se:this.requestAsyncId(te,this.id,je),this}requestAsyncId(Ie,je,Se=0){return ne.setInterval(Ie.flush.bind(Ie,this),Se)}recycleAsyncId(Ie,je,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return je;null!=je&&ne.clearInterval(je)}execute(Ie,je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(Ie,je);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,je){let X,Se=!1;try{this.work(Ie)}catch(te){Se=!0,X=te||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:je}=this,{actions:Se}=je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Q.o)(Se,this),null!=Ie&&(this.id=this.recycleAsyncId(je,Ie,null)),this.delay=null,super.unsubscribe()}}}},9687:(Pt,Be,U)=>{U.d(Be,{q:()=>ne});var I=U(6129);class ee{constructor(K,le=ee.now){this.schedulerActionCtor=K,this.now=le}schedule(K,le=0,Ie){return new this.schedulerActionCtor(this,K).schedule(Ie,le)}}ee.now=I.U.now;class ne extends ee{constructor(K,le=ee.now){super(K,le),this.actions=[],this._active=!1}flush(K){const{actions:le}=this;if(this._active)return void le.push(K);let Ie;this._active=!0;do{if(Ie=K.execute(K.state,K.delay))break}while(K=le.shift());if(this._active=!1,Ie){for(;K=le.shift();)K.unsubscribe();throw Ie}}}},3236:(Pt,Be,U)=>{U.d(Be,{E:()=>ne});var I=U(6780);const ne=new(U(9687).q)(I.R)},6129:(Pt,Be,U)=>{U.d(Be,{U:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},9270:(Pt,Be,U)=>{U.d(Be,{f:()=>I});const I={setTimeout(ee,ne,...Q){const{delegate:K}=I;return K?.setTimeout?K.setTimeout(ee,ne,...Q):setTimeout(ee,ne,...Q)},clearTimeout(ee){const{delegate:ne}=I;return(ne?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4761:(Pt,Be,U)=>{U.d(Be,{l:()=>ee});const ee=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Pt,Be,U)=>{U.d(Be,{s:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Pt,Be,U)=>{U.d(Be,{G:()=>ee});const ee=(0,U(1853).L)(ne=>function(){ne(this),this.name="EmptyError",this.message="no elements in sequence"})},3794:(Pt,Be,U)=>{U.d(Be,{R0:()=>le,ms:()=>Q,lI:()=>K});var I=U(8071);function ne(Ie){return Ie[Ie.length-1]}function Q(Ie){return(0,I.T)(ne(Ie))?Ie.pop():void 0}function K(Ie){return function ee(Ie){return Ie&&(0,I.T)(Ie.schedule)}(ne(Ie))?Ie.pop():void 0}function le(Ie,je){return"number"==typeof ne(Ie)?Ie.pop():je}},3073:(Pt,Be,U)=>{U.d(Be,{D:()=>K});const{isArray:I}=Array,{getPrototypeOf:ee,prototype:ne,keys:Q}=Object;function K(Ie){if(1===Ie.length){const je=Ie[0];if(I(je))return{args:je,keys:null};if(function le(Ie){return Ie&&"object"==typeof Ie&&ee(Ie)===ne}(je)){const Se=Q(je);return{args:Se.map(X=>je[X]),keys:Se}}}return{args:Ie,keys:null}}},7908:(Pt,Be,U)=>{function I(ee,ne){if(ee){const Q=ee.indexOf(ne);0<=Q&&ee.splice(Q,1)}}U.d(Be,{o:()=>I})},1853:(Pt,Be,U)=>{function I(ee){const Q=ee(K=>{Error.call(K),K.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}U.d(Be,{L:()=>I})},8496:(Pt,Be,U)=>{function I(ee,ne){return ee.reduce((Q,K,le)=>(Q[K]=ne[le],Q),{})}U.d(Be,{e:()=>I})},9786:(Pt,Be,U)=>{U.d(Be,{Y:()=>ne,l:()=>Q});var I=U(1026);let ee=null;function ne(K){if(I.$.useDeprecatedSynchronousErrorHandling){const le=!ee;if(le&&(ee={errorThrown:!1,error:null}),K(),le){const{errorThrown:Ie,error:je}=ee;if(ee=null,Ie)throw je}}else K()}function Q(K){I.$.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=K)}},5225:(Pt,Be,U)=>{function I(ee,ne,Q,K=0,le=!1){const Ie=ne.schedule(function(){Q(),le?ee.add(this.schedule(null,K)):this.unsubscribe()},K);if(ee.add(Ie),!le)return Ie}U.d(Be,{N:()=>I})},3669:(Pt,Be,U)=>{function I(ee){return ee}U.d(Be,{D:()=>I})},7441:(Pt,Be,U)=>{U.d(Be,{X:()=>I});const I=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},7953:(Pt,Be,U)=>{U.d(Be,{T:()=>ee});var I=U(8071);function ee(ne){return Symbol.asyncIterator&&(0,I.T)(ne?.[Symbol.asyncIterator])}},8071:(Pt,Be,U)=>{function I(ee){return"function"==typeof ee}U.d(Be,{T:()=>I})},5055:(Pt,Be,U)=>{U.d(Be,{l:()=>ne});var I=U(3494),ee=U(8071);function ne(Q){return(0,ee.T)(Q[I.s])}},5397:(Pt,Be,U)=>{U.d(Be,{x:()=>ne});var I=U(4761),ee=U(8071);function ne(Q){return(0,ee.T)(Q?.[I.l])}},9858:(Pt,Be,U)=>{U.d(Be,{y:()=>ee});var I=U(8071);function ee(ne){return(0,I.T)(ne?.then)}},5196:(Pt,Be,U)=>{U.d(Be,{C:()=>ne,U:()=>Q});var I=U(1635),ee=U(8071);function ne(K){return(0,I.AQ)(this,arguments,function*(){const Ie=K.getReader();try{for(;;){const{value:je,done:Se}=yield(0,I.N3)(Ie.read());if(Se)return yield(0,I.N3)(void 0);yield yield(0,I.N3)(je)}}finally{Ie.releaseLock()}})}function Q(K){return(0,ee.T)(K?.getReader)}},9974:(Pt,Be,U)=>{U.d(Be,{N:()=>ne,S:()=>ee});var I=U(8071);function ee(Q){return(0,I.T)(Q?.lift)}function ne(Q){return K=>{if(ee(K))return K.lift(function(le){try{return Q(le,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Pt,Be,U)=>{U.d(Be,{I:()=>Q});var I=U(6354);const{isArray:ee}=Array;function Q(K){return(0,I.T)(le=>function ne(K,le){return ee(le)?K(...le):K(le)}(K,le))}},5343:(Pt,Be,U)=>{function I(){}U.d(Be,{l:()=>I})},1203:(Pt,Be,U)=>{U.d(Be,{F:()=>ee,m:()=>ne});var I=U(3669);function ee(...Q){return ne(Q)}function ne(Q){return 0===Q.length?I.D:1===Q.length?Q[0]:function(le){return Q.reduce((Ie,je)=>je(Ie),le)}}},5334:(Pt,Be,U)=>{U.d(Be,{m:()=>ne});var I=U(1026),ee=U(9270);function ne(Q){ee.f.setTimeout(()=>{const{onUnhandledError:K}=I.$;if(!K)throw Q;K(Q)})}},591:(Pt,Be,U)=>{function I(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Be,{L:()=>I})},177:(Pt,Be,U)=>{U.d(Be,{AJ:()=>Gn,MD:()=>Zi,N0:()=>oi,QT:()=>ne,Sm:()=>vt,Sq:()=>Cn,VF:()=>K,Vy:()=>gi,Xr:()=>br,ZD:()=>Q,_b:()=>At,aZ:()=>Tt,bT:()=>Eu,fw:()=>it,hb:()=>et,hj:()=>je,qQ:()=>le});var I=U(7705);let ee=null;function ne(){return ee}function Q(A){ee||(ee=A)}class K{}const le=new I.nKC("DocumentToken");let Ie=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return(0,I.WQX)(Se)},providedIn:"platform"})}}return A})();const je=new I.nKC("Location Initialized");let Se=(()=>{class A extends Ie{constructor(){super(),this._doc=(0,I.WQX)(le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(P){const F=ne().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",P,!1),()=>F.removeEventListener("popstate",P)}onHashChange(P){const F=ne().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",P,!1),()=>F.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,F,Z){this._history.pushState(P,F,Z)}replaceState(P,F,Z){this._history.replaceState(P,F,Z)}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return new A},providedIn:"platform"})}}return A})();function X(A,V){if(0==A.length)return V;if(0==V.length)return A;let P=0;return A.endsWith("/")&&P++,V.startsWith("/")&&P++,2==P?A+V.substring(1):1==P?A+V:A+"/"+V}function te(A){const V=A.match(/#|\?|$/),P=V&&V.index||A.length;return A.slice(0,P-("/"===A[P-1]?1:0))+A.slice(P)}function _e(A){return A&&"?"!==A[0]?"?"+A:A}let et=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return(0,I.WQX)(vt)},providedIn:"root"})}}return A})();const Qe=new I.nKC("appBaseHref");let vt=(()=>{class A extends et{constructor(P,F){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=F??this._platformLocation.getBaseHrefFromDOM()??(0,I.WQX)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return X(this._baseHref,P)}path(P=!1){const F=this._platformLocation.pathname+_e(this._platformLocation.search),Z=this._platformLocation.hash;return Z&&P?`${F}${Z}`:F}pushState(P,F,Z,Fe){const nt=this.prepareExternalUrl(Z+_e(Fe));this._platformLocation.pushState(P,F,nt)}replaceState(P,F,Z,Fe){const nt=this.prepareExternalUrl(Z+_e(Fe));this._platformLocation.replaceState(P,F,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(F){return new(F||A)(I.KVO(Ie),I.KVO(Qe,8))}}static{this.\u0275prov=I.jDH({token:A,factory:A.\u0275fac,providedIn:"root"})}}return A})(),it=(()=>{class A extends et{constructor(P,F){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let F=this._platformLocation.hash;return null==F&&(F="#"),F.length>0?F.substring(1):F}prepareExternalUrl(P){const F=X(this._baseHref,P);return F.length>0?"#"+F:F}pushState(P,F,Z,Fe){let nt=this.prepareExternalUrl(Z+_e(Fe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(P,F,nt)}replaceState(P,F,Z,Fe){let nt=this.prepareExternalUrl(Z+_e(Fe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(P,F,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(F){return new(F||A)(I.KVO(Ie),I.KVO(Qe,8))}}static{this.\u0275prov=I.jDH({token:A,factory:A.\u0275fac})}}return A})(),Tt=(()=>{class A{constructor(P){this._subject=new I.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const F=this._locationStrategy.getBaseHref();this._basePath=function he(A){if(new RegExp("^(https?:)?//").test(A)){const[,P]=A.split(/\/\/[^\/]+/);return P}return A}(te(ye(F))),this._locationStrategy.onPopState(Z=>{this._subject.emit({url:this.path(!0),pop:!0,state:Z.state,type:Z.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,F=""){return this.path()==this.normalize(P+_e(F))}normalize(P){return A.stripTrailingSlash(function mt(A,V){if(!A||!V.startsWith(A))return V;const P=V.substring(A.length);return""===P||["/",";","?","#"].includes(P[0])?P:V}(this._basePath,ye(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,F="",Z=null){this._locationStrategy.pushState(Z,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+_e(F)),Z)}replaceState(P,F="",Z=null){this._locationStrategy.replaceState(Z,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+_e(F)),Z)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)})),()=>{const F=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(F,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",F){this._urlChangeListeners.forEach(Z=>Z(P,F))}subscribe(P,F,Z){return this._subject.subscribe({next:P,error:F,complete:Z})}static{this.normalizeQueryParams=_e}static{this.joinWithSlash=X}static{this.stripTrailingSlash=te}static{this.\u0275fac=function(F){return new(F||A)(I.KVO(et))}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return function lt(){return new Tt((0,I.KVO)(et))}()},providedIn:"root"})}}return A})();function ye(A){return A.replace(/\/index.html$/,"")}function At(A,V){V=encodeURIComponent(V);for(const P of A.split(";")){const F=P.indexOf("="),[Z,Fe]=-1==F?[P,""]:[P.slice(0,F),P.slice(F+1)];if(Z.trim()===V)return decodeURIComponent(Fe)}return null}class Ur{constructor(V,P,F,Z){this.$implicit=V,this.ngForOf=P,this.index=F,this.count=Z}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cn=(()=>{class A{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,F,Z){this._viewContainer=P,this._template=F,this._differs=Z,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const F=this._viewContainer;P.forEachOperation((Z,Fe,nt)=>{if(null==Z.previousIndex)F.createEmbeddedView(this._template,new Ur(Z.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)F.remove(null===Fe?void 0:Fe);else if(null!==Fe){const Lt=F.get(Fe);F.move(Lt,nt),Vs(Lt,Z)}});for(let Z=0,Fe=F.length;Z<Fe;Z++){const Lt=F.get(Z).context;Lt.index=Z,Lt.count=Fe,Lt.ngForOf=this._ngForOf}P.forEachIdentityChange(Z=>{Vs(F.get(Z.currentIndex),Z)})}static ngTemplateContextGuard(P,F){return!0}static{this.\u0275fac=function(F){return new(F||A)(I.rXU(I.c1b),I.rXU(I.C4Q),I.rXU(I._q3))}}static{this.\u0275dir=I.FsC({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return A})();function Vs(A,V){A.context.$implicit=V.item}let Eu=(()=>{class A{constructor(P,F){this._viewContainer=P,this._context=new no,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){Tu("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){Tu("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,F){return!0}static{this.\u0275fac=function(F){return new(F||A)(I.rXU(I.c1b),I.rXU(I.C4Q))}}static{this.\u0275dir=I.FsC({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return A})();class no{constructor(){this.$implicit=null,this.ngIf=null}}function Tu(A,V){if(V&&!V.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,I.Tbb)(V)}'.`)}let Zi=(()=>{class A{static{this.\u0275fac=function(F){return new(F||A)}}static{this.\u0275mod=I.$C({type:A})}static{this.\u0275inj=I.G2t({})}}return A})();const Gn="browser",gs="server";function gi(A){return A===gs}let br=(()=>{class A{static{this.\u0275prov=(0,I.jDH)({token:A,providedIn:"root",factory:()=>new Li((0,I.KVO)(le),window)})}}return A})();class Li{constructor(V,P){this.document=V,this.window=P,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const P=function Ai(A,V){const P=A.getElementById(V)||A.getElementsByName(V)[0];if(P)return P;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const F=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let Z=F.currentNode;for(;Z;){const Fe=Z.shadowRoot;if(Fe){const nt=Fe.getElementById(V)||Fe.querySelector(`[name="${V}"]`);if(nt)return nt}Z=F.nextNode()}}return null}(this.document,V);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(V){this.supportsScrolling()&&(this.window.history.scrollRestoration=V)}scrollToElement(V){const P=V.getBoundingClientRect(),F=P.left+this.window.pageXOffset,Z=P.top+this.window.pageYOffset,Fe=this.offset();this.window.scrollTo(F-Fe[0],Z-Fe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class oi{}},7705:(Pt,Be,U)=>{U.d(Be,{$C:()=>Ma,$GK:()=>qt,$K3:()=>dT,AVh:()=>Yp,Agw:()=>Bh,BIS:()=>Cv,BMQ:()=>af,C4Q:()=>g_,Co$:()=>p0,DNE:()=>Bp,EFF:()=>bt,EJ8:()=>Mi,FsC:()=>Rs,G2t:()=>rn,GFd:()=>Sm,H3F:()=>lT,H5H:()=>TI,H8p:()=>op,HJs:()=>WC,Hbi:()=>xC,JRh:()=>Si,JZv:()=>bn,Jv_:()=>f0,KH2:()=>Zp,KVO:()=>ct,L39:()=>zC,LfX:()=>gt,MKu:()=>nE,NEm:()=>cC,NYb:()=>sC,Njj:()=>$l,O8t:()=>Fe,OA$:()=>tn,Ocv:()=>OD,Ol2:()=>m0,PLl:()=>Jg,QTQ:()=>uy,Ql9:()=>FD,QuC:()=>ps,R7$:()=>oy,RV6:()=>vc,Rfq:()=>vt,RxE:()=>am,SKi:()=>ii,TL$:()=>C_,Tbb:()=>_e,VBU:()=>Pa,Vns:()=>If,Vt3:()=>Vn,WHO:()=>gT,WQX:()=>oe,XpG:()=>Fy,Xx1:()=>_a,Y8G:()=>Pl,Z63:()=>ol,_9s:()=>Od,_q3:()=>tE,aKT:()=>xd,aNF:()=>_0,bIt:()=>Kd,bkB:()=>Yo,c1b:()=>ov,czy:()=>Kc,e01:()=>mT,eBV:()=>Lo,fpN:()=>NC,gRc:()=>yC,gXe:()=>Ei,giA:()=>_T,hnV:()=>cT,iLQ:()=>QI,j41:()=>$p,jDH:()=>kt,jNT:()=>Zo,k0s:()=>pf,kS0:()=>Bc,kdw:()=>nu,lJ4:()=>A0,lsd:()=>H0,mGM:()=>j0,mq5:()=>VE,n$t:()=>ip,nKC:()=>ot,naY:()=>_C,nrm:()=>Hp,o8S:()=>rg,oH4:()=>ET,plB:()=>UI,rXU:()=>Bd,sFG:()=>Mv,sZ2:()=>H_,uvJ:()=>qo,w6W:()=>mA,wOt:()=>he,wni:()=>$0,xGo:()=>ci,xe9:()=>uv,xvI:()=>kd,zZn:()=>Qo,zcH:()=>lc,zjR:()=>gf});var I=U(1413),ee=U(8359),ne=U(1985),Q=U(7786),K=U(4412),le=U(7673),Ie=U(7647),je=U(5558),Se=U(3294);function X(t){for(let n in t)if(t[n]===X)return n;throw Error("Could not find renamed property on target object.")}function te(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function _e(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_e).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function et(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Qe=X({__forward_ref__:X});function vt(t){return t.__forward_ref__=vt,t.toString=function(){return _e(this())},t}function it(t){return Tt(t)?t():t}function Tt(t){return"function"==typeof t&&t.hasOwnProperty(Qe)&&t.__forward_ref__===vt}function lt(t){return t&&!!t.\u0275providers}const ye="https://g.co/ng/security#xss";class he extends Error{constructor(n,i){super(function Oe(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function me(t){return"string"==typeof t?t:null==t?"":String(t)}function He(t,n){throw new he(-201,!1)}function st(t,n){null==t&&function _t(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function kt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rn(t){return{providers:t.providers||[],imports:t.imports||[]}}function dt(t){return Ft(t,We)||Ft(t,zr)}function gt(t){return null!==dt(t)}function Ft(t,n){return t.hasOwnProperty(n)?t[n]:null}function Re(t){return t&&(t.hasOwnProperty(Xn)||t.hasOwnProperty(ir))?t[Xn]:null}const We=X({\u0275prov:X}),Xn=X({\u0275inj:X}),zr=X({ngInjectableDef:X}),ir=X({ngInjectorDef:X});var qt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qt||{});let an;function fr(t){const n=an;return an=t,n}function Pr(t,n,i){const o=dt(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&qt.Optional?null:void 0!==n?n:void He(_e(t))}const bn=globalThis;class ot{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=kt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ir={},Ii="__NG_DI_FLAG__",Wr="ngTempTokenPath",Ke=/\n/gm,k="__source";let j;function ae(t){const n=j;return j=t,n}function tt(t,n=qt.Default){if(void 0===j)throw new he(-203,!1);return null===j?Pr(t,void 0,n):j.get(t,n&qt.Optional?null:void 0,n)}function ct(t,n=qt.Default){return(function Gt(){return an}()||tt)(it(t),n)}function oe(t,n=qt.Default){return ct(t,pn(n))}function pn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Dn(t){const n=[];for(let i=0;i<t.length;i++){const o=it(t[i]);if(Array.isArray(o)){if(0===o.length)throw new he(900,!1);let c,f=qt.Default;for(let _=0;_<o.length;_++){const T=o[_],C=Zr(T);"number"==typeof C?-1===C?c=T.token:f|=C:c=T}n.push(ct(c,f))}else n.push(ct(o))}return n}function cn(t,n){return t[Ii]=n,t.prototype[Ii]=n,t}function Zr(t){return t[Ii]}function ei(t){return{toString:t}.toString()}var Or=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Or||{}),Ei=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ei||{});const Er={},hn=[],hs=X({\u0275cmp:X}),Ne=X({\u0275dir:X}),Ee=X({\u0275pipe:X}),Ye=X({\u0275mod:X}),At=X({\u0275fac:X}),xt=X({__NG_ELEMENT_ID__:X}),Qt=X({__NG_ENV_ID__:X});function sn(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}function Tn(t,n,i){let o=0;for(;o<i.length;){const c=i[o];if("number"==typeof c){if(0!==c)break;o++;const f=i[o++],_=i[o++],T=i[o++];t.setAttribute(n,_,T,f)}else{const f=c,_=i[++o];Ur(f)?t.setProperty(n,f,_):t.setAttribute(n,f,_),o++}}return o}function Zn(t){return 3===t||4===t||6===t}function Ur(t){return 64===t.charCodeAt(0)}function Cn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||Vs(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function Vs(t,n,i,o,c){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const T=t[f++];if("number"==typeof T){if(T===n){_=-1;break}if(T>n){_=f-1;break}}}for(;f<t.length;){const T=t[f];if("number"==typeof T)break;if(T===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}const fs="ng-template";function Eu(t,n,i){let o=0,c=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&c){const _=t[o++];if(i&&"class"===f&&-1!==sn(_.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function no(t){return 4===t.type&&t.value!==fs}function Tu(t,n,i){return n===(4!==t.type||i?t.value:fs)}function na(t,n,i){let o=4;const c=t.attrs||[],f=function Ji(t){for(let n=0;n<t.length;n++)if(Zn(t[n]))return n;return t.length}(c);let _=!1;for(let T=0;T<n.length;T++){const C=n[T];if("number"!=typeof C){if(!_)if(4&o){if(o=2|1&o,""!==C&&!Tu(t,C,i)||""===C&&1===n.length){if(si(o))return!1;_=!0}}else{const x=8&o?C:n[++T];if(8&o&&null!==t.attrs){if(!Eu(t.attrs,x,i)){if(si(o))return!1;_=!0}continue}const Y=ro(8&o?"class":C,c,no(t),i);if(-1===Y){if(si(o))return!1;_=!0;continue}if(""!==x){let ge;ge=Y>f?"":c[Y+1].toLowerCase();const De=8&o?ge:null;if(De&&-1!==sn(De,x,0)||2&o&&x!==ge){if(si(o))return!1;_=!0}}}}else{if(!_&&!si(o)&&!si(C))return!1;if(_&&si(C))continue;_=!1,o=C|1&o}}return si(o)||_}function si(t){return 0==(1&t)}function ro(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const _=n[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let T=n[++c];for(;"string"==typeof T;)T=n[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function So(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Pi(t,n,i=!1){for(let o=0;o<n.length;o++)if(na(t,n[o],i))return!0;return!1}function Ss(t,n){return t?":not("+n.trim()+")":n}function Sa(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&o){const T=t[++i];c+="["+_+(T.length>0?'="'+T+'"':"")+"]"}else 8&o?c+="."+_:4&o&&(c+=" "+_);else""!==c&&!si(_)&&(n+=Ss(f,c),c=""),o=_,f=f||!si(o);i++}return""!==c&&(n+=Ss(f,c)),n}function Pa(t){return ei(()=>{const n=zn(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Or.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ei.Emulated,styles:t.styles||hn,_:null,schemas:t.schemas||null,tView:null,id:""};Bs(i);const o=t.dependencies;return i.directiveDefs=Ni(o,!1),i.pipeDefs=Ni(o,!0),i.id=function xi(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function ra(t){return gn(t)||Cr(t)}function Au(t){return null!==t}function Ma(t){return ei(()=>({type:t.type,bootstrap:t.bootstrap||hn,declarations:t.declarations||hn,imports:t.imports||hn,exports:t.exports||hn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Dr(t,n){if(null==t)return Er;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}function Rs(t){return ei(()=>{const n=zn(t);return Bs(n),n})}function Mi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function gn(t){return t[hs]||null}function Cr(t){return t[Ne]||null}function fn(t){return t[Ee]||null}function ps(t){const n=gn(t)||Cr(t)||fn(t);return null!==n&&n.standalone}function Mn(t,n){const i=t[Ye]||null;if(!i&&!0===n)throw new Error(`Type ${_e(t)} does not have '\u0275mod' property.`);return i}function zn(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Er,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||hn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Dr(t.inputs,n),outputs:Dr(t.outputs)}}function Bs(t){t.features?.forEach(n=>n(t))}function Ni(t,n){if(!t)return null;const i=n?fn:ra;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(Au)}const ur=0,yt=1,Zt=2,mn=3,_n=4,wi=5,pr=6,Zi=7,Gn=8,gs=9,Br=10,$t=11,Oi=12,gi=13,cr=14,er=15,ki=16,br=17,Li=18,Ai=19,Ro=20,oi=21,ti=22,Fi=23,ms=24,yn=25,Vi=1,js=2,mi=7,io=9,dr=11;function mr(t){return Array.isArray(t)&&"object"==typeof t[Vi]}function ln(t){return Array.isArray(t)&&!0===t[Vi]}function Mo(t){return 0!=(4&t.flags)}function Nn(t){return t.componentOffset>-1}function _s(t){return 1==(1&t.flags)}function jr(t){return!!t.template}function sa(t){return 0!=(512&t[Zt])}function Ui(t,n){return t.hasOwnProperty(At)?t[At]:null}let Tr=null,ao=!1;function Kr(t){const n=Tr;return Tr=t,n}const vs={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Bi(t){if(!Ms(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ru(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function ai(t){t.dirty=!0,function Is(t){if(void 0===t.liveConsumerNode)return;const n=ao;ao=!0;try{for(const i of t.liveConsumerNode)i.dirty||ai(i)}finally{ao=n}}(t),t.consumerMarkedDirty?.(t)}function Sr(t){return t&&(t.nextProducerIndex=0),Kr(t)}function Oo(t,n){if(Kr(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ms(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)Es(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ru(t){_i(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(Bi(i),o!==i.version))return!0}return!1}function ko(t){if(_i(t),Ms(t))for(let n=0;n<t.producerNode.length;n++)Es(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Es(t,n){if(function zs(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),_i(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)Es(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],c=t.liveConsumerNode[n];_i(c),c.producerIndexOfThis[o]=n}}function Ms(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _i(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Mu=null;function Fe(t){const n=Kr(null);try{return t()}finally{Kr(n)}}const Lt=()=>{},Qn=(()=>({...vs,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Lt}))();class Bn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function tn(){return Yn}function Yn(t){return t.type.prototype.ngOnChanges&&(t.setInput=tr),Wn}function Wn(){const t=Hr(this),n=t?.current;if(n){const i=t.previous;if(i===Er)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function tr(t,n,i,o){const c=this.declaredInputs[i],f=Hr(t)||function Gs(t,n){return t[qr]=n}(t,{previous:Er,current:null}),_=f.current||(f.current={}),T=f.previous,C=T[c];_[c]=new Bn(C&&C.currentValue,n,T===Er),t[o]=n}tn.ngInherit=!0;const qr="__ngSimpleChanges__";function Hr(t){return t[qr]||null}const Qr=function(t,n,i){};function sr(t){for(;Array.isArray(t);)t=t[ur];return t}function lo(t,n){return sr(n[t])}function Ci(t,n){return sr(n[t.index])}function nh(t,n){return t.data[n]}function nr(t,n){const i=n[t];return mr(i)?i:i[ur]}function Ts(t,n){return null==n?null:t[n]}function zi(t){t[br]=0}function ua(t){1024&t[Zt]||(t[Zt]|=1024,Rc(t,1))}function Sc(t){1024&t[Zt]&&(t[Zt]&=-1025,Rc(t,-1))}function Rc(t,n){let i=t[mn];if(null===i)return;i[wi]+=n;let o=i;for(i=i[mn];null!==i&&(1===n&&1===o[wi]||-1===n&&0===o[wi]);)i[wi]+=n,o=i,i=i[mn]}const Yt={lFrame:G(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mc(){return Yt.bindingsEnabled}function at(){return Yt.lFrame.lView}function Rn(){return Yt.lFrame.tView}function Lo(t){return Yt.lFrame.contextLView=t,t[Gn]}function $l(t){return Yt.lFrame.contextLView=null,t}function Ln(){let t=rh();for(;null!==t&&64===t.type;)t=t.parent;return t}function rh(){return Yt.lFrame.currentTNode}function xs(t,n){const i=Yt.lFrame;i.currentTNode=t,i.isParent=n}function la(){return Yt.lFrame.isParent}function rr(){return Yt.lFrame.bindingIndex++}function ha(t,n){const i=Yt.lFrame;i.bindingIndex=i.bindingRootIndex=t,Ha(n)}function Ha(t){Yt.lFrame.currentDirectiveIndex=t}function kc(){return Yt.lFrame.currentQueryIndex}function E(t){Yt.lFrame.currentQueryIndex=t}function D(t){const n=t[yt];return 2===n.type?n.declTNode:1===n.type?t[pr]:null}function v(t,n,i){if(i&qt.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&qt.Host||(c=D(f),null===c||(f=f[cr],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Yt.lFrame=N();return o.currentTNode=n,o.lView=t,!0}function b(t){const n=N(),i=t[yt];Yt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function N(){const t=Yt.lFrame,n=null===t?null:t.child;return null===n?G(t):n}function G(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function J(){const t=Yt.lFrame;return Yt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ue=J;function Me(){const t=J();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function vn(){return Yt.lFrame.selectedIndex}function In(t){Yt.lFrame.selectedIndex=t}function Kn(){const t=Yt.lFrame;return nh(t.tView,t.selectedIndex)}let oh=!0;function Hl(){return oh}function qs(t){oh=t}function Wa(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:T,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:$}=f;_&&(t.contentHooks??=[]).push(-i,_),T&&((t.contentHooks??=[]).push(i,T),(t.contentCheckHooks??=[]).push(i,T)),C&&(t.viewHooks??=[]).push(-i,C),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=$&&(t.destroyHooks??=[]).push(i,$)}}function zl(t,n,i){go(t,n,3,i)}function Ka(t,n,i,o){(3&t[Zt])===i&&go(t,n,i,o)}function Fu(t,n){let i=t[Zt];(3&i)===n&&(i&=8191,i+=1,t[Zt]=i)}function go(t,n,i,o){const f=o??-1,_=n.length-1;let T=0;for(let C=void 0!==o?65535&t[br]:0;C<_;C++)if("number"==typeof n[C+1]){if(T=n[C],null!=o&&T>=o)break}else n[C]<0&&(t[br]+=65536),(T<f||-1==f)&&(Uo(t,i,n,C),t[br]=(4294901760&t[br])+C+2),C++}function Qs(t,n){Qr(4,t,n);const i=Kr(null);try{n.call(t)}finally{Kr(i),Qr(5,t,n)}}function Uo(t,n,i,o){const c=i[o]<0,f=i[o+1],T=t[c?-i[o]:i[o]];c?t[Zt]>>13<t[br]>>16&&(3&t[Zt])===n&&(t[Zt]+=8192,Qs(T,f)):Qs(T,f)}const mo=-1;class fa{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Qa(t){return t!==mo}function Fc(t){return 32767&t}function Vc(t,n){let i=function Bo(t){return t>>16}(t),o=n;for(;i>0;)o=o[cr],i--;return o}let Uu=!0;function Wl(t){const n=Uu;return Uu=t,n}const Kl=255,Bu=5;let Ys=0;const yi={};function Ya(t,n){const i=ql(t,n);if(-1!==i)return i;const o=n[yt];o.firstCreatePass&&(t.injectorIndex=n.length,ju(o.data,t),ju(n,null),ju(o.blueprint,null));const c=$u(t,n),f=t.injectorIndex;if(Qa(c)){const _=Fc(c),T=Vc(c,n),C=T[yt].data;for(let x=0;x<8;x++)n[f+x]=T[_+x]|C[_+x]}return n[f+8]=c,f}function ju(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ql(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function $u(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){if(o=Gu(c),null===o)return mo;if(i++,c=c[cr],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return mo}function Xa(t,n,i){!function Af(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(xt)&&(o=i[xt]),null==o&&(o=i[xt]=Ys++);const c=o&Kl;n.data[t+(c>>Bu)]|=1<<c}(t,n,i)}function Uc(t,n,i){if(i&qt.Optional||void 0!==t)return t;He()}function Ql(t,n,i,o){if(i&qt.Optional&&void 0===o&&(o=null),!(i&(qt.Self|qt.Host))){const c=t[gs],f=fr(void 0);try{return c?c.get(n,o,i&qt.Optional):Pr(n,o,i&qt.Optional)}finally{fr(f)}}return Uc(o,0,i)}function ch(t,n,i,o=qt.Default,c){if(null!==t){if(2048&n[Zt]&&!(o&qt.Self)){const _=function Xl(t,n,i,o,c){let f=t,_=n;for(;null!==f&&null!==_&&2048&_[Zt]&&!(512&_[Zt]);){const T=Ja(f,_,i,o|qt.Self,yi);if(T!==yi)return T;let C=f.parent;if(!C){const x=_[Ro];if(x){const $=x.get(i,yi,o);if($!==yi)return $}C=Gu(_),_=_[cr]}f=C}return c}(t,n,i,o,yi);if(_!==yi)return _}const f=Ja(t,n,i,o,yi);if(f!==yi)return f}return Ql(n,i,o,c)}function Ja(t,n,i,o,c){const f=function ug(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(xt)?t[xt]:void 0;return"number"==typeof n?n>=0?n&Kl:Yl:n}(i);if("function"==typeof f){if(!v(n,t,o))return o&qt.Host?Uc(c,0,o):Ql(n,i,o,c);try{let _;if(_=f(o),null!=_||o&qt.Optional)return _;He()}finally{Ue()}}else if("number"==typeof f){let _=null,T=ql(t,n),C=mo,x=o&qt.Host?n[er][pr]:null;for((-1===T||o&qt.SkipSelf)&&(C=-1===T?$u(t,n):n[T+8],C!==mo&&jo(o,!1)?(_=n[yt],T=Fc(C),n=Vc(C,n)):T=-1);-1!==T;){const $=n[yt];if(lh(f,T,$.data)){const Y=ag(T,n,i,_,o,x);if(Y!==yi)return Y}C=n[T+8],C!==mo&&jo(o,n[yt].data[T+8]===x)&&lh(f,T,n)?(_=$,T=Fc(C),n=Vc(C,n)):T=-1}}return c}function ag(t,n,i,o,c,f){const _=n[yt],T=_.data[t+8],$=Hu(T,_,i,null==o?Nn(T)&&Uu:o!=_&&0!=(3&T.type),c&qt.Host&&f===T);return null!==$?Os(n,_,$,T):yi}function Hu(t,n,i,o,c){const f=t.providerIndexes,_=n.data,T=1048575&f,C=t.directiveStart,$=f>>20,ge=c?T+$:t.directiveEnd;for(let De=o?T:T+$;De<ge;De++){const Ze=_[De];if(De<C&&i===Ze||De>=C&&Ze.type===i)return De}if(c){const De=_[C];if(De&&jr(De)&&De.type===i)return C}return null}function Os(t,n,i,o){let c=t[i];const f=n.data;if(function qa(t){return t instanceof fa}(c)){const _=c;_.resolving&&function Xe(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new he(-200,`Circular dependency in DI detected for ${t}${i}`)}(function ke(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():me(t)}(f[i]));const T=Wl(_.canSeeViewProviders);_.resolving=!0;const x=_.injectImpl?fr(_.injectImpl):null;v(t,o,qt.Default);try{c=t[i]=_.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Vo(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const _=Yn(n);(i.preOrderHooks??=[]).push(t,_),(i.preOrderCheckHooks??=[]).push(t,_)}c&&(i.preOrderHooks??=[]).push(0-t,c),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==x&&fr(x),Wl(T),_.resolving=!1,Ue()}}return c}function lh(t,n,i){return!!(i[n+(t>>Bu)]&1<<t)}function jo(t,n){return!(t&qt.Self||t&qt.Host&&n)}class ni{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return ch(this._tNode,this._lView,n,pn(o),i)}}function Yl(){return new ni(Ln(),at())}function ci(t){return ei(()=>{const n=t.prototype.constructor,i=n[At]||zu(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[At]||zu(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function zu(t){return Tt(t)?()=>{const n=zu(it(t));return n&&n()}:Ui(t)}function Gu(t){const n=t[yt],i=n.type;return 2===i?n.declTNode:1===i?t[pr]:null}function Bc(t){return function uh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(Zn(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Ln(),t)}const Xs="__parameters__";function Js(t,n,i){return ei(()=>{const o=function dh(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const _=new c(...f);return T.annotation=_,T;function T(C,x,$){const Y=C.hasOwnProperty(Xs)?C[Xs]:Object.defineProperty(C,Xs,{value:[]})[Xs];for(;Y.length<=$;)Y.push(null);return(Y[$]=Y[$]||[]).push(_),C}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function eu(t,n){t.forEach(i=>Array.isArray(i)?eu(i,n):n(i))}function hh(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Zl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function or(t,n,i){let o=qu(t,n);return o>=0?t[1|o]=i:(o=~o,function gg(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function fh(t,n){const i=qu(t,n);if(i>=0)return t[1|i]}function qu(t,n){return function ed(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),_=t[f<<i];if(n===_)return f<<i;_>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const _a=cn(Js("Optional"),8),nu=cn(Js("SkipSelf"),4);function Go(t){return 128==(128&t.flags)}var Kc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Kc||{});const tc=new Map;let ya=0;const md="__ngContext__";function di(t,n){mr(n)?(t[md]=n[Ai],function Qc(t){tc.set(t[Ai],t)}(n)):t[md]=n}let au;function Jc(t,n){return au(t,n)}function as(t){const n=t[mn];return ln(n)?n[mn]:n}function Zc(t){return rc(t[Oi])}function jf(t){return rc(t[_n])}function rc(t){for(;null!==t&&!ln(t);)t=t[_n];return t}function ic(t,n,i,o,c){if(null!=o){let f,_=!1;ln(o)?f=o:mr(o)&&(_=!0,o=o[ur]);const T=sr(o);0===t&&null!==i?null==c?oc(n,i,T):Io(n,i,T,c||null,!0):1===t&&null!==i?Io(n,i,T,c||null,!0):2===t?function qf(t,n,i){const o=cu(t,n);o&&function Hf(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,T,_):3===t&&n.destroyNode(T),null!=f&&function Cg(t,n,i,o,c){const f=i[mi];f!==sr(i)&&ic(n,t,o,f,c);for(let T=dr;T<i.length;T++){const C=i[T];Rh(C[yt],C,t,n,o,f)}}(n,t,f,i,c)}}function m(t,n,i){return t.createElement(n,i)}function Te(t,n){const i=t[io],o=i.indexOf(n);Sc(n),i.splice(o,1)}function qe(t,n){if(t.length<=dr)return;const i=dr+n,o=t[i];if(o){const c=o[ki];null!==c&&c!==t&&Te(c,o),n>0&&(t[i-1][_n]=o[_n]);const f=Zl(t,dr+n);!function l(t,n){Rh(t,n,n[$t],2,null,null),n[ur]=null,n[pr]=null}(o[yt],o);const _=f[Li];null!==_&&_.detachView(f[yt]),o[mn]=null,o[_n]=null,o[Zt]&=-129}return o}function Dt(t,n){if(!(256&n[Zt])){const i=n[$t];n[Fi]&&ko(n[Fi]),n[ms]&&ko(n[ms]),i.destroyNode&&Rh(t,n,i,3,null,null),function M(t){let n=t[Oi];if(!n)return Nt(t[yt],t);for(;n;){let i=null;if(mr(n))i=n[Oi];else{const o=n[dr];o&&(i=o)}if(!i){for(;n&&!n[_n]&&n!==t;)mr(n)&&Nt(n[yt],n),n=n[mn];null===n&&(n=t),mr(n)&&Nt(n[yt],n),i=n&&n[_n]}n=i}}(n)}}function Nt(t,n){if(!(256&n[Zt])){n[Zt]&=-129,n[Zt]|=256,function Mr(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof fa)){const f=i[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const T=c[f[_]],C=f[_+1];Qr(4,T,C);try{C.call(T)}finally{Qr(5,T,C)}}else{Qr(4,c,f);try{f.call(c)}finally{Qr(5,c,f)}}}}}(t,n),function Vt(t,n){const i=t.cleanup,o=n[Zi];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const _=i[f+3];_>=0?o[_]():o[-_].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[Zi]=null);const c=n[oi];if(null!==c){n[oi]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,n),1===n[yt].type&&n[$t].destroy();const i=n[ki];if(null!==i&&ln(n[mn])){i!==n[mn]&&Te(i,n);const o=n[Li];null!==o&&o.detachView(t)}!function Yc(t){tc.delete(t[Ai])}(n)}}function us(t,n,i){return function uu(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[ur];{const{componentOffset:c}=o;if(c>-1){const{encapsulation:f}=t.data[o.directiveStart+c];if(f===Ei.None||f===Ei.Emulated)return null}return Ci(o,i)}}(t,n.parent,i)}function Io(t,n,i,o,c){t.insertBefore(n,i,o,c)}function oc(t,n,i){t.appendChild(n,i)}function tl(t,n,i,o,c){null!==o?Io(t,n,i,o,c):oc(t,n,i)}function cu(t,n){return t.parentNode(n)}let ac,Mh,Ad,Gf=function rl(t,n,i){return 40&t.type?Ci(t,i):null};function Sh(t,n,i,o){const c=us(t,o,n),f=n[$t],T=function nl(t,n,i){return Gf(t,n,i)}(o.parent||n[pr],o,n);if(null!=c)if(Array.isArray(i))for(let C=0;C<i.length;C++)tl(f,c,i[C],T,!1);else tl(f,c,i,T,!1);void 0!==ac&&ac(f,o,n,i,c)}function Ed(t,n){if(null!==n){const i=n.type;if(3&i)return Ci(n,t);if(4&i)return Kf(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return Ed(t,o);{const c=t[n.index];return ln(c)?Kf(-1,c):sr(c)}}if(32&i)return Jc(n,t)()||sr(t[n.index]);{const o=wg(t,n);return null!==o?Array.isArray(o)?o[0]:Ed(as(t[er]),o):Ed(t,n.next)}}return null}function wg(t,n){return null!==n?t[er][pr].projection[n.projection]:null}function Kf(t,n){const i=dr+t+1;if(i<n.length){const o=n[i],c=o[yt].firstChild;if(null!==c)return Ed(o,c)}return n[mi]}function Ag(t,n,i,o,c,f,_){for(;null!=i;){const T=o[i.index],C=i.type;if(_&&0===n&&(T&&di(sr(T),o),i.flags|=2),32!=(32&i.flags))if(8&C)Ag(t,n,i.child,o,c,f,!1),ic(n,t,c,T,f);else if(32&C){const x=Jc(i,o);let $;for(;$=x();)ic(n,t,c,$,f);ic(n,t,c,T,f)}else 16&C?T_(t,n,o,i,c,f):ic(n,t,c,T,f);i=_?i.projectionNext:i.next}}function Rh(t,n,i,o,c,f){Ag(i,o,t.firstChild,n,c,f,!1)}function T_(t,n,i,o,c,f){const _=i[er],C=_[pr].projection[o.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)ic(n,t,c,C[x],f);else{let x=C;const $=_[mn];Go(o)&&(x.flags|=128),Ag(t,n,x,$,c,f,!0)}}function Qf(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function Yf(t,n,i){const{mergedAttrs:o,classes:c,styles:f}=i;null!==o&&Tn(t,n,o),null!==c&&Qf(t,n,c),null!==f&&function bg(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function C_(t){Mh=t}function Zf(t){return function Rg(){if(void 0===Ad&&(Ad=null,bn.trustedTypes))try{Ad=bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ad}()?.createScriptURL(t)||t}class S_{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ye})`}}function va(t){return t instanceof S_?t.changingThisBreaksApplicationSecurity:t}function Nh(t,n){const i=function xg(t){return t instanceof S_&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${ye})`)}return i===n}const mv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var bd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(bd||{});function np(t){const n=Sd();return n?n.sanitize(bd.URL,t)||"":Nh(t,"URL")?va(t):function xh(t){return(t=String(t)).match(mv)?t:"unsafe:"+t}(me(t))}function Hg(t){const n=Sd();if(n)return Zf(n.sanitize(bd.RESOURCE_URL,t)||"");if(Nh(t,"ResourceURL"))return Zf(va(t));throw new he(904,!1)}function ip(t,n,i){return function rp(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Hg:np}(n,i)(t)}function Sd(){const t=at();return t&&t[Br].sanitizer}const ol=new ot("ENVIRONMENT_INITIALIZER"),Kg=new ot("INJECTOR",-1),al=new ot("INJECTOR_DEF_TYPES");class Fh{get(n,i=Ir){if(i===Ir){const o=new Error(`NullInjectorError: No provider for ${_e(n)}!`);throw o.name="NullInjectorError",o}return i}}function Ev(...t){return{\u0275providers:V_(0,t),\u0275fromNgModule:!0}}function V_(t,...n){const i=[],o=new Set;let c;const f=_=>{i.push(_)};return eu(n,_=>{const T=_;sp(T,f,[],o)&&(c||=[],c.push(T))}),void 0!==c&&qg(c,f),i}function qg(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:c}=t[i];Qg(c,f=>{n(f,o)})}}function sp(t,n,i,o){if(!(t=it(t)))return!1;let c=null,f=Re(t);const _=!f&&gn(t);if(f||_){if(_&&!_.standalone)return!1;c=t}else{const C=t.ngModule;if(f=Re(C),!f)return!1;c=C}const T=o.has(c);if(_){if(T)return!1;if(o.add(c),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of C)sp(x,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let x;o.add(c);try{eu(f.imports,$=>{sp($,n,i,o)&&(x||=[],x.push($))})}finally{}void 0!==x&&qg(x,n)}if(!T){const x=Ui(c)||(()=>new c);n({provide:c,useFactory:x,deps:hn},c),n({provide:al,useValue:c,multi:!0},c),n({provide:ol,useValue:()=>ct(c),multi:!0},c)}const C=f.providers;if(null!=C&&!T){const x=t;Qg(C,$=>{n($,x)})}}}return c!==t&&void 0!==t.providers}function Qg(t,n){for(let i of t)lt(i)&&(i=i.\u0275providers),Array.isArray(i)?Qg(i,n):n(i)}const wv=X({provide:String,useValue:X});function Yg(t){return null!==t&&"object"==typeof t&&wv in t}function ul(t){return"function"==typeof t}const op=new ot("Set Injector scope."),Vh={},Xg={};let ap;function Uh(){return void 0===ap&&(ap=new Fh),ap}class qo{}class du extends qo{get destroyed(){return this._destroyed}constructor(n,i,o,c){super(),this.parent=i,this.source=o,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,up(n,_=>this.processProvider(_)),this.records.set(Kg,cl(void 0,this)),c.has("environment")&&this.records.set(qo,cl(void 0,this));const f=this.records.get(op);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(al.multi,hn,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=ae(this),o=fr(void 0);try{return n()}finally{ae(i),fr(o)}}get(n,i=Ir,o=qt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Qt))return n[Qt](this);o=pn(o);const f=ae(this),_=fr(void 0);try{if(!(o&qt.SkipSelf)){let C=this.records.get(n);if(void 0===C){const x=function Ia(t){return"function"==typeof t||"object"==typeof t&&t instanceof ot}(n)&&dt(n);C=x&&this.injectableDefInScope(x)?cl(Fn(n),Vh):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&qt.Self?Uh():this.parent).get(n,i=o&qt.Optional&&i===Ir?null:i)}catch(T){if("NullInjectorError"===T.name){if((T[Wr]=T[Wr]||[]).unshift(_e(n)),f)throw T;return function fi(t,n,i,o){const c=t[Wr];throw n[k]&&c.unshift(n[k]),t.message=function pi(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=_e(n);if(Array.isArray(n))c=n.map(_e).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let T=n[_];f.push(_+":"+("string"==typeof T?JSON.stringify(T):_e(T)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(Ke,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[Wr]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{fr(_),ae(f)}}resolveInjectorInitializers(){const n=ae(this),i=fr(void 0);try{const c=this.get(ol.multi,hn,qt.Self);for(const f of c)f()}finally{ae(n),fr(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(_e(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(n){let i=ul(n=it(n))?n:it(n&&n.provide);const o=function $_(t){return Yg(t)?cl(void 0,t.useValue):cl(Rd(t),Vh)}(n);if(ul(n)||!0!==n.multi)this.records.get(i);else{let c=this.records.get(i);c||(c=cl(void 0,Vh,!0),c.factory=()=>Dn(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===Vh&&(i.value=Xg,i.value=i.factory()),"object"==typeof i.value&&i.value&&function Nr(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=it(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Fn(t){const n=dt(t),i=null!==n?n.factory:Ui(t);if(null!==i)return i;if(t instanceof ot)throw new he(204,!1);if(t instanceof Function)return function j_(t){const n=t.length;if(n>0)throw function Ku(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}(n,"?"),new he(204,!1);const i=function Je(t){return t&&(t[We]||t[zr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new he(204,!1)}function Rd(t,n,i){let o;if(ul(t)){const c=it(t);return Ui(c)||Fn(c)}if(Yg(t))o=()=>it(t.useValue);else if(function B_(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Dn(t.deps||[]));else if(function U_(t){return!(!t||!t.useExisting)}(t))o=()=>ct(it(t.useExisting));else{const c=it(t&&(t.useClass||t.provide));if(!function Gi(t){return!!t.deps}(t))return Ui(c)||Fn(c);o=()=>new c(...Dn(t.deps))}return o}function cl(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function up(t,n){for(const i of t)Array.isArray(i)?up(i,n):i&&lt(i)?up(i.\u0275providers,n):n(i)}const H_=new ot("AppId",{providedIn:"root",factory:()=>cp}),cp="ng",Jg=new ot("Platform Initializer"),Bh=new ot("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Cv=new ot("CSP nonce",{providedIn:"root",factory:()=>function wd(){if(void 0!==Mh)return Mh;if(typeof document<"u")return document;throw new he(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ta=(t,n,i)=>null;function Nd(t,n,i=!1){return Ta(t,n,i)}class rm{}class pp{}class sm{resolveComponentFactory(n){throw function im(t){const n=Error(`No component factory found for ${_e(t)}.`);return n.ngComponent=t,n}(n)}}let Kh=(()=>{class t{static{this.NULL=new sm}}return t})();function gl(){return ml(Ln(),at())}function ml(t,n){return new xd(Ci(t,n))}let xd=(()=>{class t{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=gl}}return t})();function om(t){return t instanceof xd?t.nativeElement:t}class Od{}let Mv=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function mp(){const t=at(),i=nr(Ln().index,t);return(mr(i)?i:t)[$t]}()}}return t})(),_p=(()=>{class t{static{this.\u0275prov=kt({token:t,providedIn:"root",factory:()=>null})}}return t})();class am{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const kd=new am("16.2.12"),um={};function Q_(t,n=null,i=null,o){const c=Qh(t,n,i,o);return c.resolveInjectorInitializers(),c}function Qh(t,n=null,i=null,o,c=new Set){const f=[i||hn,Ev(t)];return o=o||("object"==typeof t?void 0:_e(t)),new du(f,n||Uh(),o||null,c)}let Qo=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Ir}static{this.NULL=new Fh}static create(i,o){if(Array.isArray(i))return Q_({name:""},o,i,"");{const c=i.name??"";return Q_({name:c},i.parent,i.providers,c)}}static{this.\u0275prov=kt({token:t,providedIn:"any",factory:()=>ct(Kg)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function dm(t){return t.ngOriginalError}class lc{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&dm(n);for(;i&&dm(i);)i=dm(i);return i||null}}function Ip(t){return n=>{setTimeout(t,void 0,n)}}const Yo=class X_ extends I.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let c=n,f=i||(()=>null),_=o;if(n&&"object"==typeof n){const C=n;c=C.next?.bind(C),f=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(f=Ip(f),c&&(c=Ip(c)),_&&(_=Ip(_)));const T=super.subscribe({next:c,error:f,complete:_});return n instanceof ee.yU&&n.add(T),T}};function hm(...t){}class ii{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yo(!1),this.onMicrotaskEmpty=new Yo(!1),this.onStable=new Yo(!1),this.onError=new Yo(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function J_(){const t="function"==typeof bn.requestAnimationFrame;let n=bn[t?"requestAnimationFrame":"setTimeout"],i=bn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Lv(t){const n=()=>{!function fE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ty(t),t.isCheckStableRunning=!0,ey(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ty(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,_,T)=>{if(function Vv(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(T))return i.invokeTask(c,f,_,T);try{return Fv(t),i.invokeTask(c,f,_,T)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),dc(t)}},onInvoke:(i,o,c,f,_,T,C)=>{try{return Fv(t),i.invoke(c,f,_,T,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),dc(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,ty(t),ey(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ii.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(ii.isInAngularZone())throw new he(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,n,kv,hm,hm);try{return f.runTask(_,i,o)}finally{f.cancelTask(_)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const kv={};function ey(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ty(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Fv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dc(t){t._nesting--,ey(t)}class hu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yo,this.onMicrotaskEmpty=new Yo,this.onStable=new Yo,this.onError=new Yo}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}const Fd=new ot("",{providedIn:"root",factory:fu});function fu(){const t=oe(ii);let n=!0;const i=new ne.c(c=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(n),c.complete()})}),o=new ne.c(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{ii.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,c.next(!0))})})});const _=t.onUnstable.subscribe(()=>{ii.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}});return(0,Q.h)(i,o.pipe((0,Ie.u)()))}function gu(t){return t instanceof Function?t():t}let gm=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=kt({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Yh(t){for(;t;){t[Zt]|=64;const n=as(t);if(sa(t)&&!n)return t;t=n}return null}const vl=new ot("",{providedIn:"root",factory:()=>!1});let Ep=null;function sy(t,n){return t[n]??mu()}function Kv(t,n){const i=mu();i.producerNode?.length&&(t[n]=Ep,i.lView=t,Ep=_m())}const qv={...vs,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Yh(t.lView)},lView:null};function _m(){return Object.create(qv)}function mu(){return Ep??=_m(),Ep}const An={};function oy(t){ay(Rn(),at(),vn()+t,!1)}function ay(t,n,i,o){if(!o)if(3==(3&n[Zt])){const f=t.preOrderCheckHooks;null!==f&&zl(n,f,i)}else{const f=t.preOrderHooks;null!==f&&Ka(n,f,0,i)}In(i)}function Bd(t,n=qt.Default){const i=at();return null===i?ct(t,n):ch(Ln(),i,it(t),n)}function uy(){throw new Error("invalid")}function Tp(t,n,i,o,c,f,_,T,C,x,$){const Y=n.blueprint.slice();return Y[ur]=c,Y[Zt]=140|o,(null!==x||t&&2048&t[Zt])&&(Y[Zt]|=2048),zi(Y),Y[mn]=Y[cr]=t,Y[Gn]=i,Y[Br]=_||t&&t[Br],Y[$t]=T||t&&t[$t],Y[gs]=C||t&&t[gs]||null,Y[pr]=f,Y[Ai]=function qc(){return ya++}(),Y[ti]=$,Y[Ro]=x,Y[er]=2==n.type?t[er]:Y,Y}function Jh(t,n,i,o,c){let f=t.data[n];if(null===f)f=function cy(t,n,i,o,c){const f=rh(),_=la(),C=t.data[n]=function Jv(t,n,i,o,c,f){let _=n?n.injectorIndex:-1,T=0;return function ja(){return null!==Yt.skipHydrationRootTNode}()&&(T|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=C),null!==f&&(_?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(t,n,i,o,c),function $a(){return Yt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const _=function po(){const t=Yt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return xs(f,!0),f}function wp(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function ym(t,n,i,o,c){const f=sy(n,Fi),_=vn(),T=2&o;try{In(-1),T&&n.length>yn&&ay(t,n,yn,!1),Qr(T?2:0,c);const x=T?f:null,$=Sr(x);try{null!==x&&(x.dirty=!1),i(o,c)}finally{Oo(x,$)}}finally{T&&null===n[Fi]&&Kv(n,Fi),In(_),Qr(T?3:1,c)}}function vm(t,n,i){if(Mo(n)){const o=Kr(null);try{const f=n.directiveEnd;for(let _=n.directiveStart;_<f;_++){const T=t.data[_];T.contentQueries&&T.contentQueries(1,i[_],_)}}finally{Kr(o)}}}function ly(t,n,i){Mc()&&(function vy(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;Nn(i)&&function tI(t,n,i){const o=Ci(n,t),c=Yv(i);let _=16;i.signals?_=4096:i.onPush&&(_=64);const T=Rp(t,Tp(t,c,null,_,o,n,null,t[Br].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=T}(n,i,t.data[c+i.componentOffset]),t.firstCreatePass||Ya(i,n),di(o,n);const _=i.initialInputs;for(let T=c;T<f;T++){const C=t.data[T],x=Os(n,t,T,i);di(x,n),null!==_&&Il(0,T-c,x,C,0,_),jr(C)&&(nr(i.index,n)[Gn]=Os(n,t,T,i))}}(t,n,i,Ci(i,n)),64==(64&i.flags)&&hc(t,n,i))}function dy(t,n,i=Ci){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],T=-1===_?i(n,t):t[_];t[c++]=T}}}function Yv(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=hy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function hy(t,n,i,o,c,f,_,T,C,x,$){const Y=yn+o,ge=Y+c,De=function fy(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:An);return i}(Y,ge),Ze="function"==typeof x?x():x;return De[yt]={type:t,blueprint:De,template:i,queries:null,viewQuery:T,declTNode:n,data:De.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:Ze,incompleteFirstPass:!1,ssrId:$}}let Xv=t=>null;function gy(t,n,i,o){for(let c in t)if(t.hasOwnProperty(c)){i=null===i?{}:i;const f=t[c];null===o?Dp(i,n,c,f):o.hasOwnProperty(c)&&Dp(i,n,o[c],f)}return i}function Dp(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function Cp(t,n,i,o){if(Mc()){const c=null===o?null:{"":-1},f=function As(t,n){const i=t.directiveRegistry;let o=null,c=null;if(i)for(let f=0;f<i.length;f++){const _=i[f];if(Pi(n,_.selectors,!1))if(o||(o=[]),jr(_))if(null!==_.findHostDirectiveDefs){const T=[];c=c||new Map,_.findHostDirectiveDefs(_,T,c),o.unshift(...T,_),bp(t,n,T.length)}else o.unshift(_),bp(t,n,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,o,c),o.push(_)}return null===o?null:[o,c]}(t,i);let _,T;null===f?_=T=null:[_,T]=f,null!==_&&Zh(t,n,i,_,c,T),c&&function Iy(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new he(-301,!1);o.push(n[c],f)}}}(i,o,c)}i.mergedAttrs=Cn(i.mergedAttrs,i.attrs)}function Zh(t,n,i,o,c,f){for(let x=0;x<o.length;x++)Xa(Ya(i,n),t,o[x].type);!function tf(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let x=0;x<o.length;x++){const $=o[x];$.providersResolver&&$.providersResolver($)}let _=!1,T=!1,C=wp(t,n,o.length,null);for(let x=0;x<o.length;x++){const $=o[x];i.mergedAttrs=Cn(i.mergedAttrs,$.hostAttrs),Ds(t,i,n,C,$),ef(C,$,c),null!==$.contentQueries&&(i.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(i.flags|=64);const Y=$.type.prototype;!_&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),_=!0),!T&&(Y.ngOnChanges||Y.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),T=!0),C++}!function my(t,n,i){const c=n.directiveEnd,f=t.data,_=n.attrs,T=[];let C=null,x=null;for(let $=n.directiveStart;$<c;$++){const Y=f[$],ge=i?i.get(Y):null,Ze=ge?ge.outputs:null;C=gy(Y.inputs,$,C,ge?ge.inputs:null),x=gy(Y.outputs,$,x,Ze);const wt=null===C||null===_||no(n)?null:El(C,$,_);T.push(wt)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=T,n.inputs=C,n.outputs=x}(t,i,f)}function hc(t,n,i){const o=i.directiveStart,c=i.directiveEnd,f=i.index,_=function Ks(){return Yt.lFrame.currentDirectiveIndex}();try{In(f);for(let T=o;T<c;T++){const C=t.data[T],x=n[T];Ha(T),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Eo(C,x)}}finally{In(-1),Ha(_)}}function Eo(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function bp(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function ef(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;jr(n)&&(i[""]=t)}}function Ds(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=Ui(c.type)),_=new fa(f,jr(c),Bd);t.blueprint[o]=_,i[o]=_,function eI(t,n,i,o,c){const f=c.hostBindings;if(f){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const T=~n.index;(function yy(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(_)!=T&&_.push(T),_.push(i,o,f)}}(t,n,o,wp(t,i,c.hostVars,An),c)}function To(t,n,i,o,c,f){const _=Ci(t,n);!function fc(t,n,i,o,c,f,_){if(null==f)t.removeAttribute(n,c,i);else{const T=null==_?me(f):_(f,o||"",c);t.setAttribute(n,c,T,i)}}(n[$t],_,f,t.value,i,o,c)}function Il(t,n,i,o,c,f){const _=f[n];if(null!==_)for(let T=0;T<_.length;)Sp(o,i,_[T++],_[T++],_[T++])}function Sp(t,n,i,o,c){const f=Kr(null);try{const _=t.inputTransforms;null!==_&&_.hasOwnProperty(o)&&(c=_[o].call(n,c)),null!==t.setInput?t.setInput(n,c,i,o):n[o]=c}finally{Kr(f)}}function El(t,n,i){let o=null,c=0;for(;c<i.length;){const f=i[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const _=t[f];for(let T=0;T<_.length;T+=2)if(_[T]===n){o.push(f,_[T+1],i[c+1]);break}}c+=2}else c+=2;else c+=4}return o}function Ey(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function Ty(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const _=t.data[f];E(i[o]),_.contentQueries(2,n[f],f)}}}function Rp(t,n){return t[Oi]?t[gi][_n]=n:t[Oi]=n,t[gi]=n,n}function Tm(t,n,i){E(0);const o=Kr(null);try{n(t,i)}finally{Kr(o)}}function wm(t){return t[Zi]||(t[Zi]=[])}function wy(t){return t.cleanup||(t.cleanup=[])}function Am(t,n){const i=t[gs],o=i?i.get(lc,null):null;o&&o.handleError(n)}function jd(t,n,i,o,c){for(let f=0;f<i.length;){const _=i[f++],T=i[f++];Sp(t.data[_],n[_],o,T,c)}}function nI(t,n){const i=nr(n,t),o=i[yt];!function Dm(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const c=i[ur];null!==c&&null===i[ti]&&(i[ti]=Nd(c,i[gs])),Cm(o,i,i[Gn])}function Cm(t,n,i){b(n);try{const o=t.viewQuery;null!==o&&Tm(1,o,i);const c=t.template;null!==c&&ym(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ty(t,n),t.staticViewQueries&&Tm(2,t.viewQuery,i);const f=t.components;null!==f&&function Ay(t,n){for(let i=0;i<n.length;i++)nI(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[Zt]&=-5,Me()}}let bm=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,c){const f=typeof Zone>"u"?null:Zone.current,_=function nt(t,n,i){const o=Object.create(Qn);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const c=_=>{o.cleanupFn=_};return o.ref={notify:()=>ai(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Ru(o))return;o.hasRun=!0;const _=Sr(o);try{o.cleanupFn(),o.cleanupFn=Lt,o.fn(c)}finally{Oo(o,_)}},cleanup:()=>o.cleanupFn()},o.ref}(i,x=>{this.all.has(x)&&this.queue.set(x,f)},c);let T;this.all.add(_),_.notify();const C=()=>{_.cleanup(),T?.(),this.all.delete(_),this.queue.delete(_)};return T=o?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=kt({token:t,providedIn:"root",factory:()=>new t})}}return t})();function nf(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const T=n[_];"number"==typeof T?f=T:1==f?c=et(c,T):2==f&&(o=et(o,T+": "+n[++_]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}function $d(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(sr(f)),ln(f)&&Dy(f,o);const _=i.type;if(8&_)$d(t,n,i.child,o);else if(32&_){const T=Jc(i,n);let C;for(;C=T();)o.push(C)}else if(16&_){const T=wg(n,i);if(Array.isArray(T))o.push(...T);else{const C=as(n[er]);$d(C[yt],C,T,o,!0)}}i=c?i.projectionNext:i.next}return o}function Dy(t,n){for(let i=dr;i<t.length;i++){const o=t[i],c=o[yt].firstChild;null!==c&&$d(o[yt],o,c,n)}t[mi]!==t[ur]&&n.push(t[mi])}function Mp(t,n,i,o=!0){const c=n[Br],f=c.rendererFactory,_=c.afterRenderEventManager;f.begin?.(),_?.begin();try{by(t,n,t.template,i)}catch(C){throw o&&Am(n,C),C}finally{f.end?.(),c.effectManager?.flush(),_?.end()}}function by(t,n,i,o){const c=n[Zt];if(256!=(256&c)){n[Br].effectManager?.flush(),b(n);try{zi(n),function da(t){return Yt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&ym(t,n,i,2,o);const _=3==(3&c);if(_){const x=t.preOrderCheckHooks;null!==x&&zl(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Ka(n,x,0,null),Fu(n,0)}if(function e(t){for(let n=Zc(t);null!==n;n=jf(n)){if(!n[js])continue;const i=n[io];for(let o=0;o<i.length;o++){ua(i[o])}}}(n),a(n,2),null!==t.contentQueries&&Ty(t,n),_){const x=t.contentCheckHooks;null!==x&&zl(n,x)}else{const x=t.contentHooks;null!==x&&Ka(n,x,1),Fu(n,1)}!function Qv(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=sy(n,ms);try{for(let c=0;c<i.length;c++){const f=i[c];if(f<0)In(~f);else{const _=f,T=i[++c],C=i[++c];ha(T,_),o.dirty=!1;const x=Sr(o);try{C(2,n[_])}finally{Oo(o,x)}}}}finally{null===n[ms]&&Kv(n,ms),In(-1)}}(t,n);const T=t.components;null!==T&&u(n,T,0);const C=t.viewQuery;if(null!==C&&Tm(2,C,o),_){const x=t.viewCheckHooks;null!==x&&zl(n,x)}else{const x=t.viewHooks;null!==x&&Ka(n,x,2),Fu(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[Zt]&=-73,Sc(n)}finally{Me()}}}function a(t,n){for(let i=Zc(t);null!==i;i=jf(i))for(let o=dr;o<i.length;o++)s(i[o],n)}function r(t,n,i){s(nr(n,t),i)}function s(t,n){if(!function Ul(t){return 128==(128&t[Zt])}(t))return;const i=t[yt],o=t[Zt];if(80&o&&0===n||1024&o||2===n)by(i,t,i.template,t[Gn]);else if(t[wi]>0){a(t,1);const c=i.components;null!==c&&u(t,c,1)}}function u(t,n,i){for(let o=0;o<n.length;o++)r(t,n[o],i)}class d{get rootNodes(){const n=this._lView,i=n[yt];return $d(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gn]}set context(n){this._lView[Gn]=n}get destroyed(){return 256==(256&this._lView[Zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[mn];if(ln(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(qe(n,o),Zl(i,o))}this._attachedToViewContainer=!1}Dt(this._lView[yt],this._lView)}onDestroy(n){!function xu(t,n){if(256==(256&t[Zt]))throw new he(911,!1);null===t[oi]&&(t[oi]=[]),t[oi].push(n)}(this._lView,n)}markForCheck(){Yh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Zt]&=-129}reattach(){this._lView[Zt]|=128}detectChanges(){Mp(this._lView[yt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y(t,n){Rh(t,n,n[$t],2,null,null)}(this._lView[yt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=n}}class g extends d{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Mp(n[yt],n,n[Gn],!1)}checkNoChanges(){}get context(){return null}}class w extends Kh{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=gn(n);return new q(i,this.ngModule)}}function S(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class H{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=pn(o);const c=this.injector.get(n,um,o);return c!==um||i===um?c:this.parentInjector.get(n,i,o)}}class q extends pp{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=S(n.inputs);if(null!==i)for(const c of o)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return o}get outputs(){return S(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Ti(t){return t.map(Sa).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,c){let f=(c=c||this.ngModule)instanceof qo?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new H(n,f):n,T=_.get(Od,null);if(null===T)throw new he(407,!1);const Y={rendererFactory:T,sanitizer:_.get(_p,null),effectManager:_.get(bm,null),afterRenderEventManager:_.get(gm,null)},ge=T.createRenderer(null,this.componentDef),De=this.componentDef.selectors[0][0]||"div",Ze=o?function py(t,n,i,o){const f=o.get(vl,!1)||i===Ei.ShadowDom,_=t.selectRootElement(n,f);return function _E(t){Xv(t)}(_),_}(ge,o,this.componentDef.encapsulation,_):m(ge,De,function O(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(De)),Kt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ht=null;null!==Ze&&(ht=Nd(Ze,_,!0));const En=hy(0,null,null,1,0,null,null,null,null,null,null),jn=Tp(null,En,null,Kt,null,null,Y,ge,_,null,ht);let Ar,bo;b(jn);try{const Ll=this.componentDef;let ig,iE=null;Ll.findHostDirectiveDefs?(ig=[],iE=new Map,Ll.findHostDirectiveDefs(Ll,ig,iE),ig.push(Ll)):ig=[Ll];const KC=function xe(t,n){const i=t[yt],o=yn;return t[o]=n,Jh(i,o,2,"#host",null)}(jn,Ze),qC=function rt(t,n,i,o,c,f,_){const T=c[yt];!function Et(t,n,i,o){for(const c of t)n.mergedAttrs=Cn(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(nf(n,n.mergedAttrs,!0),null!==i&&Yf(o,i,n))}(o,t,n,_);let C=null;null!==n&&(C=Nd(n,c[gs]));const x=f.rendererFactory.createRenderer(n,i);let $=16;i.signals?$=4096:i.onPush&&($=64);const Y=Tp(c,Yv(i),null,$,c[t.index],t,f,x,null,null,C);return T.firstCreatePass&&bp(T,t,o.length-1),Rp(c,Y),c[t.index]=Y}(KC,Ze,Ll,ig,jn,Y,ge);bo=nh(En,yn),Ze&&function Ut(t,n,i,o){if(o)Tn(t,i,["ng-version",kd.full]);else{const{attrs:c,classes:f}=function Ra(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!si(c))break;c=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Tn(t,i,c),f&&f.length>0&&Qf(t,i,f.join(" "))}}(ge,Ll,Ze,o),void 0!==i&&function Wt(t,n,i){const o=t.projection=[];for(let c=0;c<n.length;c++){const f=i[c];o.push(null!=f?Array.from(f):null)}}(bo,this.ngContentSelectors,i),Ar=function ft(t,n,i,o,c,f){const _=Ln(),T=c[yt],C=Ci(_,c);Zh(T,c,_,i,null,o);for(let $=0;$<i.length;$++)di(Os(c,T,_.directiveStart+$,_),c);hc(T,c,_),C&&di(C,c);const x=Os(c,T,_.directiveStart+_.componentOffset,_);if(t[Gn]=c[Gn]=x,null!==f)for(const $ of f)$(x,n);return vm(T,_,t),x}(qC,Ll,ig,iE,jn,[Bt]),Cm(En,jn,null)}finally{Me()}return new ce(this.componentType,Ar,ml(bo,jn),jn,bo)}}class ce extends rm{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new g(c),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let c;if(null!==o&&(c=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;jd(f[yt],f,c,n,i),this.previousInputValues.set(n,i),Yh(nr(this._tNode.index,f))}}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Bt(){const t=Ln();Wa(at()[yt],t)}function Vn(t){let n=function nn(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if(jr(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new he(903,!1);c=n.\u0275dir}if(c){if(i){o.push(c);const _=t;_.inputs=ve(t.inputs),_.inputTransforms=ve(t.inputTransforms),_.declaredInputs=ve(t.declaredInputs),_.outputs=ve(t.outputs);const T=c.hostBindings;T&&we(t,T);const C=c.viewQuery,x=c.contentQueries;if(C&&se(t,C),x&&fe(t,x),te(t.inputs,c.inputs),te(t.declaredInputs,c.declaredInputs),te(t.outputs,c.outputs),null!==c.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),te(_.inputTransforms,c.inputTransforms)),jr(c)&&c.data.animation){const $=t.data;$.animation=($.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const T=f[_];T&&T.ngInherit&&T(t),T===Vn&&(i=!1)}}n=Object.getPrototypeOf(n)}!function Pn(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=Cn(c.hostAttrs,i=Cn(i,c.hostAttrs))}}(o)}function ve(t){return t===Er?{}:t===hn?[]:t}function se(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function fe(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function we(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}function Sm(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const c=n[o];Array.isArray(c)&&c[2]&&(i[o]=c[2])}t.inputTransforms=i}function Xo(t){return!!Tl(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Tl(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ls(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function af(t,n,i,o){const c=at();return ls(c,rr(),n)&&(Rn(),To(Kn(),c,t,n,i,o)),af}function Bp(t,n,i,o,c,f,_,T){const C=at(),x=Rn(),$=t+yn,Y=x.firstCreatePass?function Bm(t,n,i,o,c,f,_,T,C){const x=n.consts,$=Jh(n,t,4,_||null,Ts(x,T));Cp(n,i,$,Ts(x,C)),Wa(n,$);const Y=$.tView=hy(2,$,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,$),Y.queries=n.queries.embeddedTView($)),$}($,x,C,n,i,o,c,f,_):x.data[$];xs(Y,!1);const ge=jm(x,C,Y,t);Hl()&&Sh(x,C,ge,Y),di(ge,C),Rp(C,C[$]=Ey(ge,C,ge,Y)),_s(Y)&&ly(x,C,Y),null!=_&&dy(C,Y,T)}let jm=function $m(t,n,i,o){return qs(!0),n[$t].createComment("")};function Pl(t,n,i){const o=at();return ls(o,rr(),n)&&function Wi(t,n,i,o,c,f,_,T){const C=Ci(n,i);let $,x=n.inputs;!T&&null!=x&&($=x[o])?(jd(t,i,$,o,c),Nn(n)&&function Em(t,n){const i=nr(n,t);16&i[Zt]||(i[Zt]|=64)}(i,n.index)):3&n.type&&(o=function _y(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=_?_(c,n.value||"",o):c,f.setProperty(C,o,c))}(Rn(),Kn(),o,t,n,o[$t],i,!1),Pl}function vu(t,n,i,o,c){const _=c?"class":"style";jd(t,i,n.inputs[_],_,o)}function $p(t,n,i,o){const c=at(),f=Rn(),_=yn+t,T=c[$t],C=f.firstCreatePass?function zm(t,n,i,o,c,f){const _=n.consts,C=Jh(n,t,2,o,Ts(_,c));return Cp(n,i,C,Ts(_,f)),null!==C.attrs&&nf(C,C.attrs,!1),null!==C.mergedAttrs&&nf(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(_,f,c,n,i,o):f.data[_],x=Gm(f,c,C,T,n,t);c[_]=x;const $=_s(C);return xs(C,!0),Yf(T,x,C),32!=(32&C.flags)&&Hl()&&Sh(f,c,x,C),0===function rs(){return Yt.lFrame.elementDepthCount}()&&di(x,c),function Bl(){Yt.lFrame.elementDepthCount++}(),$&&(ly(f,c,C),vm(f,C,c)),null!==o&&dy(c,C),$p}function pf(){let t=Ln();la()?function xc(){Yt.lFrame.isParent=!1}():(t=t.parent,xs(t,!1));const n=t;(function Nc(t){return Yt.skipHydrationRootTNode===t})(n)&&function is(){Yt.skipHydrationRootTNode=null}(),function ca(){Yt.lFrame.elementDepthCount--}();const i=Rn();return i.firstCreatePass&&(Wa(i,t),Mo(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function og(t){return 0!=(8&t.flags)}(n)&&vu(i,n,at(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Tf(t){return 0!=(16&t.flags)}(n)&&vu(i,n,at(),n.stylesWithoutHost,!1),pf}function Hp(t,n,i,o){return $p(t,n,i,o),pf(),Hp}let Gm=(t,n,i,o,c,f)=>(qs(!0),m(o,c,function Fo(){return Yt.lFrame.currentNamespace}()));function vc(){return at()}function Zo(t){return!!t&&"function"==typeof t.then}function gf(t){return!!t&&"function"==typeof t.subscribe}function Kd(t,n,i,o){const c=at(),f=Rn(),_=Ln();return function mf(t,n,i,o,c,f,_){const T=_s(o),x=t.firstCreatePass&&wy(t),$=n[Gn],Y=wm(n);let ge=!0;if(3&o.type||_){const wt=Ci(o,n),Ot=_?_(wt):wt,Kt=Y.length,ht=_?jn=>_(sr(jn[o.index])):o.index;let En=null;if(!_&&T&&(En=function xr(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===i&&c[f+1]===o){const T=n[Zi],C=c[f+2];return T.length>C?T[C]:null}"string"==typeof _&&(f+=2)}return null}(t,n,c,o.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=f,En.__ngLastListenerFn__=f,ge=!1;else{f=Qd(o,n,$,f,!1);const jn=i.listen(Ot,c,f);Y.push(f,jn),x&&x.push(c,ht,Kt,Kt+1)}}else f=Qd(o,n,$,f,!1);const De=o.outputs;let Ze;if(ge&&null!==De&&(Ze=De[c])){const wt=Ze.length;if(wt)for(let Ot=0;Ot<wt;Ot+=2){const Ar=n[Ze[Ot]][Ze[Ot+1]].subscribe(f),bo=Y.length;Y.push(f,Ar),x&&x.push(c,o.index,bo,-(bo+1))}}}(f,c,c[$t],_,t,n,o),Kd}function qd(t,n,i,o){try{return Qr(6,n,i),!1!==i(o)}catch(c){return Am(t,c),!1}finally{Qr(7,n,i)}}function Qd(t,n,i,o,c){return function f(_){if(_===Function)return o;Yh(t.componentOffset>-1?nr(t.index,n):n);let C=qd(n,i,o,_),x=f.__ngNextListenerFn__;for(;x;)C=qd(n,i,x,_)&&C,x=x.__ngNextListenerFn__;return c&&!1===C&&_.preventDefault(),C}}function Fy(t=1){return function Ct(t){return(Yt.lFrame.contextLView=function dn(t,n){for(;t>0;)n=n[cr],t--;return n}(t,Yt.lFrame.contextLView))[Gn]}(t)}function Gp(t,n){return t<<17|n<<2}function bs(t){return t>>17&32767}function Nl(t){return 2|t}function Da(t){return(131068&t)>>2}function Wp(t,n){return-131069&t|n<<2}function xl(t){return 1|t}function Hy(t,n,i,o,c){const f=t[i+1],_=null===n;let T=o?bs(f):Da(f),C=!1;for(;0!==T&&(!1===C||_);){const $=t[T+1];zy(t[T],n)&&(C=!0,t[T+1]=o?xl($):Nl($)),T=o?bs($):Da($)}C&&(t[i+1]=o?Nl(f):xl(f))}function zy(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&qu(t,n)>=0}function Yp(t,n){return function Fs(t,n,i,o){const c=at(),f=Rn(),_=function ss(t){const n=Yt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function Ic(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[vn()],_=function o_(t,n){return n>=t.expandoStartIndex}(t,i);(function Ge(t,n){return 0!=(t.flags&(n?8:16))})(f,o)&&null===n&&!_&&(n=!1),n=function Qy(t,n,i,o){const c=function Lu(t){const n=Yt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=qi(i=Zd(null,t,n,i,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==c)if(i=Zd(c,t,n,i,o),null===f){let C=function Yy(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Da(o))return t[bs(o)]}(t,n,o);void 0!==C&&Array.isArray(C)&&(C=Zd(null,t,n,C[1],o),C=qi(C,n.attrs,o),function Xy(t,n,i,o){t[bs(i?n.classBindings:n.styleBindings)]=o}(t,n,o,C))}else f=function Jy(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=qi(o,t[f].hostAttrs,i);return qi(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function Xr(t,n,i,o,c,f){let _=f?n.classBindings:n.styleBindings,T=bs(_),C=Da(_);t[o]=i;let $,x=!1;if(Array.isArray(i)?($=i[1],(null===$||qu(i,$)>0)&&(x=!0)):$=i,c)if(0!==C){const ge=bs(t[T+1]);t[o+1]=Gp(ge,T),0!==ge&&(t[ge+1]=Wp(t[ge+1],o)),t[T+1]=function yI(t,n){return 131071&t|n<<17}(t[T+1],o)}else t[o+1]=Gp(T,0),0!==T&&(t[T+1]=Wp(t[T+1],o)),T=o;else t[o+1]=Gp(C,0),0===T?T=o:t[C+1]=Wp(t[C+1],o),C=o;x&&(t[o+1]=Nl(t[o+1])),Hy(t,$,o,!0),Hy(t,$,o,!1),function II(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&qu(f,n)>=0&&(i[o+1]=xl(i[o+1]))}(n,$,t,o,f),_=Gp(T,C),f?n.classBindings=_:n.styleBindings=_}(c,f,n,i,_,o)}}(f,t,_,o),n!==An&&ls(c,_,n)&&function R(t,n,i,o,c,f,_,T){if(!(3&n.type))return;const C=t.data,x=C[T+1],$=function _f(t){return 1==(1&t)}(x)?L(C,n,i,c,Da(x),_):void 0;W($)||(W(f)||function _I(t){return 2==(2&t)}(x)&&(f=L(C,null,i,c,T,_)),function w_(t,n,i,o,c){if(n)c?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:Kc.DashCase;null==c?t.removeStyle(i,o,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=Kc.Important),t.setStyle(i,o,c,f))}}(o,_,lo(vn(),i),c,f))}(f,f.data[vn()],c,c[$t],t,c[_+1]=function Pe(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=_e(va(t)))),t}(n,i),o,_)}(t,n,null,!0),Yp}function Zd(t,n,i,o,c){let f=null;const _=i.directiveEnd;let T=i.directiveStylingLast;for(-1===T?T=i.directiveStart:T++;T<_&&(f=n[T],o=qi(o,f.hostAttrs,c),f!==t);)T++;return null!==t&&(i.directiveStylingLast=T),o}function qi(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?c=_:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),or(t,_,!!i||n[++f]))}return void 0===t?null:t}function L(t,n,i,o,c,f){const _=null===n;let T;for(;c>0;){const C=t[c],x=Array.isArray(C),$=x?C[1]:C,Y=null===$;let ge=i[c+1];ge===An&&(ge=Y?hn:void 0);let De=Y?fh(ge,o):$===o?ge:void 0;if(x&&!W(De)&&(De=fh(C,o)),W(De)&&(T=De,_))return T;const Ze=t[c+1];c=_?bs(Ze):Da(Ze)}if(null!==n){let C=f?n.residualClasses:n.residualStyles;null!=C&&(T=fh(C,o))}return T}function W(t){return void 0!==t}function bt(t,n=""){const i=at(),o=Rn(),c=t+yn,f=o.firstCreatePass?Jh(o,c,1,n,null):o.data[c],_=yr(o,i,f,n,t);i[c]=_,Hl()&&Sh(o,i,_,f),xs(f,!1)}let yr=(t,n,i,o,c)=>(qs(!0),function sc(t,n){return t.createText(n)}(n[$t],o));function Si(t){return Ri("",t,""),Si}function Ri(t,n,i){const o=at(),c=function gc(t,n,i,o){return ls(t,rr(),i)?n+me(i)+o:An}(o,t,n,i);return c!==An&&function wa(t,n,i){const o=lo(n,t);!function $f(t,n,i){t.setValue(n,i)}(t[$t],o,i)}(o,vn(),c),Ri}const vf=void 0;var mw=["en",[["a","p"],["AM","PM"],vf],[["AM","PM"],vf,vf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vf,"{1} 'at' {0}",vf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gw(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Jp={};function TI(t){const n=function _w(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=UE(n);if(i)return i;const o=n.split("-")[0];if(i=UE(o),i)return i;if("en"===o)return mw;throw new he(701,!1)}function VE(t){return TI(t)[Zp.PluralCase]}function UE(t){return t in Jp||(Jp[t]=bn.ng&&bn.ng.common&&bn.ng.common.locales&&bn.ng.common.locales[t]),Jp[t]}var Zp=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Zp||{});const eg="en-US";let BE=eg;function DI(t,n,i,o,c){if(t=it(t),Array.isArray(t))for(let f=0;f<t.length;f++)DI(t[f],n,i,o,c);else{const f=Rn(),_=at(),T=Ln();let C=ul(t)?t:it(t.provide);const x=Rd(t),$=1048575&T.providerIndexes,Y=T.directiveStart,ge=T.providerIndexes>>20;if(ul(t)||!t.multi){const De=new fa(x,c,Bd),Ze=bI(C,n,c?$:$+ge,Y);-1===Ze?(Xa(Ya(T,_),f,C),CI(f,t,n.length),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(De),_.push(De)):(i[Ze]=De,_[Ze]=De)}else{const De=bI(C,n,$+ge,Y),Ze=bI(C,n,$,$+ge),Ot=Ze>=0&&i[Ze];if(c&&!Ot||!c&&!(De>=0&&i[De])){Xa(Ya(T,_),f,C);const Kt=function gA(t,n,i,o,c){const f=new fa(t,i,Bd);return f.multi=[],f.index=n,f.componentProviders=0,h0(f,c,o&&!i),f}(c?pA:fA,i.length,c,o,x);!c&&Ot&&(i[Ze].providerFactory=Kt),CI(f,t,n.length,0),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(Kt),_.push(Kt)}else CI(f,t,De>-1?De:Ze,h0(i[c?Ze:De],x,!c&&o));!c&&o&&Ot&&i[Ze].componentProviders++}}}function CI(t,n,i,o){const c=ul(n),f=function Av(t){return!!t.useClass}(n);if(c||f){const C=(f?it(n.useClass):n).prototype.ngOnDestroy;if(C){const x=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const $=x.indexOf(i);-1===$?x.push(i,[o,C]):x[$+1].push(o,C)}else x.push(i,C)}}}function h0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function bI(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function fA(t,n,i,o){return SI(this.multi,[])}function pA(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,T=Os(i,i[yt],this.providerFactory.index,o);f=T.slice(0,_),SI(c,f);for(let C=_;C<T.length;C++)f.push(T[C])}else f=[],SI(c,f);return f}function SI(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function f0(t,n=[]){return i=>{i.providersResolver=(o,c)=>function hA(t,n,i){const o=Rn();if(o.firstCreatePass){const c=jr(t);DI(i,o.data,o.blueprint,c,!0),DI(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class If{}class p0{}function mA(t,n){return new RI(t,n??null,[])}class RI extends If{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new w(this);const c=Mn(n);this._bootstrapComponents=gu(c.bootstrap),this._r3Injector=Qh(n,i,[{provide:If,useValue:this},{provide:Kh,useValue:this.componentFactoryResolver},...o],_e(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class PI extends p0{constructor(n){super(),this.moduleType=n}create(n){return new RI(this.moduleType,n,[])}}class g0 extends If{constructor(n){super(),this.componentFactoryResolver=new w(this),this.instance=null;const i=new du([...n.providers,{provide:If,useValue:this},{provide:Kh,useValue:this.componentFactoryResolver}],n.parent||Uh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function m0(t,n,i=null){return new g0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let yA=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=V_(0,i.type),c=o.length>0?m0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=kt({token:t,providedIn:"environment",factory:()=>new t(ct(qo))})}}return t})();function _0(t){t.getStandaloneInjector=n=>n.get(yA).getOrCreateStandaloneInjector(t)}function A0(t,n,i){const o=function wr(){const t=Yt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}()+t,c=at();return c[o]===An?function ks(t,n,i){return t[n]=i}(c,o,i?n.call(i):n()):function sf(t,n){return t[n]}(c,o)}function HA(){return this._results[Symbol.iterator]()}class NI{get changes(){return this._changes||(this._changes=new Yo)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=NI.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=HA)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=function li(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Za(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GA(t,n,i,o=!0){const c=n[yt];if(function B(t,n,i,o){const c=dr+o,f=i.length;o>0&&(i[c-1][_n]=n),o<f-dr?(n[_n]=i[c],hh(i,dr+o,n)):(i.push(n),n[_n]=null),n[mn]=i;const _=n[ki];null!==_&&i!==_&&function ie(t,n){const i=t[io];n[er]!==n[mn][mn][er]&&(t[js]=!0),null===i?t[io]=[n]:i.push(n)}(_,n);const T=n[Li];null!==T&&T.insertView(t),n[Zt]|=128}(c,n,t,i),o){const f=Kf(i,t),_=n[$t],T=cu(_,t[mi]);null!==T&&function h(t,n,i,o,c,f){o[ur]=c,o[pr]=n,Rh(t,o,i,1,c,f)}(c,t[pr],_,n,T,f)}}let g_=(()=>{class t{static{this.__NG_ELEMENT_ID__=qA}}return t})();const WA=g_,KA=class extends WA{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const c=function zA(t,n,i,o){const c=n.tView,T=Tp(t,c,i,4096&t[Zt]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);T[ki]=t[n.index];const x=t[Li];return null!==x&&(T[Li]=x.createEmbeddedView(c)),Cm(c,T,i),T}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new d(c)}};function qA(){return iv(Ln(),at())}function iv(t,n){return 4&t.type?new KA(n,t,ml(t,n)):null}let ov=(()=>{class t{static{this.__NG_ELEMENT_ID__=eD}}return t})();function eD(){return L0(Ln(),at())}const tD=ov,O0=class extends tD{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return ml(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){const n=$u(this._hostTNode,this._hostLView);if(Qa(n)){const i=Vc(n,this._hostLView),o=Fc(n);return new ni(i[yt].data[o+8],i)}return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=k0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(n,i,o){let c,f;"number"==typeof o?c=o:null!=o&&(c=o.index,f=o.injector);const T=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(T,c,false),T}createComponent(n,i,o,c,f){const _=n&&!function Wu(t){return"function"==typeof t}(n);let T;if(_)T=i;else{const wt=i||{};T=wt.index,o=wt.injector,c=wt.projectableNodes,f=wt.environmentInjector||wt.ngModuleRef}const C=_?n:new q(gn(n)),x=o||this.parentInjector;if(!f&&null==C.ngModule){const Ot=(_?x:this.parentInjector).get(qo,null);Ot&&(f=Ot)}gn(C.componentType??{});const De=C.create(x,c,null,f);return this.insertImpl(De.hostView,T,false),De}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const c=n._lView;if(function Nu(t){return ln(t[mn])}(c)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const x=c[mn],$=new O0(x,x[pr],x[mn]);$.detach($.indexOf(n))}}const _=this._adjustIndex(i),T=this._lContainer;return GA(T,c,_,!o),n.attachToViewContainerRef(),hh(xI(T),_,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=k0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=qe(this._lContainer,i);o&&(Zl(xI(this._lContainer),i),Dt(o[yt],o))}detach(n){const i=this._adjustIndex(n,-1),o=qe(this._lContainer,i);return o&&null!=Zl(xI(this._lContainer),i)?new d(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function k0(t){return t[8]}function xI(t){return t[8]||(t[8]=[])}function L0(t,n){let i;const o=n[t.index];return ln(o)?i=o:(i=Ey(o,n,null,t),n[t.index]=i,Rp(n,i)),F0(i,n,t,o),new O0(i,t,n)}let F0=function V0(t,n,i,o){if(t[mi])return;let c;c=8&i.type?sr(o):function nD(t,n){const i=t[$t],o=i.createComment(""),c=Ci(n,t);return Io(i,cu(i,c),o,function Id(t,n){return t.nextSibling(n)}(i,c),!1),o}(n,i),t[mi]=c};class OI{constructor(n){this.queryList=n,this.matches=null}clone(){return new OI(this.queryList)}setDirty(){this.queryList.setDirty()}}class kI{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const _=i.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new kI(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==W0(n,i).matches&&this.queries[i].setDirty()}}class U0{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class LI{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new LI(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class FI{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new FI(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,sD(i,f)),this.matchTNodeWithReadOption(n,i,Hu(i,n,f,!1,!1))}else o===g_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Hu(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===xd||c===ov||c===g_&&4&i.type)this.addMatch(i.index,-2);else{const f=Hu(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function sD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function aD(t,n,i,o){return-1===i?function oD(t,n){return 11&t.type?ml(t,n):4&t.type?iv(t,n):null}(n,t):-2===i?function uD(t,n,i){return i===xd?ml(n,t):i===g_?iv(n,t):i===ov?L0(n,t):void 0}(t,n,o):Os(t,t[yt],i,n)}function B0(t,n,i,o){const c=n[Li].queries[o];if(null===c.matches){const f=t.data,_=i.matches,T=[];for(let C=0;C<_.length;C+=2){const x=_[C];T.push(x<0?null:aD(n,f[x],_[C+1],i.metadata.read))}c.matches=T}return c.matches}function VI(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const _=B0(t,n,c,i);for(let T=0;T<f.length;T+=2){const C=f[T];if(C>0)o.push(_[T/2]);else{const x=f[T+1],$=n[-C];for(let Y=dr;Y<$.length;Y++){const ge=$[Y];ge[ki]===ge[mn]&&VI(ge[yt],ge,x,o)}if(null!==$[io]){const Y=$[io];for(let ge=0;ge<Y.length;ge++){const De=Y[ge];VI(De[yt],De,x,o)}}}}}return o}function j0(t){const n=at(),i=Rn(),o=kc();E(o+1);const c=W0(i,o);if(t.dirty&&function ho(t){return 4==(4&t[Zt])}(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?VI(i,n,o,[]):B0(i,n,c,o);t.reset(f,om),t.notifyOnChanges()}return!0}return!1}function $0(t,n,i,o){const c=Rn();if(c.firstCreatePass){const f=Ln();(function G0(t,n,i){null===t.queries&&(t.queries=new LI),t.queries.track(new FI(n,i))})(c,new U0(n,i,o),f.index),function dD(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}!function z0(t,n,i){const o=new NI(4==(4&i));(function Ap(t,n,i,o){const c=wm(n);c.push(i),t.firstCreatePass&&wy(t).push(o,c.length-1)})(t,n,o,o.destroy),null===n[Li]&&(n[Li]=new kI),n[Li].queries.push(new OI(o))}(c,at(),i)}function H0(){return function lD(t,n){return t[Li].queries[n].queryList}(at(),kc())}function W0(t,n){return t.queries.getByIndex(n)}function UI(t){return!!Mn(t)}const cT=new ot("Application Initializer");let zI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=oe(cT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const f=c();if(Zo(f))i.push(f);else if(gf(f)){const _=new Promise((T,C)=>{f.subscribe({complete:T,error:C})});i.push(_)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lT=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const uv=new ot("LocaleId",{providedIn:"root",factory:()=>oe(uv,qt.Optional|qt.SkipSelf)||function xD(){return typeof $localize<"u"&&$localize.locale||eg}()}),OD=new ot("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let dT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new K.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class LD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let FD=(()=>{class t{compileModuleSync(i){return new PI(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=gu(Mn(i).declarations).reduce((_,T)=>{const C=gn(T);return C&&_.push(new q(C)),_},[]);return new LD(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const gT=new ot(""),mT=new ot("");let KI,sC=(()=>{class t{constructor(i,o,c){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,KI||(function oC(t){KI=t}(c),c.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ii.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,c){return[]}static{this.\u0275fac=function(o){return new(o||t)(ct(ii),ct(_T),ct(mT))}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac})}}return t})(),_T=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return KI?.findTestabilityInTree(this,i,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),th=null;const yT=new ot("AllowMultipleToken"),qI=new ot("PlatformDestroyListeners"),QI=new ot("appBootstrapListener");class cC{constructor(n,i){this.name=n,this.token=i}}function ET(t,n,i=[]){const o=`Platform: ${n}`,c=new ot(o);return(f=[])=>{let _=YI();if(!_||_.injector.get(yT,!1)){const T=[...i,...f,{provide:c,useValue:!0}];t?t(T):function lC(t){if(th&&!th.get(yT,!1))throw new he(400,!1);(function vT(){!function bc(t){Mu=t}(()=>{throw new he(600,!1)})})(),th=t;const n=t.get(wT);(function IT(t){t.get(Jg,null)?.forEach(i=>i())})(t)}(function TT(t=[],n){return Qo.create({name:n,providers:[{provide:op,useValue:"platform"},{provide:qI,useValue:new Set([()=>th=null])},...t]})}(T,o))}return function hC(t){const n=YI();if(!n)throw new he(401,!1);return n}()}}function YI(){return th?.get(wT)??null}let wT=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const c=function fC(t="zone.js",n){return"noop"===t?new hu:"zone.js"===t?new ii(n):t}(o?.ngZone,function AT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return c.run(()=>{const f=function _A(t,n,i){return new RI(t,n,i)}(i.moduleType,this.injector,function RT(t){return[{provide:ii,useFactory:t},{provide:ol,multi:!0,useFactory:()=>{const n=oe(gC,{optional:!0});return()=>n.initialize()}},{provide:ST,useFactory:pC},{provide:Fd,useFactory:fu}]}(()=>c)),_=f.injector.get(lc,null);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:C=>{_.handleError(C)}});f.onDestroy(()=>{lv(this._modules,f),T.unsubscribe()})}),function DT(t,n,i){try{const o=i();return Zo(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(_,c,()=>{const T=f.injector.get(zI);return T.runInitializers(),T.donePromise.then(()=>(function jE(t){st(t,"Expected localeId to be defined"),"string"==typeof t&&(BE=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(uv,eg)||eg),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const c=CT({},o);return function aC(t,n,i){const o=new PI(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get(rg);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new he(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(qI,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||t)(ct(Qo))}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function CT(t,n){return Array.isArray(n)?n.reduce(CT,t):{...t,...n}}let rg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(ST),this.zoneIsStable=oe(Fd),this.componentTypes=[],this.components=[],this.isStable=oe(dT).hasPendingTasks.pipe((0,je.n)(i=>i?(0,le.of)(!1):this.zoneIsStable),(0,Se.F)(),(0,Ie.u)()),this._injector=oe(qo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const c=i instanceof pp;if(!this._injector.get(zI).done)throw!c&&ps(i),new he(405,!1);let _;_=c?i:this._injector.get(Kh).resolveComponentFactory(i),this.componentTypes.push(_.componentType);const T=function uC(t){return t.isBoundToModule}(_)?void 0:this._injector.get(If),x=_.create(Qo.NULL,[],o||_.selector,T),$=x.location.nativeElement,Y=x.injector.get(gT,null);return Y?.registerApplication($),x.onDestroy(()=>{this.detachView(x.hostView),lv(this.components,x),Y?.unregisterApplication($)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;lv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(QI,[]);o.push(...this._bootstrapListeners),o.forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>lv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new he(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function lv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const ST=new ot("",{providedIn:"root",factory:()=>oe(lc).handleError.bind(void 0)});function pC(){const t=oe(ii),n=oe(lc);return i=>t.runOutsideAngular(()=>n.handleError(i))}let gC=(()=>{class t{constructor(){this.zone=oe(ii),this.applicationRef=oe(rg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=kt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _C(){return!1}let yC=(()=>{class t{static{this.__NG_ELEMENT_ID__=vC}}return t})();function vC(t){return function IC(t,n,i){if(Nn(t)&&!i){const o=nr(t.index,n);return new d(o,o)}return 47&t.type?new d(n[er],n):null}(Ln(),at(),16==(16&t))}class OT{constructor(){}supports(n){return Xo(n)}create(n){return new DC(n)}}const AC=(t,n)=>n;class DC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||AC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const _=!o||i&&i.currentIndex<LT(o,c,f)?i:o,T=LT(_,c,f),C=_.currentIndex;if(_===o)c--,o=o._nextRemoved;else if(i=i._next,null==_.previousIndex)c++;else{f||(f=[]);const x=T-c,$=C-c;if(x!=$){for(let ge=0;ge<x;ge++){const De=ge<f.length?f[ge]:f[ge]=0,Ze=De+ge;$<=Ze&&Ze<x&&(f[ge]=De+1)}f[_.previousIndex]=$-x}}T!==C&&n(_,T,C)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Xo(n))throw new he(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,_,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let T=0;T<this.length;T++)f=n[T],_=this._trackByFn(T,f),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,f,_,T)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,_,T),o=!0),i=i._next}else c=0,function sI(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,T=>{_=this._trackByFn(c,T),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,T,_,c)),Object.is(i.item,T)||this._addIdentityChange(i,T)):(i=this._mismatch(i,T,_,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new CC(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new kT),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kT),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class kT{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new bC,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LT(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class FT{constructor(){}supports(n){return n instanceof Map||Tl(n)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||Tl(n)))throw new he(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VT(){return new tE([new OT])}let tE=(()=>{class t{static{this.\u0275prov=kt({token:t,providedIn:"root",factory:VT})}constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||VT()),deps:[[t,new nu,new _a]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new he(901,!1)}}return t})();function UT(){return new nE([new FT])}let nE=(()=>{class t{static{this.\u0275prov=kt({token:t,providedIn:"root",factory:UT})}constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||UT()),deps:[[t,new nu,new _a]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new he(901,!1)}}return t})();const NC=ET(null,"core",[]);let xC=(()=>{class t{constructor(i){}static{this.\u0275fac=function(o){return new(o||t)(ct(rg))}}static{this.\u0275mod=Ma({type:t})}static{this.\u0275inj=rn({})}}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const n=gn(t);if(!n)return null;const i=new q(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1977:(Pt,Be,U)=>{U.d(Be,{DS:()=>Jn,$z:()=>He,UB:()=>on,yy:()=>pt,ZP:()=>St,AU:()=>Ht,CP:()=>Xe,gF:()=>Xt}),U(7955);var ee=U(177),ne=U(7705),Q=U(1825),K=U(9253),le=U(1413),Ie=U(7673),je=U(1985),Se=U(8455),X=U(7786),te=U(941),_e=U(5558),et=U(6354),Qe=U(6129);class vt extends le.B{constructor(Rt=1/0,ue=1/0,pe=Qe.U){super(),this._bufferSize=Rt,this._windowTime=ue,this._timestampProvider=pe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ue===1/0,this._bufferSize=Math.max(1,Rt),this._windowTime=Math.max(1,ue)}next(Rt){const{isStopped:ue,_buffer:pe,_infiniteTimeWindow:be,_timestampProvider:Ae,_windowTime:ze}=this;ue||(pe.push(Rt),!be&&pe.push(Ae.now()+ze)),this._trimBuffer(),super.next(Rt)}_subscribe(Rt){this._throwIfClosed(),this._trimBuffer();const ue=this._innerSubscribe(Rt),{_infiniteTimeWindow:pe,_buffer:be}=this,Ae=be.slice();for(let ze=0;ze<Ae.length&&!Rt.closed;ze+=pe?1:2)Rt.next(Ae[ze]);return this._checkFinalizedStatuses(Rt),ue}_trimBuffer(){const{_bufferSize:Rt,_timestampProvider:ue,_buffer:pe,_infiniteTimeWindow:be}=this,Ae=(be?1:2)*Rt;if(Rt<1/0&&Ae<pe.length&&pe.splice(0,pe.length-Ae),!be){const ze=ue.now();let Le=0;for(let st=1;st<pe.length&&pe[st]<=ze;st+=2)Le=st;Le&&pe.splice(0,Le+1)}}}var it=U(7647);function Tt(Mt,Rt,ue){let pe,be=!1;return Mt&&"object"==typeof Mt?({bufferSize:pe=1/0,windowTime:Rt=1/0,refCount:be=!1,scheduler:ue}=Mt):pe=Mt??1/0,(0,it.u)({connector:()=>new vt(pe,Rt,ue),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:be})}var lt=U(1594),mt=U(8071);function ye(Mt,Rt){return(0,mt.T)(Rt)?(0,_e.n)(()=>Mt,Rt):(0,_e.n)(()=>Mt)}var he=U(6745),Oe=U(5964);U(7935);const Xe=new ne.nKC("angularfire2.auth.use-emulator"),pt=new ne.nKC("angularfire2.auth.settings"),St=new ne.nKC("angularfire2.auth.tenant-id"),He=new ne.nKC("angularfire2.auth.langugage-code"),Ht=new ne.nKC("angularfire2.auth.use-device-language"),on=new ne.nKC("angularfire.auth.persistence"),Xt=(Mt,Rt,ue,pe,be,Ae,ze,Le)=>(0,K.BM)(`${Mt.name}.auth`,"AngularFireAuth",Mt.name,()=>{const st=Rt.runOutsideAngular(()=>Mt.auth());if(ue&&st.useEmulator(...ue),pe&&(st.tenantId=pe),st.languageCode=be,Ae&&st.useDeviceLanguage(),ze)for(const[_t,$n]of Object.entries(ze))st.settings[_t]=$n;return Le&&st.setPersistence(Le),st},[ue,pe,be,Ae,ze,Le]);let Jn=(()=>{class Mt{authState;idToken;user;idTokenResult;credential;constructor(ue,pe,be,Ae,ze,Le,st,_t,$n,zt,$e,kt){const Hn=new le.B,rn=(0,Ie.of)(void 0).pipe((0,te.Q)(ze.outsideAngular),(0,_e.n)(()=>Ae.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,7955)))),(0,et.T)(()=>(0,K.iB)(ue,Ae,pe)),(0,et.T)(dt=>Xt(dt,Ae,Le,_t,$n,zt,st,$e)),Tt({bufferSize:1,refCount:!1}));if((0,ee.Vy)(be))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ie.of)(null);else{rn.pipe((0,lt.$)()).subscribe();const dt=rn.pipe((0,_e.n)(Je=>Je.getRedirectResult().then(Re=>Re,()=>null)),Q.U0,Tt({bufferSize:1,refCount:!1})),gt=rn.pipe((0,_e.n)(Je=>new je.c(Re=>({unsubscribe:Ae.runOutsideAngular(()=>Je.onAuthStateChanged(We=>Re.next(We),We=>Re.error(We),()=>Re.complete()))})))),Ft=rn.pipe((0,_e.n)(Je=>new je.c(Re=>({unsubscribe:Ae.runOutsideAngular(()=>Je.onIdTokenChanged(We=>Re.next(We),We=>Re.error(We),()=>Re.complete()))}))));this.authState=dt.pipe(ye(gt),(0,he._)(ze.outsideAngular),(0,te.Q)(ze.insideAngular)),this.user=dt.pipe(ye(Ft),(0,he._)(ze.outsideAngular),(0,te.Q)(ze.insideAngular)),this.idToken=this.user.pipe((0,_e.n)(Je=>Je?(0,Se.H)(Je.getIdToken()):(0,Ie.of)(null))),this.idTokenResult=this.user.pipe((0,_e.n)(Je=>Je?(0,Se.H)(Je.getIdTokenResult()):(0,Ie.of)(null))),this.credential=(0,X.h)(dt,Hn,this.authState.pipe((0,Oe.p)(Je=>!Je))).pipe((0,et.T)(Je=>Je?.user?Je:null),(0,he._)(ze.outsideAngular),(0,te.Q)(ze.insideAngular))}return(0,K.Gt)(this,rn,Ae,{spy:{apply:(dt,gt,Ft)=>{(dt.startsWith("signIn")||dt.startsWith("createUser"))&&Ft.then(Je=>Hn.next(Je))}}})}static \u0275fac=function(pe){return new(pe||Mt)(ne.KVO(K.rx),ne.KVO(K.uP,8),ne.KVO(ne.Agw),ne.KVO(ne.SKi),ne.KVO(Q.u0),ne.KVO(Xe,8),ne.KVO(pt,8),ne.KVO(St,8),ne.KVO(He,8),ne.KVO(Ht,8),ne.KVO(on,8),ne.KVO(Q.Jv,8))};static \u0275prov=ne.jDH({token:Mt,factory:Mt.\u0275fac,providedIn:"any"})}return Mt})()},8079:(Pt,Be,U)=>{U.d(Be,{Qe:()=>Cy,cM:()=>by});var I=U(177),ee=U(7705),ne=U(1825),Q=U(9253),K=U(1977),le=U(3236),Ie=U(1985),je=U(8455),Se=U(7673),X=U(9172),te=U(9974),_e=U(4360);function et(){return(0,te.N)((a,e)=>{let r,s=!1;a.subscribe((0,_e._)(e,u=>{const d=r;r=u,s&&e.next([d,u]),s=!0}))})}var St,He,Qe=U(6354),vt=U(2816),it=U(3294),Tt=U(5964),mt=(U(7955),U(3345)),ye=U(467),he=U(7852),Oe=U(1362),me=U(8041),ke=U(1076),Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pt={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(ve,se,fe){fe||(fe=0);var we=Array(16);if("string"==typeof se)for(var Ce=0;16>Ce;++Ce)we[Ce]=se.charCodeAt(fe++)|se.charCodeAt(fe++)<<8|se.charCodeAt(fe++)<<16|se.charCodeAt(fe++)<<24;else for(Ce=0;16>Ce;++Ce)we[Ce]=se[fe++]|se[fe++]<<8|se[fe++]<<16|se[fe++]<<24;var Ve=ve.g[3],de=(se=ve.g[0])+(Ve^(fe=ve.g[1])&((Ce=ve.g[2])^Ve))+we[0]+3614090360&4294967295;de=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=(fe=(Ce=(Ve=(se=fe+(de<<7&4294967295|de>>>25))+((de=Ve+(Ce^se&(fe^Ce))+we[1]+3905402710&4294967295)<<12&4294967295|de>>>20))+((de=Ce+(fe^Ve&(se^fe))+we[2]+606105819&4294967295)<<17&4294967295|de>>>15))+((de=fe+(se^Ce&(Ve^se))+we[3]+3250441966&4294967295)<<22&4294967295|de>>>10))+((de=se+(Ve^fe&(Ce^Ve))+we[4]+4118548399&4294967295)<<7&4294967295|de>>>25))+((de=Ve+(Ce^se&(fe^Ce))+we[5]+1200080426&4294967295)<<12&4294967295|de>>>20))+((de=Ce+(fe^Ve&(se^fe))+we[6]+2821735955&4294967295)<<17&4294967295|de>>>15))+((de=fe+(se^Ce&(Ve^se))+we[7]+4249261313&4294967295)<<22&4294967295|de>>>10))+((de=se+(Ve^fe&(Ce^Ve))+we[8]+1770035416&4294967295)<<7&4294967295|de>>>25))+((de=Ve+(Ce^se&(fe^Ce))+we[9]+2336552879&4294967295)<<12&4294967295|de>>>20))+((de=Ce+(fe^Ve&(se^fe))+we[10]+4294925233&4294967295)<<17&4294967295|de>>>15))+((de=fe+(se^Ce&(Ve^se))+we[11]+2304563134&4294967295)<<22&4294967295|de>>>10))+((de=se+(Ve^fe&(Ce^Ve))+we[12]+1804603682&4294967295)<<7&4294967295|de>>>25))+((de=Ve+(Ce^se&(fe^Ce))+we[13]+4254626195&4294967295)<<12&4294967295|de>>>20))+((de=Ce+(fe^Ve&(se^fe))+we[14]+2792965006&4294967295)<<17&4294967295|de>>>15))+((de=fe+(se^Ce&(Ve^se))+we[15]+1236535329&4294967295)<<22&4294967295|de>>>10))+((de=se+(Ce^Ve&(fe^Ce))+we[1]+4129170786&4294967295)<<5&4294967295|de>>>27))+((de=Ve+(fe^Ce&(se^fe))+we[6]+3225465664&4294967295)<<9&4294967295|de>>>23))+((de=Ce+(se^fe&(Ve^se))+we[11]+643717713&4294967295)<<14&4294967295|de>>>18))+((de=fe+(Ve^se&(Ce^Ve))+we[0]+3921069994&4294967295)<<20&4294967295|de>>>12))+((de=se+(Ce^Ve&(fe^Ce))+we[5]+3593408605&4294967295)<<5&4294967295|de>>>27))+((de=Ve+(fe^Ce&(se^fe))+we[10]+38016083&4294967295)<<9&4294967295|de>>>23))+((de=Ce+(se^fe&(Ve^se))+we[15]+3634488961&4294967295)<<14&4294967295|de>>>18))+((de=fe+(Ve^se&(Ce^Ve))+we[4]+3889429448&4294967295)<<20&4294967295|de>>>12))+((de=se+(Ce^Ve&(fe^Ce))+we[9]+568446438&4294967295)<<5&4294967295|de>>>27))+((de=Ve+(fe^Ce&(se^fe))+we[14]+3275163606&4294967295)<<9&4294967295|de>>>23))+((de=Ce+(se^fe&(Ve^se))+we[3]+4107603335&4294967295)<<14&4294967295|de>>>18))+((de=fe+(Ve^se&(Ce^Ve))+we[8]+1163531501&4294967295)<<20&4294967295|de>>>12))+((de=se+(Ce^Ve&(fe^Ce))+we[13]+2850285829&4294967295)<<5&4294967295|de>>>27))+((de=Ve+(fe^Ce&(se^fe))+we[2]+4243563512&4294967295)<<9&4294967295|de>>>23))+((de=Ce+(se^fe&(Ve^se))+we[7]+1735328473&4294967295)<<14&4294967295|de>>>18))+((de=fe+(Ve^se&(Ce^Ve))+we[12]+2368359562&4294967295)<<20&4294967295|de>>>12))+((de=se+(fe^Ce^Ve)+we[5]+4294588738&4294967295)<<4&4294967295|de>>>28))+((de=Ve+(se^fe^Ce)+we[8]+2272392833&4294967295)<<11&4294967295|de>>>21))+((de=Ce+(Ve^se^fe)+we[11]+1839030562&4294967295)<<16&4294967295|de>>>16))+((de=fe+(Ce^Ve^se)+we[14]+4259657740&4294967295)<<23&4294967295|de>>>9))+((de=se+(fe^Ce^Ve)+we[1]+2763975236&4294967295)<<4&4294967295|de>>>28))+((de=Ve+(se^fe^Ce)+we[4]+1272893353&4294967295)<<11&4294967295|de>>>21))+((de=Ce+(Ve^se^fe)+we[7]+4139469664&4294967295)<<16&4294967295|de>>>16))+((de=fe+(Ce^Ve^se)+we[10]+3200236656&4294967295)<<23&4294967295|de>>>9))+((de=se+(fe^Ce^Ve)+we[13]+681279174&4294967295)<<4&4294967295|de>>>28))+((de=Ve+(se^fe^Ce)+we[0]+3936430074&4294967295)<<11&4294967295|de>>>21))+((de=Ce+(Ve^se^fe)+we[3]+3572445317&4294967295)<<16&4294967295|de>>>16))+((de=fe+(Ce^Ve^se)+we[6]+76029189&4294967295)<<23&4294967295|de>>>9))+((de=se+(fe^Ce^Ve)+we[9]+3654602809&4294967295)<<4&4294967295|de>>>28))+((de=Ve+(se^fe^Ce)+we[12]+3873151461&4294967295)<<11&4294967295|de>>>21))+((de=Ce+(Ve^se^fe)+we[15]+530742520&4294967295)<<16&4294967295|de>>>16))+((de=fe+(Ce^Ve^se)+we[2]+3299628645&4294967295)<<23&4294967295|de>>>9))+((de=se+(Ce^(fe|~Ve))+we[0]+4096336452&4294967295)<<6&4294967295|de>>>26))+((de=Ve+(fe^(se|~Ce))+we[7]+1126891415&4294967295)<<10&4294967295|de>>>22))+((de=Ce+(se^(Ve|~fe))+we[14]+2878612391&4294967295)<<15&4294967295|de>>>17))+((de=fe+(Ve^(Ce|~se))+we[5]+4237533241&4294967295)<<21&4294967295|de>>>11))+((de=se+(Ce^(fe|~Ve))+we[12]+1700485571&4294967295)<<6&4294967295|de>>>26))+((de=Ve+(fe^(se|~Ce))+we[3]+2399980690&4294967295)<<10&4294967295|de>>>22))+((de=Ce+(se^(Ve|~fe))+we[10]+4293915773&4294967295)<<15&4294967295|de>>>17))+((de=fe+(Ve^(Ce|~se))+we[1]+2240044497&4294967295)<<21&4294967295|de>>>11))+((de=se+(Ce^(fe|~Ve))+we[8]+1873313359&4294967295)<<6&4294967295|de>>>26))+((de=Ve+(fe^(se|~Ce))+we[15]+4264355552&4294967295)<<10&4294967295|de>>>22))+((de=Ce+(se^(Ve|~fe))+we[6]+2734768916&4294967295)<<15&4294967295|de>>>17))+((de=fe+(Ve^(Ce|~se))+we[13]+1309151649&4294967295)<<21&4294967295|de>>>11))+((Ve=(se=fe+((de=se+(Ce^(fe|~Ve))+we[4]+4149444226&4294967295)<<6&4294967295|de>>>26))+((de=Ve+(fe^(se|~Ce))+we[11]+3174756917&4294967295)<<10&4294967295|de>>>22))^((Ce=Ve+((de=Ce+(se^(Ve|~fe))+we[2]+718787259&4294967295)<<15&4294967295|de>>>17))|~se))+we[9]+3951481745&4294967295,ve.g[0]=ve.g[0]+se&4294967295,ve.g[1]=ve.g[1]+(Ce+(de<<21&4294967295|de>>>11))&4294967295,ve.g[2]=ve.g[2]+Ce&4294967295,ve.g[3]=ve.g[3]+Ve&4294967295}function g(ve,se){this.h=se;for(var fe=[],we=!0,Ce=ve.length-1;0<=Ce;Ce--){var Ve=0|ve[Ce];we&&Ve==se||(fe[Ce]=Ve,we=!1)}this.g=fe}(function e(ve,se){function fe(){}fe.prototype=se.prototype,ve.D=se.prototype,ve.prototype=new fe,ve.prototype.constructor=ve,ve.C=function(we,Ce,Ve){for(var de=Array(arguments.length-2),_u=2;_u<arguments.length;_u++)de[_u-2]=arguments[_u];return se.prototype[Ce].apply(we,de)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(ve,se){void 0===se&&(se=ve.length);for(var fe=se-this.blockSize,we=this.B,Ce=this.h,Ve=0;Ve<se;){if(0==Ce)for(;Ve<=fe;)u(this,ve,Ve),Ve+=this.blockSize;if("string"==typeof ve){for(;Ve<se;)if(we[Ce++]=ve.charCodeAt(Ve++),Ce==this.blockSize){u(this,we),Ce=0;break}}else for(;Ve<se;)if(we[Ce++]=ve[Ve++],Ce==this.blockSize){u(this,we),Ce=0;break}}this.h=Ce,this.o+=se},s.prototype.v=function(){var ve=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ve[0]=128;for(var se=1;se<ve.length-8;++se)ve[se]=0;var fe=8*this.o;for(se=ve.length-8;se<ve.length;++se)ve[se]=255&fe,fe/=256;for(this.u(ve),ve=Array(16),se=fe=0;4>se;++se)for(var we=0;32>we;we+=8)ve[fe++]=this.g[se]>>>we&255;return ve};var w={};function S(ve){return-128<=ve&&128>ve?function d(ve,se){var fe=w;return Object.prototype.hasOwnProperty.call(fe,ve)?fe[ve]:fe[ve]=se(ve)}(ve,function(se){return new g([0|se],0>se?-1:0)}):new g([0|ve],0>ve?-1:0)}function O(ve){if(isNaN(ve)||!isFinite(ve))return q;if(0>ve)return ft(O(-ve));for(var se=[],fe=1,we=0;ve>=fe;we++)se[we]=ve/fe|0,fe*=4294967296;return new g(se,0)}var q=S(0),ce=S(1),xe=S(16777216);function rt(ve){if(0!=ve.h)return!1;for(var se=0;se<ve.g.length;se++)if(0!=ve.g[se])return!1;return!0}function Et(ve){return-1==ve.h}function ft(ve){for(var se=ve.g.length,fe=[],we=0;we<se;we++)fe[we]=~ve.g[we];return new g(fe,~ve.h).add(ce)}function Ut(ve,se){return ve.add(ft(se))}function Wt(ve,se){for(;(65535&ve[se])!=ve[se];)ve[se+1]+=ve[se]>>>16,ve[se]&=65535,se++}function Bt(ve,se){this.g=ve,this.h=se}function nn(ve,se){if(rt(se))throw Error("division by zero");if(rt(ve))return new Bt(q,q);if(Et(ve))return se=nn(ft(ve),se),new Bt(ft(se.g),ft(se.h));if(Et(se))return se=nn(ve,ft(se)),new Bt(ft(se.g),se.h);if(30<ve.g.length){if(Et(ve)||Et(se))throw Error("slowDivide_ only works with positive integers.");for(var fe=ce,we=se;0>=we.l(ve);)fe=Vn(fe),we=Vn(we);var Ce=Pn(fe,1),Ve=Pn(we,1);for(we=Pn(we,2),fe=Pn(fe,2);!rt(we);){var de=Ve.add(we);0>=de.l(ve)&&(Ce=Ce.add(fe),Ve=de),we=Pn(we,1),fe=Pn(fe,1)}return se=Ut(ve,Ce.j(se)),new Bt(Ce,se)}for(Ce=q;0<=ve.l(se);){for(fe=Math.max(1,Math.floor(ve.m()/se.m())),we=48>=(we=Math.ceil(Math.log(fe)/Math.LN2))?1:Math.pow(2,we-48),de=(Ve=O(fe)).j(se);Et(de)||0<de.l(ve);)de=(Ve=O(fe-=we)).j(se);rt(Ve)&&(Ve=ce),Ce=Ce.add(Ve),ve=Ut(ve,de)}return new Bt(Ce,ve)}function Vn(ve){for(var se=ve.g.length+1,fe=[],we=0;we<se;we++)fe[we]=ve.i(we)<<1|ve.i(we-1)>>>31;return new g(fe,ve.h)}function Pn(ve,se){var fe=se>>5;se%=32;for(var we=ve.g.length-fe,Ce=[],Ve=0;Ve<we;Ve++)Ce[Ve]=0<se?ve.i(Ve+fe)>>>se|ve.i(Ve+fe+1)<<32-se:ve.i(Ve+fe);return new g(Ce,ve.h)}(a=g.prototype).m=function(){if(Et(this))return-ft(this).m();for(var ve=0,se=1,fe=0;fe<this.g.length;fe++){var we=this.i(fe);ve+=(0<=we?we:4294967296+we)*se,se*=4294967296}return ve},a.toString=function(ve){if(2>(ve=ve||10)||36<ve)throw Error("radix out of range: "+ve);if(rt(this))return"0";if(Et(this))return"-"+ft(this).toString(ve);for(var se=O(Math.pow(ve,6)),fe=this,we="";;){var Ce=nn(fe,se).g,Ve=((0<(fe=Ut(fe,Ce.j(se))).g.length?fe.g[0]:fe.h)>>>0).toString(ve);if(rt(fe=Ce))return Ve+we;for(;6>Ve.length;)Ve="0"+Ve;we=Ve+we}},a.i=function(ve){return 0>ve?0:ve<this.g.length?this.g[ve]:this.h},a.l=function(ve){return Et(ve=Ut(this,ve))?-1:rt(ve)?0:1},a.abs=function(){return Et(this)?ft(this):this},a.add=function(ve){for(var se=Math.max(this.g.length,ve.g.length),fe=[],we=0,Ce=0;Ce<=se;Ce++){var Ve=we+(65535&this.i(Ce))+(65535&ve.i(Ce)),de=(Ve>>>16)+(this.i(Ce)>>>16)+(ve.i(Ce)>>>16);we=de>>>16,fe[Ce]=(de&=65535)<<16|(Ve&=65535)}return new g(fe,-2147483648&fe[fe.length-1]?-1:0)},a.j=function(ve){if(rt(this)||rt(ve))return q;if(Et(this))return Et(ve)?ft(this).j(ft(ve)):ft(ft(this).j(ve));if(Et(ve))return ft(this.j(ft(ve)));if(0>this.l(xe)&&0>ve.l(xe))return O(this.m()*ve.m());for(var se=this.g.length+ve.g.length,fe=[],we=0;we<2*se;we++)fe[we]=0;for(we=0;we<this.g.length;we++)for(var Ce=0;Ce<ve.g.length;Ce++){var Ve=this.i(we)>>>16,de=65535&this.i(we),_u=ve.i(Ce)>>>16,Hd=65535&ve.i(Ce);fe[2*we+2*Ce]+=de*Hd,Wt(fe,2*we+2*Ce),fe[2*we+2*Ce+1]+=Ve*Hd,Wt(fe,2*we+2*Ce+1),fe[2*we+2*Ce+1]+=de*_u,Wt(fe,2*we+2*Ce+1),fe[2*we+2*Ce+2]+=Ve*_u,Wt(fe,2*we+2*Ce+2)}for(we=0;we<se;we++)fe[we]=fe[2*we+1]<<16|fe[2*we];for(we=se;we<2*se;we++)fe[we]=0;return new g(fe,0)},a.A=function(ve){return nn(this,ve).h},a.and=function(ve){for(var se=Math.max(this.g.length,ve.g.length),fe=[],we=0;we<se;we++)fe[we]=this.i(we)&ve.i(we);return new g(fe,this.h&ve.h)},a.or=function(ve){for(var se=Math.max(this.g.length,ve.g.length),fe=[],we=0;we<se;we++)fe[we]=this.i(we)|ve.i(we);return new g(fe,this.h|ve.h)},a.xor=function(ve){for(var se=Math.max(this.g.length,ve.g.length),fe=[],we=0;we<se;we++)fe[we]=this.i(we)^ve.i(we);return new g(fe,this.h^ve.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,He=pt.Md5=s,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=O,g.fromString=function H(ve,se){if(0==ve.length)throw Error("number format error: empty string");if(2>(se=se||10)||36<se)throw Error("radix out of range: "+se);if("-"==ve.charAt(0))return ft(H(ve.substring(1),se));if(0<=ve.indexOf("-"))throw Error('number format error: interior "-" character');for(var fe=O(Math.pow(se,8)),we=q,Ce=0;Ce<ve.length;Ce+=8){var Ve=Math.min(8,ve.length-Ce),de=parseInt(ve.substring(Ce,Ce+Ve),se);8>Ve?(Ve=O(Math.pow(se,Ve)),we=we.j(Ve).add(O(de))):we=(we=we.j(fe)).add(O(de))}return we},St=pt.Integer=g}).apply(typeof Xe<"u"?Xe:typeof self<"u"?self:typeof window<"u"?window:{});var Xt,xn,Mt,Rt,ue,pe,be,Ae,Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,R,L){return p==Array.prototype||p==Object.prototype||(p[R]=L.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ht&&Ht];for(var R=0;R<p.length;++R){var L=p[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}(this);!function u(p,R){if(R)e:{var L=s;p=p.split(".");for(var W=0;W<p.length-1;W++){var Pe=p[W];if(!(Pe in L))break e;L=L[Pe]}(R=R(W=L[p=p[p.length-1]]))!=W&&null!=R&&e(L,p,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(p){return p||function(){return function d(p,R){p instanceof String&&(p+="");var L=0,W=!1,Pe={next:function(){if(!W&&L<p.length){var Ge=L++;return{value:R(Ge,p[Ge]),done:!1}}return W=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}(this,function(R,L){return L})}});var g=g||{},w=this||self;function S(p){var R=typeof p;return"array"==(R="object"!=R?R:p?Array.isArray(p)?"array":R:"null")||"object"==R&&"number"==typeof p.length}function O(p){var R=typeof p;return"object"==R&&null!=p||"function"==R}function H(p,R,L){return p.call.apply(p.bind,arguments)}function q(p,R,L){if(!p)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,W),p.apply(R,Pe)}}return function(){return p.apply(R,arguments)}}function ce(p,R,L){return(ce=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?H:q).apply(null,arguments)}function xe(p,R){var L=Array.prototype.slice.call(arguments,1);return function(){var W=L.slice();return W.push.apply(W,arguments),p.apply(this,W)}}function rt(p,R){function L(){}L.prototype=R.prototype,p.aa=R.prototype,p.prototype=new L,p.prototype.constructor=p,p.Qb=function(W,Pe,Ge){for(var bt=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)bt[yr-2]=arguments[yr];return R.prototype[Pe].apply(W,bt)}}function Et(p){const R=p.length;if(0<R){const L=Array(R);for(let W=0;W<R;W++)L[W]=p[W];return L}return[]}function ft(p,R){for(let L=1;L<arguments.length;L++){const W=arguments[L];if(S(W)){const Pe=p.length||0,Ge=W.length||0;p.length=Pe+Ge;for(let bt=0;bt<Ge;bt++)p[Pe+bt]=W[bt]}else p.push(W)}}function Wt(p){return/^[\s\xa0]*$/.test(p)}function Bt(){var p=w.navigator;return p&&(p=p.userAgent)?p:""}function nn(p){return nn[" "](p),p}nn[" "]=function(){};var Vn=!(-1==Bt().indexOf("Gecko")||-1!=Bt().toLowerCase().indexOf("webkit")&&-1==Bt().indexOf("Edge")||-1!=Bt().indexOf("Trident")||-1!=Bt().indexOf("MSIE")||-1!=Bt().indexOf("Edge"));function Pn(p,R,L){for(const W in p)R.call(L,p[W],W,p)}function se(p){const R={};for(const L in p)R[L]=p[L];return R}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(p,R){let L,W;for(let Pe=1;Pe<arguments.length;Pe++){for(L in W=arguments[Pe],W)p[L]=W[L];for(let Ge=0;Ge<fe.length;Ge++)L=fe[Ge],Object.prototype.hasOwnProperty.call(W,L)&&(p[L]=W[L])}}function Ce(p){var R=1;p=p.split(":");const L=[];for(;0<R&&p.length;)L.push(p.shift()),R--;return p.length&&L.push(p.join(":")),L}function Ve(p){w.setTimeout(()=>{throw p},0)}function de(){var p=xp;let R=null;return p.g&&(R=p.g,p.g=p.g.next,p.g||(p.h=null),R.next=null),R}var Hd=new class Ut{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new Sy,p=>p.reset());class Sy{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let rf,Np=!1,xp=new class _u{constructor(){this.h=this.g=null}add(R,L){const W=Hd.get();W.set(R,L),this.h?this.h.next=W:this.g=W,this.h=W}},Sm=()=>{const p=w.Promise.resolve(void 0);rf=()=>{p.then(EE)}};var EE=()=>{for(var p;p=de();){try{p.h.call(p.g)}catch(L){Ve(L)}var R=Hd;R.j(p),100>R.h&&(R.h++,p.next=R.g,R.g=p)}Np=!1};function Xo(){this.s=this.s,this.C=this.C}function cs(p,R){this.type=p,this.g=this.target=R,this.defaultPrevented=!1}Xo.prototype.s=!1,Xo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},cs.prototype.h=function(){this.defaultPrevented=!0};var sI=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var p=!1,R=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const L=()=>{};w.addEventListener("test",L,R),w.removeEventListener("test",L,R)}catch{}return p}();function Tl(p,R){if(cs.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var L=this.type=p.type,W=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=R,R=p.relatedTarget){if(Vn){e:{try{nn(R.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(R=null)}}else"mouseover"==L?R=p.fromElement:"mouseout"==L&&(R=p.toElement);this.relatedTarget=R,W?(this.clientX=void 0!==W.clientX?W.clientX:W.pageX,this.clientY=void 0!==W.clientY?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:oI[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Tl.aa.h.call(this)}}rt(Tl,cs);var oI={2:"touch",3:"pen",4:"mouse"};Tl.prototype.h=function(){Tl.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),sf=0;function ls(p,R,L,W,Pe){this.listener=p,this.proxy=null,this.src=R,this.type=L,this.capture=!!W,this.ha=Pe,this.key=++sf,this.da=this.fa=!1}function Aa(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function wl(p){this.src=p,this.g={},this.h=0}function Ls(p,R){var L=R.type;if(L in p.g){var Ge,W=p.g[L],Pe=Array.prototype.indexOf.call(W,R,void 0);(Ge=0<=Pe)&&Array.prototype.splice.call(W,Pe,1),Ge&&(Aa(R),0==p.g[L].length&&(delete p.g[L],p.h--))}}function af(p,R,L,W){for(var Pe=0;Pe<p.length;++Pe){var Ge=p[Pe];if(!Ge.da&&Ge.listener==R&&Ge.capture==!!L&&Ge.ha==W)return Pe}return-1}wl.prototype.add=function(p,R,L,W,Pe){var Ge=p.toString();(p=this.g[Ge])||(p=this.g[Ge]=[],this.h++);var bt=af(p,R,W,Pe);return-1<bt?(R=p[bt],L||(R.fa=!1)):((R=new ls(R,this.src,Ge,!!W,Pe)).fa=L,p.push(R)),R};var pc="closure_lm_"+(1e6*Math.random()|0),gc={};function Al(p,R,L,W,Pe){if(W&&W.once)return Cl(p,R,L,W,Pe);if(Array.isArray(R)){for(var Ge=0;Ge<R.length;Ge++)Al(p,R[Ge],L,W,Pe);return null}return L=Lp(L),p&&p[ks]?p.K(R,L,O(W)?!!W.capture:!!W,Pe):Dl(p,R,L,!1,W,Pe)}function Dl(p,R,L,W,Pe,Ge){if(!R)throw Error("Invalid event type");var bt=O(Pe)?!!Pe.capture:!!Pe,yr=Op(p);if(yr||(p[pc]=yr=new wl(p)),(L=yr.add(R,L,W,bt,Ge)).proxy)return L;if(W=function zd(){const R=Ry;return function p(L){return R.call(p.src,p.listener,L)}}(),L.proxy=W,W.src=p,W.listener=L,p.addEventListener)sI||(Pe=bt),void 0===Pe&&(Pe=!1),p.addEventListener(R.toString(),W,Pe);else if(p.attachEvent)p.attachEvent(Sl(R.toString()),W);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(W)}return L}function Cl(p,R,L,W,Pe){if(Array.isArray(R)){for(var Ge=0;Ge<R.length;Ge++)Cl(p,R[Ge],L,W,Pe);return null}return L=Lp(L),p&&p[ks]?p.L(R,L,O(W)?!!W.capture:!!W,Pe):Dl(p,R,L,!0,W,Pe)}function bl(p,R,L,W,Pe){if(Array.isArray(R))for(var Ge=0;Ge<R.length;Ge++)bl(p,R[Ge],L,W,Pe);else W=O(W)?!!W.capture:!!W,L=Lp(L),p&&p[ks]?(p=p.i,(R=String(R).toString())in p.g&&-1<(L=af(Ge=p.g[R],L,W,Pe))&&(Aa(Ge[L]),Array.prototype.splice.call(Ge,L,1),0==Ge.length&&(delete p.g[R],p.h--))):p&&(p=Op(p))&&(R=p.g[R.toString()],p=-1,R&&(p=af(R,L,W,Pe)),(L=-1<p?R[p]:null)&&mc(L))}function mc(p){if("number"!=typeof p&&p&&!p.da){var R=p.src;if(R&&R[ks])Ls(R.i,p);else{var L=p.type,W=p.proxy;R.removeEventListener?R.removeEventListener(L,W,p.capture):R.detachEvent?R.detachEvent(Sl(L),W):R.addListener&&R.removeListener&&R.removeListener(W),(L=Op(R))?(Ls(L,p),0==L.h&&(L.src=null,R[pc]=null)):Aa(p)}}}function Sl(p){return p in gc?gc[p]:gc[p]="on"+p}function Ry(p,R){if(p.da)p=!0;else{R=new Tl(R,this);var L=p.listener,W=p.ha||p.src;p.fa&&mc(p),p=L.call(W,R)}return p}function Op(p){return(p=p[pc])instanceof wl?p:null}var kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lp(p){return"function"==typeof p?p:(p[kp]||(p[kp]=function(R){return p.handleEvent(R)}),p[kp])}function Ki(){Xo.call(this),this.i=new wl(this),this.M=this,this.F=null}function ds(p,R){var L,W=p.F;if(W)for(L=[];W;W=W.F)L.push(W);if(p=p.M,W=R.type||R,"string"==typeof R)R=new cs(R,p);else if(R instanceof cs)R.target=R.target||p;else{var Pe=R;we(R=new cs(W,p),Pe)}if(Pe=!0,L)for(var Ge=L.length-1;0<=Ge;Ge--){var bt=R.g=L[Ge];Pe=uf(bt,W,!0,R)&&Pe}if(Pe=uf(bt=R.g=p,W,!0,R)&&Pe,Pe=uf(bt,W,!1,R)&&Pe,L)for(Ge=0;Ge<L.length;Ge++)Pe=uf(bt=R.g=L[Ge],W,!1,R)&&Pe}function uf(p,R,L,W){if(!(R=p.i.g[String(R)]))return!0;R=R.concat();for(var Pe=!0,Ge=0;Ge<R.length;++Ge){var bt=R[Ge];if(bt&&!bt.da&&bt.capture==L){var yr=bt.listener,Qi=bt.ha||bt.src;bt.fa&&Ls(p.i,bt),Pe=!1!==yr.call(Qi,W)&&Pe}}return Pe&&!W.defaultPrevented}function Rm(p,R,L){if("function"==typeof p)L&&(p=ce(p,L));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=ce(p.handleEvent,p)}return 2147483647<Number(R)?-1:w.setTimeout(p,R||0)}function Pm(p){p.g=Rm(()=>{p.g=null,p.i&&(p.i=!1,Pm(p))},p.l);const R=p.h;p.h=null,p.m.apply(null,R)}rt(Ki,Xo),Ki.prototype[ks]=!0,Ki.prototype.removeEventListener=function(p,R,L,W){bl(this,p,R,L,W)},Ki.prototype.N=function(){if(Ki.aa.N.call(this),this.i){var R,p=this.i;for(R in p.g){for(var L=p.g[R],W=0;W<L.length;W++)Aa(L[W]);delete p.g[R],p.h--}}this.F=null},Ki.prototype.K=function(p,R,L,W){return this.i.add(String(p),R,!1,L,W)},Ki.prototype.L=function(p,R,L,W){return this.i.add(String(p),R,!0,L,W)};class Mm extends Xo{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Pm(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cf(p){Xo.call(this),this.h=p,this.g={}}rt(cf,Xo);var aI=[];function uI(p){Pn(p.g,function(R,L){this.g.hasOwnProperty(L)&&mc(R)},p),p.g={}}cf.prototype.N=function(){cf.aa.N.call(this),uI(this)},cf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nm=w.JSON.stringify,cI=w.JSON.parse,TE=class{stringify(p){return w.JSON.stringify(p,void 0)}parse(p){return w.JSON.parse(p,void 0)}};function xm(){}function Py(){}xm.prototype.h=null;var lf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Om(){cs.call(this,"d")}function df(){cs.call(this,"c")}rt(Om,cs),rt(df,cs);var Jo={},Fp=null;function Rl(){return Fp=Fp||new Ki}function km(p){cs.call(this,Jo.La,p)}function yu(p){const R=Rl();ds(R,new km(R))}function Lm(p,R){cs.call(this,Jo.STAT_EVENT,p),this.stat=R}function Cs(p){const R=Rl();ds(R,new Lm(R,p))}function Gd(p,R){cs.call(this,Jo.Ma,p),this.size=R}function hf(p,R){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){p()},R)}function ff(){this.g=!0}function _c(p,R,L,W){p.info(function(){return"XMLHTTP TEXT ("+R+"): "+function Up(p,R){if(!p.g)return R;if(!R)return null;try{var L=JSON.parse(R);if(L)for(p=0;p<L.length;p++)if(Array.isArray(L[p])){var W=L[p];if(!(2>W.length)){var Pe=W[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var Ge=Pe[0];if("noop"!=Ge&&"stop"!=Ge&&"close"!=Ge)for(var bt=1;bt<Pe.length;bt++)Pe[bt]=""}}}return Nm(L)}catch{return R}}(p,L)+(W?" "+W:"")})}Jo.La="serverreachability",rt(km,cs),Jo.STAT_EVENT="statevent",rt(Lm,cs),Jo.Ma="timingevent",rt(Gd,cs),ff.prototype.xa=function(){this.g=!1},ff.prototype.info=function(){};var Vm,Fm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},My={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Wd(){}function yc(p,R,L,W){this.j=p,this.i=R,this.l=L,this.R=W||1,this.U=new cf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Um}function Um(){this.i=null,this.g="",this.h=!1}rt(Wd,xm),Wd.prototype.g=function(){return new XMLHttpRequest},Wd.prototype.i=function(){return{}},Vm=new Wd;var Ny={},Bm={};function Bp(p,R,L){p.L=1,p.v=mf(Zo(R)),p.m=L,p.P=!0,jm(p,null)}function jm(p,R){p.F=Date.now(),jp(p),p.A=Zo(p.v);var L=p.A,W=p.R;Array.isArray(W)||(W=[String(W)]),e_(L.i,"t",W),p.C=0,L=p.j.J,p.h=new Um,p.g=Xy(p.j,L?R:null,!p.m),0<p.O&&(p.M=new Mm(ce(p.Y,p,p.g),p.O)),R=p.U,L=p.g,W=p.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(aI[0]=Pe.toString()),Pe=aI);for(var Ge=0;Ge<Pe.length;Ge++){var bt=Al(L,Pe[Ge],W||R.handleEvent,!1,R.h||R);if(!bt)break;R.g[bt.key]=bt}R=p.H?se(p.H):{},p.m?(p.u||(p.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,R)):(p.u="GET",p.g.ea(p.A,p.u,null,R)),yu(),function dI(p,R,L,W,Pe,Ge){p.info(function(){if(p.g)if(Ge)for(var bt="",yr=Ge.split("&"),Qi=0;Qi<yr.length;Qi++){var ar=yr[Qi].split("=");if(1<ar.length){var Si=ar[0];ar=ar[1];var Ri=Si.split("_");bt=2<=Ri.length&&"type"==Ri[1]?bt+(Si+"=")+ar+"&":bt+(Si+"=redacted&")}}else bt=null;else bt=Ge;return"XMLHTTP REQ ("+W+") [attempt "+Pe+"]: "+R+"\n"+L+"\n"+bt})}(p.i,p.u,p.A,p.l,p.R,p.m)}function $m(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function fI(p,R){var L=p.C,W=R.indexOf("\n",L);return-1==W?Bm:(L=Number(R.substring(L,W)),isNaN(L)?Ny:(W+=1)+L>R.length?Bm:(R=R.slice(W,W+L),p.C=W+L,R))}function jp(p){p.S=Date.now()+p.I,xy(p,p.I)}function xy(p,R){if(null!=p.B)throw Error("WatchDog timer not null");p.B=hf(ce(p.ba,p),R)}function Hm(p){p.B&&(w.clearTimeout(p.B),p.B=null)}function Pl(p){0==p.j.G||p.J||wo(p.j,p)}function vu(p){Hm(p);var R=p.M;R&&"function"==typeof R.ma&&R.ma(),p.M=null,uI(p.U),p.g&&(R=p.g,p.g=null,R.abort(),R.ma())}function zm(p,R){try{var L=p.j;if(0!=L.G&&(L.g==p||Wm(L.h,p)))if(!p.K&&Wm(L.h,p)&&3==L.G){try{var W=L.Da.g.parse(R)}catch{W=null}if(Array.isArray(W)&&3==W.length){var Pe=W;if(0==Pe[0]){e:if(!L.u){if(L.g){if(!(L.g.F+3e3<p.F))break e;Fs(L),qp(L)}i_(L),Cs(18)}}else L.za=Pe[1],0<L.za-L.T&&37500>Pe[2]&&L.F&&0==L.v&&!L.C&&(L.C=hf(ce(L.Za,L),6e3));if(1>=Gm(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Ic(L,11)}else if((p.K||L.g==p)&&Fs(L),!Wt(R))for(Pe=L.Da.g.parse(R),R=0;R<Pe.length;R++){let ar=Pe[R];if(L.T=ar[0],ar=ar[1],2==L.G)if("c"==ar[0]){L.K=ar[1],L.ia=ar[2];const Si=ar[3];null!=Si&&(L.la=Si,L.j.info("VER="+L.la));const Ri=ar[4];null!=Ri&&(L.Aa=Ri,L.j.info("SVER="+L.Aa));const kl=ar[5];null!=kl&&"number"==typeof kl&&0<kl&&(L.L=W=1.5*kl,L.j.info("backChannelRequestTimeoutMs_="+W)),W=L;const Ao=p.g;if(Ao){const yf=Ao.g?Ao.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yf){var Ge=W.h;Ge.g||-1==yf.indexOf("spdy")&&-1==yf.indexOf("quic")&&-1==yf.indexOf("h2")||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(Km(Ge,Ge.h),Ge.h=null))}if(W.D){const Xp=Ao.g?Ao.g.getResponseHeader("X-HTTP-Session-Id"):null;Xp&&(W.ya=Xp,xr(W.I,W.D,Xp))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-p.F,L.j.info("Handshake RTT: "+L.R+"ms"));var bt=p;if((W=L).qa=Yy(W,W.J?W.ia:null,W.W),bt.K){Oy(W.h,bt);var yr=bt,Qi=W.L;Qi&&(yr.I=Qi),yr.B&&(Hm(yr),jp(yr)),W.g=bt}else ea(W);0<L.i.length&&Qp(L)}else"stop"!=ar[0]&&"close"!=ar[0]||Ic(L,7);else 3==L.G&&("stop"==ar[0]||"close"==ar[0]?"stop"==ar[0]?Ic(L,7):n_(L):"noop"!=ar[0]&&L.l&&L.l.ta(ar),L.v=0)}yu()}catch{}}function pf(p){this.l=p||10,p=w.PerformanceNavigationTiming?0<(p=w.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hp(p){return!!p.h||!!p.g&&p.g.size>=p.j}function Gm(p){return p.h?1:p.g?p.g.size:0}function Wm(p,R){return p.h?p.h==R:!!p.g&&p.g.has(R)}function Km(p,R){p.g?p.g.add(R):p.h=R}function Oy(p,R){p.h&&p.h==R?p.h=null:p.g&&p.g.has(R)&&p.g.delete(R)}function zp(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let R=p.i;for(const L of p.g.values())R=R.concat(L.D);return R}return Et(p.i)}function Qm(p,R){if(p.forEach&&"function"==typeof p.forEach)p.forEach(R,void 0);else if(S(p)||"string"==typeof p)Array.prototype.forEach.call(p,R,void 0);else for(var L=function ky(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(S(p)||"string"==typeof p){var R=[];p=p.length;for(var L=0;L<p;L++)R.push(L);return R}R=[],L=0;for(const W in p)R[L++]=W;return R}}}(p),W=function qm(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(S(p)){for(var R=[],L=p.length,W=0;W<L;W++)R.push(p[W]);return R}for(W in R=[],L=0,p)R[L++]=p[W];return R}(p),Pe=W.length,Ge=0;Ge<Pe;Ge++)R.call(void 0,W[Ge],L&&L[Ge],p)}yc.prototype.ca=function(p){p=p.target;const R=this.M;R&&3==Ca(p)?R.j():this.Y(p)},yc.prototype.Y=function(p){try{if(p==this.g)e:{const Ri=Ca(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>Ri)&&(3!=Ri||this.g&&(this.h.h||this.g.oa()||Wy(this.g)))){this.J||4!=Ri||7==R||yu(),Hm(this);var L=this.g.Z();this.X=L;t:if($m(this)){var W=Wy(this.g);p="";var Pe=W.length,Ge=4==Ca(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vu(this),Pl(this);var bt="";break t}this.h.i=new w.TextDecoder}for(R=0;R<Pe;R++)this.h.h=!0,p+=this.h.i.decode(W[R],{stream:!(Ge&&R==Pe-1)});W.length=0,this.h.g+=p,this.C=0,bt=this.h.g}else bt=this.g.oa();if(this.o=200==L,function hI(p,R,L,W,Pe,Ge,bt){p.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+Pe+"]: "+R+"\n"+L+"\n"+Ge+" "+bt})}(this.i,this.u,this.A,this.l,this.R,Ri,L),this.o){if(this.T&&!this.K){t:{if(this.g){var yr,Qi=this.g;if((yr=Qi.g?Qi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wt(yr)){var ar=yr;break t}}ar=null}if(!(L=ar)){this.o=!1,this.s=3,Cs(12),vu(this),Pl(this);break e}_c(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zm(this,L)}if(this.P){let Ao;for(L=!0;!this.J&&this.C<bt.length;){if(Ao=fI(this,bt),Ao==Bm){4==Ri&&(this.s=4,Cs(14),L=!1),_c(this.i,this.l,null,"[Incomplete Response]");break}if(Ao==Ny){this.s=4,Cs(15),_c(this.i,this.l,bt,"[Invalid Chunk]"),L=!1;break}_c(this.i,this.l,Ao,null),zm(this,Ao)}if($m(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ri||0!=bt.length||this.h.h||(this.s=1,Cs(16),L=!1),this.o=this.o&&L,L){if(0<bt.length&&!this.W){this.W=!0;var Si=this.j;Si.g==this&&Si.ba&&!Si.M&&(Si.j.info("Great, no buffering proxy detected. Bytes received: "+bt.length),s_(Si),Si.M=!0,Cs(11))}}else _c(this.i,this.l,bt,"[Invalid Chunked Response]"),vu(this),Pl(this)}else _c(this.i,this.l,bt,null),zm(this,bt);4==Ri&&vu(this),this.o&&!this.J&&(4==Ri?wo(this.j,this):(this.o=!1,jp(this)))}else(function Ky(p){const R={};p=(p.g&&2<=Ca(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let W=0;W<p.length;W++){if(Wt(p[W]))continue;var L=Ce(p[W]);const Pe=L[0];if("string"!=typeof(L=L[1]))continue;L=L.trim();const Ge=R[Pe]||[];R[Pe]=Ge,Ge.push(L)}!function ve(p,R){for(const L in p)R.call(void 0,p[L],L,p)}(R,function(W){return W.join(", ")})})(this.g),400==L&&0<bt.indexOf("Unknown SID")?(this.s=3,Cs(12)):(this.s=0,Cs(13)),vu(this),Pl(this)}}}catch{}},yc.prototype.cancel=function(){this.J=!0,vu(this)},yc.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function Vp(p,R){p.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&(yu(),Cs(17)),vu(this),this.s=2,Pl(this)):xy(this,this.S-p)},pf.prototype.cancel=function(){if(this.i=zp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Ly=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vc(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof vc){this.h=p.h,gf(this,p.j),this.o=p.o,this.g=p.g,Kd(this,p.s),this.l=p.l;var R=p.i,L=new Yd;L.i=R.i,R.g&&(L.g=new Map(R.g),L.h=R.h),Ym(this,L),this.m=p.m}else p&&(R=String(p).match(Ly))?(this.h=!1,gf(this,R[1]||"",!0),this.o=qd(R[2]||""),this.g=qd(R[3]||"",!0),Kd(this,R[4]),this.l=qd(R[5]||"",!0),Ym(this,R[6]||"",!0),this.m=qd(R[7]||"")):(this.h=!1,this.i=new Yd(null,this.h))}function Zo(p){return new vc(p)}function gf(p,R,L){p.j=L?qd(R,!0):R,p.j&&(p.j=p.j.replace(/:$/,""))}function Kd(p,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);p.s=R}else p.s=null}function Ym(p,R,L){R instanceof Yd?(p.i=R,function By(p,R){R&&!p.j&&(Iu(p),p.i=null,p.g.forEach(function(L,W){var Pe=W.toLowerCase();W!=Pe&&(Jm(this,W),e_(this,Pe,L))},p)),p.j=R}(p.i,p.h)):(L||(R=Qd(R,Uy)),p.i=new Yd(R,p.h))}function xr(p,R,L){p.i.set(R,L)}function mf(p){return xr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function qd(p,R){return p?R?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Qd(p,R,L){return"string"==typeof p?(p=encodeURI(p).replace(R,Fy),L&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Fy(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}vc.prototype.toString=function(){var p=[],R=this.j;R&&p.push(Qd(R,Vy,!0),":");var L=this.g;return(L||"file"==R)&&(p.push("//"),(R=this.o)&&p.push(Qd(R,Vy,!0),"@"),p.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(L=this.s)&&p.push(":",String(L))),(L=this.l)&&(this.g&&"/"!=L.charAt(0)&&p.push("/"),p.push(Qd(L,"/"==L.charAt(0)?mI:gI,!0))),(L=this.i.toString())&&p.push("?",L),(L=this.m)&&p.push("#",Qd(L,Xm)),p.join("")};var p,Vy=/[#\/\?@]/g,gI=/[#\?:]/g,mI=/[#\?]/g,Uy=/[#\?@]/g,Xm=/#/g;function Yd(p,R){this.h=this.g=null,this.i=p||null,this.j=!!R}function Iu(p){p.g||(p.g=new Map,p.h=0,p.i&&function pI(p,R){if(p){p=p.split("&");for(var L=0;L<p.length;L++){var W=p[L].indexOf("="),Pe=null;if(0<=W){var Ge=p[L].substring(0,W);Pe=p[L].substring(W+1)}else Ge=p[L];R(Ge,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}(p.i,function(R,L){p.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}function Jm(p,R){Iu(p),R=Ml(p,R),p.g.has(R)&&(p.i=null,p.h-=p.g.get(R).length,p.g.delete(R))}function Zm(p,R){return Iu(p),R=Ml(p,R),p.g.has(R)}function e_(p,R,L){Jm(p,R),0<L.length&&(p.i=null,p.g.set(Ml(p,R),Et(L)),p.h+=L.length)}function Ml(p,R){return R=String(R),p.j&&(R=R.toLowerCase()),R}function bs(p,R,L,W,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),W(L)}catch{}}function _I(){this.g=new TE}function yI(p,R,L){const W=L||"";try{Qm(p,function(Pe,Ge){let bt=Pe;O(Pe)&&(bt=Nm(Pe)),R.push(W+Ge+"="+encodeURIComponent(bt))})}catch(Pe){throw R.push(W+"type="+encodeURIComponent("_badmap")),Pe}}function Nl(p){this.l=p.Ub||null,this.j=p.eb||!1}function Da(p,R){Ki.call(this),this.D=p,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Wp(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function _f(p){p.readyState=4,p.l=null,p.j=null,p.v=null,xl(p)}function xl(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function vI(p){let R="";return Pn(p,function(L,W){R+=W,R+=":",R+=L,R+="\r\n"}),R}function $y(p,R,L){e:{for(W in L){var W=!1;break e}W=!0}W||(L=vI(L),"string"==typeof p?null!=L&&encodeURIComponent(String(L)):xr(p,R,L))}function Xr(p){Ki.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=Yd.prototype).add=function(p,R){Iu(this),this.i=null,p=Ml(this,p);var L=this.g.get(p);return L||this.g.set(p,L=[]),L.push(R),this.h+=1,this},a.forEach=function(p,R){Iu(this),this.g.forEach(function(L,W){L.forEach(function(Pe){p.call(R,Pe,W,this)},this)},this)},a.na=function(){Iu(this);const p=Array.from(this.g.values()),R=Array.from(this.g.keys()),L=[];for(let W=0;W<R.length;W++){const Pe=p[W];for(let Ge=0;Ge<Pe.length;Ge++)L.push(R[W])}return L},a.V=function(p){Iu(this);let R=[];if("string"==typeof p)Zm(this,p)&&(R=R.concat(this.g.get(Ml(this,p))));else{p=Array.from(this.g.values());for(let L=0;L<p.length;L++)R=R.concat(p[L])}return R},a.set=function(p,R){return Iu(this),this.i=null,Zm(this,p=Ml(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[R]),this.h+=1,this},a.get=function(p,R){return p&&0<(p=this.V(p)).length?String(p[0]):R},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],R=Array.from(this.g.keys());for(var L=0;L<R.length;L++){var W=R[L];const Ge=encodeURIComponent(String(W)),bt=this.V(W);for(W=0;W<bt.length;W++){var Pe=Ge;""!==bt[W]&&(Pe+="="+encodeURIComponent(String(bt[W]))),p.push(Pe)}}return this.i=p.join("&")},rt(Nl,xm),Nl.prototype.g=function(){return new Da(this.l,this.j)},Nl.prototype.i=(p={},function(){return p}),rt(Da,Ki),(a=Da.prototype).open=function(p,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=R,this.readyState=1,xl(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(R.body=p),(this.D||w).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_f(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wp(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var R=p.value?p.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!p.done}))&&(this.response=this.responseText+=R)}p.done?_f(this):xl(this),3==this.readyState&&Wp(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,_f(this))},a.Qa=function(p){this.g&&(this.response=p,_f(this))},a.ga=function(){this.g&&_f(this)},a.setRequestHeader=function(p,R){this.u.append(p,R)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],R=this.h.entries();for(var L=R.next();!L.done;)p.push((L=L.value)[0]+": "+L[1]),L=R.next();return p.join("\r\n")},Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),rt(Xr,Ki);var II=/^https?$/i,Hy=["POST","PUT"];function zy(p,R){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=R,p.m=5,hi(p),Kp(p)}function hi(p){p.A||(p.A=!0,ds(p,"complete"),ds(p,"error"))}function t_(p){if(p.h&&typeof g<"u"&&(!p.v[1]||4!=Ca(p)||2!=p.Z()))if(p.u&&4==Ca(p))Rm(p.Ea,0,p);else if(ds(p,"readystatechange"),4==Ca(p)){p.h=!1;try{const bt=p.Z();e:switch(bt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var W;if(W=0===bt){var Pe=String(p.D).match(Ly)[1]||null;!Pe&&w.self&&w.self.location&&(Pe=w.self.location.protocol.slice(0,-1)),W=!II.test(Pe?Pe.toLowerCase():"")}L=W}if(L)ds(p,"complete"),ds(p,"success");else{p.m=6;try{var Ge=2<Ca(p)?p.g.statusText:""}catch{Ge=""}p.l=Ge+" ["+p.Z()+"]",hi(p)}}finally{Kp(p)}}}function Kp(p,R){if(p.g){Gy(p);const L=p.g,W=p.v[0]?()=>{}:null;p.g=null,p.v=null,R||ds(p,"ready");try{L.onreadystatechange=W}catch{}}}function Gy(p){p.I&&(w.clearTimeout(p.I),p.I=null)}function Ca(p){return p.g?p.g.readyState:0}function Wy(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Xd(p,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[p]||R}function Ol(p){this.Aa=0,this.i=[],this.j=new ff,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xd("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xd("baseRetryDelayMs",5e3,p),this.cb=Xd("retryDelaySeedMs",1e4,p),this.Wa=Xd("forwardChannelMaxRetries",2,p),this.wa=Xd("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new pf(p&&p.concurrentRequestLimit),this.Da=new _I,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function n_(p){if(r_(p),3==p.G){var R=p.U++,L=Zo(p.I);if(xr(L,"SID",p.K),xr(L,"RID",R),xr(L,"TYPE","terminate"),Jd(p,L),(R=new yc(p,p.j,R)).L=2,R.v=mf(Zo(L)),L=!1,w.navigator&&w.navigator.sendBeacon)try{L=w.navigator.sendBeacon(R.v.toString(),"")}catch{}!L&&w.Image&&((new Image).src=R.v,L=!0),L||(R.g=Xy(R.j,null),R.g.ea(R.v)),R.F=Date.now(),jp(R)}Qy(p)}function qp(p){p.g&&(s_(p),p.g.cancel(),p.g=null)}function r_(p){qp(p),p.u&&(w.clearTimeout(p.u),p.u=null),Fs(p),p.h.cancel(),p.s&&("number"==typeof p.s&&w.clearTimeout(p.s),p.s=null)}function Qp(p){if(!Hp(p.h)&&!p.s){p.s=!0;var R=p.Ga;rf||Sm(),Np||(rf(),Np=!0),xp.add(R,p),p.B=0}}function EI(p,R){var L;L=R?R.l:p.U++;const W=Zo(p.I);xr(W,"SID",p.K),xr(W,"RID",L),xr(W,"AID",p.T),Jd(p,W),p.m&&p.o&&$y(W,p.m,p.o),L=new yc(p,p.j,L,p.B+1),null===p.m&&(L.H=p.o),R&&(p.i=R.D.concat(p.i)),R=Yp(p,L,1e3),L.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Km(p.h,L),Bp(L,W,R)}function Jd(p,R){p.H&&Pn(p.H,function(L,W){xr(R,W,L)}),p.l&&Qm({},function(L,W){xr(R,W,L)})}function Yp(p,R,L){L=Math.min(p.i.length,L);var W=p.l?ce(p.l.Na,p.l,p):null;e:{var Pe=p.i;let Ge=-1;for(;;){const bt=["count="+L];-1==Ge?0<L?(Ge=Pe[0].g,bt.push("ofs="+Ge)):Ge=0:bt.push("ofs="+Ge);let yr=!0;for(let Qi=0;Qi<L;Qi++){let ar=Pe[Qi].g;const Si=Pe[Qi].map;if(ar-=Ge,0>ar)Ge=Math.max(0,Pe[Qi].g-100),yr=!1;else try{yI(Si,bt,"req"+ar+"_")}catch{W&&W(Si)}}if(yr){W=bt.join("&");break e}}}return p=p.i.splice(0,L),R.D=p,W}function ea(p){if(!p.g&&!p.u){p.Y=1;var R=p.Fa;rf||Sm(),Np||(rf(),Np=!0),xp.add(R,p),p.v=0}}function i_(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=hf(ce(p.Fa,p),o_(p,p.v)),p.v++,0))}function s_(p){null!=p.A&&(w.clearTimeout(p.A),p.A=null)}function ta(p){p.g=new yc(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var R=Zo(p.qa);xr(R,"RID","rpc"),xr(R,"SID",p.K),xr(R,"AID",p.T),xr(R,"CI",p.F?"0":"1"),!p.F&&p.ja&&xr(R,"TO",p.ja),xr(R,"TYPE","xmlhttp"),Jd(p,R),p.m&&p.o&&$y(R,p.m,p.o),p.L&&(p.g.I=p.L);var L=p.g;p=p.ia,L.L=1,L.v=mf(Zo(R)),L.m=null,L.P=!0,jm(L,p)}function Fs(p){null!=p.C&&(w.clearTimeout(p.C),p.C=null)}function wo(p,R){var L=null;if(p.g==R){Fs(p),s_(p),p.g=null;var W=2}else{if(!Wm(p.h,R))return;L=R.D,Oy(p.h,R),W=1}if(0!=p.G)if(R.o)if(1==W){L=R.m?R.m.length:0,R=Date.now()-R.F;var Pe=p.B;ds(W=Rl(),new Gd(W,L)),Qp(p)}else ea(p);else if(3==(Pe=R.s)||0==Pe&&0<R.X||!(1==W&&function qy(p,R){return!(Gm(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=R.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=hf(ce(p.Ga,p,R),o_(p,p.B)),p.B++,0)))}(p,R)||2==W&&i_(p)))switch(L&&0<L.length&&(R=p.h,R.i=R.i.concat(L)),Pe){case 1:Ic(p,5);break;case 4:Ic(p,10);break;case 3:Ic(p,6);break;default:Ic(p,2)}}function o_(p,R){let L=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(L*=2),L*R}function Ic(p,R){if(p.j.info("Error code "+R),2==R){var L=ce(p.fb,p),W=p.Xa;const Pe=!W;W=new vc(W||"//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||gf(W,"https"),mf(W),Pe?function jy(p,R){const L=new ff;if(w.Image){const W=new Image;W.onload=xe(bs,L,"TestLoadImage: loaded",!0,R,W),W.onerror=xe(bs,L,"TestLoadImage: error",!1,R,W),W.onabort=xe(bs,L,"TestLoadImage: abort",!1,R,W),W.ontimeout=xe(bs,L,"TestLoadImage: timeout",!1,R,W),w.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=p}else R(!1)}(W.toString(),L):function Gp(p,R){new ff;const W=new AbortController,Pe=setTimeout(()=>{W.abort(),bs(0,0,!1,R)},1e4);fetch(p,{signal:W.signal}).then(Ge=>{clearTimeout(Pe),bs(0,0,!!Ge.ok,R)}).catch(()=>{clearTimeout(Pe),bs(0,0,!1,R)})}(W.toString(),L)}else Cs(2);p.G=0,p.l&&p.l.sa(R),Qy(p),r_(p)}function Qy(p){if(p.G=0,p.ka=[],p.l){const R=zp(p.h);(0!=R.length||0!=p.i.length)&&(ft(p.ka,R),ft(p.ka,p.i),p.h.i.length=0,Et(p.i),p.i.length=0),p.l.ra()}}function Yy(p,R,L){var W=L instanceof vc?Zo(L):new vc(L);if(""!=W.g)R&&(W.g=R+"."+W.g),Kd(W,W.s);else{var Pe=w.location;W=Pe.protocol,R=R?R+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var Ge=new vc(null);W&&gf(Ge,W),R&&(Ge.g=R),Pe&&Kd(Ge,Pe),L&&(Ge.l=L),W=Ge}return R=p.ya,(L=p.D)&&R&&xr(W,L,R),xr(W,"VER",p.la),Jd(p,W),W}function Xy(p,R,L){if(R&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new Xr(p.Ca&&!p.pa?new Nl({eb:L}):p.pa)).Ha(p.J),R}function Jy(){}function Zd(){}function qi(p,R){Ki.call(this),this.g=new Ol(R),this.l=p,this.h=R&&R.messageUrlParams||null,p=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(p?p["X-WebChannel-Content-Type"]=R.messageContentType:p={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(p?p["X-WebChannel-Client-Profile"]=R.va:p={"X-WebChannel-Client-Profile":R.va}),this.g.S=p,(p=R&&R.Sb)&&!Wt(p)&&(this.g.m=p),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Wt(R)&&(this.g.D=R,null!==(p=this.h)&&R in p&&R in(p=this.h)&&delete p[R]),this.j=new eh(this)}function Zy(p){Om.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var R=p.__sm__;if(R){e:{for(const L in R){p=L;break e}p=void 0}(this.i=p)&&(p=this.i,R=null!==R&&p in R?R[p]:void 0),this.data=R}else this.data=p}function a_(){df.call(this),this.status=1}function eh(p){this.g=p}(a=Xr.prototype).Ha=function(p){this.J=p},a.ea=function(p,R,L,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);R=R?R.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vm.g(),this.v=function lI(p){return p.h||(p.h=p.i())}(this.o?this.o:Vm),this.g.onreadystatechange=ce(this.Ea,this);try{this.B=!0,this.g.open(R,String(p),!0),this.B=!1}catch(Ge){return void zy(this,Ge)}if(p=L||"",L=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var Pe in W)L.set(Pe,W[Pe]);else{if("function"!=typeof W.keys||"function"!=typeof W.get)throw Error("Unknown input type for opt_headers: "+String(W));for(const Ge of W.keys())L.set(Ge,W.get(Ge))}W=Array.from(L.keys()).find(Ge=>"content-type"==Ge.toLowerCase()),Pe=w.FormData&&p instanceof w.FormData,!(0<=Array.prototype.indexOf.call(Hy,R,void 0))||W||Pe||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,bt]of L)this.g.setRequestHeader(Ge,bt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gy(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ge){zy(this,Ge)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,ds(this,"complete"),ds(this,"abort"),Kp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kp(this,!0)),Xr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?t_(this):this.bb())},a.bb=function(){t_(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Ca(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var R=this.g.responseText;return p&&0==R.indexOf(p)&&(R=R.substring(p.length)),cI(R)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Ol.prototype).la=8,a.G=1,a.connect=function(p,R,L,W){Cs(0),this.W=p,this.H=R||{},L&&void 0!==W&&(this.H.OSID=L,this.H.OAID=W),this.F=this.X,this.I=Yy(this,null,this.W),Qp(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Pe=new yc(this,this.j,p);let Ge=this.o;if(this.S&&(Ge?(Ge=se(Ge),we(Ge,this.S)):Ge=this.S),null!==this.m||this.O||(Pe.H=Ge,Ge=null),this.P)e:{for(var R=0,L=0;L<this.i.length;L++){var W=this.i[L];if(void 0===(W="__data__"in W.map&&"string"==typeof(W=W.map.__data__)?W.length:void 0))break;if(4096<(R+=W)){R=L;break e}if(4096===R||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=Yp(this,Pe,R),xr(L=Zo(this.I),"RID",p),xr(L,"CVER",22),this.D&&xr(L,"X-HTTP-Session-Id",this.D),Jd(this,L),Ge&&(this.O?R="headers="+encodeURIComponent(String(vI(Ge)))+"&"+R:this.m&&$y(L,this.m,Ge)),Km(this.h,Pe),this.Ua&&xr(L,"TYPE","init"),this.P?(xr(L,"$req",R),xr(L,"SID","null"),Pe.T=!0,Bp(Pe,L,null)):Bp(Pe,L,R),this.G=2}}else 3==this.G&&(p?EI(this,p):0==this.i.length||Hp(this.h)||EI(this))},a.Fa=function(){if(this.u=null,ta(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=hf(ce(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Cs(10),qp(this),ta(this))},a.Za=function(){null!=this.C&&(this.C=null,qp(this),i_(this),Cs(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Cs(2)):(this.j.info("Failed to ping google.com"),Cs(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=Jy.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},Zd.prototype.g=function(p,R){return new qi(p,R)},rt(qi,Ki),qi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qi.prototype.close=function(){n_(this.g)},qi.prototype.o=function(p){var R=this.g;if("string"==typeof p){var L={};L.__data__=p,p=L}else this.u&&((L={}).__data__=Nm(p),p=L);R.i.push(new class{constructor(p,R){this.g=p,this.map=R}}(R.Ya++,p)),3==R.G&&Qp(R)},qi.prototype.N=function(){this.g.l=null,delete this.j,n_(this.g),delete this.g,qi.aa.N.call(this)},rt(Zy,Om),rt(a_,df),rt(eh,Jy),eh.prototype.ua=function(){ds(this.g,"a")},eh.prototype.ta=function(p){ds(this.g,new Zy(p))},eh.prototype.sa=function(p){ds(this.g,new a_)},eh.prototype.ra=function(){ds(this.g,"b")},Zd.prototype.createWebChannel=Zd.prototype.g,qi.prototype.send=qi.prototype.o,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,Ae=on.createWebChannelTransport=function(){return new Zd},be=on.getStatEventTarget=function(){return Rl()},pe=on.Event=Jo,ue=on.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fm.NO_ERROR=0,Fm.TIMEOUT=8,Fm.HTTP_ERROR=6,Rt=on.ErrorCode=Fm,My.COMPLETE="complete",Mt=on.EventType=My,Py.EventType=lf,lf.OPEN="a",lf.CLOSE="b",lf.ERROR="c",lf.MESSAGE="d",Ki.prototype.listen=Ki.prototype.K,xn=on.WebChannel=Py,on.FetchXmlHttpFactory=Nl,Xr.prototype.listenOnce=Xr.prototype.L,Xr.prototype.getLastError=Xr.prototype.Ka,Xr.prototype.getLastErrorCode=Xr.prototype.Ba,Xr.prototype.getStatus=Xr.prototype.Z,Xr.prototype.getResponseJson=Xr.prototype.Oa,Xr.prototype.getResponseText=Xr.prototype.oa,Xr.prototype.send=Xr.prototype.ea,Xr.prototype.setWithCredentials=Xr.prototype.Ha,Xt=on.XhrIo=Xr}).apply(typeof Ht<"u"?Ht:typeof self<"u"?self:typeof window<"u"?window:{});const ze="@firebase/firestore";class Le{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");let st="10.14.0";const _t=new me.Vy("@firebase/firestore");function $n(){return _t.logLevel}function $e(a,...e){if(_t.logLevel<=me.$b.DEBUG){const r=e.map(rn);_t.debug(`Firestore (${st}): ${a}`,...r)}}function kt(a,...e){if(_t.logLevel<=me.$b.ERROR){const r=e.map(rn);_t.error(`Firestore (${st}): ${a}`,...r)}}function Hn(a,...e){if(_t.logLevel<=me.$b.WARN){const r=e.map(rn);_t.warn(`Firestore (${st}): ${a}`,...r)}}function rn(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function dt(a="Unexpected state"){const e=`FIRESTORE (${st}) INTERNAL ASSERTION FAILED: `+a;throw kt(e),new Error(e)}function gt(a,e){a||dt()}function Je(a,e){return a}const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends ke.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class zr{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ir{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Le.UNAUTHENTICATED))}shutdown(){}}class qt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class an{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;gt(void 0===this.o);let u=this.i;const d=O=>this.i!==u?(u=this.i,r(O)):Promise.resolve();let g=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Xn,e.enqueueRetryable(()=>d(this.currentUser))};const w=()=>{const O=g;e.enqueueRetryable((0,ye.A)(function*(){yield O.promise,yield d(s.currentUser)}))},S=O=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=O,this.o&&(this.auth.addAuthTokenListener(this.o),w())};this.t.onInit(O=>S(O)),setTimeout(()=>{if(!this.auth){const O=this.t.getImmediate({optional:!0});O?S(O):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Xn)}},0),w()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt("string"==typeof s.accessToken),new zr(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Le(e)}}class Gt{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fr{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Gt(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vr{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){gt(void 0===this.o);const s=d=>{null!=d.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.R;return this.R=d.token,$e("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?r(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const u=d=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(gt("string"==typeof r.token),this.R=r.token,new Pr(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Fr(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class to{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=Fr(40);for(let d=0;d<u.length;++d)s.length<20&&u[d]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return s}}function ot(a,e){return a<e?-1:a>e?1:0}function Gr(a,e,r){return a.length===e.length&&a.every((s,u)=>r(s,e[u]))}function un(a){return a+"\0"}class Sn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new We(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new We(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new We(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new Sn(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Sn(0,0))}static max(){return new ut(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jr{constructor(e,r,s){void 0===r?r=0:r>e.length&&dt(),void 0===s?s=e.length-r:s>e.length-r&&dt(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Jr.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Jr?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let u=0;u<s;u++){const d=e.get(u),g=r.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Jt extends Jr{construct(e,r,s){return new Jt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new We(Re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new Jt(r)}static emptyPath(){return new Jt([])}}const gr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends Jr{construct(e,r,s){return new On(e,r,s)}static isValidIdentifier(e){return gr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const r=[];let s="",u=0;const d=()=>{if(0===s.length)throw new We(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let g=!1;for(;u<e.length;){const w=e[u];if("\\"===w){if(u+1===e.length)throw new We(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new We(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,u+=2}else"`"===w?(g=!g,u++):"."!==w||g?(s+=w,u++):(d(),u++)}if(d(),g)throw new We(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(r)}static emptyPath(){return new On([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(Jt.fromString(e))}static fromName(e){return new It(Jt.fromString(e).popFirst(5))}static empty(){return new It(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Jt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new Jt(e.slice()))}}class Vr{constructor(e,r,s,u){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=u}}function Yi(a){return a.fields.find(e=>2===e.kind)}function Ir(a){return a.fields.filter(e=>2!==e.kind)}Vr.UNKNOWN_ID=-1;class Wr{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ke{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ke(0,j.min())}}function z(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=ut.fromTimestamp(1e9===s?new Sn(r+1,0):new Sn(r,s));return new j(u,It.empty(),e)}function k(a){return new j(a.readTime,a.key,-1)}class j{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new j(ut.min(),It.empty(),-1)}static max(){return new j(ut.max(),It.empty(),-1)}}function re(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=It.comparator(a.documentKey,e.documentKey),0!==r?r:ot(a.largestBatchId,e.largestBatchId))}const ae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ct(a){return jt.apply(this,arguments)}function jt(){return(jt=(0,ye.A)(function*(a){if(a.code!==Re.FAILED_PRECONDITION||a.message!==ae)throw a;$e("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new oe((s,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(s,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof oe?r:oe.resolve(r)}catch(r){return oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):oe.reject(r)}static resolve(e){return new oe((r,s)=>{r(e)})}static reject(e){return new oe((r,s)=>{s(e)})}static waitFor(e){return new oe((r,s)=>{let u=0,d=0,g=!1;e.forEach(w=>{++u,w.next(()=>{++d,g&&d===u&&r()},S=>s(S))}),g=!0,d===u&&r()})}static or(e){let r=oe.resolve(!1);for(const s of e)r=r.next(u=>u?oe.resolve(u):s());return r}static forEach(e,r){const s=[];return e.forEach((u,d)=>{s.push(r.call(this,u,d))}),this.waitFor(s)}static mapArray(e,r){return new oe((s,u)=>{const d=e.length,g=new Array(d);let w=0;for(let S=0;S<d;S++){const O=S;r(e[O]).next(H=>{g[O]=H,++w,w===d&&s(g)},H=>u(H))}})}static doWhile(e,r){return new oe((s,u)=>{const d=()=>{!0===e()?r().next(()=>{d()},u):s()};d()})}}class pn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Xn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new fi(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=Er(s.target.error);this.V.reject(new fi(e,u))}}static open(e,r,s,u){try{return new pn(r,e.transaction(u,s))}catch(d){throw new fi(r,d)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ei(r)}}class Dn{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===Dn.S((0,ke.ZQ)())&&kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Or(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ke.zW)())return!1;if(Dn.v())return!0;const e=(0,ke.ZQ)(),r=Dn.S(e),s=0<r&&r<10,u=cn(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,ye.A)(function*(){return r.db||($e("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{u(new fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const w=g.target.error;u("VersionError"===w.name?new We(Re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new We(Re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new fi(e,w))},d.onupgradeneeded=g=>{$e("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.p.O(g.target.result,d.transaction,g.oldVersion,r.version).next(()=>{$e("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,u){var d=this;return(0,ye.A)(function*(){const g="readonly"===r;let w=0;for(;;){++w;try{d.db=yield d.M(e);const S=pn.open(d.db,e,g?"readonly":"readwrite",s),O=u(S).next(H=>(S.g(),H)).catch(H=>(S.abort(H),oe.reject(H))).toPromise();return O.catch(()=>{}),yield S.m,O}catch(S){const O=S,H="FirebaseError"!==O.name&&w<3;if($e("SimpleDb","Transaction failed with error:",O.message,"Retrying:",H),d.close(),!H)return Promise.reject(O)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function cn(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Zr{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Or(this.B.delete())}}class fi extends We{constructor(e,r){super(Re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function pi(a){return"IndexedDbTransactionError"===a.name}class ei{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?($e("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Or(s)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Or(this.store.add(e))}get(e){return Or(this.store.get(e)).next(r=>(void 0===r&&(r=null),$e("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Or(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Or(this.store.count())}U(e,r){const s=this.options(e,r),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(s.range);return new oe((g,w)=>{d.onerror=S=>{w(S.target.error)},d.onsuccess=S=>{g(S.target.result)}})}{const d=this.cursor(s),g=[];return this.W(d,(w,S)=>{g.push(S)}).next(()=>g)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new oe((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}j(e,r){$e("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const u=this.cursor(s);return this.W(u,(d,g,w)=>w.delete())}J(e,r){let s;r?s=e:(s={},r=e);const u=this.cursor(s);return this.W(u,r)}Y(e){const r=this.cursor({});return new oe((s,u)=>{r.onerror=d=>{const g=Er(d.target.error);u(g)},r.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(w=>{w?g.continue():s()}):s()}})}W(e,r){const s=[];return new oe((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const w=g.target.result;if(!w)return void u();const S=new Zr(w),O=r(w.primaryKey,w.value,S);if(O instanceof oe){const H=O.catch(q=>(S.done(),oe.reject(q)));s.push(H)}S.isDone?u():null===S.K?w.continue():w.continue(S.K)}}).next(()=>oe.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Or(a){return new oe((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const u=Er(s.target.error);r(u)}})}let Ei=!1;function Er(a){const e=Dn.S((0,ke.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ei||(Ei=!0,setTimeout(()=>{throw s},0)),s}}return a}class hn{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;$e("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.A)(function*(){r.task=null;try{$e("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){pi(s)?$e("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield ct(s)}yield r.X(6e4)}))}}class hs{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,ye.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let u=r,d=!0;return oe.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return $e("IndexBackfiller",`Processing collection: ${g}`),this.ne(e,g,u).next(w=>{u-=w,s.add(g)});d=!1})).next(()=>r-u)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.re(u,d)).next(w=>($e("IndexBackfiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,r,w))).next(()=>g.size)}))}re(e,r){let s=e;return r.changes.forEach((u,d)=>{const g=k(d);re(g,s)>0&&(s=g)}),new j(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let Ne=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function Ee(a){return null==a}function Ye(a){return 0===a&&1/a==-1/0}function At(a){return"number"==typeof a&&Number.isInteger(a)&&!Ye(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function xt(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=sn(e)),e=Qt(a.get(r),e);return sn(e)}function Qt(a,e){let r=e;const s=a.length;for(let u=0;u<s;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function sn(a){return a+"\x01\x01"}function Tn(a){const e=a.length;if(gt(e>=2),2===e)return gt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Jt.emptyPath();const r=e-2,s=[];let u="";for(let d=0;d<e;){const g=a.indexOf("\x01",d);switch((g<0||g>r)&&dt(),a.charAt(g+1)){case"\x01":const w=a.substring(d,g);let S;0===u.length?S=w:(u+=w,S=u,u=""),s.push(S);break;case"\x10":u+=a.substring(d,g),u+="\0";break;case"\x11":u+=a.substring(d,g+1);break;default:dt()}d=g+2}return new Jt(s)}const Zn=["userId","batchId"];function Ur(a,e){return[a,xt(e)]}function Cn(a,e,r){return[a,xt(e),r]}const Vs={},fs=["prefixPath","collectionGroup","readTime","documentId"],Eu=["prefixPath","collectionGroup","documentId"],no=["collectionGroup","readTime","prefixPath","documentId"],Tu=["canonicalId","targetId"],na=["targetId","path"],si=["path","targetId"],ro=["collectionId","parent"],Pi=["indexId","uid"],ba=["uid","sequenceNumber"],Ji=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],So=["indexId","uid","orderedDocumentKey"],Us=["userId","collectionPath","documentId"],Ss=["userId","collectionPath","largestBatchId"],Sa=["userId","collectionGroup","largestBatchId"],Ti=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ra=[...Ti,"documentOverlays"],Pa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wu=Pa,ra=[...wu,"indexConfiguration","indexState","indexEntries"],Au=ra,Ma=[...ra,"globals"];class ia extends tt{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Dr(a,e){const r=Je(a);return Dn.F(r._e,e)}function Rs(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function Mi(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function Cr(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class fn{constructor(e,r){this.comparator=e,this.root=r||Mn.EMPTY}insert(e,r){return new fn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ps(this.root,e,this.comparator,!0)}}class ps{constructor(e,r,s,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=r?s(e.key,r):1,r&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,r,s,u,d){this.key=e,this.value=r,this.color=s??Mn.RED,this.left=u??Mn.EMPTY,this.right=d??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,u,d){return new Mn(e??this.key,r??this.value,s??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let u=this;const d=s(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,r,s),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Mn.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1,Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(e,r,s,u,d){return this}insert(e,r,s){return new Mn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Bs(this.data.getIterator())}getIteratorFrom(e){return new Bs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new zn(this.comparator);return r.data=e,r}}class Bs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ni(a){return a.hasNext()?a.getNext():void 0}class lr{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new lr([])}unionWith(e){let r=new zn(On.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new lr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gr(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class xi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new xi("Invalid base64 string: "+d):d}}(e);return new yt(r)}static fromUint8Array(e){const r=function(u){let d="";for(let g=0;g<u.length;++g)d+=String.fromCharCode(u[g]);return d}(e);return new yt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const Zt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mn(a){if(gt(!!a),"string"==typeof a){let e=0;const r=Zt.exec(a);if(gt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_n(a.seconds),nanos:_n(a.nanos)}}function _n(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function wi(a){return"string"==typeof a?yt.fromBase64String(a):yt.fromUint8Array(a)}function pr(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Zi(a){const e=a.mapValue.fields.__previous_value__;return pr(e)?Zi(e):e}function Gn(a){const e=mn(a.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}class gs{constructor(e,r,s,u,d,g,w,S,O){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=S,this.useFetchStreams=O}}class Br{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Br("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Br&&e.projectId===this.projectId&&e.database===this.database}}const $t={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oi={nullValue:"NULL_VALUE"};function gi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?pr(a)?4:$s(a)?9007199254740991:js(a)?10:11:dt()}function cr(a,e){if(a===e)return!0;const r=gi(a);if(r!==gi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Gn(a).isEqual(Gn(e));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const g=mn(u.timestampValue),w=mn(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return d=e,wi(a.bytesValue).isEqual(wi(d.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,d){return _n(u.geoPointValue.latitude)===_n(d.geoPointValue.latitude)&&_n(u.geoPointValue.longitude)===_n(d.geoPointValue.longitude)}(a,e);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return _n(u.integerValue)===_n(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const g=_n(u.doubleValue),w=_n(d.doubleValue);return g===w?Ye(g)===Ye(w):isNaN(g)&&isNaN(w)}return!1}(a,e);case 9:return Gr(a.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(u,d){const g=u.mapValue.fields||{},w=d.mapValue.fields||{};if(Rs(g)!==Rs(w))return!1;for(const S in g)if(g.hasOwnProperty(S)&&(void 0===w[S]||!cr(g[S],w[S])))return!1;return!0}(a,e);default:return dt()}var d}function er(a,e){return void 0!==(a.values||[]).find(r=>cr(r,e))}function ki(a,e){if(a===e)return 0;const r=gi(a),s=gi(e);if(r!==s)return ot(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return ot(a.booleanValue,e.booleanValue);case 2:return function(d,g){const w=_n(d.integerValue||d.doubleValue),S=_n(g.integerValue||g.doubleValue);return w<S?-1:w>S?1:w===S?0:isNaN(w)?isNaN(S)?0:-1:1}(a,e);case 3:return br(a.timestampValue,e.timestampValue);case 4:return br(Gn(a),Gn(e));case 5:return ot(a.stringValue,e.stringValue);case 6:return function(d,g){const w=wi(d),S=wi(g);return w.compareTo(S)}(a.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),S=g.split("/");for(let O=0;O<w.length&&O<S.length;O++){const H=ot(w[O],S[O]);if(0!==H)return H}return ot(w.length,S.length)}(a.referenceValue,e.referenceValue);case 8:return function(d,g){const w=ot(_n(d.latitude),_n(g.latitude));return 0!==w?w:ot(_n(d.longitude),_n(g.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return Li(a.arrayValue,e.arrayValue);case 10:return function(d,g){var w,S,O,H;const xe=null===(w=(d.fields||{}).value)||void 0===w?void 0:w.arrayValue,rt=null===(S=(g.fields||{}).value)||void 0===S?void 0:S.arrayValue,Et=ot((null===(O=xe?.values)||void 0===O?void 0:O.length)||0,(null===(H=rt?.values)||void 0===H?void 0:H.length)||0);return 0!==Et?Et:Li(xe,rt)}(a.mapValue,e.mapValue);case 11:return function(d,g){if(d===$t.mapValue&&g===$t.mapValue)return 0;if(d===$t.mapValue)return 1;if(g===$t.mapValue)return-1;const w=d.fields||{},S=Object.keys(w),O=g.fields||{},H=Object.keys(O);S.sort(),H.sort();for(let q=0;q<S.length&&q<H.length;++q){const ce=ot(S[q],H[q]);if(0!==ce)return ce;const xe=ki(w[S[q]],O[H[q]]);if(0!==xe)return xe}return ot(S.length,H.length)}(a.mapValue,e.mapValue);default:throw dt()}}function br(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return ot(a,e);const r=mn(a),s=mn(e),u=ot(r.seconds,s.seconds);return 0!==u?u:ot(r.nanos,s.nanos)}function Li(a,e){const r=a.values||[],s=e.values||[];for(let u=0;u<r.length&&u<s.length;++u){const d=ki(r[u],s[u]);if(d)return d}return ot(r.length,s.length)}function Ai(a){return Ro(a)}function Ro(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=mn(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?wi(a.bytesValue).toBase64():"referenceValue"in a?It.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Ro(d);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of s)d?d=!1:u+=",",u+=`${g}:${Ro(r.fields[g])}`;return u+"}"}(a.mapValue):dt()}function ti(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Fi(a){return!!a&&"integerValue"in a}function ms(a){return!!a&&"arrayValue"in a}function yn(a){return!!a&&"nullValue"in a}function Na(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Vi(a){return!!a&&"mapValue"in a}function js(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function mi(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Mi(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=mi(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=mi(a.arrayValue.values[r]);return e}return Object.assign({},a)}function $s(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const io={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function so(a){return"nullValue"in a?Oi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?ti(Br.empty(),It.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?js(a)?io:{mapValue:{}}:dt()}function dr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?ti(Br.empty(),It.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?io:"mapValue"in a?js(a)?{mapValue:{}}:$t:dt()}function Po(a,e){const r=ki(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function mr(a,e){const r=ki(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Vi(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=mi(r)}setAll(e){let r=On.emptyPath(),s={},u=[];e.forEach((g,w)=>{if(!r.isImmediateParentOf(w)){const S=this.getFieldsMap(r);this.applyChanges(S,s,u),s={},u=[],r=w.popLast()}g?s[w.lastSegment()]=mi(g):u.push(w.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,s,u)}delete(e){const r=this.field(e.popLast());Vi(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=r.mapValue.fields[e.get(s)];Vi(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,s){Mi(r,(u,d)=>e[u]=d);for(const u of s)delete e[u]}clone(){return new ln(mi(this.value))}}function Mo(a){const e=[];return Mi(a.fields,(r,s)=>{const u=new On([r]);if(Vi(s)){const d=Mo(s.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new lr(e)}class Nn{constructor(e,r,s,u,d,g,w){this.key=e,this.documentType=r,this.version=s,this.readTime=u,this.createTime=d,this.data=g,this.documentState=w}static newInvalidDocument(e){return new Nn(e,0,ut.min(),ut.min(),ut.min(),ln.empty(),0)}static newFoundDocument(e,r,s,u){return new Nn(e,1,r,ut.min(),s,u,0)}static newNoDocument(e,r){return new Nn(e,2,r,ut.min(),ut.min(),ln.empty(),0)}static newUnknownDocument(e,r){return new Nn(e,3,r,ut.min(),ut.min(),ln.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _s{constructor(e,r){this.position=e,this.inclusive=r}}function jr(a,e,r){let s=0;for(let u=0;u<a.position.length;u++){const d=e[u],g=a.position[u];if(s=d.field.isKeyField()?It.comparator(It.fromName(g.referenceValue),r.key):ki(g,r.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function sa(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!cr(a.position[r],e.position[r]))return!1;return!0}class ys{constructor(e,r="asc"){this.field=e,this.dir=r}}function oa(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Ec{}class wn extends Ec{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new Ac(e,r,s):"array-contains"===r?new Su(e,s):"in"===r?new No(e,s):"not-in"===r?new Oa(e,s):"array-contains-any"===r?new Ps(e,s):new wn(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Dc(e,s):new Cu(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(ki(r,this.value)):null!==r&&gi(this.value)===gi(r)&&this.matchesComparison(ki(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class en extends Ec{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new en(e,r)}matches(e){return es(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function es(a){return"and"===a.op}function Tc(a){return"or"===a.op}function xa(a){return qn(a)&&es(a)}function qn(a){for(const e of a.filters)if(e instanceof en)return!1;return!0}function oo(a){if(a instanceof wn)return a.field.canonicalString()+a.op.toString()+Ai(a.value);if(xa(a))return a.filters.map(e=>oo(e)).join(",");{const e=a.filters.map(r=>oo(r)).join(",");return`${a.op}(${e})`}}function wc(a,e){return a instanceof wn?(s=a,(u=e)instanceof wn&&s.op===u.op&&s.field.isEqual(u.field)&&cr(s.value,u.value)):a instanceof en?function(s,u){return u instanceof en&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((d,g,w)=>d&&wc(g,u.filters[w]),!0)}(a,e):void dt();var s,u}function Fl(a,e){const r=a.filters.concat(e);return en.create(r,a.op)}function Du(a){return a instanceof wn?`${(r=a).field.canonicalString()} ${r.op} ${Ai(r.value)}`:a instanceof en?function(r){return r.op.toString()+" {"+r.getFilters().map(Du).join(" ,")+"}"}(a):"Filter";var r}class Ac extends wn{constructor(e,r,s){super(e,r,s),this.key=It.fromName(s.referenceValue)}matches(e){const r=It.comparator(e.key,this.key);return this.matchesComparison(r)}}class Dc extends wn{constructor(e,r){super(e,"in",r),this.keys=bu(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Cu extends wn{constructor(e,r){super(e,"not-in",r),this.keys=bu(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function bu(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>It.fromName(s.referenceValue))}class Su extends wn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ms(r)&&er(r.arrayValue,this.value)}}class No extends wn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&er(this.value.arrayValue,r)}}class Oa extends wn{constructor(e,r){super(e,"not-in",r)}matches(e){if(er(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!er(this.value.arrayValue,r)}}class Ps extends wn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ms(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>er(this.value.arrayValue,s))}}class ka{constructor(e,r=null,s=[],u=[],d=null,g=null,w=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=d,this.startAt=g,this.endAt=w,this.ue=null}}function Ui(a,e=null,r=[],s=[],u=null,d=null,g=null){return new ka(a,e,r,s,u,d,g)}function $r(a){const e=Je(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>oo(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),Ee(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Ai(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Ai(s)).join(",")),e.ue=r}return e.ue}function ts(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!oa(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!wc(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!sa(a.startAt,e.startAt)&&sa(a.endAt,e.endAt)}function La(a){return It.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Tr(a,e){return a.filters.filter(r=>r instanceof wn&&r.field.isEqual(e))}function ao(a,e,r){let s=Oi,u=!0;for(const d of Tr(a,e)){let g=Oi,w=!0;switch(d.op){case"<":case"<=":g=so(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,w=!1;break;case"!=":case"not-in":g=Oi}Po({value:s,inclusive:u},{value:g,inclusive:w})<0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];Po({value:s,inclusive:u},{value:g,inclusive:r.inclusive})<0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}function Kr(a,e,r){let s=$t,u=!0;for(const d of Tr(a,e)){let g=$t,w=!0;switch(d.op){case">=":case">":g=dr(d.value),w=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,w=!1;break;case"!=":case"not-in":g=$t}mr({value:s,inclusive:u},{value:g,inclusive:w})>0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];mr({value:s,inclusive:u},{value:g,inclusive:r.inclusive})>0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}class vs{constructor(e,r=null,s=[],u=[],d=null,g="F",w=null,S=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=d,this.limitType=g,this.startAt=w,this.endAt=S,this.ce=null,this.le=null,this.he=null}}function xo(a,e,r,s,u,d,g,w){return new vs(a,e,r,s,u,d,g,w)}function Bi(a){return new vs(a)}function Is(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function Hs(a){return null!==a.collectionGroup}function ai(a){const e=Je(a);if(null===e.ce){e.ce=[];const r=new Set;for(const d of e.explicitOrderBy)e.ce.push(d),r.add(d.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new zn(On.comparator);return g.filters.forEach(S=>{S.getFlattenedFilters().forEach(O=>{O.isInequality()&&(w=w.add(O.field))})}),w})(e).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||e.ce.push(new ys(d,s))}),r.has(On.keyField().canonicalString())||e.ce.push(new ys(On.keyField(),s))}return e.ce}function Sr(a){const e=Je(a);return e.le||(e.le=function Ru(a,e){if("F"===a.limitType)return Ui(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(u=>new ys(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new _s(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new _s(a.startAt.position,a.startAt.inclusive):null;return Ui(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,ai(a))),e.le}function ko(a,e){const r=a.filters.concat([e]);return new vs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function uo(a,e,r){return new vs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function Es(a,e){return ts(Sr(a),Sr(e))&&a.limitType===e.limitType}function Ms(a){return`${$r(Sr(a))}|lt:${a.limitType}`}function _i(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>Du(u)).join(", ")}]`),Ee(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>Ai(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>Ai(u)).join(",")),`Target(${s})`}(Sr(a))}; limitType=${a.limitType})`}function zs(a,e){return e.isFoundDocument()&&function(s,u){const d=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(d):It.isDocumentKey(s.path)?s.path.isEqual(d):s.path.isImmediateParentOf(d)}(a,e)&&function(s,u){for(const d of ai(s))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,e)&&function(s,u){for(const d of s.filters)if(!d.matches(u))return!1;return!0}(a,e)&&(u=e,!((s=a).startAt&&!function(g,w,S){const O=jr(g,w,S);return g.inclusive?O<=0:O<0}(s.startAt,ai(s),u)||s.endAt&&!function(g,w,S){const O=jr(g,w,S);return g.inclusive?O>=0:O>0}(s.endAt,ai(s),u)));var s,u}function Fa(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Vl(a){return(e,r)=>{let s=!1;for(const u of ai(a)){const d=Cc(u,e,r);if(0!==d)return d;s=s||u.field.isKeyField()}return 0}}function Cc(a,e,r){const s=a.field.isKeyField()?It.comparator(e.key,r.key):function(d,g,w){const S=g.data.field(d),O=w.data.field(d);return null!==S&&null!==O?ki(S,O):dt()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return dt()}}class ji{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[u,d]of s)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(r,s)=>{for(const[u,d]of s)e(u,d)})}isEmpty(){return Cr(this.inner)}size(){return this.innerSize}}const Pu=new fn(It.comparator);function Di(){return Pu}const Mu=new fn(It.comparator);function Ns(...a){let e=Mu;for(const r of a)e=e.insert(r.key,r);return e}function bc(a){let e=Mu;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function $i(){return co()}function Va(){return co()}function co(){return new ji(a=>a.toString(),(a,e)=>a.isEqual(e))}const Ua=new fn(It.comparator),A=new zn(It.comparator);function V(...a){let e=A;for(const r of a)e=e.add(r);return e}const P=new zn(ot);function F(){return P}function Z(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ye(e)?"-0":e}}function Fe(a){return{integerValue:""+a}}function nt(a,e){return At(e)?Fe(e):Z(a,e)}class Lt{constructor(){this._=void 0}}function Qn(a,e,r){return a instanceof tn?function(u,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&pr(d)&&(d=Zi(d)),d&&(g.fields.__previous_value__=d),{mapValue:g}}(r,e):a instanceof Yn?Wn(a,e):a instanceof tr?qr(a,e):function(u,d){const g=Bn(u,d),w=Gs(g)+Gs(u.Pe);return Fi(g)&&Fi(u.Pe)?Fe(w):Z(u.serializer,w)}(a,e)}function Un(a,e,r){return a instanceof Yn?Wn(a,e):a instanceof tr?qr(a,e):r}function Bn(a,e){return a instanceof Hr?Fi(s=e)||(d=s)&&"doubleValue"in d?e:{integerValue:0}:null;var s,d}class tn extends Lt{}class Yn extends Lt{constructor(e){super(),this.elements=e}}function Wn(a,e){const r=ui(e);for(const s of a.elements)r.some(u=>cr(u,s))||r.push(s);return{arrayValue:{values:r}}}class tr extends Lt{constructor(e){super(),this.elements=e}}function qr(a,e){let r=ui(e);for(const s of a.elements)r=r.filter(u=>!cr(u,s));return{arrayValue:{values:r}}}class Hr extends Lt{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Gs(a){return _n(a.integerValue||a.doubleValue)}function ui(a){return ms(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Hi{constructor(e,r){this.field=e,this.transform=r}}class ns{constructor(e,r){this.version=e,this.transformResults=r}}class _r{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sr(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class Ws{}function lo(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new zi(a.key,_r.none()):new nr(a.key,a.data,_r.none());{const r=a.data,s=ln.empty();let u=new zn(On.comparator);for(let d of e.fields)if(!u.has(d)){let g=r.field(d);null===g&&d.length>1&&(d=d.popLast(),g=r.field(d)),null===g?s.delete(d):s.set(d,g),u=u.add(d)}return new ho(a.key,s,new lr(u.toArray()),_r.none())}}function Ci(a,e,r){a instanceof nr?function(u,d,g){const w=u.value.clone(),S=Nu(u.fieldTransforms,d,g.transformResults);w.setAll(S),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(a,e,r):a instanceof ho?function(u,d,g){if(!sr(u.precondition,d))return void d.convertToUnknownDocument(g.version);const w=Nu(u.fieldTransforms,d,g.transformResults),S=d.data;S.setAll(Ul(u)),S.setAll(w),d.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ba(a,e,r,s){return a instanceof nr?function(d,g,w,S){if(!sr(d.precondition,g))return w;const O=d.value.clone(),H=Ts(d.fieldTransforms,S,g);return O.setAll(H),g.convertToFoundDocument(g.version,O).setHasLocalMutations(),null}(a,e,r,s):a instanceof ho?function(d,g,w,S){if(!sr(d.precondition,g))return w;const O=Ts(d.fieldTransforms,S,g),H=g.data;return H.setAll(Ul(d)),H.setAll(O),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(q=>q.field))}(a,e,r,s):(w=r,sr(a.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function nh(a,e){let r=null;for(const s of a.fieldTransforms){const u=e.data.field(s.field),d=Bn(s.transform,u||null);null!=d&&(null===r&&(r=ln.empty()),r.set(s.field,d))}return r||null}function aa(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===u||s&&u&&Gr(s,u,(d,g)=>function Qr(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(s=a.transform)instanceof Yn&&u instanceof Yn||s instanceof tr&&u instanceof tr?Gr(s.elements,u.elements,cr):s instanceof Hr&&u instanceof Hr?cr(s.Pe,u.Pe):s instanceof tn&&u instanceof tn);var s,u}(d,g))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,u}class nr extends Ws{constructor(e,r,s,u=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ho extends Ws{constructor(e,r,s,u,d=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Ul(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function Nu(a,e,r){const s=new Map;gt(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],g=d.transform,w=e.data.field(d.field);s.set(d.field,Un(g,w,r[u]))}return s}function Ts(a,e,r){const s=new Map;for(const u of a){const d=u.transform,g=r.data.field(u.field);s.set(u.field,Qn(d,g,e))}return s}class zi extends Ws{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ua extends Ws{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sc{constructor(e,r,s,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Ci(d,e,s[u])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Ba(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Ba(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Va();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let w=this.applyToLocalView(g,d.mutatedFields);w=r.has(u.key)?null:w;const S=lo(g,w);null!==S&&s.set(u.key,S),g.isValidDocument()||g.convertToNoDocument(ut.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),V())}isEqual(e){return this.batchId===e.batchId&&Gr(this.mutations,e.mutations,(r,s)=>aa(r,s))&&Gr(this.baseMutations,e.baseMutations,(r,s)=>aa(r,s))}}class Rc{constructor(e,r,s,u){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(e,r,s){gt(e.mutations.length===s.length);let u=Ua;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,s[g].version);return new Rc(e,r,s,u)}}class xu{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yt{constructor(e,r){this.count=e,this.unchangedNames=r}}var kr,kn;function rs(a){switch(a){default:return dt();case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0}}function Bl(a){if(void 0===a)return kt("GRPC error has no .code"),Re.UNKNOWN;switch(a){case kr.OK:return Re.OK;case kr.CANCELLED:return Re.CANCELLED;case kr.UNKNOWN:return Re.UNKNOWN;case kr.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case kr.INTERNAL:return Re.INTERNAL;case kr.UNAVAILABLE:return Re.UNAVAILABLE;case kr.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case kr.NOT_FOUND:return Re.NOT_FOUND;case kr.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case kr.ABORTED:return Re.ABORTED;case kr.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case kr.DATA_LOSS:return Re.DATA_LOSS;default:return dt()}}(kn=kr||(kr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";function Mc(){return new TextEncoder}const ja=new St([4294967295,4294967295],0);function Nc(a){const e=Mc().encode(a),r=new He;return r.update(e),new Uint8Array(r.digest())}function jl(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new St([r,s],0),new St([u,d],0)]}class fo{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Ou(`Invalid padding: ${r}`);if(s<0)throw new Ou(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Ou(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new Ou(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=St.fromNumber(this.Ie)}Ee(e,r,s){let u=e.add(r.multiply(St.fromNumber(s)));return 1===u.compare(ja)&&(u=new St([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=Nc(e),[s,u]=jl(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);if(!this.de(g))return!1}return!0}static create(e,r,s){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new fo(d,u,r);return s.forEach(w=>g.insert(w)),g}insert(e){if(0===this.Ie)return;const r=Nc(e),[s,u]=jl(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);this.Ae(g)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class Ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class is{constructor(e,r,s,u,d){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const u=new Map;return u.set(e,at.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new is(ut.min(),u,new fn(ot),Di(),V())}}class at{constructor(e,r,s,u,d){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new at(s,r,V(),V(),V())}}class Rn{constructor(e,r,s,u){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=u}}class Lo{constructor(e,r){this.targetId=e,this.me=r}}class $l{constructor(e,r,s=yt.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=u}}class Ln{constructor(){this.fe=0,this.ge=xs(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=V(),r=V(),s=V();return this.ge.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:dt()}}),new at(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=xs()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rh{constructor(e){this.Le=e,this.Be=new Map,this.ke=Di(),this.qe=po(),this.Qe=new fn(ot)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:dt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,s=e.me.count,u=this.Je(r);if(u){const d=u.target;if(La(d))if(0===s){const g=new It(d.path);this.Ue(r,g,Nn.newNoDocument(g,ut.min()))}else gt(1===s);else{const g=this.Ye(r);if(g!==s){const w=this.Ze(e),S=w?this.Xe(w,e,g):1;0!==S&&(this.je(r),this.Qe=this.Qe.insert(r,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let g,w;try{g=wi(s).toUint8Array()}catch(S){if(S instanceof xi)return Hn("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{w=new fo(g,u,d)}catch(S){return Hn(S instanceof Ou?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===w.Ie?null:w}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let u=0;return s.forEach(d=>{const g=this.Le.tt(),w=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;e.mightContain(w)||(this.Ue(r,d,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((d,g)=>{const w=this.Je(g);if(w){if(d.current&&La(w.target)){const S=new It(w.target.path);null!==this.ke.get(S)||this.it(g,S)||this.Ue(g,S,Nn.newNoDocument(S,e))}d.be&&(r.set(g,d.ve()),d.Ce())}});let s=V();this.qe.forEach((d,g)=>{let w=!0;g.forEachWhile(S=>{const O=this.Je(S);return!O||"TargetPurposeLimboResolution"===O.purpose||(w=!1,!1)}),w&&(s=s.add(d))}),this.ke.forEach((d,g)=>g.setReadTime(e));const u=new is(e,r,this.Qe,this.ke,s);return this.ke=Di(),this.qe=po(),this.Qe=new fn(ot),u}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Ln,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new zn(ot),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||$e("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ln),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function po(){return new fn(It.comparator)}function xs(){return new fn(It.comparator)}const la={asc:"ASCENDING",desc:"DESCENDING"},xc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ih={and:"AND",or:"OR"};class sh{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ku(a,e){return a.useProto3Json||Ee(e)?e:{value:e}}function wr(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ws(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function da(a,e){return wr(a,e.toTimestamp())}function rr(a){return gt(!!a),ut.fromTimestamp(function(r){const s=mn(r);return new Sn(s.seconds,s.nanos)}(a))}function ss(a,e){return $a(a,e).canonicalString()}function $a(a,e){const r=(u=a,new Jt(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function Oc(a){const e=Jt.fromString(a);return gt(qs(e)),e}function ha(a,e){return ss(a.databaseId,e.path)}function Ks(a,e){const r=Oc(e);if(r.get(1)!==a.databaseId.projectId)throw new We(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new We(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new It(E(r))}function Ha(a,e){return ss(a.databaseId,e)}function Lu(a){const e=Oc(a);return 4===e.length?Jt.emptyPath():E(e)}function kc(a){return new Jt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function E(a){return gt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function D(a,e,r){return{name:ha(a,e),fields:r.value.mapValue.fields}}function v(a,e,r){const s=Ks(a,e.name),u=rr(e.updateTime),d=e.createTime?rr(e.createTime):ut.min(),g=new ln({mapValue:{fields:e.fields}}),w=Nn.newFoundDocument(s,u,d,g);return r&&w.setHasCommittedMutations(),r?w.setHasCommittedMutations():w}function G(a,e){let r;if(e instanceof nr)r={update:D(a,e.key,e.value)};else if(e instanceof zi)r={delete:ha(a,e.key)};else if(e instanceof ho)r={update:D(a,e.key,e.data),updateMask:Hl(e.fieldMask)};else{if(!(e instanceof ua))return dt();r={verify:ha(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof tn)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Yn)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof tr)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Hr)return{fieldPath:g.field.canonicalString(),increment:w.Pe};throw dt()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:da(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:dt()),r;var d}function J(a,e){const r=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?_r.updateTime(rr(d.updateTime)):void 0!==d.exists?_r.exists(d.exists):_r.none():_r.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(g,w){let S=null;"setToServerValue"in w?(gt("REQUEST_TIME"===w.setToServerValue),S=new tn):"appendMissingElements"in w?S=new Yn(w.appendMissingElements.values||[]):"removeAllFromArray"in w?S=new tr(w.removeAllFromArray.values||[]):"increment"in w?S=new Hr(g,w.increment):dt();const O=On.fromServerFormat(w.fieldPath);return new Hi(O,S)}(a,u)):[];var d;if(e.update){const u=Ks(a,e.update.name),d=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new lr((e.updateMask.fieldPaths||[]).map(H=>On.fromServerFormat(H)));return new ho(u,d,g,r,s)}return new nr(u,d,r,s)}if(e.delete){const u=Ks(a,e.delete);return new zi(u,r)}if(e.verify){const u=Ks(a,e.verify);return new ua(u,r)}return dt()}function Me(a,e){return{documents:[Ha(a,e.path)]}}function Ct(a,e){const r={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Ha(a,u);const d=function(O){if(0!==O.length)return oh(en.create(O,"and"))}(e.filters);d&&(r.structuredQuery.where=d);const g=function(O){if(0!==O.length)return O.map(H=>{return{field:bi((ce=H).field),direction:za(ce.dir)};var ce})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const w=ku(a,e.limit);return null!==w&&(r.structuredQuery.limit=w),e.startAt&&(r.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(r.structuredQuery.endAt=function(O){return{before:!O.inclusive,values:O.position}}(e.endAt)),{_t:r,parent:u};var O}function vn(a){let e=Lu(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){gt(1===s);const H=r.from[0];H.allDescendants?u=H.collectionId:e=e.child(H.collectionId)}let d=[];r.where&&(d=function(q){const ce=Kn(q);return ce instanceof en&&xa(ce)?ce.getFilters():[ce]}(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(ce=>{return new ys(Fo((rt=ce).field),function(ft){switch(ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(rt.direction));var rt}));let w=null;r.limit&&(w=function(q){let ce;return ce="object"==typeof q?q.value:q,Ee(ce)?null:ce}(r.limit));let S=null;var q;r.startAt&&(S=new _s((q=r.startAt).values||[],!!q.before));let O=null;return r.endAt&&(O=function(q){return new _s(q.values||[],!q.before)}(r.endAt)),xo(e,u,g,d,w,"F",S,O)}function Kn(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Fo(r.unaryFilter.field);return wn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=Fo(r.unaryFilter.field);return wn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Fo(r.unaryFilter.field);return wn.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Fo(r.unaryFilter.field);return wn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(a):void 0!==a.fieldFilter?wn.create(Fo((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return en.create(r.compositeFilter.filters.map(s=>Kn(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return dt()}}(r.compositeFilter.op))}(a):dt();var r}function za(a){return la[a]}function Ga(a){return xc[a]}function Lc(a){return ih[a]}function bi(a){return{fieldPath:a.canonicalString()}}function Fo(a){return On.fromServerFormat(a.fieldPath)}function oh(a){return a instanceof wn?function(r){if("=="===r.op){if(Na(r.value))return{unaryFilter:{field:bi(r.field),op:"IS_NAN"}};if(yn(r.value))return{unaryFilter:{field:bi(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Na(r.value))return{unaryFilter:{field:bi(r.field),op:"IS_NOT_NAN"}};if(yn(r.value))return{unaryFilter:{field:bi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bi(r.field),op:Ga(r.op),value:r.value}}}(a):a instanceof en?function(r){const s=r.getFilters().map(u=>oh(u));return 1===s.length?s[0]:{compositeFilter:{op:Lc(r.op),filters:s}}}(a):dt()}function Hl(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function qs(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class Vo{constructor(e,r,s,u,d=ut.min(),g=ut.min(),w=yt.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=S}withSequenceNumber(e){return new Vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wa{constructor(e){this.ct=e}}function Ka(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Fu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:ha(d=a.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:wr(d,g.version.toTimestamp()),createTime:wr(d,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:go(e.version)};else{if(!e.isUnknownDocument())return dt();s.unknownDocument={path:r.path.toArray(),version:go(e.version)}}var d,g;return s}function Fu(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function go(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qs(a){const e=new Sn(a.seconds,a.nanoseconds);return ut.fromTimestamp(e)}function Uo(a,e){const r=(e.baseMutations||[]).map(d=>J(a.ct,d));for(let d=0;d<e.mutations.length-1;++d)d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(e.mutations[d].updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d);const s=e.mutations.map(d=>J(a.ct,d)),u=Sn.fromMillis(e.localWriteTimeMs);return new Sc(e.batchId,u,r,s)}function mo(a){const e=Qs(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Qs(a.lastLimboFreeSnapshotVersion):ut.min();let s;return s=void 0!==a.query.documents?(gt(1===(d=a.query).documents.length),Sr(Bi(Lu(d.documents[0])))):function(d){return Sr(vn(d))}(a.query),new Vo(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,yt.fromBase64String(a.resumeToken));var d}function fa(a,e){const r=go(e.snapshotVersion),s=go(e.lastLimboFreeSnapshotVersion);let u;u=La(e.target)?Me(a.ct,e.target):Ct(a.ct,e.target)._t;const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$r(e.target),readTime:r,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function qa(a){const e=vn({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?uo(e,e.limit,"L"):e}function pa(a,e){return new xu(e.largestBatchId,J(a.ct,e.overlayMutation))}function Vu(a,e){const r=e.path.lastSegment();return[a,xt(e.path.popLast()),r]}function sg(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:go(s.readTime),documentKey:xt(s.documentKey.path),largestBatchId:s.largestBatchId}}class og{getBundleMetadata(e,r){return Tf(e).get(r).next(s=>{if(s)return{id:(d=s).bundleId,createTime:Qs(d.createTime),version:d.version};var d})}saveBundleMetadata(e,r){return Tf(e).put({bundleId:(u=r).id,createTime:go(rr(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return ah(e).get(r).next(s=>{if(s)return{name:(d=s).name,query:qa(d.bundledQuery),readTime:Qs(d.readTime)};var d})}saveNamedQuery(e,r){return ah(e).put({name:(u=r).name,readTime:go(rr(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Tf(a){return Dr(a,"bundles")}function ah(a){return Dr(a,"namedQueries")}class Gl{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new Gl(e,r.uid||"")}getOverlay(e,r){return Qa(e).get(Vu(this.userId,r)).next(s=>s?pa(this.serializer,s):null)}getOverlays(e,r){const s=$i();return oe.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){const u=[];return s.forEach((d,g)=>{const w=new xu(r,g);u.push(this.ht(e,w))}),oe.waitFor(u)}removeOverlaysForBatchId(e,r,s){const u=new Set;r.forEach(g=>u.add(xt(g.getCollectionPath())));const d=[];return u.forEach(g=>{const w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(Qa(e).j("collectionPathOverlayIndex",w))}),oe.waitFor(d)}getOverlaysForCollection(e,r,s){const u=$i(),d=xt(r),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Qa(e).U("collectionPathOverlayIndex",g).next(w=>{for(const S of w){const O=pa(this.serializer,S);u.set(O.getKey(),O)}return u})}getOverlaysForCollectionGroup(e,r,s,u){const d=$i();let g;const w=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Qa(e).J({index:"collectionGroupOverlayIndex",range:w},(S,O,H)=>{const q=pa(this.serializer,O);d.size()<u||q.largestBatchId===g?(d.set(q.getKey(),q),g=q.largestBatchId):H.done()}).next(()=>d)}ht(e,r){return Qa(e).put(function(u,d,g){const[w,S,O]=Vu(d,g.mutation.key);return{userId:d,collectionPath:S,documentId:O,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:G(u.ct,g.mutation)}}(this.serializer,this.userId,r))}}function Qa(a){return Dr(a,"documentOverlays")}class Fc{Pt(e){return Dr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?yt.fromUint8Array(s):yt.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class Bo{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(_n(e.integerValue));else if("doubleValue"in e){const s=_n(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),Ye(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=mn(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(wi(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?$s(e)?this.dt(r,Number.MAX_SAFE_INTEGER):js(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):dt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const u of Object.keys(s))this.Vt(u,r),this.Tt(s[u],r)}wt(e,r){var s,u;const d=e.fields||{};this.dt(r,53);const g="value",w=(null===(u=null===(s=d[g].arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(_n(w)),this.Vt(g,r),this.Tt(d[g],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const u of s)this.Tt(u,r)}yt(e,r){this.dt(r,37),It.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function Vc(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function Uu(a){const e=64-function(s){let u=0;for(let d=0;d<8;++d){const g=Vc(255&s[d]);if(u+=g,8!==g)break}return u}(a);return Math.ceil(e/8)}Bo.vt=new Bo;class Wl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(e){const r=this.qt(e),s=Uu(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(e){const r=this.qt(e),s=Uu(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let u=1;u<r.length;++u)r[u]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class wf{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Kl{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Bu{constructor(){this.jt=new Wl,this.Ht=new wf(this.jt),this.Jt=new Kl(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Ys{constructor(e,r,s,u){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=u}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ys(this.indexId,this.documentKey,this.arrayValue,s)}}function yi(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=Af(a.arrayValue,e.arrayValue),0!==r?r:(r=Af(a.directionalValue,e.directionalValue),0!==r?r:It.comparator(a.documentKey,e.documentKey)))}function Af(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class Ya{constructor(e){this.Xt=new zn((r,s)=>On.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(gt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Yi(e);if(void 0!==r&&!this.sn(r))return!1;const s=Ir(e);let u=new Set,d=0,g=0;for(;d<s.length&&this.sn(s[d]);++d)u=u.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(this.Xt.size>0){const w=this.Xt.getIterator().getNext();if(!u.has(w.field.canonicalString())){const S=s[d];if(!this.on(w,S)||!this._n(this.en[g++],S))return!1}++d}for(;d<s.length;++d)if(g>=this.en.length||!this._n(this.en[g++],s[d]))return!1;return!0}an(){if(this.nn)return null;let e=new zn(On.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new Wr(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new Wr(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new Wr(s.field,"asc"===s.dir?0:1)));return new Vr(Vr.UNKNOWN_ID,this.collectionId,r,Ke.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function ju(a){var e,r;if(gt(a instanceof wn||a instanceof en),a instanceof wn){if(a instanceof No){const u=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(d=>wn.create(a.field,"==",d)))||[];return en.create(u,"or")}return a}const s=a.filters.map(u=>ju(u));return en.create(s,a.op)}function ql(a){if(0===a.getFilters().length)return[];const e=Uc(ju(a));return gt(uh(e)),$u(e)||Xa(e)?[e]:e.getFilters()}function $u(a){return a instanceof wn}function Xa(a){return a instanceof en&&xa(a)}function uh(a){return $u(a)||Xa(a)||function(r){if(r instanceof en&&Tc(r)){for(const s of r.getFilters())if(!$u(s)&&!Xa(s))return!1;return!0}return!1}(a)}function Uc(a){if(gt(a instanceof wn||a instanceof en),a instanceof wn)return a;if(1===a.filters.length)return Uc(a.filters[0]);const e=a.filters.map(s=>Uc(s));let r=en.create(e,a.op);return r=Ja(r),uh(r)?r:(gt(r instanceof en),gt(es(r)),gt(r.filters.length>1),r.filters.reduce((s,u)=>Ql(s,u)))}function Ql(a,e){let r;return gt(a instanceof wn||a instanceof en),gt(e instanceof wn||e instanceof en),r=a instanceof wn?e instanceof wn?en.create([a,e],"and"):ch(a,e):e instanceof wn?ch(e,a):function(u,d){if(gt(u.filters.length>0&&d.filters.length>0),es(u)&&es(d))return Fl(u,d.getFilters());const g=Tc(u)?u:d,w=Tc(u)?d:u,S=g.filters.map(O=>Ql(O,w));return en.create(S,"or")}(a,e),Ja(r)}function ch(a,e){if(es(e))return Fl(e,a.getFilters());{const r=e.filters.map(s=>Ql(a,s));return en.create(r,"or")}}function Ja(a){if(gt(a instanceof wn||a instanceof en),a instanceof wn)return a;const e=a.getFilters();if(1===e.length)return Ja(e[0]);if(qn(a))return a;const r=e.map(u=>Ja(u)),s=[];return r.forEach(u=>{u instanceof wn?s.push(u):u instanceof en&&(u.op===a.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:en.create(s,a.op)}class ag{constructor(){this.un=new Hu}addToCollectionParentIndex(e,r){return this.un.add(r),oe.resolve()}getCollectionParents(e,r){return oe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return oe.resolve()}deleteFieldIndex(e,r){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,r){return oe.resolve()}getDocumentsMatchingTarget(e,r){return oe.resolve(null)}getIndexType(e,r){return oe.resolve(0)}getFieldIndexes(e,r){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,r){return oe.resolve(j.min())}getMinOffsetFromCollectionGroup(e,r){return oe.resolve(j.min())}updateCollectionGroup(e,r,s){return oe.resolve()}updateIndexEntries(e,r){return oe.resolve()}}class Hu{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r]||new zn(Jt.comparator),d=!u.has(s);return this.index[r]=u.add(s),d}has(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(e){return(this.index[e]||new zn(Jt.comparator)).toArray()}}const Os=new Uint8Array(0);class ug{constructor(e,r){this.databaseId=r,this.cn=new Hu,this.ln=new ji(s=>$r(s),(s,u)=>ts(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:s,parent:xt(u)};return lh(e).put(d)}return oe.resolve()}getCollectionParents(e,r){const s=[],u=IDBKeyRange.bound([r,""],[un(r),""],!1,!0);return lh(e).U(u).next(d=>{for(const g of d){if(g.collectionId!==r)break;s.push(Tn(g.parent))}return s})}addFieldIndex(e,r){const s=$o(e),u={indexId:(w=r).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var w;delete u.indexId;const d=s.add(u);if(r.indexState){const g=ga(e);return d.next(w=>{g.put(sg(w,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(e,r){const s=$o(e),u=ga(e),d=jo(e);return s.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=$o(e),s=jo(e),u=ga(e);return r.j().next(()=>s.j()).next(()=>u.j())}createTargetIndexes(e,r){return oe.forEach(this.hn(r),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const d=new Ya(s).an();if(null!=d)return this.addFieldIndex(e,d)}}))}getDocumentsMatchingTarget(e,r){const s=jo(e);let u=!0;const d=new Map;return oe.forEach(this.hn(r),g=>this.Pn(e,g).next(w=>{u&&(u=!!w),d.set(g,w)})).next(()=>{if(u){let g=V();const w=[];return oe.forEach(d,(S,O)=>{var Bt;$e("IndexedDbIndexManager",`Using index ${Bt=S,`id=${Bt.indexId}|cg=${Bt.collectionGroup}|f=${Bt.fields.map(nn=>`${nn.fieldPath}:${nn.kind}`).join(",")}`} to execute ${$r(r)}`);const H=function(Bt,nn){const Vn=Yi(nn);if(void 0===Vn)return null;for(const Pn of Tr(Bt,Vn.fieldPath))switch(Pn.op){case"array-contains-any":return Pn.value.arrayValue.values||[];case"array-contains":return[Pn.value]}return null}(O,S),q=function(Bt,nn){const Vn=new Map;for(const Pn of Ir(nn))for(const ve of Tr(Bt,Pn.fieldPath))switch(ve.op){case"==":case"in":Vn.set(Pn.fieldPath.canonicalString(),ve.value);break;case"not-in":case"!=":return Vn.set(Pn.fieldPath.canonicalString(),ve.value),Array.from(Vn.values())}return null}(O,S),ce=function(Bt,nn){const Vn=[];let Pn=!0;for(const ve of Ir(nn)){const se=0===ve.kind?ao(Bt,ve.fieldPath,Bt.startAt):Kr(Bt,ve.fieldPath,Bt.startAt);Vn.push(se.value),Pn&&(Pn=se.inclusive)}return new _s(Vn,Pn)}(O,S),xe=function(Bt,nn){const Vn=[];let Pn=!0;for(const ve of Ir(nn)){const se=0===ve.kind?Kr(Bt,ve.fieldPath,Bt.endAt):ao(Bt,ve.fieldPath,Bt.endAt);Vn.push(se.value),Pn&&(Pn=se.inclusive)}return new _s(Vn,Pn)}(O,S),rt=this.In(S,O,ce),Et=this.In(S,O,xe),ft=this.Tn(S,O,q),Ut=this.En(S.indexId,H,rt,ce.inclusive,Et,xe.inclusive,ft);return oe.forEach(Ut,Wt=>s.G(Wt,r.limit).next(Bt=>{Bt.forEach(nn=>{const Vn=It.fromSegments(nn.documentKey);g.has(Vn)||(g=g.add(Vn),w.push(Vn))})}))}).next(()=>w)}return oe.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:ql(en.create(e.filters,"and")).map(s=>Ui(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,u,d,g,w){const S=(null!=r?r.length:1)*Math.max(s.length,d.length),O=S/(null!=r?r.length:1),H=[];for(let q=0;q<S;++q){const ce=r?this.dn(r[q/O]):Os,xe=this.An(e,ce,s[q%O],u),rt=this.Rn(e,ce,d[q%O],g),Et=w.map(ft=>this.An(e,ce,ft,!0));H.push(...this.createRange(xe,rt,Et))}return H}An(e,r,s,u){const d=new Ys(e,It.empty(),r,s);return u?d:d.Zt()}Rn(e,r,s,u){const d=new Ys(e,It.empty(),r,s);return u?d.Zt():d}Pn(e,r){const s=new Ya(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const w of d)s.rn(w)&&(!g||w.fields.length>g.fields.length)&&(g=w);return g})}getIndexType(e,r){let s=2;const u=this.hn(r);return oe.forEach(u,d=>this.Pn(e,d).next(g=>{g?0!==s&&g.fields.length<function(S){let O=new zn(On.comparator),H=!1;for(const q of S.filters)for(const ce of q.getFlattenedFilters())ce.field.isKeyField()||("array-contains"===ce.op||"array-contains-any"===ce.op?H=!0:O=O.add(ce.field));for(const q of S.orderBy)q.field.isKeyField()||(O=O.add(q.field));return O.size+(H?1:0)}(d)&&(s=1):s=0})).next(()=>null!==r.limit&&u.length>1&&2===s?1:s)}Vn(e,r){const s=new Bu;for(const u of Ir(e)){const d=r.data.field(u.fieldPath);if(null==d)return null;const g=s.Yt(u.kind);Bo.vt.It(d,g)}return s.zt()}dn(e){const r=new Bu;return Bo.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new Bu;return Bo.vt.It(ti(this.databaseId,r),s.Yt(function(d){const g=Ir(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let u=[];u.push(new Bu);let d=0;for(const g of Ir(e)){const w=s[d++];for(const S of u)if(this.fn(r,g.fieldPath)&&ms(w))u=this.gn(u,g,w);else{const O=S.Yt(g.kind);Bo.vt.It(w,O)}}return this.pn(u)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const u=[...e],d=[];for(const g of s.arrayValue.values||[])for(const w of u){const S=new Bu;S.seed(w.zt()),Bo.vt.It(g,S.Yt(r.kind)),d.push(S)}return d}fn(e,r){return!!e.filters.find(s=>s instanceof wn&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=$o(e),u=ga(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(d=>{const g=[];return oe.forEach(d,w=>u.get([w.indexId,this.uid]).next(S=>{g.push(function(H,q){const ce=q?new Ke(q.sequenceNumber,new j(Qs(q.readTime),new It(Tn(q.documentKey)),q.largestBatchId)):Ke.empty(),xe=H.fields.map(([rt,Et])=>new Wr(On.fromServerFormat(rt),Et));return new Vr(H.indexId,H.collectionGroup,xe,ce)}(w,S))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,u)=>{const d=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:ot(s.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const u=$o(e),d=ga(e);return this.yn(e).next(g=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(w=>oe.forEach(w,S=>d.put(sg(S.indexId,this.uid,g,s)))))}updateIndexEntries(e,r){const s=new Map;return oe.forEach(r,(u,d)=>{const g=s.get(u.collectionGroup);return(g?oe.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(w=>(s.set(u.collectionGroup,w),oe.forEach(w,S=>this.wn(e,u,S).next(O=>{const H=this.Sn(d,S);return O.isEqual(H)?oe.resolve():this.bn(e,d,S,O,H)}))))})}Dn(e,r,s,u){return jo(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,u){return jo(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const u=jo(e);let d=new zn(yi);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(g,w)=>{d=d.add(new Ys(s.indexId,r,w.arrayValue,w.directionalValue))}).next(()=>d)}Sn(e,r){let s=new zn(yi);const u=this.Vn(r,e);if(null==u)return s;const d=Yi(r);if(null!=d){const g=e.data.field(d.fieldPath);if(ms(g))for(const w of g.arrayValue.values||[])s=s.add(new Ys(r.indexId,e.key,this.dn(w),u))}else s=s.add(new Ys(r.indexId,e.key,Os,u));return s}bn(e,r,s,u,d){$e("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const g=[];return function(S,O,H,q,ce){const xe=S.getIterator(),rt=O.getIterator();let Et=Ni(xe),ft=Ni(rt);for(;Et||ft;){let Ut=!1,Wt=!1;if(Et&&ft){const Bt=H(Et,ft);Bt<0?Wt=!0:Bt>0&&(Ut=!0)}else null!=Et?Wt=!0:Ut=!0;Ut?(q(ft),ft=Ni(rt)):Wt?(ce(Et),Et=Ni(xe)):(Et=Ni(xe),ft=Ni(rt))}}(u,d,yi,w=>{g.push(this.Dn(e,r,s,w))},w=>{g.push(this.vn(e,r,s,w))}),oe.waitFor(g)}yn(e){let r=1;return ga(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((g,w)=>yi(g,w)).filter((g,w,S)=>!w||0!==yi(g,S[w-1]));const u=[];u.push(e);for(const g of s){const w=yi(g,e),S=yi(g,r);if(0===w)u[0]=e.Zt();else if(w>0&&S<0)u.push(g),u.push(g.Zt());else if(S>0)break}u.push(r);const d=[];for(let g=0;g<u.length;g+=2){if(this.Cn(u[g],u[g+1]))return[];d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,Os,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,Os,[]]))}return d}Cn(e,r){return yi(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(ni)}getMinOffset(e,r){return oe.mapArray(this.hn(r),s=>this.Pn(e,s).next(u=>u||dt())).next(ni)}}function lh(a){return Dr(a,"collectionParents")}function jo(a){return Dr(a,"indexEntries")}function $o(a){return Dr(a,"indexConfiguration")}function ga(a){return Dr(a,"indexState")}function ni(a){gt(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const u=a[s].indexState.offset;re(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new j(e.readTime,e.documentKey,r)}const Yl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ci{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zu(a,e,r){const s=a.store("mutations"),u=a.store("documentMutations"),d=[],g=IDBKeyRange.only(r.batchId);let w=0;const S=s.J({range:g},(H,q,ce)=>(w++,ce.delete()));d.push(S.next(()=>{gt(1===w)}));const O=[];for(const H of r.mutations){const q=Cn(e,H.key.path,r.batchId);d.push(u.delete(q)),O.push(H.key)}return oe.waitFor(d).next(()=>O)}function Xl(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw dt();e=a.noDocument}return JSON.stringify(e).length}ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(41943040,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);class Gu{constructor(e,r,s,u){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=u,this.Fn={}}static lt(e,r,s,u){gt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Gu(d,r,s,u)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).J({index:"userMutationsIndex",range:s},(u,d,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(e,r,s,u){const d=Xs(e),g=os(e);return g.add({}).next(w=>{gt("number"==typeof w);const S=new Sc(w,r,s,u),O=function(xe,rt,Et){const ft=Et.baseMutations.map(Wt=>G(xe.ct,Wt)),Ut=Et.mutations.map(Wt=>G(xe.ct,Wt));return{userId:rt,batchId:Et.batchId,localWriteTimeMs:Et.localWriteTime.toMillis(),baseMutations:ft,mutations:Ut}}(this.serializer,this.userId,S),H=[];let q=new zn((ce,xe)=>ot(ce.canonicalString(),xe.canonicalString()));for(const ce of u){const xe=Cn(this.userId,ce.key.path,w);q=q.add(ce.key.path.popLast()),H.push(g.put(O)),H.push(d.put(xe,Vs))}return q.forEach(ce=>{H.push(this.indexManager.addToCollectionParentIndex(e,ce))}),e.addOnCommittedListener(()=>{this.Fn[w]=S.keys()}),oe.waitFor(H).next(()=>S)})}lookupMutationBatch(e,r){return os(e).get(r).next(s=>s?(gt(s.userId===this.userId),Uo(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?oe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const u=s.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return os(e).J({index:"userMutationsIndex",range:u},(g,w,S)=>{w.userId===this.userId&&(gt(w.batchId>=s),d=Uo(this.serializer,w)),S.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return os(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return os(e).U("userMutationsIndex",r).next(s=>s.map(u=>Uo(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=Ur(this.userId,r.path),u=IDBKeyRange.lowerBound(s),d=[];return Xs(e).J({range:u},(g,w,S)=>{const[O,H,q]=g,ce=Tn(H);if(O===this.userId&&r.path.isEqual(ce))return os(e).get(q).next(xe=>{if(!xe)throw dt();gt(xe.userId===this.userId),d.push(Uo(this.serializer,xe))});S.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new zn(ot);const u=[];return r.forEach(d=>{const g=Ur(this.userId,d.path),w=IDBKeyRange.lowerBound(g),S=Xs(e).J({range:w},(O,H,q)=>{const[ce,xe,rt]=O,Et=Tn(xe);ce===this.userId&&d.path.isEqual(Et)?s=s.add(rt):q.done()});u.push(S)}),oe.waitFor(u).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1,d=Ur(this.userId,s),g=IDBKeyRange.lowerBound(d);let w=new zn(ot);return Xs(e).J({range:g},(S,O,H)=>{const[q,ce,xe]=S,rt=Tn(ce);q===this.userId&&s.isPrefixOf(rt)?rt.length===u&&(w=w.add(xe)):H.done()}).next(()=>this.xn(e,w))}xn(e,r){const s=[],u=[];return r.forEach(d=>{u.push(os(e).get(d).next(g=>{if(null===g)throw dt();gt(g.userId===this.userId),s.push(Uo(this.serializer,g))}))}),oe.waitFor(u).next(()=>s)}removeMutationBatch(e,r){return zu(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),oe.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return oe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return Xs(e).J({range:s},(d,g,w)=>{if(d[0]===this.userId){const S=Tn(d[1]);u.push(S)}else w.done()}).next(()=>{gt(0===u.length)})})}containsKey(e,r){return Bc(e,this.userId,r)}Nn(e){return ma(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bc(a,e,r){const s=Ur(e,r.path),u=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return Xs(a).J({range:d,H:!0},(w,S,O)=>{const[H,q,ce]=w;H===e&&q===u&&(g=!0),O.done()}).next(()=>g)}function os(a){return Dr(a,"mutations")}function Xs(a){return Dr(a,"documentMutations")}function ma(a){return Dr(a,"mutationQueues")}class _o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _o(0)}static kn(){return new _o(-1)}}class dh{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new _o(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>ut.fromTimestamp(new Sn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(e,u)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Js(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(gt(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let u=0;const d=[];return Js(e).J((g,w)=>{const S=mo(w);S.sequenceNumber<=r&&null===s.get(S.targetId)&&(u++,d.push(this.removeTargetData(e,S)))}).next(()=>oe.waitFor(d)).next(()=>u)}forEachTarget(e,r){return Js(e).J((s,u)=>{const d=mo(u);r(d)})}qn(e){return cg(e).get("targetGlobalKey").next(r=>(gt(null!==r),r))}Qn(e,r){return cg(e).put("targetGlobalKey",r)}Kn(e,r){return Js(e).put(fa(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=$r(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Js(e).J({range:u,index:"queryTargetsIndex"},(g,w,S)=>{const O=mo(w);ts(r,O.target)&&(d=O,S.done())}).next(()=>d)}addMatchingKeys(e,r,s){const u=[],d=yo(e);return r.forEach(g=>{const w=xt(g.path);u.push(d.put({targetId:s,path:w})),u.push(this.referenceDelegate.addReference(e,s,g))}),oe.waitFor(u)}removeMatchingKeys(e,r,s){const u=yo(e);return oe.forEach(r,d=>{const g=xt(d.path);return oe.waitFor([u.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,r){const s=yo(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=yo(e);let d=V();return u.J({range:s,H:!0},(g,w,S)=>{const O=Tn(g[1]),H=new It(O);d=d.add(H)}).next(()=>d)}containsKey(e,r){const s=xt(r.path),u=IDBKeyRange.bound([s],[un(s)],!1,!0);let d=0;return yo(e).J({index:"documentTargetsIndex",H:!0,range:u},([g,w],S,O)=>{0!==g&&(d++,O.done())}).next(()=>d>0)}ot(e,r){return Js(e).get(r).next(s=>s?mo(s):null)}}function Js(a){return Dr(a,"targets")}function cg(a){return Dr(a,"targetGlobal")}function yo(a){return Dr(a,"targetDocuments")}function lg([a,e],[r,s]){const u=ot(a,r);return 0===u?ot(e,s):u}class y_{constructor(e){this.Un=e,this.buffer=new zn(lg),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();lg(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Df{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){pi(s)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ct(s)}yield r.Hn(3e5)}))}}class v_{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return oe.resolve(Ne.oe);const s=new y_(r);return this.Jn.forEachTarget(e,u=>s.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(e,u=>s.zn(u))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Yl)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yl):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,u,d,g,w,S,O;const H=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(q=>(q>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${q}`),u=this.params.maximumSequenceNumbersToCollect):u=q,g=Date.now(),this.nthSequenceNumber(e,u))).next(q=>(s=q,w=Date.now(),this.removeTargets(e,s,r))).next(q=>(d=q,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(q=>(O=Date.now(),$n()<=me.$b.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-H}ms\n\tDetermined least recently used ${u} in `+(w-g)+`ms\n\tRemoved ${d} targets in `+(S-w)+`ms\n\tRemoved ${q} documents in `+(O-S)+`ms\nTotal Duration: ${O-H}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:q})))}}class I_{constructor(e,r){this.db=e,this.garbageCollector=function Jl(a,e){return new v_(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(u=>s+u))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,u)=>r(u))}addReference(e,r,s){return Ho(e,s)}removeReference(e,r,s){return Ho(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return Ho(e,r)}nr(e,r){return function(u,d){let g=!1;return ma(u).Y(w=>Bc(u,w,d).next(S=>(S&&(g=!0),oe.resolve(!S)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(e,(g,w)=>{if(w<=r){const S=this.nr(e,g).next(O=>{if(!O)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,ut.min()),yo(e).delete([0,xt(g.path)])))});u.push(S)}}).next(()=>oe.waitFor(u)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return Ho(e,r)}tr(e,r){const s=yo(e);let u,d=Ne.oe;return s.J({index:"documentTargetsIndex"},([g,w],{path:S,sequenceNumber:O})=>{0===g?(d!==Ne.oe&&r(new It(Tn(u)),d),d=O,u=S):d=Ne.oe}).next(()=>{d!==Ne.oe&&r(new It(Tn(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ho(a,e){return yo(a).put((u=a.currentSequenceNumber,{targetId:0,path:xt(e.path),sequenceNumber:u}));var u}class Cf{constructor(){this.changes=new ji(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?oe.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return Za(e).put(s)}removeEntry(e,r,s){return Za(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Fu(g),w[w.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=Nn.newInvalidDocument(r);return Za(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(li(r))},(u,d)=>{s=this.ir(r,d)}).next(()=>s)}sr(e,r){let s={size:0,document:Nn.newInvalidDocument(r)};return Za(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(li(r))},(u,d)=>{s={document:this.ir(r,d),size:Xl(d)}}).next(()=>s)}getEntries(e,r){let s=Di();return this._r(e,r,(u,d)=>{const g=this.ir(u,d);s=s.insert(u,g)}).next(()=>s)}ar(e,r){let s=Di(),u=new fn(It.comparator);return this._r(e,r,(d,g)=>{const w=this.ir(d,g);s=s.insert(d,w),u=u.insert(d,Xl(g))}).next(()=>({documents:s,ur:u}))}_r(e,r,s){if(r.isEmpty())return oe.resolve();let u=new zn(hh);r.forEach(S=>u=u.add(S));const d=IDBKeyRange.bound(li(u.first()),li(u.last())),g=u.getIterator();let w=g.getNext();return Za(e).J({index:"documentKeyIndex",range:d},(S,O,H)=>{const q=It.fromSegments([...O.prefixPath,O.collectionGroup,O.documentId]);for(;w&&hh(w,q)<0;)s(w,null),w=g.getNext();w&&w.isEqual(q)&&(s(w,O),w=g.hasNext()?g.getNext():null),w?H.$(li(w)):H.done()}).next(()=>{for(;w;)s(w,null),w=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,r,s,u,d){const g=r.path,w=[g.popLast().toArray(),g.lastSegment(),Fu(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Za(e).U(IDBKeyRange.bound(w,S,!0)).next(O=>{d?.incrementDocumentReadCount(O.length);let H=Di();for(const q of O){const ce=this.ir(It.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);ce.isFoundDocument()&&(zs(r,ce)||u.has(ce.key))&&(H=H.insert(ce.key,ce))}return H})}getAllFromCollectionGroup(e,r,s,u){let d=Di();const g=eu(r,s),w=eu(r,j.max());return Za(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,w,!0)},(S,O,H)=>{const q=this.ir(It.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);d=d.insert(q.key,q),d.size===u&&H.done()}).next(()=>d)}newChangeBuffer(e){return new hg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Wu(e).get("remoteDocumentGlobalKey").next(r=>(gt(!!r),r))}rr(e,r){return Wu(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function zl(a,e){let r;if(e.document)r=v(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=It.fromSegments(e.noDocument.path),u=Qs(e.noDocument.readTime);r=Nn.newNoDocument(s,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const s=It.fromSegments(e.unknownDocument.path),u=Qs(e.unknownDocument.version);r=Nn.newUnknownDocument(s,u)}}return e.readTime&&r.setReadTime(function(u){const d=new Sn(u[0],u[1]);return ut.fromTimestamp(d)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(ut.min()))return s}return Nn.newInvalidDocument(e)}}function Yr(a){return new dg(a)}class hg extends Cf{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new ji(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const r=[];let s=0,u=new zn((d,g)=>ot(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const w=this.lr.get(d);if(r.push(this.cr.removeEntry(e,d,w.readTime)),g.isValidDocument()){const S=Ka(this.cr.serializer,g);u=u.add(d.path.popLast());const O=Xl(S);s+=O-w.size,r.push(this.cr.addEntry(e,d,S))}else if(s-=w.size,this.trackRemovals){const S=Ka(this.cr.serializer,g.convertToNoDocument(ut.min()));r.push(this.cr.addEntry(e,d,S))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,d))}),r.push(this.cr.updateMetadata(e,s)),oe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:u})=>(u.forEach((d,g)=>{this.lr.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function Wu(a){return Dr(a,"remoteDocumentGlobal")}function Za(a){return Dr(a,"remoteDocumentsV14")}function li(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eu(a,e){const r=e.documentKey.path.toArray();return[a,Fu(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function hh(a,e){const r=a.path.toArray(),s=e.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<s.length-2;++d)if(u=ot(r[d],s[d]),u)return u;return u=ot(r.length,s.length),u||(u=ot(r[r.length-2],s[s.length-2]),u||ot(r[r.length-1],s[s.length-1]))}class Zl{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Ku{constructor(e,r,s,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==s&&Ba(s.mutation,u,lr.empty(),Sn.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,V()).next(()=>s))}getLocalViewOfDocuments(e,r,s=V()){const u=$i();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,s).next(d=>{let g=Ns();return d.forEach((w,S)=>{g=g.insert(w,S.overlayedDocument)}),g}))}getOverlayedDocuments(e,r){const s=$i();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,V()))}populateOverlays(e,r,s){const u=[];return s.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,w)=>{r.set(g,w)})})}computeViews(e,r,s,u){let d=Di();const g=co(),w=co();return r.forEach((S,O)=>{const H=s.get(O.key);u.has(O.key)&&(void 0===H||H.mutation instanceof ho)?d=d.insert(O.key,O):void 0!==H?(g.set(O.key,H.mutation.getFieldMask()),Ba(H.mutation,O,H.mutation.getFieldMask(),Sn.now())):g.set(O.key,lr.empty())}),this.recalculateAndSaveOverlays(e,d).next(S=>(S.forEach((O,H)=>g.set(O,H)),r.forEach((O,H)=>{var q;return w.set(O,new Zl(H,null!==(q=g.get(O))&&void 0!==q?q:null))}),w))}recalculateAndSaveOverlays(e,r){const s=co();let u=new fn((g,w)=>g-w),d=V();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(g=>{for(const w of g)w.keys().forEach(S=>{const O=r.get(S);if(null===O)return;let H=s.get(S)||lr.empty();H=w.applyToLocalView(O,H),s.set(S,H);const q=(u.get(w.batchId)||V()).add(S);u=u.insert(w.batchId,q)})}).next(()=>{const g=[],w=u.getReverseIterator();for(;w.hasNext();){const S=w.getNext(),O=S.key,H=S.value,q=Va();H.forEach(ce=>{if(!d.has(ce)){const xe=lo(r.get(ce),s.get(ce));null!==xe&&q.set(ce,xe),d=d.add(ce)}}),g.push(this.documentOverlayCache.saveOverlays(e,O,q))}return oe.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,u){return It.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Hs(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,u):this.getDocumentsMatchingCollectionQuery(e,r,s,u);var g}getNextDocuments(e,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,u-d.size):oe.resolve($i());let w=-1,S=d;return g.next(O=>oe.forEach(O,(H,q)=>(w<q.largestBatchId&&(w=q.largestBatchId),d.get(H)?oe.resolve():this.remoteDocumentCache.getEntry(e,H).next(ce=>{S=S.insert(H,ce)}))).next(()=>this.populateOverlays(e,O,d)).next(()=>this.computeViews(e,S,O,V())).next(H=>({batchId:w,changes:bc(H)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new It(r)).next(s=>{let u=Ns();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,s,u){const d=r.collectionGroup;let g=Ns();return this.indexManager.getCollectionParents(e,d).next(w=>oe.forEach(w,S=>{const O=(q=r,ce=S.child(d),new vs(ce,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ce;return this.getDocumentsMatchingCollectionQuery(e,O,s,u).next(H=>{H.forEach((q,ce)=>{g=g.insert(q,ce)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,s,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,d,u))).next(g=>{d.forEach((S,O)=>{const H=O.getKey();null===g.get(H)&&(g=g.insert(H,Nn.newInvalidDocument(H)))});let w=Ns();return g.forEach((S,O)=>{const H=d.get(S);void 0!==H&&Ba(H.mutation,O,lr.empty(),Sn.now()),zs(r,O)&&(w=w.insert(S,O))}),w})}}class fg{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return oe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:rr(u.createTime)}),oe.resolve();var u}getNamedQuery(e,r){return oe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(u=r).name,query:qa(u.bundledQuery),readTime:rr(u.readTime)}),oe.resolve();var u}}class pg{constructor(){this.overlays=new fn(It.comparator),this.Ir=new Map}getOverlay(e,r){return oe.resolve(this.overlays.get(r))}getOverlays(e,r){const s=$i();return oe.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((u,d)=>{this.ht(e,r,d)}),oe.resolve()}removeOverlaysForBatchId(e,r,s){const u=this.Ir.get(s);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(s)),oe.resolve()}getOverlaysForCollection(e,r,s){const u=$i(),d=r.length+1,g=new It(r.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const S=w.getNext().value,O=S.getKey();if(!r.isPrefixOf(O.path))break;O.path.length===d&&S.largestBatchId>s&&u.set(S.getKey(),S)}return oe.resolve(u)}getOverlaysForCollectionGroup(e,r,s,u){let d=new fn((O,H)=>O-H);const g=this.overlays.getIterator();for(;g.hasNext();){const O=g.getNext().value;if(O.getKey().getCollectionGroup()===r&&O.largestBatchId>s){let H=d.get(O.largestBatchId);null===H&&(H=$i(),d=d.insert(O.largestBatchId,H)),H.set(O.getKey(),O)}}const w=$i(),S=d.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((O,H)=>w.set(O,H)),!(w.size()>=u)););return oe.resolve(w)}ht(e,r,s){const u=this.overlays.get(s.key);if(null!==u){const g=this.Ir.get(u.largestBatchId).delete(s.key);this.Ir.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new xu(r,s));let d=this.Ir.get(r);void 0===d&&(d=V(),this.Ir.set(r,d)),this.Ir.set(r,d.add(s.key))}}class gg{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,oe.resolve()}}class bf{constructor(){this.Tr=new zn(or.Er),this.dr=new zn(or.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new or(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new or(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new It(new Jt([])),s=new or(r,e),u=new or(r,e+1),d=[];return this.dr.forEachInRange([s,u],g=>{this.Vr(g),d.push(g.key)}),d}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new It(new Jt([])),s=new or(r,e),u=new or(r,e+1);let d=V();return this.dr.forEachInRange([s,u],g=>{d=d.add(g.key)}),d}containsKey(e){const r=new or(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class or{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return It.comparator(e.key,r.key)||ot(e.wr,r.wr)}static Ar(e,r){return ot(e.wr,r.wr)||It.comparator(e.key,r.key)}}class fh{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new zn(or.Er)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,u){const d=this.Sr;this.Sr++;const g=new Sc(d,r,s,u);this.mutationQueue.push(g);for(const w of u)this.br=this.br.add(new or(w.key,d)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return oe.resolve(g)}lookupMutationBatch(e,r){return oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.vr(r+1),d=u<0?0:u;return oe.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new or(r,0),u=new or(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([s,u],g=>{const w=this.Dr(g.wr);d.push(w)}),oe.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new zn(ot);return r.forEach(u=>{const d=new or(u,0),g=new or(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,g],w=>{s=s.add(w.wr)})}),oe.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1;let d=s;It.isDocumentKey(d)||(d=d.child(""));const g=new or(new It(d),0);let w=new zn(ot);return this.br.forEachWhile(S=>{const O=S.key.path;return!!s.isPrefixOf(O)&&(O.length===u&&(w=w.add(S.wr)),!0)},g),oe.resolve(this.Cr(w))}Cr(e){const r=[];return e.forEach(s=>{const u=this.Dr(s);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){gt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return oe.forEach(r.mutations,u=>{const d=new or(u.key,r.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new or(r,0),u=this.br.firstAfterOrEqual(s);return oe.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return oe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class qu{constructor(e){this.Mr=e,this.docs=new fn(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,u=this.docs.get(s),d=u?u.size:0,g=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return oe.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(r))}getEntries(e,r){let s=Di();return r.forEach(u=>{const d=this.docs.get(u);s=s.insert(u,d?d.document.mutableCopy():Nn.newInvalidDocument(u))}),oe.resolve(s)}getDocumentsMatchingQuery(e,r,s,u){let d=Di();const g=r.path,w=new It(g.child("")),S=this.docs.getIteratorFrom(w);for(;S.hasNext();){const{key:O,value:{document:H}}=S.getNext();if(!g.isPrefixOf(O.path))break;O.path.length>g.length+1||re(k(H),s)<=0||(u.has(H.key)||zs(r,H))&&(d=d.insert(H.key,H.mutableCopy()))}return oe.resolve(d)}getAllFromCollectionGroup(e,r,s,u){dt()}Or(e,r){return oe.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new Sf(this)}getSize(e){return oe.resolve(this.size)}}class Sf extends Cf{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(e,u)):this.cr.removeEntry(s)}),oe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class ed{constructor(e){this.persistence=e,this.Nr=new ji(r=>$r(r),ts),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bf,this.targetCount=0,this.kr=_o.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,u)=>r(u)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new _o(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,oe.resolve()}updateTargetData(e,r){return this.Kn(r),oe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,r,s){let u=0;const d=[];return this.Nr.forEach((g,w)=>{w.sequenceNumber<=r&&null===s.get(w.targetId)&&(this.Nr.delete(g),d.push(this.removeMatchingKeysForTargetId(e,w.targetId)),u++)}),oe.waitFor(d).next(()=>u)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return oe.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),oe.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),oe.waitFor(d)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),oe.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return oe.resolve(s)}containsKey(e,r){return oe.resolve(this.Br.containsKey(r))}}class ph{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ne(0),this.Kr=!1,this.Kr=!0,this.$r=new gg,this.referenceDelegate=e(this),this.Ur=new ed(this),this.indexManager=new ag,this.remoteDocumentCache=new qu(s=>this.referenceDelegate.Wr(s)),this.serializer=new Wa(r),this.Gr=new fg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new pg,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new fh(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){$e("MemoryPersistence","Starting transaction:",e);const u=new gh(this.Qr.next());return this.referenceDelegate.zr(),s(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(e,r){return oe.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class gh extends tt{constructor(e){super(),this.currentSequenceNumber=e}}class td{constructor(e){this.persistence=e,this.Jr=new bf,this.Yr=null}static Zr(e){return new td(e)}get Xr(){if(this.Yr)return this.Yr;throw dt()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),oe.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),oe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,s=>{const u=It.fromPath(s);return this.ei(e,u).next(d=>{d||r.removeEntry(u,ut.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return oe.or([()=>oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Rf{constructor(e){this.serializer=e}O(e,r,s,u){const d=new pn("createOrUpgrade",r);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zn,{unique:!0}),S.createObjectStore("documentMutations"),nd(e),function(S){S.createObjectStore("remoteDocuments")}(e));let g=oe.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),nd(e)),g=g.next(()=>function(S){const O=S.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ut.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",H)}(d))),s<4&&u>=4&&(0!==s&&(g=g.next(()=>function(S,O){return O.store("mutations").U().next(H=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zn,{unique:!0});const q=O.store("mutations"),ce=H.map(xe=>q.put(xe));return oe.waitFor(ce)})}(e,d))),g=g.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(g=g.next(()=>this.ni(d))),s<6&&u>=6&&(g=g.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ri(d)))),s<7&&u>=7&&(g=g.next(()=>this.ii(d))),s<8&&u>=8&&(g=g.next(()=>this.si(e,d))),s<9&&u>=9&&(g=g.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(g=g.next(()=>this.oi(d))),s<11&&u>=11&&(g=g.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(g=g.next(()=>{!function(S){const O=S.createObjectStore("documentOverlays",{keyPath:Us});O.createIndex("collectionPathOverlayIndex",Ss,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",Sa,{unique:!1})}(e)})),s<13&&u>=13&&(g=g.next(()=>function(S){const O=S.createObjectStore("remoteDocumentsV14",{keyPath:fs});O.createIndex("documentKeyIndex",Eu),O.createIndex("collectionGroupIndex",no)}(e)).next(()=>this._i(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(g=g.next(()=>this.ai(e,d))),s<15&&u>=15&&(g=g.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:Pi}).createIndex("sequenceNumberIndex",ba,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:Ji}).createIndex("documentKeyIndex",So,{unique:!1})}(e))),s<16&&u>=16&&(g=g.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&u>=17&&(g=g.next(()=>{!function(S){S.createObjectStore("globals",{keyPath:"name"})}(e)})),g}ri(e){let r=0;return e.store("remoteDocuments").J((s,u)=>{r+=Xl(u)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(u=>oe.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",g).next(w=>oe.forEach(w,S=>{gt(S.userId===d.userId);const O=Uo(this.serializer,S);return zu(e,d.userId,O).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return s.J((g,w)=>{const S=new Jt(g),O=[0,xt(S)];d.push(r.get(O).next(H=>H?oe.resolve():r.put({targetId:0,path:xt(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>oe.waitFor(d))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:ro});const s=r.store("collectionParents"),u=new Hu,d=g=>{if(u.add(g)){const w=g.lastSegment(),S=g.popLast();return s.put({collectionId:w,parent:xt(S)})}};return r.store("remoteDocuments").J({H:!0},(g,w)=>{const S=new Jt(g);return d(S.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([g,w,S],O)=>{const H=Tn(w);return d(H.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,u)=>{const d=mo(u),g=fa(this.serializer,d);return r.put(g)})}_i(e,r){const s=r.store("remoteDocuments"),u=[];return s.J((d,g)=>{const w=r.store("remoteDocumentsV14"),S=(q=g,q.document?new It(Jt.fromString(q.document.name).popFirst(5)):q.noDocument?It.fromSegments(q.noDocument.path):q.unknownDocument?It.fromSegments(q.unknownDocument.path):dt()).path.toArray(),O={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var q;u.push(w.put(O))}).next(()=>oe.waitFor(u))}ai(e,r){const s=r.store("mutations"),u=Yr(this.serializer),d=new ph(td.Zr,this.serializer.ct);return s.U().next(g=>{const w=new Map;return g.forEach(S=>{var O;let H=null!==(O=w.get(S.userId))&&void 0!==O?O:V();Uo(this.serializer,S).keys().forEach(q=>H=H.add(q)),w.set(S.userId,H)}),oe.forEach(w,(S,O)=>{const H=new Le(O),q=Gl.lt(this.serializer,H),ce=d.getIndexManager(H),xe=Gu.lt(H,this.serializer,ce,d.referenceDelegate);return new Ku(u,xe,q,ce).recalculateAndSaveOverlaysForDocumentKeys(new ia(r,Ne.oe),S).next()})})}}function nd(a){a.createObjectStore("targetDocuments",{keyPath:na}).createIndex("documentTargetsIndex",si,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tu,{unique:!0}),a.createObjectStore("targetGlobal")}const $c="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hc{constructor(e,r,s,u,d,g,w,S,O,H,q=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=d,this.window=g,this.document=w,this.ci=O,this.li=H,this.hi=q,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=ce=>Promise.resolve(),!Hc.D())throw new We(Re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new I_(this,u),this.Ai=r+"main",this.serializer=new Wa(S),this.Ri=new Dn(this.Ai,this.hi,new Rf(this.serializer)),this.$r=new Fc,this.Ur=new dh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Yr(this.serializer),this.Gr=new og,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===H&&kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(Re.FAILED_PRECONDITION,$c);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ne(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,ye.A)(function*(u){if(r.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,ye.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ye.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_a(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(pi(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return tu(e).get("owner").next(r=>oe.resolve(this.vi(r)))}Ci(e){return _a(e).delete(this.clientId)}Fi(){var e=this;return(0,ye.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Dr(s,"clientMetadata");return u.U().next(d=>{const g=e.xi(d,18e5),w=d.filter(S=>-1===g.indexOf(S));return oe.forEach(w,S=>u.delete(S.clientId)).next(()=>w)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?oe.resolve(!0):tu(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new We(Re.FAILED_PRECONDITION,$c);return!1}}return!(!this.networkEnabled||!this.inForeground)||_a(e).U().next(s=>void 0===this.xi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&$e("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,ye.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new ia(r,Ne.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_a(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Gu.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ug(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Gl.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){$e("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",d=17===(S=this.hi)?Ma:16===S?Au:15===S?ra:14===S?wu:13===S?Pa:12===S?Ra:11===S?Ti:void dt();var S;let g;return this.Ri.runTransaction(e,u,d,w=>(g=new ia(w,this.Qr?this.Qr.next():Ne.oe),"readwrite-primary"===r?this.wi(g).next(S=>!!S||this.Si(g)).next(S=>{if(!S)throw kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new We(Re.FAILED_PRECONDITION,ae);return s(g)}).next(S=>this.Di(g).next(()=>S)):this.Ki(g).next(()=>s(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Ki(e){return tu(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new We(Re.FAILED_PRECONDITION,$c)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tu(e).put("owner",r)}static D(){return Dn.D()}bi(e){const r=tu(e);return r.get("owner").next(s=>this.vi(s)?($e("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):oe.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(kt(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,ke.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return $e("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return kt("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){kt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tu(a){return Dr(a,"owner")}function _a(a){return Dr(a,"clientMetadata")}function Qu(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class nu{constructor(e,r,s,u){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=u}static Wi(e,r){let s=V(),u=V();for(const d of r.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new nu(e,r.fromCache,s,u)}}class Pf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mh{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ke.nr)()?8:cn((0,ke.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,u){const d={result:null};return this.Yi(e,r).next(g=>{d.result=g}).next(()=>{if(!d.result)return this.Zi(e,r,u,s).next(g=>{d.result=g})}).next(()=>{if(d.result)return;const g=new Pf;return this.Xi(e,r,g).next(w=>{if(d.result=w,this.zi)return this.es(e,r,g,w.size)})}).next(()=>d.result)}es(e,r,s,u){return s.documentReadCount<this.ji?($n()<=me.$b.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",_i(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):($n()<=me.$b.DEBUG&&$e("QueryEngine","Query:",_i(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Hi*u?($n()<=me.$b.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",_i(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(r))):oe.resolve())}Yi(e,r){if(Is(r))return oe.resolve(null);let s=Sr(r);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=uo(r,null,"F"),s=Sr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=V(...d);return this.Ji.getDocuments(e,g).next(w=>this.indexManager.getMinOffset(e,s).next(S=>{const O=this.ts(r,w);return this.ns(r,O,g,S.readTime)?this.Yi(e,uo(r,null,"F")):this.rs(e,O,r,S)}))})))}Zi(e,r,s,u){return Is(r)||u.isEqual(ut.min())?oe.resolve(null):this.Ji.getDocuments(e,s).next(d=>{const g=this.ts(r,d);return this.ns(r,g,s,u)?oe.resolve(null):($n()<=me.$b.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),_i(r)),this.rs(e,g,r,z(u,-1)).next(w=>w))})}ts(e,r){let s=new zn(Vl(e));return r.forEach((u,d)=>{zs(e,d)&&(s=s.add(d))}),s}ns(e,r,s,u){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const d="F"===e.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(e,r,s){return $n()<=me.$b.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",_i(r)),this.Ji.getDocumentsMatchingQuery(e,r,j.min(),s)}rs(e,r,s,u){return this.Ji.getDocumentsMatchingQuery(e,s,u).next(d=>(r.forEach(g=>{d=d.insert(g.key,g)}),d))}}class _h{constructor(e,r,s,u){this.persistence=e,this.ss=r,this.serializer=u,this.os=new fn(ot),this._s=new ji(d=>$r(d),ts),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ku(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function zc(a,e,r,s){return new _h(a,e,r,s)}function yh(a,e){return vh.apply(this,arguments)}function vh(){return(vh=(0,ye.A)(function*(a,e){const r=Je(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(d=>(u=d,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],w=[];let S=V();for(const O of u){g.push(O.batchId);for(const H of O.mutations)S=S.add(H.key)}for(const O of d){w.push(O.batchId);for(const H of O.mutations)S=S.add(H.key)}return r.localDocuments.getDocuments(s,S).next(O=>({hs:O,removedBatchIds:g,addedBatchIds:w}))})})})).apply(this,arguments)}function ru(a){const e=Je(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Nf(a,e,r){let s=V(),u=V();return r.forEach(d=>s=s.add(d)),e.getEntries(a,s).next(d=>{let g=Di();return r.forEach((w,S)=>{const O=d.get(w);S.isFoundDocument()!==O.isFoundDocument()&&(u=u.add(w)),S.isNoDocument()&&S.version.isEqual(ut.min())?(e.removeEntry(w,S.readTime),g=g.insert(w,S)):!O.isValidDocument()||S.version.compareTo(O.version)>0||0===S.version.compareTo(O.version)&&O.hasPendingWrites?(e.addEntry(S),g=g.insert(w,S)):$e("LocalStore","Ignoring outdated watch update for ",w,". Current version:",O.version," Watch version:",S.version)}),{Ps:g,Is:u}})}function Yu(a,e){const r=Je(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function iu(a,e){const r=Je(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.Ur.getTargetData(s,e).next(d=>d?(u=d,oe.resolve(u)):r.Ur.allocateTargetId(s).next(g=>(u=new Vo(e,g,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.os.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function Xu(a,e,r){return id.apply(this,arguments)}function id(){return(id=(0,ye.A)(function*(a,e,r){const s=Je(a),u=s.os.get(e),d=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!pi(g))throw g;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.os=s.os.remove(e),s._s.delete(u.target)})).apply(this,arguments)}function sd(a,e,r){const s=Je(a);let u=ut.min(),d=V();return s.persistence.runTransaction("Execute query","readwrite",g=>function(S,O,H){const q=Je(S),ce=q._s.get(H);return void 0!==ce?oe.resolve(q.os.get(ce)):q.Ur.getTargetData(O,H)}(s,g,Sr(e)).next(w=>{if(w)return u=w.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(g,w.targetId).next(S=>{d=S})}).next(()=>s.ss.getDocumentsMatchingQuery(g,e,r?u:ut.min(),r?d:V())).next(w=>(Gc(s,Fa(e),w),{documents:w,Ts:d})))}function od(a,e){const r=Je(a),s=Je(r.Ur),u=r.os.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>s.ot(d,e).next(g=>g?g.target:null))}function xf(a,e){const r=Je(a),s=r.us.get(e)||ut.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,e,z(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Gc(r,e,u),u))}function Gc(a,e,r){let s=a.us.get(e)||ut.min();r.forEach((u,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),a.us.set(e,s)}function Ih(){return(Ih=(0,ye.A)(function*(a,e,r,s){const u=Je(a);let d=V(),g=Di();for(const O of r){const H=e.Es(O.metadata.name);O.document&&(d=d.add(H));const q=e.ds(O);q.setReadTime(e.As(O.metadata.readTime)),g=g.insert(H,q)}const w=u.cs.newChangeBuffer({trackRemovals:!0}),S=yield iu(u,(H=s,Sr(Bi(Jt.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",O=>Nf(O,w,g).next(H=>(w.apply(O),H)).next(H=>u.Ur.removeMatchingKeysForTargetId(O,S.targetId).next(()=>u.Ur.addMatchingKeys(O,d,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(O,H.Ps,H.Is)).next(()=>H.Ps)))})).apply(this,arguments)}function Of(a,e){return ud.apply(this,arguments)}function ud(){return(ud=(0,ye.A)(function*(a,e,r=V()){const s=yield iu(a,Sr(qa(e.bundledQuery))),u=Je(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=rr(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return u.Gr.saveNamedQuery(d,e);const w=s.withResumeToken(yt.EMPTY_BYTE_STRING,g);return u.os=u.os.insert(w.targetId,w),u.Ur.updateTargetData(d,w).next(()=>u.Ur.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,s.targetId)).next(()=>u.Gr.saveNamedQuery(d,e))})})).apply(this,arguments)}function Eh(a,e){return`firestore_clients_${a}_${e}`}function mg(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Th(a,e){return`firestore_targets_${a}_${e}`}class cd{constructor(e,r,s,u){this.user=e,this.batchId=r,this.state=s,this.error=u}static Rs(e,r,s){const u=JSON.parse(s);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new We(u.error.code,u.error.message))),g?new cd(e,r,u.state,d):(kt("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class su{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new We(s.error.code,s.error.message))),d?new su(e,s.state,u):(kt("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ld{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,d=F();for(let g=0;u&&g<s.activeTargetIds.length;++g)u=At(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return u?new ld(e,d):(kt("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class dd{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new dd(r.clientId,r.onlineState):(kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Wc{constructor(){this.activeTargetIds=F()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kf{constructor(e,r,s,u,d){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new fn(ot),this.started=!1,this.bs=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=Eh(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Wc),this.Cs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.A)(function*(){const r=yield e.syncEngine.Qi();for(const u of r){if(u===e.ps)continue;const d=e.getItem(Eh(e.persistenceKey,u));if(d){const g=ld.Rs(u,d);g&&(e.Ss=e.Ss.insert(g.clientId,g))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const u=e.Ls(s);u&&e.Bs(u)}for(const u of e.bs)e.ws(u);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e,r=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(Th(this.persistenceKey,e));if(u){const d=su.Rs(e,u);d&&(s=d.state)}}return r&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Th(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(u=>{this.Qs(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return $e("SharedClientState","READ",e,r),r}setItem(e,r){$e("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if($e("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ye.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const u=r.Gs(s.key);return r.zs(u,null)}{const u=r.js(s.key,s.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const u=r.Hs(s.key,s.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const u=r.Ys(s.key,s.newValue);if(u)return r.Zs(u)}}else if(s.key===r.xs){if(null!==s.newValue){const u=r.Ls(s.newValue);if(u)return r.Bs(u)}}else if(s.key===r.vs){const u=function(g){let w=Ne.oe;if(null!=g)try{const S=JSON.parse(g);gt("number"==typeof S),w=S}catch(S){kt("SharedClientState","Failed to read sequence number from WebStorage",S)}return w}(s.newValue);u!==Ne.oe&&r.sequenceNumberHandler(u)}else if(s.key===r.Os){const u=r.Xs(s.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const u=new cd(this.currentUser,e,r,s),d=mg(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Vs())}Qs(e){const r=mg(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const u=Th(this.persistenceKey,e),d=new su(e,r,s);this.setItem(u,d.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return ld.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),u=Number(s[1]);return cd.Rs(new Le(void 0!==s[2]?s[2]:null),u,r)}Ys(e,r){const s=this.Ms.exec(e),u=Number(s[1]);return su.Rs(u,r)}Ls(e){return dd.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,ye.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),u=this.ks(this.Ss),d=this.ks(s),g=[],w=[];return d.forEach(S=>{u.has(S)||g.push(S)}),u.forEach(S=>{d.has(S)||w.push(S)}),this.syncEngine.io(g,w).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=F();return e.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class wh{constructor(){this.so=new Wc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wc,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lf{_o(e){}shutdown(){}}class _g{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ah=null;function Ju(){return null===Ah?Ah=268435456+Math.round(2147483648*Math.random()):Ah++,"0x"+Ah.toString(16)}const hd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fd{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const vi="WebChannelConnection";class Dh extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,s,u,d,g){const w=Ju(),S=this.xo(r,s.toUriEncodedString());$e("RestConnection",`Sending RPC '${r}' ${w}:`,S,u);const O={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(O,d,g),this.No(r,S,O,u).then(H=>($e("RestConnection",`Received RPC '${r}' ${w}: `,H),H),H=>{throw Hn("RestConnection",`RPC '${r}' ${w} failed with error: `,H,"url: ",S,"request:",u),H})}Lo(r,s,u,d,g,w){return this.Mo(r,s,u,d,g)}Oo(r,s,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+st,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((d,g)=>r[g]=d),u&&u.headers.forEach((d,g)=>r[g]=d)}xo(r,s){return`${this.Do}/v1/${s}:${hd[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,u){const d=Ju();return new Promise((g,w)=>{const S=new Xt;S.setWithCredentials(!0),S.listenOnce(Mt.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Rt.NO_ERROR:const H=S.getResponseJson();$e(vi,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(H)),g(H);break;case Rt.TIMEOUT:$e(vi,`RPC '${e}' ${d} timed out`),w(new We(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Rt.HTTP_ERROR:const q=S.getStatus();if($e(vi,`RPC '${e}' ${d} failed with status:`,q,"response text:",S.getResponseText()),q>0){let ce=S.getResponseJson();Array.isArray(ce)&&(ce=ce[0]);const xe=ce?.error;if(xe&&xe.status&&xe.message){const rt=function(ft){const Ut=ft.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(Ut)>=0?Ut:Re.UNKNOWN}(xe.status);w(new We(rt,xe.message))}else w(new We(Re.UNKNOWN,"Server responded with status "+S.getStatus()))}else w(new We(Re.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{$e(vi,`RPC '${e}' ${d} completed.`)}});const O=JSON.stringify(u);$e(vi,`RPC '${e}' ${d} sending request:`,u),S.send(r,"POST",O,s,15)})}Bo(e,r,s){const u=Ju(),d=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Ae(),w=be(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},O=this.longPollingOptions.timeoutSeconds;void 0!==O&&(S.longPollingTimeout=Math.round(1e3*O)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Oo(S.initMessageHeaders,r,s),S.encodeInitMessageHeaders=!0;const H=d.join("");$e(vi,`Creating RPC '${e}' stream ${u}: ${H}`,S);const q=g.createWebChannel(H,S);let ce=!1,xe=!1;const rt=new fd({Io:ft=>{xe?$e(vi,`Not sending because RPC '${e}' stream ${u} is closed:`,ft):(ce||($e(vi,`Opening RPC '${e}' stream ${u} transport.`),q.open(),ce=!0),$e(vi,`RPC '${e}' stream ${u} sending:`,ft),q.send(ft))},To:()=>q.close()}),Et=(ft,Ut,Wt)=>{ft.listen(Ut,Bt=>{try{Wt(Bt)}catch(nn){setTimeout(()=>{throw nn},0)}})};return Et(q,xn.EventType.OPEN,()=>{xe||($e(vi,`RPC '${e}' stream ${u} transport opened.`),rt.yo())}),Et(q,xn.EventType.CLOSE,()=>{xe||(xe=!0,$e(vi,`RPC '${e}' stream ${u} transport closed`),rt.So())}),Et(q,xn.EventType.ERROR,ft=>{xe||(xe=!0,Hn(vi,`RPC '${e}' stream ${u} transport errored:`,ft),rt.So(new We(Re.UNAVAILABLE,"The operation could not be completed")))}),Et(q,xn.EventType.MESSAGE,ft=>{var Ut;if(!xe){const Wt=ft.data[0];gt(!!Wt);const nn=Wt.error||(null===(Ut=Wt[0])||void 0===Ut?void 0:Ut.error);if(nn){$e(vi,`RPC '${e}' stream ${u} received error:`,nn);const Vn=nn.status;let Pn=function(fe){const we=kr[fe];if(void 0!==we)return Bl(we)}(Vn),ve=nn.message;void 0===Pn&&(Pn=Re.INTERNAL,ve="Unknown error status: "+Vn+" with message "+nn.message),xe=!0,rt.So(new We(Pn,ve)),q.close()}else $e(vi,`RPC '${e}' stream ${u} received:`,Wt),rt.bo(Wt)}}),Et(w,pe.STAT_EVENT,ft=>{ft.stat===ue.PROXY?$e(vi,`RPC '${e}' stream ${u} detected buffering proxy`):ft.stat===ue.NOPROXY&&$e(vi,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{rt.wo()},0),rt}}function Ch(){return typeof window<"u"?window:null}function zo(){return typeof document<"u"?document:null}function Zu(a){return new sh(a,!0)}class pd{constructor(e,r,s=1e3,u=1.5,d=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-s);u>0&&$e("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Go{constructor(e,r,s,u,d,g,w,S){this.ui=e,this.Ho=s,this.Jo=u,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=S,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pd(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ye.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ye.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,ye.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===Re.RESOURCE_EXHAUSTED?(kt(r.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===Re.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Yo===r&&this.P_(s,u)},s=>{e(()=>{const u=new We(Re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(u)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{s(()=>this.I_(u))}),this.stream.onMessage(u=>{s(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var e=this;this.state=5,this.t_.Go((0,ye.A)(function*(){e.state=0,e.start()}))}I_(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gd extends Go{constructor(e,r,s,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function N(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:dt(),u=e.targetChange.targetIds||[],d=function(O,H){return O.useProto3Json?(gt(void 0===H||"string"==typeof H),yt.fromBase64String(H||"")):(gt(void 0===H||H instanceof Buffer||H instanceof Uint8Array),yt.fromUint8Array(H||new Uint8Array))}(a,e.targetChange.resumeToken),g=e.targetChange.cause,w=g&&function(O){const H=void 0===O.code?Re.UNKNOWN:Bl(O.code);return new We(H,O.message||"")}(g);r=new $l(s,u,d,w||null)}else if("documentChange"in e){const s=e.documentChange,u=Ks(a,s.document.name),d=rr(s.document.updateTime),g=s.document.createTime?rr(s.document.createTime):ut.min(),w=new ln({mapValue:{fields:s.document.fields}}),S=Nn.newFoundDocument(u,d,g,w);r=new Rn(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=Ks(a,s.document),d=s.readTime?rr(s.readTime):ut.min(),g=Nn.newNoDocument(u,d);r=new Rn([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,u=Ks(a,s.document);r=new Rn([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return dt();{const s=e.filter,{count:u=0,unchangedNames:d}=s,g=new Yt(u,d);r=new Lo(s.targetId,g)}}var O;return r}(this.serializer,e),s=function(d){if(!("targetChange"in d))return ut.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?ut.min():g.readTime?rr(g.readTime):ut.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=kc(this.serializer),r.addTarget=function(d,g){let w;const S=g.target;if(w=La(S)?{documents:Me(d,S)}:{query:Ct(d,S)._t},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=ws(d,g.resumeToken);const O=ku(d,g.expectedCount);null!==O&&(w.expectedCount=O)}else if(g.snapshotVersion.compareTo(ut.min())>0){w.readTime=wr(d,g.snapshotVersion.toTimestamp());const O=ku(d,g.expectedCount);null!==O&&(w.expectedCount=O)}return w}(this.serializer,e);const s=function In(a,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=kc(this.serializer),r.removeTarget=e,this.a_(r)}}class Kc extends Go{constructor(e,r,s,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function Ue(a,e){return a&&a.length>0?(gt(void 0!==e),a.map(r=>function(u,d){let g=rr(u.updateTime?u.updateTime:d);return g.isEqual(ut.min())&&(g=rr(d)),new ns(g,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=rr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=kc(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>G(this.serializer,s))};this.a_(r)}}class yg extends class{}{constructor(e,r,s,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new We(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Mo(e,$a(r,s),u,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new We(Re.UNKNOWN,d.toString())})}Lo(e,r,s,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.Lo(e,$a(r,s),u,g,w,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new We(Re.UNKNOWN,g.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vg{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kt(r),this.D_=!1):$e("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ig{constructor(e,r,s,u,d){var g=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(w=>{s.enqueueAndForget((0,ye.A)(function*(){var S;vo(g)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,ye.A)(function*(H){const q=Je(H);q.L_.add(4),yield ya(q),q.q_.set("Unknown"),q.L_.delete(4),yield ec(q)}),function O(H){return S.apply(this,arguments)})(g))}))}),this.q_=new vg(s,u)}}function ec(a){return tc.apply(this,arguments)}function tc(){return(tc=(0,ye.A)(function*(a){if(vo(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function ya(a){return qc.apply(this,arguments)}function qc(){return(qc=(0,ye.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function Qc(a,e){const r=Je(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Wo(r)?hr(r):M(r).r_()&&Yc(r,e))}function ou(a,e){const r=Je(a),s=M(r);r.N_.delete(e),s.r_()&&Ff(r,e),0===r.N_.size&&(s.r_()?s.o_():vo(r)&&r.q_.set("Unknown"))}function Yc(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}M(a).A_(e)}function Ff(a,e){a.Q_.xe(e),M(a).R_(e)}function hr(a){a.Q_=new rh({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),M(a).start(),a.q_.v_()}function Wo(a){return vo(a)&&!M(a).n_()&&a.N_.size>0}function vo(a){return 0===Je(a).L_.size}function md(a){a.Q_=void 0}function di(a){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,ye.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function Vf(a){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,ye.A)(function*(a){a.N_.forEach((e,r)=>{Yc(a,e)})})).apply(this,arguments)}function Eg(a,e){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,ye.A)(function*(a,e){md(a),Wo(a)?(a.q_.M_(e),hr(a)):a.q_.set("Unknown")})).apply(this,arguments)}function Uf(a,e,r){return _d.apply(this,arguments)}function _d(){return _d=(0,ye.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof $l&&2===e.state&&e.cause)try{yield(s=(0,ye.A)(function*(d,g){const w=g.cause;for(const S of g.targetIds)d.N_.has(S)&&(yield d.remoteSyncer.rejectListen(S,w),d.N_.delete(S),d.Q_.removeTarget(S))}),function u(d,g){return s.apply(this,arguments)})(a,e)}catch(s){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield yd(a,s)}else if(e instanceof Rn?a.Q_.Ke(e):e instanceof Lo?a.Q_.He(e):a.Q_.We(e),!r.isEqual(ut.min()))try{const s=yield ru(a.localStore);r.compareTo(s)>=0&&(yield function(d,g){const w=d.Q_.rt(g);return w.targetChanges.forEach((S,O)=>{if(S.resumeToken.approximateByteSize()>0){const H=d.N_.get(O);H&&d.N_.set(O,H.withResumeToken(S.resumeToken,g))}}),w.targetMismatches.forEach((S,O)=>{const H=d.N_.get(S);if(!H)return;d.N_.set(S,H.withResumeToken(yt.EMPTY_BYTE_STRING,H.snapshotVersion)),Ff(d,S);const q=new Vo(H.target,S,O,H.sequenceNumber);Yc(d,q)}),d.remoteSyncer.applyRemoteEvent(w)}(a,r))}catch(s){$e("RemoteStore","Failed to raise snapshot:",s),yield yd(a,s)}var s}),_d.apply(this,arguments)}function yd(a,e,r){return vd.apply(this,arguments)}function vd(){return(vd=(0,ye.A)(function*(a,e,r){if(!pi(e))throw e;a.L_.add(1),yield ya(a),a.q_.set("Offline"),r||(r=()=>ru(a.localStore)),a.asyncQueue.enqueueRetryable((0,ye.A)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield ec(a)}))})).apply(this,arguments)}function bh(a,e){return e().catch(r=>yd(a,r,e))}function ri(a){return au.apply(this,arguments)}function au(){return(au=(0,ye.A)(function*(a){const e=Je(a),r=B(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Jc(e);)try{const u=yield Yu(e.localStore,s);if(null===u){0===e.O_.length&&r.o_();break}s=u.batchId,Tg(e,u)}catch(u){yield yd(e,u)}as(e)&&nc(e)})).apply(this,arguments)}function Jc(a){return vo(a)&&a.O_.length<10}function Tg(a,e){a.O_.push(e);const r=B(a);r.r_()&&r.V_&&r.m_(e.mutations)}function as(a){return vo(a)&&!B(a).n_()&&a.O_.length>0}function nc(a){B(a).start()}function Bf(a){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,ye.A)(function*(a){B(a).p_()})).apply(this,arguments)}function jf(a){return rc.apply(this,arguments)}function rc(){return(rc=(0,ye.A)(function*(a){const e=B(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function ic(a,e,r){return sc.apply(this,arguments)}function sc(){return(sc=(0,ye.A)(function*(a,e,r){const s=a.O_.shift(),u=Rc.from(s,e,r);yield bh(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield ri(a)})).apply(this,arguments)}function $f(a,e){return el.apply(this,arguments)}function el(){return el=(0,ye.A)(function*(a,e){var r;e&&B(a).V_&&(yield(r=(0,ye.A)(function*(u,d){if(rs(w=d.code)&&w!==Re.ABORTED){const g=u.O_.shift();B(u).s_(),yield bh(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,d)),yield ri(u)}var w}),function s(u,d){return r.apply(this,arguments)})(a,e)),as(a)&&nc(a)}),el.apply(this,arguments)}function m(a,e){return l.apply(this,arguments)}function l(){return(l=(0,ye.A)(function*(a,e){const r=Je(a);r.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const s=vo(r);r.L_.add(3),yield ya(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield ec(r)})).apply(this,arguments)}function h(a,e){return y.apply(this,arguments)}function y(){return(y=(0,ye.A)(function*(a,e){const r=Je(a);e?(r.L_.delete(2),yield ec(r)):e||(r.L_.add(2),yield ya(r),r.q_.set("Unknown"))})).apply(this,arguments)}function M(a){return a.K_||(a.K_=function(r,s,u){const d=Je(r);return d.w_(),new gd(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:di.bind(null,a),Ro:Vf.bind(null,a),mo:Eg.bind(null,a),d_:Uf.bind(null,a)}),a.B_.push(function(){var e=(0,ye.A)(function*(r){r?(a.K_.s_(),Wo(a)?hr(a):a.q_.set("Unknown")):(yield a.K_.stop(),md(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function B(a){return a.U_||(a.U_=function(r,s,u){const d=Je(r);return d.w_(),new Kc(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Bf.bind(null,a),mo:$f.bind(null,a),f_:jf.bind(null,a),g_:ic.bind(null,a)}),a.B_.push(function(){var e=(0,ye.A)(function*(r){r?(a.U_.s_(),yield ri(a)):(yield a.U_.stop(),a.O_.length>0&&($e("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class ie{constructor(e,r,s,u,d){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=d,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,u,d){const g=Date.now()+s,w=new ie(e,r,g,u,d);return w.start(s),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new We(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Te(a,e){if(kt("AsyncQueue",`${e}: ${a}`),pi(a))return new We(Re.UNAVAILABLE,`${e}: ${a}`);throw a}class qe{constructor(e){this.comparator=e?(r,s)=>e(r,s)||It.comparator(r.key,s.key):(r,s)=>It.comparator(r.key,s.key),this.keyedMap=Ns(),this.sortedSet=new fn(this.comparator)}static emptySet(e){return new qe(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new qe;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Dt{constructor(){this.W_=new fn(It.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):dt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class Nt{constructor(e,r,s,u,d,g,w,S,O){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=S,this.hasCachedResults=O}static fromInitialDocuments(e,r,s,u,d){const g=[];return r.forEach(w=>{g.push({type:0,doc:w})}),new Nt(e,r,qe.emptySet(r),g,s,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Es(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class Vt{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mr{constructor(){this.queries=us(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const u=Je(r),d=u.queries;u.queries=us(),d.forEach((g,w)=>{for(const S of w.j_)S.onError(s)})}(this,new We(Re.ABORTED,"Firestore shutting down"))}}function us(){return new ji(a=>Ms(a),Es)}function uu(a,e){return Io.apply(this,arguments)}function Io(){return(Io=(0,ye.A)(function*(a,e){const r=Je(a);let s=3;const u=e.query;let d=r.queries.get(u);d?!d.H_()&&e.J_()&&(s=2):(d=new Vt,s=e.J_()?0:1);try{switch(s){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(g){const w=Te(g,`Initialization of query '${_i(e.query)}' failed`);return void e.onError(w)}r.queries.set(u,d),d.j_.push(e),e.Z_(r.onlineState),d.z_&&e.X_(d.z_)&&cu(r)})).apply(this,arguments)}function oc(a,e){return tl.apply(this,arguments)}function tl(){return(tl=(0,ye.A)(function*(a,e){const r=Je(a),s=e.query;let u=3;const d=r.queries.get(s);if(d){const g=d.j_.indexOf(e);g>=0&&(d.j_.splice(g,1),0===d.j_.length?u=e.J_()?0:1:!d.H_()&&e.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function Hf(a,e){const r=Je(a);let s=!1;for(const u of e){const g=r.queries.get(u.query);if(g){for(const w of g.j_)w.X_(u)&&(s=!0);g.z_=u}}s&&cu(r)}function zf(a,e,r){const s=Je(a),u=s.queries.get(e);if(u)for(const d of u.j_)d.onError(r);s.queries.delete(e)}function cu(a){a.Y_.forEach(e=>{e.next()})}var Id,nl;(nl=Id||(Id={})).ea="default",nl.Cache="cache";class rl{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Nt(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Nt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Id.Cache}}class Gf{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class ac{constructor(e){this.serializer=e}Es(e){return Ks(this.serializer,e)}ds(e){return e.metadata.exists?v(this.serializer,e.document,!1):Nn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return rr(e)}}class Wf{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sh(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=Jt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new ac(this.serializer);for(const u of e)if(u.metadata.queries){const d=s.Es(u.metadata.name);for(const g of u.metadata.queries){const w=(r.get(g)||V()).add(d);r.set(g,w)}}return r}complete(){var e=this;return(0,ye.A)(function*(){const r=yield function ad(a,e,r,s){return Ih.apply(this,arguments)}(e.localStore,new ac(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const u of e.queries)yield Of(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function Sh(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Ed{constructor(e){this.key=e}}class wg{constructor(e){this.key=e}}class Kf{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=V(),this.mutatedKeys=V(),this.Aa=Vl(e),this.Ra=new qe(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Dt,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,g=u,w=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,O="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((H,q)=>{const ce=u.get(H),xe=zs(this.query,q)?q:null,rt=!!ce&&this.mutatedKeys.has(ce.key),Et=!!xe&&(xe.hasLocalMutations||this.mutatedKeys.has(xe.key)&&xe.hasCommittedMutations);let ft=!1;ce&&xe?ce.data.isEqual(xe.data)?rt!==Et&&(s.track({type:3,doc:xe}),ft=!0):this.ga(ce,xe)||(s.track({type:2,doc:xe}),ft=!0,(S&&this.Aa(xe,S)>0||O&&this.Aa(xe,O)<0)&&(w=!0)):!ce&&xe?(s.track({type:0,doc:xe}),ft=!0):ce&&!xe&&(s.track({type:1,doc:ce}),ft=!0,(S||O)&&(w=!0)),ft&&(xe?(g=g.add(xe),d=Et?d.add(H):d.delete(H)):(g=g.delete(H),d=d.delete(H)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const H="F"===this.query.limitType?g.last():g.first();g=g.delete(H.key),d=d.delete(H.key),s.track({type:1,doc:H})}return{Ra:g,fa:s,ns:w,mutatedKeys:d}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,u){const d=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const g=e.fa.G_();g.sort((H,q)=>function(xe,rt){const Et=ft=>{switch(ft){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return Et(xe)-Et(rt)}(H.type,q.type)||this.Aa(H.doc,q.doc)),this.pa(s),u=null!=u&&u;const w=r&&!u?this.ya():[],S=0===this.da.size&&this.current&&!u?1:0,O=S!==this.Ea;return this.Ea=S,0!==g.length||O?{snapshot:new Nt(this.query,e.Ra,d,g,e.mutatedKeys,0===S,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:w}:{wa:w}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dt,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=V(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new wg(s))}),this.da.forEach(s=>{e.has(s)||r.push(new Ed(s))}),r}ba(e){this.Ta=e.Ts,this.da=V();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Nt.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class qf{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class E_{constructor(e){this.key=e,this.va=!1}}class Ag{constructor(e,r,s,u,d,g){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.Ca={},this.Fa=new ji(w=>Ms(w),Es),this.Ma=new Map,this.xa=new Set,this.Oa=new fn(It.comparator),this.Na=new Map,this.La=new bf,this.Ba={},this.ka=new Map,this.qa=_o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Rh(a,e){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,ye.A)(function*(a,e,r=!0){const s=Ug(a);let u;const d=s.Fa.get(e);return d?(s.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield w_(s,e,r,!0),u})).apply(this,arguments)}function T_(a,e){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,ye.A)(function*(a,e){const r=Ug(a);yield w_(r,e,!0,!1)})).apply(this,arguments)}function w_(a,e,r,s){return bg.apply(this,arguments)}function bg(){return(bg=(0,ye.A)(function*(a,e,r,s){const u=yield iu(a.localStore,Sr(e)),d=u.targetId,g=a.sharedClientState.addLocalQueryTarget(d,r);let w;return s&&(w=yield Qf(a,e,d,"current"===g,u.resumeToken)),a.isPrimaryClient&&r&&Qc(a.remoteStore,u),w})).apply(this,arguments)}function Qf(a,e,r,s,u){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,ye.A)(function*(a,e,r,s,u){a.Ka=(q,ce,xe)=>{return(rt=(0,ye.A)(function*(ft,Ut,Wt,Bt){let nn=Ut.view.ma(Wt);nn.ns&&(nn=yield sd(ft.localStore,Ut.query,!1).then(({documents:se})=>Ut.view.ma(se,nn)));const Vn=Bt&&Bt.targetChanges.get(Ut.targetId),Pn=Bt&&null!=Bt.targetMismatches.get(Ut.targetId),ve=Ut.view.applyChanges(nn,ft.isPrimaryClient,Vn,Pn);return va(ft,Ut.targetId,ve.wa),ve.snapshot}),function Et(ft,Ut,Wt,Bt){return rt.apply(this,arguments)})(a,q,ce,xe);var rt};const d=yield sd(a.localStore,e,!0),g=new Kf(e,d.Ts),w=g.ma(d.documents),S=at.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,u),O=g.applyChanges(w,a.isPrimaryClient,S);va(a,r,O.wa);const H=new qf(e,r,g);return a.Fa.set(e,H),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),O.snapshot}),Yf.apply(this,arguments)}function Xf(a,e,r){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,ye.A)(function*(a,e,r){const s=Je(a),u=s.Fa.get(e),d=s.Ma.get(u.targetId);if(d.length>1)return s.Ma.set(u.targetId,d.filter(g=>!Es(g,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Xu(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),r&&ou(s.remoteStore,u.targetId),Dd(s,u.targetId)}).catch(ct))):(Dd(s,u.targetId),yield Xu(s.localStore,u.targetId,!0))})).apply(this,arguments)}function Td(a,e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ye.A)(function*(a,e){const r=Je(a),s=r.Fa.get(e),u=r.Ma.get(s.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),ou(r.remoteStore,s.targetId))})).apply(this,arguments)}function A_(){return(A_=(0,ye.A)(function*(a,e,r){const s=O_(a);try{const u=yield function(g,w){const S=Je(g),O=Sn.now(),H=w.reduce((xe,rt)=>xe.add(rt.key),V());let q,ce;return S.persistence.runTransaction("Locally write mutations","readwrite",xe=>{let rt=Di(),Et=V();return S.cs.getEntries(xe,H).next(ft=>{rt=ft,rt.forEach((Ut,Wt)=>{Wt.isValidDocument()||(Et=Et.add(Ut))})}).next(()=>S.localDocuments.getOverlayedDocuments(xe,rt)).next(ft=>{q=ft;const Ut=[];for(const Wt of w){const Bt=nh(Wt,q.get(Wt.key).overlayedDocument);null!=Bt&&Ut.push(new ho(Wt.key,Bt,Mo(Bt.value.mapValue),_r.exists(!0)))}return S.mutationQueue.addMutationBatch(xe,O,Ut,w)}).next(ft=>{ce=ft;const Ut=ft.applyToLocalDocumentSet(q,Et);return S.documentOverlayCache.saveOverlays(xe,ft.batchId,Ut)})}).then(()=>({batchId:ce.batchId,changes:bc(q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(g,w,S){let O=g.Ba[g.currentUser.toKey()];O||(O=new fn(ot)),O=O.insert(w,S),g.Ba[g.currentUser.toKey()]=O}(s,u.batchId,r),yield uc(s,u.changes),yield ri(s.remoteStore)}catch(u){const d=Te(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function D_(a,e){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,ye.A)(function*(a,e){const r=Je(a);try{const s=yield function rd(a,e){const r=Je(a),s=e.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const w=[];e.targetChanges.forEach((H,q)=>{const ce=u.get(q);if(!ce)return;w.push(r.Ur.removeMatchingKeys(d,H.removedDocuments,q).next(()=>r.Ur.addMatchingKeys(d,H.addedDocuments,q)));let xe=ce.withSequenceNumber(d.currentSequenceNumber);var Et,ft,Ut;null!==e.targetMismatches.get(q)?xe=xe.withResumeToken(yt.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):H.resumeToken.approximateByteSize()>0&&(xe=xe.withResumeToken(H.resumeToken,s)),u=u.insert(q,xe),ft=xe,Ut=H,(0===(Et=ce).resumeToken.approximateByteSize()||ft.snapshotVersion.toMicroseconds()-Et.snapshotVersion.toMicroseconds()>=3e8||Ut.addedDocuments.size+Ut.modifiedDocuments.size+Ut.removedDocuments.size>0)&&w.push(r.Ur.updateTargetData(d,xe))});let S=Di(),O=V();if(e.documentUpdates.forEach(H=>{e.resolvedLimboDocuments.has(H)&&w.push(r.persistence.referenceDelegate.updateLimboDocument(d,H))}),w.push(Nf(d,g,e.documentUpdates).next(H=>{S=H.Ps,O=H.Is})),!s.isEqual(ut.min())){const H=r.Ur.getLastRemoteSnapshotVersion(d).next(q=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,s));w.push(H)}return oe.waitFor(w).next(()=>g.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,S,O)).next(()=>S)}).then(d=>(r.os=u,d))}(r.localStore,e);e.targetChanges.forEach((u,d)=>{const g=r.Na.get(d);g&&(gt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.va=!0:u.modifiedDocuments.size>0?gt(g.va):u.removedDocuments.size>0&&(gt(g.va),g.va=!1))}),yield uc(r,s,e)}catch(s){yield ct(s)}})).apply(this,arguments)}function C_(a,e,r){const s=Je(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.Fa.forEach((d,g)=>{const w=g.view.Z_(e);w.snapshot&&u.push(w.snapshot)}),function(g,w){const S=Je(g);S.onlineState=w;let O=!1;S.queries.forEach((H,q)=>{for(const ce of q.j_)ce.Z_(w)&&(O=!0)}),O&&cu(S)}(s.eventManager,e),u.length&&s.Ca.d_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function wd(a,e,r){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,ye.A)(function*(a,e,r){const s=Je(a);s.sharedClientState.updateQueryState(e,"rejected",r);const u=s.Na.get(e),d=u&&u.key;if(d){let g=new fn(It.comparator);g=g.insert(d,Nn.newNoDocument(d,ut.min()));const w=V().add(d),S=new is(ut.min(),new Map,new fn(ot),g,w);yield D_(s,S),s.Oa=s.Oa.remove(d),s.Na.delete(e),xg(s)}else yield Xu(s.localStore,e,!1).then(()=>Dd(s,e,r)).catch(ct)})).apply(this,arguments)}function Rg(a,e){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,ye.A)(function*(a,e){const r=Je(a),s=e.batch.batchId;try{const u=yield function Mf(a,e){const r=Je(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(w,S,O,H){const q=O.batch,ce=q.keys();let xe=oe.resolve();return ce.forEach(rt=>{xe=xe.next(()=>H.getEntry(S,rt)).next(Et=>{const ft=O.docVersions.get(rt);gt(null!==ft),Et.version.compareTo(ft)<0&&(q.applyToRemoteDocument(Et,O),Et.isValidDocument()&&(Et.setReadTime(O.commitVersion),H.addEntry(Et)))})}),xe.next(()=>w.mutationQueue.removeMutationBatch(S,q))}(r,s,e,d).next(()=>d.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let S=V();for(let O=0;O<w.mutationResults.length;++O)w.mutationResults[O].transformResults.length>0&&(S=S.add(w.batch.mutations[O].key));return S}(e))).next(()=>r.localDocuments.getDocuments(s,u))})}(r.localStore,e);Ng(r,s,null),Mg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield uc(r,u)}catch(u){yield ct(u)}})).apply(this,arguments)}function b_(a,e,r){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,ye.A)(function*(a,e,r){const s=Je(a);try{const u=yield function(g,w){const S=Je(g);return S.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let H;return S.mutationQueue.lookupMutationBatch(O,w).next(q=>(gt(null!==q),H=q.keys(),S.mutationQueue.removeMutationBatch(O,q))).next(()=>S.mutationQueue.performConsistencyCheck(O)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(O,H,w)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,H)).next(()=>S.localDocuments.getDocuments(O,H))})}(s.localStore,e);Ng(s,e,r),Mg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield uc(s,u)}catch(u){yield ct(u)}})).apply(this,arguments)}function Pg(){return(Pg=(0,ye.A)(function*(a,e){const r=Je(a);vo(r.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=Je(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>w.mutationQueue.getHighestUnacknowledgedBatchId(S))}(r.localStore);if(-1===s)return void e.resolve();const u=r.ka.get(s)||[];u.push(e),r.ka.set(s,u)}catch(s){const u=Te(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function Mg(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function Ng(a,e,r){const s=Je(a);let u=s.Ba[s.currentUser.toKey()];if(u){const d=u.get(e);d&&(r?d.reject(r):d.resolve(),u=u.remove(e)),s.Ba[s.currentUser.toKey()]=u}}function Dd(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||R_(a,s)})}function R_(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(ou(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),xg(a))}function va(a,e,r){for(const s of r)s instanceof Ed?(a.La.addReference(s.key,e),Nh(a,s)):s instanceof wg?($e("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||R_(a,s.key)):dt()}function Nh(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||($e("SyncEngine","New document in limbo: "+r),a.xa.add(s),xg(a))}function xg(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new It(Jt.fromString(e)),s=a.qa.next();a.Na.set(s,new E_(r)),a.Oa=a.Oa.insert(r,s),Qc(a.remoteStore,new Vo(Sr(Bi(r.path)),s,"TargetPurposeLimboResolution",Ne.oe))}}function uc(a,e,r){return P_.apply(this,arguments)}function P_(){return P_=(0,ye.A)(function*(a,e,r){const s=Je(a),u=[],d=[],g=[];var w;s.Fa.isEmpty()||(s.Fa.forEach((w,S)=>{g.push(s.Ka(S,e,r).then(O=>{var H;if((O||r)&&s.isPrimaryClient){const q=O?!O.fromCache:null===(H=r?.targetChanges.get(S.targetId))||void 0===H?void 0:H.current;s.sharedClientState.updateQueryState(S.targetId,q?"current":"not-current")}if(O){u.push(O);const q=nu.Wi(S.targetId,O);d.push(q)}}))}),yield Promise.all(g),s.Ca.d_(u),yield(w=(0,ye.A)(function*(O,H){const q=Je(O);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ce=>oe.forEach(H,xe=>oe.forEach(xe.$i,rt=>q.persistence.referenceDelegate.addReference(ce,xe.targetId,rt)).next(()=>oe.forEach(xe.Ui,rt=>q.persistence.referenceDelegate.removeReference(ce,xe.targetId,rt)))))}catch(ce){if(!pi(ce))throw ce;$e("LocalStore","Failed to update sequence numbers: "+ce)}for(const ce of H){const xe=ce.targetId;if(!ce.fromCache){const rt=q.os.get(xe),ft=rt.withLastLimboFreeSnapshotVersion(rt.snapshotVersion);q.os=q.os.insert(xe,ft)}}}),function S(O,H){return w.apply(this,arguments)})(s.localStore,d))}),P_.apply(this,arguments)}function sE(a,e){return M_.apply(this,arguments)}function M_(){return(M_=(0,ye.A)(function*(a,e){const r=Je(a);if(!r.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const s=yield yh(r.localStore,e);r.currentUser=e,(d=r).ka.forEach(w=>{w.forEach(S=>{S.reject(new We(Re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield uc(r,s.hs)}var d})).apply(this,arguments)}function oE(a,e){const r=Je(a),s=r.Na.get(e);if(s&&s.va)return V().add(s.key);{let u=V();const d=r.Ma.get(e);if(!d)return u;for(const g of d){const w=r.Fa.get(g);u=u.unionWith(w.view.Va)}return u}}function N_(a,e){return Og.apply(this,arguments)}function Og(){return(Og=(0,ye.A)(function*(a,e){const r=Je(a),s=yield sd(r.localStore,e.query,!0),u=e.view.ba(s);return r.isPrimaryClient&&va(r,e.targetId,u.wa),u})).apply(this,arguments)}function gv(a,e){return kg.apply(this,arguments)}function kg(){return(kg=(0,ye.A)(function*(a,e){const r=Je(a);return xf(r.localStore,e).then(s=>uc(r,s))})).apply(this,arguments)}function mv(a,e,r,s){return xh.apply(this,arguments)}function xh(){return(xh=(0,ye.A)(function*(a,e,r,s){const u=Je(a),d=yield function(w,S){const O=Je(w),H=Je(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",q=>H.Mn(q,S).next(ce=>ce?O.localDocuments.getDocuments(q,ce):oe.resolve(null)))}(u.localStore,e);var S;null!==d?("pending"===r?yield ri(u.remoteStore):"acknowledged"===r||"rejected"===r?(Ng(u,e,s||null),Mg(u,e),S=e,Je(Je(u.localStore).mutationQueue).On(S)):dt(),yield uc(u,d)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function il(){return(il=(0,ye.A)(function*(a,e){const r=Je(a);if(Ug(r),O_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield Lg(r,s.toArray());r.Qa=!0,yield h(r.remoteStore,!0);for(const d of u)Qc(r.remoteStore,d)}else if(!1===e&&!1!==r.Qa){const s=[];let u=Promise.resolve();r.Ma.forEach((d,g)=>{r.sharedClientState.isLocalQueryTarget(g)?s.push(g):u=u.then(()=>(Dd(r,g),Xu(r.localStore,g,!0))),ou(r.remoteStore,g)}),yield u,yield Lg(r,s),function(g){const w=Je(g);w.Na.forEach((S,O)=>{ou(w.remoteStore,O)}),w.La.pr(),w.Na=new Map,w.Oa=new fn(It.comparator)}(r),r.Qa=!1,yield h(r.remoteStore,!1)}})).apply(this,arguments)}function Lg(a,e,r){return ep.apply(this,arguments)}function ep(){return(ep=(0,ye.A)(function*(a,e,r){const s=Je(a),u=[],d=[];for(const g of e){let w;const S=s.Ma.get(g);if(S&&0!==S.length){w=yield iu(s.localStore,Sr(S[0]));for(const O of S){const H=s.Fa.get(O),q=yield N_(s,H);q.snapshot&&d.push(q.snapshot)}}else{const O=yield od(s.localStore,g);w=yield iu(s.localStore,O),yield Qf(s,Fg(O),g,!1,w.resumeToken)}u.push(w)}return s.Ca.d_(d),u})).apply(this,arguments)}function Fg(a){return xo(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function aE(a){return r=Je(a).localStore,Je(Je(r).persistence).Qi();var r}function uE(a,e,r,s){return x_.apply(this,arguments)}function x_(){return(x_=(0,ye.A)(function*(a,e,r,s){const u=Je(a);if(u.Qa)return void $e("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(e);if(d&&d.length>0)switch(r){case"current":case"not-current":{const g=yield xf(u.localStore,Fa(d[0])),w=is.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,yt.EMPTY_BYTE_STRING);yield uc(u,g,w);break}case"rejected":yield Xu(u.localStore,e,!0),Dd(u,e,s);break;default:dt()}})).apply(this,arguments)}function Vg(a,e,r){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,ye.A)(function*(a,e,r){const s=Ug(a);if(s.Qa){for(const u of e){if(s.Ma.has(u)&&s.sharedClientState.isActiveQueryTarget(u)){$e("SyncEngine","Adding an already active target "+u);continue}const d=yield od(s.localStore,u),g=yield iu(s.localStore,d);yield Qf(s,Fg(d),g.targetId,!1,g.resumeToken),Qc(s.remoteStore,g)}for(const u of r)s.Ma.has(u)&&(yield Xu(s.localStore,u,!1).then(()=>{ou(s.remoteStore,u),Dd(s,u)}).catch(ct))}})).apply(this,arguments)}function Ug(a){const e=Je(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=D_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wd.bind(null,e),e.Ca.d_=Hf.bind(null,e.eventManager),e.Ca.$a=zf.bind(null,e.eventManager),e}function O_(a){const e=Je(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b_.bind(null,e),e}let Cd=(()=>{class a{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(r){var s=this;return(0,ye.A)(function*(){s.serializer=Zu(r.databaseInfo.databaseId),s.sharedClientState=s.Wa(r),s.persistence=s.Ga(r),yield s.persistence.start(),s.localStore=s.za(r),s.gcScheduler=s.ja(r,s.localStore),s.indexBackfillerScheduler=s.Ha(r,s.localStore)})()}ja(r,s){return null}Ha(r,s){return null}za(r){return zc(this.persistence,new mh,r.initialUser,this.serializer)}Ga(r){return new ph(td.Zr,this.serializer)}Wa(r){return new wh}terminate(){var r=this;return(0,ye.A)(function*(){var s,u;null===(s=r.gcScheduler)||void 0===s||s.stop(),null===(u=r.indexBackfillerScheduler)||void 0===u||u.stop(),r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}return a.provider={build:()=>new a},a})();class Bg extends Cd{constructor(e,r,s){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,ye.A)(function*(){yield r().call(s,e),yield s.Ja.initialize(s,e),yield O_(s.Ja.syncEngine),yield ri(s.Ja.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return zc(this.persistence,new mh,e.initialUser,this.serializer)}ja(e,r){return new Df(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ha(e,r){const s=new hs(r,this.persistence);return new hn(e.asyncQueue,s)}Ga(e){const r=Qu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new Hc(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,Ch(),zo(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new wh}}class L_ extends Bg{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,ye.A)(function*(){yield r().call(s,e);const u=s.Ja.syncEngine;s.sharedClientState instanceof kf&&(s.sharedClientState.syncEngine={no:mv.bind(null,u),ro:uE.bind(null,u),io:Vg.bind(null,u),Qi:aE.bind(null,u),eo:gv.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var d=(0,ye.A)(function*(g){yield function lu(a,e){return il.apply(this,arguments)}(s.Ja.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}Wa(e){const r=Ch();if(!kf.D(r))throw new We(Re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Qu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kf(r,e.asyncQueue,s,e.clientId,e.initialUser)}}let sl=(()=>{class a{initialize(r,s){var u=this;return(0,ye.A)(function*(){u.localStore||(u.localStore=r.localStore,u.sharedClientState=r.sharedClientState,u.datastore=u.createDatastore(s),u.remoteStore=u.createRemoteStore(s),u.eventManager=u.createEventManager(s),u.syncEngine=u.createSyncEngine(s,!r.synchronizeTabs),u.sharedClientState.onlineStateHandler=d=>C_(u.syncEngine,d,1),u.remoteStore.remoteSyncer.handleCredentialChange=sE.bind(null,u.syncEngine),yield h(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Mr}createDatastore(r){const s=Zu(r.databaseInfo.databaseId),u=new Dh(r.databaseInfo);return new yg(r.authCredentials,r.appCheckCredentials,u,s)}createRemoteStore(r){return u=this.localStore,d=this.datastore,g=r.asyncQueue,w=s=>C_(this.syncEngine,s,0),S=_g.D()?new _g:new Lf,new Ig(u,d,g,w,S);var u,d,g,w,S}createSyncEngine(r,s){return function(d,g,w,S,O,H,q){const ce=new Ag(d,g,w,S,O,H);return q&&(ce.Qa=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){var r=this;return(0,ye.A)(function*(){var s,u,d;yield(d=(0,ye.A)(function*(w){const S=Je(w);$e("RemoteStore","RemoteStore shutting down."),S.L_.add(5),yield ya(S),S.k_.shutdown(),S.q_.set("Unknown")}),function g(w){return d.apply(this,arguments)})(r.remoteStore),null===(s=r.datastore)||void 0===s||s.terminate(),null===(u=r.eventManager)||void 0===u||u.terminate()})()}}return a.provider={build:()=>new a},a})();function kh(a,e=10240){let r=0;return{read:()=>(0,ye.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,ye.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class jg{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Xn,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ye.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ye.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ye.A)(function*(){const r=yield e.nu();if(null===r)return null;const s=e.eu.decode(r),u=Number(s);isNaN(u)&&e.ru(`length string (${s}) is not valid number`);const d=yield e.iu(u);return new Gf(JSON.parse(d),r.length+u)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,ye.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const r=e.su();r<0&&e.ru("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}iu(e){var r=this;return(0,ye.A)(function*(){for(;r.buffer.length<e;)(yield r.ou())&&r.ru("Reached the end of bundle when more is expected.");const s=r.eu.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ye.A)(function*(){const r=yield e.Xa.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class yv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,ye.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new We(Re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(u=(0,ye.A)(function*(g,w){const S=Je(g),O={documents:w.map(xe=>ha(S.serializer,xe))},H=yield S.Lo("BatchGetDocuments",S.serializer.databaseId,Jt.emptyPath(),O,w.length),q=new Map;H.forEach(xe=>{const rt=function b(a,e){return"found"in e?function(s,u){gt(!!u.found);const d=Ks(s,u.found.name),g=rr(u.found.updateTime),w=u.found.createTime?rr(u.found.createTime):ut.min(),S=new ln({mapValue:{fields:u.found.fields}});return Nn.newFoundDocument(d,g,w,S)}(a,e):"missing"in e?function(s,u){gt(!!u.missing),gt(!!u.readTime);const d=Ks(s,u.missing),g=rr(u.readTime);return Nn.newNoDocument(d,g)}(a,e):dt()}(S.serializer,xe);q.set(rt.key.toString(),rt)});const ce=[];return w.forEach(xe=>{const rt=q.get(xe.toString());gt(!!rt),ce.push(rt)}),ce}),function d(g,w){return u.apply(this,arguments)})(r.datastore,e);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new zi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const d=It.fromPath(u);e.mutations.push(new ua(d,e.precondition(d)))}),yield(s=(0,ye.A)(function*(d,g){const w=Je(d),S={writes:g.map(O=>G(w.serializer,O))};yield w.Mo("Commit",w.serializer.databaseId,Jt.emptyPath(),S)}),function u(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw dt();r=ut.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new We(Re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(ut.min())?_r.exists(!1):_r.updateTime(r):_r.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(ut.min()))throw new We(Re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(r)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bd{constructor(e,r,s,u,d){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=u,this.deferred=d,this._u=s.maxAttempts,this.t_=new pd(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ye.A)(function*(){const r=new yv(e.datastore),s=e.cu(r);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.lu(d)}))}).catch(u=>{e.lu(u)})}))}cu(e){try{const r=this.updateFunction(e);return!Ee(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!rs(r)}return!1}}class vv{constructor(e,r,s,u,d){var g=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=Le.UNAUTHENTICATED,this.clientId=to.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(s,function(){var w=(0,ye.A)(function*(S){$e("FirestoreClient","Received user=",S.uid),yield g.authCredentialListener(S),g.user=S});return function(S){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>($e("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const u=Te(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function $g(a,e){return np.apply(this,arguments)}function np(){return np=(0,ye.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ye.A)(function*(d){s.isEqual(d)||(yield yh(e.localStore,d),s=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),np.apply(this,arguments)}function Hg(a,e){return zg.apply(this,arguments)}function zg(){return(zg=(0,ye.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Gg(a);$e("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>m(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>m(e.remoteStore,u)),a._onlineComponents=e})).apply(this,arguments)}function Gg(a){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,ye.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $g(a,a._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(u=e).name?u.code===Re.FAILED_PRECONDITION||u.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw e;Hn("Error using user provided cache. Falling back to memory cache: "+e),yield $g(a,new Cd)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield $g(a,new Cd);var u;return a._offlineComponents})).apply(this,arguments)}function rp(a){return ip.apply(this,arguments)}function ip(){return(ip=(0,ye.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield Hg(a,a._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield Hg(a,new sl))),a._onlineComponents})).apply(this,arguments)}function Iv(a){return Gg(a).then(e=>e.persistence)}function Lh(a){return Gg(a).then(e=>e.localStore)}function Sd(a){return rp(a).then(e=>e.remoteStore)}function ol(a){return rp(a).then(e=>e.syncEngine)}function al(a){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,ye.A)(function*(a){const e=yield rp(a),r=e.eventManager;return r.onListen=Rh.bind(null,e.syncEngine),r.onUnlisten=Xf.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=T_.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Td.bind(null,e.syncEngine),r})).apply(this,arguments)}function qg(a,e,r={}){const s=new Xn;return a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function(d,g,w,S,O){const H=new tp({next:ce=>{H.Za(),g.enqueueAndForget(()=>oc(d,q));const xe=ce.docs.has(w);!xe&&ce.fromCache?O.reject(new We(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):xe&&ce.fromCache&&S&&"server"===S.source?O.reject(new We(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(ce)},error:ce=>O.reject(ce)}),q=new rl(Bi(w.path),H,{includeMetadataChanges:!0,_a:!0});return uu(d,q)}(yield al(a),a.asyncQueue,e,r,s)})),s.promise}function Tv(a,e,r={}){const s=new Xn;return a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function(d,g,w,S,O){const H=new tp({next:ce=>{H.Za(),g.enqueueAndForget(()=>oc(d,q)),ce.fromCache&&"server"===S.source?O.reject(new We(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(ce)},error:ce=>O.reject(ce)}),q=new rl(w,H,{includeMetadataChanges:!0,_a:!0});return uu(d,q)}(yield al(a),a.asyncQueue,e,r,s)})),s.promise}function op(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const Vh=new Map;function Xg(a,e,r){if(!r)throw new We(Re.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function ap(a,e,r,s){if(!0===e&&!0===s)throw new We(Re.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Uh(a){if(!It.isDocumentKey(a))throw new We(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function qo(a){if(It.isDocumentKey(a))throw new We(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function du(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":dt()}function Fn(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new We(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=du(a);throw new We(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function j_(a,e){if(e<=0)throw new We(Re.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class $_{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new We(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new We(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ap("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=op(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new We(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new We(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new We(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,r,s,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new We(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $_(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new ir;switch(s.type){case"firstParty":return new fr(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new We(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ye.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Vh.get(r);s&&($e("ComponentProvider","Removing Datastore"),Vh.delete(r),s.terminate())}(this),Promise.resolve()}}class Gi{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Nr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}}class Ia extends Gi{constructor(e,r,s){super(e,r,Bi(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new It(e))}withConverter(e){return new Ia(this.firestore,e,this._path)}}function up(a,e,...r){if(a=(0,ke.Ku)(a),Xg("collection","path",e),a instanceof Rd){const s=Jt.fromString(e,...r);return qo(s),new Ia(a,null,s)}{if(!(a instanceof Nr||a instanceof Ia))throw new We(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Jt.fromString(e,...r));return qo(s),new Ia(a.firestore,null,s)}}function cp(a,e,...r){if(a=(0,ke.Ku)(a),1===arguments.length&&(e=to.newId()),Xg("doc","path",e),a instanceof Rd){const s=Jt.fromString(e,...r);return Uh(s),new Nr(a,null,new It(s))}{if(!(a instanceof Nr||a instanceof Ia))throw new We(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Jt.fromString(e,...r));return Uh(s),new Nr(a.firestore,a instanceof Ia?a.converter:null,new It(s))}}function Jg(a,e){return a=(0,ke.Ku)(a),e=(0,ke.Ku)(e),(a instanceof Nr||a instanceof Ia)&&(e instanceof Nr||e instanceof Ia)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function Bh(a,e){return a=(0,ke.Ku)(a),e=(0,ke.Ku)(e),a instanceof Gi&&e instanceof Gi&&a.firestore===e.firestore&&Es(a._query,e._query)&&a.converter===e.converter}class Dv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pd(this,"async_queue_retry"),this.Vu=()=>{const s=zo();s&&$e("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=zo();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=zo();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ye.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(r){if(!pi(r))throw r;$e("AsyncQueue","Operation failed with retryable error: "+r)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(s=>{throw this.Eu=s,this.du=!1,kt("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const u=ie.createAndSchedule(this,e,r,s,d=>this.yu(d));return this.Tu.push(u),u}fu(){this.Eu&&dt()}verifyOperationInProgress(){}wu(){var e=this;return(0,ye.A)(function*(){let r;do{r=e.mu,yield r}while(r!==e.mu)})()}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function z_(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class Cv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rr extends Rd{constructor(e,r,s,u){super(e,r,s,u),this.type="firestore",this._queue=new Dv,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ye.A)(function*(){if(e._firestoreClient){const r=e._firestoreClient.terminate();e._queue=new Dv(r),e._firestoreClient=void 0,yield r}})()}}function Lr(a){if(a._terminated)throw new We(Re.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||lp(a),a._firestoreClient}function lp(a){var e,r,s;const u=a._freezeSettings(),d=(S=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new gs(a._databaseId,S,a._persistenceKey,(H=u).host,H.ssl,H.experimentalForceLongPolling,H.experimentalAutoDetectLongPolling,op(H.experimentalLongPollingOptions),H.useFetchStreams));var S,H;a._componentsProvider||!(null===(r=u.localCache)||void 0===r)&&r._offlineComponentProvider&&!(null===(s=u.localCache)||void 0===s)&&s._onlineComponentProvider&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new vv(a._authCredentials,a._appCheckCredentials,a._queue,d,a._componentsProvider&&function(w){const S=w?._online.build();return{_offline:w?._offline.build(S),_online:S}}(a._componentsProvider))}function jh(){return(jh=(0,ye.A)(function*(a){Hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=a._freezeSettings();dp(a,sl.provider,{build:r=>new L_(r,e.cacheSizeBytes)})})).apply(this,arguments)}function dp(a,e,r){if((a=Fn(a,Rr))._firestoreClient||a._terminated)throw new We(Re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new We(Re.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:e,_offline:r},lp(a)}class Ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ea(yt.fromBase64String(e))}catch(r){throw new We(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ea(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ta{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new We(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._methodName=e}}class Nd{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new We(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new We(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}class zh{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,u){if(s.length!==u.length)return!1;for(let d=0;d<s.length;++d)if(s[d]!==u[d])return!1;return!0}(this._values,e._values)}}const Sv=/^__.*__$/;class Rv{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new ho(e,this.data,this.fieldMask,r,this.fieldTransforms):new nr(e,this.data,r,this.fieldTransforms)}}class Pv{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new ho(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function W_(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class hl{constructor(e,r,s,u,d,g){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===d&&this.vu(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.Ou(e),u}Nu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.vu(),u}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _p(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(W_(this.Cu)&&Sv.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nm{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||Zu(e)}Qu(e,r,s,u=!1){return new hl({Cu:e,methodName:r,qu:s,path:On.emptyPath(),xu:!1,ku:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(a){const e=a._freezeSettings(),r=Zu(a._databaseId);return new nm(a._databaseId,!!e.ignoreUndefinedProperties,r)}function Gh(a,e,r,s,u,d={}){const g=a.Qu(d.merge||d.mergeFields?2:0,e,r,u);om("Data must be an object, but it was:",g,s);const w=ml(s,g);let S,O;if(d.merge)S=new lr(g.fieldMask),O=g.fieldTransforms;else if(d.mergeFields){const H=[];for(const q of d.mergeFields){const ce=Od(e,q,r);if(!g.contains(ce))throw new We(Re.INVALID_ARGUMENT,`Field '${ce}' is specified in your field mask but missing from your input data.`);am(H,ce)||H.push(ce)}S=new lr(H),O=g.fieldTransforms.filter(q=>S.covers(q.field))}else S=null,O=g.fieldTransforms;return new Rv(new ln(w),S,O)}class pl extends dl{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pl}}function Wh(a,e,r){return new hl({Cu:3,qu:e.settings.qu,methodName:a._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rm extends dl{_toFieldTransform(e){return new Hi(e.path,new tn)}isEqual(e){return e instanceof rm}}class pp extends dl{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Wh(this,e,!0),s=this.Ku.map(d=>gl(d,r)),u=new Yn(s);return new Hi(e.path,u)}isEqual(e){return e instanceof pp&&(0,ke.bD)(this.Ku,e.Ku)}}class im extends dl{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Wh(this,e,!0),s=this.Ku.map(d=>gl(d,r)),u=new tr(s);return new Hi(e.path,u)}isEqual(e){return e instanceof im&&(0,ke.bD)(this.Ku,e.Ku)}}class gp extends dl{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Hr(e.serializer,nt(e.serializer,this.$u));return new Hi(e.path,r)}isEqual(e){return e instanceof gp&&this.$u===e.$u}}function K_(a,e,r,s){const u=a.Qu(1,e,r);om("Data must be an object, but it was:",u,s);const d=[],g=ln.empty();Mi(s,(S,O)=>{const H=mp(e,S,r);O=(0,ke.Ku)(O);const q=u.Nu(H);if(O instanceof pl)d.push(H);else{const ce=gl(O,q);null!=ce&&(d.push(H),g.set(H,ce))}});const w=new lr(d);return new Pv(g,w,u.fieldTransforms)}function sm(a,e,r,s,u,d){const g=a.Qu(1,e,r),w=[Od(e,s,r)],S=[u];if(d.length%2!=0)throw new We(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ce=0;ce<d.length;ce+=2)w.push(Od(e,d[ce])),S.push(d[ce+1]);const O=[],H=ln.empty();for(let ce=w.length-1;ce>=0;--ce)if(!am(O,w[ce])){const xe=w[ce];let rt=S[ce];rt=(0,ke.Ku)(rt);const Et=g.Nu(xe);if(rt instanceof pl)O.push(xe);else{const ft=gl(rt,Et);null!=ft&&(O.push(xe),H.set(xe,ft))}}const q=new lr(O);return new Pv(H,q,g.fieldTransforms)}function Kh(a,e,r,s=!1){return gl(r,a.Qu(s?4:3,e))}function gl(a,e){if(xd(a=(0,ke.Ku)(a)))return om("Unsupported field value:",e,a),ml(a,e);if(a instanceof dl)return function(s,u){if(!W_(u.Cu))throw u.Bu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Bu(`${s._methodName}() is not currently supported inside arrays`);const d=s._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(s,u){const d=[];let g=0;for(const w of s){let S=gl(w,u.Lu(g));null==S&&(S={nullValue:"NULL_VALUE"}),d.push(S),g++}return{arrayValue:{values:d}}}(a,e)}return function(s,u){if(null===(s=(0,ke.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return nt(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const d=Sn.fromDate(s);return{timestampValue:wr(u.serializer,d)}}if(s instanceof Sn){const d=new Sn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:wr(u.serializer,d)}}if(s instanceof Nd)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ea)return{bytesValue:ws(u.serializer,s._byteString)};if(s instanceof Nr){const d=u.databaseId,g=s.firestore._databaseId;if(!g.isEqual(d))throw u.Bu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:ss(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof zh)return w=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(S=>{if("number"!=typeof S)throw w.Bu("VectorValues must only contain numeric values.");return Z(w.serializer,S)})}}}}};var w;throw u.Bu(`Unsupported field value: ${du(s)}`)}(a,e)}function ml(a,e){const r={};return Cr(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(a,(s,u)=>{const d=gl(u,e.Mu(s));null!=d&&(r[s]=d)}),{mapValue:{fields:r}}}function xd(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Sn||a instanceof Nd||a instanceof Ea||a instanceof Nr||a instanceof dl||a instanceof zh)}function om(a,e,r){if(!xd(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=du(r);throw e.Bu("an object"===s?a+" a custom object":a+" "+s)}var u}function Od(a,e,r){if((e=(0,ke.Ku)(e))instanceof Ta)return e._internalPath;if("string"==typeof e)return mp(a,e);throw _p("Field path arguments must be of type string or ",a,!1,void 0,r)}const Mv=new RegExp("[~\\*/\\[\\]]");function mp(a,e,r){if(e.search(Mv)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Ta(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function _p(a,e,r,s,u){const d=s&&!s.isEmpty(),g=void 0!==u;let w=`Function ${e}() called with invalid data`;r&&(w+=" (via `toFirestore()`)"),w+=". ";let S="";return(d||g)&&(S+=" (found",d&&(S+=` in field ${s}`),g&&(S+=` in document ${u}`),S+=")"),new We(Re.INVALID_ARGUMENT,w+a+S)}function am(a,e){return a.some(r=>r.isEqual(e))}class kd{constructor(e,r,s,u,d){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new um(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(cm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class um extends kd{data(){return super.data()}}function cm(a,e){return"string"==typeof e?mp(a,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}function yp(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new We(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class qh extends vp{}function cc(a,e,...r){let s=[];e instanceof vp&&s.push(e),s=s.concat(r),function(d){const g=d.filter(S=>S instanceof _l).length,w=d.filter(S=>S instanceof Ld).length;if(g>1||g>0&&w>0)throw new We(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class Ld extends qh{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new Ld(e,r,s)}_apply(e){const r=this._parse(e);return hm(e._query,r),new Gi(e.firestore,e.converter,ko(e._query,r))}_parse(e){const r=fl(e.firestore);return function(d,g,w,S,O,H,q){let ce;if(O.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new We(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Yo(q,H);const xe=[];for(const rt of q)xe.push(Ip(S,d,rt));ce={arrayValue:{values:xe}}}else ce=Ip(S,d,q)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Yo(q,H),ce=Kh(w,"where",q,"in"===H||"not-in"===H);return wn.create(O,H,ce)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class _l extends vp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new _l(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:en.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,d){let g=u;const w=d.getFlattenedFilters();for(const S of w)hm(g,S),g=ko(g,S)}(e._query,r),new Gi(e.firestore,e.converter,ko(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class q_ extends qh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new q_(e,r)}_apply(e){const r=function(u,d,g){if(null!==u.startAt)throw new We(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new We(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ys(d,g)}(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,function(u,d){const g=u.explicitOrderBy.concat([d]);return new vs(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}class Qh extends qh{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Qh(e,r,s)}_apply(e){return new Gi(e.firestore,e.converter,uo(e._query,this._limit,this._limitType))}}class lm extends qh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new lm(e,r,s)}_apply(e){const r=X_(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(d=r,new vs((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class yl extends qh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new yl(e,r,s)}_apply(e){const r=X_(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(d=r,new vs((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function X_(a,e,r,s){if(r[0]=(0,ke.Ku)(r[0]),r[0]instanceof kd)return function(d,g,w,S,O){if(!S)throw new We(Re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const H=[];for(const q of ai(d))if(q.field.isKeyField())H.push(ti(g,S.key));else{const ce=S.data.field(q.field);if(pr(ce))throw new We(Re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ce){const xe=q.field.canonicalString();throw new We(Re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${xe}' (used as the orderBy) does not exist.`)}H.push(ce)}return new _s(H,O)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const u=fl(a.firestore);return function(g,w,S,O,H,q){const ce=g.explicitOrderBy;if(H.length>ce.length)throw new We(Re.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const xe=[];for(let rt=0;rt<H.length;rt++){const Et=H[rt];if(ce[rt].field.isKeyField()){if("string"!=typeof Et)throw new We(Re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof Et}`);if(!Hs(g)&&-1!==Et.indexOf("/"))throw new We(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${Et}' contains a slash.`);const ft=g.path.child(Jt.fromString(Et));if(!It.isDocumentKey(ft))throw new We(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${ft}' is not because it contains an odd number of segments.`);const Ut=new It(ft);xe.push(ti(w,Ut))}else{const ft=Kh(S,O,Et);xe.push(ft)}}return new _s(xe,q)}(a._query,a.firestore._databaseId,u,e,r,s)}}function Ip(a,e,r){if("string"==typeof(r=(0,ke.Ku)(r))){if(""===r)throw new We(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hs(e)&&-1!==r.indexOf("/"))throw new We(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(Jt.fromString(r));if(!It.isDocumentKey(s))throw new We(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ti(a,new It(s))}if(r instanceof Nr)return ti(a,r._key);throw new We(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${du(r)}.`)}function Yo(a,e){if(!Array.isArray(a)||0===a.length)throw new We(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hm(a,e){const r=function(u,d){for(const g of u)for(const w of g.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new We(Re.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Z_{convertValue(e,r="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw dt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return Mi(e,(u,d)=>{s[u]=this.convertValue(d,r)}),s}convertVectorValue(e){var r,s,u;const d=null===(u=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.map(g=>_n(g.doubleValue));return new zh(d)}convertGeoPoint(e){return new Nd(_n(e.latitude),_n(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Zi(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Gn(e));default:return null}}convertTimestamp(e){const r=mn(e);return new Sn(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=Jt.fromString(e);gt(qs(s));const u=new Br(s.get(1),s.get(3)),d=new It(s.popFirst(5));return u.isEqual(r)||kt(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function ii(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class kv extends Z_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,r)}}class dc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hu extends kd{constructor(e,r,s,u,d,g){super(e,r,s,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(cm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Fd extends hu{data(e={}){return super.data(e)}}class fu{constructor(e,r,s,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new dc(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Fd(this._firestore,this._userDataWriter,s.key,s,new dc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new We(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new Fd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new dc(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const S=new Fd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new dc(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let O=-1,H=-1;return 0!==w.type&&(O=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),H=g.indexOf(w.doc.key)),{type:Vv(w.type),doc:S,oldIndex:O,newIndex:H}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Vv(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function ny(a,e){return a instanceof hu&&e instanceof hu?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof fu&&e instanceof fu&&a._firestore===e._firestore&&Bh(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class pu extends Z_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,r)}}function fm(a,e,r){a=Fn(a,Nr);const s=Fn(a.firestore,Rr),u=ii(a.converter,e,r);return vl(s,[Gh(fl(s),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,_r.none())])}function pm(a,e,r,...s){a=Fn(a,Nr);const u=Fn(a.firestore,Rr),d=fl(u);let g;return g="string"==typeof(e=(0,ke.Ku)(e))||e instanceof Ta?sm(d,"updateDoc",a._key,e,r,s):K_(d,"updateDoc",a._key,e),vl(u,[g.toMutation(a._key,_r.exists(!0))])}function Xh(a,...e){var r,s,u;a=(0,ke.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||z_(e[g])||(d=e[g],g++);const w={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(z_(e[g])){const q=e[g];e[g]=null===(r=q.next)||void 0===r?void 0:r.bind(q),e[g+1]=null===(s=q.error)||void 0===s?void 0:s.bind(q),e[g+2]=null===(u=q.complete)||void 0===u?void 0:u.bind(q)}let S,O,H;if(a instanceof Nr)O=Fn(a.firestore,Rr),H=Bi(a._key.path),S={next:q=>{e[g]&&e[g](mm(O,a,q))},error:e[g+1],complete:e[g+2]};else{const q=Fn(a,Gi);O=Fn(q.firestore,Rr),H=q._query;const ce=new pu(O);S={next:xe=>{e[g]&&e[g](new fu(O,ce,q,xe))},error:e[g+1],complete:e[g+2]},yp(a._query)}return function(ce,xe,rt,Et){const ft=new tp(Et),Ut=new rl(xe,ft,rt);return ce.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return uu(yield al(ce),Ut)})),()=>{ft.Za(),ce.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return oc(yield al(ce),Ut)}))}}(Lr(O),H,w,S)}function vl(a,e){return function(s,u){const d=new Xn;return s.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function pv(a,e,r){return A_.apply(this,arguments)}(yield ol(s),u,d)})),d.promise}(Lr(a),e)}function mm(a,e,r){const s=r.docs.get(e._key),u=new pu(a);return new hu(a,u,e._key,s,new dc(r.hasPendingWrites,r.fromCache),e.converter)}const qv={maxAttempts:5};class _m{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=fl(e)}set(e,r,s){this._verifyNotCommitted();const u=mu(e,this._firestore),d=ii(u.converter,r,s),g=Gh(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,s);return this._mutations.push(g.toMutation(u._key,_r.none())),this}update(e,r,s,...u){this._verifyNotCommitted();const d=mu(e,this._firestore);let g;return g="string"==typeof(r=(0,ke.Ku)(r))||r instanceof Ta?sm(this._dataReader,"WriteBatch.update",d._key,r,s,u):K_(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(g.toMutation(d._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=mu(e,this._firestore);return this._mutations=this._mutations.concat(new zi(r._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(Re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,e){if((a=(0,ke.Ku)(a)).firestore!==e)throw new We(Re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class An extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=fl(r)}get(r){const s=mu(r,this._firestore),u=new kv(this._firestore);return this._transaction.lookup([s._key]).then(d=>{if(!d||1!==d.length)return dt();const g=d[0];if(g.isFoundDocument())return new kd(this._firestore,u,g.key,g,s.converter);if(g.isNoDocument())return new kd(this._firestore,u,s._key,null,s.converter);throw dt()})}set(r,s,u){const d=mu(r,this._firestore),g=ii(d.converter,s,u),w=Gh(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,u);return this._transaction.set(d._key,w),this}update(r,s,u,...d){const g=mu(r,this._firestore);let w;return w="string"==typeof(s=(0,ke.Ku)(s))||s instanceof Ta?sm(this._dataReader,"Transaction.update",g._key,s,u,d):K_(this._dataReader,"Transaction.update",g._key,s),this._transaction.update(g._key,w),this}delete(r){const s=mu(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=mu(e,this._firestore),s=new pu(this._firestore);return super.get(e).then(u=>new hu(this._firestore,s,r._key,u._document,new dc(!1,!1),r.converter))}}function Dp(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new We("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function my(){if(typeof Uint8Array>"u")throw new We("unimplemented","Uint8Arrays are not available in this environment.")}function _y(){if(!function ur(){return typeof atob<"u"}())throw new We("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){st=he.SDK_VERSION,(0,he._registerComponent)(new Oe.uA("firestore",(s,{instanceIdentifier:u,options:d})=>{const g=s.getProvider("app").getImmediate(),w=new Rr(new an(s.getProvider("auth-internal")),new vr(s.getProvider("app-check-internal")),function(O,H){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new We(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Br(O.options.projectId,H)}(g,u),g);return d=Object.assign({useFetchStreams:r},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(ze,"4.7.3",e),(0,he.registerVersion)(ze,"4.7.3","esm2017")}();class Wi{constructor(e){this._delegate=e}static fromBase64String(e){return _y(),new Wi(Ea.fromBase64String(e))}static fromUint8Array(e){return my(),new Wi(Ea.fromUint8Array(e))}toBase64(){return _y(),this._delegate.toBase64()}toUint8Array(){return my(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Em(a){return function Zv(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class vE{enableIndexedDbPersistence(e,r){return function em(a,e){Hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings();return dp(a,sl.provider,{build:s=>new Bg(s,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function Pd(a){return jh.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function $h(a){if(a._initialized&&!a._terminated)throw new We(Re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ye.A)(function*(){try{yield(r=(0,ye.A)(function*(u){if(!Dn.D())return Promise.resolve();const d=u+"main";yield Dn.delete(d)}),function s(u){return r.apply(this,arguments)})(Qu(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Cp{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Br||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Hn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function cl(a,e,r,s={}){var u;const d=(a=Fn(a,Rd))._getSettings(),g=`${e}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let w,S;if("string"==typeof s.mockUserToken)w=s.mockUserToken,S=Le.MOCK_USER;else{w=(0,ke.Fy)(s.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new We(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Le(O)}a._authCredentials=new qt(new zr(w,S))}}(this._delegate,e,r,s)}enableNetwork(){return function Md(a){return function F_(a){return a.asyncQueue.enqueue((0,ye.A)(function*(){const e=yield Iv(a),r=yield Sd(a);return e.setNetworkEnabled(!0),function(u){const d=Je(u);return d.L_.delete(0),ec(d)}(r)}))}(Lr(a=Fn(a,Rr)))}(this._delegate)}disableNetwork(){return function tm(a){return function Ev(a){return a.asyncQueue.enqueue((0,ye.A)(function*(){const e=yield Iv(a),r=yield Sd(a);return e.setNetworkEnabled(!1),(s=(0,ye.A)(function*(d){const g=Je(d);g.L_.add(0),yield ya(g),g.q_.set("Offline")}),function u(d){return s.apply(this,arguments)})(r);var s}))}(Lr(a=Fn(a,Rr)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,ap("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hp(a){return function(r){const s=new Xn;return r.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function S_(a,e){return Pg.apply(this,arguments)}(yield ol(r),s)})),s.promise}(Lr(a=Fn(a,Rr)))}(this._delegate)}onSnapshotsInSync(e){return function ry(a,e){return function wv(a,e){const r=new tp(e);return a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return u=yield al(a),d=r,Je(u).Y_.add(d),void d.next();var u,d})),()=>{r.Za(),a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return u=yield al(a),d=r,void Je(u).Y_.delete(d);var u,d}))}}(Lr(a=Fn(a,Rr)),z_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new We("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fc(this,up(this._delegate,e))}catch(r){throw As(r,"collection()","Firestore.collection()")}}doc(e){try{return new Eo(this,cp(this._delegate,e))}catch(r){throw As(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function H_(a,e){if(a=Fn(a,Rd),Xg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new We(Re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(a,null,(s=e,new vs(Jt.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw As(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function oy(a,e,r){a=Fn(a,Rr);const s=Object.assign(Object.assign({},qv),r);return function(d){if(d.maxAttempts<1)throw new We(Re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,g,w){const S=new Xn;return d.asyncQueue.enqueueAndForget((0,ye.A)(function*(){const O=yield function Kg(a){return rp(a).then(e=>e.datastore)}(d);new bd(d.asyncQueue,O,w,g,S).au()})),S.promise}(Lr(a),u=>e(new An(a,u)),s)}(this._delegate,r=>e(new yy(this,r)))}batch(){return Lr(this._delegate),new vy(new _m(this._delegate,e=>vl(this._delegate,e)))}loadBundle(e){return function fp(a,e){const r=Lr(a=Fn(a,Rr)),s=new Cv;return function Yg(a,e,r,s){const u=function(g,w){let S;return S="string"==typeof g?Mc().encode(g):g,H=function(H,q){if(H instanceof Uint8Array)return kh(H,q);if(H instanceof ArrayBuffer)return kh(new Uint8Array(H),q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new jg(H,w);var H}(r,Zu(e));a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){!function k_(a,e,r){const s=Je(a);var u;(u=(0,ye.A)(function*(g,w,S){try{const O=yield w.getMetadata();if(yield function(rt,Et){const ft=Je(rt),Ut=rr(Et.createTime);return ft.persistence.runTransaction("hasNewerBundle","readonly",Wt=>ft.Gr.getBundleMetadata(Wt,Et.id)).then(Wt=>!!Wt&&Wt.createTime.compareTo(Ut)>=0)}(g.localStore,O))return yield w.close(),S._completeWith({taskState:"Success",documentsLoaded:(rt=O).totalDocuments,bytesLoaded:rt.totalBytes,totalDocuments:rt.totalDocuments,totalBytes:rt.totalBytes}),Promise.resolve(new Set);S._updateProgress(Sh(O));const H=new Wf(O,g.localStore,w.serializer);let q=yield w.Ua();for(;q;){const xe=yield H.la(q);xe&&S._updateProgress(xe),q=yield w.Ua()}const ce=yield H.complete();return yield uc(g,ce.Ia,void 0),yield function(rt,Et){const ft=Je(rt);return ft.persistence.runTransaction("Save bundle","readwrite",Ut=>ft.Gr.saveBundleMetadata(Ut,Et))}(g.localStore,O),S._completeWith(ce.progress),Promise.resolve(ce.Pa)}catch(O){return Hn("SyncEngine",`Loading bundle failed with ${O}`),S._failWith(O),Promise.resolve(new Set)}var rt}),function d(g,w,S){return u.apply(this,arguments)})(s,e,r).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield ol(a),u,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function cE(a,e){return function U_(a,e){return a.asyncQueue.enqueue((0,ye.A)(function*(){return function(s,u){const d=Je(s);return d.persistence.runTransaction("Get named query","readonly",g=>d.Gr.getNamedQuery(g,u))}(yield Lh(a),e)}))}(Lr(a=Fn(a,Rr)),e).then(r=>r?new Gi(a,null,r.query):null)}(this._delegate,e).then(r=>r?new Ds(this,r):null)}}class Zh extends Z_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wi(new Ea(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return Eo.forKey(r,this.firestore,null)}}class yy{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new Zh(e)}get(e){const r=Il(e);return this._delegate.get(r).then(s=>new ef(this._firestore,new hu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const u=Il(e);return s?(Dp("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=Il(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=Il(e);return this._delegate.delete(r),this}}class vy{constructor(e){this._delegate=e}set(e,r,s){const u=Il(e);return s?(Dp("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=Il(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=Il(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class hc{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new Fd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tf(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=hc.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let d=u.get(r);return d||(d=new hc(e,new Zh(e),r),u.set(r,d)),d}}hc.INSTANCES=new WeakMap;class Eo{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Zh(e)}static forPath(e,r,s){if(e.length%2!=0)throw new We("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Eo(r,new Nr(r._delegate,s,new It(e)))}static forKey(e,r,s){return new Eo(r,new Nr(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new fc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fc(this.firestore,up(this._delegate,e))}catch(r){throw As(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ke.Ku)(e))instanceof Nr&&Jg(this._delegate,e)}set(e,r){r=Dp("DocumentReference.set",r);try{return r?fm(this._delegate,e,r):fm(this._delegate,e)}catch(s){throw As(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?pm(this._delegate,e):pm(this._delegate,e,r,...s)}catch(u){throw As(u,"updateDoc()","DocumentReference.update()")}}delete(){return function gm(a){return vl(Fn(a.firestore,Rr),[new zi(a._key,_r.none())])}(this._delegate)}onSnapshot(...e){const r=bp(e),s=Iy(e,u=>new ef(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Xh(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function Vd(a){a=Fn(a,Nr);const e=Fn(a.firestore,Rr),r=Lr(e),s=new pu(e);return function V_(a,e){const r=new Xn;return a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return(s=(0,ye.A)(function*(d,g,w){try{const S=yield function(H,q){const ce=Je(H);return ce.persistence.runTransaction("read document","readonly",xe=>ce.localDocuments.getDocument(xe,q))}(d,g);S.isFoundDocument()?w.resolve(S):S.isNoDocument()?w.resolve(null):w.reject(new We(Re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const O=Te(S,`Failed to get document '${g} from cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield Lh(a),e,r);var s})),r.promise}(r,a._key).then(u=>new hu(e,s,a._key,u,new dc(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function gu(a){a=Fn(a,Nr);const e=Fn(a.firestore,Rr);return qg(Lr(e),a._key,{source:"server"}).then(r=>mm(e,a,r))}(this._delegate):function Uv(a){a=Fn(a,Nr);const e=Fn(a.firestore,Rr);return qg(Lr(e),a._key).then(r=>mm(e,a,r))}(this._delegate),r.then(s=>new ef(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Eo(this.firestore,this._delegate.withConverter(e?hc.getInstance(this.firestore,e):null))}}function As(a,e,r){return a.message=a.message.replace(e,r),a}function bp(a){for(const e of a)if("object"==typeof e&&!Em(e))return e;return{}}function Iy(a,e){var r,s;let u;return u=Em(a[0])?a[0]:Em(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class ef{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new Eo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return ny(this._delegate,e._delegate)}}class tf extends ef{data(e){const r=this._delegate.data(e);return this._delegate._converter||function Ft(a,e){a||dt()}(void 0!==r),r}}class Ds{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Zh(e)}where(e,r,s){try{return new Ds(this.firestore,cc(this._delegate,function Nv(a,e,r){const s=e,u=cm("where",a);return Ld._create(u,s,r)}(e,r,s)))}catch(u){throw As(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new Ds(this.firestore,cc(this._delegate,function Q_(a,e="asc"){const r=e,s=cm("orderBy",a);return q_._create(s,r)}(e,r)))}catch(s){throw As(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,cc(this._delegate,function Qo(a){return j_("limit",a),Qh._create("limit",a,"F")}(e)))}catch(r){throw As(r,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,cc(this._delegate,function Y_(a){return j_("limitToLast",a),Qh._create("limitToLast",a,"L")}(e)))}catch(r){throw As(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,cc(this._delegate,function dm(...a){return lm._create("startAt",a,!0)}(...e)))}catch(r){throw As(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,cc(this._delegate,function lc(...a){return lm._create("startAfter",a,!1)}(...e)))}catch(r){throw As(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,cc(this._delegate,function xv(...a){return yl._create("endBefore",a,!1)}(...e)))}catch(r){throw As(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,cc(this._delegate,function Ov(...a){return yl._create("endAt",a,!0)}(...e)))}catch(r){throw As(r,"endAt()","Query.endAt()")}}isEqual(e){return Bh(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function Bv(a){a=Fn(a,Gi);const e=Fn(a.firestore,Rr),r=Lr(e),s=new pu(e);return function sp(a,e){const r=new Xn;return a.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return(s=(0,ye.A)(function*(d,g,w){try{const S=yield sd(d,g,!0),O=new Kf(g,S.Ts),H=O.ma(S.documents),q=O.applyChanges(H,!1);w.resolve(q.snapshot)}catch(S){const O=Te(S,`Failed to execute query '${g} against cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield Lh(a),e,r);var s})),r.promise}(r,a._query).then(u=>new fu(e,s,a,u))}(this._delegate):"server"===e?.source?function jv(a){a=Fn(a,Gi);const e=Fn(a.firestore,Rr),r=Lr(e),s=new pu(e);return Tv(r,a._query,{source:"server"}).then(u=>new fu(e,s,a,u))}(this._delegate):function Ud(a){a=Fn(a,Gi);const e=Fn(a.firestore,Rr),r=Lr(e),s=new pu(e);return yp(a._query),Tv(r,a._query).then(u=>new fu(e,s,a,u))}(this._delegate),r.then(s=>new To(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=bp(e),s=Iy(e,u=>new To(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Xh(this._delegate,r,s)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?hc.getInstance(this.firestore,e):null))}}class tI{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new tf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class To{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new tf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new tI(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new tf(this._firestore,s))})}isEqual(e){return ny(this._delegate,e._delegate)}}class fc extends Ds{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Eo(this.firestore,e):null}doc(e){try{return new Eo(this.firestore,void 0===e?cp(this._delegate):cp(this._delegate,e))}catch(r){throw As(r,"doc()","CollectionReference.doc()")}}add(e){return function Yh(a,e){const r=Fn(a.firestore,Rr),s=cp(a),u=ii(a.converter,e);return vl(r,[Gh(fl(a.firestore),"addDoc",s._key,u,null!==a.converter,{}).toMutation(s._key,_r.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new Eo(this.firestore,r))}isEqual(e){return Jg(this._delegate,e._delegate)}withConverter(e){return new fc(this.firestore,this._delegate.withConverter(e?hc.getInstance(this.firestore,e):null))}}function Il(a){return Fn(a,Nr)}class Sp{constructor(...e){this._delegate=new Ta(...e)}static documentId(){return new Sp(On.keyField().canonicalString())}isEqual(e){return(e=(0,ke.Ku)(e))instanceof Ta&&this._delegate._internalPath.isEqual(e._internalPath)}}class El{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Bd(){return new rm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new El(e)}static delete(){const e=function ay(){return new pl("deleteField")}();return e._methodName="FieldValue.delete",new El(e)}static arrayUnion(...e){const r=function uy(...a){return new pp("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new El(r)}static arrayRemove(...e){const r=function Qv(...a){return new im("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new El(r)}static increment(e){const r=function Tp(a){return new gp("increment",a)}(e);return r._methodName="FieldValue.increment",new El(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ey={Firestore:Cp,GeoPoint:Nd,Timestamp:Sn,Blob:Wi,Transaction:yy,WriteBatch:vy,DocumentReference:Eo,DocumentSnapshot:ef,Query:Ds,QueryDocumentSnapshot:tf,QuerySnapshot:To,CollectionReference:fc,FieldPath:Sp,FieldValue:El,setLogLevel:function eI(a){!function zt(a){_t.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Rp(a){(function Ty(a,e){a.INTERNAL.registerComponent(new Oe.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Ey)))})(a,(e,r)=>new Cp(e,r,new vE)),a.registerVersion("@firebase/firestore-compat","0.3.38")}(mt.A);var Tm=U(7935);function wm(a,e){return function IE(a,e=le.E){return new Ie.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Pp(a,e){return wm(a,e).pipe((0,Qe.T)(r=>({payload:r,type:"query"})))}class Am{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:u,query:d}=iI(s,r);return new bm(u,d,this.afs)}snapshotChanges(){return function wy(a,e){return wm(a,e).pipe((0,X.Z)(void 0),et(),(0,Qe.T)(r=>{const[s,u]=r;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ne.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qe.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,je.H)(this.ref.get(e)).pipe(ne.U0)}}function jd(a,e){return Pp(a,e).pipe((0,X.Z)(void 0),et(),(0,Qe.T)(r=>{const[s,u]=r,d=u.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,S)=>{const O=d.find(q=>q.doc.ref.isEqual(w.ref)),H=s?.payload.docs.find(q=>q.ref.isEqual(w.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(w.metadata)||!O&&H&&JSON.stringify(H.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:w}})}),g}))}function wa(a,e,r){return jd(a,r).pipe((0,vt.S)((s,u)=>function nI(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function Cm(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Dm(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Dm(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Dm(a,e.oldIndex,1)}return a}(a,s))}),a}(s,u.map(d=>d.payload),e),[]),(0,it.F)(),(0,Qe.T)(s=>s.map(u=>({type:u.type,payload:u}))))}function Dm(a,e,r,...s){const u=a.slice();return u.splice(e,r,...s),u}function Ay(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class bm{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Qe.T)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),r.pipe((0,X.Z)(void 0),et(),(0,Tt.p)(([s,u])=>u.length>0||!s),(0,Qe.T)(([,s])=>s),ne.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,vt.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Ay(e);return wa(this.query,r,this.afs.schedulers.outsideAngular).pipe(ne.U0)}valueChanges(e={}){return Pp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),ne.U0)}get(e){return(0,je.H)(this.query.get(e)).pipe(ne.U0)}add(e){return this.ref.add(e)}doc(e){return new Am(this.ref.doc(e),this.afs)}}class rI{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,Tt.p)(r=>r.length>0),ne.U0):jd(this.query,this.afs.schedulers.outsideAngular).pipe(ne.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,vt.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Ay(e);return wa(this.query,r,this.afs.schedulers.outsideAngular).pipe(ne.U0)}valueChanges(e={}){return Pp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.T)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),ne.U0)}get(e){return(0,je.H)(this.query.get(e)).pipe(ne.U0)}}const nf=new ee.nKC("angularfire2.enableFirestorePersistence"),$d=new ee.nKC("angularfire2.firestore.persistenceSettings"),Dy=new ee.nKC("angularfire2.firestore.settings"),Mp=new ee.nKC("angularfire2.firestore.use-emulator");function iI(a,e=(r=>r)){return{query:e(a),ref:a}}let Cy=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,u,d,g,w,S,O,H,q,ce,xe,rt,Et,ft,Ut,Wt){this.schedulers=S;const Bt=(0,Q.iB)(r,w,s),nn=H;q&&(0,K.gF)(Bt,w,ce,rt,Et,ft,xe,Ut),[this.firestore,this.persistenceEnabled$]=(0,Q.BM)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const Vn=w.runOutsideAngular(()=>Bt.firestore());if(d&&Vn.settings(d),nn&&Vn.useEmulator(...nn),u&&!(0,I.Vy)(g)){const Pn=()=>{try{return(0,je.H)(Vn.enablePersistence(O||void 0).then(()=>!0,()=>!1))}catch(ve){return typeof console<"u"&&console.warn(ve),(0,Se.of)(!1)}};return[Vn,w.runOutsideAngular(Pn)]}return[Vn,(0,Se.of)(!1)]},[d,nn,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:g}=iI(u,s),w=this.schedulers.ngZone.run(()=>d);return new bm(w,g,this)}collectionGroup(r,s){const u=s||(g=>g),d=this.firestore.collectionGroup(r);return new rI(u(d),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new Am(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(ee.KVO(Q.rx),ee.KVO(Q.uP,8),ee.KVO(nf,8),ee.KVO(Dy,8),ee.KVO(ee.Agw),ee.KVO(ee.SKi),ee.KVO(ne.u0),ee.KVO($d,8),ee.KVO(Mp,8),ee.KVO(K.DS,8),ee.KVO(K.CP,8),ee.KVO(K.yy,8),ee.KVO(K.ZP,8),ee.KVO(K.$z,8),ee.KVO(K.AU,8),ee.KVO(K.UB,8),ee.KVO(ne.Jv,8))};static \u0275prov=ee.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),by=(()=>{class a{constructor(){Tm.A.registerVersion("angularfire",ne.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:nf,useValue:!0},{provide:$d,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=ee.$C({type:a});static \u0275inj=ee.G2t({providers:[Cy]})}return a})()},9253:(Pt,Be,U)=>{U.d(Be,{BM:()=>Qe,Gt:()=>K,bf:()=>et,e7:()=>le,iB:()=>X,rx:()=>je,uP:()=>Se});var I=U(7705),ee=U(1825),ne=U(7935);const Q=["ngOnDestroy"],K=(lt,mt,ye,he={})=>new Proxy(lt,{get:(Oe,me)=>ye.runOutsideAngular(()=>{if(lt[me])return he?.spy?.get&&he.spy.get(me,lt[me]),lt[me];if(Q.indexOf(me)>-1)return()=>{};const ke=mt.toPromise().then(Xe=>{const pt=Xe?.[me];return"function"==typeof pt?pt.bind(Xe):pt?.then?pt.then(St=>ye.run(()=>St)):ye.run(()=>pt)});return new Proxy(()=>{},{get:(Xe,pt)=>ke[pt],apply:(Xe,pt,St)=>ke.then(He=>{const Ht=He?.(...St);return he?.spy?.apply&&he.spy.apply(me,St,Ht),Ht})})})}),le=(lt,mt)=>{mt.forEach(ye=>{Object.getOwnPropertyNames(ye.prototype||ye).forEach(he=>{Object.defineProperty(lt.prototype,he,Object.getOwnPropertyDescriptor(ye.prototype||ye,he))})})};class Ie{constructor(mt){return mt}}const je=new I.nKC("angularfire2.app.options"),Se=new I.nKC("angularfire2.app.name");function X(lt,mt,ye){const Oe="object"==typeof ye&&ye||{};Oe.name=Oe.name||"string"==typeof ye&&ye||"[DEFAULT]";const ke=ne.A.apps.filter(Xe=>Xe&&Xe.name===Oe.name)[0]||mt.runOutsideAngular(()=>ne.A.initializeApp(lt,Oe));try{if(JSON.stringify(lt)!==JSON.stringify(ke.options)){const Xe=!!module.hot;te("error",`${ke.name} Firebase App already initialized with different options${Xe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ie(ke)}const te=(lt,...mt)=>{(0,I.naY)()&&typeof console<"u"&&console[lt](...mt)},_e={provide:Ie,useFactory:X,deps:[je,I.SKi,[new I.Xx1,Se]]};let et=(()=>{class lt{static initializeApp(ye,he){return{ngModule:lt,providers:[{provide:je,useValue:ye},{provide:Se,useValue:he}]}}constructor(ye){ne.A.registerVersion("angularfire",ee.xv.full,"core"),ne.A.registerVersion("angularfire",ee.xv.full,"app-compat"),ne.A.registerVersion("angular",I.xvI.full,ye.toString())}static \u0275fac=function(he){return new(he||lt)(I.KVO(I.Agw))};static \u0275mod=I.$C({type:lt});static \u0275inj=I.G2t({providers:[_e]})}return lt})();function Qe(lt,mt,ye,he,Oe){const[,me,ke]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===lt)||[];if(me)return function vt(lt,mt){try{return lt.toString()===mt.toString()}catch{return lt===mt}}(Oe,ke)||(Tt("error",`${mt} was already initialized on the ${ye} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),Tt("warn",{is:Oe,was:ke})),me;{const Xe=he();return globalThis.\u0275AngularfireInstanceCache.push([lt,Xe,Oe]),Xe}}const it=typeof module<"u"&&!!module.hot,Tt=(lt,...mt)=>{(0,I.naY)()&&typeof console<"u"&&console[lt](...mt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(Pt,Be,U)=>{U.d(Be,{xv:()=>vt,U0:()=>on,u0:()=>ke,Jv:()=>mt});var I=U(7705),ee=U(7852);(0,ee.registerVersion)("firebase","10.14.0","app");var K=U(6780),Ie=U(9687);const Se=new class je extends Ie.q{}(class le extends K.R{constructor(Rt,ue){super(Rt,ue),this.scheduler=Rt,this.work=ue}schedule(Rt,ue=0){return ue>0?super.schedule(Rt,ue):(this.delay=ue,this.state=Rt,this.scheduler.flush(this),this)}execute(Rt,ue){return ue>0||this.closed?super.execute(Rt,ue):this._execute(Rt,ue)}requestAsyncId(Rt,ue,pe=0){return null!=pe&&pe>0||null==pe&&this.delay>0?super.requestAsyncId(Rt,ue,pe):(Rt.flush(this),0)}});var te=U(3236),_e=U(8141),et=U(6745),Qe=U(941);const vt=new I.RxE("ANGULARFIRE2_VERSION");class mt{constructor(){return((Mt,Rt)=>{const ue=(0,ee.getApps)(),pe=[];return ue.forEach(be=>{be.container.getProvider(Mt).instances.forEach(ze=>{pe.includes(ze)||pe.push(ze)})}),pe})(ye)}}const ye="app-check";function he(){}class Oe{zone;delegate;constructor(Rt,ue=Se){this.zone=Rt,this.delegate=ue}now(){return this.delegate.now()}schedule(Rt,ue,pe){const be=this.zone;return this.delegate.schedule(function(ze){be.runGuarded(()=>{Rt.apply(this,[ze])})},ue,pe)}}class me{zone;task=null;constructor(Rt){this.zone=Rt}call(Rt,ue){const pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",he,{},he,he)),ue.pipe((0,_e.M)({next:pe,complete:pe,error:pe})).subscribe(Rt).add(pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ke=(()=>{class Mt{ngZone;outsideAngular;insideAngular;constructor(ue){this.ngZone=ue,this.outsideAngular=ue.runOutsideAngular(()=>new Oe(Zone.current)),this.insideAngular=ue.run(()=>new Oe(Zone.current,te.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(pe){return new(pe||Mt)(I.KVO(I.SKi))};static \u0275prov=I.jDH({token:Mt,factory:Mt.\u0275fac,providedIn:"root"})}return Mt})();function on(Mt){return function Xt(Mt){return function(ue){return(ue=ue.lift(new me(Mt.ngZone))).pipe((0,et._)(Mt.outsideAngular),(0,Qe.Q)(Mt.insideAngular))}}(function Xe(){const Mt=globalThis.\u0275AngularFireScheduler;if(!Mt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Mt}())(Mt)}},345:(Pt,Be,U)=>{U.d(Be,{Bb:()=>gt,hE:()=>Xn,sG:()=>kt});var I=U(7705),ee=U(177);class ne extends ee.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Q extends ne{static makeCurrent(){(0,ee.ZD)(new Q)}onAndCancel(z,k,j){return z.addEventListener(k,j),()=>{z.removeEventListener(k,j)}}dispatchEvent(z,k){z.dispatchEvent(k)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,k){return(k=k||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,k){return"window"===k?window:"document"===k?z:"body"===k?z.body:null}getBaseHref(z){const k=function le(){return K=K||document.querySelector("base"),K?K.getAttribute("href"):null}();return null==k?null:function je(Ke){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",Ke);const z=Ie.pathname;return"/"===z.charAt(0)?z:`/${z}`}(k)}resetBaseElement(){K=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,ee._b)(document.cookie,z)}}let Ie,K=null,X=(()=>{class Ke{build(){return new XMLHttpRequest}static{this.\u0275fac=function(j){return new(j||Ke)}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const te=new I.nKC("EventManagerPlugins");let _e=(()=>{class Ke{constructor(k,j){this._zone=j,this._eventNameToPlugin=new Map,k.forEach(re=>{re.manager=this}),this._plugins=k.slice().reverse()}addEventListener(k,j,re){return this._findPluginFor(j).addEventListener(k,j,re)}getZone(){return this._zone}_findPluginFor(k){let j=this._eventNameToPlugin.get(k);if(j)return j;if(j=this._plugins.find(ae=>ae.supports(k)),!j)throw new I.wOt(5101,!1);return this._eventNameToPlugin.set(k,j),j}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(te),I.KVO(I.SKi))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();class et{constructor(z){this._doc=z}}const Qe="ng-app-id";let vt=(()=>{class Ke{constructor(k,j,re,ae={}){this.doc=k,this.appId=j,this.nonce=re,this.platformId=ae,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ee.Vy)(ae),this.resetHostNodes()}addStyles(k){for(const j of k)1===this.changeUsageCount(j,1)&&this.onStyleAdded(j)}removeStyles(k){for(const j of k)this.changeUsageCount(j,-1)<=0&&this.onStyleRemoved(j)}ngOnDestroy(){const k=this.styleNodesInDOM;k&&(k.forEach(j=>j.remove()),k.clear());for(const j of this.getAllStyles())this.onStyleRemoved(j);this.resetHostNodes()}addHost(k){this.hostNodes.add(k);for(const j of this.getAllStyles())this.addStyleToHost(k,j)}removeHost(k){this.hostNodes.delete(k)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(k){for(const j of this.hostNodes)this.addStyleToHost(j,k)}onStyleRemoved(k){const j=this.styleRef;j.get(k)?.elements?.forEach(re=>re.remove()),j.delete(k)}collectServerRenderedStyles(){const k=this.doc.head?.querySelectorAll(`style[${Qe}="${this.appId}"]`);if(k?.length){const j=new Map;return k.forEach(re=>{null!=re.textContent&&j.set(re.textContent,re)}),j}return null}changeUsageCount(k,j){const re=this.styleRef;if(re.has(k)){const ae=re.get(k);return ae.usage+=j,ae.usage}return re.set(k,{usage:j,elements:[]}),j}getStyleElement(k,j){const re=this.styleNodesInDOM,ae=re?.get(j);if(ae?.parentNode===k)return re.delete(j),ae.removeAttribute(Qe),ae;{const tt=this.doc.createElement("style");return this.nonce&&tt.setAttribute("nonce",this.nonce),tt.textContent=j,this.platformIsServer&&tt.setAttribute(Qe,this.appId),tt}}addStyleToHost(k,j){const re=this.getStyleElement(k,j);k.appendChild(re);const ae=this.styleRef,tt=ae.get(j)?.elements;tt?tt.push(re):ae.set(j,{elements:[re],usage:1})}resetHostNodes(){const k=this.hostNodes;k.clear(),k.add(this.doc.head)}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(ee.qQ),I.KVO(I.sZ2),I.KVO(I.BIS,8),I.KVO(I.Agw))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tt=/%COMP%/g,Oe=new I.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Xe(Ke,z){return z.map(k=>k.replace(Tt,Ke))}let pt=(()=>{class Ke{constructor(k,j,re,ae,tt,ct,jt,oe=null){this.eventManager=k,this.sharedStylesHost=j,this.appId=re,this.removeStylesOnCompDestroy=ae,this.doc=tt,this.platformId=ct,this.ngZone=jt,this.nonce=oe,this.rendererByCompId=new Map,this.platformIsServer=(0,ee.Vy)(ct),this.defaultRenderer=new St(k,tt,jt,this.platformIsServer)}createRenderer(k,j){if(!k||!j)return this.defaultRenderer;this.platformIsServer&&j.encapsulation===I.gXe.ShadowDom&&(j={...j,encapsulation:I.gXe.Emulated});const re=this.getOrCreateRenderer(k,j);return re instanceof xn?re.applyToHost(k):re instanceof Jn&&re.applyStyles(),re}getOrCreateRenderer(k,j){const re=this.rendererByCompId;let ae=re.get(j.id);if(!ae){const tt=this.doc,ct=this.ngZone,jt=this.eventManager,oe=this.sharedStylesHost,pn=this.removeStylesOnCompDestroy,Dn=this.platformIsServer;switch(j.encapsulation){case I.gXe.Emulated:ae=new xn(jt,oe,j,this.appId,pn,tt,ct,Dn);break;case I.gXe.ShadowDom:return new Xt(jt,oe,k,j,tt,ct,this.nonce,Dn);default:ae=new Jn(jt,oe,j,pn,tt,ct,Dn)}re.set(j.id,ae)}return ae}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(_e),I.KVO(vt),I.KVO(I.sZ2),I.KVO(Oe),I.KVO(ee.qQ),I.KVO(I.Agw),I.KVO(I.SKi),I.KVO(I.BIS))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();class St{constructor(z,k,j,re){this.eventManager=z,this.doc=k,this.ngZone=j,this.platformIsServer=re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,k){return k?this.doc.createElementNS(it[k]||k,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,k){(on(z)?z.content:z).appendChild(k)}insertBefore(z,k,j){z&&(on(z)?z.content:z).insertBefore(k,j)}removeChild(z,k){z&&z.removeChild(k)}selectRootElement(z,k){let j="string"==typeof z?this.doc.querySelector(z):z;if(!j)throw new I.wOt(-5104,!1);return k||(j.textContent=""),j}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,k,j,re){if(re){k=re+":"+k;const ae=it[re];ae?z.setAttributeNS(ae,k,j):z.setAttribute(k,j)}else z.setAttribute(k,j)}removeAttribute(z,k,j){if(j){const re=it[j];re?z.removeAttributeNS(re,k):z.removeAttribute(`${j}:${k}`)}else z.removeAttribute(k)}addClass(z,k){z.classList.add(k)}removeClass(z,k){z.classList.remove(k)}setStyle(z,k,j,re){re&(I.czy.DashCase|I.czy.Important)?z.style.setProperty(k,j,re&I.czy.Important?"important":""):z.style[k]=j}removeStyle(z,k,j){j&I.czy.DashCase?z.style.removeProperty(k):z.style[k]=""}setProperty(z,k,j){z[k]=j}setValue(z,k){z.nodeValue=k}listen(z,k,j){if("string"==typeof z&&!(z=(0,ee.QT)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${k}`);return this.eventManager.addEventListener(z,k,this.decoratePreventDefault(j))}decoratePreventDefault(z){return k=>{if("__ngUnwrap__"===k)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(k)):z(k))&&k.preventDefault()}}}function on(Ke){return"TEMPLATE"===Ke.tagName&&void 0!==Ke.content}class Xt extends St{constructor(z,k,j,re,ae,tt,ct,jt){super(z,ae,tt,jt),this.sharedStylesHost=k,this.hostEl=j,this.shadowRoot=j.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const oe=Xe(re.id,re.styles);for(const pn of oe){const Dn=document.createElement("style");ct&&Dn.setAttribute("nonce",ct),Dn.textContent=pn,this.shadowRoot.appendChild(Dn)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,k){return super.appendChild(this.nodeOrShadowRoot(z),k)}insertBefore(z,k,j){return super.insertBefore(this.nodeOrShadowRoot(z),k,j)}removeChild(z,k){return super.removeChild(this.nodeOrShadowRoot(z),k)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Jn extends St{constructor(z,k,j,re,ae,tt,ct,jt){super(z,ae,tt,ct),this.sharedStylesHost=k,this.removeStylesOnCompDestroy=re,this.styles=jt?Xe(jt,j.styles):j.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class xn extends Jn{constructor(z,k,j,re,ae,tt,ct,jt){const oe=re+"-"+j.id;super(z,k,j,ae,tt,ct,jt,oe),this.contentAttr=function me(Ke){return"_ngcontent-%COMP%".replace(Tt,Ke)}(oe),this.hostAttr=function ke(Ke){return"_nghost-%COMP%".replace(Tt,Ke)}(oe)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,k){const j=super.createElement(z,k);return super.setAttribute(j,this.contentAttr,""),j}}let Mt=(()=>{class Ke extends et{constructor(k){super(k)}supports(k){return!0}addEventListener(k,j,re){return k.addEventListener(j,re,!1),()=>this.removeEventListener(k,j,re)}removeEventListener(k,j,re){return k.removeEventListener(j,re)}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(ee.qQ))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const Rt=["alt","control","meta","shift"],ue={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pe={alt:Ke=>Ke.altKey,control:Ke=>Ke.ctrlKey,meta:Ke=>Ke.metaKey,shift:Ke=>Ke.shiftKey};let be=(()=>{class Ke extends et{constructor(k){super(k)}supports(k){return null!=Ke.parseEventName(k)}addEventListener(k,j,re){const ae=Ke.parseEventName(j),tt=Ke.eventCallback(ae.fullKey,re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ee.QT)().onAndCancel(k,ae.domEventName,tt))}static parseEventName(k){const j=k.toLowerCase().split("."),re=j.shift();if(0===j.length||"keydown"!==re&&"keyup"!==re)return null;const ae=Ke._normalizeKey(j.pop());let tt="",ct=j.indexOf("code");if(ct>-1&&(j.splice(ct,1),tt="code."),Rt.forEach(oe=>{const pn=j.indexOf(oe);pn>-1&&(j.splice(pn,1),tt+=oe+".")}),tt+=ae,0!=j.length||0===ae.length)return null;const jt={};return jt.domEventName=re,jt.fullKey=tt,jt}static matchEventFullKeyCode(k,j){let re=ue[k.key]||k.key,ae="";return j.indexOf("code.")>-1&&(re=k.code,ae="code."),!(null==re||!re)&&(re=re.toLowerCase()," "===re?re="space":"."===re&&(re="dot"),Rt.forEach(tt=>{tt!==re&&(0,pe[tt])(k)&&(ae+=tt+".")}),ae+=re,ae===j)}static eventCallback(k,j,re){return ae=>{Ke.matchEventFullKeyCode(ae,k)&&re.runGuarded(()=>j(ae))}}static _normalizeKey(k){return"esc"===k?"escape":k}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(ee.qQ))}}static{this.\u0275prov=I.jDH({token:Ke,factory:Ke.\u0275fac})}}return Ke})();const kt=(0,I.oH4)(I.fpN,"browser",[{provide:I.Agw,useValue:ee.AJ},{provide:I.PLl,useValue:function _t(){Q.makeCurrent()},multi:!0},{provide:ee.qQ,useFactory:function zt(){return(0,I.TL$)(document),document},deps:[]}]),Hn=new I.nKC(""),rn=[{provide:I.e01,useClass:class Se{addToWindow(z){I.JZv.getAngularTestability=(j,re=!0)=>{const ae=z.findTestabilityInTree(j,re);if(null==ae)throw new I.wOt(5103,!1);return ae},I.JZv.getAllAngularTestabilities=()=>z.getAllTestabilities(),I.JZv.getAllAngularRootElements=()=>z.getAllRootElements(),I.JZv.frameworkStabilizers||(I.JZv.frameworkStabilizers=[]),I.JZv.frameworkStabilizers.push(j=>{const re=I.JZv.getAllAngularTestabilities();let ae=re.length,tt=!1;const ct=function(jt){tt=tt||jt,ae--,0==ae&&j(tt)};re.forEach(jt=>{jt.whenStable(ct)})})}findTestabilityInTree(z,k,j){return null==k?null:z.getTestability(k)??(j?(0,ee.QT)().isShadowRoot(k)?this.findTestabilityInTree(z,k.host,!0):this.findTestabilityInTree(z,k.parentElement,!0):null)}},deps:[]},{provide:I.WHO,useClass:I.NYb,deps:[I.SKi,I.giA,I.e01]},{provide:I.NYb,useClass:I.NYb,deps:[I.SKi,I.giA,I.e01]}],dt=[{provide:I.H8p,useValue:"root"},{provide:I.zcH,useFactory:function $n(){return new I.zcH},deps:[]},{provide:te,useClass:Mt,multi:!0,deps:[ee.qQ,I.SKi,I.Agw]},{provide:te,useClass:be,multi:!0,deps:[ee.qQ]},pt,vt,_e,{provide:I._9s,useExisting:pt},{provide:ee.N0,useClass:X,deps:[]},[]];let gt=(()=>{class Ke{constructor(k){}static withServerTransition(k){return{ngModule:Ke,providers:[{provide:I.sZ2,useValue:k.appId}]}}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(Hn,12))}}static{this.\u0275mod=I.$C({type:Ke})}static{this.\u0275inj=I.G2t({providers:[...dt,...rn],imports:[ee.MD,I.Hbi]})}}return Ke})(),Xn=(()=>{class Ke{constructor(k){this._doc=k}getTitle(){return this._doc.title}setTitle(k){this._doc.title=k||""}static{this.\u0275fac=function(j){return new(j||Ke)(I.KVO(ee.qQ))}}static{this.\u0275prov=I.jDH({token:Ke,factory:function(j){let re=null;return re=j?new j:function We(){return new Xn((0,I.KVO)(ee.qQ))}(),re},providedIn:"root"})}}return Ke})();typeof window<"u"&&window},7841:(Pt,Be,U)=>{U.d(Be,{Ix:()=>nr,Wk:()=>Nu,iI:()=>sh,n3:()=>Oi});var I=U(7705),ee=U(1985),ne=U(8071),K=U(8455),le=U(7673),Ie=U(4412),je=U(3073),Se=U(3669),X=U(6450),te=U(3794),_e=U(8496),et=U(4360),Qe=U(5225);function vt(...E){const D=(0,te.lI)(E),v=(0,te.ms)(E),{args:b,keys:N}=(0,je.D)(E);if(0===b.length)return(0,K.H)([],D);const G=new ee.c(function it(E,D,v=Se.D){return b=>{Tt(D,()=>{const{length:N}=E,G=new Array(N);let J=N,Ue=N;for(let Me=0;Me<N;Me++)Tt(D,()=>{const Ct=(0,K.H)(E[Me],D);let dn=!1;Ct.subscribe((0,et._)(b,vn=>{G[Me]=vn,dn||(dn=!0,Ue--),Ue||b.next(v(G.slice()))},()=>{--J||b.complete()}))},b)},b)}}(b,D,N?J=>(0,_e.e)(N,J):Se.D));return v?G.pipe((0,X.I)(v)):G}function Tt(E,D,v){E?(0,Qe.N)(v,E,D):D()}var lt=U(9350),mt=U(8793),ye=U(8750);function he(E){return new ee.c(D=>{(0,ye.Tg)(E()).subscribe(D)})}var Oe=U(1203);function me(E,D){const v=(0,ne.T)(E)?E:()=>E,b=N=>N.error(v());return new ee.c(D?N=>D.schedule(b,0,N):b)}var ke=U(983),Xe=U(8359),pt=U(9974);function St(){return(0,pt.N)((E,D)=>{let v=null;E._refCount++;const b=(0,et._)(D,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(v=null);const N=E._connection,G=v;v=null,N&&(!G||N===G)&&N.unsubscribe(),D.unsubscribe()});E.subscribe(b),b.closed||(v=E.connect())})}class He extends ee.c{constructor(D,v){super(),this.source=D,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,pt.S)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Xe.yU;const v=this.getSubject();D.add(this.source.subscribe((0,et._)(v,void 0,()=>{this._teardown(),v.complete()},b=>{this._teardown(),v.error(b)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Xe.yU.EMPTY)}return D}refCount(){return St()(this)}}var Ht=U(1413),on=U(177),Xt=U(6354),Jn=U(5558),xn=U(6697),Mt=U(9172),Rt=U(5964),ue=U(1397),pe=U(1594);function be(E,D){return(0,ne.T)(D)?(0,ue.Z)(E,D,1):(0,ue.Z)(E,1)}var Ae=U(8141);function ze(E){return(0,pt.N)((D,v)=>{let G,b=null,N=!1;b=D.subscribe((0,et._)(v,void 0,void 0,J=>{G=(0,ye.Tg)(E(J,ze(E)(D))),b?(b.unsubscribe(),b=null,G.subscribe(v)):N=!0})),N&&(b.unsubscribe(),b=null,G.subscribe(v))})}var Le=U(2816),st=U(9901);function _t(E){return E<=0?()=>ke.w:(0,pt.N)((D,v)=>{let b=[];D.subscribe((0,et._)(v,N=>{b.push(N),E<b.length&&b.shift()},()=>{for(const N of b)v.next(N);v.complete()},void 0,()=>{b=null}))})}var $n=U(3774);function kt(E){return(0,pt.N)((D,v)=>{try{D.subscribe(v)}finally{v.add(E)}})}var Hn=U(5343),dt=U(6365),gt=U(345);const Ft="primary",Je=Symbol("RouteTitle");class Re{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v[0]:v}return null}getAll(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function We(E){return new Re(E)}function Xn(E,D,v){const b=v.path.split("/");if(b.length>E.length||"full"===v.pathMatch&&(D.hasChildren()||b.length<E.length))return null;const N={};for(let G=0;G<b.length;G++){const J=b[G],Ue=E[G];if(J.startsWith(":"))N[J.substring(1)]=Ue;else if(J!==Ue.path)return null}return{consumed:E.slice(0,b.length),posParams:N}}function ir(E,D){const v=E?Object.keys(E):void 0,b=D?Object.keys(D):void 0;if(!v||!b||v.length!=b.length)return!1;let N;for(let G=0;G<v.length;G++)if(N=v[G],!qt(E[N],D[N]))return!1;return!0}function qt(E,D){if(Array.isArray(E)&&Array.isArray(D)){if(E.length!==D.length)return!1;const v=[...E].sort(),b=[...D].sort();return v.every((N,G)=>b[G]===N)}return E===D}function an(E){return E.length>0?E[E.length-1]:null}function Gt(E){return function Q(E){return!!E&&(E instanceof ee.c||(0,ne.T)(E.lift)&&(0,ne.T)(E.subscribe))}(E)?E:(0,I.jNT)(E)?(0,K.H)(Promise.resolve(E)):(0,le.of)(E)}const fr={exact:function Fr(E,D,v){if(!gr(E.segments,D.segments)||!un(E.segments,D.segments,v)||E.numberOfChildren!==D.numberOfChildren)return!1;for(const b in D.children)if(!E.children[b]||!Fr(E.children[b],D.children[b],v))return!1;return!0},subset:ot},Pr={exact:function bn(E,D){return ir(E,D)},subset:function to(E,D){return Object.keys(D).length<=Object.keys(E).length&&Object.keys(D).every(v=>qt(E[v],D[v]))},ignored:()=>!0};function vr(E,D,v){return fr[v.paths](E.root,D.root,v.matrixParams)&&Pr[v.queryParams](E.queryParams,D.queryParams)&&!("exact"===v.fragment&&E.fragment!==D.fragment)}function ot(E,D,v){return Gr(E,D,D.segments,v)}function Gr(E,D,v,b){if(E.segments.length>v.length){const N=E.segments.slice(0,v.length);return!(!gr(N,v)||D.hasChildren()||!un(N,v,b))}if(E.segments.length===v.length){if(!gr(E.segments,v)||!un(E.segments,v,b))return!1;for(const N in D.children)if(!E.children[N]||!ot(E.children[N],D.children[N],b))return!1;return!0}{const N=v.slice(0,E.segments.length),G=v.slice(E.segments.length);return!!(gr(E.segments,N)&&un(E.segments,N,b)&&E.children[Ft])&&Gr(E.children[Ft],D,G,b)}}function un(E,D,v){return D.every((b,N)=>Pr[v](E[N].parameters,b.parameters))}class Sn{constructor(D=new ut([],{}),v={},b=null){this.root=D,this.queryParams=v,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=We(this.queryParams)),this._queryParamMap}toString(){return Yi.serialize(this)}}class ut{constructor(D,v){this.segments=D,this.children=v,this.parent=null,Object.values(v).forEach(b=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ir(this)}}class Jr{constructor(D,v){this.path=D,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=We(this.parameters)),this._parameterMap}toString(){return re(this)}}function gr(E,D){return E.length===D.length&&E.every((v,b)=>v.path===D[b].path)}let It=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return new Vr},providedIn:"root"})}}return E})();class Vr{parse(D){const v=new pi(D);return new Sn(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(D){const v=`/${Ii(D.root,!0)}`,b=function tt(E){const D=Object.keys(E).map(v=>{const b=E[v];return Array.isArray(b)?b.map(N=>`${Xi(v)}=${Xi(N)}`).join("&"):`${Xi(v)}=${Xi(b)}`}).filter(v=>!!v);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${v}${b}${"string"==typeof D.fragment?`#${function Ke(E){return encodeURI(E)}(D.fragment)}`:""}`}}const Yi=new Vr;function Ir(E){return E.segments.map(D=>re(D)).join("/")}function Ii(E,D){if(!E.hasChildren())return Ir(E);if(D){const v=E.children[Ft]?Ii(E.children[Ft],!1):"",b=[];return Object.entries(E.children).forEach(([N,G])=>{N!==Ft&&b.push(`${N}:${Ii(G,!1)}`)}),b.length>0?`${v}(${b.join("//")})`:v}{const v=function On(E,D){let v=[];return Object.entries(E.children).forEach(([b,N])=>{b===Ft&&(v=v.concat(D(N,b)))}),Object.entries(E.children).forEach(([b,N])=>{b!==Ft&&(v=v.concat(D(N,b)))}),v}(E,(b,N)=>N===Ft?[Ii(E.children[Ft],!1)]:[`${N}:${Ii(b,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Ft]?`${Ir(E)}/${v[0]}`:`${Ir(E)}/(${v.join("//")})`}}function Wr(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xi(E){return Wr(E).replace(/%3B/gi,";")}function z(E){return Wr(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k(E){return decodeURIComponent(E)}function j(E){return k(E.replace(/\+/g,"%20"))}function re(E){return`${z(E.path)}${function ae(E){return Object.keys(E).map(D=>`;${z(D)}=${z(E[D])}`).join("")}(E.parameters)}`}const ct=/^[^\/()?;#]+/;function jt(E){const D=E.match(ct);return D?D[0]:""}const oe=/^[^\/()?;=#]+/,Dn=/^[^=?&#]+/,Zr=/^[^&#]+/;class pi{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ut([],{}):new ut([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(D.length>0||Object.keys(v).length>0)&&(b[Ft]=new ut(D,v)),b}parseSegment(){const D=jt(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new I.wOt(4009,!1);return this.capture(D),new Jr(k(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const v=function pn(E){const D=E.match(oe);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let b="";if(this.consumeOptional("=")){const N=jt(this.remaining);N&&(b=N,this.capture(b))}D[k(v)]=k(b)}parseQueryParam(D){const v=function cn(E){const D=E.match(Dn);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let b="";if(this.consumeOptional("=")){const J=function fi(E){const D=E.match(Zr);return D?D[0]:""}(this.remaining);J&&(b=J,this.capture(b))}const N=j(v),G=j(b);if(D.hasOwnProperty(N)){let J=D[N];Array.isArray(J)||(J=[J],D[N]=J),J.push(G)}else D[N]=G}parseParens(D){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=jt(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new I.wOt(4010,!1);let G;b.indexOf(":")>-1?(G=b.slice(0,b.indexOf(":")),this.capture(G),this.capture(":")):D&&(G=Ft);const J=this.parseChildren();v[G]=1===Object.keys(J).length?J[Ft]:new ut([],J),this.consumeOptional("//")}return v}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new I.wOt(4011,!1)}}function ei(E){return E.segments.length>0?new ut([],{[Ft]:E}):E}function Or(E){const D={};for(const b of Object.keys(E.children)){const G=Or(E.children[b]);if(b===Ft&&0===G.segments.length&&G.hasChildren())for(const[J,Ue]of Object.entries(G.children))D[J]=Ue;else(G.segments.length>0||G.hasChildren())&&(D[b]=G)}return function Ei(E){if(1===E.numberOfChildren&&E.children[Ft]){const D=E.children[Ft];return new ut(E.segments.concat(D.segments),D.children)}return E}(new ut(E.segments,D))}function Er(E){return E instanceof Sn}function hs(E){let D;const N=ei(function v(G){const J={};for(const Me of G.children){const Ct=v(Me);J[Me.outlet]=Ct}const Ue=new ut(G.url,J);return G===E&&(D=Ue),Ue}(E.root));return D??N}function Ne(E,D,v,b){let N=E;for(;N.parent;)N=N.parent;if(0===D.length)return At(N,N,N,v,b);const G=function sn(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Qt(!0,0,E);let D=0,v=!1;const b=E.reduce((N,G,J)=>{if("object"==typeof G&&null!=G){if(G.outlets){const Ue={};return Object.entries(G.outlets).forEach(([Me,Ct])=>{Ue[Me]="string"==typeof Ct?Ct.split("/"):Ct}),[...N,{outlets:Ue}]}if(G.segmentPath)return[...N,G.segmentPath]}return"string"!=typeof G?[...N,G]:0===J?(G.split("/").forEach((Ue,Me)=>{0==Me&&"."===Ue||(0==Me&&""===Ue?v=!0:".."===Ue?D++:""!=Ue&&N.push(Ue))}),N):[...N,G]},[]);return new Qt(v,D,b)}(D);if(G.toRoot())return At(N,N,new ut([],{}),v,b);const J=function Zn(E,D,v){if(E.isAbsolute)return new Tn(D,!0,0);if(!v)return new Tn(D,!1,NaN);if(null===v.parent)return new Tn(v,!0,0);const b=Ee(E.commands[0])?0:1;return function Ur(E,D,v){let b=E,N=D,G=v;for(;G>N;){if(G-=N,b=b.parent,!b)throw new I.wOt(4005,!1);N=b.segments.length}return new Tn(b,!1,N-G)}(v,v.segments.length-1+b,E.numberOfDoubleDots)}(G,N,E),Ue=J.processChildren?fs(J.segmentGroup,J.index,G.commands):Vs(J.segmentGroup,J.index,G.commands);return At(N,J.segmentGroup,Ue,v,b)}function Ee(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function Ye(E){return"object"==typeof E&&null!=E&&E.outlets}function At(E,D,v,b,N){let J,G={};b&&Object.entries(b).forEach(([Me,Ct])=>{G[Me]=Array.isArray(Ct)?Ct.map(dn=>`${dn}`):`${Ct}`}),J=E===D?v:xt(E,D,v);const Ue=ei(Or(J));return new Sn(Ue,G,N)}function xt(E,D,v){const b={};return Object.entries(E.children).forEach(([N,G])=>{b[N]=G===D?v:xt(G,D,v)}),new ut(E.segments,b)}class Qt{constructor(D,v,b){if(this.isAbsolute=D,this.numberOfDoubleDots=v,this.commands=b,D&&b.length>0&&Ee(b[0]))throw new I.wOt(4003,!1);const N=b.find(Ye);if(N&&N!==an(b))throw new I.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tn{constructor(D,v,b){this.segmentGroup=D,this.processChildren=v,this.index=b}}function Vs(E,D,v){if(E||(E=new ut([],{})),0===E.segments.length&&E.hasChildren())return fs(E,D,v);const b=function Eu(E,D,v){let b=0,N=D;const G={match:!1,pathIndex:0,commandIndex:0};for(;N<E.segments.length;){if(b>=v.length)return G;const J=E.segments[N],Ue=v[b];if(Ye(Ue))break;const Me=`${Ue}`,Ct=b<v.length-1?v[b+1]:null;if(N>0&&void 0===Me)break;if(Me&&Ct&&"object"==typeof Ct&&void 0===Ct.outlets){if(!si(Me,Ct,J))return G;b+=2}else{if(!si(Me,{},J))return G;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(E,D,v),N=v.slice(b.commandIndex);if(b.match&&b.pathIndex<E.segments.length){const G=new ut(E.segments.slice(0,b.pathIndex),{});return G.children[Ft]=new ut(E.segments.slice(b.pathIndex),E.children),fs(G,0,N)}return b.match&&0===N.length?new ut(E.segments,{}):b.match&&!E.hasChildren()?no(E,D,v):b.match?fs(E,0,N):no(E,D,v)}function fs(E,D,v){if(0===v.length)return new ut(E.segments,{});{const b=function Cn(E){return Ye(E[0])?E[0].outlets:{[Ft]:E}}(v),N={};if(Object.keys(b).some(G=>G!==Ft)&&E.children[Ft]&&1===E.numberOfChildren&&0===E.children[Ft].segments.length){const G=fs(E.children[Ft],D,v);return new ut(E.segments,G.children)}return Object.entries(b).forEach(([G,J])=>{"string"==typeof J&&(J=[J]),null!==J&&(N[G]=Vs(E.children[G],D,J))}),Object.entries(E.children).forEach(([G,J])=>{void 0===b[G]&&(N[G]=J)}),new ut(E.segments,N)}}function no(E,D,v){const b=E.segments.slice(0,D);let N=0;for(;N<v.length;){const G=v[N];if(Ye(G)){const Me=Tu(G.outlets);return new ut(b,Me)}if(0===N&&Ee(v[0])){b.push(new Jr(E.segments[D].path,na(v[0]))),N++;continue}const J=Ye(G)?G.outlets[Ft]:`${G}`,Ue=N<v.length-1?v[N+1]:null;J&&Ue&&Ee(Ue)?(b.push(new Jr(J,na(Ue))),N+=2):(b.push(new Jr(J,{})),N++)}return new ut(b,{})}function Tu(E){const D={};return Object.entries(E).forEach(([v,b])=>{"string"==typeof b&&(b=[b]),null!==b&&(D[v]=no(new ut([],{}),0,b))}),D}function na(E){const D={};return Object.entries(E).forEach(([v,b])=>D[v]=`${b}`),D}function si(E,D,v){return E==v.path&&ir(D,v.parameters)}const ro="imperative";class Pi{constructor(D,v){this.id=D,this.url=v}}class ba extends Pi{constructor(D,v,b="imperative",N=null){super(D,v),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ji extends Pi{constructor(D,v,b){super(D,v),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class So extends Pi{constructor(D,v,b,N){super(D,v),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Us extends Pi{constructor(D,v,b,N){super(D,v),this.reason=b,this.code=N,this.type=16}}class Ss extends Pi{constructor(D,v,b,N){super(D,v),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sa extends Pi{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ti extends Pi{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ra extends Pi{constructor(D,v,b,N,G){super(D,v),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pa extends Pi{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wu extends Pi{constructor(D,v,b,N){super(D,v),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ra{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Au{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ma{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ia{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dr{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(D,v,b){this.routerEvent=D,this.position=v,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gn{}class Cr{constructor(D){this.url=D}}class ps{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Mn,this.attachRef=null}}let Mn=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(v,b){const N=this.getOrCreateContext(v);N.outlet=b,this.contexts.set(v,N)}onChildOutletDestroyed(v){const b=this.getContext(v);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let b=this.getContext(v);return b||(b=new ps,this.contexts.set(v,b)),b}getContext(v){return this.contexts.get(v)||null}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();class zn{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const v=this.pathFromRoot(D);return v.length>1?v[v.length-2]:null}children(D){const v=Bs(D,this._root);return v?v.children.map(b=>b.value):[]}firstChild(D){const v=Bs(D,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(D){const v=Ni(D,this._root);return v.length<2?[]:v[v.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return Ni(D,this._root).map(v=>v.value)}}function Bs(E,D){if(E===D.value)return D;for(const v of D.children){const b=Bs(E,v);if(b)return b}return null}function Ni(E,D){if(E===D.value)return[D];for(const v of D.children){const b=Ni(E,v);if(b.length)return b.unshift(D),b}return[]}class lr{constructor(D,v){this.value=D,this.children=v}toString(){return`TreeNode(${this.value})`}}function xi(E){const D={};return E&&E.children.forEach(v=>D[v.value.outlet]=v),D}class ur extends zn{constructor(D,v){super(D),this.snapshot=v,Gn(this,D)}toString(){return this.snapshot.toString()}}function yt(E,D){const v=function Zt(E,D){const J=new pr([],{},{},"",{},Ft,D,null,{});return new Zi("",new lr(J,[]))}(0,D),b=new Ie.t([new Jr("",{})]),N=new Ie.t({}),G=new Ie.t({}),J=new Ie.t({}),Ue=new Ie.t(""),Me=new mn(b,N,J,Ue,G,Ft,D,v.root);return Me.snapshot=v.root,new ur(new lr(Me,[]),v)}class mn{constructor(D,v,b,N,G,J,Ue,Me){this.urlSubject=D,this.paramsSubject=v,this.queryParamsSubject=b,this.fragmentSubject=N,this.dataSubject=G,this.outlet=J,this.component=Ue,this._futureSnapshot=Me,this.title=this.dataSubject?.pipe((0,Xt.T)(Ct=>Ct[Je]))??(0,le.of)(void 0),this.url=D,this.params=v,this.queryParams=b,this.fragment=N,this.data=G}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xt.T)(D=>We(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xt.T)(D=>We(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _n(E,D="emptyOnly"){const v=E.pathFromRoot;let b=0;if("always"!==D)for(b=v.length-1;b>=1;){const N=v[b],G=v[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if(G.component)break;b--}}return function wi(E){return E.reduce((D,v)=>({params:{...D.params,...v.params},data:{...D.data,...v.data},resolve:{...v.data,...D.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(b))}class pr{get title(){return this.data?.[Je]}constructor(D,v,b,N,G,J,Ue,Me,Ct){this.url=D,this.params=v,this.queryParams=b,this.fragment=N,this.data=G,this.outlet=J,this.component=Ue,this.routeConfig=Me,this._resolve=Ct}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=We(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=We(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zi extends zn{constructor(D,v){super(v),this.url=D,Gn(this,v)}toString(){return gs(this._root)}}function Gn(E,D){D.value._routerState=E,D.children.forEach(v=>Gn(E,v))}function gs(E){const D=E.children.length>0?` { ${E.children.map(gs).join(", ")} } `:"";return`${E.value}${D}`}function Br(E){if(E.snapshot){const D=E.snapshot,v=E._futureSnapshot;E.snapshot=v,ir(D.queryParams,v.queryParams)||E.queryParamsSubject.next(v.queryParams),D.fragment!==v.fragment&&E.fragmentSubject.next(v.fragment),ir(D.params,v.params)||E.paramsSubject.next(v.params),function zr(E,D){if(E.length!==D.length)return!1;for(let v=0;v<E.length;++v)if(!ir(E[v],D[v]))return!1;return!0}(D.url,v.url)||E.urlSubject.next(v.url),ir(D.data,v.data)||E.dataSubject.next(v.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function $t(E,D){const v=ir(E.params,D.params)&&function Jt(E,D){return gr(E,D)&&E.every((v,b)=>ir(v.parameters,D[b].parameters))}(E.url,D.url);return v&&!(!E.parent!=!D.parent)&&(!E.parent||$t(E.parent,D.parent))}let Oi=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ft,this.activateEvents=new I.bkB,this.deactivateEvents=new I.bkB,this.attachEvents=new I.bkB,this.detachEvents=new I.bkB,this.parentContexts=(0,I.WQX)(Mn),this.location=(0,I.WQX)(I.c1b),this.changeDetector=(0,I.WQX)(I.gRc),this.environmentInjector=(0,I.WQX)(I.uvJ),this.inputBinder=(0,I.WQX)(cr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:b,previousValue:N}=v.name;if(b)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.wOt(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,b){this.activated=v,this._activatedRoute=b,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,b){if(this.isActivated)throw new I.wOt(4013,!1);this._activatedRoute=v;const N=this.location,J=v.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,Me=new gi(v,Ue,N.injector);this.activated=N.createComponent(J,{index:N.length,injector:Me,environmentInjector:b??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275dir=I.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.OA$]})}}return E})();class gi{constructor(D,v,b){this.route=D,this.childContexts=v,this.parent=b}get(D,v){return D===mn?this.route:D===Mn?this.childContexts:this.parent.get(D,v)}}const cr=new I.nKC("");let er=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:b}=v,N=vt([b.queryParams,b.params,b.data]).pipe((0,Jn.n)(([G,J,Ue],Me)=>(Ue={...G,...J,...Ue},0===Me?(0,le.of)(Ue):Promise.resolve(Ue)))).subscribe(G=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==b||null===b.component)return void this.unsubscribeFromRouteData(v);const J=(0,I.HJs)(b.component);if(J)for(const{templateName:Ue}of J.inputs)v.activatedComponentRef.setInput(Ue,G[Ue]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,N)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac})}}return E})();function br(E,D,v){if(v&&E.shouldReuseRoute(D.value,v.value.snapshot)){const b=v.value;b._futureSnapshot=D.value;const N=function Li(E,D,v){return D.children.map(b=>{for(const N of v.children)if(E.shouldReuseRoute(b.value,N.value.snapshot))return br(E,b,N);return br(E,b)})}(E,D,v);return new lr(b,N)}{if(E.shouldAttach(D.value)){const G=E.retrieve(D.value);if(null!==G){const J=G.route;return J.value._futureSnapshot=D.value,J.children=D.children.map(Ue=>br(E,Ue)),J}}const b=function Ai(E){return new mn(new Ie.t(E.url),new Ie.t(E.params),new Ie.t(E.queryParams),new Ie.t(E.fragment),new Ie.t(E.data),E.outlet,E.component,E)}(D.value),N=D.children.map(G=>br(E,G));return new lr(b,N)}}const Ro="ngNavigationCancelingError";function oi(E,D){const{redirectTo:v,navigationBehaviorOptions:b}=Er(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,N=ti(!1,0,D);return N.url=v,N.navigationBehaviorOptions=b,N}function ti(E,D,v){const b=new Error("NavigationCancelingError: "+(E||""));return b[Ro]=!0,b.cancellationCode=D,v&&(b.url=v),b}function ms(E){return E&&E[Ro]}let yn=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275cmp=I.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[I.aNF],decls:1,vars:0,template:function(b,N){1&b&&I.nrm(0,"router-outlet")},dependencies:[Oi],encapsulation:2})}}return E})();function mr(E){const D=E.children&&E.children.map(mr),v=D?{...E,children:D}:{...E};return!v.component&&!v.loadComponent&&(D||v.loadChildren)&&v.outlet&&v.outlet!==Ft&&(v.component=yn),v}function ln(E){return E.outlet||Ft}function Nn(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let D=E.parent;D;D=D.parent){const v=D.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class sa{constructor(D,v,b,N,G){this.routeReuseStrategy=D,this.futureState=v,this.currState=b,this.forwardEvent=N,this.inputBindingEnabled=G}activate(D){const v=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,b,D),Br(this.futureState.root),this.activateChildRoutes(v,b,D)}deactivateChildRoutes(D,v,b){const N=xi(v);D.children.forEach(G=>{const J=G.value.outlet;this.deactivateRoutes(G,N[J],b),delete N[J]}),Object.values(N).forEach(G=>{this.deactivateRouteAndItsChildren(G,b)})}deactivateRoutes(D,v,b){const N=D.value,G=v?v.value:null;if(N===G)if(N.component){const J=b.getContext(N.outlet);J&&this.deactivateChildRoutes(D,v,J.children)}else this.deactivateChildRoutes(D,v,b);else G&&this.deactivateRouteAndItsChildren(v,b)}deactivateRouteAndItsChildren(D,v){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,v):this.deactivateRouteAndOutlet(D,v)}detachAndStoreRouteSubtree(D,v){const b=v.getContext(D.value.outlet),N=b&&D.value.component?b.children:v,G=xi(D);for(const J of Object.keys(G))this.deactivateRouteAndItsChildren(G[J],N);if(b&&b.outlet){const J=b.outlet.detach(),Ue=b.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:J,route:D,contexts:Ue})}}deactivateRouteAndOutlet(D,v){const b=v.getContext(D.value.outlet),N=b&&D.value.component?b.children:v,G=xi(D);for(const J of Object.keys(G))this.deactivateRouteAndItsChildren(G[J],N);b&&(b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated()),b.attachRef=null,b.route=null)}activateChildRoutes(D,v,b){const N=xi(v);D.children.forEach(G=>{this.activateRoutes(G,N[G.value.outlet],b),this.forwardEvent(new Rs(G.value.snapshot))}),D.children.length&&this.forwardEvent(new ia(D.value.snapshot))}activateRoutes(D,v,b){const N=D.value,G=v?v.value:null;if(Br(N),N===G)if(N.component){const J=b.getOrCreateContext(N.outlet);this.activateChildRoutes(D,v,J.children)}else this.activateChildRoutes(D,v,b);else if(N.component){const J=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Ue=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),J.children.onOutletReAttached(Ue.contexts),J.attachRef=Ue.componentRef,J.route=Ue.route.value,J.outlet&&J.outlet.attach(Ue.componentRef,Ue.route.value),Br(Ue.route.value),this.activateChildRoutes(D,null,J.children)}else{const Ue=Nn(N.snapshot);J.attachRef=null,J.route=N,J.injector=Ue,J.outlet&&J.outlet.activateWith(N,J.injector),this.activateChildRoutes(D,null,J.children)}}else this.activateChildRoutes(D,null,b)}}class ys{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class oa{constructor(D,v){this.component=D,this.route=v}}function Ec(E,D,v){const b=E._root;return es(b,D?D._root:null,v,[b.value])}function en(E,D){const v=Symbol(),b=D.get(E,v);return b===v?"function"!=typeof E||(0,I.LfX)(E)?D.get(E):E:b}function es(E,D,v,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=xi(D);return E.children.forEach(J=>{(function Tc(E,D,v,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=E.value,J=D?D.value:null,Ue=v?v.getContext(E.value.outlet):null;if(J&&G.routeConfig===J.routeConfig){const Me=function xa(E,D,v){if("function"==typeof v)return v(E,D);switch(v){case"pathParamsChange":return!gr(E.url,D.url);case"pathParamsOrQueryParamsChange":return!gr(E.url,D.url)||!ir(E.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$t(E,D)||!ir(E.queryParams,D.queryParams);default:return!$t(E,D)}}(J,G,G.routeConfig.runGuardsAndResolvers);Me?N.canActivateChecks.push(new ys(b)):(G.data=J.data,G._resolvedData=J._resolvedData),es(E,D,G.component?Ue?Ue.children:null:v,b,N),Me&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&N.canDeactivateChecks.push(new oa(Ue.outlet.component,J))}else J&&qn(D,Ue,N),N.canActivateChecks.push(new ys(b)),es(E,null,G.component?Ue?Ue.children:null:v,b,N)})(J,G[J.value.outlet],v,b.concat([J.value]),N),delete G[J.value.outlet]}),Object.entries(G).forEach(([J,Ue])=>qn(Ue,v.getContext(J),N)),N}function qn(E,D,v){const b=xi(E),N=E.value;Object.entries(b).forEach(([G,J])=>{qn(J,N.component?D?D.children.getContext(G):null:D,v)}),v.canDeactivateChecks.push(new oa(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}function oo(E){return"function"==typeof E}function No(E){return E instanceof lt.G||"EmptyError"===E?.name}const Oa=Symbol("INITIAL_VALUE");function Ps(){return(0,Jn.n)(E=>vt(E.map(D=>D.pipe((0,xn.s)(1),(0,Mt.Z)(Oa)))).pipe((0,Xt.T)(D=>{for(const v of D)if(!0!==v){if(v===Oa)return Oa;if(!1===v||v instanceof Sn)return v}return!0}),(0,Rt.p)(D=>D!==Oa),(0,xn.s)(1)))}function xo(E){return(0,Oe.F)((0,Ae.M)(D=>{if(Er(D))throw oi(0,D)}),(0,Xt.T)(D=>!0===D))}class Is{constructor(D){this.segmentGroup=D||null}}class Hs{constructor(D){this.urlTree=D}}function ai(E){return me(new Is(E))}function Sr(E){return me(new Hs(E))}class ko{constructor(D,v){this.urlSerializer=D,this.urlTree=v}noMatchError(D){return new I.wOt(4002,!1)}lineralizeSegments(D,v){let b=[],N=v.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,le.of)(b);if(N.numberOfChildren>1||!N.children[Ft])return me(new I.wOt(4e3,!1));N=N.children[Ft]}}applyRedirectCommands(D,v,b){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),D,b)}applyRedirectCreateUrlTree(D,v,b,N){const G=this.createSegmentGroup(D,v.root,b,N);return new Sn(G,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(D,v){const b={};return Object.entries(D).forEach(([N,G])=>{if("string"==typeof G&&G.startsWith(":")){const Ue=G.substring(1);b[N]=v[Ue]}else b[N]=G}),b}createSegmentGroup(D,v,b,N){const G=this.createSegments(D,v.segments,b,N);let J={};return Object.entries(v.children).forEach(([Ue,Me])=>{J[Ue]=this.createSegmentGroup(D,Me,b,N)}),new ut(G,J)}createSegments(D,v,b,N){return v.map(G=>G.path.startsWith(":")?this.findPosParam(D,G,N):this.findOrReturn(G,b))}findPosParam(D,v,b){const N=b[v.path.substring(1)];if(!N)throw new I.wOt(4001,!1);return N}findOrReturn(D,v){let b=0;for(const N of v){if(N.path===D.path)return v.splice(b),N;b++}return D}}const uo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Es(E,D,v,b,N){const G=Ms(E,D,v);return G.matched?(b=function Na(E,D){return E.providers&&!E._injector&&(E._injector=(0,I.Ol2)(E.providers,D,`Route: ${E.path}`)),E._injector??D}(D,b),function Bi(E,D,v,b){const N=D.canMatch;if(!N||0===N.length)return(0,le.of)(!0);const G=N.map(J=>{const Ue=en(J,E);return Gt(function Cu(E){return E&&oo(E.canMatch)}(Ue)?Ue.canMatch(D,v):E.runInContext(()=>Ue(D,v)))});return(0,le.of)(G).pipe(Ps(),xo())}(b,D,v).pipe((0,Xt.T)(J=>!0===J?G:{...uo}))):(0,le.of)(G)}function Ms(E,D,v){if(""===D.path)return"full"===D.pathMatch&&(E.hasChildren()||v.length>0)?{...uo}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const N=(D.matcher||Xn)(v,E,D);if(!N)return{...uo};const G={};Object.entries(N.posParams??{}).forEach(([Ue,Me])=>{G[Ue]=Me.path});const J=N.consumed.length>0?{...G,...N.consumed[N.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:N.consumed,remainingSegments:v.slice(N.consumed.length),parameters:J,positionalParamSegments:N.posParams??{}}}function _i(E,D,v,b){return v.length>0&&function Vl(E,D,v){return v.some(b=>ji(E,D,b)&&ln(b)!==Ft)}(E,v,b)?{segmentGroup:new ut(D,Fa(b,new ut(v,E.children))),slicedSegments:[]}:0===v.length&&function Cc(E,D,v){return v.some(b=>ji(E,D,b))}(E,v,b)?{segmentGroup:new ut(E.segments,zs(E,0,v,b,E.children)),slicedSegments:v}:{segmentGroup:new ut(E.segments,E.children),slicedSegments:v}}function zs(E,D,v,b,N){const G={};for(const J of b)if(ji(E,v,J)&&!N[ln(J)]){const Ue=new ut([],{});G[ln(J)]=Ue}return{...N,...G}}function Fa(E,D){const v={};v[Ft]=D;for(const b of E)if(""===b.path&&ln(b)!==Ft){const N=new ut([],{});v[ln(b)]=N}return v}function ji(E,D,v){return(!(E.hasChildren()||D.length>0)||"full"!==v.pathMatch)&&""===v.path}class Ns{constructor(D,v,b,N,G,J,Ue){this.injector=D,this.configLoader=v,this.rootComponentType=b,this.config=N,this.urlTree=G,this.paramsInheritanceStrategy=J,this.urlSerializer=Ue,this.allowRedirects=!0,this.applyRedirects=new ko(this.urlSerializer,this.urlTree)}noMatchError(D){return new I.wOt(4002,!1)}recognize(){const D=_i(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,Ft).pipe(ze(v=>{if(v instanceof Hs)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof Is?this.noMatchError(v):v}),(0,Xt.T)(v=>{const b=new pr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ft,this.rootComponentType,null,{}),N=new lr(b,v),G=new Zi("",N),J=function hn(E,D,v=null,b=null){return Ne(hs(E),D,v,b)}(b,[],this.urlTree.queryParams,this.urlTree.fragment);return J.queryParams=this.urlTree.queryParams,G.url=this.urlSerializer.serialize(J),this.inheritParamsAndData(G._root),{state:G,tree:J}}))}match(D){return this.processSegmentGroup(this.injector,this.config,D.root,Ft).pipe(ze(b=>{throw b instanceof Is?this.noMatchError(b):b}))}inheritParamsAndData(D){const v=D.value,b=_n(v,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,v,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(D,v,b):this.processSegment(D,v,b,b.segments,N,!0)}processChildren(D,v,b){const N=[];for(const G of Object.keys(b.children))"primary"===G?N.unshift(G):N.push(G);return(0,K.H)(N).pipe(be(G=>{const J=b.children[G],Ue=function Mo(E,D){const v=E.filter(b=>ln(b)===D);return v.push(...E.filter(b=>ln(b)!==D)),v}(v,G);return this.processSegmentGroup(D,Ue,J,G)}),(0,Le.S)((G,J)=>(G.push(...J),G)),(0,st.U)(null),function zt(E,D){const v=arguments.length>=2;return b=>b.pipe(E?(0,Rt.p)((N,G)=>E(N,G,b)):Se.D,_t(1),v?(0,st.U)(D):(0,$n.v)(()=>new lt.G))}(),(0,ue.Z)(G=>{if(null===G)return ai(b);const J=Va(G);return function bc(E){E.sort((D,v)=>D.value.outlet===Ft?-1:v.value.outlet===Ft?1:D.value.outlet.localeCompare(v.value.outlet))}(J),(0,le.of)(J)}))}processSegment(D,v,b,N,G,J){return(0,K.H)(v).pipe(be(Ue=>this.processSegmentAgainstRoute(Ue._injector??D,v,Ue,b,N,G,J).pipe(ze(Me=>{if(Me instanceof Is)return(0,le.of)(null);throw Me}))),(0,pe.$)(Ue=>!!Ue),ze(Ue=>{if(No(Ue))return function Di(E,D,v){return 0===D.length&&!E.children[v]}(b,N,G)?(0,le.of)([]):ai(b);throw Ue}))}processSegmentAgainstRoute(D,v,b,N,G,J,Ue){return function Pu(E,D,v,b){return!!(ln(E)===b||b!==Ft&&ji(D,v,E))&&("**"===E.path||Ms(D,E,v).matched)}(b,N,G,J)?void 0===b.redirectTo?this.matchSegmentAgainstRoute(D,N,b,G,J,Ue):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,N,v,b,G,J):ai(N):ai(N)}expandSegmentAgainstRouteUsingRedirect(D,v,b,N,G,J){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,b,N,J):this.expandRegularSegmentAgainstRouteUsingRedirect(D,v,b,N,G,J)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,v,b,N){const G=this.applyRedirects.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Sr(G):this.applyRedirects.lineralizeSegments(b,G).pipe((0,ue.Z)(J=>{const Ue=new ut(J,{});return this.processSegment(D,v,Ue,J,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,v,b,N,G,J){const{matched:Ue,consumedSegments:Me,remainingSegments:Ct,positionalParamSegments:dn}=Ms(v,N,G);if(!Ue)return ai(v);const vn=this.applyRedirects.applyRedirectCommands(Me,N.redirectTo,dn);return N.redirectTo.startsWith("/")?Sr(vn):this.applyRedirects.lineralizeSegments(N,vn).pipe((0,ue.Z)(In=>this.processSegment(D,b,v,In.concat(Ct),J,!1)))}matchSegmentAgainstRoute(D,v,b,N,G,J){let Ue;if("**"===b.path){const Me=N.length>0?an(N).parameters:{},Ct=new pr(N,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ua(b),ln(b),b.component??b._loadedComponent??null,b,A(b));Ue=(0,le.of)({snapshot:Ct,consumedSegments:[],remainingSegments:[]}),v.children={}}else Ue=Es(v,b,N,D).pipe((0,Xt.T)(({matched:Me,consumedSegments:Ct,remainingSegments:dn,parameters:vn})=>Me?{snapshot:new pr(Ct,vn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ua(b),ln(b),b.component??b._loadedComponent??null,b,A(b)),consumedSegments:Ct,remainingSegments:dn}:null));return Ue.pipe((0,Jn.n)(Me=>null===Me?ai(v):this.getChildConfig(D=b._injector??D,b,N).pipe((0,Jn.n)(({routes:Ct})=>{const dn=b._loadedInjector??D,{snapshot:vn,consumedSegments:In,remainingSegments:Kn}=Me,{segmentGroup:za,slicedSegments:Ga}=_i(v,In,Kn,Ct);if(0===Ga.length&&za.hasChildren())return this.processChildren(dn,Ct,za).pipe((0,Xt.T)(bi=>null===bi?null:[new lr(vn,bi)]));if(0===Ct.length&&0===Ga.length)return(0,le.of)([new lr(vn,[])]);const Lc=ln(b)===G;return this.processSegment(dn,Ct,za,Ga,Lc?Ft:G,!0).pipe((0,Xt.T)(bi=>[new lr(vn,bi)]))}))))}getChildConfig(D,v,b){return v.children?(0,le.of)({routes:v.children,injector:D}):v.loadChildren?void 0!==v._loadedRoutes?(0,le.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function vs(E,D,v,b){const N=D.canLoad;if(void 0===N||0===N.length)return(0,le.of)(!0);const G=N.map(J=>{const Ue=en(J,E);return Gt(function Fl(E){return E&&oo(E.canLoad)}(Ue)?Ue.canLoad(D,v):E.runInContext(()=>Ue(D,v)))});return(0,le.of)(G).pipe(Ps(),xo())}(D,v,b).pipe((0,ue.Z)(N=>N?this.configLoader.loadChildren(D,v).pipe((0,Ae.M)(G=>{v._loadedRoutes=G.routes,v._loadedInjector=G.injector})):function Ru(E){return me(ti(!1,3))}())):(0,le.of)({routes:[],injector:D})}}function $i(E){const D=E.value.routeConfig;return D&&""===D.path}function Va(E){const D=[],v=new Set;for(const b of E){if(!$i(b)){D.push(b);continue}const N=D.find(G=>b.value.routeConfig===G.value.routeConfig);void 0!==N?(N.children.push(...b.children),v.add(N)):D.push(b)}for(const b of v){const N=Va(b.children);D.push(new lr(b.value,N))}return D.filter(b=>!v.has(b))}function Ua(E){return E.data||{}}function A(E){return E.resolve||{}}function Lt(E){return"string"==typeof E.title||null===E.title}function Qn(E){return(0,Jn.n)(D=>{const v=E(D);return v?(0,K.H)(v).pipe((0,Xt.T)(()=>D)):(0,le.of)(D)})}const Un=new I.nKC("ROUTES");let Bn=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,I.WQX)(I.Ql9)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,le.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const b=Gt(v.loadComponent()).pipe((0,Xt.T)(Wn),(0,Ae.M)(G=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=G}),kt(()=>{this.componentLoaders.delete(v)})),N=new He(b,()=>new Ht.B).pipe(St());return this.componentLoaders.set(v,N),N}loadChildren(v,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,le.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const G=function tn(E,D,v,b){return Gt(E.loadChildren()).pipe((0,Xt.T)(Wn),(0,ue.Z)(N=>N instanceof I.Co$||Array.isArray(N)?(0,le.of)(N):(0,K.H)(D.compileModuleAsync(N))),(0,Xt.T)(N=>{b&&b(E);let G,J,Ue=!1;return Array.isArray(N)?(J=N,!0):(G=N.create(v).injector,J=G.get(Un,[],{optional:!0,self:!0}).flat()),{routes:J.map(mr),injector:G}}))}(b,this.compiler,v,this.onLoadEndListener).pipe(kt(()=>{this.childrenLoaders.delete(b)})),J=new He(G,()=>new Ht.B).pipe(St());return this.childrenLoaders.set(b,J),J}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Wn(E){return function Yn(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let tr=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ht.B,this.transitionAbortSubject=new Ht.B,this.configLoader=(0,I.WQX)(Bn),this.environmentInjector=(0,I.WQX)(I.uvJ),this.urlSerializer=(0,I.WQX)(It),this.rootContexts=(0,I.WQX)(Mn),this.inputBindingEnabled=null!==(0,I.WQX)(cr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,le.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new Au(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new ra(N))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const b=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:b})}setupNavigations(v,b,N){return this.transitions=new Ie.t({id:0,currentUrlTree:b,currentRawUrl:b,currentBrowserUrl:b,extractedUrl:v.urlHandlingStrategy.extract(b),urlAfterRedirects:v.urlHandlingStrategy.extract(b),rawUrl:b,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ro,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Rt.p)(G=>0!==G.id),(0,Xt.T)(G=>({...G,extractedUrl:v.urlHandlingStrategy.extract(G.rawUrl)})),(0,Jn.n)(G=>{this.currentTransition=G;let J=!1,Ue=!1;return(0,le.of)(G).pipe((0,Ae.M)(Me=>{this.currentNavigation={id:Me.id,initialUrl:Me.rawUrl,extractedUrl:Me.extractedUrl,trigger:Me.source,extras:Me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Jn.n)(Me=>{const Ct=Me.currentBrowserUrl.toString(),dn=!v.navigated||Me.extractedUrl.toString()!==Ct||Ct!==Me.currentUrlTree.toString();if(!dn&&"reload"!==(Me.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const In="";return this.events.next(new Us(Me.id,this.urlSerializer.serialize(Me.rawUrl),In,0)),Me.resolve(null),ke.w}if(v.urlHandlingStrategy.shouldProcessUrl(Me.rawUrl))return(0,le.of)(Me).pipe((0,Jn.n)(In=>{const Kn=this.transitions?.getValue();return this.events.next(new ba(In.id,this.urlSerializer.serialize(In.extractedUrl),In.source,In.restoredState)),Kn!==this.transitions?.getValue()?ke.w:Promise.resolve(In)}),function V(E,D,v,b,N,G){return(0,ue.Z)(J=>function Mu(E,D,v,b,N,G,J="emptyOnly"){return new Ns(E,D,v,b,N,J,G).recognize()}(E,D,v,b,J.extractedUrl,N,G).pipe((0,Xt.T)(({state:Ue,tree:Me})=>({...J,targetSnapshot:Ue,urlAfterRedirects:Me}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Ae.M)(In=>{G.targetSnapshot=In.targetSnapshot,G.urlAfterRedirects=In.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:In.urlAfterRedirects};const Kn=new Sa(In.id,this.urlSerializer.serialize(In.extractedUrl),this.urlSerializer.serialize(In.urlAfterRedirects),In.targetSnapshot);this.events.next(Kn)}));if(dn&&v.urlHandlingStrategy.shouldProcessUrl(Me.currentRawUrl)){const{id:In,extractedUrl:Kn,source:za,restoredState:Ga,extras:Lc}=Me,bi=new ba(In,this.urlSerializer.serialize(Kn),za,Ga);this.events.next(bi);const Fo=yt(0,this.rootComponentType).snapshot;return this.currentTransition=G={...Me,targetSnapshot:Fo,urlAfterRedirects:Kn,extras:{...Lc,skipLocationChange:!1,replaceUrl:!1}},(0,le.of)(G)}{const In="";return this.events.next(new Us(Me.id,this.urlSerializer.serialize(Me.extractedUrl),In,1)),Me.resolve(null),ke.w}}),(0,Ae.M)(Me=>{const Ct=new Ti(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(Ct)}),(0,Xt.T)(Me=>(this.currentTransition=G={...Me,guards:Ec(Me.targetSnapshot,Me.currentSnapshot,this.rootContexts)},G)),function ka(E,D){return(0,ue.Z)(v=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:G,canDeactivateChecks:J}}=v;return 0===J.length&&0===G.length?(0,le.of)({...v,guardsResult:!0}):function Ui(E,D,v,b){return(0,K.H)(E).pipe((0,ue.Z)(N=>function Kr(E,D,v,b,N){const G=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,le.of)(!0);const J=G.map(Ue=>{const Me=Nn(D)??N,Ct=en(Ue,Me);return Gt(function Dc(E){return E&&oo(E.canDeactivate)}(Ct)?Ct.canDeactivate(E,D,v,b):Me.runInContext(()=>Ct(E,D,v,b))).pipe((0,pe.$)())});return(0,le.of)(J).pipe(Ps())}(N.component,N.route,v,D,b)),(0,pe.$)(N=>!0!==N,!0))}(J,b,N,E).pipe((0,ue.Z)(Ue=>Ue&&function wc(E){return"boolean"==typeof E}(Ue)?function $r(E,D,v,b){return(0,K.H)(D).pipe(be(N=>(0,mt.x)(function La(E,D){return null!==E&&D&&D(new Ma(E)),(0,le.of)(!0)}(N.route.parent,b),function ts(E,D){return null!==E&&D&&D(new Dr(E)),(0,le.of)(!0)}(N.route,b),function ao(E,D,v){const b=D[D.length-1],G=D.slice(0,D.length-1).reverse().map(J=>function wn(E){const D=E.routeConfig?E.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:E,guards:D}:null}(J)).filter(J=>null!==J).map(J=>he(()=>{const Ue=J.guards.map(Me=>{const Ct=Nn(J.node)??v,dn=en(Me,Ct);return Gt(function Ac(E){return E&&oo(E.canActivateChild)}(dn)?dn.canActivateChild(b,E):Ct.runInContext(()=>dn(b,E))).pipe((0,pe.$)())});return(0,le.of)(Ue).pipe(Ps())}));return(0,le.of)(G).pipe(Ps())}(E,N.path,v),function Tr(E,D,v){const b=D.routeConfig?D.routeConfig.canActivate:null;if(!b||0===b.length)return(0,le.of)(!0);const N=b.map(G=>he(()=>{const J=Nn(D)??v,Ue=en(G,J);return Gt(function Du(E){return E&&oo(E.canActivate)}(Ue)?Ue.canActivate(D,E):J.runInContext(()=>Ue(D,E))).pipe((0,pe.$)())}));return(0,le.of)(N).pipe(Ps())}(E,N.route,v))),(0,pe.$)(N=>!0!==N,!0))}(b,G,E,D):(0,le.of)(Ue)),(0,Xt.T)(Ue=>({...v,guardsResult:Ue})))})}(this.environmentInjector,Me=>this.events.next(Me)),(0,Ae.M)(Me=>{if(G.guardsResult=Me.guardsResult,Er(Me.guardsResult))throw oi(0,Me.guardsResult);const Ct=new Ra(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot,!!Me.guardsResult);this.events.next(Ct)}),(0,Rt.p)(Me=>!!Me.guardsResult||(this.cancelNavigationTransition(Me,"",3),!1)),Qn(Me=>{if(Me.guards.canActivateChecks.length)return(0,le.of)(Me).pipe((0,Ae.M)(Ct=>{const dn=new Pa(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(dn)}),(0,Jn.n)(Ct=>{let dn=!1;return(0,le.of)(Ct).pipe(function P(E,D){return(0,ue.Z)(v=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=v;if(!N.length)return(0,le.of)(v);let G=0;return(0,K.H)(N).pipe(be(J=>function F(E,D,v,b){const N=E.routeConfig,G=E._resolve;return void 0!==N?.title&&!Lt(N)&&(G[Je]=N.title),function Z(E,D,v,b){const N=function Fe(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===N.length)return(0,le.of)({});const G={};return(0,K.H)(N).pipe((0,ue.Z)(J=>function nt(E,D,v,b){const N=Nn(D)??b,G=en(E,N);return Gt(G.resolve?G.resolve(D,v):N.runInContext(()=>G(D,v)))}(E[J],D,v,b).pipe((0,pe.$)(),(0,Ae.M)(Ue=>{G[J]=Ue}))),_t(1),function $e(E){return(0,Xt.T)(()=>E)}(G),ze(J=>No(J)?ke.w:me(J)))}(G,E,D,b).pipe((0,Xt.T)(J=>(E._resolvedData=J,E.data=_n(E,v).resolve,N&&Lt(N)&&(E.data[Je]=N.title),null)))}(J.route,b,E,D)),(0,Ae.M)(()=>G++),_t(1),(0,ue.Z)(J=>G===N.length?(0,le.of)(v):ke.w))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Ae.M)({next:()=>dn=!0,complete:()=>{dn||this.cancelNavigationTransition(Ct,"",2)}}))}),(0,Ae.M)(Ct=>{const dn=new wu(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(dn)}))}),Qn(Me=>{const Ct=dn=>{const vn=[];dn.routeConfig?.loadComponent&&!dn.routeConfig._loadedComponent&&vn.push(this.configLoader.loadComponent(dn.routeConfig).pipe((0,Ae.M)(In=>{dn.component=In}),(0,Xt.T)(()=>{})));for(const In of dn.children)vn.push(...Ct(In));return vn};return vt(Ct(Me.targetSnapshot.root)).pipe((0,st.U)(),(0,xn.s)(1))}),Qn(()=>this.afterPreactivation()),(0,Xt.T)(Me=>{const Ct=function ki(E,D,v){const b=br(E,D._root,v?v._root:void 0);return new ur(b,D)}(v.routeReuseStrategy,Me.targetSnapshot,Me.currentRouterState);return this.currentTransition=G={...Me,targetRouterState:Ct},G}),(0,Ae.M)(()=>{this.events.next(new gn)}),((E,D,v,b)=>(0,Xt.T)(N=>(new sa(D,N.targetRouterState,N.currentRouterState,v,b).activate(E),N)))(this.rootContexts,v.routeReuseStrategy,Me=>this.events.next(Me),this.inputBindingEnabled),(0,xn.s)(1),(0,Ae.M)({next:Me=>{J=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ji(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects))),v.titleStrategy?.updateTitle(Me.targetRouterState.snapshot),Me.resolve(!0)},complete:()=>{J=!0}}),function rn(E){return(0,pt.N)((D,v)=>{(0,ye.Tg)(E).subscribe((0,et._)(v,()=>v.complete(),Hn.l)),!v.closed&&D.subscribe(v)})}(this.transitionAbortSubject.pipe((0,Ae.M)(Me=>{throw Me}))),kt(()=>{J||Ue||this.cancelNavigationTransition(G,"",1),this.currentNavigation?.id===G.id&&(this.currentNavigation=null)}),ze(Me=>{if(Ue=!0,ms(Me))this.events.next(new So(G.id,this.urlSerializer.serialize(G.extractedUrl),Me.message,Me.cancellationCode)),function Fi(E){return ms(E)&&Er(E.url)}(Me)?this.events.next(new Cr(Me.url)):G.resolve(!1);else{this.events.next(new Ss(G.id,this.urlSerializer.serialize(G.extractedUrl),Me,G.targetSnapshot??void 0));try{G.resolve(v.errorHandler(Me))}catch(Ct){G.reject(Ct)}}return ke.w}))}))}cancelNavigationTransition(v,b,N){const G=new So(v.id,this.urlSerializer.serialize(v.extractedUrl),b,N);this.events.next(G),v.resolve(!1)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function qr(E){return E!==ro}let Hr=(()=>{class E{buildTitle(v){let b,N=v.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find(G=>G.outlet===Ft);return b}getResolvedTitleForRoute(v){return v.data[Je]}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Gs)},providedIn:"root"})}}return E})(),Gs=(()=>{class E extends Hr{constructor(v){super(),this.title=v}updateTitle(v){const b=this.buildTitle(v);void 0!==b&&this.title.setTitle(b)}static{this.\u0275fac=function(b){return new(b||E)(I.KVO(gt.hE))}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})(),ui=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Qr)},providedIn:"root"})}}return E})();class Hi{shouldDetach(D){return!1}store(D,v){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,v){return D.routeConfig===v.routeConfig}}let Qr=(()=>{class E extends Hi{static{this.\u0275fac=function(){let v;return function(N){return(v||(v=I.xGo(E)))(N||E)}}()}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const ns=new I.nKC("",{providedIn:"root",factory:()=>({})});let _r=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(sr)},providedIn:"root"})}}return E})(),sr=(()=>{class E{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,b){return v}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();var Ws=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Ws||{});function lo(E,D){E.events.pipe((0,Rt.p)(v=>v instanceof Ji||v instanceof So||v instanceof Ss||v instanceof Us),(0,Xt.T)(v=>v instanceof Ji||v instanceof Us?Ws.COMPLETE:v instanceof So&&(0===v.code||1===v.code)?Ws.REDIRECTING:Ws.FAILED),(0,Rt.p)(v=>v!==Ws.REDIRECTING),(0,xn.s)(1)).subscribe(()=>{D()})}function Ci(E){throw E}function Ba(E,D,v){return D.parse("/")}const nh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nr=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.WQX)(I.H3F),this.isNgZoneEnabled=!1,this._events=new Ht.B,this.options=(0,I.WQX)(ns,{optional:!0})||{},this.pendingTasks=(0,I.WQX)(I.$K3),this.errorHandler=this.options.errorHandler||Ci,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ba,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.WQX)(_r),this.routeReuseStrategy=(0,I.WQX)(ui),this.titleStrategy=(0,I.WQX)(Hr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,I.WQX)(Un,{optional:!0})?.flat()??[],this.navigationTransitions=(0,I.WQX)(tr),this.urlSerializer=(0,I.WQX)(It),this.location=(0,I.WQX)(on.aZ),this.componentInputBindingEnabled=!!(0,I.WQX)(cr,{optional:!0}),this.eventsSubscription=new Xe.yU,this.isNgZoneEnabled=(0,I.WQX)(I.SKi)instanceof I.SKi&&I.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=yt(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(b=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(Ul(b)&&this._events.next(b));if(b instanceof ba)qr(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(b instanceof Us)this.rawUrlTree=N.rawUrl;else if(b instanceof Sa){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(G,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(b instanceof gn)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(b instanceof So)0!==b.code&&1!==b.code&&(this.navigated=!0),(3===b.code||2===b.code)&&this.restoreHistory(N);else if(b instanceof Cr){const G=this.urlHandlingStrategy.merge(b.url,N.currentRawUrl),J={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qr(N.source)};this.scheduleNavigation(G,ro,null,J,{resolve:N.resolve,reject:N.reject,promise:N.promise})}b instanceof Ss&&this.restoreHistory(N,!0),b instanceof Ji&&(this.navigated=!0),Ul(b)&&this._events.next(b)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ro,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const b="popstate"===v.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,b,v.state)},0)}))}navigateToSyncWithBrowser(v,b,N){const G={replaceUrl:!0},J=N?.navigationId?N:null;if(N){const Me={...N};delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&(G.state=Me)}const Ue=this.parseUrl(v);this.scheduleNavigation(Ue,b,J,G)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(mr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,b={}){const{relativeTo:N,queryParams:G,fragment:J,queryParamsHandling:Ue,preserveFragment:Me}=b,Ct=Me?this.currentUrlTree.fragment:J;let vn,dn=null;switch(Ue){case"merge":dn={...this.currentUrlTree.queryParams,...G};break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=G||null}null!==dn&&(dn=this.removeEmptyProps(dn));try{vn=hs(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),vn=this.currentUrlTree.root}return Ne(vn,v,dn,Ct??null)}navigateByUrl(v,b={skipLocationChange:!1}){const N=Er(v)?v:this.parseUrl(v),G=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(G,ro,null,b)}navigate(v,b={skipLocationChange:!1}){return function ho(E){for(let D=0;D<E.length;D++)if(null==E[D])throw new I.wOt(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,b),b)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let b;try{b=this.urlSerializer.parse(v)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,v)}return b}isActive(v,b){let N;if(N=!0===b?{...nh}:!1===b?{...aa}:b,Er(v))return vr(this.currentUrlTree,v,N);const G=this.parseUrl(v);return vr(this.currentUrlTree,G,N)}removeEmptyProps(v){return Object.keys(v).reduce((b,N)=>{const G=v[N];return null!=G&&(b[N]=G),b},{})}scheduleNavigation(v,b,N,G,J){if(this.disposed)return Promise.resolve(!1);let Ue,Me,Ct;J?(Ue=J.resolve,Me=J.reject,Ct=J.promise):Ct=new Promise((vn,In)=>{Ue=vn,Me=In});const dn=this.pendingTasks.add();return lo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(dn))}),this.navigationTransitions.handleNavigationRequest({source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:G,resolve:Ue,reject:Me,promise:Ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ct.catch(vn=>Promise.reject(vn))}setBrowserUrl(v,b){const N=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl){const J={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId)};this.location.replaceState(N,"",J)}else{const G={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId+1)};this.location.go(N,"",G)}}restoreHistory(v,b=!1){if("computed"===this.canceledNavigationResolution){const G=this.currentPageId-this.browserPageId;0!==G?this.location.historyGo(G):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===G&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,b){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:b}:{navigationId:v}}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Ul(E){return!(E instanceof gn||E instanceof Cr)}let Nu=(()=>{class E{constructor(v,b,N,G,J,Ue){this.router=v,this.route=b,this.tabIndexAttribute=N,this.renderer=G,this.el=J,this.locationStrategy=Ue,this.href=null,this.commands=null,this.onChanges=new Ht.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Me=J.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Me||"area"===Me,this.isAnchorElement?this.subscription=v.events.subscribe(Ct=>{Ct instanceof Ji&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",v)}ngOnChanges(v){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(v,b,N,G,J){return!!(null===this.urlTree||this.isAnchorElement&&(0!==v||b||N||G||J||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const v=null===this.href?null:(0,I.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",v)}applyAttributeValue(v,b){const N=this.renderer,G=this.el.nativeElement;null!==b?N.setAttribute(G,v,b):N.removeAttribute(G,v)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(b){return new(b||E)(I.rXU(nr),I.rXU(mn),I.kS0("tabindex"),I.rXU(I.sFG),I.rXU(I.aKT),I.rXU(on.hb))}}static{this.\u0275dir=I.FsC({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,N){1&b&&I.bIt("click",function(J){return N.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&b&&I.BMQ("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",I.L39],skipLocationChange:["skipLocationChange","skipLocationChange",I.L39],replaceUrl:["replaceUrl","replaceUrl",I.L39],routerLink:"routerLink"},standalone:!0,features:[I.GFd,I.OA$]})}}return E})();class ua{}let xu=(()=>{class E{constructor(v,b,N,G,J){this.router=v,this.injector=N,this.preloadingStrategy=G,this.loader=J}setUpPreloading(){this.subscription=this.router.events.pipe((0,Rt.p)(v=>v instanceof Ji),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,b){const N=[];for(const G of b){G.providers&&!G._injector&&(G._injector=(0,I.Ol2)(G.providers,v,`Route: ${G.path}`));const J=G._injector??v,Ue=G._loadedInjector??J;(G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent)&&N.push(this.preloadConfig(J,G)),(G.children||G._loadedRoutes)&&N.push(this.processRoutes(Ue,G.children??G._loadedRoutes))}return(0,K.H)(N).pipe((0,dt.U)())}preloadConfig(v,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(v,b):(0,le.of)(null);const G=N.pipe((0,ue.Z)(J=>null===J?(0,le.of)(void 0):(b._loadedRoutes=J.routes,b._loadedInjector=J.injector,this.processRoutes(J.injector??v,J.routes))));if(b.loadComponent&&!b._loadedComponent){const J=this.loader.loadComponent(b);return(0,K.H)([G,J]).pipe((0,dt.U)())}return G})}static{this.\u0275fac=function(b){return new(b||E)(I.KVO(nr),I.KVO(I.Ql9),I.KVO(I.uvJ),I.KVO(ua),I.KVO(Bn))}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const Pc=new I.nKC("");let Yt=(()=>{class E{constructor(v,b,N,G,J={}){this.urlSerializer=v,this.transitions=b,this.viewportScroller=N,this.zone=G,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof ba?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Ji?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof Us&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Mi&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,b){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mi(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(b){I.QTQ()}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac})}}return E})();function rs(E,D){return{\u0275kind:E,\u0275providers:D}}function Nc(){const E=(0,I.WQX)(I.zZn);return D=>{const v=E.get(I.o8S);if(D!==v.components[0])return;const b=E.get(nr),N=E.get(jl);1===E.get(fo)&&b.initialNavigation(),E.get(Rn,null,I.$GK.Optional)?.setUpPreloading(),E.get(Pc,null,I.$GK.Optional)?.init(),b.resetRootComponentType(v.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const jl=new I.nKC("",{factory:()=>new Ht.B}),fo=new I.nKC("",{providedIn:"root",factory:()=>1}),Rn=new I.nKC("");function Lo(E){return rs(0,[{provide:Rn,useExisting:xu},{provide:ua,useExisting:E}])}const la=new I.nKC("ROUTER_FORROOT_GUARD"),xc=[on.aZ,{provide:It,useClass:Vr},nr,Mn,{provide:mn,useFactory:function kn(E){return E.routerState.root},deps:[nr]},Bn,[]];function ih(){return new I.NEm("Router",nr)}let sh=(()=>{class E{constructor(v){}static forRoot(v,b){return{ngModule:E,providers:[xc,[],{provide:Un,multi:!0,useValue:v},{provide:la,useFactory:da,deps:[[nr,new I.Xx1,new I.kdw]]},{provide:ns,useValue:b||{}},b?.useHash?{provide:on.hb,useClass:on.fw}:{provide:on.hb,useClass:on.Sm},{provide:Pc,useFactory:()=>{const E=(0,I.WQX)(on.Xr),D=(0,I.WQX)(I.SKi),v=(0,I.WQX)(ns),b=(0,I.WQX)(tr),N=(0,I.WQX)(It);return v.scrollOffset&&E.setOffset(v.scrollOffset),new Yt(N,b,E,D,v)}},b?.preloadingStrategy?Lo(b.preloadingStrategy).\u0275providers:[],{provide:I.NEm,multi:!0,useFactory:ih},b?.initialNavigation?rr(b):[],b?.bindToComponentInputs?rs(8,[er,{provide:cr,useExisting:er}]).\u0275providers:[],[{provide:ss,useFactory:Nc},{provide:I.iLQ,multi:!0,useExisting:ss}]]}}static forChild(v){return{ngModule:E,providers:[{provide:Un,multi:!0,useValue:v}]}}static{this.\u0275fac=function(b){return new(b||E)(I.KVO(la,8))}}static{this.\u0275mod=I.$C({type:E})}static{this.\u0275inj=I.G2t({})}}return E})();function da(E){return"guarded"}function rr(E){return["disabled"===E.initialNavigation?rs(3,[{provide:I.hnV,multi:!0,useFactory:()=>{const D=(0,I.WQX)(nr);return()=>{D.setUpLocationChangeListener()}}},{provide:fo,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?rs(2,[{provide:fo,useValue:0},{provide:I.hnV,multi:!0,deps:[I.zZn],useFactory:D=>{const v=D.get(on.hj,Promise.resolve());return()=>v.then(()=>new Promise(b=>{const N=D.get(nr),G=D.get(jl);lo(N,()=>{b(!0)}),D.get(tr).afterPreactivation=()=>(b(!0),G.closed?(0,le.of)(void 0):G),N.initialNavigation()}))}}]).\u0275providers:[]]}const ss=new I.nKC("")},3345:(Pt,Be,U)=>{U.d(Be,{A:()=>vt});var I=U(1076),ee=U(1362),ne=U(7852),Q=U(8041);class K{constructor(Tt,lt){this._delegate=Tt,this.firebase=lt,(0,ne._addComponent)(Tt,new ee.uA("app-compat",()=>this,"PUBLIC")),this.container=Tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Tt){this._delegate.automaticDataCollectionEnabled=Tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Tt=>{this._delegate.checkDestroyed(),Tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ne.deleteApp)(this._delegate)))}_getService(Tt,lt=ne._DEFAULT_ENTRY_NAME){var mt;this._delegate.checkDestroyed();const ye=this._delegate.container.getProvider(Tt);return!ye.isInitialized()&&"EXPLICIT"===(null===(mt=ye.getComponent())||void 0===mt?void 0:mt.instantiationMode)&&ye.initialize(),ye.getImmediate({identifier:lt})}_removeServiceInstance(Tt,lt=ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Tt).clearInstance(lt)}_addComponent(Tt){(0,ne._addComponent)(this._delegate,Tt)}_addOrOverwriteComponent(Tt){(0,ne._addOrOverwriteComponent)(this._delegate,Tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new I.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Se(){const it=function je(it){const Tt={},lt={__esModule:!0,initializeApp:function he(Xe,pt={}){const St=ne.initializeApp(Xe,pt);if((0,I.gR)(Tt,St.name))return Tt[St.name];const He=new it(St,lt);return Tt[St.name]=He,He},app:ye,registerVersion:ne.registerVersion,setLogLevel:ne.setLogLevel,onLog:ne.onLog,apps:null,SDK_VERSION:ne.SDK_VERSION,INTERNAL:{registerComponent:function me(Xe){const pt=Xe.name,St=pt.replace("-compat","");if(ne._registerComponent(Xe)&&"PUBLIC"===Xe.type){const He=(Ht=ye())=>{if("function"!=typeof Ht[St])throw Ie.create("invalid-app-argument",{appName:pt});return Ht[St]()};void 0!==Xe.serviceProps&&(0,I.zw)(He,Xe.serviceProps),lt[St]=He,it.prototype[St]=function(...Ht){return this._getService.bind(this,pt).apply(this,Xe.multipleInstances?Ht:[])}}return"PUBLIC"===Xe.type?lt[St]:null},removeApp:function mt(Xe){delete Tt[Xe]},useAsService:function ke(Xe,pt){return"serverAuth"===pt?null:pt},modularAPIs:ne}};function ye(Xe){if(!(0,I.gR)(Tt,Xe=Xe||ne._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Xe});return Tt[Xe]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function Oe(){return Object.keys(Tt).map(Xe=>Tt[Xe])}}),ye.App=it,lt}(K);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function Tt(lt){(0,I.zw)(it,lt)},createSubscribe:I.tD,ErrorFactory:I.FA,deepExtend:I.zw}),it}(),te=new Q.Vy("@firebase/app-compat");try{const it=(0,I.mS)();if(void 0!==it.firebase){te.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Tt=it.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&te.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const vt=X;!function Qe(it){(0,ne.registerVersion)("@firebase/app-compat","0.2.42",it)}()},7852:(Pt,Be,U)=>{U.r(Be),U.d(Be,{FirebaseError:()=>Q.g,SDK_VERSION:()=>Vr,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>Fr,_addOrOverwriteComponent:()=>to,_apps:()=>Pr,_clearComponents:()=>Jr,_components:()=>bn,_getProvider:()=>Gr,_isFirebaseApp:()=>Sn,_isFirebaseServerApp:()=>ut,_registerComponent:()=>ot,_removeServiceInstance:()=>un,_serverApps:()=>vr,deleteApp:()=>Xi,getApp:()=>Ii,getApps:()=>Wr,initializeApp:()=>Yi,initializeServerApp:()=>Ir,onLog:()=>k,registerVersion:()=>z,setLogLevel:()=>j});var I=U(467),ee=U(1362),ne=U(8041),Q=U(1076);const K=(Ne,Ee)=>Ee.some(Ye=>Ne instanceof Ye);let le,Ie;const X=new WeakMap,te=new WeakMap,_e=new WeakMap,et=new WeakMap,Qe=new WeakMap;let Tt={get(Ne,Ee,Ye){if(Ne instanceof IDBTransaction){if("done"===Ee)return te.get(Ne);if("objectStoreNames"===Ee)return Ne.objectStoreNames||_e.get(Ne);if("store"===Ee)return Ye.objectStoreNames[1]?void 0:Ye.objectStore(Ye.objectStoreNames[0])}return he(Ne[Ee])},set:(Ne,Ee,Ye)=>(Ne[Ee]=Ye,!0),has:(Ne,Ee)=>Ne instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in Ne};function ye(Ne){return"function"==typeof Ne?function mt(Ne){return Ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ne)?function(...Ee){return Ne.apply(Oe(this),Ee),he(X.get(this))}:function(...Ee){return he(Ne.apply(Oe(this),Ee))}:function(Ee,...Ye){const At=Ne.call(Oe(this),Ee,...Ye);return _e.set(At,Ee.sort?Ee.sort():[Ee]),he(At)}}(Ne):(Ne instanceof IDBTransaction&&function it(Ne){if(te.has(Ne))return;const Ee=new Promise((Ye,At)=>{const xt=()=>{Ne.removeEventListener("complete",Qt),Ne.removeEventListener("error",sn),Ne.removeEventListener("abort",sn)},Qt=()=>{Ye(),xt()},sn=()=>{At(Ne.error||new DOMException("AbortError","AbortError")),xt()};Ne.addEventListener("complete",Qt),Ne.addEventListener("error",sn),Ne.addEventListener("abort",sn)});te.set(Ne,Ee)}(Ne),K(Ne,function je(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ne,Tt):Ne)}function he(Ne){if(Ne instanceof IDBRequest)return function vt(Ne){const Ee=new Promise((Ye,At)=>{const xt=()=>{Ne.removeEventListener("success",Qt),Ne.removeEventListener("error",sn)},Qt=()=>{Ye(he(Ne.result)),xt()},sn=()=>{At(Ne.error),xt()};Ne.addEventListener("success",Qt),Ne.addEventListener("error",sn)});return Ee.then(Ye=>{Ye instanceof IDBCursor&&X.set(Ye,Ne)}).catch(()=>{}),Qe.set(Ee,Ne),Ee}(Ne);if(et.has(Ne))return et.get(Ne);const Ee=ye(Ne);return Ee!==Ne&&(et.set(Ne,Ee),Qe.set(Ee,Ne)),Ee}const Oe=Ne=>Qe.get(Ne),Xe=["get","getKey","getAll","getAllKeys","count"],pt=["put","add","delete","clear"],St=new Map;function He(Ne,Ee){if(!(Ne instanceof IDBDatabase)||Ee in Ne||"string"!=typeof Ee)return;if(St.get(Ee))return St.get(Ee);const Ye=Ee.replace(/FromIndex$/,""),At=Ee!==Ye,xt=pt.includes(Ye);if(!(Ye in(At?IDBIndex:IDBObjectStore).prototype)||!xt&&!Xe.includes(Ye))return;const Qt=function(){var sn=(0,I.A)(function*(Tn,...Zn){const Ur=this.transaction(Tn,xt?"readwrite":"readonly");let Cn=Ur.store;return At&&(Cn=Cn.index(Zn.shift())),(yield Promise.all([Cn[Ye](...Zn),xt&&Ur.done]))[0]});return function(Zn){return sn.apply(this,arguments)}}();return St.set(Ee,Qt),Qt}!function lt(Ne){Tt=Ne(Tt)}(Ne=>({...Ne,get:(Ee,Ye,At)=>He(Ee,Ye)||Ne.get(Ee,Ye,At),has:(Ee,Ye)=>!!He(Ee,Ye)||Ne.has(Ee,Ye)}));class Ht{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function on(Ne){const Ee=Ne.getComponent();return"VERSION"===Ee?.type}(Ye)){const At=Ye.getImmediate();return`${At.library}/${At.version}`}return null}).filter(Ye=>Ye).join(" ")}}const Xt="@firebase/app",Jn="0.10.12",xn=new ne.Vy("@firebase/app"),Gt="[DEFAULT]",fr={[Xt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Pr=new Map,vr=new Map,bn=new Map;function Fr(Ne,Ee){try{Ne.container.addComponent(Ee)}catch(Ye){xn.debug(`Component ${Ee.name} failed to register with FirebaseApp ${Ne.name}`,Ye)}}function to(Ne,Ee){Ne.container.addOrOverwriteComponent(Ee)}function ot(Ne){const Ee=Ne.name;if(bn.has(Ee))return xn.debug(`There were multiple attempts to register component ${Ee}.`),!1;bn.set(Ee,Ne);for(const Ye of Pr.values())Fr(Ye,Ne);for(const Ye of vr.values())Fr(Ye,Ne);return!0}function Gr(Ne,Ee){const Ye=Ne.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),Ne.container.getProvider(Ee)}function un(Ne,Ee,Ye=Gt){Gr(Ne,Ee).clearInstance(Ye)}function Sn(Ne){return void 0!==Ne.options}function ut(Ne){return void 0!==Ne.settings}function Jr(){bn.clear()}const gr=new Q.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class On{constructor(Ee,Ye,At){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new ee.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}class It extends On{constructor(Ee,Ye,At,xt){const Qt=void 0!==Ye.automaticDataCollectionEnabled&&Ye.automaticDataCollectionEnabled,sn={name:At,automaticDataCollectionEnabled:Qt};super(void 0!==Ee.apiKey?Ee:Ee.options,sn,xt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Qt},Ye),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Ye.releaseOnDeref=void 0,z(Xt,Jn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ee){this.isDeleted||(this._refCount++,void 0!==Ee&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ee,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Xi(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw gr.create("server-app-deleted")}}const Vr="10.14.0";function Yi(Ne,Ee={}){let Ye=Ne;"object"!=typeof Ee&&(Ee={name:Ee});const At=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},Ee),xt=At.name;if("string"!=typeof xt||!xt)throw gr.create("bad-app-name",{appName:String(xt)});if(Ye||(Ye=(0,Q.T9)()),!Ye)throw gr.create("no-options");const Qt=Pr.get(xt);if(Qt){if((0,Q.bD)(Ye,Qt.options)&&(0,Q.bD)(At,Qt.config))return Qt;throw gr.create("duplicate-app",{appName:xt})}const sn=new ee.h1(xt);for(const Zn of bn.values())sn.addComponent(Zn);const Tn=new On(Ye,At,sn);return Pr.set(xt,Tn),Tn}function Ir(Ne,Ee){if((0,Q.Bd)()&&!(0,Q.p7)())throw gr.create("invalid-server-app-environment");let Ye;void 0===Ee.automaticDataCollectionEnabled&&(Ee.automaticDataCollectionEnabled=!1),Ye=Sn(Ne)?Ne.options:Ne;const At=Object.assign(Object.assign({},Ee),Ye);if(void 0!==At.releaseOnDeref&&delete At.releaseOnDeref,void 0!==Ee.releaseOnDeref&&typeof FinalizationRegistry>"u")throw gr.create("finalization-registry-not-supported",{});const Qt=""+(Ur=JSON.stringify(At),[...Ur].reduce((Cn,Vs)=>Math.imul(31,Cn)+Vs.charCodeAt(0)|0,0)),sn=vr.get(Qt);var Ur;if(sn)return sn.incRefCount(Ee.releaseOnDeref),sn;const Tn=new ee.h1(Qt);for(const Ur of bn.values())Tn.addComponent(Ur);const Zn=new It(Ye,Ee,Qt,Tn);return vr.set(Qt,Zn),Zn}function Ii(Ne=Gt){const Ee=Pr.get(Ne);if(!Ee&&Ne===Gt&&(0,Q.T9)())return Yi();if(!Ee)throw gr.create("no-app",{appName:Ne});return Ee}function Wr(){return Array.from(Pr.values())}function Xi(Ne){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,I.A)(function*(Ne){let Ee=!1;const Ye=Ne.name;Pr.has(Ye)?(Ee=!0,Pr.delete(Ye)):vr.has(Ye)&&Ne.decRefCount()<=0&&(vr.delete(Ye),Ee=!0),Ee&&(yield Promise.all(Ne.container.getProviders().map(At=>At.delete())),Ne.isDeleted=!0)})).apply(this,arguments)}function z(Ne,Ee,Ye){var At;let xt=null!==(At=fr[Ne])&&void 0!==At?At:Ne;Ye&&(xt+=`-${Ye}`);const Qt=xt.match(/\s|\//),sn=Ee.match(/\s|\//);if(Qt||sn){const Tn=[`Unable to register library "${xt}" with version "${Ee}":`];return Qt&&Tn.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Qt&&sn&&Tn.push("and"),sn&&Tn.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void xn.warn(Tn.join(" "))}ot(new ee.uA(`${xt}-version`,()=>({library:xt,version:Ee}),"VERSION"))}function k(Ne,Ee){if(null!==Ne&&"function"!=typeof Ne)throw gr.create("invalid-log-argument");(0,ne.Ey)(Ne,Ee)}function j(Ne){(0,ne.He)(Ne)}const re="firebase-heartbeat-database",ae=1,tt="firebase-heartbeat-store";let ct=null;function jt(){return ct||(ct=function me(Ne,Ee,{blocked:Ye,upgrade:At,blocking:xt,terminated:Qt}={}){const sn=indexedDB.open(Ne,Ee),Tn=he(sn);return At&&sn.addEventListener("upgradeneeded",Zn=>{At(he(sn.result),Zn.oldVersion,Zn.newVersion,he(sn.transaction),Zn)}),Ye&&sn.addEventListener("blocked",Zn=>Ye(Zn.oldVersion,Zn.newVersion,Zn)),Tn.then(Zn=>{Qt&&Zn.addEventListener("close",()=>Qt()),xt&&Zn.addEventListener("versionchange",Ur=>xt(Ur.oldVersion,Ur.newVersion,Ur))}).catch(()=>{}),Tn}(re,ae,{upgrade:(Ne,Ee)=>{if(0===Ee)try{Ne.createObjectStore(tt)}catch(Ye){console.warn(Ye)}}}).catch(Ne=>{throw gr.create("idb-open",{originalErrorMessage:Ne.message})})),ct}function pn(){return(pn=(0,I.A)(function*(Ne){try{const Ye=(yield jt()).transaction(tt),At=yield Ye.objectStore(tt).get(Zr(Ne));return yield Ye.done,At}catch(Ee){if(Ee instanceof Q.g)xn.warn(Ee.message);else{const Ye=gr.create("idb-get",{originalErrorMessage:Ee?.message});xn.warn(Ye.message)}}})).apply(this,arguments)}function Dn(Ne,Ee){return cn.apply(this,arguments)}function cn(){return(cn=(0,I.A)(function*(Ne,Ee){try{const At=(yield jt()).transaction(tt,"readwrite");yield At.objectStore(tt).put(Ee,Zr(Ne)),yield At.done}catch(Ye){if(Ye instanceof Q.g)xn.warn(Ye.message);else{const At=gr.create("idb-set",{originalErrorMessage:Ye?.message});xn.warn(At.message)}}})).apply(this,arguments)}function Zr(Ne){return`${Ne.name}!${Ne.options.appId}`}class ei{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new Er(Ye),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Ee=this;return(0,I.A)(function*(){var Ye,At;try{const Qt=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=Or();return null==(null===(Ye=Ee._heartbeatsCache)||void 0===Ye?void 0:Ye.heartbeats)&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise,null==(null===(At=Ee._heartbeatsCache)||void 0===At?void 0:At.heartbeats))||Ee._heartbeatsCache.lastSentHeartbeatDate===sn||Ee._heartbeatsCache.heartbeats.some(Tn=>Tn.date===sn)?void 0:(Ee._heartbeatsCache.heartbeats.push({date:sn,agent:Qt}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Tn=>{const Zn=new Date(Tn.date).valueOf();return Date.now()-Zn<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache))}catch(xt){xn.warn(xt)}})()}getHeartbeatsHeader(){var Ee=this;return(0,I.A)(function*(){var Ye;try{if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null==(null===(Ye=Ee._heartbeatsCache)||void 0===Ye?void 0:Ye.heartbeats)||0===Ee._heartbeatsCache.heartbeats.length)return"";const At=Or(),{heartbeatsToSend:xt,unsentEntries:Qt}=function Ei(Ne,Ee=1024){const Ye=[];let At=Ne.slice();for(const xt of Ne){const Qt=Ye.find(sn=>sn.agent===xt.agent);if(Qt){if(Qt.dates.push(xt.date),hn(Ye)>Ee){Qt.dates.pop();break}}else if(Ye.push({agent:xt.agent,dates:[xt.date]}),hn(Ye)>Ee){Ye.pop();break}At=At.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:At}}(Ee._heartbeatsCache.heartbeats),sn=(0,Q.Uj)(JSON.stringify({version:2,heartbeats:xt}));return Ee._heartbeatsCache.lastSentHeartbeatDate=At,Qt.length>0?(Ee._heartbeatsCache.heartbeats=Qt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),sn}catch(At){return xn.warn(At),""}})()}}function Or(){return(new Date).toISOString().substring(0,10)}class Er{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.A)(function*(){return!!(0,Q.zW)()&&(0,Q.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,I.A)(function*(){if(yield Ee._canUseIndexedDBPromise){const At=yield function oe(Ne){return pn.apply(this,arguments)}(Ee.app);return At?.heartbeats?At:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ee){var Ye=this;return(0,I.A)(function*(){var At;if(yield Ye._canUseIndexedDBPromise){const Qt=yield Ye.read();return Dn(Ye.app,{lastSentHeartbeatDate:null!==(At=Ee.lastSentHeartbeatDate)&&void 0!==At?At:Qt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var Ye=this;return(0,I.A)(function*(){var At;if(yield Ye._canUseIndexedDBPromise){const Qt=yield Ye.read();return Dn(Ye.app,{lastSentHeartbeatDate:null!==(At=Ee.lastSentHeartbeatDate)&&void 0!==At?At:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Ee.heartbeats]})}})()}}function hn(Ne){return(0,Q.Uj)(JSON.stringify({version:2,heartbeats:Ne})).length}!function hs(Ne){ot(new ee.uA("platform-logger",Ee=>new Ht(Ee),"PRIVATE")),ot(new ee.uA("heartbeat",Ee=>new ei(Ee),"PRIVATE")),z(Xt,Jn,Ne),z(Xt,Jn,"esm2017"),z("fire-js","")}("")},1362:(Pt,Be,U)=>{U.d(Be,{h1:()=>je,uA:()=>ne});var I=U(467),ee=U(1076);class ne{constructor(X,te,_e){this.name=X,this.instanceFactory=te,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const Q="[DEFAULT]";class K{constructor(X,te){this.name=X,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const te=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(te)){const _e=new ee.cY;if(this.instancesDeferred.set(te,_e),this.isInitialized(te)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:te});et&&_e.resolve(et)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(X){var te;const _e=this.normalizeInstanceIdentifier(X?.identifier),et=null!==(te=X?.optional)&&void 0!==te&&te;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(Qe){if(et)return null;throw Qe}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function Ie(Se){return"EAGER"===Se.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[te,_e]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(te);try{const Qe=this.getOrInitializeService({instanceIdentifier:et});_e.resolve(Qe)}catch{}}}}clearInstance(X=Q){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,I.A)(function*(){const te=Array.from(X.instances.values());yield Promise.all([...te.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...te.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=Q){return this.instances.has(X)}getOptions(X=Q){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:te={}}=X,_e=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:_e,options:te});for(const[Qe,vt]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(Qe)&&vt.resolve(et);return et}onInit(X,te){var _e;const et=this.normalizeInstanceIdentifier(te),Qe=null!==(_e=this.onInitCallbacks.get(et))&&void 0!==_e?_e:new Set;Qe.add(X),this.onInitCallbacks.set(et,Qe);const vt=this.instances.get(et);return vt&&X(vt,et),()=>{Qe.delete(X)}}invokeOnInitCallbacks(X,te){const _e=this.onInitCallbacks.get(te);if(_e)for(const et of _e)try{et(X,te)}catch{}}getOrInitializeService({instanceIdentifier:X,options:te={}}){let _e=this.instances.get(X);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=X,Se===Q?void 0:Se),options:te}),this.instances.set(X,_e),this.instancesOptions.set(X,te),this.invokeOnInitCallbacks(_e,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,_e)}catch{}var Se;return _e||null}normalizeInstanceIdentifier(X=Q){return this.component?this.component.multipleInstances?X:Q:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const te=this.getProvider(X.name);if(te.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);te.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const te=new K(X,this);return this.providers.set(X,te),te}getProviders(){return Array.from(this.providers.values())}}},8041:(Pt,Be,U)=>{U.d(Be,{$b:()=>ee,Ey:()=>Se,He:()=>je,Vy:()=>Ie});const I=[];var ee=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(ee||{});const ne={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Q=ee.INFO,K={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},le=(X,te,..._e)=>{if(te<X.logLevel)return;const et=(new Date).toISOString(),Qe=K[te];if(!Qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[Qe](`[${et}]  ${X.name}:`,..._e)};class Ie{constructor(te){this.name=te,this._logLevel=Q,this._logHandler=le,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in ee))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?ne[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...te),this._logHandler(this,ee.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...te),this._logHandler(this,ee.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...te),this._logHandler(this,ee.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...te),this._logHandler(this,ee.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...te),this._logHandler(this,ee.ERROR,...te)}}function je(X){I.forEach(te=>{te.setLogLevel(X)})}function Se(X,te){for(const _e of I){let et=null;te&&te.level&&(et=ne[te.level]),_e.userLogHandler=null===X?null:(Qe,vt,...it)=>{const Tt=it.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch{return null}}).filter(lt=>lt).join(" ");vt>=(et??Qe.logLevel)&&X({level:ee[vt].toLowerCase(),message:Tt,args:it,type:Qe.name})}}}},7935:(Pt,Be,U)=>{U.d(Be,{A:()=>I.A});var I=U(3345);I.A.registerVersion("firebase","10.14.0","app-compat")},7955:(Pt,Be,U)=>{var I=U(467),ee=U(3345),ne=U(7852),Q=U(1076),K=U(8041),le=U(1635),Ie=U(1362);const Se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const vt=function et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},it=function Qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new Q.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new K.Vy("@firebase/auth");function he(m,...l){mt.logLevel<=K.$b.ERROR&&mt.error(`Auth (${ne.SDK_VERSION}): ${m}`,...l)}function Oe(m,...l){throw St(m,...l)}function me(m,...l){return St(m,...l)}function ke(m,l,h){const y=Object.assign(Object.assign({},it()),{[l]:h});return new Q.FA("auth","Firebase",y).create(l,{appName:m.name})}function Xe(m){return ke(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pt(m,l,h){if(!(l instanceof h))throw h.name!==l.constructor.name&&Oe(m,"argument-error"),ke(m,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function St(m,...l){if("string"!=typeof m){const h=l[0],y=[...l.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(h,...y)}return Tt.create(m,...l)}function He(m,l,...h){if(!m)throw St(l,...h)}function Ht(m){const l="INTERNAL ASSERTION FAILED: "+m;throw he(l),new Error(l)}function on(m,l){m||Ht(l)}function Xt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Jn(){return"http:"===xn()||"https:"===xn()}function xn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class ue{constructor(l,h){this.shortDelay=l,this.longDelay=h,on(h>l,"Short delay should be less than long delay!"),this.isMobile=(0,Q.jZ)()||(0,Q.lV)()}get(){return function Mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jn()||(0,Q.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pe(m,l){on(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return l?`${h}${l.startsWith("/")?l.slice(1):l}`:h}class be{static initialize(l,h,y){this.fetchImpl=l,h&&(this.headersImpl=h),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ze=new ue(3e4,6e4);function Le(m,l){return m.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:m.tenantId}):l}function st(m,l,h,y){return _t.apply(this,arguments)}function _t(){return(_t=(0,I.A)(function*(m,l,h,y,M={}){return $n(m,M,(0,I.A)(function*(){let B={},ie={};y&&("GET"===l?ie=y:B={body:JSON.stringify(y)});const Te=(0,Q.Am)(Object.assign({key:m.config.apiKey},ie)).slice(1),qe=yield m._getAdditionalHeaders();qe["Content-Type"]="application/json",m.languageCode&&(qe["X-Firebase-Locale"]=m.languageCode);const Dt=Object.assign({method:l,headers:qe},B);return(0,Q.c1)()||(Dt.referrerPolicy="no-referrer"),be.fetch()(Hn(m,m.config.apiHost,h,Te),Dt)}))})).apply(this,arguments)}function $n(m,l,h){return zt.apply(this,arguments)}function zt(){return(zt=(0,I.A)(function*(m,l,h){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},Ae),l);try{const M=new dt(m),B=yield Promise.race([h(),M.promise]);M.clearNetworkTimeout();const ie=yield B.json();if("needConfirmation"in ie)throw gt(m,"account-exists-with-different-credential",ie);if(B.ok&&!("errorMessage"in ie))return ie;{const Te=B.ok?ie.errorMessage:ie.error.message,[qe,Dt]=Te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw gt(m,"credential-already-in-use",ie);if("EMAIL_EXISTS"===qe)throw gt(m,"email-already-in-use",ie);if("USER_DISABLED"===qe)throw gt(m,"user-disabled",ie);const Nt=y[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw ke(m,Nt,Dt);Oe(m,Nt)}}catch(M){if(M instanceof Q.g)throw M;Oe(m,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function $e(m,l,h,y){return kt.apply(this,arguments)}function kt(){return(kt=(0,I.A)(function*(m,l,h,y,M={}){const B=yield st(m,l,h,y,M);return"mfaPendingCredential"in B&&Oe(m,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function Hn(m,l,h,y){const M=`${l}${h}?${y}`;return m.config.emulator?pe(m.config,M):`${m.config.apiScheme}://${M}`}function rn(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dt{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((h,y)=>{this.timer=setTimeout(()=>y(me(this.auth,"network-request-failed")),ze.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gt(m,l,h){const y={appName:m.name};h.email&&(y.email=h.email),h.phoneNumber&&(y.phoneNumber=h.phoneNumber);const M=me(m,l,y);return M.customData._tokenResponse=h,M}function Ft(m){return void 0!==m&&void 0!==m.getResponse}function Je(m){return void 0!==m&&void 0!==m.enterprise}class Re{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===l)return rn(h.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Xn(){return(Xn=(0,I.A)(function*(m){return(yield st(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zr(m,l){return ir.apply(this,arguments)}function ir(){return(ir=(0,I.A)(function*(m,l){return st(m,"GET","/v2/recaptchaConfig",Le(m,l))})).apply(this,arguments)}function an(){return(an=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function fr(){return(fr=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Pr(m,l){return vr.apply(this,arguments)}function vr(){return(vr=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function bn(m){if(m)try{const l=new Date(Number(m));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function ot(){return(ot=(0,I.A)(function*(m,l=!1){const h=(0,Q.Ku)(m),y=yield h.getIdToken(l),M=un(y);He(M&&M.exp&&M.auth_time&&M.iat,h.auth,"internal-error");const B="object"==typeof M.firebase?M.firebase:void 0,ie=B?.sign_in_provider;return{claims:M,token:y,authTime:bn(Gr(M.auth_time)),issuedAtTime:bn(Gr(M.iat)),expirationTime:bn(Gr(M.exp)),signInProvider:ie||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function Gr(m){return 1e3*Number(m)}function un(m){const[l,h,y]=m.split(".");if(void 0===l||void 0===h||void 0===y)return he("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,Q.u)(h);return M?JSON.parse(M):(he("Failed to decode base64 JWT payload"),null)}catch(M){return he("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Sn(m){const l=un(m);return He(l,"internal-error"),He(typeof l.exp<"u","internal-error"),He(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function ut(m,l){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,I.A)(function*(m,l,h=!1){if(h)return l;try{return yield l}catch(y){throw y instanceof Q.g&&function Jt({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class gr{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var h;if(l){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(l=!1){var h=this;if(!this.isRunning)return;const y=this.getInterval(l);this.timerId=setTimeout((0,I.A)(function*(){yield h.iteration()}),y)}iteration(){var l=this;return(0,I.A)(function*(){try{yield l.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&l.schedule(!0))}l.schedule()})()}}class On{constructor(l,h){this.createdAt=l,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function It(m){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,I.A)(function*(m){var l;const h=m.auth,y=yield m.getIdToken(),M=yield ut(m,Pr(h,{idToken:y}));He(M?.users.length,h,"internal-error");const B=M.users[0];m._notifyReloadListener(B);const ie=null!==(l=B.providerUserInfo)&&void 0!==l&&l.length?Wr(B.providerUserInfo):[],Te=function Ii(m,l){return[...m.filter(y=>!l.some(M=>M.providerId===y.providerId)),...l]}(m.providerData,ie),Nt=!!m.isAnonymous&&!(m.email&&B.passwordHash||Te?.length),Vt={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Te,metadata:new On(B.createdAt,B.lastLoginAt),isAnonymous:Nt};Object.assign(m,Vt)})).apply(this,arguments)}function Ir(){return(Ir=(0,I.A)(function*(m){const l=(0,Q.Ku)(m);yield It(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Wr(m){return m.map(l=>{var{providerId:h}=l,y=(0,le.Tt)(l,["providerId"]);return{providerId:h,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function Ke(){return(Ke=(0,I.A)(function*(m,l){const h=yield $n(m,{},(0,I.A)(function*(){const y=(0,Q.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:M,apiKey:B}=m.config,ie=Hn(m,M,"/v1/token",`key=${B}`),Te=yield m._getAdditionalHeaders();return Te["Content-Type"]="application/x-www-form-urlencoded",be.fetch()(ie,{method:"POST",headers:Te,body:y})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function k(){return(k=(0,I.A)(function*(m,l){return st(m,"POST","/v2/accounts:revokeToken",Le(m,l))})).apply(this,arguments)}class j{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){He(l.idToken,"internal-error"),He(typeof l.idToken<"u","internal-error"),He(typeof l.refreshToken<"u","internal-error");const h="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Sn(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,h)}updateFromIdToken(l){He(0!==l.length,"internal-error");const h=Sn(l);this.updateTokensAndExpiration(l,null,h)}getToken(l,h=!1){var y=this;return(0,I.A)(function*(){return h||!y.accessToken||y.isExpired?(He(y.refreshToken,l,"user-token-expired"),y.refreshToken?(yield y.refresh(l,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,h){var y=this;return(0,I.A)(function*(){const{accessToken:M,refreshToken:B,expiresIn:ie}=yield function Xi(m,l){return Ke.apply(this,arguments)}(l,h);y.updateTokensAndExpiration(M,B,Number(ie))})()}updateTokensAndExpiration(l,h,y){this.refreshToken=h||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(l,h){const{refreshToken:y,accessToken:M,expirationTime:B}=h,ie=new j;return y&&(He("string"==typeof y,"internal-error",{appName:l}),ie.refreshToken=y),M&&(He("string"==typeof M,"internal-error",{appName:l}),ie.accessToken=M),B&&(He("number"==typeof B,"internal-error",{appName:l}),ie.expirationTime=B),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new j,this.toJSON())}_performRefresh(){return Ht("not implemented")}}function re(m,l){He("string"==typeof m||typeof m>"u","internal-error",{appName:l})}class ae{constructor(l){var{uid:h,auth:y,stsTokenManager:M}=l,B=(0,le.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new On(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(l){var h=this;return(0,I.A)(function*(){const y=yield ut(h,h.stsTokenManager.getToken(h.auth,l));return He(y,h.auth,"internal-error"),h.accessToken!==y&&(h.accessToken=y,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),y})()}getIdTokenResult(l){return function to(m){return ot.apply(this,arguments)}(this,l)}reload(){return function Yi(m){return Ir.apply(this,arguments)}(this)}_assign(l){this!==l&&(He(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(h=>Object.assign({},h)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const h=new ae(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(l){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,h=!1){var y=this;return(0,I.A)(function*(){let M=!1;l.idToken&&l.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(l),M=!0),h&&(yield It(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var l=this;return(0,I.A)(function*(){if((0,ne._isFirebaseServerApp)(l.auth.app))return Promise.reject(Xe(l.auth));const h=yield l.getIdToken();return yield ut(l,function qt(m,l){return an.apply(this,arguments)}(l.auth,{idToken:h})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,h){var y,M,B,ie,Te,qe,Dt,Nt;const Vt=null!==(y=h.displayName)&&void 0!==y?y:void 0,Mr=null!==(M=h.email)&&void 0!==M?M:void 0,us=null!==(B=h.phoneNumber)&&void 0!==B?B:void 0,uu=null!==(ie=h.photoURL)&&void 0!==ie?ie:void 0,Io=null!==(Te=h.tenantId)&&void 0!==Te?Te:void 0,oc=null!==(qe=h._redirectEventId)&&void 0!==qe?qe:void 0,tl=null!==(Dt=h.createdAt)&&void 0!==Dt?Dt:void 0,Hf=null!==(Nt=h.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:zf,emailVerified:cu,isAnonymous:Id,providerData:nl,stsTokenManager:rl}=h;He(zf&&rl,l,"internal-error");const Gf=j.fromJSON(this.name,rl);He("string"==typeof zf,l,"internal-error"),re(Vt,l.name),re(Mr,l.name),He("boolean"==typeof cu,l,"internal-error"),He("boolean"==typeof Id,l,"internal-error"),re(us,l.name),re(uu,l.name),re(Io,l.name),re(oc,l.name),re(tl,l.name),re(Hf,l.name);const ac=new ae({uid:zf,auth:l,email:Mr,emailVerified:cu,displayName:Vt,isAnonymous:Id,photoURL:uu,phoneNumber:us,tenantId:Io,stsTokenManager:Gf,createdAt:tl,lastLoginAt:Hf});return nl&&Array.isArray(nl)&&(ac.providerData=nl.map(Wf=>Object.assign({},Wf))),oc&&(ac._redirectEventId=oc),ac}static _fromIdTokenResponse(l,h,y=!1){return(0,I.A)(function*(){const M=new j;M.updateFromServerResponse(h);const B=new ae({uid:h.localId,auth:l,stsTokenManager:M,isAnonymous:y});return yield It(B),B})()}static _fromGetAccountInfoResponse(l,h,y){return(0,I.A)(function*(){const M=h.users[0];He(void 0!==M.localId,"internal-error");const B=void 0!==M.providerUserInfo?Wr(M.providerUserInfo):[],ie=!(M.email&&M.passwordHash||B?.length),Te=new j;Te.updateFromIdToken(y);const qe=new ae({uid:M.localId,auth:l,stsTokenManager:Te,isAnonymous:ie}),Dt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:B,metadata:new On(M.createdAt,M.lastLoginAt),isAnonymous:!(M.email&&M.passwordHash||B?.length)};return Object.assign(qe,Dt),qe})()}}const tt=new Map;function ct(m){on(m instanceof Function,"Expected a class definition");let l=tt.get(m);return l?(on(l instanceof m,"Instance stored in cache mismatched with class"),l):(l=new m,tt.set(m,l),l)}const oe=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.A)(function*(){return!0})()}_set(h,y){var M=this;return(0,I.A)(function*(){M.storage[h]=y})()}_get(h){var y=this;return(0,I.A)(function*(){const M=y.storage[h];return void 0===M?null:M})()}_remove(h){var y=this;return(0,I.A)(function*(){delete y.storage[h]})()}_addListener(h,y){}_removeListener(h,y){}}return m.type="NONE",m})();function pn(m,l,h){return`firebase:${m}:${l}:${h}`}class Dn{constructor(l,h,y){this.persistence=l,this.auth=h,this.userKey=y;const{config:M,name:B}=this.auth;this.fullUserKey=pn(this.userKey,M.apiKey,B),this.fullPersistenceKey=pn("persistence",M.apiKey,B),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,I.A)(function*(){const h=yield l.persistence._get(l.fullUserKey);return h?ae._fromJSON(l.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var h=this;return(0,I.A)(function*(){if(h.persistence===l)return;const y=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=l,y?h.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,h,y="authUser"){return(0,I.A)(function*(){if(!h.length)return new Dn(ct(oe),l,y);const M=(yield Promise.all(h.map(function(){var Dt=(0,I.A)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let B=M[0]||ct(oe);const ie=pn(y,l.config.apiKey,l.name);let Te=null;for(const Dt of h)try{const Nt=yield Dt._get(ie);if(Nt){const Vt=ae._fromJSON(l,Nt);Dt!==B&&(Te=Vt),B=Dt;break}}catch{}const qe=M.filter(Dt=>Dt._shouldAllowMigration);return B._shouldAllowMigration&&qe.length?(B=qe[0],Te&&(yield B._set(ie,Te.toJSON())),yield Promise.all(h.map(function(){var Dt=(0,I.A)(function*(Nt){if(Nt!==B)try{yield Nt._remove(ie)}catch{}});return function(Nt){return Dt.apply(this,arguments)}}())),new Dn(B,l,y)):new Dn(B,l,y)})()}}function cn(m){const l=m.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(ei(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Zr(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Ei(l))return"Blackberry";if(Er(l))return"Webos";if(fi(l))return"Safari";if((l.includes("chrome/")||pi(l))&&!l.includes("edge/"))return"Chrome";if(Or(l))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function Zr(m=(0,Q.ZQ)()){return/firefox\//i.test(m)}function fi(m=(0,Q.ZQ)()){const l=m.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function pi(m=(0,Q.ZQ)()){return/crios\//i.test(m)}function ei(m=(0,Q.ZQ)()){return/iemobile/i.test(m)}function Or(m=(0,Q.ZQ)()){return/android/i.test(m)}function Ei(m=(0,Q.ZQ)()){return/blackberry/i.test(m)}function Er(m=(0,Q.ZQ)()){return/webos/i.test(m)}function hn(m=(0,Q.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Ye(m=(0,Q.ZQ)()){return hn(m)||Or(m)||Er(m)||Ei(m)||/windows phone/i.test(m)||ei(m)}function At(m,l=[]){let h;switch(m){case"Browser":h=cn((0,Q.ZQ)());break;case"Worker":h=`${cn((0,Q.ZQ)())}-${m}`;break;default:h=m}const y=l.length?l.join(","):"FirebaseCore-web";return`${h}/JsCore/${ne.SDK_VERSION}/${y}`}class xt{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,h){const y=B=>new Promise((ie,Te)=>{try{ie(l(B))}catch(qe){Te(qe)}});y.onAbort=h,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(l){var h=this;return(0,I.A)(function*(){if(h.auth.currentUser===l)return;const y=[];try{for(const M of h.queue)yield M(l),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const B of y)try{B()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function sn(){return(sn=(0,I.A)(function*(m,l={}){return st(m,"GET","/v2/passwordPolicy",Le(m,l))})).apply(this,arguments)}class Zn{constructor(l){var h,y,M,B;const ie=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=ie.minPasswordLength)&&void 0!==h?h:6,ie.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ie.maxPasswordLength),void 0!==ie.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ie.containsLowercaseCharacter),void 0!==ie.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ie.containsUppercaseCharacter),void 0!==ie.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ie.containsNumericCharacter),void 0!==ie.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ie.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=l.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(B=l.forceUpgradeOnSignin)&&void 0!==B&&B,this.schemaVersion=l.schemaVersion}validatePassword(l){var h,y,M,B,ie,Te;const qe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,qe),this.validatePasswordCharacterOptions(l,qe),qe.isValid&&(qe.isValid=null===(h=qe.meetsMinPasswordLength)||void 0===h||h),qe.isValid&&(qe.isValid=null===(y=qe.meetsMaxPasswordLength)||void 0===y||y),qe.isValid&&(qe.isValid=null===(M=qe.containsLowercaseLetter)||void 0===M||M),qe.isValid&&(qe.isValid=null===(B=qe.containsUppercaseLetter)||void 0===B||B),qe.isValid&&(qe.isValid=null===(ie=qe.containsNumericCharacter)||void 0===ie||ie),qe.isValid&&(qe.isValid=null===(Te=qe.containsNonAlphanumericCharacter)||void 0===Te||Te),qe}validatePasswordLengthOptions(l,h){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(h.meetsMinPasswordLength=l.length>=y),M&&(h.meetsMaxPasswordLength=l.length<=M)}validatePasswordCharacterOptions(l,h){let y;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let M=0;M<l.length;M++)y=l.charAt(M),this.updatePasswordCharacterOptionsStatuses(h,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(l,h,y,M,B){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=B))}}class Ur{constructor(l,h,y,M){this.app=l,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new xt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(l,h){var y=this;return h&&(this._popupRedirectResolver=ct(h)),this._initializationPromise=this.queue((0,I.A)(function*(){var M,B;if(!y._deleted&&(y.persistenceManager=yield Dn.create(y,l),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(h),y.lastNotifiedUid=(null===(B=y.currentUser)||void 0===B?void 0:B.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,I.A)(function*(){if(l._deleted)return;const h=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||h){if(l.currentUser&&h&&l.currentUser.uid===h.uid)return l._currentUser._assign(h),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(l){var h=this;return(0,I.A)(function*(){try{const y=yield Pr(h,{idToken:l}),M=yield ae._fromGetAccountInfoResponse(h,y,l);yield h.directlySetCurrentUser(M)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var h=this;return(0,I.A)(function*(){var y;if((0,ne._isFirebaseServerApp)(h.app)){const Te=h.app.settings.authIdToken;return Te?new Promise(qe=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(Te).then(qe,qe))}):h.directlySetCurrentUser(null)}const M=yield h.assertedPersistence.getCurrentUser();let B=M,ie=!1;if(l&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Te=null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId,qe=B?._redirectEventId,Dt=yield h.tryRedirectSignIn(l);(!Te||Te===qe)&&Dt?.user&&(B=Dt.user,ie=!0)}if(!B)return h.directlySetCurrentUser(null);if(!B._redirectEventId){if(ie)try{yield h.beforeStateQueue.runMiddleware(B)}catch(Te){B=M,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Te))}return B?h.reloadAndSetCurrentUserOrClear(B):h.directlySetCurrentUser(null)}return He(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===B._redirectEventId?h.directlySetCurrentUser(B):h.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(l){var h=this;return(0,I.A)(function*(){let y=null;try{y=yield h._popupRedirectResolver._completeRedirectFn(h,l,!0)}catch{yield h._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(l){var h=this;return(0,I.A)(function*(){try{yield It(l)}catch(y){if("auth/network-request-failed"!==y?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Rt(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var l=this;return(0,I.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var h=this;return(0,I.A)(function*(){if((0,ne._isFirebaseServerApp)(h.app))return Promise.reject(Xe(h));const y=l?(0,Q.Ku)(l):null;return y&&He(y.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(y&&y._clone(h))})()}_updateCurrentUser(l,h=!1){var y=this;return(0,I.A)(function*(){if(!y._deleted)return l&&He(y.tenantId===l.tenantId,y,"tenant-id-mismatch"),h||(yield y.beforeStateQueue.runMiddleware(l)),y.queue((0,I.A)(function*(){yield y.directlySetCurrentUser(l),y.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,I.A)(function*(){return(0,ne._isFirebaseServerApp)(l.app)?Promise.reject(Xe(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var h=this;return(0,ne._isFirebaseServerApp)(this.app)?Promise.reject(Xe(this)):this.queue((0,I.A)(function*(){yield h.assertedPersistence.setPersistence(ct(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var h=this;return(0,I.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const y=h._getPasswordPolicyInternal();return y.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,I.A)(function*(){const h=yield function Qt(m){return sn.apply(this,arguments)}(l),y=new Zn(h);null===l.tenantId?l._projectPasswordPolicy=y:l._tenantPasswordPolicies[l.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new Q.FA("auth","Firebase",l())}onAuthStateChanged(l,h,y){return this.registerStateListener(this.authStateSubscription,l,h,y)}beforeAuthStateChanged(l,h){return this.beforeStateQueue.pushCallback(l,h)}onIdTokenChanged(l,h,y){return this.registerStateListener(this.idTokenSubscription,l,h,y)}authStateReady(){return new Promise((l,h)=>{if(this.currentUser)l();else{const y=this.onAuthStateChanged(()=>{y(),l()},h)}})}revokeAccessToken(l){var h=this;return(0,I.A)(function*(){if(h.currentUser){const y=yield h.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:y};null!=h.tenantId&&(M.tenantId=h.tenantId),yield function z(m,l){return k.apply(this,arguments)}(h,M)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,h){var y=this;return(0,I.A)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(h);return null===l?M.removeCurrentUser():M.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var h=this;return(0,I.A)(function*(){if(!h.redirectPersistenceManager){const y=l&&ct(l)||h._popupRedirectResolver;He(y,h,"argument-error"),h.redirectPersistenceManager=yield Dn.create(h,[ct(y._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(l){var h=this;return(0,I.A)(function*(){var y,M;return h._isInitialized&&(yield h.queue((0,I.A)(function*(){}))),(null===(y=h._currentUser)||void 0===y?void 0:y._redirectEventId)===l?h._currentUser:(null===(M=h.redirectUser)||void 0===M?void 0:M._redirectEventId)===l?h.redirectUser:null})()}_persistUserIfCurrent(l){var h=this;return(0,I.A)(function*(){if(l===h.currentUser)return h.queue((0,I.A)(function*(){return h.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(h=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,h,y,M){if(this._deleted)return()=>{};const B="function"==typeof h?h:h.next.bind(h);let ie=!1;const Te=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(Te,this,"internal-error"),Te.then(()=>{ie||B(this.currentUser)}),"function"==typeof h){const qe=l.addObserver(h,y,M);return()=>{ie=!0,qe()}}{const qe=l.addObserver(h);return()=>{ie=!0,qe()}}}directlySetCurrentUser(l){var h=this;return(0,I.A)(function*(){h.currentUser&&h.currentUser!==l&&h._currentUser._stopProactiveRefresh(),l&&h.isProactiveRefreshEnabled&&l._startProactiveRefresh(),h.currentUser=l,l?yield h.assertedPersistence.setCurrentUser(l):yield h.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=At(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,I.A)(function*(){var h;const y={"X-Client-Version":l.clientVersion};l.app.options.appId&&(y["X-Firebase-gmpid"]=l.app.options.appId);const M=yield null===(h=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const B=yield l._getAppCheckToken();return B&&(y["X-Firebase-AppCheck"]=B),y})()}_getAppCheckToken(){var l=this;return(0,I.A)(function*(){var h;const y=yield null===(h=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return y?.error&&function ye(m,...l){mt.logLevel<=K.$b.WARN&&mt.warn(`Auth (${ne.SDK_VERSION}): ${m}`,...l)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function Cn(m){return(0,Q.Ku)(m)}class Vs{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,Q.tD)(h=>this.observer=h)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fs={loadJS:()=>(0,I.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function no(m){return fs.loadJS(m)}function ro(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Ji{constructor(l){this.type="recaptcha-enterprise",this.auth=Cn(l)}verify(l="verify",h=!1){var y=this;return(0,I.A)(function*(){function B(){return B=(0,I.A)(function*(Te){if(!h){if(null==Te.tenantId&&null!=Te._agentRecaptchaConfig)return Te._agentRecaptchaConfig.siteKey;if(null!=Te.tenantId&&void 0!==Te._tenantRecaptchaConfigs[Te.tenantId])return Te._tenantRecaptchaConfigs[Te.tenantId].siteKey}return new Promise(function(){var qe=(0,I.A)(function*(Dt,Nt){zr(Te,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Vt=>{if(void 0!==Vt.recaptchaKey){const Mr=new Re(Vt);return null==Te.tenantId?Te._agentRecaptchaConfig=Mr:Te._tenantRecaptchaConfigs[Te.tenantId]=Mr,Dt(Mr.siteKey)}Nt(new Error("recaptcha Enterprise site key undefined"))}).catch(Vt=>{Nt(Vt)})});return function(Dt,Nt){return qe.apply(this,arguments)}}())}),B.apply(this,arguments)}function ie(Te,qe,Dt){const Nt=window.grecaptcha;Je(Nt)?Nt.enterprise.ready(()=>{Nt.enterprise.execute(Te,{action:l}).then(Vt=>{qe(Vt)}).catch(()=>{qe("NO_RECAPTCHA")})}):Dt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Te,qe)=>{(function M(Te){return B.apply(this,arguments)})(y.auth).then(Dt=>{if(!h&&Je(window.grecaptcha))ie(Dt,Te,qe);else{if(typeof window>"u")return void qe(new Error("RecaptchaVerifier is only supported in browser"));let Nt=function na(){return fs.recaptchaEnterpriseScript}();0!==Nt.length&&(Nt+=Dt),no(Nt).then(()=>{ie(Dt,Te,qe)}).catch(Vt=>{qe(Vt)})}}).catch(Dt=>{qe(Dt)})})})()}}function So(m,l,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,I.A)(function*(m,l,h,y=!1){const M=new Ji(m);let B;try{B=yield M.verify(h)}catch{B=yield M.verify(h,!0)}const ie=Object.assign({},l);return Object.assign(ie,y?{captchaResp:B}:{captchaResponse:B}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}function Ss(m,l,h,y){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,I.A)(function*(m,l,h,y){var M;if(null!==(M=m._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const B=yield So(m,l,h,"getOobCode"===h);return y(m,B)}return y(m,l).catch(function(){var B=(0,I.A)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Te=yield So(m,l,h,"getOobCode"===h);return y(m,Te)}return Promise.reject(ie)});return function(ie){return B.apply(this,arguments)}}())}),Sa.apply(this,arguments)}function Au(m){const l=m.indexOf(":");return l<0?"":m.substr(0,l+1)}function ia(m){if(!m)return null;const l=Number(m);return isNaN(l)?null:l}class Rs{constructor(l,h){this.providerId=l,this.signInMethod=h}toJSON(){return Ht("not implemented")}_getIdTokenResponse(l){return Ht("not implemented")}_linkToIdToken(l,h){return Ht("not implemented")}_getReauthenticationResolver(l){return Ht("not implemented")}}function Mi(m,l){return gn.apply(this,arguments)}function gn(){return(gn=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:resetPassword",Le(m,l))})).apply(this,arguments)}function fn(){return(fn=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ps(m,l){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Bs(){return(Bs=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:update",Le(m,l))})).apply(this,arguments)}function Ni(m,l){return lr.apply(this,arguments)}function lr(){return(lr=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithPassword",Le(m,l))})).apply(this,arguments)}function xi(m,l){return ur.apply(this,arguments)}function ur(){return(ur=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:sendOobCode",Le(m,l))})).apply(this,arguments)}function Zt(){return(Zt=(0,I.A)(function*(m,l){return xi(m,l)})).apply(this,arguments)}function mn(m,l){return _n.apply(this,arguments)}function _n(){return(_n=(0,I.A)(function*(m,l){return xi(m,l)})).apply(this,arguments)}function wi(m,l){return pr.apply(this,arguments)}function pr(){return(pr=(0,I.A)(function*(m,l){return xi(m,l)})).apply(this,arguments)}function Gn(){return(Gn=(0,I.A)(function*(m,l){return xi(m,l)})).apply(this,arguments)}function Br(){return(Br=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithEmailLink",Le(m,l))})).apply(this,arguments)}function Oi(){return(Oi=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithEmailLink",Le(m,l))})).apply(this,arguments)}class gi extends Rs{constructor(l,h,y,M=null){super("password",y),this._email=l,this._password=h,this._tenantId=M}static _fromEmailAndPassword(l,h){return new gi(l,h,"password")}static _fromEmailAndCode(l,h,y=null){return new gi(l,h,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(l){var h=this;return(0,I.A)(function*(){switch(h.signInMethod){case"password":return Ss(l,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ni);case"emailLink":return function gs(m,l){return Br.apply(this,arguments)}(l,{email:h._email,oobCode:h._password});default:Oe(l,"internal-error")}})()}_linkToIdToken(l,h){var y=this;return(0,I.A)(function*(){switch(y.signInMethod){case"password":return Ss(l,{idToken:h,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ps);case"emailLink":return function $t(m,l){return Oi.apply(this,arguments)}(l,{idToken:h,email:y._email,oobCode:y._password});default:Oe(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function cr(m,l){return er.apply(this,arguments)}function er(){return(er=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithIdp",Le(m,l))})).apply(this,arguments)}class br extends Rs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const h=new br(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(h.idToken=l.idToken),l.accessToken&&(h.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(h.nonce=l.nonce),l.pendingToken&&(h.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(h.accessToken=l.oauthToken,h.secret=l.oauthTokenSecret):Oe("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M}=h,B=(0,le.Tt)(h,["providerId","signInMethod"]);if(!y||!M)return null;const ie=new br(y,M);return ie.idToken=B.idToken||void 0,ie.accessToken=B.accessToken||void 0,ie.secret=B.secret,ie.nonce=B.nonce,ie.pendingToken=B.pendingToken||null,ie}_getIdTokenResponse(l){return cr(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,cr(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,cr(l,h)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),l.postBody=(0,Q.Am)(h)}return l}}function Ai(){return(Ai=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:sendVerificationCode",Le(m,l))})).apply(this,arguments)}function oi(){return(oi=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithPhoneNumber",Le(m,l))})).apply(this,arguments)}function Fi(){return(Fi=(0,I.A)(function*(m,l){const h=yield $e(m,"POST","/v1/accounts:signInWithPhoneNumber",Le(m,l));if(h.temporaryProof)throw gt(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const ms={USER_NOT_FOUND:"user-not-found"};function Na(){return(Na=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithPhoneNumber",Le(m,Object.assign(Object.assign({},l),{operation:"REAUTH"})),ms)})).apply(this,arguments)}class Vi extends Rs{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,h){return new Vi({verificationId:l,verificationCode:h})}static _fromTokenResponse(l,h){return new Vi({phoneNumber:l,temporaryProof:h})}_getIdTokenResponse(l){return function Ro(m,l){return oi.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,h){return function ti(m,l){return Fi.apply(this,arguments)}(l,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function yn(m,l){return Na.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:h,verificationId:y,verificationCode:M}=this.params;return l&&h?{temporaryProof:l,phoneNumber:h}:{sessionInfo:y,code:M}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:B}=l;return y||h||M||B?new Vi({verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:B}):null}}class $s{constructor(l){var h,y,M,B,ie,Te;const qe=(0,Q.I9)((0,Q.hp)(l)),Dt=null!==(h=qe.apiKey)&&void 0!==h?h:null,Nt=null!==(y=qe.oobCode)&&void 0!==y?y:null,Vt=function js(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=qe.mode)&&void 0!==M?M:null);He(Dt&&Nt&&Vt,"argument-error"),this.apiKey=Dt,this.operation=Vt,this.code=Nt,this.continueUrl=null!==(B=qe.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ie=qe.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Te=qe.tenantId)&&void 0!==Te?Te:null}static parseLink(l){const h=function mi(m){const l=(0,Q.I9)((0,Q.hp)(m)).link,h=l?(0,Q.I9)((0,Q.hp)(l)).deep_link_id:null,y=(0,Q.I9)((0,Q.hp)(m)).deep_link_id;return(y?(0,Q.I9)((0,Q.hp)(y)).link:null)||y||h||l||m}(l);try{return new $s(h)}catch{return null}}}let so=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,y){return gi._fromEmailAndPassword(h,y)}static credentialWithLink(h,y){const M=$s.parseLink(y);return He(M,"argument-error"),gi._fromEmailAndCode(h,M.code,M.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class dr{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Po extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class mr extends Po{static credentialFromJSON(l){const h="string"==typeof l?JSON.parse(l):l;return He("providerId"in h&&"signInMethod"in h,"argument-error"),br._fromParams(h)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return He(l.idToken||l.accessToken,"argument-error"),br._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return mr.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return mr.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:h,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:B,nonce:ie,providerId:Te}=l;if(!y&&!M&&!h&&!B||!Te)return null;try{return new mr(Te)._credential({idToken:h,accessToken:y,nonce:ie,pendingToken:B})}catch{return null}}}let ln=(()=>{class m extends Po{constructor(){super("facebook.com")}static credential(h){return br._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Mo=(()=>{class m extends Po{constructor(){super("google.com"),this.addScope("profile")}static credential(h,y){return br._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:y,oauthAccessToken:M}=h;if(!y&&!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Nn=(()=>{class m extends Po{constructor(){super("github.com")}static credential(h){return br._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class jr extends Rs{constructor(l,h){super(l,l),this.pendingToken=h}_getIdTokenResponse(l){return cr(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,cr(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,cr(l,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M,pendingToken:B}=h;return y&&M&&B&&y===M?new jr(y,B):null}static _create(l,h){return new jr(l,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ys extends dr{constructor(l){He(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return ys.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return ys.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const h=jr.fromJSON(l);return He(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:h,providerId:y}=l;if(!h||!y)return null;try{return jr._create(y,h)}catch{return null}}}let oa=(()=>{class m extends Po{constructor(){super("twitter.com")}static credential(h,y){return br._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=h;if(!y||!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ec(m,l){return wn.apply(this,arguments)}function wn(){return(wn=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signUp",Le(m,l))})).apply(this,arguments)}class en{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,h,y,M=!1){return(0,I.A)(function*(){const B=yield ae._fromIdTokenResponse(l,y,M),ie=es(y);return new en({user:B,providerId:ie,_tokenResponse:y,operationType:h})})()}static _forOperation(l,h,y){return(0,I.A)(function*(){yield l._updateTokensIfNecessary(y,!0);const M=es(y);return new en({user:l,providerId:M,_tokenResponse:y,operationType:h})})()}}function es(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function xa(){return(xa=(0,I.A)(function*(m){var l;if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const h=Cn(m);if(yield h._initializationPromise,null!==(l=h.currentUser)&&void 0!==l&&l.isAnonymous)return new en({user:h.currentUser,providerId:null,operationType:"signIn"});const y=yield Ec(h,{returnSecureToken:!0}),M=yield en._fromIdTokenResponse(h,"signIn",y,!0);return yield h._updateCurrentUser(M.user),M})).apply(this,arguments)}class qn extends Q.g{constructor(l,h,y,M){var B;super(h.code,h.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,qn.prototype),this.customData={appName:l.name,tenantId:null!==(B=l.tenantId)&&void 0!==B?B:void 0,_serverResponse:h.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(l,h,y,M){return new qn(l,h,y,M)}}function oo(m,l,h,y){return("reauthenticate"===l?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?qn._fromErrorAndOperation(m,B,l,y):B})}function wc(m){return new Set(m.map(({providerId:l})=>l).filter(l=>!!l))}function Du(){return Du=(0,I.A)(function*(m,l){const h=(0,Q.Ku)(m);yield Cu(!0,h,l);const{providerUserInfo:y}=yield function Gt(m,l){return fr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[l]}),M=wc(y||[]);return h.providerData=h.providerData.filter(B=>M.has(B.providerId)),M.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Du.apply(this,arguments)}function Ac(m,l){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,I.A)(function*(m,l,h=!1){const y=yield ut(m,l._linkToIdToken(m.auth,yield m.getIdToken()),h);return en._forOperation(m,"link",y)})).apply(this,arguments)}function Cu(m,l,h){return bu.apply(this,arguments)}function bu(){return(bu=(0,I.A)(function*(m,l,h){yield It(l);const M=!1===m?"provider-already-linked":"no-such-provider";He(wc(l.providerData).has(h)===m,l.auth,M)})).apply(this,arguments)}function Su(m,l){return No.apply(this,arguments)}function No(){return(No=(0,I.A)(function*(m,l,h=!1){const{auth:y}=m;if((0,ne._isFirebaseServerApp)(y.app))return Promise.reject(Xe(y));const M="reauthenticate";try{const B=yield ut(m,oo(y,M,l,m),h);He(B.idToken,y,"internal-error");const ie=un(B.idToken);He(ie,y,"internal-error");const{sub:Te}=ie;return He(m.uid===Te,y,"user-mismatch"),en._forOperation(m,M,B)}catch(B){throw"auth/user-not-found"===B?.code&&Oe(y,"user-mismatch"),B}})).apply(this,arguments)}function Oa(m,l){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,I.A)(function*(m,l,h=!1){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const y="signIn",M=yield oo(m,y,l),B=yield en._fromIdTokenResponse(m,y,M);return h||(yield m._updateCurrentUser(B.user)),B})).apply(this,arguments)}function ka(m,l){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,I.A)(function*(m,l){return Oa(Cn(m),l)})).apply(this,arguments)}function $r(m,l){return ts.apply(this,arguments)}function ts(){return(ts=(0,I.A)(function*(m,l){const h=(0,Q.Ku)(m);return yield Cu(!1,h,l.providerId),Ac(h,l)})).apply(this,arguments)}function La(m,l){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,I.A)(function*(m,l){return Su((0,Q.Ku)(m),l)})).apply(this,arguments)}function Kr(){return(Kr=(0,I.A)(function*(m,l){return $e(m,"POST","/v1/accounts:signInWithCustomToken",Le(m,l))})).apply(this,arguments)}function xo(){return xo=(0,I.A)(function*(m,l){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const h=Cn(m),y=yield function ao(m,l){return Kr.apply(this,arguments)}(h,{token:l,returnSecureToken:!0}),M=yield en._fromIdTokenResponse(h,"signIn",y);return yield h._updateCurrentUser(M.user),M}),xo.apply(this,arguments)}class Bi{constructor(l,h){this.factorId=l,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(l,h){return"phoneInfo"in h?Is._fromServerResponse(l,h):"totpInfo"in h?Hs._fromServerResponse(l,h):Oe(l,"internal-error")}}class Is extends Bi{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,h){return new Is(h)}}class Hs extends Bi{constructor(l){super("totp",l)}static _fromServerResponse(l,h){return new Hs(h)}}function ai(m,l,h){var y;He((null===(y=h.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),He(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),l.continueUrl=h.url,l.dynamicLinkDomain=h.dynamicLinkDomain,l.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(He(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),l.iOSBundleId=h.iOS.bundleId),h.android&&(He(h.android.packageName.length>0,m,"missing-android-pkg-name"),l.androidInstallApp=h.android.installApp,l.androidMinimumVersionCode=h.android.minimumVersion,l.androidPackageName=h.android.packageName)}function Sr(m){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,I.A)(function*(m){const l=Cn(m);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function ko(){return(ko=(0,I.A)(function*(m,l,h){const y=Cn(m),M={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};h&&ai(y,M,h),yield Ss(y,M,"getOobCode",mn)})).apply(this,arguments)}function Es(){return Es=(0,I.A)(function*(m,l,h){yield Mi((0,Q.Ku)(m),{oobCode:l,newPassword:h}).catch(function(){var y=(0,I.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Sr(m),M});return function(M){return y.apply(this,arguments)}}())}),Es.apply(this,arguments)}function _i(){return _i=(0,I.A)(function*(m,l){yield function zn(m,l){return Bs.apply(this,arguments)}((0,Q.Ku)(m),{oobCode:l})}),_i.apply(this,arguments)}function zs(m,l){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,I.A)(function*(m,l){const h=(0,Q.Ku)(m),y=yield Mi(h,{oobCode:l}),M=y.requestType;switch(He(M,h,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":He(y.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":He(y.mfaInfo,h,"internal-error");default:He(y.email,h,"internal-error")}let B=null;return y.mfaInfo&&(B=Bi._fromServerResponse(Cn(h),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:B},operation:M}})).apply(this,arguments)}function Cc(){return(Cc=(0,I.A)(function*(m,l){const{data:h}=yield zs((0,Q.Ku)(m),l);return h.email})).apply(this,arguments)}function Pu(){return(Pu=(0,I.A)(function*(m,l,h){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const y=Cn(m),ie=yield Ss(y,{returnSecureToken:!0,email:l,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ec).catch(qe=>{throw"auth/password-does-not-meet-requirements"===qe.code&&Sr(m),qe}),Te=yield en._fromIdTokenResponse(y,"signIn",ie);return yield y._updateCurrentUser(Te.user),Te})).apply(this,arguments)}function Ns(){return(Ns=(0,I.A)(function*(m,l,h){const y=Cn(m),M={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function B(ie,Te){He(Te.handleCodeInApp,y,"argument-error"),Te&&ai(y,ie,Te)})(M,h),yield Ss(y,M,"getOobCode",wi)})).apply(this,arguments)}function Va(){return(Va=(0,I.A)(function*(m,l,h){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const y=(0,Q.Ku)(m),M=so.credentialWithLink(l,h||Xt());return He(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),ka(y,M)})).apply(this,arguments)}function Ua(){return(Ua=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:createAuthUri",Le(m,l))})).apply(this,arguments)}function V(){return V=(0,I.A)(function*(m,l){const y={identifier:l,continueUri:Jn()?Xt():"http://localhost"},{signinMethods:M}=yield function co(m,l){return Ua.apply(this,arguments)}((0,Q.Ku)(m),y);return M||[]}),V.apply(this,arguments)}function F(){return F=(0,I.A)(function*(m,l){const h=(0,Q.Ku)(m),M={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};l&&ai(h.auth,M,l);const{email:B}=yield function yt(m,l){return Zt.apply(this,arguments)}(h.auth,M);B!==m.email&&(yield m.reload())}),F.apply(this,arguments)}function Fe(){return Fe=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:l};h&&ai(y.auth,B,h);const{email:ie}=yield function Zi(m,l){return Gn.apply(this,arguments)}(y.auth,B);ie!==m.email&&(yield m.reload())}),Fe.apply(this,arguments)}function Lt(){return(Lt=(0,I.A)(function*(m,l){return st(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Un(){return Un=(0,I.A)(function*(m,{displayName:l,photoURL:h}){if(void 0===l&&void 0===h)return;const y=(0,Q.Ku)(m),B={idToken:yield y.getIdToken(),displayName:l,photoUrl:h,returnSecureToken:!0},ie=yield ut(y,function nt(m,l){return Lt.apply(this,arguments)}(y.auth,B));y.displayName=ie.displayName||null,y.photoURL=ie.photoUrl||null;const Te=y.providerData.find(({providerId:qe})=>"password"===qe);Te&&(Te.displayName=y.displayName,Te.photoURL=y.photoURL),yield y._updateTokensIfNecessary(ie)}),Un.apply(this,arguments)}function Yn(m,l,h){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,I.A)(function*(m,l,h){const{auth:y}=m,B={idToken:yield m.getIdToken(),returnSecureToken:!0};l&&(B.email=l),h&&(B.password=h);const ie=yield ut(m,function Cr(m,l){return fn.apply(this,arguments)}(y,B));yield m._updateTokensIfNecessary(ie,!0)}),Wn.apply(this,arguments)}class qr{constructor(l,h,y={}){this.isNewUser=l,this.providerId=h,this.profile=y}}class Hr extends qr{constructor(l,h,y,M){super(l,h,y),this.username=M}}class Gs extends qr{constructor(l,h){super(l,"facebook.com",h)}}class ui extends Hr{constructor(l,h){super(l,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Hi extends qr{constructor(l,h){super(l,"google.com",h)}}class Qr extends Hr{constructor(l,h,y){super(l,"twitter.com",h,y)}}function ns(m){const{user:l,_tokenResponse:h}=m;return l.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function tr(m){var l,h;if(!m)return null;const{providerId:y}=m,M=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},B=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const ie=null===(h=null===(l=un(m.idToken))||void 0===l?void 0:l.firebase)||void 0===h?void 0:h.sign_in_provider;if(ie)return new qr(B,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!y)return null;switch(y){case"facebook.com":return new Gs(B,M);case"github.com":return new ui(B,M);case"google.com":return new Hi(B,M);case"twitter.com":return new Qr(B,M,m.screenName||null);case"custom":case"anonymous":return new qr(B,null);default:return new qr(B,y,M)}}(h)}class zi{constructor(l,h,y){this.type=l,this.credential=h,this.user=y}static _fromIdtoken(l,h){return new zi("enroll",l,h)}static _fromMfaPendingCredential(l){return new zi("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var h,y;if(l?.multiFactorSession){if(null!==(h=l.multiFactorSession)&&void 0!==h&&h.pendingCredential)return zi._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(y=l.multiFactorSession)&&void 0!==y&&y.idToken)return zi._fromIdtoken(l.multiFactorSession.idToken)}return null}}class ua{constructor(l,h,y){this.session=l,this.hints=h,this.signInResolver=y}static _fromError(l,h){const y=Cn(l),M=h.customData._serverResponse,B=(M.mfaInfo||[]).map(Te=>Bi._fromServerResponse(y,Te));He(M.mfaPendingCredential,y,"internal-error");const ie=zi._fromMfaPendingCredential(M.mfaPendingCredential);return new ua(ie,B,function(){var Te=(0,I.A)(function*(qe){const Dt=yield qe._process(y,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Nt=Object.assign(Object.assign({},M),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(h.operationType){case"signIn":const Vt=yield en._fromIdTokenResponse(y,h.operationType,Nt);return yield y._updateCurrentUser(Vt.user),Vt;case"reauthenticate":return He(h.user,y,"internal-error"),en._forOperation(h.user,h.operationType,Nt);default:Oe(y,"internal-error")}});return function(qe){return Te.apply(this,arguments)}}())}resolveSignIn(l){var h=this;return(0,I.A)(function*(){return h.signInResolver(l)})()}}class kn{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(y=>Bi._fromServerResponse(l.auth,y)))})}static _fromUser(l){return new kn(l)}getSession(){var l=this;return(0,I.A)(function*(){return zi._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,h){var y=this;return(0,I.A)(function*(){const M=l,B=yield y.getSession(),ie=yield ut(y.user,M._process(y.user.auth,B,h));return yield y.user._updateTokensIfNecessary(ie),y.user.reload()})()}unenroll(l){var h=this;return(0,I.A)(function*(){const y="string"==typeof l?l:l.uid,M=yield h.user.getIdToken();try{const B=yield ut(h.user,function kr(m,l){return st(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Le(m,l))}(h.user.auth,{idToken:M,mfaEnrollmentId:y}));h.enrolledFactors=h.enrolledFactors.filter(({uid:ie})=>ie!==y),yield h.user._updateTokensIfNecessary(B),yield h.user.reload()}catch(B){throw B}})()}}const rs=new WeakMap,ca="__sak";class Mc{constructor(l,h){this.storageRetriever=l,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,h){return this.storage.setItem(l,JSON.stringify(h)),Promise.resolve()}_get(l){const h=this.storage.getItem(l);return Promise.resolve(h?JSON.parse(h):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const fo=(()=>{class m extends Mc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,y)=>this.onStorageEvent(h,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ye(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),B=this.localCache[y];M!==B&&h(y,B,M)}}onStorageEvent(h,y=!1){if(!h.key)return void this.forAllChangedKeys((Te,qe,Dt)=>{this.notifyListeners(Te,Dt)});const M=h.key;y?this.detachListener():this.stopPolling();const B=()=>{const Te=this.storage.getItem(M);!y&&this.localCache[M]===Te||this.notifyListeners(M,Te)},ie=this.storage.getItem(M);!function Ee(){return(0,Q.lT)()&&10===document.documentMode}()||ie===h.newValue||h.newValue===h.oldValue?B():setTimeout(B,10)}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const B of Array.from(M))B(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,y){var M=()=>super._set,B=this;return(0,I.A)(function*(){yield M().call(B,h,y),B.localCache[h]=JSON.stringify(y)})()}_get(h){var y=()=>super._get,M=this;return(0,I.A)(function*(){const B=yield y().call(M,h);return M.localCache[h]=JSON.stringify(B),B})()}_remove(h){var y=()=>super._remove,M=this;return(0,I.A)(function*(){yield y().call(M,h),delete M.localCache[h]})()}}return m.type="LOCAL",m})(),is=(()=>{class m extends Mc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,y){}_removeListener(h,y){}}return m.type="SESSION",m})();let Rn=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const y=this.receivers.find(B=>B.isListeningto(h));if(y)return y;const M=new m(h);return this.receivers.push(M),M}isListeningto(h){return this.eventTarget===h}handleEvent(h){var y=this;return(0,I.A)(function*(){const M=h,{eventId:B,eventType:ie,data:Te}=M.data,qe=y.handlersMap[ie];if(!qe?.size)return;M.ports[0].postMessage({status:"ack",eventId:B,eventType:ie});const Dt=Array.from(qe).map(function(){var Vt=(0,I.A)(function*(Mr){return Mr(M.origin,Te)});return function(Mr){return Vt.apply(this,arguments)}}()),Nt=yield function at(m){return Promise.all(m.map(function(){var l=(0,I.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(y){return{fulfilled:!1,reason:y}}});return function(h){return l.apply(this,arguments)}}()))}(Dt);M.ports[0].postMessage({status:"done",eventId:B,eventType:ie,response:Nt})})()}_subscribe(h,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(y)}_unsubscribe(h,y){this.handlersMap[h]&&y&&this.handlersMap[h].delete(y),(!y||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Lo(m="",l=10){let h="";for(let y=0;y<l;y++)h+=Math.floor(10*Math.random());return m+h}class $l{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,h,y=50){var M=this;return(0,I.A)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ie,Te;return new Promise((qe,Dt)=>{const Nt=Lo("",20);B.port1.start();const Vt=setTimeout(()=>{Dt(new Error("unsupported_event"))},y);Te={messageChannel:B,onMessage(Mr){const us=Mr;if(us.data.eventId===Nt)switch(us.data.status){case"ack":clearTimeout(Vt),ie=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),qe(us.data.response);break;default:clearTimeout(Vt),clearTimeout(ie),Dt(new Error("invalid_response"))}}},M.handlers.add(Te),B.port1.addEventListener("message",Te.onMessage),M.target.postMessage({eventType:l,eventId:Nt,data:h},[B.port2])}).finally(()=>{Te&&M.removeMessageHandler(Te)})})()}}function Ln(){return window}function po(){return typeof Ln().WorkerGlobalScope<"u"&&"function"==typeof Ln().importScripts}function la(){return(la=(0,I.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sh="firebaseLocalStorageDb",wr="firebaseLocalStorage",ws="fbase_key";class da{constructor(l){this.request=l}toPromise(){return new Promise((l,h)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function rr(m,l){return m.transaction([wr],l?"readwrite":"readonly").objectStore(wr)}function $a(){const m=indexedDB.open(sh,1);return new Promise((l,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(wr,{keyPath:ws})}catch(M){h(M)}}),m.addEventListener("success",(0,I.A)(function*(){const y=m.result;y.objectStoreNames.contains(wr)?l(y):(y.close(),yield function ss(){const m=indexedDB.deleteDatabase(sh);return new da(m).toPromise()}(),l(yield $a()))}))})}function Oc(m,l,h){return ha.apply(this,arguments)}function ha(){return(ha=(0,I.A)(function*(m,l,h){const y=rr(m,!0).put({[ws]:l,value:h});return new da(y).toPromise()})).apply(this,arguments)}function Ha(){return(Ha=(0,I.A)(function*(m,l){const h=rr(m,!1).get(l),y=yield new da(h).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Lu(m,l){const h=rr(m,!0).delete(l);return new da(h).toPromise()}const v=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,I.A)(function*(){return h.db||(h.db=yield $a()),h.db})()}_withRetries(h){var y=this;return(0,I.A)(function*(){let M=0;for(;;)try{const B=yield y._openDb();return yield h(B)}catch(B){if(M++>3)throw B;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,I.A)(function*(){return po()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,I.A)(function*(){h.receiver=Rn._getInstance(function ih(){return po()?self:null}()),h.receiver._subscribe("keyChanged",function(){var y=(0,I.A)(function*(M,B){return{keyProcessed:(yield h._poll()).includes(B.key)}});return function(M,B){return y.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var y=(0,I.A)(function*(M,B){return["keyChanged"]});return function(M,B){return y.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,I.A)(function*(){var y,M;if(h.activeServiceWorker=yield function xs(){return la.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new $l(h.activeServiceWorker);const B=yield h.sender._send("ping",{},800);B&&null!==(y=B[0])&&void 0!==y&&y.fulfilled&&null!==(M=B[0])&&void 0!==M&&M.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var y=this;return(0,I.A)(function*(){if(y.sender&&y.activeServiceWorker&&function xc(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:h},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.A)(function*(){try{if(!indexedDB)return!1;const h=yield $a();return yield Oc(h,ca,"1"),yield Lu(h,ca),!0}catch{}return!1})()}_withPendingWrite(h){var y=this;return(0,I.A)(function*(){y.pendingWrites++;try{yield h()}finally{y.pendingWrites--}})()}_set(h,y){var M=this;return(0,I.A)(function*(){return M._withPendingWrite((0,I.A)(function*(){return yield M._withRetries(B=>Oc(B,h,y)),M.localCache[h]=y,M.notifyServiceWorker(h)}))})()}_get(h){var y=this;return(0,I.A)(function*(){const M=yield y._withRetries(B=>function Ks(m,l){return Ha.apply(this,arguments)}(B,h));return y.localCache[h]=M,M})()}_remove(h){var y=this;return(0,I.A)(function*(){return y._withPendingWrite((0,I.A)(function*(){return yield y._withRetries(M=>Lu(M,h)),delete y.localCache[h],y.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,I.A)(function*(){const y=yield h._withRetries(ie=>{const Te=rr(ie,!1).getAll();return new da(Te).toPromise()});if(!y)return[];if(0!==h.pendingWrites)return[];const M=[],B=new Set;if(0!==y.length)for(const{fbase_key:ie,value:Te}of y)B.add(ie),JSON.stringify(h.localCache[ie])!==JSON.stringify(Te)&&(h.notifyListeners(ie,Te),M.push(ie));for(const ie of Object.keys(h.localCache))h.localCache[ie]&&!B.has(ie)&&(h.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const B of Array.from(M))B(y)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,I.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),Me=1e12;class Ct{constructor(l){this.auth=l,this.counter=Me,this._widgets=new Map}render(l,h){const y=this.counter;return this._widgets.set(y,new dn(l,this.auth.name,h||{})),this.counter++,y}reset(l){var h;const y=l||Me;null===(h=this._widgets.get(y))||void 0===h||h.delete(),this._widgets.delete(y)}getResponse(l){var h;return(null===(h=this._widgets.get(l||Me))||void 0===h?void 0:h.getResponse())||""}execute(l){var h=this;return(0,I.A)(function*(){var y;return null===(y=h._widgets.get(l||Me))||void 0===y||y.execute(),""})()}}class dn{constructor(l,h,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof l?document.getElementById(l):l;He(M,"argument-error",{appName:h}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vn(m){const l=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)l.push(h.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":h}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=ro("rcb"),Kn=new ue(3e4,6e4);class za{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Ln().grecaptcha)||void 0===l||!l.render)}load(l,h=""){return He(function Ga(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),l,"argument-error"),this.shouldResolveImmediately(h)&&Ft(Ln().grecaptcha)?Promise.resolve(Ln().grecaptcha):new Promise((y,M)=>{const B=Ln().setTimeout(()=>{M(me(l,"network-request-failed"))},Kn.get());Ln()[In]=()=>{Ln().clearTimeout(B),delete Ln()[In];const Te=Ln().grecaptcha;if(!Te||!Ft(Te))return void M(me(l,"internal-error"));const qe=Te.render;Te.render=(Dt,Nt)=>{const Vt=qe(Dt,Nt);return this.counter++,Vt},this.hostLanguage=h,y(Te)},no(`${function Tu(){return fs.recaptchaV2Script}()}?${(0,Q.Am)({onload:In,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(B),M(me(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var h;return!(null===(h=Ln().grecaptcha)||void 0===h||!h.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Lc{load(l){return(0,I.A)(function*(){return new Ct(l)})()}clearedOneInstance(){}}const bi="recaptcha",Fo={theme:"light",type:"image"};class oh{constructor(l,h,y=Object.assign({},Fo)){this.parameters=y,this.type=bi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(l),this.isInvisible="invisible"===this.parameters.size,He(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof h?document.getElementById(h):h;He(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Lc:new za,this.validateStartingState()}verify(){var l=this;return(0,I.A)(function*(){l.assertNotDestroyed();const h=yield l.render(),y=l.getAssertedRecaptcha();return y.getResponse(h)||new Promise(B=>{const ie=Te=>{Te&&(l.tokenChangeListeners.delete(ie),B(Te))};l.tokenChangeListeners.add(ie),l.isInvisible&&y.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){He(!this.parameters.sitekey,this.auth,"argument-error"),He(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),He(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return h=>{if(this.tokenChangeListeners.forEach(y=>y(h)),"function"==typeof l)l(h);else if("string"==typeof l){const y=Ln()[l];"function"==typeof y&&y(h)}}}assertNotDestroyed(){He(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,I.A)(function*(){if(yield l.init(),!l.widgetId){let h=l.container;if(!l.isInvisible){const y=document.createElement("div");h.appendChild(y),h=y}l.widgetId=l.getAssertedRecaptcha().render(h,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,I.A)(function*(){He(Jn()&&!po(),l.auth,"internal-error"),yield function Hl(){let m=null;return new Promise(l=>{"complete"!==document.readyState?(m=()=>l(),window.addEventListener("load",m)):l()}).catch(l=>{throw m&&window.removeEventListener("load",m),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const h=yield function We(m){return Xn.apply(this,arguments)}(l.auth);He(h,l.auth,"internal-error"),l.parameters.sitekey=h})()}getAssertedRecaptcha(){return He(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qs{constructor(l,h){this.verificationId=l,this.onConfirmation=h}confirm(l){const h=Vi._fromVerification(this.verificationId,l);return this.onConfirmation(h)}}function Wa(){return(Wa=(0,I.A)(function*(m,l,h){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const y=Cn(m),M=yield Qs(y,l,(0,Q.Ku)(h));return new qs(M,B=>ka(y,B))})).apply(this,arguments)}function Ka(){return(Ka=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m);yield Cu(!1,y,"phone");const M=yield Qs(y.auth,l,(0,Q.Ku)(h));return new qs(M,B=>$r(y,B))})).apply(this,arguments)}function go(){return(go=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m);if((0,ne._isFirebaseServerApp)(y.auth.app))return Promise.reject(Xe(y.auth));const M=yield Qs(y.auth,l,(0,Q.Ku)(h));return new qs(M,B=>La(y,B))})).apply(this,arguments)}function Qs(m,l,h){return Uo.apply(this,arguments)}function Uo(){return Uo=(0,I.A)(function*(m,l,h){var y;const M=yield h.verify();try{let B;if(He("string"==typeof M,m,"argument-error"),He(h.type===bi,m,"argument-error"),B="string"==typeof l?{phoneNumber:l}:l,"session"in B){const ie=B.session;if("phoneNumber"in B)return He("enroll"===ie.type,m,"internal-error"),(yield function Rc(m,l){return st(m,"POST","/v2/accounts/mfaEnrollment:start",Le(m,l))}(m,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{He("signin"===ie.type,m,"internal-error");const Te=(null===(y=B.multiFactorHint)||void 0===y?void 0:y.uid)||B.multiFactorUid;return He(Te,m,"missing-multi-factor-info"),(yield function b(m,l){return st(m,"POST","/v2/accounts/mfaSignIn:start",Le(m,l))}(m,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Te,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function Li(m,l){return Ai.apply(this,arguments)}(m,{phoneNumber:B.phoneNumber,recaptchaToken:M});return ie}}finally{h._reset()}}),Uo.apply(this,arguments)}function fa(){return(fa=(0,I.A)(function*(m,l){const h=(0,Q.Ku)(m);if((0,ne._isFirebaseServerApp)(h.auth.app))return Promise.reject(Xe(h.auth));yield Ac(h,l)})).apply(this,arguments)}let qa=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=Cn(h)}verifyPhoneNumber(h,y){return Qs(this.auth,h,(0,Q.Ku)(y))}static credential(h,y){return Vi._fromVerification(h,y)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:y,temporaryProof:M}=h;return y&&M?Vi._fromTokenResponse(y,M):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function pa(m,l){return l?ct(l):(He(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Vu extends Rs{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return cr(l,this._buildIdpRequest())}_linkToIdToken(l,h){return cr(l,this._buildIdpRequest(h))}_getReauthenticationResolver(l){return cr(l,this._buildIdpRequest())}_buildIdpRequest(l){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(h.idToken=l),h}}function sg(m){return Oa(m.auth,new Vu(m),m.bypassAuthState)}function og(m){const{auth:l,user:h}=m;return He(h,l,"internal-error"),Su(h,new Vu(m),m.bypassAuthState)}function Tf(m){return ah.apply(this,arguments)}function ah(){return(ah=(0,I.A)(function*(m){const{auth:l,user:h}=m;return He(h,l,"internal-error"),Ac(h,new Vu(m),m.bypassAuthState)})).apply(this,arguments)}class Gl{constructor(l,h,y,M,B=!1){this.auth=l,this.resolver=y,this.user=M,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var l=this;return new Promise(function(){var h=(0,I.A)(function*(y,M){l.pendingPromise={resolve:y,reject:M};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(B){l.reject(B)}});return function(y,M){return h.apply(this,arguments)}}())}onAuthEvent(l){var h=this;return(0,I.A)(function*(){const{urlResponse:y,sessionId:M,postBody:B,tenantId:ie,error:Te,type:qe}=l;if(Te)return void h.reject(Te);const Dt={auth:h.auth,requestUri:y,sessionId:M,tenantId:ie||void 0,postBody:B||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(qe)(Dt))}catch(Nt){h.reject(Nt)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return sg;case"linkViaPopup":case"linkViaRedirect":return Tf;case"reauthViaPopup":case"reauthViaRedirect":return og;default:Oe(this.auth,"internal-error")}}resolve(l){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qa=new ue(2e3,1e4);function Bo(){return(Bo=(0,I.A)(function*(m,l,h){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(me(m,"operation-not-supported-in-this-environment"));const y=Cn(m);pt(m,l,dr);const M=pa(y,h);return new Kl(y,"signInViaPopup",l,M).executeNotNull()})).apply(this,arguments)}function Uu(){return(Uu=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m);if((0,ne._isFirebaseServerApp)(y.auth.app))return Promise.reject(me(y.auth,"operation-not-supported-in-this-environment"));pt(y.auth,l,dr);const M=pa(y.auth,h);return new Kl(y.auth,"reauthViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}function wf(){return(wf=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m);pt(y.auth,l,dr);const M=pa(y.auth,h);return new Kl(y.auth,"linkViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}let Kl=(()=>{class m extends Gl{constructor(h,y,M,B,ie){super(h,y,B,ie),this.provider=M,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,I.A)(function*(){const y=yield h.execute();return He(y,h.auth,"internal-error"),y})()}onExecution(){var h=this;return(0,I.A)(function*(){on(1===h.filter.length,"Popup operations only handle one event");const y=Lo();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],y),h.authWindow.associatedEvent=y,h.resolver._originValidation(h.auth).catch(M=>{h.reject(M)}),h.resolver._isIframeWebStorageSupported(h.auth,M=>{M||h.reject(me(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,Qa.get())};h()}}return m.currentPopupAction=null,m})();const Bu="pendingRedirect",Ys=new Map;class yi extends Gl{constructor(l,h,y=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,y),this.eventId=null}execute(){var l=()=>super.execute,h=this;return(0,I.A)(function*(){let y=Ys.get(h.auth._key());if(!y){try{const B=(yield function Af(m,l){return Ya.apply(this,arguments)}(h.resolver,h.auth))?yield l().call(h):null;y=()=>Promise.resolve(B)}catch(M){y=()=>Promise.reject(M)}Ys.set(h.auth._key(),y)}return h.bypassAuthState||Ys.set(h.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(l){var h=()=>super.onAuthEvent,y=this;return(0,I.A)(function*(){if("signInViaRedirect"===l.type)return h().call(y,l);if("unknown"!==l.type){if(l.eventId){const M=yield y.auth._redirectUserForId(l.eventId);if(M)return y.user=M,h().call(y,l);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,I.A)(function*(){})()}cleanUp(){}}function Ya(){return(Ya=(0,I.A)(function*(m,l){const h=Uc(l),y=uh(m);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(h));return yield y._remove(h),M})).apply(this,arguments)}function ju(m,l){return ql.apply(this,arguments)}function ql(){return(ql=(0,I.A)(function*(m,l){return uh(m)._set(Uc(l),"true")})).apply(this,arguments)}function Xa(m,l){Ys.set(m._key(),l)}function uh(m){return ct(m._redirectPersistence)}function Uc(m){return pn(Bu,m.config.apiKey,m.name)}function Ql(m,l,h){return function ch(m,l,h){return Ja.apply(this,arguments)}(m,l,h)}function Ja(){return(Ja=(0,I.A)(function*(m,l,h){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const y=Cn(m);pt(m,l,dr),yield y._initializationPromise;const M=pa(y,h);return yield ju(M,y),M._openRedirect(y,l,"signInViaRedirect")})).apply(this,arguments)}function ag(m,l,h){return function Hu(m,l,h){return Os.apply(this,arguments)}(m,l,h)}function Os(){return(Os=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m);if(pt(y.auth,l,dr),(0,ne._isFirebaseServerApp)(y.auth.app))return Promise.reject(Xe(y.auth));yield y.auth._initializationPromise;const M=pa(y.auth,h);yield ju(M,y.auth);const B=yield ci(y);return M._openRedirect(y.auth,l,"reauthViaRedirect",B)})).apply(this,arguments)}function ug(m,l,h){return function lh(m,l,h){return jo.apply(this,arguments)}(m,l,h)}function jo(){return(jo=(0,I.A)(function*(m,l,h){const y=(0,Q.Ku)(m);pt(y.auth,l,dr),yield y.auth._initializationPromise;const M=pa(y.auth,h);yield Cu(!1,y,l.providerId),yield ju(M,y.auth);const B=yield ci(y);return M._openRedirect(y.auth,l,"linkViaRedirect",B)})).apply(this,arguments)}function ga(){return(ga=(0,I.A)(function*(m,l){return yield Cn(m)._initializationPromise,ni(m,l,!1)})).apply(this,arguments)}function ni(m,l){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,I.A)(function*(m,l,h=!1){if((0,ne._isFirebaseServerApp)(m.app))return Promise.reject(Xe(m));const y=Cn(m),M=pa(y,l),ie=yield new yi(y,M,h).execute();return ie&&!h&&(delete ie.user._redirectEventId,yield y._persistUserIfCurrent(ie.user),yield y._setRedirectUser(null,l)),ie})).apply(this,arguments)}function ci(m){return zu.apply(this,arguments)}function zu(){return(zu=(0,I.A)(function*(m){const l=Lo(`${m.uid}:::`);return m._redirectEventId=l,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),l})).apply(this,arguments)}class Gu{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let h=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(l,y)&&(h=!0,this.sendToConsumer(l,y),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Xs(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return os(m);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=l,h=!0)),h}sendToConsumer(l,h){var y;if(l.error&&!os(l)){const M=(null===(y=l.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";h.onError(me(this.auth,M))}else h.onAuthEvent(l)}isEventForConsumer(l,h){const y=null===h.eventId||!!l.eventId&&l.eventId===h.eventId;return h.filter.includes(l.type)&&y}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bc(l))}saveEventToCache(l){this.cachedEventUids.add(Bc(l)),this.lastProcessedEventTime=Date.now()}}function Bc(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(l=>l).join("-")}function os({type:m,error:l}){return"unknown"===m&&"auth/no-auth-event"===l?.code}function ma(m){return _o.apply(this,arguments)}function _o(){return(_o=(0,I.A)(function*(m,l={}){return st(m,"GET","/v1/projects",l)})).apply(this,arguments)}const dh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Js=/^https?/;function yo(){return(yo=(0,I.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:l}=yield ma(m);for(const h of l)try{if(lg(h))return}catch{}Oe(m,"unauthorized-domain")})).apply(this,arguments)}function lg(m){const l=Xt(),{protocol:h,hostname:y}=new URL(l);if(m.startsWith("chrome-extension://")){const ie=new URL(m);return""===ie.hostname&&""===y?"chrome-extension:"===h&&m.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===h&&ie.hostname===y}if(!Js.test(h))return!1;if(dh.test(m))return y===m;const M=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const y_=new ue(3e4,6e4);function Df(){const m=Ln().___jsl;if(m?.H)for(const l of Object.keys(m.H))if(m.H[l].r=m.H[l].r||[],m.H[l].L=m.H[l].L||[],m.H[l].r=[...m.H[l].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let Jl=null;const Ho=new ue(5e3,15e3),Cf="__/auth/iframe",dg="emulator/auth/iframe",Yr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wu(m){const l=m.config;He(l.authDomain,m,"auth-domain-config-required");const h=l.emulator?pe(l,dg):`https://${m.config.authDomain}/${Cf}`,y={apiKey:l.apiKey,appName:m.name,v:ne.SDK_VERSION},M=hg.get(m.config.apiHost);M&&(y.eid=M);const B=m._getFrameworks();return B.length&&(y.fw=B.join(",")),`${h}?${(0,Q.Am)(y).slice(1)}`}function li(){return li=(0,I.A)(function*(m){const l=yield function I_(m){return Jl=Jl||function v_(m){return new Promise((l,h)=>{var y,M,B;function ie(){Df(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Df(),h(me(m,"network-request-failed"))},timeout:y_.get()})}if(null!==(M=null===(y=Ln().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)l(gapi.iframes.getContext());else{if(null===(B=Ln().gapi)||void 0===B||!B.load){const Te=ro("iframefcb");return Ln()[Te]=()=>{gapi.load?ie():h(me(m,"network-request-failed"))},no(`${function si(){return fs.gapiScript}()}?onload=${Te}`).catch(qe=>h(qe))}ie()}}).catch(l=>{throw Jl=null,l})}(m),Jl}(m),h=Ln().gapi;return He(h,m,"internal-error"),l.open({where:document.body,url:Wu(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yr,dontclear:!0},y=>new Promise(function(){var M=(0,I.A)(function*(B,ie){yield y.restyle({setHideOnLeave:!1});const Te=me(m,"network-request-failed"),qe=Ln().setTimeout(()=>{ie(Te)},Ho.get());function Dt(){Ln().clearTimeout(qe),B(y)}y.ping(Dt).then(Dt,()=>{ie(Te)})});return function(B,ie){return M.apply(this,arguments)}}()))}),li.apply(this,arguments)}const eu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pg{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const or="__/auth/handler",fh="emulator/auth/handler",qu=encodeURIComponent("fac");function Sf(m,l,h,y,M,B){return ed.apply(this,arguments)}function ed(){return(ed=(0,I.A)(function*(m,l,h,y,M,B){He(m.config.authDomain,m,"auth-domain-config-required"),He(m.config.apiKey,m,"invalid-api-key");const ie={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:y,v:ne.SDK_VERSION,eventId:M};if(l instanceof dr){l.setDefaultLanguage(m.languageCode),ie.providerId=l.providerId||"",(0,Q.Im)(l.getCustomParameters())||(ie.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Nt,Vt]of Object.entries(B||{}))ie[Nt]=Vt}if(l instanceof Po){const Nt=l.getScopes().filter(Vt=>""!==Vt);Nt.length>0&&(ie.scopes=Nt.join(","))}m.tenantId&&(ie.tid=m.tenantId);const Te=ie;for(const Nt of Object.keys(Te))void 0===Te[Nt]&&delete Te[Nt];const qe=yield m._getAppCheckToken(),Dt=qe?`#${qu}=${encodeURIComponent(qe)}`:"";return`${function ph({config:m}){return m.emulator?pe(m,fh):`https://${m.authDomain}/${or}`}(m)}?${(0,Q.Am)(Te).slice(1)}${Dt}`})).apply(this,arguments)}const gh="webStorageSupport",jc=class td{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=is,this._completeRedirectFn=ni,this._overrideRedirectResult=Xa}_openPopup(l,h,y,M){var B=this;return(0,I.A)(function*(){var ie;on(null===(ie=B.eventManagers[l._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Te=yield Sf(l,h,y,Xt(),M);return function gg(m,l,h,y=500,M=600){const B=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-y)/2,0).toString();let Te="";const qe=Object.assign(Object.assign({},eu),{width:y.toString(),height:M.toString(),top:B,left:ie}),Dt=(0,Q.ZQ)().toLowerCase();h&&(Te=pi(Dt)?"_blank":h),Zr(Dt)&&(l=l||"http://localhost",qe.scrollbars="yes");const Nt=Object.entries(qe).reduce((Mr,[us,uu])=>`${Mr}${us}=${uu},`,"");if(function Ne(m=(0,Q.ZQ)()){var l;return hn(m)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Dt)&&"_self"!==Te)return function bf(m,l){const h=document.createElement("a");h.href=m,h.target=l;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(y)}(l||"",Te),new pg(null);const Vt=window.open(l||"",Te,Nt);He(Vt,m,"popup-blocked");try{Vt.focus()}catch{}return new pg(Vt)}(l,Te,Lo())})()}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B._originValidation(l),function rh(m){Ln().location.href=m}(yield Sf(l,h,y,Xt(),M)),new Promise(()=>{})})()}_initialize(l){const h=l._key();if(this.eventManagers[h]){const{manager:M,promise:B}=this.eventManagers[h];return M?Promise.resolve(M):(on(B,"If manager is not set, promise should be"),B)}const y=this.initAndGetManager(l);return this.eventManagers[h]={promise:y},y.catch(()=>{delete this.eventManagers[h]}),y}initAndGetManager(l){var h=this;return(0,I.A)(function*(){const y=yield function Za(m){return li.apply(this,arguments)}(l),M=new Gu(l);return y.register("authEvent",B=>(He(B?.authEvent,l,"invalid-auth-event"),{status:M.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[l._key()]={manager:M},h.iframes[l._key()]=y,M})()}_isIframeWebStorageSupported(l,h){this.iframes[l._key()].send(gh,{type:gh},M=>{var B;const ie=null===(B=M?.[0])||void 0===B?void 0:B[gh];void 0!==ie&&h(!!ie),Oe(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function cg(m){return yo.apply(this,arguments)}(l)),this.originValidationPromises[h]}get _shouldInitProactively(){return Ye()||fi()||hn()}};class Rf{constructor(l){this.factorId=l}_process(l,h,y){switch(h.type){case"enroll":return this._finalizeEnroll(l,h.credential,y);case"signin":return this._finalizeSignIn(l,h.credential);default:return Ht("unexpected MultiFactorSessionType")}}}class nd extends Rf{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new nd(l)}_finalizeEnroll(l,h,y){return function xu(m,l){return st(m,"POST","/v2/accounts/mfaEnrollment:finalize",Le(m,l))}(l,{idToken:h,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,h){return function N(m,l){return st(m,"POST","/v2/accounts/mfaSignIn:finalize",Le(m,l))}(l,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $c=(()=>{class m{constructor(){}static assertion(h){return nd._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var nu="@firebase/auth";class mh{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var h=this;return(0,I.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const h=this.auth.onIdTokenChanged(y=>{l(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,h),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const h=this.internalListeners.get(l);h&&(this.internalListeners.delete(l),h(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Yu(){return window}(0,Q.XA)("authIdTokenMaxAge"),function Eu(m){fs=m}({loadJS:m=>new Promise((l,h)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=l,y.onerror=M=>{const B=me("internal-error");B.customData=M,h(B)},y.type="text/javascript",y.charset="UTF-8",function Nf(){var m,l;return null!==(l=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==l?l:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function zc(m){(0,ne._registerComponent)(new Ie.uA("auth",(l,{options:h})=>{const y=l.getProvider("app").getImmediate(),M=l.getProvider("heartbeat"),B=l.getProvider("app-check-internal"),{apiKey:ie,authDomain:Te}=y.options;He(ie&&!ie.includes(":"),"invalid-api-key",{appName:y.name});const qe={apiKey:ie,authDomain:Te,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:At(m)},Dt=new Ur(y,M,B,qe);return function wu(m,l){const h=l?.persistence||[],y=(Array.isArray(h)?h:[h]).map(ct);l?.errorMap&&m._updateErrorMap(l.errorMap),m._initializeWithPersistence(y,l?.popupRedirectResolver)}(Dt,h),Dt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,h,y)=>{l.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new Ie.uA("auth-internal",l=>{const h=Cn(l.getProvider("auth").getImmediate());return new mh(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(nu,"1.7.9",function _h(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,ne.registerVersion)(nu,"1.7.9","esm2017")}("Browser");function id(){return id=(0,I.A)(function*(m,l,h){var y;const{BuildInfo:M}=Yu();on(l.sessionId,"AuthEvent did not contain a session ID");const B=yield function Of(m){return ud.apply(this,arguments)}(l.sessionId),ie={};return hn()?ie.ibi=M.packageName:Or()?ie.apn=M.packageName:Oe(m,"operation-not-supported-in-this-environment"),M.displayName&&(ie.appDisplayName=M.displayName),ie.sessionId=B,Sf(m,h,l.type,void 0,null!==(y=l.eventId)&&void 0!==y?y:void 0,ie)}),id.apply(this,arguments)}function od(){return(od=(0,I.A)(function*(m){const{BuildInfo:l}=Yu(),h={};hn()?h.iosBundleId=l.packageName:Or()?h.androidPackageName=l.packageName:Oe(m,"operation-not-supported-in-this-environment"),yield ma(m,h)})).apply(this,arguments)}function ad(){return(ad=(0,I.A)(function*(m,l,h){const{cordova:y}=Yu();let M=()=>{};try{yield new Promise((B,ie)=>{let Te=null;function qe(){var Vt;B();const Mr=null===(Vt=y.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof Mr&&Mr(),"function"==typeof h?.close&&h.close()}function Dt(){Te||(Te=window.setTimeout(()=>{ie(me(m,"redirect-cancelled-by-user"))},2e3))}function Nt(){"visible"===document?.visibilityState&&Dt()}l.addPassiveListener(qe),document.addEventListener("resume",Dt,!1),Or()&&document.addEventListener("visibilitychange",Nt,!1),M=()=>{l.removePassiveListener(qe),document.removeEventListener("resume",Dt,!1),document.removeEventListener("visibilitychange",Nt,!1),Te&&window.clearTimeout(Te)}})}finally{M()}})).apply(this,arguments)}function ud(){return(ud=(0,I.A)(function*(m){const l=function Eh(m){if(on(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const l=new ArrayBuffer(m.length),h=new Uint8Array(l);for(let y=0;y<m.length;y++)h[y]=m.charCodeAt(y);return h}(m),h=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(h)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Th extends Gu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(l)),super.onEvent(l)}initialized(){var l=this;return(0,I.A)(function*(){yield l.initPromise})()}}function ld(m){return dd.apply(this,arguments)}function dd(){return(dd=(0,I.A)(function*(m){const l=yield wh()._get(Lf(m));return l&&(yield wh()._remove(Lf(m))),l})).apply(this,arguments)}function kf(){const m=[];for(let h=0;h<20;h++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function wh(){return ct(fo)}function Lf(m){return pn("authEvent",m.config.apiKey,m.name)}function Ju(m){if(!m?.includes("?"))return{};const[l,...h]=m.split("?");return(0,Q.I9)(h.join("?"))}const vi=class fd{constructor(){this._redirectPersistence=is,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ni,this._overrideRedirectResult=Xa}_initialize(l){var h=this;return(0,I.A)(function*(){const y=l._key();let M=h.eventManagers.get(y);return M||(M=new Th(l),h.eventManagers.set(y,M),h.attachCallbackListeners(l,M)),M})()}_openPopup(l){Oe(l,"operation-not-supported-in-this-environment")}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){!function Ih(m){var l,h,y,M,B,ie,Te,qe,Dt,Nt;const Vt=Yu();He("function"==typeof(null===(l=Vt?.universalLinks)||void 0===l?void 0:l.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),He(typeof(null===(h=Vt?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),He("function"==typeof(null===(B=null===(M=null===(y=Vt?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===B?void 0:B.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),He("function"==typeof(null===(qe=null===(Te=null===(ie=Vt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Te?void 0:Te.browsertab)||void 0===qe?void 0:qe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),He("function"==typeof(null===(Nt=null===(Dt=Vt?.cordova)||void 0===Dt?void 0:Dt.InAppBrowser)||void 0===Nt?void 0:Nt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const ie=yield B._initialize(l);yield ie.initialized(),ie.resetRedirect(),function $u(){Ys.clear()}(),yield B._originValidation(l);const Te=function cd(m,l,h=null){return{type:l,eventId:h,urlResponse:null,sessionId:kf(),postBody:null,tenantId:m.tenantId,error:me(m,"no-auth-event")}}(l,y,M);yield function su(m,l){return wh()._set(Lf(m),l)}(l,Te);const qe=yield function Xu(m,l,h){return id.apply(this,arguments)}(l,Te,h),Dt=yield function xf(m){const{cordova:l}=Yu();return new Promise(h=>{l.plugins.browsertab.isAvailable(y=>{let M=null;y?l.plugins.browsertab.openUrl(m):M=l.InAppBrowser.open(m,function hs(m=(0,Q.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(M)})})}(qe);return function Gc(m,l,h){return ad.apply(this,arguments)}(l,ie,Dt)})()}_isIframeWebStorageSupported(l,h){throw new Error("Method not implemented.")}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function sd(m){return od.apply(this,arguments)}(l)),this.originValidationPromises[h]}attachCallbackListeners(l,h){const{universalLinks:y,handleOpenURL:M,BuildInfo:B}=Yu(),ie=setTimeout((0,I.A)(function*(){yield ld(l),h.onEvent(Dh())}),500),Te=function(){var Nt=(0,I.A)(function*(Vt){clearTimeout(ie);const Mr=yield ld(l);let us=null;Mr&&Vt?.url&&(us=function Wc(m,l){var h,y;const M=function Ah(m){const l=Ju(m),h=l.link?decodeURIComponent(l.link):void 0,y=Ju(h).link,M=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return Ju(M).link||M||y||h||m}(l);if(M.includes("/__/auth/callback")){const B=Ju(M),ie=B.firebaseError?function _g(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(B.firebaseError)):null,Te=null===(y=null===(h=ie?.code)||void 0===h?void 0:h.split("auth/"))||void 0===y?void 0:y[1],qe=Te?me(Te):null;return qe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:M,postBody:null}}return null}(Mr,Vt.url)),h.onEvent(us||Dh())});return function(Mr){return Nt.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,Te);const qe=M,Dt=`${B.packageName.toLowerCase()}://`;Yu().handleOpenURL=function(){var Nt=(0,I.A)(function*(Vt){if(Vt.toLowerCase().startsWith(Dt)&&Te({url:Vt}),"function"==typeof qe)try{qe(Vt)}catch(Mr){console.error(Mr)}});return function(Vt){return Nt.apply(this,arguments)}}()}};function Dh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Go(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Kc(m=(0,Q.ZQ)()){return!("file:"!==Go()&&"ionic:"!==Go()&&"capacitor:"!==Go()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function tc(){try{const m=self.localStorage,l=Lo();if(m)return m.setItem(l,"1"),m.removeItem(l),!function ec(m=(0,Q.ZQ)()){return function vg(){return(0,Q.lT)()&&11===document?.documentMode}()||function Ig(m=(0,Q.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,Q.zW)()}catch{return ya()&&(0,Q.zW)()}return!1}function ya(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qc(){return(function gd(){return"http:"===Go()||"https:"===Go()}()||(0,Q.sr)()||Kc())&&!function yg(){return(0,Q.lV)()||(0,Q.Ll)()}()&&tc()&&!ya()}function Qc(){return Kc()&&typeof document<"u"}function Yc(){return(Yc=(0,I.A)(function*(){return!!Qc()&&new Promise(m=>{const l=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),m(!0)})})})).apply(this,arguments)}const hr={LOCAL:"local",NONE:"none",SESSION:"session"},Wo=He,vo="persistence";function di(m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,I.A)(function*(m){yield m._initializationPromise;const l=Xc(),h=pn(vo,m.config.apiKey,m.name);l&&l.setItem(h,m._getPersistence())})).apply(this,arguments)}function Xc(){var m;try{return(null===(m=function Ff(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Eg=He;class Zs{constructor(){this.browserResolver=ct(jc),this.cordovaResolver=ct(vi),this.underlyingResolver=null,this._redirectPersistence=is,this._completeRedirectFn=ni,this._overrideRedirectResult=Xa}_initialize(l){var h=this;return(0,I.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openPopup(l,h,y,M)})()}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openRedirect(l,h,y,M)})()}_isIframeWebStorageSupported(l,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,h)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Qc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Eg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,I.A)(function*(){if(l.underlyingResolver)return;const h=yield function ou(){return Yc.apply(this,arguments)}();l.underlyingResolver=h?l.cordovaResolver:l.browserResolver})()}}function Uf(m){return m.unwrap()}function yd(m){return bh(m)}function bh(m){const{_tokenResponse:l}=m instanceof Q.g?m.customData:m;if(!l)return null;if(!(m instanceof Q.g)&&"temporaryProof"in l&&"phoneNumber"in l)return qa.credentialFromResult(m);const h=l.providerId;if(!h||h===Se.PASSWORD)return null;let y;switch(h){case Se.GOOGLE:y=Mo;break;case Se.FACEBOOK:y=ln;break;case Se.GITHUB:y=Nn;break;case Se.TWITTER:y=oa;break;default:const{oauthIdToken:M,oauthAccessToken:B,oauthTokenSecret:ie,pendingToken:Te,nonce:qe}=l;return B||ie||M||Te?Te?h.startsWith("saml.")?jr._create(h,Te):br._fromParams({providerId:h,signInMethod:h,pendingToken:Te,idToken:M,accessToken:B}):new mr(h).credential({idToken:M,accessToken:B,rawNonce:qe}):null}return m instanceof Q.g?y.credentialFromError(m):y.credentialFromResult(m)}function ri(m,l){return l.catch(h=>{throw h instanceof Q.g&&function vd(m,l){var h;const y=null===(h=l.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new Tg(m,function Sc(m,l){var h;const y=(0,Q.Ku)(m),M=l;return He(l.customData.operationType,y,"argument-error"),He(null===(h=M.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,y,"argument-error"),ua._fromError(y,M)}(m,l));else if(y){const M=bh(l),B=l;M&&(B.credential=M,B.tenantId=y.tenantId||void 0,B.email=y.email||void 0,B.phoneNumber=y.phoneNumber||void 0)}}(m,h),h}).then(h=>{const M=h.user;return{operationType:h.operationType,credential:yd(h),additionalUserInfo:ns(h),user:as.getOrCreate(M)}})}function au(m,l){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,I.A)(function*(m,l){const h=yield l;return{verificationId:h.verificationId,confirm:y=>ri(m,h.confirm(y))}})).apply(this,arguments)}class Tg{constructor(l,h){this.resolver=h,this.auth=function _d(m){return m.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return ri(Uf(this.auth),this.resolver.resolveSignIn(l))}}class as{constructor(l){this._delegate=l,this.multiFactor=function Bl(m){const l=(0,Q.Ku)(m);return rs.has(l)||rs.set(l,kn._fromUser(l)),rs.get(l)}(l)}static getOrCreate(l){return as.USER_MAP.has(l)||as.USER_MAP.set(l,new as(l)),as.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var h=this;return(0,I.A)(function*(){return ri(h.auth,$r(h._delegate,l))})()}linkWithPhoneNumber(l,h){var y=this;return(0,I.A)(function*(){return au(y.auth,function zl(m,l,h){return Ka.apply(this,arguments)}(y._delegate,l,h))})()}linkWithPopup(l){var h=this;return(0,I.A)(function*(){return ri(h.auth,function Wl(m,l,h){return wf.apply(this,arguments)}(h._delegate,l,Zs))})()}linkWithRedirect(l){var h=this;return(0,I.A)(function*(){return yield di(Cn(h.auth)),ug(h._delegate,l,Zs)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var h=this;return(0,I.A)(function*(){return ri(h.auth,La(h._delegate,l))})()}reauthenticateWithPhoneNumber(l,h){return au(this.auth,function Fu(m,l,h){return go.apply(this,arguments)}(this._delegate,l,h))}reauthenticateWithPopup(l){return ri(this.auth,function Vc(m,l,h){return Uu.apply(this,arguments)}(this._delegate,l,Zs))}reauthenticateWithRedirect(l){var h=this;return(0,I.A)(function*(){return yield di(Cn(h.auth)),ag(h._delegate,l,Zs)})()}sendEmailVerification(l){return function P(m,l){return F.apply(this,arguments)}(this._delegate,l)}unlink(l){var h=this;return(0,I.A)(function*(){return yield function Fl(m,l){return Du.apply(this,arguments)}(h._delegate,l),h})()}updateEmail(l){return function Bn(m,l){const h=(0,Q.Ku)(m);return(0,ne._isFirebaseServerApp)(h.auth.app)?Promise.reject(Xe(h.auth)):Yn(h,l,null)}(this._delegate,l)}updatePassword(l){return function tn(m,l){return Yn((0,Q.Ku)(m),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function mo(m,l){return fa.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Qn(m,l){return Un.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,h){return function Z(m,l,h){return Fe.apply(this,arguments)}(this._delegate,l,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}as.USER_MAP=new WeakMap;const nc=He;let Bf=(()=>{class m{constructor(h,y){if(this.app=h,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=h.options;nc(M,"invalid-api-key",{appName:h.name}),nc(M,"invalid-api-key",{appName:h.name});const B=typeof window<"u"?Zs:void 0;this._delegate=y.initialize({options:{persistence:jf(M,h.name),popupRedirectResolver:B}}),this._delegate._updateErrorMap(vt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?as.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,y){!function ra(m,l,h){const y=Cn(m);He(y._canInitEmulator,y,"emulator-config-failed"),He(/^https?:\/\//.test(l),y,"invalid-emulator-scheme");const M=!!h?.disableWarnings,B=Au(l),{host:ie,port:Te}=function Ma(m){const l=Au(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(l.length));if(!h)return{host:"",port:null};const y=h[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const B=M[1];return{host:B,port:ia(y.substr(B.length+1))}}{const[B,ie]=y.split(":");return{host:B,port:ia(ie)}}}(l);y.config.emulator={url:`${B}//${ie}${null===Te?"":`:${Te}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:ie,port:Te,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Dr(){function m(){const l=document.createElement("p"),h=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,y)}applyActionCode(h){return function Ms(m,l){return _i.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return zs(this._delegate,h)}confirmPasswordReset(h,y){return function uo(m,l,h){return Es.apply(this,arguments)}(this._delegate,h,y)}createUserWithEmailAndPassword(h,y){var M=this;return(0,I.A)(function*(){return ri(M._delegate,function ji(m,l,h){return Pu.apply(this,arguments)}(M._delegate,h,y))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function A(m,l){return V.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function bc(m,l){const h=$s.parseLink(l);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,I.A)(function*(){nc(qc(),h._delegate,"operation-not-supported-in-this-environment");const y=yield function $o(m,l){return ga.apply(this,arguments)}(h._delegate,Zs);return y?ri(h._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Ch(m,l){Cn(m)._logFramework(l)}(this._delegate,h)}onAuthStateChanged(h,y,M){const{next:B,error:ie,complete:Te}=Zc(h,y,M);return this._delegate.onAuthStateChanged(B,ie,Te)}onIdTokenChanged(h,y,M){const{next:B,error:ie,complete:Te}=Zc(h,y,M);return this._delegate.onIdTokenChanged(B,ie,Te)}sendSignInLinkToEmail(h,y){return function Mu(m,l,h){return Ns.apply(this,arguments)}(this._delegate,h,y)}sendPasswordResetEmail(h,y){return function Ru(m,l,h){return ko.apply(this,arguments)}(this._delegate,h,y||void 0)}setPersistence(h){var y=this;return(0,I.A)(function*(){let M;switch(function md(m,l){Wo(Object.values(hr).includes(l),m,"invalid-persistence-type"),(0,Q.lV)()?Wo(l!==hr.SESSION,m,"unsupported-persistence-type"):(0,Q.Ll)()?Wo(l===hr.NONE,m,"unsupported-persistence-type"):ya()?Wo(l===hr.NONE||l===hr.LOCAL&&(0,Q.zW)(),m,"unsupported-persistence-type"):Wo(l===hr.NONE||tc(),m,"unsupported-persistence-type")}(y._delegate,h),h){case hr.SESSION:M=is;break;case hr.LOCAL:M=(yield ct(v)._isAvailable())?v:fo;break;case hr.NONE:M=oe;break;default:return Oe("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return ri(this._delegate,function Tc(m){return xa.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return ri(this._delegate,ka(this._delegate,h))}signInWithCustomToken(h){return ri(this._delegate,function vs(m,l){return xo.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,y){return ri(this._delegate,function Di(m,l,h){return(0,ne._isFirebaseServerApp)(m.app)?Promise.reject(Xe(m)):ka((0,Q.Ku)(m),so.credential(l,h)).catch(function(){var y=(0,I.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Sr(m),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,h,y))}signInWithEmailLink(h,y){return ri(this._delegate,function $i(m,l,h){return Va.apply(this,arguments)}(this._delegate,h,y))}signInWithPhoneNumber(h,y){return au(this._delegate,function Vo(m,l,h){return Wa.apply(this,arguments)}(this._delegate,h,y))}signInWithPopup(h){var y=this;return(0,I.A)(function*(){return nc(qc(),y._delegate,"operation-not-supported-in-this-environment"),ri(y._delegate,function Fc(m,l,h){return Bo.apply(this,arguments)}(y._delegate,h,Zs))})()}signInWithRedirect(h){var y=this;return(0,I.A)(function*(){return nc(qc(),y._delegate,"operation-not-supported-in-this-environment"),yield di(y._delegate),Ql(y._delegate,h,Zs)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Vl(m,l){return Cc.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=hr,m})();function Zc(m,l,h){let y=m;"function"!=typeof m&&({next:y,error:l,complete:h}=m);const M=y;return{next:ie=>M(ie&&as.getOrCreate(ie)),error:l,complete:h}}function jf(m,l){const h=function Vf(m,l){const h=Xc();if(!h)return[];const y=pn(vo,m,l);switch(h.getItem(y)){case hr.NONE:return[oe];case hr.LOCAL:return[v,is];case hr.SESSION:return[is];default:return[]}}(m,l);if(typeof self<"u"&&!h.includes(v)&&h.push(v),typeof window<"u")for(const y of[fo,is])h.includes(y)||h.push(y);return h.includes(oe)||h.push(oe),h}class rc{constructor(){this.providerId="phone",this._delegate=new qa(Uf(ee.A.auth()))}static credential(l,h){return qa.credential(l,h)}verifyPhoneNumber(l,h){return this._delegate.verifyPhoneNumber(l,h)}unwrap(){return this._delegate}}rc.PHONE_SIGN_IN_METHOD=qa.PHONE_SIGN_IN_METHOD,rc.PROVIDER_ID=qa.PROVIDER_ID;const ic=He;class sc{constructor(l,h,y=ee.A.app()){var M;ic(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new oh(y.auth(),l,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function el(m){m.INTERNAL.registerComponent(new Ie.uA("auth-compat",l=>{const h=l.getProvider("app-compat").getImmediate(),y=l.getProvider("auth");return new Bf(h,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:so,FacebookAuthProvider:ln,GithubAuthProvider:Nn,GoogleAuthProvider:Mo,OAuthProvider:mr,SAMLAuthProvider:ys,PhoneAuthProvider:rc,PhoneMultiFactorGenerator:$c,RecaptchaVerifier:sc,TwitterAuthProvider:oa,Auth:Bf,AuthCredential:Rs,Error:Q.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.14")}(ee.A)},467:(Pt,Be,U)=>{function I(ne,Q,K,le,Ie,je,Se){try{var X=ne[je](Se),te=X.value}catch(_e){return void K(_e)}X.done?Q(te):Promise.resolve(te).then(le,Ie)}function ee(ne){return function(){var Q=this,K=arguments;return new Promise(function(le,Ie){var je=ne.apply(Q,K);function Se(te){I(je,le,Ie,Se,X,"next",te)}function X(te){I(je,le,Ie,Se,X,"throw",te)}Se(void 0)})}}U.d(Be,{A:()=>ee})},1635:(Pt,Be,U)=>{function Q(ue,pe){var be={};for(var Ae in ue)Object.prototype.hasOwnProperty.call(ue,Ae)&&pe.indexOf(Ae)<0&&(be[Ae]=ue[Ae]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(Ae=Object.getOwnPropertySymbols(ue);ze<Ae.length;ze++)pe.indexOf(Ae[ze])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ae[ze])&&(be[Ae[ze]]=ue[Ae[ze]])}return be}function _e(ue,pe,be,Ae){return new(be||(be=Promise))(function(Le,st){function _t($e){try{zt(Ae.next($e))}catch(kt){st(kt)}}function $n($e){try{zt(Ae.throw($e))}catch(kt){st(kt)}}function zt($e){$e.done?Le($e.value):function ze(Le){return Le instanceof be?Le:new be(function(st){st(Le)})}($e.value).then(_t,$n)}zt((Ae=Ae.apply(ue,pe||[])).next())})}function he(ue){return this instanceof he?(this.v=ue,this):new he(ue)}function Oe(ue,pe,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Ae=be.apply(ue,pe||[]),Le=[];return ze=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),_t("next"),_t("throw"),_t("return",function st(rn){return function(dt){return Promise.resolve(dt).then(rn,kt)}}),ze[Symbol.asyncIterator]=function(){return this},ze;function _t(rn,dt){Ae[rn]&&(ze[rn]=function(gt){return new Promise(function(Ft,Je){Le.push([rn,gt,Ft,Je])>1||$n(rn,gt)})},dt&&(ze[rn]=dt(ze[rn])))}function $n(rn,dt){try{!function zt(rn){rn.value instanceof he?Promise.resolve(rn.value.v).then($e,kt):Hn(Le[0][2],rn)}(Ae[rn](dt))}catch(gt){Hn(Le[0][3],gt)}}function $e(rn){$n("next",rn)}function kt(rn){$n("throw",rn)}function Hn(rn,dt){rn(dt),Le.shift(),Le.length&&$n(Le[0][0],Le[0][1])}}function ke(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,pe=ue[Symbol.asyncIterator];return pe?pe.call(ue):(ue=function it(ue){var pe="function"==typeof Symbol&&Symbol.iterator,be=pe&&ue[pe],Ae=0;if(be)return be.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ae>=ue.length&&(ue=void 0),{value:ue&&ue[Ae++],done:!ue}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),be={},Ae("next"),Ae("throw"),Ae("return"),be[Symbol.asyncIterator]=function(){return this},be);function Ae(Le){be[Le]=ue[Le]&&function(st){return new Promise(function(_t,$n){!function ze(Le,st,_t,$n){Promise.resolve($n).then(function(zt){Le({value:zt,done:_t})},st)}(_t,$n,(st=ue[Le](st)).done,st.value)})}}}U.d(Be,{AQ:()=>Oe,N3:()=>he,Tt:()=>Q,sH:()=>_e,xN:()=>ke}),"function"==typeof SuppressedError&&SuppressedError}},Pt=>{Pt(Pt.s=2264)}]);